{"text": "2025-08-21 17:25:53.417 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for RELIANCE: unrealized=-1402986.93, today=-1402986.93\n", "record": {"elapsed": {"repr": "0:00:16.154639", "seconds": 16.154639}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for RELIANCE: unrealized=-1402986.93, today=-1402986.93", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 26756, "name": "MainProcess"}, "thread": {"id": 9680, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:25:53.417857+05:30", "timestamp": 1755777353.417857}}}
{"text": "2025-08-21 17:25:53.426 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for TCS: unrealized=-53769.71, today=-53769.71\n", "record": {"elapsed": {"repr": "0:00:16.163034", "seconds": 16.163034}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for TCS: unrealized=-53769.71, today=-53769.71", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 26756, "name": "MainProcess"}, "thread": {"id": 9680, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:25:53.426252+05:30", "timestamp": 1755777353.426252}}}
{"text": "2025-08-21 17:25:53.428 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for HDFC: unrealized=-114604.18, today=-114604.18\n", "record": {"elapsed": {"repr": "0:00:16.164833", "seconds": 16.164833}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for HDFC: unrealized=-114604.18, today=-114604.18", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 26756, "name": "MainProcess"}, "thread": {"id": 9680, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:25:53.428051+05:30", "timestamp": 1755777353.428051}}}
{"text": "2025-08-21 17:25:53.430 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for INFY: unrealized=-229666.2, today=-229666.2\n", "record": {"elapsed": {"repr": "0:00:16.166946", "seconds": 16.166946}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for INFY: unrealized=-229666.2, today=-229666.2", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 26756, "name": "MainProcess"}, "thread": {"id": 9680, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:25:53.430164+05:30", "timestamp": 1755777353.430164}}}
{"text": "2025-08-21 17:25:53.432 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for ICICIBANK: unrealized=-932109.13, today=-932109.13\n", "record": {"elapsed": {"repr": "0:00:16.168944", "seconds": 16.168944}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for ICICIBANK: unrealized=-932109.13, today=-932109.13", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 26756, "name": "MainProcess"}, "thread": {"id": 9680, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:25:53.432162+05:30", "timestamp": 1755777353.432162}}}
{"text": "2025-08-21 17:25:53.433 | INFO     | app.services.dhan_client:get_pnl:545 - Calculated totals - realized: 0.0, unrealized: -2733136.15, day: -2733136.15\n", "record": {"elapsed": {"repr": "0:00:16.170245", "seconds": 16.170245}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 545, "message": "Calculated totals - realized: 0.0, unrealized: -2733136.15, day: -2733136.15", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 26756, "name": "MainProcess"}, "thread": {"id": 9680, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:25:53.433463+05:30", "timestamp": 1755777353.433463}}}
{"text": "2025-08-21 17:25:53.434 | DEBUG    | app.services.dhan_client:get_pnl:554 - PnL consistency check passed: drift=‚Çπ0.00\n", "record": {"elapsed": {"repr": "0:00:16.171429", "seconds": 16.171429}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 554, "message": "PnL consistency check passed: drift=‚Çπ0.00", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 26756, "name": "MainProcess"}, "thread": {"id": 9680, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:25:53.434647+05:30", "timestamp": 1755777353.434647}}}
{"text": "2025-08-21 17:25:53.435 | DEBUG    | app.services.dhan_client:get_pnl:558 - Creating PnLTotals...\n", "record": {"elapsed": {"repr": "0:00:16.172714", "seconds": 16.172714}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 558, "message": "Creating PnLTotals...", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 26756, "name": "MainProcess"}, "thread": {"id": 9680, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:25:53.435932+05:30", "timestamp": 1755777353.435932}}}
{"text": "2025-08-21 17:25:53.437 | DEBUG    | app.services.dhan_client:get_pnl:565 - PnLTotals created successfully\n", "record": {"elapsed": {"repr": "0:00:16.174312", "seconds": 16.174312}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 565, "message": "PnLTotals created successfully", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 26756, "name": "MainProcess"}, "thread": {"id": 9680, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:25:53.437530+05:30", "timestamp": 1755777353.43753}}}
{"text": "2025-08-21 17:25:53.438 | DEBUG    | app.services.dhan_client:get_pnl:574 - Creating PnL model...\n", "record": {"elapsed": {"repr": "0:00:16.175548", "seconds": 16.175548}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 574, "message": "Creating PnL model...", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 26756, "name": "MainProcess"}, "thread": {"id": 9680, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:25:53.438766+05:30", "timestamp": 1755777353.438766}}}
{"text": "2025-08-21 17:25:53.440 | DEBUG    | app.services.dhan_client:get_pnl:575 - Model fields: totals=<class 'app.models.schemas.PnLTotals'>, perSymbol=5, updated_at=2025-08-21 17:25:53.417717+05:30, trading_day=2025-08-21\n", "record": {"elapsed": {"repr": "0:00:16.177064", "seconds": 16.177064}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 575, "message": "Model fields: totals=<class 'app.models.schemas.PnLTotals'>, perSymbol=5, updated_at=2025-08-21 17:25:53.417717+05:30, trading_day=2025-08-21", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 26756, "name": "MainProcess"}, "thread": {"id": 9680, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:25:53.440282+05:30", "timestamp": 1755777353.440282}}}
{"text": "2025-08-21 17:25:53.442 | DEBUG    | app.services.dhan_client:get_pnl:584 - Created PnL model: totals=PnLTotals(realized=0.0, unrealized=-2733136.15, day=-2733136.15, currency='INR') per_symbol=[PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=827, avg=1814.66, ltp=118.18, unrealized=-1402986.93, today_pnl=-1402986.93), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=684, avg=1787.03, ltp=1865.64, unrealized=-53769.71, today_pnl=-53769.71), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=688, avg=1976.09, ltp=1809.51, unrealized=-114604.18, today_pnl=-114604.18), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=803, avg=834.66, ltp=1120.67, unrealized=-229666.2, today_pnl=-229666.2), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=1505, avg=1438.18, ltp=818.84, unrealized=-932109.13, today_pnl=-932109.13)] updated_at=datetime.datetime(2025, 8, 21, 17, 25, 53, 417717, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))) trading_day='2025-08-21'\n", "record": {"elapsed": {"repr": "0:00:16.179207", "seconds": 16.179207}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 584, "message": "Created PnL model: totals=PnLTotals(realized=0.0, unrealized=-2733136.15, day=-2733136.15, currency='INR') per_symbol=[PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=827, avg=1814.66, ltp=118.18, unrealized=-1402986.93, today_pnl=-1402986.93), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=684, avg=1787.03, ltp=1865.64, unrealized=-53769.71, today_pnl=-53769.71), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=688, avg=1976.09, ltp=1809.51, unrealized=-114604.18, today_pnl=-114604.18), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=803, avg=834.66, ltp=1120.67, unrealized=-229666.2, today_pnl=-229666.2), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=1505, avg=1438.18, ltp=818.84, unrealized=-932109.13, today_pnl=-932109.13)] updated_at=datetime.datetime(2025, 8, 21, 17, 25, 53, 417717, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))) trading_day='2025-08-21'", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 26756, "name": "MainProcess"}, "thread": {"id": 9680, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:25:53.442425+05:30", "timestamp": 1755777353.442425}}}
{"text": "2025-08-21 17:25:53.445 | DEBUG    | app.services.dhan_client:get_pnl:585 - PnL model fields: {'totals': PnLTotals(realized=0.0, unrealized=-2733136.15, day=-2733136.15, currency='INR'), 'per_symbol': [PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=827, avg=1814.66, ltp=118.18, unrealized=-1402986.93, today_pnl=-1402986.93), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=684, avg=1787.03, ltp=1865.64, unrealized=-53769.71, today_pnl=-53769.71), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=688, avg=1976.09, ltp=1809.51, unrealized=-114604.18, today_pnl=-114604.18), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=803, avg=834.66, ltp=1120.67, unrealized=-229666.2, today_pnl=-229666.2), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=1505, avg=1438.18, ltp=818.84, unrealized=-932109.13, today_pnl=-932109.13)], 'updated_at': datetime.datetime(2025, 8, 21, 17, 25, 53, 417717, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))), 'trading_day': '2025-08-21'}\n", "record": {"elapsed": {"repr": "0:00:16.181807", "seconds": 16.181807}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 585, "message": "PnL model fields: {'totals': PnLTotals(realized=0.0, unrealized=-2733136.15, day=-2733136.15, currency='INR'), 'per_symbol': [PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=827, avg=1814.66, ltp=118.18, unrealized=-1402986.93, today_pnl=-1402986.93), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=684, avg=1787.03, ltp=1865.64, unrealized=-53769.71, today_pnl=-53769.71), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=688, avg=1976.09, ltp=1809.51, unrealized=-114604.18, today_pnl=-114604.18), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=803, avg=834.66, ltp=1120.67, unrealized=-229666.2, today_pnl=-229666.2), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=1505, avg=1438.18, ltp=818.84, unrealized=-932109.13, today_pnl=-932109.13)], 'updated_at': datetime.datetime(2025, 8, 21, 17, 25, 53, 417717, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))), 'trading_day': '2025-08-21'}", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 26756, "name": "MainProcess"}, "thread": {"id": 9680, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:25:53.445025+05:30", "timestamp": 1755777353.445025}}}
{"text": "2025-08-21 17:25:53.447 | INFO     | app.services.dhan_client:get_pnl:587 - P&L calculation completed successfully: 5 symbols, unrealized=‚Çπ-2733136.15\n", "record": {"elapsed": {"repr": "0:00:16.183840", "seconds": 16.18384}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 587, "message": "P&L calculation completed successfully: 5 symbols, unrealized=‚Çπ-2733136.15", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 26756, "name": "MainProcess"}, "thread": {"id": 9680, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:25:53.447058+05:30", "timestamp": 1755777353.447058}}}
{"text": "2025-08-21 17:25:53.448 | DEBUG    | app.ws.live:emit_delta:408 - Emitted pnl delta: seq=18\n", "record": {"elapsed": {"repr": "0:00:16.185589", "seconds": 16.185589}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "emit_delta", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 408, "message": "Emitted pnl delta: seq=18", "module": "live", "name": "app.ws.live", "process": {"id": 26756, "name": "MainProcess"}, "thread": {"id": 9680, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:25:53.448807+05:30", "timestamp": 1755777353.448807}}}
{"text": "2025-08-21 17:25:53.527 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:16.263976", "seconds": 16.263976}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 26756, "name": "MainProcess"}, "thread": {"id": 23968, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 17:25:53.527194+05:30", "timestamp": 1755777353.527194}}}
{"text": "2025-08-21 17:25:53.528 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:16.265559", "seconds": 16.265559}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 26756, "name": "MainProcess"}, "thread": {"id": 23968, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 17:25:53.528777+05:30", "timestamp": 1755777353.528777}}}
{"text": "2025-08-21 17:25:53.530 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:16.266934", "seconds": 16.266934}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 26756, "name": "MainProcess"}, "thread": {"id": 23968, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 17:25:53.530152+05:30", "timestamp": 1755777353.530152}}}
{"text": "2025-08-21 17:25:53.530 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:16.267761", "seconds": 16.267761}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 26756, "name": "MainProcess"}, "thread": {"id": 23968, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 17:25:53.530979+05:30", "timestamp": 1755777353.530979}}}
{"text": "2025-08-21 17:25:53.531 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:16.268769", "seconds": 16.268769}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 26756, "name": "MainProcess"}, "thread": {"id": 23968, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 17:25:53.531987+05:30", "timestamp": 1755777353.531987}}}
{"text": "2025-08-21 17:25:53.533 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:16.270257", "seconds": 16.270257}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 26756, "name": "MainProcess"}, "thread": {"id": 23968, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 17:25:53.533475+05:30", "timestamp": 1755777353.533475}}}
{"text": "2025-08-21 17:25:53.534 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:16.271695", "seconds": 16.271695}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 26756, "name": "MainProcess"}, "thread": {"id": 23968, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 17:25:53.534913+05:30", "timestamp": 1755777353.534913}}}
{"text": "2025-08-21 17:25:53.535 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:16.272633", "seconds": 16.272633}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 26756, "name": "MainProcess"}, "thread": {"id": 23968, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 17:25:53.535851+05:30", "timestamp": 1755777353.535851}}}
{"text": "2025-08-21 17:25:53.536 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:16.273663", "seconds": 16.273663}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 26756, "name": "MainProcess"}, "thread": {"id": 23968, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 17:25:53.536881+05:30", "timestamp": 1755777353.536881}}}
{"text": "2025-08-21 17:25:53.537 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:16.274690", "seconds": 16.27469}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 26756, "name": "MainProcess"}, "thread": {"id": 23968, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 17:25:53.537908+05:30", "timestamp": 1755777353.537908}}}
{"text": "2025-08-21 17:25:53.698 | DEBUG    | app.ws.live:emit_delta:408 - Emitted positions delta: seq=19\n", "record": {"elapsed": {"repr": "0:00:16.435093", "seconds": 16.435093}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "emit_delta", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 408, "message": "Emitted positions delta: seq=19", "module": "live", "name": "app.ws.live", "process": {"id": 26756, "name": "MainProcess"}, "thread": {"id": 9680, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:25:53.698311+05:30", "timestamp": 1755777353.698311}}}
{"text": "2025-08-21 17:25:55.002 | INFO     | app.services.dhan_client:get_pnl:489 - Starting accurate P&L calculation\n", "record": {"elapsed": {"repr": "0:00:17.739103", "seconds": 17.739103}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 489, "message": "Starting accurate P&L calculation", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 26756, "name": "MainProcess"}, "thread": {"id": 9680, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:25:55.002321+05:30", "timestamp": 1755777355.002321}}}
{"text": "2025-08-21 17:25:55.004 | INFO     | app.services.dhan_client:get_pnl:491 - Fetched 5 positions\n", "record": {"elapsed": {"repr": "0:00:17.741564", "seconds": 17.741564}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 491, "message": "Fetched 5 positions", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 26756, "name": "MainProcess"}, "thread": {"id": 9680, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:25:55.004782+05:30", "timestamp": 1755777355.004782}}}
{"text": "2025-08-21 17:25:55.006 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for RELIANCE: unrealized=-1403465.31, today=-1403465.31\n", "record": {"elapsed": {"repr": "0:00:17.743484", "seconds": 17.743484}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for RELIANCE: unrealized=-1403465.31, today=-1403465.31", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 26756, "name": "MainProcess"}, "thread": {"id": 9680, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:25:55.006702+05:30", "timestamp": 1755777355.006702}}}
{"text": "2025-08-21 17:25:55.008 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for TCS: unrealized=-61020.35, today=-61020.35\n", "record": {"elapsed": {"repr": "0:00:17.745113", "seconds": 17.745113}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for TCS: unrealized=-61020.35, today=-61020.35", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 26756, "name": "MainProcess"}, "thread": {"id": 9680, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:25:55.008331+05:30", "timestamp": 1755777355.008331}}}
{"text": "2025-08-21 17:25:55.009 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for HDFC: unrealized=-110139.01, today=-110139.01\n", "record": {"elapsed": {"repr": "0:00:17.746359", "seconds": 17.746359}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for HDFC: unrealized=-110139.01, today=-110139.01", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 26756, "name": "MainProcess"}, "thread": {"id": 9680, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:25:55.009577+05:30", "timestamp": 1755777355.009577}}}
{"text": "2025-08-21 17:25:55.012 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for INFY: unrealized=-229656.8, today=-229656.8\n", "record": {"elapsed": {"repr": "0:00:17.749173", "seconds": 17.749173}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for INFY: unrealized=-229656.8, today=-229656.8", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 26756, "name": "MainProcess"}, "thread": {"id": 9680, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:25:55.012391+05:30", "timestamp": 1755777355.012391}}}
{"text": "2025-08-21 17:25:55.017 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for ICICIBANK: unrealized=-953819.6, today=-953819.6\n", "record": {"elapsed": {"repr": "0:00:17.754436", "seconds": 17.754436}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for ICICIBANK: unrealized=-953819.6, today=-953819.6", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 26756, "name": "MainProcess"}, "thread": {"id": 9680, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:25:55.017654+05:30", "timestamp": 1755777355.017654}}}
{"text": "2025-08-21 17:25:55.019 | INFO     | app.services.dhan_client:get_pnl:545 - Calculated totals - realized: 0.0, unrealized: -2758101.07, day: -2758101.07\n", "record": {"elapsed": {"repr": "0:00:17.756008", "seconds": 17.756008}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 545, "message": "Calculated totals - realized: 0.0, unrealized: -2758101.07, day: -2758101.07", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 26756, "name": "MainProcess"}, "thread": {"id": 9680, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:25:55.019226+05:30", "timestamp": 1755777355.019226}}}
{"text": "2025-08-21 17:25:55.021 | DEBUG    | app.services.dhan_client:get_pnl:554 - PnL consistency check passed: drift=‚Çπ0.00\n", "record": {"elapsed": {"repr": "0:00:17.757966", "seconds": 17.757966}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 554, "message": "PnL consistency check passed: drift=‚Çπ0.00", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 26756, "name": "MainProcess"}, "thread": {"id": 9680, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:25:55.021184+05:30", "timestamp": 1755777355.021184}}}
{"text": "2025-08-21 17:25:55.025 | DEBUG    | app.services.dhan_client:get_pnl:558 - Creating PnLTotals...\n", "record": {"elapsed": {"repr": "0:00:17.762735", "seconds": 17.762735}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 558, "message": "Creating PnLTotals...", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 26756, "name": "MainProcess"}, "thread": {"id": 9680, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:25:55.025953+05:30", "timestamp": 1755777355.025953}}}
{"text": "2025-08-21 17:25:55.029 | DEBUG    | app.services.dhan_client:get_pnl:565 - PnLTotals created successfully\n", "record": {"elapsed": {"repr": "0:00:17.766103", "seconds": 17.766103}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 565, "message": "PnLTotals created successfully", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 26756, "name": "MainProcess"}, "thread": {"id": 9680, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:25:55.029321+05:30", "timestamp": 1755777355.029321}}}
{"text": "2025-08-21 17:25:55.031 | DEBUG    | app.services.dhan_client:get_pnl:574 - Creating PnL model...\n", "record": {"elapsed": {"repr": "0:00:17.767985", "seconds": 17.767985}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 574, "message": "Creating PnL model...", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 26756, "name": "MainProcess"}, "thread": {"id": 9680, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:25:55.031203+05:30", "timestamp": 1755777355.031203}}}
{"text": "2025-08-21 17:25:55.035 | DEBUG    | app.services.dhan_client:get_pnl:575 - Model fields: totals=<class 'app.models.schemas.PnLTotals'>, perSymbol=5, updated_at=2025-08-21 17:25:55.006517+05:30, trading_day=2025-08-21\n", "record": {"elapsed": {"repr": "0:00:17.771932", "seconds": 17.771932}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 575, "message": "Model fields: totals=<class 'app.models.schemas.PnLTotals'>, perSymbol=5, updated_at=2025-08-21 17:25:55.006517+05:30, trading_day=2025-08-21", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 26756, "name": "MainProcess"}, "thread": {"id": 9680, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:25:55.035150+05:30", "timestamp": 1755777355.03515}}}
{"text": "2025-08-21 17:25:55.038 | DEBUG    | app.services.dhan_client:get_pnl:584 - Created PnL model: totals=PnLTotals(realized=0.0, unrealized=-2758101.07, day=-2758101.07, currency='INR') per_symbol=[PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=827, avg=1814.66, ltp=117.6, unrealized=-1403465.31, today_pnl=-1403465.31), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=684, avg=1787.03, ltp=1876.24, unrealized=-61020.35, today_pnl=-61020.35), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=688, avg=1976.09, ltp=1816.0, unrealized=-110139.01, today_pnl=-110139.01), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=803, avg=834.66, ltp=1120.66, unrealized=-229656.8, today_pnl=-229656.8), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=1505, avg=1438.18, ltp=804.41, unrealized=-953819.6, today_pnl=-953819.6)] updated_at=datetime.datetime(2025, 8, 21, 17, 25, 55, 6517, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))) trading_day='2025-08-21'\n", "record": {"elapsed": {"repr": "0:00:17.775062", "seconds": 17.775062}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 584, "message": "Created PnL model: totals=PnLTotals(realized=0.0, unrealized=-2758101.07, day=-2758101.07, currency='INR') per_symbol=[PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=827, avg=1814.66, ltp=117.6, unrealized=-1403465.31, today_pnl=-1403465.31), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=684, avg=1787.03, ltp=1876.24, unrealized=-61020.35, today_pnl=-61020.35), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=688, avg=1976.09, ltp=1816.0, unrealized=-110139.01, today_pnl=-110139.01), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=803, avg=834.66, ltp=1120.66, unrealized=-229656.8, today_pnl=-229656.8), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=1505, avg=1438.18, ltp=804.41, unrealized=-953819.6, today_pnl=-953819.6)] updated_at=datetime.datetime(2025, 8, 21, 17, 25, 55, 6517, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))) trading_day='2025-08-21'", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 26756, "name": "MainProcess"}, "thread": {"id": 9680, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:25:55.038280+05:30", "timestamp": 1755777355.03828}}}
{"text": "2025-08-21 17:25:55.041 | DEBUG    | app.services.dhan_client:get_pnl:585 - PnL model fields: {'totals': PnLTotals(realized=0.0, unrealized=-2758101.07, day=-2758101.07, currency='INR'), 'per_symbol': [PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=827, avg=1814.66, ltp=117.6, unrealized=-1403465.31, today_pnl=-1403465.31), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=684, avg=1787.03, ltp=1876.24, unrealized=-61020.35, today_pnl=-61020.35), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=688, avg=1976.09, ltp=1816.0, unrealized=-110139.01, today_pnl=-110139.01), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=803, avg=834.66, ltp=1120.66, unrealized=-229656.8, today_pnl=-229656.8), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=1505, avg=1438.18, ltp=804.41, unrealized=-953819.6, today_pnl=-953819.6)], 'updated_at': datetime.datetime(2025, 8, 21, 17, 25, 55, 6517, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))), 'trading_day': '2025-08-21'}\n", "record": {"elapsed": {"repr": "0:00:17.778450", "seconds": 17.77845}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 585, "message": "PnL model fields: {'totals': PnLTotals(realized=0.0, unrealized=-2758101.07, day=-2758101.07, currency='INR'), 'per_symbol': [PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=827, avg=1814.66, ltp=117.6, unrealized=-1403465.31, today_pnl=-1403465.31), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=684, avg=1787.03, ltp=1876.24, unrealized=-61020.35, today_pnl=-61020.35), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=688, avg=1976.09, ltp=1816.0, unrealized=-110139.01, today_pnl=-110139.01), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=803, avg=834.66, ltp=1120.66, unrealized=-229656.8, today_pnl=-229656.8), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=1505, avg=1438.18, ltp=804.41, unrealized=-953819.6, today_pnl=-953819.6)], 'updated_at': datetime.datetime(2025, 8, 21, 17, 25, 55, 6517, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))), 'trading_day': '2025-08-21'}", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 26756, "name": "MainProcess"}, "thread": {"id": 9680, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:25:55.041668+05:30", "timestamp": 1755777355.041668}}}
{"text": "2025-08-21 17:25:55.044 | INFO     | app.services.dhan_client:get_pnl:587 - P&L calculation completed successfully: 5 symbols, unrealized=‚Çπ-2758101.07\n", "record": {"elapsed": {"repr": "0:00:17.781301", "seconds": 17.781301}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 587, "message": "P&L calculation completed successfully: 5 symbols, unrealized=‚Çπ-2758101.07", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 26756, "name": "MainProcess"}, "thread": {"id": 9680, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:25:55.044519+05:30", "timestamp": 1755777355.044519}}}
{"text": "2025-08-21 17:25:55.047 | DEBUG    | app.ws.live:emit_delta:408 - Emitted pnl delta: seq=20\n", "record": {"elapsed": {"repr": "0:00:17.784031", "seconds": 17.784031}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "emit_delta", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 408, "message": "Emitted pnl delta: seq=20", "module": "live", "name": "app.ws.live", "process": {"id": 26756, "name": "MainProcess"}, "thread": {"id": 9680, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:25:55.047249+05:30", "timestamp": 1755777355.047249}}}
{"text": "2025-08-21 17:25:55.541 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:18.278300", "seconds": 18.2783}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 26756, "name": "MainProcess"}, "thread": {"id": 23968, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 17:25:55.541518+05:30", "timestamp": 1755777355.541518}}}
{"text": "2025-08-21 17:25:55.546 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:18.283691", "seconds": 18.283691}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 26756, "name": "MainProcess"}, "thread": {"id": 23968, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 17:25:55.546909+05:30", "timestamp": 1755777355.546909}}}
{"text": "2025-08-21 17:25:55.550 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:18.287487", "seconds": 18.287487}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 26756, "name": "MainProcess"}, "thread": {"id": 23968, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 17:25:55.550705+05:30", "timestamp": 1755777355.550705}}}
{"text": "2025-08-21 17:25:55.552 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:18.289028", "seconds": 18.289028}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 26756, "name": "MainProcess"}, "thread": {"id": 23968, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 17:25:55.552246+05:30", "timestamp": 1755777355.552246}}}
{"text": "2025-08-21 17:25:55.554 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:18.290825", "seconds": 18.290825}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 26756, "name": "MainProcess"}, "thread": {"id": 23968, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 17:25:55.554043+05:30", "timestamp": 1755777355.554043}}}
{"text": "2025-08-21 17:25:55.561 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:18.298397", "seconds": 18.298397}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 26756, "name": "MainProcess"}, "thread": {"id": 23968, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 17:25:55.561615+05:30", "timestamp": 1755777355.561615}}}
{"text": "2025-08-21 17:25:55.570 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:18.306885", "seconds": 18.306885}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 26756, "name": "MainProcess"}, "thread": {"id": 23968, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 17:25:55.570103+05:30", "timestamp": 1755777355.570103}}}
{"text": "2025-08-21 17:25:55.573 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:18.310776", "seconds": 18.310776}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 26756, "name": "MainProcess"}, "thread": {"id": 23968, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 17:25:55.573994+05:30", "timestamp": 1755777355.573994}}}
{"text": "2025-08-21 17:25:55.577 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:18.314114", "seconds": 18.314114}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 26756, "name": "MainProcess"}, "thread": {"id": 23968, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 17:25:55.577332+05:30", "timestamp": 1755777355.577332}}}
{"text": "2025-08-21 17:25:55.579 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:18.316170", "seconds": 18.31617}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 26756, "name": "MainProcess"}, "thread": {"id": 23968, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 17:25:55.579388+05:30", "timestamp": 1755777355.579388}}}
{"text": "2025-08-21 17:25:56.902 | DEBUG    | app.ws.live:emit_delta:408 - Emitted positions delta: seq=21\n", "record": {"elapsed": {"repr": "0:00:19.639395", "seconds": 19.639395}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "emit_delta", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 408, "message": "Emitted positions delta: seq=21", "module": "live", "name": "app.ws.live", "process": {"id": 26756, "name": "MainProcess"}, "thread": {"id": 9680, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:25:56.902613+05:30", "timestamp": 1755777356.902613}}}
{"text": "2025-08-21 17:25:56.904 | INFO     | app.services.dhan_client:get_pnl:489 - Starting accurate P&L calculation\n", "record": {"elapsed": {"repr": "0:00:19.640802", "seconds": 19.640802}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 489, "message": "Starting accurate P&L calculation", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 26756, "name": "MainProcess"}, "thread": {"id": 9680, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:25:56.904020+05:30", "timestamp": 1755777356.90402}}}
{"text": "2025-08-21 17:25:56.905 | INFO     | app.services.dhan_client:get_pnl:491 - Fetched 5 positions\n", "record": {"elapsed": {"repr": "0:00:19.642701", "seconds": 19.642701}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 491, "message": "Fetched 5 positions", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 26756, "name": "MainProcess"}, "thread": {"id": 9680, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:25:56.905919+05:30", "timestamp": 1755777356.905919}}}
{"text": "2025-08-21 17:25:56.907 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for RELIANCE: unrealized=-1402121.48, today=-1402121.48\n", "record": {"elapsed": {"repr": "0:00:19.644582", "seconds": 19.644582}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for RELIANCE: unrealized=-1402121.48, today=-1402121.48", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 26756, "name": "MainProcess"}, "thread": {"id": 9680, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:25:56.907800+05:30", "timestamp": 1755777356.9078}}}
{"text": "2025-08-21 17:25:56.908 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for TCS: unrealized=-54330.1, today=-54330.1\n", "record": {"elapsed": {"repr": "0:00:19.645716", "seconds": 19.645716}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for TCS: unrealized=-54330.1, today=-54330.1", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 26756, "name": "MainProcess"}, "thread": {"id": 9680, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:25:56.908934+05:30", "timestamp": 1755777356.908934}}}
{"text": "2025-08-21 17:25:56.910 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for HDFC: unrealized=-104505.69, today=-104505.69\n", "record": {"elapsed": {"repr": "0:00:19.647005", "seconds": 19.647005}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for HDFC: unrealized=-104505.69, today=-104505.69", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 26756, "name": "MainProcess"}, "thread": {"id": 9680, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:25:56.910223+05:30", "timestamp": 1755777356.910223}}}
{"text": "2025-08-21 17:25:56.911 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for INFY: unrealized=-234965.53, today=-234965.53\n", "record": {"elapsed": {"repr": "0:00:19.648058", "seconds": 19.648058}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for INFY: unrealized=-234965.53, today=-234965.53", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 26756, "name": "MainProcess"}, "thread": {"id": 9680, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:25:56.911276+05:30", "timestamp": 1755777356.911276}}}
{"text": "2025-08-21 17:25:56.912 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for ICICIBANK: unrealized=-971811.48, today=-971811.48\n", "record": {"elapsed": {"repr": "0:00:19.649645", "seconds": 19.649645}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for ICICIBANK: unrealized=-971811.48, today=-971811.48", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 26756, "name": "MainProcess"}, "thread": {"id": 9680, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:25:56.912863+05:30", "timestamp": 1755777356.912863}}}
{"text": "2025-08-21 17:25:56.915 | INFO     | app.services.dhan_client:get_pnl:545 - Calculated totals - realized: 0.0, unrealized: -2767734.28, day: -2767734.28\n", "record": {"elapsed": {"repr": "0:00:19.651846", "seconds": 19.651846}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 545, "message": "Calculated totals - realized: 0.0, unrealized: -2767734.28, day: -2767734.28", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 26756, "name": "MainProcess"}, "thread": {"id": 9680, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:25:56.915064+05:30", "timestamp": 1755777356.915064}}}
{"text": "2025-08-21 17:25:56.916 | DEBUG    | app.services.dhan_client:get_pnl:554 - PnL consistency check passed: drift=‚Çπ0.00\n", "record": {"elapsed": {"repr": "0:00:19.653592", "seconds": 19.653592}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 554, "message": "PnL consistency check passed: drift=‚Çπ0.00", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 26756, "name": "MainProcess"}, "thread": {"id": 9680, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:25:56.916810+05:30", "timestamp": 1755777356.91681}}}
{"text": "2025-08-21 17:25:56.918 | DEBUG    | app.services.dhan_client:get_pnl:558 - Creating PnLTotals...\n", "record": {"elapsed": {"repr": "0:00:19.654804", "seconds": 19.654804}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 558, "message": "Creating PnLTotals...", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 26756, "name": "MainProcess"}, "thread": {"id": 9680, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:25:56.918022+05:30", "timestamp": 1755777356.918022}}}
{"text": "2025-08-21 17:25:56.919 | DEBUG    | app.services.dhan_client:get_pnl:565 - PnLTotals created successfully\n", "record": {"elapsed": {"repr": "0:00:19.655986", "seconds": 19.655986}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 565, "message": "PnLTotals created successfully", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 26756, "name": "MainProcess"}, "thread": {"id": 9680, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:25:56.919204+05:30", "timestamp": 1755777356.919204}}}
{"text": "2025-08-21 17:25:56.920 | DEBUG    | app.services.dhan_client:get_pnl:574 - Creating PnL model...\n", "record": {"elapsed": {"repr": "0:00:19.657036", "seconds": 19.657036}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 574, "message": "Creating PnL model...", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 26756, "name": "MainProcess"}, "thread": {"id": 9680, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:25:56.920254+05:30", "timestamp": 1755777356.920254}}}
{"text": "2025-08-21 17:25:56.921 | DEBUG    | app.services.dhan_client:get_pnl:575 - Model fields: totals=<class 'app.models.schemas.PnLTotals'>, perSymbol=5, updated_at=2025-08-21 17:25:56.907494+05:30, trading_day=2025-08-21\n", "record": {"elapsed": {"repr": "0:00:19.658004", "seconds": 19.658004}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 575, "message": "Model fields: totals=<class 'app.models.schemas.PnLTotals'>, perSymbol=5, updated_at=2025-08-21 17:25:56.907494+05:30, trading_day=2025-08-21", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 26756, "name": "MainProcess"}, "thread": {"id": 9680, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:25:56.921222+05:30", "timestamp": 1755777356.921222}}}
{"text": "2025-08-21 17:25:56.922 | DEBUG    | app.services.dhan_client:get_pnl:584 - Created PnL model: totals=PnLTotals(realized=0.0, unrealized=-2767734.28, day=-2767734.28, currency='INR') per_symbol=[PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=827, avg=1814.66, ltp=119.23, unrealized=-1402121.48, today_pnl=-1402121.48), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=684, avg=1787.03, ltp=1866.46, unrealized=-54330.1, today_pnl=-54330.1), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=688, avg=1976.09, ltp=1824.19, unrealized=-104505.69, today_pnl=-104505.69), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=803, avg=834.66, ltp=1127.27, unrealized=-234965.53, today_pnl=-234965.53), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=1505, avg=1438.18, ltp=792.46, unrealized=-971811.48, today_pnl=-971811.48)] updated_at=datetime.datetime(2025, 8, 21, 17, 25, 56, 907494, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))) trading_day='2025-08-21'\n", "record": {"elapsed": {"repr": "0:00:19.659641", "seconds": 19.659641}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 584, "message": "Created PnL model: totals=PnLTotals(realized=0.0, unrealized=-2767734.28, day=-2767734.28, currency='INR') per_symbol=[PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=827, avg=1814.66, ltp=119.23, unrealized=-1402121.48, today_pnl=-1402121.48), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=684, avg=1787.03, ltp=1866.46, unrealized=-54330.1, today_pnl=-54330.1), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=688, avg=1976.09, ltp=1824.19, unrealized=-104505.69, today_pnl=-104505.69), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=803, avg=834.66, ltp=1127.27, unrealized=-234965.53, today_pnl=-234965.53), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=1505, avg=1438.18, ltp=792.46, unrealized=-971811.48, today_pnl=-971811.48)] updated_at=datetime.datetime(2025, 8, 21, 17, 25, 56, 907494, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))) trading_day='2025-08-21'", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 26756, "name": "MainProcess"}, "thread": {"id": 9680, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:25:56.922859+05:30", "timestamp": 1755777356.922859}}}
{"text": "2025-08-21 17:25:56.925 | DEBUG    | app.services.dhan_client:get_pnl:585 - PnL model fields: {'totals': PnLTotals(realized=0.0, unrealized=-2767734.28, day=-2767734.28, currency='INR'), 'per_symbol': [PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=827, avg=1814.66, ltp=119.23, unrealized=-1402121.48, today_pnl=-1402121.48), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=684, avg=1787.03, ltp=1866.46, unrealized=-54330.1, today_pnl=-54330.1), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=688, avg=1976.09, ltp=1824.19, unrealized=-104505.69, today_pnl=-104505.69), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=803, avg=834.66, ltp=1127.27, unrealized=-234965.53, today_pnl=-234965.53), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=1505, avg=1438.18, ltp=792.46, unrealized=-971811.48, today_pnl=-971811.48)], 'updated_at': datetime.datetime(2025, 8, 21, 17, 25, 56, 907494, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))), 'trading_day': '2025-08-21'}\n", "record": {"elapsed": {"repr": "0:00:19.661792", "seconds": 19.661792}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 585, "message": "PnL model fields: {'totals': PnLTotals(realized=0.0, unrealized=-2767734.28, day=-2767734.28, currency='INR'), 'per_symbol': [PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=827, avg=1814.66, ltp=119.23, unrealized=-1402121.48, today_pnl=-1402121.48), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=684, avg=1787.03, ltp=1866.46, unrealized=-54330.1, today_pnl=-54330.1), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=688, avg=1976.09, ltp=1824.19, unrealized=-104505.69, today_pnl=-104505.69), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=803, avg=834.66, ltp=1127.27, unrealized=-234965.53, today_pnl=-234965.53), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=1505, avg=1438.18, ltp=792.46, unrealized=-971811.48, today_pnl=-971811.48)], 'updated_at': datetime.datetime(2025, 8, 21, 17, 25, 56, 907494, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))), 'trading_day': '2025-08-21'}", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 26756, "name": "MainProcess"}, "thread": {"id": 9680, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:25:56.925010+05:30", "timestamp": 1755777356.92501}}}
{"text": "2025-08-21 17:25:56.927 | INFO     | app.services.dhan_client:get_pnl:587 - P&L calculation completed successfully: 5 symbols, unrealized=‚Çπ-2767734.28\n", "record": {"elapsed": {"repr": "0:00:19.664298", "seconds": 19.664298}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 587, "message": "P&L calculation completed successfully: 5 symbols, unrealized=‚Çπ-2767734.28", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 26756, "name": "MainProcess"}, "thread": {"id": 9680, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:25:56.927516+05:30", "timestamp": 1755777356.927516}}}
{"text": "2025-08-21 17:25:56.930 | DEBUG    | app.ws.live:emit_delta:408 - Emitted pnl delta: seq=22\n", "record": {"elapsed": {"repr": "0:00:19.667038", "seconds": 19.667038}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "emit_delta", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 408, "message": "Emitted pnl delta: seq=22", "module": "live", "name": "app.ws.live", "process": {"id": 26756, "name": "MainProcess"}, "thread": {"id": 9680, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:25:56.930256+05:30", "timestamp": 1755777356.930256}}}
{"text": "2025-08-21 17:25:57.584 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:20.321191", "seconds": 20.321191}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 26756, "name": "MainProcess"}, "thread": {"id": 23968, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 17:25:57.584409+05:30", "timestamp": 1755777357.584409}}}
{"text": "2025-08-21 17:25:57.585 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:20.322446", "seconds": 20.322446}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 26756, "name": "MainProcess"}, "thread": {"id": 23968, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 17:25:57.585664+05:30", "timestamp": 1755777357.585664}}}
{"text": "2025-08-21 17:25:57.586 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:20.323714", "seconds": 20.323714}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 26756, "name": "MainProcess"}, "thread": {"id": 23968, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 17:25:57.586932+05:30", "timestamp": 1755777357.586932}}}
{"text": "2025-08-21 17:25:57.588 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:20.325110", "seconds": 20.32511}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 26756, "name": "MainProcess"}, "thread": {"id": 23968, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 17:25:57.588328+05:30", "timestamp": 1755777357.588328}}}
{"text": "2025-08-21 17:25:57.589 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:20.326421", "seconds": 20.326421}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 26756, "name": "MainProcess"}, "thread": {"id": 23968, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 17:25:57.589639+05:30", "timestamp": 1755777357.589639}}}
{"text": "2025-08-21 17:25:57.590 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:20.327548", "seconds": 20.327548}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 26756, "name": "MainProcess"}, "thread": {"id": 23968, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 17:25:57.590766+05:30", "timestamp": 1755777357.590766}}}
{"text": "2025-08-21 17:25:57.592 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:20.328842", "seconds": 20.328842}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 26756, "name": "MainProcess"}, "thread": {"id": 23968, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 17:25:57.592060+05:30", "timestamp": 1755777357.59206}}}
{"text": "2025-08-21 17:25:57.593 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:20.330260", "seconds": 20.33026}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 26756, "name": "MainProcess"}, "thread": {"id": 23968, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 17:25:57.593478+05:30", "timestamp": 1755777357.593478}}}
{"text": "2025-08-21 17:25:57.594 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:20.331245", "seconds": 20.331245}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 26756, "name": "MainProcess"}, "thread": {"id": 23968, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 17:25:57.594463+05:30", "timestamp": 1755777357.594463}}}
{"text": "2025-08-21 17:25:57.595 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:20.332550", "seconds": 20.33255}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 26756, "name": "MainProcess"}, "thread": {"id": 23968, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 17:25:57.595768+05:30", "timestamp": 1755777357.595768}}}
{"text": "2025-08-21 17:25:58.694 | DEBUG    | app.ws.live:emit_delta:408 - Emitted positions delta: seq=23\n", "record": {"elapsed": {"repr": "0:00:21.430956", "seconds": 21.430956}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "emit_delta", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 408, "message": "Emitted positions delta: seq=23", "module": "live", "name": "app.ws.live", "process": {"id": 26756, "name": "MainProcess"}, "thread": {"id": 9680, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:25:58.694174+05:30", "timestamp": 1755777358.694174}}}
{"text": "2025-08-21 17:25:58.726 | INFO     | app.services.dhan_client:get_pnl:489 - Starting accurate P&L calculation\n", "record": {"elapsed": {"repr": "0:00:21.463136", "seconds": 21.463136}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 489, "message": "Starting accurate P&L calculation", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 26756, "name": "MainProcess"}, "thread": {"id": 9680, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:25:58.726354+05:30", "timestamp": 1755777358.726354}}}
{"text": "2025-08-21 17:25:58.728 | INFO     | app.services.dhan_client:get_pnl:491 - Fetched 5 positions\n", "record": {"elapsed": {"repr": "0:00:21.465138", "seconds": 21.465138}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 491, "message": "Fetched 5 positions", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 26756, "name": "MainProcess"}, "thread": {"id": 9680, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:25:58.728356+05:30", "timestamp": 1755777358.728356}}}
{"text": "2025-08-21 17:25:58.730 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for RELIANCE: unrealized=-1403514.21, today=-1403514.21\n", "record": {"elapsed": {"repr": "0:00:21.467249", "seconds": 21.467249}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for RELIANCE: unrealized=-1403514.21, today=-1403514.21", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 26756, "name": "MainProcess"}, "thread": {"id": 9680, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:25:58.730467+05:30", "timestamp": 1755777358.730467}}}
{"text": "2025-08-21 17:25:58.732 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for TCS: unrealized=-53102.91, today=-53102.91\n", "record": {"elapsed": {"repr": "0:00:21.469056", "seconds": 21.469056}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for TCS: unrealized=-53102.91, today=-53102.91", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 26756, "name": "MainProcess"}, "thread": {"id": 9680, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:25:58.732274+05:30", "timestamp": 1755777358.732274}}}
{"text": "2025-08-21 17:25:58.734 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for HDFC: unrealized=-88446.2, today=-88446.2\n", "record": {"elapsed": {"repr": "0:00:21.471403", "seconds": 21.471403}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for HDFC: unrealized=-88446.2, today=-88446.2", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 26756, "name": "MainProcess"}, "thread": {"id": 9680, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:25:58.734621+05:30", "timestamp": 1755777358.734621}}}
{"text": "2025-08-21 17:25:58.737 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for INFY: unrealized=-220958.6, today=-220958.6\n", "record": {"elapsed": {"repr": "0:00:21.474374", "seconds": 21.474374}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for INFY: unrealized=-220958.6, today=-220958.6", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 26756, "name": "MainProcess"}, "thread": {"id": 9680, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:25:58.737592+05:30", "timestamp": 1755777358.737592}}}
{"text": "2025-08-21 17:25:58.739 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for ICICIBANK: unrealized=-969036.92, today=-969036.92\n", "record": {"elapsed": {"repr": "0:00:21.476702", "seconds": 21.476702}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for ICICIBANK: unrealized=-969036.92, today=-969036.92", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 26756, "name": "MainProcess"}, "thread": {"id": 9680, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:25:58.739920+05:30", "timestamp": 1755777358.73992}}}
{"text": "2025-08-21 17:25:58.741 | INFO     | app.services.dhan_client:get_pnl:545 - Calculated totals - realized: 0.0, unrealized: -2735058.84, day: -2735058.84\n", "record": {"elapsed": {"repr": "0:00:21.478667", "seconds": 21.478667}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 545, "message": "Calculated totals - realized: 0.0, unrealized: -2735058.84, day: -2735058.84", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 26756, "name": "MainProcess"}, "thread": {"id": 9680, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:25:58.741885+05:30", "timestamp": 1755777358.741885}}}
{"text": "2025-08-21 17:25:58.744 | DEBUG    | app.services.dhan_client:get_pnl:554 - PnL consistency check passed: drift=‚Çπ0.00\n", "record": {"elapsed": {"repr": "0:00:21.480898", "seconds": 21.480898}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 554, "message": "PnL consistency check passed: drift=‚Çπ0.00", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 26756, "name": "MainProcess"}, "thread": {"id": 9680, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:25:58.744116+05:30", "timestamp": 1755777358.744116}}}
{"text": "2025-08-21 17:25:58.746 | DEBUG    | app.services.dhan_client:get_pnl:558 - Creating PnLTotals...\n", "record": {"elapsed": {"repr": "0:00:21.483191", "seconds": 21.483191}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 558, "message": "Creating PnLTotals...", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 26756, "name": "MainProcess"}, "thread": {"id": 9680, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:25:58.746409+05:30", "timestamp": 1755777358.746409}}}
{"text": "2025-08-21 17:25:58.748 | DEBUG    | app.services.dhan_client:get_pnl:565 - PnLTotals created successfully\n", "record": {"elapsed": {"repr": "0:00:21.485297", "seconds": 21.485297}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 565, "message": "PnLTotals created successfully", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 26756, "name": "MainProcess"}, "thread": {"id": 9680, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:25:58.748515+05:30", "timestamp": 1755777358.748515}}}
{"text": "2025-08-21 17:25:58.751 | DEBUG    | app.services.dhan_client:get_pnl:574 - Creating PnL model...\n", "record": {"elapsed": {"repr": "0:00:21.488776", "seconds": 21.488776}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 574, "message": "Creating PnL model...", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 26756, "name": "MainProcess"}, "thread": {"id": 9680, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:25:58.751994+05:30", "timestamp": 1755777358.751994}}}
{"text": "2025-08-21 17:25:58.753 | DEBUG    | app.services.dhan_client:get_pnl:575 - Model fields: totals=<class 'app.models.schemas.PnLTotals'>, perSymbol=5, updated_at=2025-08-21 17:25:58.730240+05:30, trading_day=2025-08-21\n", "record": {"elapsed": {"repr": "0:00:21.490290", "seconds": 21.49029}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 575, "message": "Model fields: totals=<class 'app.models.schemas.PnLTotals'>, perSymbol=5, updated_at=2025-08-21 17:25:58.730240+05:30, trading_day=2025-08-21", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 26756, "name": "MainProcess"}, "thread": {"id": 9680, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:25:58.753508+05:30", "timestamp": 1755777358.753508}}}
{"text": "2025-08-21 17:25:58.756 | DEBUG    | app.services.dhan_client:get_pnl:584 - Created PnL model: totals=PnLTotals(realized=0.0, unrealized=-2735058.84, day=-2735058.84, currency='INR') per_symbol=[PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=827, avg=1814.66, ltp=117.54, unrealized=-1403514.21, today_pnl=-1403514.21), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=684, avg=1787.03, ltp=1864.67, unrealized=-53102.91, today_pnl=-53102.91), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=688, avg=1976.09, ltp=1847.53, unrealized=-88446.2, today_pnl=-88446.2), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=803, avg=834.66, ltp=1109.83, unrealized=-220958.6, today_pnl=-220958.6), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=1505, avg=1438.18, ltp=794.3, unrealized=-969036.92, today_pnl=-969036.92)] updated_at=datetime.datetime(2025, 8, 21, 17, 25, 58, 730240, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))) trading_day='2025-08-21'\n", "record": {"elapsed": {"repr": "0:00:21.493142", "seconds": 21.493142}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 584, "message": "Created PnL model: totals=PnLTotals(realized=0.0, unrealized=-2735058.84, day=-2735058.84, currency='INR') per_symbol=[PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=827, avg=1814.66, ltp=117.54, unrealized=-1403514.21, today_pnl=-1403514.21), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=684, avg=1787.03, ltp=1864.67, unrealized=-53102.91, today_pnl=-53102.91), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=688, avg=1976.09, ltp=1847.53, unrealized=-88446.2, today_pnl=-88446.2), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=803, avg=834.66, ltp=1109.83, unrealized=-220958.6, today_pnl=-220958.6), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=1505, avg=1438.18, ltp=794.3, unrealized=-969036.92, today_pnl=-969036.92)] updated_at=datetime.datetime(2025, 8, 21, 17, 25, 58, 730240, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))) trading_day='2025-08-21'", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 26756, "name": "MainProcess"}, "thread": {"id": 9680, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:25:58.756360+05:30", "timestamp": 1755777358.75636}}}
{"text": "2025-08-21 17:25:58.759 | DEBUG    | app.services.dhan_client:get_pnl:585 - PnL model fields: {'totals': PnLTotals(realized=0.0, unrealized=-2735058.84, day=-2735058.84, currency='INR'), 'per_symbol': [PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=827, avg=1814.66, ltp=117.54, unrealized=-1403514.21, today_pnl=-1403514.21), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=684, avg=1787.03, ltp=1864.67, unrealized=-53102.91, today_pnl=-53102.91), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=688, avg=1976.09, ltp=1847.53, unrealized=-88446.2, today_pnl=-88446.2), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=803, avg=834.66, ltp=1109.83, unrealized=-220958.6, today_pnl=-220958.6), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=1505, avg=1438.18, ltp=794.3, unrealized=-969036.92, today_pnl=-969036.92)], 'updated_at': datetime.datetime(2025, 8, 21, 17, 25, 58, 730240, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))), 'trading_day': '2025-08-21'}\n", "record": {"elapsed": {"repr": "0:00:21.496688", "seconds": 21.496688}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 585, "message": "PnL model fields: {'totals': PnLTotals(realized=0.0, unrealized=-2735058.84, day=-2735058.84, currency='INR'), 'per_symbol': [PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=827, avg=1814.66, ltp=117.54, unrealized=-1403514.21, today_pnl=-1403514.21), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=684, avg=1787.03, ltp=1864.67, unrealized=-53102.91, today_pnl=-53102.91), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=688, avg=1976.09, ltp=1847.53, unrealized=-88446.2, today_pnl=-88446.2), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=803, avg=834.66, ltp=1109.83, unrealized=-220958.6, today_pnl=-220958.6), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=1505, avg=1438.18, ltp=794.3, unrealized=-969036.92, today_pnl=-969036.92)], 'updated_at': datetime.datetime(2025, 8, 21, 17, 25, 58, 730240, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))), 'trading_day': '2025-08-21'}", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 26756, "name": "MainProcess"}, "thread": {"id": 9680, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:25:58.759906+05:30", "timestamp": 1755777358.759906}}}
{"text": "2025-08-21 17:25:58.763 | INFO     | app.services.dhan_client:get_pnl:587 - P&L calculation completed successfully: 5 symbols, unrealized=‚Çπ-2735058.84\n", "record": {"elapsed": {"repr": "0:00:21.499905", "seconds": 21.499905}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 587, "message": "P&L calculation completed successfully: 5 symbols, unrealized=‚Çπ-2735058.84", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 26756, "name": "MainProcess"}, "thread": {"id": 9680, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:25:58.763123+05:30", "timestamp": 1755777358.763123}}}
{"text": "2025-08-21 17:25:58.767 | DEBUG    | app.ws.live:emit_delta:408 - Emitted pnl delta: seq=24\n", "record": {"elapsed": {"repr": "0:00:21.503872", "seconds": 21.503872}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "emit_delta", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 408, "message": "Emitted pnl delta: seq=24", "module": "live", "name": "app.ws.live", "process": {"id": 26756, "name": "MainProcess"}, "thread": {"id": 9680, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:25:58.767090+05:30", "timestamp": 1755777358.76709}}}
{"text": "2025-08-21 17:25:59.597 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:22.334589", "seconds": 22.334589}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 26756, "name": "MainProcess"}, "thread": {"id": 23968, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 17:25:59.597807+05:30", "timestamp": 1755777359.597807}}}
{"text": "2025-08-21 17:25:59.600 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:22.336909", "seconds": 22.336909}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 26756, "name": "MainProcess"}, "thread": {"id": 23968, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 17:25:59.600127+05:30", "timestamp": 1755777359.600127}}}
{"text": "2025-08-21 17:25:59.603 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:22.339989", "seconds": 22.339989}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 26756, "name": "MainProcess"}, "thread": {"id": 23968, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 17:25:59.603207+05:30", "timestamp": 1755777359.603207}}}
{"text": "2025-08-21 17:25:59.605 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:22.342052", "seconds": 22.342052}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 26756, "name": "MainProcess"}, "thread": {"id": 23968, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 17:25:59.605270+05:30", "timestamp": 1755777359.60527}}}
{"text": "2025-08-21 17:25:59.607 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:22.344073", "seconds": 22.344073}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 26756, "name": "MainProcess"}, "thread": {"id": 23968, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 17:25:59.607291+05:30", "timestamp": 1755777359.607291}}}
{"text": "2025-08-21 17:25:59.609 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:22.346015", "seconds": 22.346015}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 26756, "name": "MainProcess"}, "thread": {"id": 23968, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 17:25:59.609233+05:30", "timestamp": 1755777359.609233}}}
{"text": "2025-08-21 17:25:59.611 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:22.348401", "seconds": 22.348401}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 26756, "name": "MainProcess"}, "thread": {"id": 23968, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 17:25:59.611619+05:30", "timestamp": 1755777359.611619}}}
{"text": "2025-08-21 17:25:59.613 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:22.350352", "seconds": 22.350352}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 26756, "name": "MainProcess"}, "thread": {"id": 23968, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 17:25:59.613570+05:30", "timestamp": 1755777359.61357}}}
{"text": "2025-08-21 17:25:59.615 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:22.352690", "seconds": 22.35269}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 26756, "name": "MainProcess"}, "thread": {"id": 23968, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 17:25:59.615908+05:30", "timestamp": 1755777359.615908}}}
{"text": "2025-08-21 17:25:59.617 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:22.354618", "seconds": 22.354618}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 26756, "name": "MainProcess"}, "thread": {"id": 23968, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 17:25:59.617836+05:30", "timestamp": 1755777359.617836}}}
{"text": "2025-08-21 17:26:00.379 | DEBUG    | app.ws.live:emit_delta:408 - Emitted positions delta: seq=25\n", "record": {"elapsed": {"repr": "0:00:23.116596", "seconds": 23.116596}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "emit_delta", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 408, "message": "Emitted positions delta: seq=25", "module": "live", "name": "app.ws.live", "process": {"id": 26756, "name": "MainProcess"}, "thread": {"id": 9680, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:26:00.379814+05:30", "timestamp": 1755777360.379814}}}
{"text": "2025-08-21 17:26:00.483 | INFO     | app.services.dhan_client:get_pnl:489 - Starting accurate P&L calculation\n", "record": {"elapsed": {"repr": "0:00:23.220214", "seconds": 23.220214}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 489, "message": "Starting accurate P&L calculation", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 26756, "name": "MainProcess"}, "thread": {"id": 9680, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:26:00.483432+05:30", "timestamp": 1755777360.483432}}}
{"text": "2025-08-21 17:26:00.487 | INFO     | app.services.dhan_client:get_pnl:491 - Fetched 5 positions\n", "record": {"elapsed": {"repr": "0:00:23.224078", "seconds": 23.224078}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 491, "message": "Fetched 5 positions", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 26756, "name": "MainProcess"}, "thread": {"id": 9680, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:26:00.487296+05:30", "timestamp": 1755777360.487296}}}
{"text": "2025-08-21 17:26:00.489 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for RELIANCE: unrealized=-1404471.68, today=-1404471.68\n", "record": {"elapsed": {"repr": "0:00:23.226565", "seconds": 23.226565}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for RELIANCE: unrealized=-1404471.68, today=-1404471.68", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 26756, "name": "MainProcess"}, "thread": {"id": 9680, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:26:00.489783+05:30", "timestamp": 1755777360.489783}}}
{"text": "2025-08-21 17:26:00.492 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for TCS: unrealized=-53803.87, today=-53803.87\n", "record": {"elapsed": {"repr": "0:00:23.229635", "seconds": 23.229635}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for TCS: unrealized=-53803.87, today=-53803.87", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 26756, "name": "MainProcess"}, "thread": {"id": 9680, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:26:00.492853+05:30", "timestamp": 1755777360.492853}}}
{"text": "2025-08-21 17:26:00.495 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for HDFC: unrealized=-104616.19, today=-104616.19\n", "record": {"elapsed": {"repr": "0:00:23.232701", "seconds": 23.232701}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for HDFC: unrealized=-104616.19, today=-104616.19", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 26756, "name": "MainProcess"}, "thread": {"id": 9680, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:26:00.495919+05:30", "timestamp": 1755777360.495919}}}
{"text": "2025-08-21 17:26:00.497 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for INFY: unrealized=-206968.42, today=-206968.42\n", "record": {"elapsed": {"repr": "0:00:23.234652", "seconds": 23.234652}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for INFY: unrealized=-206968.42, today=-206968.42", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 26756, "name": "MainProcess"}, "thread": {"id": 9680, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:26:00.497870+05:30", "timestamp": 1755777360.49787}}}
{"text": "2025-08-21 17:26:00.500 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for ICICIBANK: unrealized=-960483.2, today=-960483.2\n", "record": {"elapsed": {"repr": "0:00:23.237780", "seconds": 23.23778}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for ICICIBANK: unrealized=-960483.2, today=-960483.2", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 26756, "name": "MainProcess"}, "thread": {"id": 9680, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:26:00.500998+05:30", "timestamp": 1755777360.500998}}}
{"text": "2025-08-21 17:26:00.502 | INFO     | app.services.dhan_client:get_pnl:545 - Calculated totals - realized: 0.0, unrealized: -2730343.36, day: -2730343.36\n", "record": {"elapsed": {"repr": "0:00:23.239353", "seconds": 23.239353}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 545, "message": "Calculated totals - realized: 0.0, unrealized: -2730343.36, day: -2730343.36", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 26756, "name": "MainProcess"}, "thread": {"id": 9680, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:26:00.502571+05:30", "timestamp": 1755777360.502571}}}
{"text": "2025-08-21 17:26:00.505 | DEBUG    | app.services.dhan_client:get_pnl:554 - PnL consistency check passed: drift=‚Çπ0.00\n", "record": {"elapsed": {"repr": "0:00:23.242453", "seconds": 23.242453}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 554, "message": "PnL consistency check passed: drift=‚Çπ0.00", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 26756, "name": "MainProcess"}, "thread": {"id": 9680, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:26:00.505671+05:30", "timestamp": 1755777360.505671}}}
{"text": "2025-08-21 17:26:00.508 | DEBUG    | app.services.dhan_client:get_pnl:558 - Creating PnLTotals...\n", "record": {"elapsed": {"repr": "0:00:23.244912", "seconds": 23.244912}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 558, "message": "Creating PnLTotals...", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 26756, "name": "MainProcess"}, "thread": {"id": 9680, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:26:00.508130+05:30", "timestamp": 1755777360.50813}}}
{"text": "2025-08-21 17:26:00.511 | DEBUG    | app.services.dhan_client:get_pnl:565 - PnLTotals created successfully\n", "record": {"elapsed": {"repr": "0:00:23.247951", "seconds": 23.247951}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 565, "message": "PnLTotals created successfully", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 26756, "name": "MainProcess"}, "thread": {"id": 9680, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:26:00.511169+05:30", "timestamp": 1755777360.511169}}}
{"text": "2025-08-21 17:26:00.513 | DEBUG    | app.services.dhan_client:get_pnl:574 - Creating PnL model...\n", "record": {"elapsed": {"repr": "0:00:23.250678", "seconds": 23.250678}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 574, "message": "Creating PnL model...", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 26756, "name": "MainProcess"}, "thread": {"id": 9680, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:26:00.513896+05:30", "timestamp": 1755777360.513896}}}
{"text": "2025-08-21 17:26:00.515 | DEBUG    | app.services.dhan_client:get_pnl:575 - Model fields: totals=<class 'app.models.schemas.PnLTotals'>, perSymbol=5, updated_at=2025-08-21 17:26:00.489381+05:30, trading_day=2025-08-21\n", "record": {"elapsed": {"repr": "0:00:23.251988", "seconds": 23.251988}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 575, "message": "Model fields: totals=<class 'app.models.schemas.PnLTotals'>, perSymbol=5, updated_at=2025-08-21 17:26:00.489381+05:30, trading_day=2025-08-21", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 26756, "name": "MainProcess"}, "thread": {"id": 9680, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:26:00.515206+05:30", "timestamp": 1755777360.515206}}}
{"text": "2025-08-21 17:26:00.521 | DEBUG    | app.services.dhan_client:get_pnl:584 - Created PnL model: totals=PnLTotals(realized=0.0, unrealized=-2730343.36, day=-2730343.36, currency='INR') per_symbol=[PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=827, avg=1814.66, ltp=116.39, unrealized=-1404471.68, today_pnl=-1404471.68), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=684, avg=1787.03, ltp=1865.69, unrealized=-53803.87, today_pnl=-53803.87), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=688, avg=1976.09, ltp=1824.03, unrealized=-104616.19, today_pnl=-104616.19), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=803, avg=834.66, ltp=1092.4, unrealized=-206968.42, today_pnl=-206968.42), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=1505, avg=1438.18, ltp=799.99, unrealized=-960483.2, today_pnl=-960483.2)] updated_at=datetime.datetime(2025, 8, 21, 17, 26, 0, 489381, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))) trading_day='2025-08-21'\n", "record": {"elapsed": {"repr": "0:00:23.258106", "seconds": 23.258106}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 584, "message": "Created PnL model: totals=PnLTotals(realized=0.0, unrealized=-2730343.36, day=-2730343.36, currency='INR') per_symbol=[PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=827, avg=1814.66, ltp=116.39, unrealized=-1404471.68, today_pnl=-1404471.68), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=684, avg=1787.03, ltp=1865.69, unrealized=-53803.87, today_pnl=-53803.87), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=688, avg=1976.09, ltp=1824.03, unrealized=-104616.19, today_pnl=-104616.19), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=803, avg=834.66, ltp=1092.4, unrealized=-206968.42, today_pnl=-206968.42), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=1505, avg=1438.18, ltp=799.99, unrealized=-960483.2, today_pnl=-960483.2)] updated_at=datetime.datetime(2025, 8, 21, 17, 26, 0, 489381, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))) trading_day='2025-08-21'", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 26756, "name": "MainProcess"}, "thread": {"id": 9680, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:26:00.521324+05:30", "timestamp": 1755777360.521324}}}
{"text": "2025-08-21 17:26:00.526 | DEBUG    | app.services.dhan_client:get_pnl:585 - PnL model fields: {'totals': PnLTotals(realized=0.0, unrealized=-2730343.36, day=-2730343.36, currency='INR'), 'per_symbol': [PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=827, avg=1814.66, ltp=116.39, unrealized=-1404471.68, today_pnl=-1404471.68), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=684, avg=1787.03, ltp=1865.69, unrealized=-53803.87, today_pnl=-53803.87), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=688, avg=1976.09, ltp=1824.03, unrealized=-104616.19, today_pnl=-104616.19), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=803, avg=834.66, ltp=1092.4, unrealized=-206968.42, today_pnl=-206968.42), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=1505, avg=1438.18, ltp=799.99, unrealized=-960483.2, today_pnl=-960483.2)], 'updated_at': datetime.datetime(2025, 8, 21, 17, 26, 0, 489381, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))), 'trading_day': '2025-08-21'}\n", "record": {"elapsed": {"repr": "0:00:23.263737", "seconds": 23.263737}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 585, "message": "PnL model fields: {'totals': PnLTotals(realized=0.0, unrealized=-2730343.36, day=-2730343.36, currency='INR'), 'per_symbol': [PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=827, avg=1814.66, ltp=116.39, unrealized=-1404471.68, today_pnl=-1404471.68), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=684, avg=1787.03, ltp=1865.69, unrealized=-53803.87, today_pnl=-53803.87), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=688, avg=1976.09, ltp=1824.03, unrealized=-104616.19, today_pnl=-104616.19), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=803, avg=834.66, ltp=1092.4, unrealized=-206968.42, today_pnl=-206968.42), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=1505, avg=1438.18, ltp=799.99, unrealized=-960483.2, today_pnl=-960483.2)], 'updated_at': datetime.datetime(2025, 8, 21, 17, 26, 0, 489381, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))), 'trading_day': '2025-08-21'}", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 26756, "name": "MainProcess"}, "thread": {"id": 9680, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:26:00.526955+05:30", "timestamp": 1755777360.526955}}}
{"text": "2025-08-21 17:26:00.530 | INFO     | app.services.dhan_client:get_pnl:587 - P&L calculation completed successfully: 5 symbols, unrealized=‚Çπ-2730343.36\n", "record": {"elapsed": {"repr": "0:00:23.267247", "seconds": 23.267247}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 587, "message": "P&L calculation completed successfully: 5 symbols, unrealized=‚Çπ-2730343.36", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 26756, "name": "MainProcess"}, "thread": {"id": 9680, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:26:00.530465+05:30", "timestamp": 1755777360.530465}}}
{"text": "2025-08-21 17:26:00.533 | DEBUG    | app.ws.live:emit_delta:408 - Emitted pnl delta: seq=26\n", "record": {"elapsed": {"repr": "0:00:23.270239", "seconds": 23.270239}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "emit_delta", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 408, "message": "Emitted pnl delta: seq=26", "module": "live", "name": "app.ws.live", "process": {"id": 26756, "name": "MainProcess"}, "thread": {"id": 9680, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:26:00.533457+05:30", "timestamp": 1755777360.533457}}}
{"text": "2025-08-21 17:26:01.620 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:24.357043", "seconds": 24.357043}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 26756, "name": "MainProcess"}, "thread": {"id": 23968, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 17:26:01.620261+05:30", "timestamp": 1755777361.620261}}}
{"text": "2025-08-21 17:26:01.622 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:24.359533", "seconds": 24.359533}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 26756, "name": "MainProcess"}, "thread": {"id": 23968, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 17:26:01.622751+05:30", "timestamp": 1755777361.622751}}}
{"text": "2025-08-21 17:26:01.624 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:24.361764", "seconds": 24.361764}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 26756, "name": "MainProcess"}, "thread": {"id": 23968, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 17:26:01.624982+05:30", "timestamp": 1755777361.624982}}}
{"text": "2025-08-21 17:26:01.627 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:24.364645", "seconds": 24.364645}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 26756, "name": "MainProcess"}, "thread": {"id": 23968, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 17:26:01.627863+05:30", "timestamp": 1755777361.627863}}}
{"text": "2025-08-21 17:26:01.630 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:24.366857", "seconds": 24.366857}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 26756, "name": "MainProcess"}, "thread": {"id": 23968, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 17:26:01.630075+05:30", "timestamp": 1755777361.630075}}}
{"text": "2025-08-21 17:26:01.632 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:24.369162", "seconds": 24.369162}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 26756, "name": "MainProcess"}, "thread": {"id": 23968, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 17:26:01.632380+05:30", "timestamp": 1755777361.63238}}}
{"text": "2025-08-21 17:26:01.639 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:24.376172", "seconds": 24.376172}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 26756, "name": "MainProcess"}, "thread": {"id": 23968, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 17:26:01.639390+05:30", "timestamp": 1755777361.63939}}}
{"text": "2025-08-21 17:26:01.642 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:24.379338", "seconds": 24.379338}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 26756, "name": "MainProcess"}, "thread": {"id": 23968, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 17:26:01.642556+05:30", "timestamp": 1755777361.642556}}}
{"text": "2025-08-21 17:26:01.644 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:24.381564", "seconds": 24.381564}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 26756, "name": "MainProcess"}, "thread": {"id": 23968, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 17:26:01.644782+05:30", "timestamp": 1755777361.644782}}}
{"text": "2025-08-21 17:26:01.646 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:24.383567", "seconds": 24.383567}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 26756, "name": "MainProcess"}, "thread": {"id": 23968, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 17:26:01.646785+05:30", "timestamp": 1755777361.646785}}}
{"text": "2025-08-21 17:26:01.908 | DEBUG    | app.ws.live:emit_delta:408 - Emitted positions delta: seq=27\n", "record": {"elapsed": {"repr": "0:00:24.645207", "seconds": 24.645207}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "emit_delta", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 408, "message": "Emitted positions delta: seq=27", "module": "live", "name": "app.ws.live", "process": {"id": 26756, "name": "MainProcess"}, "thread": {"id": 9680, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:26:01.908425+05:30", "timestamp": 1755777361.908425}}}
{"text": "2025-08-21 17:26:02.134 | INFO     | app.services.dhan_client:get_pnl:489 - Starting accurate P&L calculation\n", "record": {"elapsed": {"repr": "0:00:24.871017", "seconds": 24.871017}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 489, "message": "Starting accurate P&L calculation", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 26756, "name": "MainProcess"}, "thread": {"id": 9680, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:26:02.134235+05:30", "timestamp": 1755777362.134235}}}
{"text": "2025-08-21 17:26:02.136 | INFO     | app.services.dhan_client:get_pnl:491 - Fetched 5 positions\n", "record": {"elapsed": {"repr": "0:00:24.873777", "seconds": 24.873777}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 491, "message": "Fetched 5 positions", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 26756, "name": "MainProcess"}, "thread": {"id": 9680, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:26:02.136995+05:30", "timestamp": 1755777362.136995}}}
{"text": "2025-08-21 17:26:02.139 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for RELIANCE: unrealized=-1406168.83, today=-1406168.83\n", "record": {"elapsed": {"repr": "0:00:24.876146", "seconds": 24.876146}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for RELIANCE: unrealized=-1406168.83, today=-1406168.83", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 26756, "name": "MainProcess"}, "thread": {"id": 9680, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:26:02.139364+05:30", "timestamp": 1755777362.139364}}}
{"text": "2025-08-21 17:26:02.141 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for TCS: unrealized=-67093.09, today=-67093.09\n", "record": {"elapsed": {"repr": "0:00:24.878414", "seconds": 24.878414}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for TCS: unrealized=-67093.09, today=-67093.09", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 26756, "name": "MainProcess"}, "thread": {"id": 9680, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:26:02.141632+05:30", "timestamp": 1755777362.141632}}}
{"text": "2025-08-21 17:26:02.144 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for HDFC: unrealized=-89878.81, today=-89878.81\n", "record": {"elapsed": {"repr": "0:00:24.880968", "seconds": 24.880968}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for HDFC: unrealized=-89878.81, today=-89878.81", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 26756, "name": "MainProcess"}, "thread": {"id": 9680, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:26:02.144186+05:30", "timestamp": 1755777362.144186}}}
{"text": "2025-08-21 17:26:02.146 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for INFY: unrealized=-199257.36, today=-199257.36\n", "record": {"elapsed": {"repr": "0:00:24.883247", "seconds": 24.883247}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for INFY: unrealized=-199257.36, today=-199257.36", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 26756, "name": "MainProcess"}, "thread": {"id": 9680, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:26:02.146465+05:30", "timestamp": 1755777362.146465}}}
{"text": "2025-08-21 17:26:02.148 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for ICICIBANK: unrealized=-958611.22, today=-958611.22\n", "record": {"elapsed": {"repr": "0:00:24.885201", "seconds": 24.885201}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for ICICIBANK: unrealized=-958611.22, today=-958611.22", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 26756, "name": "MainProcess"}, "thread": {"id": 9680, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:26:02.148419+05:30", "timestamp": 1755777362.148419}}}
{"text": "2025-08-21 17:26:02.151 | INFO     | app.services.dhan_client:get_pnl:545 - Calculated totals - realized: 0.0, unrealized: -2721009.31, day: -2721009.31\n", "record": {"elapsed": {"repr": "0:00:24.888252", "seconds": 24.888252}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 545, "message": "Calculated totals - realized: 0.0, unrealized: -2721009.31, day: -2721009.31", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 26756, "name": "MainProcess"}, "thread": {"id": 9680, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:26:02.151470+05:30", "timestamp": 1755777362.15147}}}
{"text": "2025-08-21 17:26:02.153 | DEBUG    | app.services.dhan_client:get_pnl:554 - PnL consistency check passed: drift=‚Çπ0.00\n", "record": {"elapsed": {"repr": "0:00:24.890674", "seconds": 24.890674}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 554, "message": "PnL consistency check passed: drift=‚Çπ0.00", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 26756, "name": "MainProcess"}, "thread": {"id": 9680, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:26:02.153892+05:30", "timestamp": 1755777362.153892}}}
{"text": "2025-08-21 17:26:02.155 | DEBUG    | app.services.dhan_client:get_pnl:558 - Creating PnLTotals...\n", "record": {"elapsed": {"repr": "0:00:24.892695", "seconds": 24.892695}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 558, "message": "Creating PnLTotals...", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 26756, "name": "MainProcess"}, "thread": {"id": 9680, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:26:02.155913+05:30", "timestamp": 1755777362.155913}}}
{"text": "2025-08-21 17:26:02.158 | DEBUG    | app.services.dhan_client:get_pnl:565 - PnLTotals created successfully\n", "record": {"elapsed": {"repr": "0:00:24.895636", "seconds": 24.895636}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 565, "message": "PnLTotals created successfully", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 26756, "name": "MainProcess"}, "thread": {"id": 9680, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:26:02.158854+05:30", "timestamp": 1755777362.158854}}}
{"text": "2025-08-21 17:26:02.160 | DEBUG    | app.services.dhan_client:get_pnl:574 - Creating PnL model...\n", "record": {"elapsed": {"repr": "0:00:24.897764", "seconds": 24.897764}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 574, "message": "Creating PnL model...", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 26756, "name": "MainProcess"}, "thread": {"id": 9680, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:26:02.160982+05:30", "timestamp": 1755777362.160982}}}
{"text": "2025-08-21 17:26:02.162 | DEBUG    | app.services.dhan_client:get_pnl:575 - Model fields: totals=<class 'app.models.schemas.PnLTotals'>, perSymbol=5, updated_at=2025-08-21 17:26:02.138983+05:30, trading_day=2025-08-21\n", "record": {"elapsed": {"repr": "0:00:24.899767", "seconds": 24.899767}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 575, "message": "Model fields: totals=<class 'app.models.schemas.PnLTotals'>, perSymbol=5, updated_at=2025-08-21 17:26:02.138983+05:30, trading_day=2025-08-21", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 26756, "name": "MainProcess"}, "thread": {"id": 9680, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:26:02.162985+05:30", "timestamp": 1755777362.162985}}}
{"text": "2025-08-21 17:26:02.166 | DEBUG    | app.services.dhan_client:get_pnl:584 - Created PnL model: totals=PnLTotals(realized=0.0, unrealized=-2721009.31, day=-2721009.31, currency='INR') per_symbol=[PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=827, avg=1814.66, ltp=114.33, unrealized=-1406168.83, today_pnl=-1406168.83), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=684, avg=1787.03, ltp=1885.12, unrealized=-67093.09, today_pnl=-67093.09), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=688, avg=1976.09, ltp=1845.45, unrealized=-89878.81, today_pnl=-89878.81), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=803, avg=834.66, ltp=1082.8, unrealized=-199257.36, today_pnl=-199257.36), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=1505, avg=1438.18, ltp=801.23, unrealized=-958611.22, today_pnl=-958611.22)] updated_at=datetime.datetime(2025, 8, 21, 17, 26, 2, 138983, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))) trading_day='2025-08-21'\n", "record": {"elapsed": {"repr": "0:00:24.903636", "seconds": 24.903636}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 584, "message": "Created PnL model: totals=PnLTotals(realized=0.0, unrealized=-2721009.31, day=-2721009.31, currency='INR') per_symbol=[PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=827, avg=1814.66, ltp=114.33, unrealized=-1406168.83, today_pnl=-1406168.83), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=684, avg=1787.03, ltp=1885.12, unrealized=-67093.09, today_pnl=-67093.09), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=688, avg=1976.09, ltp=1845.45, unrealized=-89878.81, today_pnl=-89878.81), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=803, avg=834.66, ltp=1082.8, unrealized=-199257.36, today_pnl=-199257.36), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=1505, avg=1438.18, ltp=801.23, unrealized=-958611.22, today_pnl=-958611.22)] updated_at=datetime.datetime(2025, 8, 21, 17, 26, 2, 138983, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))) trading_day='2025-08-21'", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 26756, "name": "MainProcess"}, "thread": {"id": 9680, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:26:02.166854+05:30", "timestamp": 1755777362.166854}}}
{"text": "2025-08-21 17:26:02.171 | DEBUG    | app.services.dhan_client:get_pnl:585 - PnL model fields: {'totals': PnLTotals(realized=0.0, unrealized=-2721009.31, day=-2721009.31, currency='INR'), 'per_symbol': [PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=827, avg=1814.66, ltp=114.33, unrealized=-1406168.83, today_pnl=-1406168.83), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=684, avg=1787.03, ltp=1885.12, unrealized=-67093.09, today_pnl=-67093.09), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=688, avg=1976.09, ltp=1845.45, unrealized=-89878.81, today_pnl=-89878.81), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=803, avg=834.66, ltp=1082.8, unrealized=-199257.36, today_pnl=-199257.36), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=1505, avg=1438.18, ltp=801.23, unrealized=-958611.22, today_pnl=-958611.22)], 'updated_at': datetime.datetime(2025, 8, 21, 17, 26, 2, 138983, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))), 'trading_day': '2025-08-21'}\n", "record": {"elapsed": {"repr": "0:00:24.908155", "seconds": 24.908155}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 585, "message": "PnL model fields: {'totals': PnLTotals(realized=0.0, unrealized=-2721009.31, day=-2721009.31, currency='INR'), 'per_symbol': [PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=827, avg=1814.66, ltp=114.33, unrealized=-1406168.83, today_pnl=-1406168.83), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=684, avg=1787.03, ltp=1885.12, unrealized=-67093.09, today_pnl=-67093.09), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=688, avg=1976.09, ltp=1845.45, unrealized=-89878.81, today_pnl=-89878.81), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=803, avg=834.66, ltp=1082.8, unrealized=-199257.36, today_pnl=-199257.36), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=1505, avg=1438.18, ltp=801.23, unrealized=-958611.22, today_pnl=-958611.22)], 'updated_at': datetime.datetime(2025, 8, 21, 17, 26, 2, 138983, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))), 'trading_day': '2025-08-21'}", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 26756, "name": "MainProcess"}, "thread": {"id": 9680, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:26:02.171373+05:30", "timestamp": 1755777362.171373}}}
{"text": "2025-08-21 17:26:02.175 | INFO     | app.services.dhan_client:get_pnl:587 - P&L calculation completed successfully: 5 symbols, unrealized=‚Çπ-2721009.31\n", "record": {"elapsed": {"repr": "0:00:24.911930", "seconds": 24.91193}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 587, "message": "P&L calculation completed successfully: 5 symbols, unrealized=‚Çπ-2721009.31", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 26756, "name": "MainProcess"}, "thread": {"id": 9680, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:26:02.175148+05:30", "timestamp": 1755777362.175148}}}
{"text": "2025-08-21 17:26:02.178 | DEBUG    | app.ws.live:emit_delta:408 - Emitted pnl delta: seq=28\n", "record": {"elapsed": {"repr": "0:00:24.914919", "seconds": 24.914919}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "emit_delta", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 408, "message": "Emitted pnl delta: seq=28", "module": "live", "name": "app.ws.live", "process": {"id": 26756, "name": "MainProcess"}, "thread": {"id": 9680, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:26:02.178137+05:30", "timestamp": 1755777362.178137}}}
{"text": "2025-08-21 17:26:02.516 | DEBUG    | app.ws.live:emit_delta:408 - Emitted holdings delta: seq=29\n", "record": {"elapsed": {"repr": "0:00:25.253232", "seconds": 25.253232}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "emit_delta", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 408, "message": "Emitted holdings delta: seq=29", "module": "live", "name": "app.ws.live", "process": {"id": 26756, "name": "MainProcess"}, "thread": {"id": 9680, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:26:02.516450+05:30", "timestamp": 1755777362.51645}}}
{"text": "2025-08-21 17:26:03.649 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:26.386740", "seconds": 26.38674}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 26756, "name": "MainProcess"}, "thread": {"id": 23968, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 17:26:03.649958+05:30", "timestamp": 1755777363.649958}}}
{"text": "2025-08-21 17:26:03.651 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:26.388558", "seconds": 26.388558}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 26756, "name": "MainProcess"}, "thread": {"id": 23968, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 17:26:03.651776+05:30", "timestamp": 1755777363.651776}}}
{"text": "2025-08-21 17:26:03.653 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:26.390212", "seconds": 26.390212}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 26756, "name": "MainProcess"}, "thread": {"id": 23968, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 17:26:03.653430+05:30", "timestamp": 1755777363.65343}}}
{"text": "2025-08-21 17:26:03.655 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:26.392322", "seconds": 26.392322}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 26756, "name": "MainProcess"}, "thread": {"id": 23968, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 17:26:03.655540+05:30", "timestamp": 1755777363.65554}}}
{"text": "2025-08-21 17:26:03.660 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:26.397221", "seconds": 26.397221}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 26756, "name": "MainProcess"}, "thread": {"id": 23968, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 17:26:03.660439+05:30", "timestamp": 1755777363.660439}}}
{"text": "2025-08-21 17:26:03.662 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:26.399098", "seconds": 26.399098}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 26756, "name": "MainProcess"}, "thread": {"id": 23968, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 17:26:03.662316+05:30", "timestamp": 1755777363.662316}}}
{"text": "2025-08-21 17:26:03.664 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:26.400872", "seconds": 26.400872}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 26756, "name": "MainProcess"}, "thread": {"id": 23968, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 17:26:03.664090+05:30", "timestamp": 1755777363.66409}}}
{"text": "2025-08-21 17:26:03.665 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:26.402509", "seconds": 26.402509}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 26756, "name": "MainProcess"}, "thread": {"id": 23968, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 17:26:03.665727+05:30", "timestamp": 1755777363.665727}}}
{"text": "2025-08-21 17:26:03.667 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:26.404608", "seconds": 26.404608}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 26756, "name": "MainProcess"}, "thread": {"id": 23968, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 17:26:03.667826+05:30", "timestamp": 1755777363.667826}}}
{"text": "2025-08-21 17:26:03.669 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:26.406712", "seconds": 26.406712}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 26756, "name": "MainProcess"}, "thread": {"id": 23968, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 17:26:03.669930+05:30", "timestamp": 1755777363.66993}}}
{"text": "2025-08-21 17:26:03.705 | DEBUG    | app.ws.live:emit_delta:408 - Emitted positions delta: seq=30\n", "record": {"elapsed": {"repr": "0:00:26.442594", "seconds": 26.442594}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "emit_delta", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 408, "message": "Emitted positions delta: seq=30", "module": "live", "name": "app.ws.live", "process": {"id": 26756, "name": "MainProcess"}, "thread": {"id": 9680, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:26:03.705812+05:30", "timestamp": 1755777363.705812}}}
{"text": "2025-08-21 17:26:04.097 | INFO     | app.services.dhan_client:get_pnl:489 - Starting accurate P&L calculation\n", "record": {"elapsed": {"repr": "0:00:26.834343", "seconds": 26.834343}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 489, "message": "Starting accurate P&L calculation", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 26756, "name": "MainProcess"}, "thread": {"id": 9680, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:26:04.097561+05:30", "timestamp": 1755777364.097561}}}
{"text": "2025-08-21 17:26:04.099 | INFO     | app.services.dhan_client:get_pnl:491 - Fetched 5 positions\n", "record": {"elapsed": {"repr": "0:00:26.835964", "seconds": 26.835964}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 491, "message": "Fetched 5 positions", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 26756, "name": "MainProcess"}, "thread": {"id": 9680, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:26:04.099182+05:30", "timestamp": 1755777364.099182}}}
{"text": "2025-08-21 17:26:04.100 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for RELIANCE: unrealized=-1405333.66, today=-1405333.66\n", "record": {"elapsed": {"repr": "0:00:26.837597", "seconds": 26.837597}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for RELIANCE: unrealized=-1405333.66, today=-1405333.66", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 26756, "name": "MainProcess"}, "thread": {"id": 9680, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:26:04.100815+05:30", "timestamp": 1755777364.100815}}}
{"text": "2025-08-21 17:26:04.102 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for TCS: unrealized=-70341.59, today=-70341.59\n", "record": {"elapsed": {"repr": "0:00:26.839474", "seconds": 26.839474}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for TCS: unrealized=-70341.59, today=-70341.59", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 26756, "name": "MainProcess"}, "thread": {"id": 9680, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:26:04.102692+05:30", "timestamp": 1755777364.102692}}}
{"text": "2025-08-21 17:26:04.104 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for HDFC: unrealized=-76762.12, today=-76762.12\n", "record": {"elapsed": {"repr": "0:00:26.841200", "seconds": 26.8412}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for HDFC: unrealized=-76762.12, today=-76762.12", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 26756, "name": "MainProcess"}, "thread": {"id": 9680, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:26:04.104418+05:30", "timestamp": 1755777364.104418}}}
{"text": "2025-08-21 17:26:04.107 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for INFY: unrealized=-184798.48, today=-184798.48\n", "record": {"elapsed": {"repr": "0:00:26.844688", "seconds": 26.844688}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for INFY: unrealized=-184798.48, today=-184798.48", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 26756, "name": "MainProcess"}, "thread": {"id": 9680, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:26:04.107906+05:30", "timestamp": 1755777364.107906}}}
{"text": "2025-08-21 17:26:04.109 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for ICICIBANK: unrealized=-982448.68, today=-982448.68\n", "record": {"elapsed": {"repr": "0:00:26.846261", "seconds": 26.846261}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for ICICIBANK: unrealized=-982448.68, today=-982448.68", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 26756, "name": "MainProcess"}, "thread": {"id": 9680, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:26:04.109479+05:30", "timestamp": 1755777364.109479}}}
{"text": "2025-08-21 17:26:04.110 | INFO     | app.services.dhan_client:get_pnl:545 - Calculated totals - realized: 0.0, unrealized: -2719684.53, day: -2719684.53\n", "record": {"elapsed": {"repr": "0:00:26.847753", "seconds": 26.847753}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 545, "message": "Calculated totals - realized: 0.0, unrealized: -2719684.53, day: -2719684.53", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 26756, "name": "MainProcess"}, "thread": {"id": 9680, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:26:04.110971+05:30", "timestamp": 1755777364.110971}}}
{"text": "2025-08-21 17:26:04.112 | DEBUG    | app.services.dhan_client:get_pnl:554 - PnL consistency check passed: drift=‚Çπ0.00\n", "record": {"elapsed": {"repr": "0:00:26.849428", "seconds": 26.849428}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 554, "message": "PnL consistency check passed: drift=‚Çπ0.00", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 26756, "name": "MainProcess"}, "thread": {"id": 9680, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:26:04.112646+05:30", "timestamp": 1755777364.112646}}}
{"text": "2025-08-21 17:26:04.114 | DEBUG    | app.services.dhan_client:get_pnl:558 - Creating PnLTotals...\n", "record": {"elapsed": {"repr": "0:00:26.851357", "seconds": 26.851357}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 558, "message": "Creating PnLTotals...", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 26756, "name": "MainProcess"}, "thread": {"id": 9680, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:26:04.114575+05:30", "timestamp": 1755777364.114575}}}
{"text": "2025-08-21 17:26:04.116 | DEBUG    | app.services.dhan_client:get_pnl:565 - PnLTotals created successfully\n", "record": {"elapsed": {"repr": "0:00:26.853471", "seconds": 26.853471}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 565, "message": "PnLTotals created successfully", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 26756, "name": "MainProcess"}, "thread": {"id": 9680, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:26:04.116689+05:30", "timestamp": 1755777364.116689}}}
{"text": "2025-08-21 17:26:04.118 | DEBUG    | app.services.dhan_client:get_pnl:574 - Creating PnL model...\n", "record": {"elapsed": {"repr": "0:00:26.855005", "seconds": 26.855005}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 574, "message": "Creating PnL model...", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 26756, "name": "MainProcess"}, "thread": {"id": 9680, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:26:04.118223+05:30", "timestamp": 1755777364.118223}}}
{"text": "2025-08-21 17:26:04.119 | DEBUG    | app.services.dhan_client:get_pnl:575 - Model fields: totals=<class 'app.models.schemas.PnLTotals'>, perSymbol=5, updated_at=2025-08-21 17:26:04.100619+05:30, trading_day=2025-08-21\n", "record": {"elapsed": {"repr": "0:00:26.856666", "seconds": 26.856666}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 575, "message": "Model fields: totals=<class 'app.models.schemas.PnLTotals'>, perSymbol=5, updated_at=2025-08-21 17:26:04.100619+05:30, trading_day=2025-08-21", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 26756, "name": "MainProcess"}, "thread": {"id": 9680, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:26:04.119884+05:30", "timestamp": 1755777364.119884}}}
{"text": "2025-08-21 17:26:04.122 | DEBUG    | app.services.dhan_client:get_pnl:584 - Created PnL model: totals=PnLTotals(realized=0.0, unrealized=-2719684.53, day=-2719684.53, currency='INR') per_symbol=[PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=827, avg=1814.66, ltp=115.34, unrealized=-1405333.66, today_pnl=-1405333.66), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=684, avg=1787.03, ltp=1889.87, unrealized=-70341.59, today_pnl=-70341.59), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=688, avg=1976.09, ltp=1864.52, unrealized=-76762.12, today_pnl=-76762.12), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=803, avg=834.66, ltp=1064.8, unrealized=-184798.48, today_pnl=-184798.48), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=1505, avg=1438.18, ltp=785.39, unrealized=-982448.68, today_pnl=-982448.68)] updated_at=datetime.datetime(2025, 8, 21, 17, 26, 4, 100619, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))) trading_day='2025-08-21'\n", "record": {"elapsed": {"repr": "0:00:26.859760", "seconds": 26.85976}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 584, "message": "Created PnL model: totals=PnLTotals(realized=0.0, unrealized=-2719684.53, day=-2719684.53, currency='INR') per_symbol=[PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=827, avg=1814.66, ltp=115.34, unrealized=-1405333.66, today_pnl=-1405333.66), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=684, avg=1787.03, ltp=1889.87, unrealized=-70341.59, today_pnl=-70341.59), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=688, avg=1976.09, ltp=1864.52, unrealized=-76762.12, today_pnl=-76762.12), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=803, avg=834.66, ltp=1064.8, unrealized=-184798.48, today_pnl=-184798.48), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=1505, avg=1438.18, ltp=785.39, unrealized=-982448.68, today_pnl=-982448.68)] updated_at=datetime.datetime(2025, 8, 21, 17, 26, 4, 100619, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))) trading_day='2025-08-21'", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 26756, "name": "MainProcess"}, "thread": {"id": 9680, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:26:04.122978+05:30", "timestamp": 1755777364.122978}}}
{"text": "2025-08-21 17:26:04.125 | DEBUG    | app.services.dhan_client:get_pnl:585 - PnL model fields: {'totals': PnLTotals(realized=0.0, unrealized=-2719684.53, day=-2719684.53, currency='INR'), 'per_symbol': [PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=827, avg=1814.66, ltp=115.34, unrealized=-1405333.66, today_pnl=-1405333.66), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=684, avg=1787.03, ltp=1889.87, unrealized=-70341.59, today_pnl=-70341.59), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=688, avg=1976.09, ltp=1864.52, unrealized=-76762.12, today_pnl=-76762.12), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=803, avg=834.66, ltp=1064.8, unrealized=-184798.48, today_pnl=-184798.48), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=1505, avg=1438.18, ltp=785.39, unrealized=-982448.68, today_pnl=-982448.68)], 'updated_at': datetime.datetime(2025, 8, 21, 17, 26, 4, 100619, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))), 'trading_day': '2025-08-21'}\n", "record": {"elapsed": {"repr": "0:00:26.862569", "seconds": 26.862569}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 585, "message": "PnL model fields: {'totals': PnLTotals(realized=0.0, unrealized=-2719684.53, day=-2719684.53, currency='INR'), 'per_symbol': [PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=827, avg=1814.66, ltp=115.34, unrealized=-1405333.66, today_pnl=-1405333.66), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=684, avg=1787.03, ltp=1889.87, unrealized=-70341.59, today_pnl=-70341.59), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=688, avg=1976.09, ltp=1864.52, unrealized=-76762.12, today_pnl=-76762.12), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=803, avg=834.66, ltp=1064.8, unrealized=-184798.48, today_pnl=-184798.48), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=1505, avg=1438.18, ltp=785.39, unrealized=-982448.68, today_pnl=-982448.68)], 'updated_at': datetime.datetime(2025, 8, 21, 17, 26, 4, 100619, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))), 'trading_day': '2025-08-21'}", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 26756, "name": "MainProcess"}, "thread": {"id": 9680, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:26:04.125787+05:30", "timestamp": 1755777364.125787}}}
{"text": "2025-08-21 17:26:04.128 | INFO     | app.services.dhan_client:get_pnl:587 - P&L calculation completed successfully: 5 symbols, unrealized=‚Çπ-2719684.53\n", "record": {"elapsed": {"repr": "0:00:26.865352", "seconds": 26.865352}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 587, "message": "P&L calculation completed successfully: 5 symbols, unrealized=‚Çπ-2719684.53", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 26756, "name": "MainProcess"}, "thread": {"id": 9680, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:26:04.128570+05:30", "timestamp": 1755777364.12857}}}
{"text": "2025-08-21 17:26:04.132 | DEBUG    | app.ws.live:emit_delta:408 - Emitted pnl delta: seq=31\n", "record": {"elapsed": {"repr": "0:00:26.869434", "seconds": 26.869434}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "emit_delta", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 408, "message": "Emitted pnl delta: seq=31", "module": "live", "name": "app.ws.live", "process": {"id": 26756, "name": "MainProcess"}, "thread": {"id": 9680, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:26:04.132652+05:30", "timestamp": 1755777364.132652}}}
{"text": "2025-08-21 17:26:05.672 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:28.408935", "seconds": 28.408935}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 26756, "name": "MainProcess"}, "thread": {"id": 23968, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 17:26:05.672153+05:30", "timestamp": 1755777365.672153}}}
{"text": "2025-08-21 17:26:05.673 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:28.410297", "seconds": 28.410297}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 26756, "name": "MainProcess"}, "thread": {"id": 23968, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 17:26:05.673515+05:30", "timestamp": 1755777365.673515}}}
{"text": "2025-08-21 17:26:05.675 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:28.412059", "seconds": 28.412059}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 26756, "name": "MainProcess"}, "thread": {"id": 23968, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 17:26:05.675277+05:30", "timestamp": 1755777365.675277}}}
{"text": "2025-08-21 17:26:05.677 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:28.413835", "seconds": 28.413835}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 26756, "name": "MainProcess"}, "thread": {"id": 23968, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 17:26:05.677053+05:30", "timestamp": 1755777365.677053}}}
{"text": "2025-08-21 17:26:05.678 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:28.415168", "seconds": 28.415168}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 26756, "name": "MainProcess"}, "thread": {"id": 23968, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 17:26:05.678386+05:30", "timestamp": 1755777365.678386}}}
{"text": "2025-08-21 17:26:05.681 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:28.417846", "seconds": 28.417846}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 26756, "name": "MainProcess"}, "thread": {"id": 23968, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 17:26:05.681064+05:30", "timestamp": 1755777365.681064}}}
{"text": "2025-08-21 17:26:05.683 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:28.420574", "seconds": 28.420574}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 26756, "name": "MainProcess"}, "thread": {"id": 23968, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 17:26:05.683792+05:30", "timestamp": 1755777365.683792}}}
{"text": "2025-08-21 17:26:05.687 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:28.424644", "seconds": 28.424644}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 26756, "name": "MainProcess"}, "thread": {"id": 23968, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 17:26:05.687862+05:30", "timestamp": 1755777365.687862}}}
{"text": "2025-08-21 17:26:05.691 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:28.428001", "seconds": 28.428001}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 26756, "name": "MainProcess"}, "thread": {"id": 23968, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 17:26:05.691219+05:30", "timestamp": 1755777365.691219}}}
{"text": "2025-08-21 17:26:05.693 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:28.430580", "seconds": 28.43058}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 26756, "name": "MainProcess"}, "thread": {"id": 23968, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 17:26:05.693798+05:30", "timestamp": 1755777365.693798}}}
{"text": "2025-08-21 17:26:06.032 | INFO     | app.services.dhan_client:get_pnl:489 - Starting accurate P&L calculation\n", "record": {"elapsed": {"repr": "0:00:28.769771", "seconds": 28.769771}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 489, "message": "Starting accurate P&L calculation", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 26756, "name": "MainProcess"}, "thread": {"id": 9680, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:26:06.032989+05:30", "timestamp": 1755777366.032989}}}
{"text": "2025-08-21 17:26:06.035 | INFO     | app.services.dhan_client:get_pnl:491 - Fetched 5 positions\n", "record": {"elapsed": {"repr": "0:00:28.772507", "seconds": 28.772507}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 491, "message": "Fetched 5 positions", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 26756, "name": "MainProcess"}, "thread": {"id": 9680, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:26:06.035725+05:30", "timestamp": 1755777366.035725}}}
{"text": "2025-08-21 17:26:06.037 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for RELIANCE: unrealized=-1404757.19, today=-1404757.19\n", "record": {"elapsed": {"repr": "0:00:28.774364", "seconds": 28.774364}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for RELIANCE: unrealized=-1404757.19, today=-1404757.19", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 26756, "name": "MainProcess"}, "thread": {"id": 9680, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:26:06.037582+05:30", "timestamp": 1755777366.037582}}}
{"text": "2025-08-21 17:26:06.039 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for TCS: unrealized=-86486.26, today=-86486.26\n", "record": {"elapsed": {"repr": "0:00:28.776719", "seconds": 28.776719}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for TCS: unrealized=-86486.26, today=-86486.26", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 26756, "name": "MainProcess"}, "thread": {"id": 9680, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:26:06.039937+05:30", "timestamp": 1755777366.039937}}}
{"text": "2025-08-21 17:26:06.042 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for HDFC: unrealized=-80544.23, today=-80544.23\n", "record": {"elapsed": {"repr": "0:00:28.779171", "seconds": 28.779171}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for HDFC: unrealized=-80544.23, today=-80544.23", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 26756, "name": "MainProcess"}, "thread": {"id": 9680, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:26:06.042389+05:30", "timestamp": 1755777366.042389}}}
{"text": "2025-08-21 17:26:06.044 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for INFY: unrealized=-200126.29, today=-200126.29\n", "record": {"elapsed": {"repr": "0:00:28.781650", "seconds": 28.78165}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for INFY: unrealized=-200126.29, today=-200126.29", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 26756, "name": "MainProcess"}, "thread": {"id": 9680, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:26:06.044868+05:30", "timestamp": 1755777366.044868}}}
{"text": "2025-08-21 17:26:06.046 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for ICICIBANK: unrealized=-988422.23, today=-988422.23\n", "record": {"elapsed": {"repr": "0:00:28.782943", "seconds": 28.782943}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for ICICIBANK: unrealized=-988422.23, today=-988422.23", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 26756, "name": "MainProcess"}, "thread": {"id": 9680, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:26:06.046161+05:30", "timestamp": 1755777366.046161}}}
{"text": "2025-08-21 17:26:06.047 | INFO     | app.services.dhan_client:get_pnl:545 - Calculated totals - realized: 0.0, unrealized: -2760336.2, day: -2760336.2\n", "record": {"elapsed": {"repr": "0:00:28.784186", "seconds": 28.784186}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 545, "message": "Calculated totals - realized: 0.0, unrealized: -2760336.2, day: -2760336.2", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 26756, "name": "MainProcess"}, "thread": {"id": 9680, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:26:06.047404+05:30", "timestamp": 1755777366.047404}}}
{"text": "2025-08-21 17:26:06.050 | DEBUG    | app.services.dhan_client:get_pnl:554 - PnL consistency check passed: drift=‚Çπ0.00\n", "record": {"elapsed": {"repr": "0:00:28.787330", "seconds": 28.78733}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 554, "message": "PnL consistency check passed: drift=‚Çπ0.00", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 26756, "name": "MainProcess"}, "thread": {"id": 9680, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:26:06.050548+05:30", "timestamp": 1755777366.050548}}}
{"text": "2025-08-21 17:26:06.051 | DEBUG    | app.services.dhan_client:get_pnl:558 - Creating PnLTotals...\n", "record": {"elapsed": {"repr": "0:00:28.788505", "seconds": 28.788505}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 558, "message": "Creating PnLTotals...", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 26756, "name": "MainProcess"}, "thread": {"id": 9680, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:26:06.051723+05:30", "timestamp": 1755777366.051723}}}
{"text": "2025-08-21 17:26:06.052 | DEBUG    | app.services.dhan_client:get_pnl:565 - PnLTotals created successfully\n", "record": {"elapsed": {"repr": "0:00:28.789696", "seconds": 28.789696}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 565, "message": "PnLTotals created successfully", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 26756, "name": "MainProcess"}, "thread": {"id": 9680, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:26:06.052914+05:30", "timestamp": 1755777366.052914}}}
{"text": "2025-08-21 17:26:06.053 | DEBUG    | app.services.dhan_client:get_pnl:574 - Creating PnL model...\n", "record": {"elapsed": {"repr": "0:00:28.790731", "seconds": 28.790731}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 574, "message": "Creating PnL model...", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 26756, "name": "MainProcess"}, "thread": {"id": 9680, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:26:06.053949+05:30", "timestamp": 1755777366.053949}}}
{"text": "2025-08-21 17:26:06.055 | DEBUG    | app.services.dhan_client:get_pnl:575 - Model fields: totals=<class 'app.models.schemas.PnLTotals'>, perSymbol=5, updated_at=2025-08-21 17:26:06.037365+05:30, trading_day=2025-08-21\n", "record": {"elapsed": {"repr": "0:00:28.792174", "seconds": 28.792174}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 575, "message": "Model fields: totals=<class 'app.models.schemas.PnLTotals'>, perSymbol=5, updated_at=2025-08-21 17:26:06.037365+05:30, trading_day=2025-08-21", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 26756, "name": "MainProcess"}, "thread": {"id": 9680, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:26:06.055392+05:30", "timestamp": 1755777366.055392}}}
{"text": "2025-08-21 17:26:06.057 | DEBUG    | app.services.dhan_client:get_pnl:584 - Created PnL model: totals=PnLTotals(realized=0.0, unrealized=-2760336.2, day=-2760336.2, currency='INR') per_symbol=[PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=827, avg=1814.66, ltp=116.04, unrealized=-1404757.19, today_pnl=-1404757.19), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=684, avg=1787.03, ltp=1913.47, unrealized=-86486.26, today_pnl=-86486.26), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=688, avg=1976.09, ltp=1859.02, unrealized=-80544.23, today_pnl=-80544.23), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=803, avg=834.66, ltp=1083.88, unrealized=-200126.29, today_pnl=-200126.29), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=1505, avg=1438.18, ltp=781.42, unrealized=-988422.23, today_pnl=-988422.23)] updated_at=datetime.datetime(2025, 8, 21, 17, 26, 6, 37365, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))) trading_day='2025-08-21'\n", "record": {"elapsed": {"repr": "0:00:28.794063", "seconds": 28.794063}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 584, "message": "Created PnL model: totals=PnLTotals(realized=0.0, unrealized=-2760336.2, day=-2760336.2, currency='INR') per_symbol=[PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=827, avg=1814.66, ltp=116.04, unrealized=-1404757.19, today_pnl=-1404757.19), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=684, avg=1787.03, ltp=1913.47, unrealized=-86486.26, today_pnl=-86486.26), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=688, avg=1976.09, ltp=1859.02, unrealized=-80544.23, today_pnl=-80544.23), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=803, avg=834.66, ltp=1083.88, unrealized=-200126.29, today_pnl=-200126.29), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=1505, avg=1438.18, ltp=781.42, unrealized=-988422.23, today_pnl=-988422.23)] updated_at=datetime.datetime(2025, 8, 21, 17, 26, 6, 37365, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))) trading_day='2025-08-21'", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 26756, "name": "MainProcess"}, "thread": {"id": 9680, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:26:06.057281+05:30", "timestamp": 1755777366.057281}}}
{"text": "2025-08-21 17:26:06.060 | DEBUG    | app.services.dhan_client:get_pnl:585 - PnL model fields: {'totals': PnLTotals(realized=0.0, unrealized=-2760336.2, day=-2760336.2, currency='INR'), 'per_symbol': [PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=827, avg=1814.66, ltp=116.04, unrealized=-1404757.19, today_pnl=-1404757.19), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=684, avg=1787.03, ltp=1913.47, unrealized=-86486.26, today_pnl=-86486.26), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=688, avg=1976.09, ltp=1859.02, unrealized=-80544.23, today_pnl=-80544.23), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=803, avg=834.66, ltp=1083.88, unrealized=-200126.29, today_pnl=-200126.29), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=1505, avg=1438.18, ltp=781.42, unrealized=-988422.23, today_pnl=-988422.23)], 'updated_at': datetime.datetime(2025, 8, 21, 17, 26, 6, 37365, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))), 'trading_day': '2025-08-21'}\n", "record": {"elapsed": {"repr": "0:00:28.797521", "seconds": 28.797521}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 585, "message": "PnL model fields: {'totals': PnLTotals(realized=0.0, unrealized=-2760336.2, day=-2760336.2, currency='INR'), 'per_symbol': [PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=827, avg=1814.66, ltp=116.04, unrealized=-1404757.19, today_pnl=-1404757.19), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=684, avg=1787.03, ltp=1913.47, unrealized=-86486.26, today_pnl=-86486.26), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=688, avg=1976.09, ltp=1859.02, unrealized=-80544.23, today_pnl=-80544.23), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=803, avg=834.66, ltp=1083.88, unrealized=-200126.29, today_pnl=-200126.29), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=1505, avg=1438.18, ltp=781.42, unrealized=-988422.23, today_pnl=-988422.23)], 'updated_at': datetime.datetime(2025, 8, 21, 17, 26, 6, 37365, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))), 'trading_day': '2025-08-21'}", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 26756, "name": "MainProcess"}, "thread": {"id": 9680, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:26:06.060739+05:30", "timestamp": 1755777366.060739}}}
{"text": "2025-08-21 17:26:06.062 | INFO     | app.services.dhan_client:get_pnl:587 - P&L calculation completed successfully: 5 symbols, unrealized=‚Çπ-2760336.20\n", "record": {"elapsed": {"repr": "0:00:28.799416", "seconds": 28.799416}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 587, "message": "P&L calculation completed successfully: 5 symbols, unrealized=‚Çπ-2760336.20", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 26756, "name": "MainProcess"}, "thread": {"id": 9680, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:26:06.062634+05:30", "timestamp": 1755777366.062634}}}
{"text": "2025-08-21 17:26:06.065 | DEBUG    | app.ws.live:emit_delta:408 - Emitted pnl delta: seq=32\n", "record": {"elapsed": {"repr": "0:00:28.801879", "seconds": 28.801879}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "emit_delta", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 408, "message": "Emitted pnl delta: seq=32", "module": "live", "name": "app.ws.live", "process": {"id": 26756, "name": "MainProcess"}, "thread": {"id": 9680, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:26:06.065097+05:30", "timestamp": 1755777366.065097}}}
{"text": "2025-08-21 17:26:06.069 | INFO     | app.ws.live:shutdown_event:557 - Stopping WebSocket polling...\n", "record": {"elapsed": {"repr": "0:00:28.806717", "seconds": 28.806717}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "shutdown_event", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 557, "message": "Stopping WebSocket polling...", "module": "live", "name": "app.ws.live", "process": {"id": 26756, "name": "MainProcess"}, "thread": {"id": 9680, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:26:06.069935+05:30", "timestamp": 1755777366.069935}}}
{"text": "2025-08-21 17:26:06.071 | INFO     | app.ws.live:shutdown_event:557 - Stopping WebSocket polling...\n", "record": {"elapsed": {"repr": "0:00:28.808096", "seconds": 28.808096}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "shutdown_event", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 557, "message": "Stopping WebSocket polling...", "module": "live", "name": "app.ws.live", "process": {"id": 26756, "name": "MainProcess"}, "thread": {"id": 9680, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:26:06.071314+05:30", "timestamp": 1755777366.071314}}}
{"text": "2025-08-21 17:26:06.072 | INFO     | app.main:shutdown_event:35 - Dhan Automation Backend Application shutting down\n", "record": {"elapsed": {"repr": "0:00:28.809144", "seconds": 28.809144}, "exception": null, "extra": {}, "file": {"name": "main.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\main.py"}, "function": "shutdown_event", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 35, "message": "Dhan Automation Backend Application shutting down", "module": "main", "name": "app.main", "process": {"id": 26756, "name": "MainProcess"}, "thread": {"id": 9680, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:26:06.072362+05:30", "timestamp": 1755777366.072362}}}
{"text": "2025-08-21 17:26:19.755 | INFO     | app.services.dhan_client:_initialize_mock_data:53 - Initializing mock data...\n", "record": {"elapsed": {"repr": "0:00:00.093028", "seconds": 0.093028}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_initialize_mock_data", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 53, "message": "Initializing mock data...", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 24252, "name": "MainProcess"}, "thread": {"id": 4988, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:26:19.755336+05:30", "timestamp": 1755777379.755336}}}
{"text": "2025-08-21 17:26:19.756 | INFO     | app.services.dhan_client:_initialize_mock_data:75 - Created mock holding for RELIANCE: qty=2679, avg_price=1630.8357093891416, ltp=1853.5913178111396\n", "record": {"elapsed": {"repr": "0:00:00.094635", "seconds": 0.094635}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_initialize_mock_data", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 75, "message": "Created mock holding for RELIANCE: qty=2679, avg_price=1630.8357093891416, ltp=1853.5913178111396", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 24252, "name": "MainProcess"}, "thread": {"id": 4988, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:26:19.756943+05:30", "timestamp": 1755777379.756943}}}
{"text": "2025-08-21 17:26:19.757 | INFO     | app.services.dhan_client:_initialize_mock_data:75 - Created mock holding for TCS: qty=198, avg_price=1939.7385414958878, ltp=2104.7155694579506\n", "record": {"elapsed": {"repr": "0:00:00.095687", "seconds": 0.095687}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_initialize_mock_data", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 75, "message": "Created mock holding for TCS: qty=198, avg_price=1939.7385414958878, ltp=2104.7155694579506", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 24252, "name": "MainProcess"}, "thread": {"id": 4988, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:26:19.757995+05:30", "timestamp": 1755777379.757995}}}
{"text": "2025-08-21 17:26:19.759 | INFO     | app.services.dhan_client:_initialize_mock_data:75 - Created mock holding for HDFC: qty=2360, avg_price=404.30717295717284, ltp=458.4453311943895\n", "record": {"elapsed": {"repr": "0:00:00.096697", "seconds": 0.096697}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_initialize_mock_data", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 75, "message": "Created mock holding for HDFC: qty=2360, avg_price=404.30717295717284, ltp=458.4453311943895", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 24252, "name": "MainProcess"}, "thread": {"id": 4988, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:26:19.759005+05:30", "timestamp": 1755777379.759005}}}
{"text": "2025-08-21 17:26:19.760 | INFO     | app.services.dhan_client:_initialize_mock_data:75 - Created mock holding for INFY: qty=1674, avg_price=698.9990395758058, ltp=768.6837743263244\n", "record": {"elapsed": {"repr": "0:00:00.097893", "seconds": 0.097893}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_initialize_mock_data", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 75, "message": "Created mock holding for INFY: qty=1674, avg_price=698.9990395758058, ltp=768.6837743263244", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 24252, "name": "MainProcess"}, "thread": {"id": 4988, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:26:19.760201+05:30", "timestamp": 1755777379.760201}}}
{"text": "2025-08-21 17:26:19.761 | INFO     | app.services.dhan_client:_initialize_mock_data:75 - Created mock holding for ICICIBANK: qty=4876, avg_price=1317.0466422352754, ltp=1506.704745845417\n", "record": {"elapsed": {"repr": "0:00:00.099523", "seconds": 0.099523}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_initialize_mock_data", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 75, "message": "Created mock holding for ICICIBANK: qty=4876, avg_price=1317.0466422352754, ltp=1506.704745845417", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 24252, "name": "MainProcess"}, "thread": {"id": 4988, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:26:19.761831+05:30", "timestamp": 1755777379.761831}}}
{"text": "2025-08-21 17:26:19.763 | INFO     | app.services.dhan_client:_initialize_mock_data:75 - Created mock holding for HINDUNILVR: qty=2812, avg_price=434.33817545397807, ltp=411.9499775588572\n", "record": {"elapsed": {"repr": "0:00:00.100964", "seconds": 0.100964}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_initialize_mock_data", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 75, "message": "Created mock holding for HINDUNILVR: qty=2812, avg_price=434.33817545397807, ltp=411.9499775588572", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 24252, "name": "MainProcess"}, "thread": {"id": 4988, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:26:19.763272+05:30", "timestamp": 1755777379.763272}}}
{"text": "2025-08-21 17:26:19.764 | INFO     | app.services.dhan_client:_initialize_mock_data:75 - Created mock holding for ITC: qty=473, avg_price=1248.8523031743232, ltp=1480.3590209628767\n", "record": {"elapsed": {"repr": "0:00:00.102483", "seconds": 0.102483}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_initialize_mock_data", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 75, "message": "Created mock holding for ITC: qty=473, avg_price=1248.8523031743232, ltp=1480.3590209628767", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 24252, "name": "MainProcess"}, "thread": {"id": 4988, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:26:19.764791+05:30", "timestamp": 1755777379.764791}}}
{"text": "2025-08-21 17:26:19.765 | INFO     | app.services.dhan_client:_initialize_mock_data:75 - Created mock holding for SBIN: qty=4232, avg_price=1907.7727777792963, ltp=2191.3146437379137\n", "record": {"elapsed": {"repr": "0:00:00.103661", "seconds": 0.103661}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_initialize_mock_data", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 75, "message": "Created mock holding for SBIN: qty=4232, avg_price=1907.7727777792963, ltp=2191.3146437379137", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 24252, "name": "MainProcess"}, "thread": {"id": 4988, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:26:19.765969+05:30", "timestamp": 1755777379.765969}}}
{"text": "2025-08-21 17:26:19.767 | INFO     | app.services.dhan_client:_initialize_mock_data:75 - Created mock holding for BHARTIARTL: qty=3111, avg_price=1909.4846799320205, ltp=1574.9470796368082\n", "record": {"elapsed": {"repr": "0:00:00.104826", "seconds": 0.104826}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_initialize_mock_data", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 75, "message": "Created mock holding for BHARTIARTL: qty=3111, avg_price=1909.4846799320205, ltp=1574.9470796368082", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 24252, "name": "MainProcess"}, "thread": {"id": 4988, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:26:19.767134+05:30", "timestamp": 1755777379.767134}}}
{"text": "2025-08-21 17:26:19.770 | INFO     | app.services.dhan_client:_initialize_mock_data:75 - Created mock holding for KOTAKBANK: qty=964, avg_price=1995.3165962917537, ltp=1647.7415880076592\n", "record": {"elapsed": {"repr": "0:00:00.107732", "seconds": 0.107732}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_initialize_mock_data", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 75, "message": "Created mock holding for KOTAKBANK: qty=964, avg_price=1995.3165962917537, ltp=1647.7415880076592", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 24252, "name": "MainProcess"}, "thread": {"id": 4988, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:26:19.770040+05:30", "timestamp": 1755777379.77004}}}
{"text": "2025-08-21 17:26:19.771 | INFO     | app.services.dhan_client:_initialize_mock_data:77 - Created 10 mock holdings\n", "record": {"elapsed": {"repr": "0:00:00.108929", "seconds": 0.108929}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_initialize_mock_data", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 77, "message": "Created 10 mock holdings", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 24252, "name": "MainProcess"}, "thread": {"id": 4988, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:26:19.771237+05:30", "timestamp": 1755777379.771237}}}
{"text": "2025-08-21 17:26:19.772 | INFO     | app.services.dhan_client:_initialize_mock_data:91 - Created mock position for RELIANCE: id=pos_001, qty=225, avg_price=178.26\n", "record": {"elapsed": {"repr": "0:00:00.110633", "seconds": 0.110633}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_initialize_mock_data", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 91, "message": "Created mock position for RELIANCE: id=pos_001, qty=225, avg_price=178.26", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 24252, "name": "MainProcess"}, "thread": {"id": 4988, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:26:19.772941+05:30", "timestamp": 1755777379.772941}}}
{"text": "2025-08-21 17:26:19.774 | INFO     | app.services.dhan_client:_initialize_mock_data:91 - Created mock position for TCS: id=pos_002, qty=1032, avg_price=1505.73\n", "record": {"elapsed": {"repr": "0:00:00.112470", "seconds": 0.11247}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_initialize_mock_data", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 91, "message": "Created mock position for TCS: id=pos_002, qty=1032, avg_price=1505.73", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 24252, "name": "MainProcess"}, "thread": {"id": 4988, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:26:19.774778+05:30", "timestamp": 1755777379.774778}}}
{"text": "2025-08-21 17:26:19.776 | INFO     | app.services.dhan_client:_initialize_mock_data:91 - Created mock position for HDFC: id=pos_003, qty=582, avg_price=1621.65\n", "record": {"elapsed": {"repr": "0:00:00.113863", "seconds": 0.113863}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_initialize_mock_data", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 91, "message": "Created mock position for HDFC: id=pos_003, qty=582, avg_price=1621.65", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 24252, "name": "MainProcess"}, "thread": {"id": 4988, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:26:19.776171+05:30", "timestamp": 1755777379.776171}}}
{"text": "2025-08-21 17:26:19.777 | INFO     | app.services.dhan_client:_initialize_mock_data:91 - Created mock position for INFY: id=pos_004, qty=149, avg_price=585.01\n", "record": {"elapsed": {"repr": "0:00:00.115490", "seconds": 0.11549}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_initialize_mock_data", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 91, "message": "Created mock position for INFY: id=pos_004, qty=149, avg_price=585.01", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 24252, "name": "MainProcess"}, "thread": {"id": 4988, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:26:19.777798+05:30", "timestamp": 1755777379.777798}}}
{"text": "2025-08-21 17:26:19.778 | INFO     | app.services.dhan_client:_initialize_mock_data:91 - Created mock position for ICICIBANK: id=pos_005, qty=1312, avg_price=1233.35\n", "record": {"elapsed": {"repr": "0:00:00.116682", "seconds": 0.116682}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_initialize_mock_data", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 91, "message": "Created mock position for ICICIBANK: id=pos_005, qty=1312, avg_price=1233.35", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 24252, "name": "MainProcess"}, "thread": {"id": 4988, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:26:19.778990+05:30", "timestamp": 1755777379.77899}}}
{"text": "2025-08-21 17:26:19.779 | INFO     | app.services.dhan_client:_initialize_mock_data:93 - Created 5 mock positions\n", "record": {"elapsed": {"repr": "0:00:00.117640", "seconds": 0.11764}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_initialize_mock_data", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 93, "message": "Created 5 mock positions", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 24252, "name": "MainProcess"}, "thread": {"id": 4988, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:26:19.779948+05:30", "timestamp": 1755777379.779948}}}
{"text": "2025-08-21 17:26:19.782 | INFO     | app.services.dhan_client:_initialize_mock_data:111 - Created 10 mock orders\n", "record": {"elapsed": {"repr": "0:00:00.120069", "seconds": 0.120069}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_initialize_mock_data", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 111, "message": "Created 10 mock orders", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 24252, "name": "MainProcess"}, "thread": {"id": 4988, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:26:19.782377+05:30", "timestamp": 1755777379.782377}}}
{"text": "2025-08-21 17:26:19.784 | INFO     | app.services.dhan_client:_initialize_mock_data:127 - Created 20 mock trades\n", "record": {"elapsed": {"repr": "0:00:00.122654", "seconds": 0.122654}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_initialize_mock_data", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 127, "message": "Created 20 mock trades", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 24252, "name": "MainProcess"}, "thread": {"id": 4988, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:26:19.784962+05:30", "timestamp": 1755777379.784962}}}
{"text": "2025-08-21 17:26:19.786 | INFO     | app.services.dhan_client:_initialize_mock_data:128 - Mock data initialization completed successfully\n", "record": {"elapsed": {"repr": "0:00:00.123878", "seconds": 0.123878}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_initialize_mock_data", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 128, "message": "Mock data initialization completed successfully", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 24252, "name": "MainProcess"}, "thread": {"id": 4988, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:26:19.786186+05:30", "timestamp": 1755777379.786186}}}
{"text": "2025-08-21 17:26:19.842 | INFO     | app.main:<module>:38 - Starting Dhan Automation Backend Application\n", "record": {"elapsed": {"repr": "0:00:00.180418", "seconds": 0.180418}, "exception": null, "extra": {}, "file": {"name": "main.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\main.py"}, "function": "<module>", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 38, "message": "Starting Dhan Automation Backend Application", "module": "main", "name": "app.main", "process": {"id": 24252, "name": "MainProcess"}, "thread": {"id": 4988, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:26:19.842726+05:30", "timestamp": 1755777379.842726}}}
{"text": "2025-08-21 17:29:56.426 | INFO     | app.services.dhan_client:_initialize_mock_data:53 - Initializing mock data...\n", "record": {"elapsed": {"repr": "0:00:00.079670", "seconds": 0.07967}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_initialize_mock_data", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 53, "message": "Initializing mock data...", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 21844, "name": "MainProcess"}, "thread": {"id": 24292, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:29:56.426849+05:30", "timestamp": 1755777596.426849}}}
{"text": "2025-08-21 17:29:56.428 | INFO     | app.services.dhan_client:_initialize_mock_data:75 - Created mock holding for RELIANCE: qty=4102, avg_price=143.4935691728407, ltp=124.05106283686668\n", "record": {"elapsed": {"repr": "0:00:00.081384", "seconds": 0.081384}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_initialize_mock_data", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 75, "message": "Created mock holding for RELIANCE: qty=4102, avg_price=143.4935691728407, ltp=124.05106283686668", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 21844, "name": "MainProcess"}, "thread": {"id": 24292, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:29:56.428563+05:30", "timestamp": 1755777596.428563}}}
{"text": "2025-08-21 17:29:56.430 | INFO     | app.services.dhan_client:_initialize_mock_data:75 - Created mock holding for TCS: qty=238, avg_price=974.2609481991242, ltp=906.8926681821607\n", "record": {"elapsed": {"repr": "0:00:00.083031", "seconds": 0.083031}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_initialize_mock_data", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 75, "message": "Created mock holding for TCS: qty=238, avg_price=974.2609481991242, ltp=906.8926681821607", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 21844, "name": "MainProcess"}, "thread": {"id": 24292, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:29:56.430210+05:30", "timestamp": 1755777596.43021}}}
{"text": "2025-08-21 17:29:56.431 | INFO     | app.services.dhan_client:_initialize_mock_data:75 - Created mock holding for HDFC: qty=778, avg_price=1465.3548360503542, ltp=1316.2505405691097\n", "record": {"elapsed": {"repr": "0:00:00.084233", "seconds": 0.084233}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_initialize_mock_data", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 75, "message": "Created mock holding for HDFC: qty=778, avg_price=1465.3548360503542, ltp=1316.2505405691097", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 21844, "name": "MainProcess"}, "thread": {"id": 24292, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:29:56.431412+05:30", "timestamp": 1755777596.431412}}}
{"text": "2025-08-21 17:29:56.432 | INFO     | app.services.dhan_client:_initialize_mock_data:75 - Created mock holding for INFY: qty=3567, avg_price=862.7219947692662, ltp=1008.0003607661594\n", "record": {"elapsed": {"repr": "0:00:00.085251", "seconds": 0.085251}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_initialize_mock_data", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 75, "message": "Created mock holding for INFY: qty=3567, avg_price=862.7219947692662, ltp=1008.0003607661594", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 21844, "name": "MainProcess"}, "thread": {"id": 24292, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:29:56.432430+05:30", "timestamp": 1755777596.43243}}}
{"text": "2025-08-21 17:29:56.433 | INFO     | app.services.dhan_client:_initialize_mock_data:75 - Created mock holding for ICICIBANK: qty=2301, avg_price=311.0055738185599, ltp=353.57043564242485\n", "record": {"elapsed": {"repr": "0:00:00.086466", "seconds": 0.086466}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_initialize_mock_data", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 75, "message": "Created mock holding for ICICIBANK: qty=2301, avg_price=311.0055738185599, ltp=353.57043564242485", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 21844, "name": "MainProcess"}, "thread": {"id": 24292, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:29:56.433645+05:30", "timestamp": 1755777596.433645}}}
{"text": "2025-08-21 17:29:56.435 | INFO     | app.services.dhan_client:_initialize_mock_data:75 - Created mock holding for HINDUNILVR: qty=2902, avg_price=1756.0656745835577, ltp=1454.8245320021986\n", "record": {"elapsed": {"repr": "0:00:00.087967", "seconds": 0.087967}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_initialize_mock_data", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 75, "message": "Created mock holding for HINDUNILVR: qty=2902, avg_price=1756.0656745835577, ltp=1454.8245320021986", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 21844, "name": "MainProcess"}, "thread": {"id": 24292, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:29:56.435146+05:30", "timestamp": 1755777596.435146}}}
{"text": "2025-08-21 17:29:56.436 | INFO     | app.services.dhan_client:_initialize_mock_data:75 - Created mock holding for ITC: qty=2541, avg_price=1465.9616958065176, ltp=1190.091160476839\n", "record": {"elapsed": {"repr": "0:00:00.089139", "seconds": 0.089139}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_initialize_mock_data", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 75, "message": "Created mock holding for ITC: qty=2541, avg_price=1465.9616958065176, ltp=1190.091160476839", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 21844, "name": "MainProcess"}, "thread": {"id": 24292, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:29:56.436318+05:30", "timestamp": 1755777596.436318}}}
{"text": "2025-08-21 17:29:56.437 | INFO     | app.services.dhan_client:_initialize_mock_data:75 - Created mock holding for SBIN: qty=435, avg_price=1685.3561672134426, ltp=1741.807103211995\n", "record": {"elapsed": {"repr": "0:00:00.090359", "seconds": 0.090359}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_initialize_mock_data", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 75, "message": "Created mock holding for SBIN: qty=435, avg_price=1685.3561672134426, ltp=1741.807103211995", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 21844, "name": "MainProcess"}, "thread": {"id": 24292, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:29:56.437538+05:30", "timestamp": 1755777596.437538}}}
{"text": "2025-08-21 17:29:56.438 | INFO     | app.services.dhan_client:_initialize_mock_data:75 - Created mock holding for BHARTIARTL: qty=744, avg_price=1471.6524059931799, ltp=1690.5560382251526\n", "record": {"elapsed": {"repr": "0:00:00.091578", "seconds": 0.091578}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_initialize_mock_data", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 75, "message": "Created mock holding for BHARTIARTL: qty=744, avg_price=1471.6524059931799, ltp=1690.5560382251526", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 21844, "name": "MainProcess"}, "thread": {"id": 24292, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:29:56.438757+05:30", "timestamp": 1755777596.438757}}}
{"text": "2025-08-21 17:29:56.439 | INFO     | app.services.dhan_client:_initialize_mock_data:75 - Created mock holding for KOTAKBANK: qty=4098, avg_price=231.08436741225447, ltp=248.17859276874967\n", "record": {"elapsed": {"repr": "0:00:00.092818", "seconds": 0.092818}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_initialize_mock_data", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 75, "message": "Created mock holding for KOTAKBANK: qty=4098, avg_price=231.08436741225447, ltp=248.17859276874967", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 21844, "name": "MainProcess"}, "thread": {"id": 24292, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:29:56.439997+05:30", "timestamp": 1755777596.439997}}}
{"text": "2025-08-21 17:29:56.440 | INFO     | app.services.dhan_client:_initialize_mock_data:77 - Created 10 mock holdings\n", "record": {"elapsed": {"repr": "0:00:00.093479", "seconds": 0.093479}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_initialize_mock_data", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 77, "message": "Created 10 mock holdings", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 21844, "name": "MainProcess"}, "thread": {"id": 24292, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:29:56.440658+05:30", "timestamp": 1755777596.440658}}}
{"text": "2025-08-21 17:29:56.441 | INFO     | app.services.dhan_client:_initialize_mock_data:91 - Created mock position for RELIANCE: id=pos_001, qty=1412, avg_price=1385.34\n", "record": {"elapsed": {"repr": "0:00:00.094534", "seconds": 0.094534}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_initialize_mock_data", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 91, "message": "Created mock position for RELIANCE: id=pos_001, qty=1412, avg_price=1385.34", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 21844, "name": "MainProcess"}, "thread": {"id": 24292, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:29:56.441713+05:30", "timestamp": 1755777596.441713}}}
{"text": "2025-08-21 17:29:56.442 | INFO     | app.services.dhan_client:_initialize_mock_data:91 - Created mock position for TCS: id=pos_002, qty=1160, avg_price=1132.72\n", "record": {"elapsed": {"repr": "0:00:00.095624", "seconds": 0.095624}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_initialize_mock_data", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 91, "message": "Created mock position for TCS: id=pos_002, qty=1160, avg_price=1132.72", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 21844, "name": "MainProcess"}, "thread": {"id": 24292, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:29:56.442803+05:30", "timestamp": 1755777596.442803}}}
{"text": "2025-08-21 17:29:56.444 | INFO     | app.services.dhan_client:_initialize_mock_data:91 - Created mock position for HDFC: id=pos_003, qty=791, avg_price=1735.92\n", "record": {"elapsed": {"repr": "0:00:00.096985", "seconds": 0.096985}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_initialize_mock_data", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 91, "message": "Created mock position for HDFC: id=pos_003, qty=791, avg_price=1735.92", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 21844, "name": "MainProcess"}, "thread": {"id": 24292, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:29:56.444164+05:30", "timestamp": 1755777596.444164}}}
{"text": "2025-08-21 17:29:56.445 | INFO     | app.services.dhan_client:_initialize_mock_data:91 - Created mock position for INFY: id=pos_004, qty=1902, avg_price=1982.2\n", "record": {"elapsed": {"repr": "0:00:00.098269", "seconds": 0.098269}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_initialize_mock_data", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 91, "message": "Created mock position for INFY: id=pos_004, qty=1902, avg_price=1982.2", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 21844, "name": "MainProcess"}, "thread": {"id": 24292, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:29:56.445448+05:30", "timestamp": 1755777596.445448}}}
{"text": "2025-08-21 17:29:56.446 | INFO     | app.services.dhan_client:_initialize_mock_data:91 - Created mock position for ICICIBANK: id=pos_005, qty=773, avg_price=1518.94\n", "record": {"elapsed": {"repr": "0:00:00.099579", "seconds": 0.099579}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_initialize_mock_data", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 91, "message": "Created mock position for ICICIBANK: id=pos_005, qty=773, avg_price=1518.94", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 21844, "name": "MainProcess"}, "thread": {"id": 24292, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:29:56.446758+05:30", "timestamp": 1755777596.446758}}}
{"text": "2025-08-21 17:29:56.448 | INFO     | app.services.dhan_client:_initialize_mock_data:93 - Created 5 mock positions\n", "record": {"elapsed": {"repr": "0:00:00.100868", "seconds": 0.100868}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_initialize_mock_data", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 93, "message": "Created 5 mock positions", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 21844, "name": "MainProcess"}, "thread": {"id": 24292, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:29:56.448047+05:30", "timestamp": 1755777596.448047}}}
{"text": "2025-08-21 17:29:56.449 | INFO     | app.services.dhan_client:_initialize_mock_data:111 - Created 10 mock orders\n", "record": {"elapsed": {"repr": "0:00:00.102644", "seconds": 0.102644}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_initialize_mock_data", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 111, "message": "Created 10 mock orders", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 21844, "name": "MainProcess"}, "thread": {"id": 24292, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:29:56.449823+05:30", "timestamp": 1755777596.449823}}}
{"text": "2025-08-21 17:29:56.451 | INFO     | app.services.dhan_client:_initialize_mock_data:127 - Created 20 mock trades\n", "record": {"elapsed": {"repr": "0:00:00.104361", "seconds": 0.104361}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_initialize_mock_data", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 127, "message": "Created 20 mock trades", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 21844, "name": "MainProcess"}, "thread": {"id": 24292, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:29:56.451540+05:30", "timestamp": 1755777596.45154}}}
{"text": "2025-08-21 17:29:56.453 | INFO     | app.services.dhan_client:_initialize_mock_data:128 - Mock data initialization completed successfully\n", "record": {"elapsed": {"repr": "0:00:00.105916", "seconds": 0.105916}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_initialize_mock_data", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 128, "message": "Mock data initialization completed successfully", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 21844, "name": "MainProcess"}, "thread": {"id": 24292, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:29:56.453095+05:30", "timestamp": 1755777596.453095}}}
{"text": "2025-08-21 17:29:56.502 | INFO     | app.main:<module>:38 - Starting Dhan Automation Backend Application\n", "record": {"elapsed": {"repr": "0:00:00.155052", "seconds": 0.155052}, "exception": null, "extra": {}, "file": {"name": "main.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\main.py"}, "function": "<module>", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 38, "message": "Starting Dhan Automation Backend Application", "module": "main", "name": "app.main", "process": {"id": 21844, "name": "MainProcess"}, "thread": {"id": 24292, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:29:56.502231+05:30", "timestamp": 1755777596.502231}}}
{"text": "2025-08-21 17:29:56.673 | INFO     | app.ws.live:startup_event:551 - Starting WebSocket polling...\n", "record": {"elapsed": {"repr": "0:00:00.326606", "seconds": 0.326606}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "startup_event", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 551, "message": "Starting WebSocket polling...", "module": "live", "name": "app.ws.live", "process": {"id": 21844, "name": "MainProcess"}, "thread": {"id": 24292, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:29:56.673785+05:30", "timestamp": 1755777596.673785}}}
{"text": "2025-08-21 17:29:56.675 | INFO     | app.main:startup_event:30 - Dhan Automation Backend Application started successfully\n", "record": {"elapsed": {"repr": "0:00:00.328689", "seconds": 0.328689}, "exception": null, "extra": {}, "file": {"name": "main.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\main.py"}, "function": "startup_event", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 30, "message": "Dhan Automation Backend Application started successfully", "module": "main", "name": "app.main", "process": {"id": 21844, "name": "MainProcess"}, "thread": {"id": 24292, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:29:56.675868+05:30", "timestamp": 1755777596.675868}}}
{"text": "2025-08-21 17:29:56.677 | INFO     | app.main:startup_event:31 - Using MOCK data mode\n", "record": {"elapsed": {"repr": "0:00:00.330210", "seconds": 0.33021}, "exception": null, "extra": {}, "file": {"name": "main.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\main.py"}, "function": "startup_event", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 31, "message": "Using MOCK data mode", "module": "main", "name": "app.main", "process": {"id": 21844, "name": "MainProcess"}, "thread": {"id": 24292, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:29:56.677389+05:30", "timestamp": 1755777596.677389}}}
{"text": "2025-08-21 17:29:56.678 | INFO     | app.ws.live:startup_event:551 - Starting WebSocket polling...\n", "record": {"elapsed": {"repr": "0:00:00.331660", "seconds": 0.33166}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "startup_event", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 551, "message": "Starting WebSocket polling...", "module": "live", "name": "app.ws.live", "process": {"id": 21844, "name": "MainProcess"}, "thread": {"id": 24292, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:29:56.678839+05:30", "timestamp": 1755777596.678839}}}
{"text": "2025-08-21 17:29:58.359 | DEBUG    | app.ws.live:emit_delta:408 - Emitted positions delta: seq=1\n", "record": {"elapsed": {"repr": "0:00:02.011950", "seconds": 2.01195}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "emit_delta", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 408, "message": "Emitted positions delta: seq=1", "module": "live", "name": "app.ws.live", "process": {"id": 21844, "name": "MainProcess"}, "thread": {"id": 24292, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:29:58.359129+05:30", "timestamp": 1755777598.359129}}}
{"text": "2025-08-21 17:29:58.361 | INFO     | app.services.dhan_client:get_pnl:489 - Starting accurate P&L calculation\n", "record": {"elapsed": {"repr": "0:00:02.014025", "seconds": 2.014025}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 489, "message": "Starting accurate P&L calculation", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 21844, "name": "MainProcess"}, "thread": {"id": 24292, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:29:58.361204+05:30", "timestamp": 1755777598.361204}}}
{"text": "2025-08-21 17:29:58.362 | INFO     | app.services.dhan_client:get_pnl:491 - Fetched 5 positions\n", "record": {"elapsed": {"repr": "0:00:02.015485", "seconds": 2.015485}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 491, "message": "Fetched 5 positions", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 21844, "name": "MainProcess"}, "thread": {"id": 24292, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:29:58.362664+05:30", "timestamp": 1755777598.362664}}}
{"text": "2025-08-21 17:29:58.364 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for RELIANCE: unrealized=-1780939.98, today=-1780939.98\n", "record": {"elapsed": {"repr": "0:00:02.016995", "seconds": 2.016995}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for RELIANCE: unrealized=-1780939.98, today=-1780939.98", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 21844, "name": "MainProcess"}, "thread": {"id": 24292, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:29:58.364174+05:30", "timestamp": 1755777598.364174}}}
{"text": "2025-08-21 17:29:58.365 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for TCS: unrealized=261959.7, today=261959.7\n", "record": {"elapsed": {"repr": "0:00:02.018449", "seconds": 2.018449}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for TCS: unrealized=261959.7, today=261959.7", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 21844, "name": "MainProcess"}, "thread": {"id": 24292, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:29:58.365628+05:30", "timestamp": 1755777598.365628}}}
{"text": "2025-08-21 17:29:58.367 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for HDFC: unrealized=-331958.54, today=-331958.54\n", "record": {"elapsed": {"repr": "0:00:02.019911", "seconds": 2.019911}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for HDFC: unrealized=-331958.54, today=-331958.54", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 21844, "name": "MainProcess"}, "thread": {"id": 24292, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:29:58.367090+05:30", "timestamp": 1755777598.36709}}}
{"text": "2025-08-21 17:29:58.368 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for INFY: unrealized=1852927.71, today=1852927.71\n", "record": {"elapsed": {"repr": "0:00:02.021688", "seconds": 2.021688}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for INFY: unrealized=1852927.71, today=1852927.71", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 21844, "name": "MainProcess"}, "thread": {"id": 24292, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:29:58.368867+05:30", "timestamp": 1755777598.368867}}}
{"text": "2025-08-21 17:29:58.370 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for ICICIBANK: unrealized=-900830.67, today=-900830.67\n", "record": {"elapsed": {"repr": "0:00:02.023230", "seconds": 2.02323}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for ICICIBANK: unrealized=-900830.67, today=-900830.67", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 21844, "name": "MainProcess"}, "thread": {"id": 24292, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:29:58.370409+05:30", "timestamp": 1755777598.370409}}}
{"text": "2025-08-21 17:29:58.372 | INFO     | app.services.dhan_client:get_pnl:545 - Calculated totals - realized: 0.0, unrealized: -898841.78, day: -898841.78\n", "record": {"elapsed": {"repr": "0:00:02.025081", "seconds": 2.025081}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 545, "message": "Calculated totals - realized: 0.0, unrealized: -898841.78, day: -898841.78", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 21844, "name": "MainProcess"}, "thread": {"id": 24292, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:29:58.372260+05:30", "timestamp": 1755777598.37226}}}
{"text": "2025-08-21 17:29:58.374 | DEBUG    | app.services.dhan_client:get_pnl:554 - PnL consistency check passed: drift=‚Çπ0.00\n", "record": {"elapsed": {"repr": "0:00:02.027444", "seconds": 2.027444}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 554, "message": "PnL consistency check passed: drift=‚Çπ0.00", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 21844, "name": "MainProcess"}, "thread": {"id": 24292, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:29:58.374623+05:30", "timestamp": 1755777598.374623}}}
{"text": "2025-08-21 17:29:58.376 | DEBUG    | app.services.dhan_client:get_pnl:558 - Creating PnLTotals...\n", "record": {"elapsed": {"repr": "0:00:02.028981", "seconds": 2.028981}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 558, "message": "Creating PnLTotals...", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 21844, "name": "MainProcess"}, "thread": {"id": 24292, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:29:58.376160+05:30", "timestamp": 1755777598.37616}}}
{"text": "2025-08-21 17:29:58.377 | DEBUG    | app.services.dhan_client:get_pnl:565 - PnLTotals created successfully\n", "record": {"elapsed": {"repr": "0:00:02.030676", "seconds": 2.030676}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 565, "message": "PnLTotals created successfully", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 21844, "name": "MainProcess"}, "thread": {"id": 24292, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:29:58.377855+05:30", "timestamp": 1755777598.377855}}}
{"text": "2025-08-21 17:29:58.379 | DEBUG    | app.services.dhan_client:get_pnl:574 - Creating PnL model...\n", "record": {"elapsed": {"repr": "0:00:02.031879", "seconds": 2.031879}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 574, "message": "Creating PnL model...", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 21844, "name": "MainProcess"}, "thread": {"id": 24292, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:29:58.379058+05:30", "timestamp": 1755777598.379058}}}
{"text": "2025-08-21 17:29:58.380 | DEBUG    | app.services.dhan_client:get_pnl:575 - Model fields: totals=<class 'app.models.schemas.PnLTotals'>, perSymbol=5, updated_at=2025-08-21 17:29:58.363942+05:30, trading_day=2025-08-21\n", "record": {"elapsed": {"repr": "0:00:02.033602", "seconds": 2.033602}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 575, "message": "Model fields: totals=<class 'app.models.schemas.PnLTotals'>, perSymbol=5, updated_at=2025-08-21 17:29:58.363942+05:30, trading_day=2025-08-21", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 21844, "name": "MainProcess"}, "thread": {"id": 24292, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:29:58.380781+05:30", "timestamp": 1755777598.380781}}}
{"text": "2025-08-21 17:29:58.382 | DEBUG    | app.services.dhan_client:get_pnl:584 - Created PnL model: totals=PnLTotals(realized=0.0, unrealized=-898841.78, day=-898841.78, currency='INR') per_symbol=[PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1412, avg=1385.34, ltp=124.05, unrealized=-1780939.98, today_pnl=-1780939.98), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=1160, avg=1132.72, ltp=906.89, unrealized=261959.7, today_pnl=261959.7), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=791, avg=1735.92, ltp=1316.25, unrealized=-331958.54, today_pnl=-331958.54), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=1902, avg=1982.2, ltp=1008.0, unrealized=1852927.71, today_pnl=1852927.71), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=773, avg=1518.94, ltp=353.57, unrealized=-900830.67, today_pnl=-900830.67)] updated_at=datetime.datetime(2025, 8, 21, 17, 29, 58, 363942, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))) trading_day='2025-08-21'\n", "record": {"elapsed": {"repr": "0:00:02.035082", "seconds": 2.035082}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 584, "message": "Created PnL model: totals=PnLTotals(realized=0.0, unrealized=-898841.78, day=-898841.78, currency='INR') per_symbol=[PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1412, avg=1385.34, ltp=124.05, unrealized=-1780939.98, today_pnl=-1780939.98), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=1160, avg=1132.72, ltp=906.89, unrealized=261959.7, today_pnl=261959.7), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=791, avg=1735.92, ltp=1316.25, unrealized=-331958.54, today_pnl=-331958.54), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=1902, avg=1982.2, ltp=1008.0, unrealized=1852927.71, today_pnl=1852927.71), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=773, avg=1518.94, ltp=353.57, unrealized=-900830.67, today_pnl=-900830.67)] updated_at=datetime.datetime(2025, 8, 21, 17, 29, 58, 363942, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))) trading_day='2025-08-21'", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 21844, "name": "MainProcess"}, "thread": {"id": 24292, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:29:58.382261+05:30", "timestamp": 1755777598.382261}}}
{"text": "2025-08-21 17:29:58.384 | DEBUG    | app.services.dhan_client:get_pnl:585 - PnL model fields: {'totals': PnLTotals(realized=0.0, unrealized=-898841.78, day=-898841.78, currency='INR'), 'per_symbol': [PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1412, avg=1385.34, ltp=124.05, unrealized=-1780939.98, today_pnl=-1780939.98), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=1160, avg=1132.72, ltp=906.89, unrealized=261959.7, today_pnl=261959.7), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=791, avg=1735.92, ltp=1316.25, unrealized=-331958.54, today_pnl=-331958.54), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=1902, avg=1982.2, ltp=1008.0, unrealized=1852927.71, today_pnl=1852927.71), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=773, avg=1518.94, ltp=353.57, unrealized=-900830.67, today_pnl=-900830.67)], 'updated_at': datetime.datetime(2025, 8, 21, 17, 29, 58, 363942, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))), 'trading_day': '2025-08-21'}\n", "record": {"elapsed": {"repr": "0:00:02.037414", "seconds": 2.037414}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 585, "message": "PnL model fields: {'totals': PnLTotals(realized=0.0, unrealized=-898841.78, day=-898841.78, currency='INR'), 'per_symbol': [PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1412, avg=1385.34, ltp=124.05, unrealized=-1780939.98, today_pnl=-1780939.98), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=1160, avg=1132.72, ltp=906.89, unrealized=261959.7, today_pnl=261959.7), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=791, avg=1735.92, ltp=1316.25, unrealized=-331958.54, today_pnl=-331958.54), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=1902, avg=1982.2, ltp=1008.0, unrealized=1852927.71, today_pnl=1852927.71), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=773, avg=1518.94, ltp=353.57, unrealized=-900830.67, today_pnl=-900830.67)], 'updated_at': datetime.datetime(2025, 8, 21, 17, 29, 58, 363942, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))), 'trading_day': '2025-08-21'}", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 21844, "name": "MainProcess"}, "thread": {"id": 24292, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:29:58.384593+05:30", "timestamp": 1755777598.384593}}}
{"text": "2025-08-21 17:29:58.386 | INFO     | app.services.dhan_client:get_pnl:587 - P&L calculation completed successfully: 5 symbols, unrealized=‚Çπ-898841.78\n", "record": {"elapsed": {"repr": "0:00:02.039363", "seconds": 2.039363}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 587, "message": "P&L calculation completed successfully: 5 symbols, unrealized=‚Çπ-898841.78", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 21844, "name": "MainProcess"}, "thread": {"id": 24292, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:29:58.386542+05:30", "timestamp": 1755777598.386542}}}
{"text": "2025-08-21 17:29:58.389 | DEBUG    | app.ws.live:emit_delta:408 - Emitted pnl delta: seq=2\n", "record": {"elapsed": {"repr": "0:00:02.042011", "seconds": 2.042011}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "emit_delta", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 408, "message": "Emitted pnl delta: seq=2", "module": "live", "name": "app.ws.live", "process": {"id": 21844, "name": "MainProcess"}, "thread": {"id": 24292, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:29:58.389190+05:30", "timestamp": 1755777598.38919}}}
{"text": "2025-08-21 17:29:58.456 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:02.109585", "seconds": 2.109585}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 21844, "name": "MainProcess"}, "thread": {"id": 4252, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 17:29:58.456764+05:30", "timestamp": 1755777598.456764}}}
{"text": "2025-08-21 17:29:58.458 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:02.111067", "seconds": 2.111067}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 21844, "name": "MainProcess"}, "thread": {"id": 4252, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 17:29:58.458246+05:30", "timestamp": 1755777598.458246}}}
{"text": "2025-08-21 17:29:58.459 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:02.112012", "seconds": 2.112012}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 21844, "name": "MainProcess"}, "thread": {"id": 4252, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 17:29:58.459191+05:30", "timestamp": 1755777598.459191}}}
{"text": "2025-08-21 17:29:58.460 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:02.113119", "seconds": 2.113119}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 21844, "name": "MainProcess"}, "thread": {"id": 4252, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 17:29:58.460298+05:30", "timestamp": 1755777598.460298}}}
{"text": "2025-08-21 17:29:58.461 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:02.114467", "seconds": 2.114467}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 21844, "name": "MainProcess"}, "thread": {"id": 4252, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 17:29:58.461646+05:30", "timestamp": 1755777598.461646}}}
{"text": "2025-08-21 17:29:58.463 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:02.115830", "seconds": 2.11583}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 21844, "name": "MainProcess"}, "thread": {"id": 4252, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 17:29:58.463009+05:30", "timestamp": 1755777598.463009}}}
{"text": "2025-08-21 17:29:58.464 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:02.117755", "seconds": 2.117755}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 21844, "name": "MainProcess"}, "thread": {"id": 4252, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 17:29:58.464934+05:30", "timestamp": 1755777598.464934}}}
{"text": "2025-08-21 17:29:58.466 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:02.118836", "seconds": 2.118836}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 21844, "name": "MainProcess"}, "thread": {"id": 4252, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 17:29:58.466015+05:30", "timestamp": 1755777598.466015}}}
{"text": "2025-08-21 17:29:58.467 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:02.119919", "seconds": 2.119919}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 21844, "name": "MainProcess"}, "thread": {"id": 4252, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 17:29:58.467098+05:30", "timestamp": 1755777598.467098}}}
{"text": "2025-08-21 17:29:58.468 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:02.121442", "seconds": 2.121442}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 21844, "name": "MainProcess"}, "thread": {"id": 4252, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 17:29:58.468621+05:30", "timestamp": 1755777598.468621}}}
{"text": "2025-08-21 17:29:59.346 | DEBUG    | app.ws.live:emit_delta:408 - Emitted orders delta: seq=3\n", "record": {"elapsed": {"repr": "0:00:02.999261", "seconds": 2.999261}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "emit_delta", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 408, "message": "Emitted orders delta: seq=3", "module": "live", "name": "app.ws.live", "process": {"id": 21844, "name": "MainProcess"}, "thread": {"id": 24292, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:29:59.346440+05:30", "timestamp": 1755777599.34644}}}
{"text": "2025-08-21 17:29:59.873 | DEBUG    | app.ws.live:emit_delta:408 - Emitted positions delta: seq=4\n", "record": {"elapsed": {"repr": "0:00:03.526109", "seconds": 3.526109}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "emit_delta", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 408, "message": "Emitted positions delta: seq=4", "module": "live", "name": "app.ws.live", "process": {"id": 21844, "name": "MainProcess"}, "thread": {"id": 24292, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:29:59.873288+05:30", "timestamp": 1755777599.873288}}}
{"text": "2025-08-21 17:29:59.916 | INFO     | app.services.dhan_client:get_pnl:489 - Starting accurate P&L calculation\n", "record": {"elapsed": {"repr": "0:00:03.569579", "seconds": 3.569579}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 489, "message": "Starting accurate P&L calculation", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 21844, "name": "MainProcess"}, "thread": {"id": 24292, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:29:59.916758+05:30", "timestamp": 1755777599.916758}}}
{"text": "2025-08-21 17:29:59.919 | INFO     | app.services.dhan_client:get_pnl:491 - Fetched 5 positions\n", "record": {"elapsed": {"repr": "0:00:03.571970", "seconds": 3.57197}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 491, "message": "Fetched 5 positions", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 21844, "name": "MainProcess"}, "thread": {"id": 24292, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:29:59.919149+05:30", "timestamp": 1755777599.919149}}}
{"text": "2025-08-21 17:29:59.921 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for RELIANCE: unrealized=-1780948.52, today=-1780948.52\n", "record": {"elapsed": {"repr": "0:00:03.574436", "seconds": 3.574436}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for RELIANCE: unrealized=-1780948.52, today=-1780948.52", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 21844, "name": "MainProcess"}, "thread": {"id": 24292, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:29:59.921615+05:30", "timestamp": 1755777599.921615}}}
{"text": "2025-08-21 17:29:59.923 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for TCS: unrealized=281843.26, today=281843.26\n", "record": {"elapsed": {"repr": "0:00:03.576340", "seconds": 3.57634}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for TCS: unrealized=281843.26, today=281843.26", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 21844, "name": "MainProcess"}, "thread": {"id": 24292, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:29:59.923519+05:30", "timestamp": 1755777599.923519}}}
{"text": "2025-08-21 17:29:59.926 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for HDFC: unrealized=-342596.49, today=-342596.49\n", "record": {"elapsed": {"repr": "0:00:03.578871", "seconds": 3.578871}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for HDFC: unrealized=-342596.49, today=-342596.49", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 21844, "name": "MainProcess"}, "thread": {"id": 24292, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:29:59.926050+05:30", "timestamp": 1755777599.92605}}}
{"text": "2025-08-21 17:29:59.928 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for INFY: unrealized=1888314.52, today=1888314.52\n", "record": {"elapsed": {"repr": "0:00:03.581444", "seconds": 3.581444}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for INFY: unrealized=1888314.52, today=1888314.52", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 21844, "name": "MainProcess"}, "thread": {"id": 24292, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:29:59.928623+05:30", "timestamp": 1755777599.928623}}}
{"text": "2025-08-21 17:29:59.930 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for ICICIBANK: unrealized=-896855.46, today=-896855.46\n", "record": {"elapsed": {"repr": "0:00:03.583207", "seconds": 3.583207}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for ICICIBANK: unrealized=-896855.46, today=-896855.46", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 21844, "name": "MainProcess"}, "thread": {"id": 24292, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:29:59.930386+05:30", "timestamp": 1755777599.930386}}}
{"text": "2025-08-21 17:29:59.932 | INFO     | app.services.dhan_client:get_pnl:545 - Calculated totals - realized: 0.0, unrealized: -850242.69, day: -850242.69\n", "record": {"elapsed": {"repr": "0:00:03.585355", "seconds": 3.585355}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 545, "message": "Calculated totals - realized: 0.0, unrealized: -850242.69, day: -850242.69", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 21844, "name": "MainProcess"}, "thread": {"id": 24292, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:29:59.932534+05:30", "timestamp": 1755777599.932534}}}
{"text": "2025-08-21 17:29:59.934 | DEBUG    | app.services.dhan_client:get_pnl:554 - PnL consistency check passed: drift=‚Çπ0.00\n", "record": {"elapsed": {"repr": "0:00:03.587614", "seconds": 3.587614}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 554, "message": "PnL consistency check passed: drift=‚Çπ0.00", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 21844, "name": "MainProcess"}, "thread": {"id": 24292, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:29:59.934793+05:30", "timestamp": 1755777599.934793}}}
{"text": "2025-08-21 17:29:59.936 | DEBUG    | app.services.dhan_client:get_pnl:558 - Creating PnLTotals...\n", "record": {"elapsed": {"repr": "0:00:03.589366", "seconds": 3.589366}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 558, "message": "Creating PnLTotals...", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 21844, "name": "MainProcess"}, "thread": {"id": 24292, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:29:59.936545+05:30", "timestamp": 1755777599.936545}}}
{"text": "2025-08-21 17:29:59.939 | DEBUG    | app.services.dhan_client:get_pnl:565 - PnLTotals created successfully\n", "record": {"elapsed": {"repr": "0:00:03.591837", "seconds": 3.591837}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 565, "message": "PnLTotals created successfully", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 21844, "name": "MainProcess"}, "thread": {"id": 24292, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:29:59.939016+05:30", "timestamp": 1755777599.939016}}}
{"text": "2025-08-21 17:29:59.941 | DEBUG    | app.services.dhan_client:get_pnl:574 - Creating PnL model...\n", "record": {"elapsed": {"repr": "0:00:03.594566", "seconds": 3.594566}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 574, "message": "Creating PnL model...", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 21844, "name": "MainProcess"}, "thread": {"id": 24292, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:29:59.941745+05:30", "timestamp": 1755777599.941745}}}
{"text": "2025-08-21 17:29:59.943 | DEBUG    | app.services.dhan_client:get_pnl:575 - Model fields: totals=<class 'app.models.schemas.PnLTotals'>, perSymbol=5, updated_at=2025-08-21 17:29:59.921283+05:30, trading_day=2025-08-21\n", "record": {"elapsed": {"repr": "0:00:03.596763", "seconds": 3.596763}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 575, "message": "Model fields: totals=<class 'app.models.schemas.PnLTotals'>, perSymbol=5, updated_at=2025-08-21 17:29:59.921283+05:30, trading_day=2025-08-21", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 21844, "name": "MainProcess"}, "thread": {"id": 24292, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:29:59.943942+05:30", "timestamp": 1755777599.943942}}}
{"text": "2025-08-21 17:29:59.946 | DEBUG    | app.services.dhan_client:get_pnl:584 - Created PnL model: totals=PnLTotals(realized=0.0, unrealized=-850242.69, day=-850242.69, currency='INR') per_symbol=[PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1412, avg=1385.34, ltp=124.05, unrealized=-1780948.52, today_pnl=-1780948.52), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=1160, avg=1132.72, ltp=889.75, unrealized=281843.26, today_pnl=281843.26), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=791, avg=1735.92, ltp=1302.8, unrealized=-342596.49, today_pnl=-342596.49), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=1902, avg=1982.2, ltp=989.4, unrealized=1888314.52, today_pnl=1888314.52), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=773, avg=1518.94, ltp=358.71, unrealized=-896855.46, today_pnl=-896855.46)] updated_at=datetime.datetime(2025, 8, 21, 17, 29, 59, 921283, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))) trading_day='2025-08-21'\n", "record": {"elapsed": {"repr": "0:00:03.599124", "seconds": 3.599124}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 584, "message": "Created PnL model: totals=PnLTotals(realized=0.0, unrealized=-850242.69, day=-850242.69, currency='INR') per_symbol=[PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1412, avg=1385.34, ltp=124.05, unrealized=-1780948.52, today_pnl=-1780948.52), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=1160, avg=1132.72, ltp=889.75, unrealized=281843.26, today_pnl=281843.26), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=791, avg=1735.92, ltp=1302.8, unrealized=-342596.49, today_pnl=-342596.49), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=1902, avg=1982.2, ltp=989.4, unrealized=1888314.52, today_pnl=1888314.52), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=773, avg=1518.94, ltp=358.71, unrealized=-896855.46, today_pnl=-896855.46)] updated_at=datetime.datetime(2025, 8, 21, 17, 29, 59, 921283, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))) trading_day='2025-08-21'", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 21844, "name": "MainProcess"}, "thread": {"id": 24292, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:29:59.946303+05:30", "timestamp": 1755777599.946303}}}
{"text": "2025-08-21 17:29:59.950 | DEBUG    | app.services.dhan_client:get_pnl:585 - PnL model fields: {'totals': PnLTotals(realized=0.0, unrealized=-850242.69, day=-850242.69, currency='INR'), 'per_symbol': [PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1412, avg=1385.34, ltp=124.05, unrealized=-1780948.52, today_pnl=-1780948.52), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=1160, avg=1132.72, ltp=889.75, unrealized=281843.26, today_pnl=281843.26), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=791, avg=1735.92, ltp=1302.8, unrealized=-342596.49, today_pnl=-342596.49), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=1902, avg=1982.2, ltp=989.4, unrealized=1888314.52, today_pnl=1888314.52), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=773, avg=1518.94, ltp=358.71, unrealized=-896855.46, today_pnl=-896855.46)], 'updated_at': datetime.datetime(2025, 8, 21, 17, 29, 59, 921283, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))), 'trading_day': '2025-08-21'}\n", "record": {"elapsed": {"repr": "0:00:03.603043", "seconds": 3.603043}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 585, "message": "PnL model fields: {'totals': PnLTotals(realized=0.0, unrealized=-850242.69, day=-850242.69, currency='INR'), 'per_symbol': [PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1412, avg=1385.34, ltp=124.05, unrealized=-1780948.52, today_pnl=-1780948.52), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=1160, avg=1132.72, ltp=889.75, unrealized=281843.26, today_pnl=281843.26), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=791, avg=1735.92, ltp=1302.8, unrealized=-342596.49, today_pnl=-342596.49), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=1902, avg=1982.2, ltp=989.4, unrealized=1888314.52, today_pnl=1888314.52), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=773, avg=1518.94, ltp=358.71, unrealized=-896855.46, today_pnl=-896855.46)], 'updated_at': datetime.datetime(2025, 8, 21, 17, 29, 59, 921283, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))), 'trading_day': '2025-08-21'}", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 21844, "name": "MainProcess"}, "thread": {"id": 24292, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:29:59.950222+05:30", "timestamp": 1755777599.950222}}}
{"text": "2025-08-21 17:29:59.953 | INFO     | app.services.dhan_client:get_pnl:587 - P&L calculation completed successfully: 5 symbols, unrealized=‚Çπ-850242.69\n", "record": {"elapsed": {"repr": "0:00:03.606445", "seconds": 3.606445}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 587, "message": "P&L calculation completed successfully: 5 symbols, unrealized=‚Çπ-850242.69", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 21844, "name": "MainProcess"}, "thread": {"id": 24292, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:29:59.953624+05:30", "timestamp": 1755777599.953624}}}
{"text": "2025-08-21 17:29:59.956 | DEBUG    | app.ws.live:emit_delta:408 - Emitted pnl delta: seq=5\n", "record": {"elapsed": {"repr": "0:00:03.609300", "seconds": 3.6093}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "emit_delta", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 408, "message": "Emitted pnl delta: seq=5", "module": "live", "name": "app.ws.live", "process": {"id": 21844, "name": "MainProcess"}, "thread": {"id": 24292, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:29:59.956479+05:30", "timestamp": 1755777599.956479}}}
{"text": "2025-08-21 17:30:00.470 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:04.123311", "seconds": 4.123311}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 21844, "name": "MainProcess"}, "thread": {"id": 4252, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 17:30:00.470490+05:30", "timestamp": 1755777600.47049}}}
{"text": "2025-08-21 17:30:00.473 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:04.125981", "seconds": 4.125981}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 21844, "name": "MainProcess"}, "thread": {"id": 4252, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 17:30:00.473160+05:30", "timestamp": 1755777600.47316}}}
{"text": "2025-08-21 17:30:00.474 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:04.127342", "seconds": 4.127342}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 21844, "name": "MainProcess"}, "thread": {"id": 4252, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 17:30:00.474521+05:30", "timestamp": 1755777600.474521}}}
{"text": "2025-08-21 17:30:00.475 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:04.128632", "seconds": 4.128632}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 21844, "name": "MainProcess"}, "thread": {"id": 4252, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 17:30:00.475811+05:30", "timestamp": 1755777600.475811}}}
{"text": "2025-08-21 17:30:00.477 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:04.130718", "seconds": 4.130718}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 21844, "name": "MainProcess"}, "thread": {"id": 4252, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 17:30:00.477897+05:30", "timestamp": 1755777600.477897}}}
{"text": "2025-08-21 17:30:00.479 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:04.132237", "seconds": 4.132237}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 21844, "name": "MainProcess"}, "thread": {"id": 4252, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 17:30:00.479416+05:30", "timestamp": 1755777600.479416}}}
{"text": "2025-08-21 17:30:00.481 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:04.134709", "seconds": 4.134709}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 21844, "name": "MainProcess"}, "thread": {"id": 4252, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 17:30:00.481888+05:30", "timestamp": 1755777600.481888}}}
{"text": "2025-08-21 17:30:00.483 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:04.136305", "seconds": 4.136305}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 21844, "name": "MainProcess"}, "thread": {"id": 4252, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 17:30:00.483484+05:30", "timestamp": 1755777600.483484}}}
{"text": "2025-08-21 17:30:00.485 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:04.137884", "seconds": 4.137884}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 21844, "name": "MainProcess"}, "thread": {"id": 4252, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 17:30:00.485063+05:30", "timestamp": 1755777600.485063}}}
{"text": "2025-08-21 17:30:00.487 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:04.140452", "seconds": 4.140452}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 21844, "name": "MainProcess"}, "thread": {"id": 4252, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 17:30:00.487631+05:30", "timestamp": 1755777600.487631}}}
{"text": "2025-08-21 17:30:01.643 | DEBUG    | app.ws.live:emit_delta:408 - Emitted positions delta: seq=6\n", "record": {"elapsed": {"repr": "0:00:05.296607", "seconds": 5.296607}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "emit_delta", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 408, "message": "Emitted positions delta: seq=6", "module": "live", "name": "app.ws.live", "process": {"id": 21844, "name": "MainProcess"}, "thread": {"id": 24292, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:30:01.643786+05:30", "timestamp": 1755777601.643786}}}
{"text": "2025-08-21 17:30:01.768 | INFO     | app.services.dhan_client:get_pnl:489 - Starting accurate P&L calculation\n", "record": {"elapsed": {"repr": "0:00:05.421269", "seconds": 5.421269}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 489, "message": "Starting accurate P&L calculation", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 21844, "name": "MainProcess"}, "thread": {"id": 24292, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:30:01.768448+05:30", "timestamp": 1755777601.768448}}}
{"text": "2025-08-21 17:30:01.770 | INFO     | app.services.dhan_client:get_pnl:491 - Fetched 5 positions\n", "record": {"elapsed": {"repr": "0:00:05.423673", "seconds": 5.423673}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 491, "message": "Fetched 5 positions", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 21844, "name": "MainProcess"}, "thread": {"id": 24292, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:30:01.770852+05:30", "timestamp": 1755777601.770852}}}
{"text": "2025-08-21 17:30:01.773 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for RELIANCE: unrealized=-1779121.55, today=-1779121.55\n", "record": {"elapsed": {"repr": "0:00:05.426110", "seconds": 5.42611}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for RELIANCE: unrealized=-1779121.55, today=-1779121.55", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 21844, "name": "MainProcess"}, "thread": {"id": 24292, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:30:01.773289+05:30", "timestamp": 1755777601.773289}}}
{"text": "2025-08-21 17:30:01.774 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for TCS: unrealized=273942.18, today=273942.18\n", "record": {"elapsed": {"repr": "0:00:05.427656", "seconds": 5.427656}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for TCS: unrealized=273942.18, today=273942.18", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 21844, "name": "MainProcess"}, "thread": {"id": 24292, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:30:01.774835+05:30", "timestamp": 1755777601.774835}}}
{"text": "2025-08-21 17:30:01.776 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for HDFC: unrealized=-354348.57, today=-354348.57\n", "record": {"elapsed": {"repr": "0:00:05.429283", "seconds": 5.429283}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for HDFC: unrealized=-354348.57, today=-354348.57", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 21844, "name": "MainProcess"}, "thread": {"id": 24292, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:30:01.776462+05:30", "timestamp": 1755777601.776462}}}
{"text": "2025-08-21 17:30:01.778 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for INFY: unrealized=1881130.76, today=1881130.76\n", "record": {"elapsed": {"repr": "0:00:05.431048", "seconds": 5.431048}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for INFY: unrealized=1881130.76, today=1881130.76", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 21844, "name": "MainProcess"}, "thread": {"id": 24292, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:30:01.778227+05:30", "timestamp": 1755777601.778227}}}
{"text": "2025-08-21 17:30:01.779 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for ICICIBANK: unrealized=-899294.24, today=-899294.24\n", "record": {"elapsed": {"repr": "0:00:05.432255", "seconds": 5.432255}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for ICICIBANK: unrealized=-899294.24, today=-899294.24", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 21844, "name": "MainProcess"}, "thread": {"id": 24292, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:30:01.779434+05:30", "timestamp": 1755777601.779434}}}
{"text": "2025-08-21 17:30:01.781 | INFO     | app.services.dhan_client:get_pnl:545 - Calculated totals - realized: 0.0, unrealized: -877691.42, day: -877691.42\n", "record": {"elapsed": {"repr": "0:00:05.434216", "seconds": 5.434216}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 545, "message": "Calculated totals - realized: 0.0, unrealized: -877691.42, day: -877691.42", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 21844, "name": "MainProcess"}, "thread": {"id": 24292, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:30:01.781395+05:30", "timestamp": 1755777601.781395}}}
{"text": "2025-08-21 17:30:01.782 | DEBUG    | app.services.dhan_client:get_pnl:554 - PnL consistency check passed: drift=‚Çπ0.00\n", "record": {"elapsed": {"repr": "0:00:05.435683", "seconds": 5.435683}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 554, "message": "PnL consistency check passed: drift=‚Çπ0.00", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 21844, "name": "MainProcess"}, "thread": {"id": 24292, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:30:01.782862+05:30", "timestamp": 1755777601.782862}}}
{"text": "2025-08-21 17:30:01.786 | DEBUG    | app.services.dhan_client:get_pnl:558 - Creating PnLTotals...\n", "record": {"elapsed": {"repr": "0:00:05.438843", "seconds": 5.438843}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 558, "message": "Creating PnLTotals...", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 21844, "name": "MainProcess"}, "thread": {"id": 24292, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:30:01.786022+05:30", "timestamp": 1755777601.786022}}}
{"text": "2025-08-21 17:30:01.787 | DEBUG    | app.services.dhan_client:get_pnl:565 - PnLTotals created successfully\n", "record": {"elapsed": {"repr": "0:00:05.440119", "seconds": 5.440119}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 565, "message": "PnLTotals created successfully", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 21844, "name": "MainProcess"}, "thread": {"id": 24292, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:30:01.787298+05:30", "timestamp": 1755777601.787298}}}
{"text": "2025-08-21 17:30:01.788 | DEBUG    | app.services.dhan_client:get_pnl:574 - Creating PnL model...\n", "record": {"elapsed": {"repr": "0:00:05.441289", "seconds": 5.441289}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 574, "message": "Creating PnL model...", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 21844, "name": "MainProcess"}, "thread": {"id": 24292, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:30:01.788468+05:30", "timestamp": 1755777601.788468}}}
{"text": "2025-08-21 17:30:01.789 | DEBUG    | app.services.dhan_client:get_pnl:575 - Model fields: totals=<class 'app.models.schemas.PnLTotals'>, perSymbol=5, updated_at=2025-08-21 17:30:01.773080+05:30, trading_day=2025-08-21\n", "record": {"elapsed": {"repr": "0:00:05.442569", "seconds": 5.442569}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 575, "message": "Model fields: totals=<class 'app.models.schemas.PnLTotals'>, perSymbol=5, updated_at=2025-08-21 17:30:01.773080+05:30, trading_day=2025-08-21", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 21844, "name": "MainProcess"}, "thread": {"id": 24292, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:30:01.789748+05:30", "timestamp": 1755777601.789748}}}
{"text": "2025-08-21 17:30:01.791 | DEBUG    | app.services.dhan_client:get_pnl:584 - Created PnL model: totals=PnLTotals(realized=0.0, unrealized=-877691.42, day=-877691.42, currency='INR') per_symbol=[PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1412, avg=1385.34, ltp=125.34, unrealized=-1779121.55, today_pnl=-1779121.55), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=1160, avg=1132.72, ltp=896.56, unrealized=273942.18, today_pnl=273942.18), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=791, avg=1735.92, ltp=1287.94, unrealized=-354348.57, today_pnl=-354348.57), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=1902, avg=1982.2, ltp=993.17, unrealized=1881130.76, today_pnl=1881130.76), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=773, avg=1518.94, ltp=355.56, unrealized=-899294.24, today_pnl=-899294.24)] updated_at=datetime.datetime(2025, 8, 21, 17, 30, 1, 773080, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))) trading_day='2025-08-21'\n", "record": {"elapsed": {"repr": "0:00:05.444402", "seconds": 5.444402}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 584, "message": "Created PnL model: totals=PnLTotals(realized=0.0, unrealized=-877691.42, day=-877691.42, currency='INR') per_symbol=[PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1412, avg=1385.34, ltp=125.34, unrealized=-1779121.55, today_pnl=-1779121.55), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=1160, avg=1132.72, ltp=896.56, unrealized=273942.18, today_pnl=273942.18), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=791, avg=1735.92, ltp=1287.94, unrealized=-354348.57, today_pnl=-354348.57), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=1902, avg=1982.2, ltp=993.17, unrealized=1881130.76, today_pnl=1881130.76), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=773, avg=1518.94, ltp=355.56, unrealized=-899294.24, today_pnl=-899294.24)] updated_at=datetime.datetime(2025, 8, 21, 17, 30, 1, 773080, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))) trading_day='2025-08-21'", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 21844, "name": "MainProcess"}, "thread": {"id": 24292, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:30:01.791581+05:30", "timestamp": 1755777601.791581}}}
{"text": "2025-08-21 17:30:01.795 | DEBUG    | app.services.dhan_client:get_pnl:585 - PnL model fields: {'totals': PnLTotals(realized=0.0, unrealized=-877691.42, day=-877691.42, currency='INR'), 'per_symbol': [PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1412, avg=1385.34, ltp=125.34, unrealized=-1779121.55, today_pnl=-1779121.55), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=1160, avg=1132.72, ltp=896.56, unrealized=273942.18, today_pnl=273942.18), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=791, avg=1735.92, ltp=1287.94, unrealized=-354348.57, today_pnl=-354348.57), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=1902, avg=1982.2, ltp=993.17, unrealized=1881130.76, today_pnl=1881130.76), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=773, avg=1518.94, ltp=355.56, unrealized=-899294.24, today_pnl=-899294.24)], 'updated_at': datetime.datetime(2025, 8, 21, 17, 30, 1, 773080, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))), 'trading_day': '2025-08-21'}\n", "record": {"elapsed": {"repr": "0:00:05.447853", "seconds": 5.447853}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 585, "message": "PnL model fields: {'totals': PnLTotals(realized=0.0, unrealized=-877691.42, day=-877691.42, currency='INR'), 'per_symbol': [PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1412, avg=1385.34, ltp=125.34, unrealized=-1779121.55, today_pnl=-1779121.55), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=1160, avg=1132.72, ltp=896.56, unrealized=273942.18, today_pnl=273942.18), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=791, avg=1735.92, ltp=1287.94, unrealized=-354348.57, today_pnl=-354348.57), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=1902, avg=1982.2, ltp=993.17, unrealized=1881130.76, today_pnl=1881130.76), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=773, avg=1518.94, ltp=355.56, unrealized=-899294.24, today_pnl=-899294.24)], 'updated_at': datetime.datetime(2025, 8, 21, 17, 30, 1, 773080, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))), 'trading_day': '2025-08-21'}", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 21844, "name": "MainProcess"}, "thread": {"id": 24292, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:30:01.795032+05:30", "timestamp": 1755777601.795032}}}
{"text": "2025-08-21 17:30:01.798 | INFO     | app.services.dhan_client:get_pnl:587 - P&L calculation completed successfully: 5 symbols, unrealized=‚Çπ-877691.42\n", "record": {"elapsed": {"repr": "0:00:05.451074", "seconds": 5.451074}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 587, "message": "P&L calculation completed successfully: 5 symbols, unrealized=‚Çπ-877691.42", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 21844, "name": "MainProcess"}, "thread": {"id": 24292, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:30:01.798253+05:30", "timestamp": 1755777601.798253}}}
{"text": "2025-08-21 17:30:01.801 | DEBUG    | app.ws.live:emit_delta:408 - Emitted pnl delta: seq=7\n", "record": {"elapsed": {"repr": "0:00:05.454245", "seconds": 5.454245}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "emit_delta", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 408, "message": "Emitted pnl delta: seq=7", "module": "live", "name": "app.ws.live", "process": {"id": 21844, "name": "MainProcess"}, "thread": {"id": 24292, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:30:01.801424+05:30", "timestamp": 1755777601.801424}}}
{"text": "2025-08-21 17:30:02.489 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:06.142667", "seconds": 6.142667}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 21844, "name": "MainProcess"}, "thread": {"id": 4252, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 17:30:02.489846+05:30", "timestamp": 1755777602.489846}}}
{"text": "2025-08-21 17:30:02.493 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:06.145891", "seconds": 6.145891}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 21844, "name": "MainProcess"}, "thread": {"id": 4252, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 17:30:02.493070+05:30", "timestamp": 1755777602.49307}}}
{"text": "2025-08-21 17:30:02.495 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:06.147988", "seconds": 6.147988}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 21844, "name": "MainProcess"}, "thread": {"id": 4252, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 17:30:02.495167+05:30", "timestamp": 1755777602.495167}}}
{"text": "2025-08-21 17:30:02.498 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:06.151136", "seconds": 6.151136}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 21844, "name": "MainProcess"}, "thread": {"id": 4252, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 17:30:02.498315+05:30", "timestamp": 1755777602.498315}}}
{"text": "2025-08-21 17:30:02.501 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:06.153894", "seconds": 6.153894}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 21844, "name": "MainProcess"}, "thread": {"id": 4252, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 17:30:02.501073+05:30", "timestamp": 1755777602.501073}}}
{"text": "2025-08-21 17:30:02.503 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:06.156231", "seconds": 6.156231}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 21844, "name": "MainProcess"}, "thread": {"id": 4252, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 17:30:02.503410+05:30", "timestamp": 1755777602.50341}}}
{"text": "2025-08-21 17:30:02.506 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:06.159298", "seconds": 6.159298}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 21844, "name": "MainProcess"}, "thread": {"id": 4252, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 17:30:02.506477+05:30", "timestamp": 1755777602.506477}}}
{"text": "2025-08-21 17:30:02.508 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:06.161630", "seconds": 6.16163}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 21844, "name": "MainProcess"}, "thread": {"id": 4252, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 17:30:02.508809+05:30", "timestamp": 1755777602.508809}}}
{"text": "2025-08-21 17:30:02.511 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:06.164449", "seconds": 6.164449}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 21844, "name": "MainProcess"}, "thread": {"id": 4252, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 17:30:02.511628+05:30", "timestamp": 1755777602.511628}}}
{"text": "2025-08-21 17:30:02.514 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:06.167234", "seconds": 6.167234}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 21844, "name": "MainProcess"}, "thread": {"id": 4252, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 17:30:02.514413+05:30", "timestamp": 1755777602.514413}}}
{"text": "2025-08-21 17:30:03.300 | DEBUG    | app.ws.live:emit_delta:408 - Emitted positions delta: seq=8\n", "record": {"elapsed": {"repr": "0:00:06.953579", "seconds": 6.953579}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "emit_delta", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 408, "message": "Emitted positions delta: seq=8", "module": "live", "name": "app.ws.live", "process": {"id": 21844, "name": "MainProcess"}, "thread": {"id": 24292, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:30:03.300758+05:30", "timestamp": 1755777603.300758}}}
{"text": "2025-08-21 17:30:03.535 | INFO     | app.services.dhan_client:get_pnl:489 - Starting accurate P&L calculation\n", "record": {"elapsed": {"repr": "0:00:07.188557", "seconds": 7.188557}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 489, "message": "Starting accurate P&L calculation", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 21844, "name": "MainProcess"}, "thread": {"id": 24292, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:30:03.535736+05:30", "timestamp": 1755777603.535736}}}
{"text": "2025-08-21 17:30:03.539 | INFO     | app.services.dhan_client:get_pnl:491 - Fetched 5 positions\n", "record": {"elapsed": {"repr": "0:00:07.192041", "seconds": 7.192041}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 491, "message": "Fetched 5 positions", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 21844, "name": "MainProcess"}, "thread": {"id": 24292, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:30:03.539220+05:30", "timestamp": 1755777603.53922}}}
{"text": "2025-08-21 17:30:03.540 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for RELIANCE: unrealized=-1781245.2, today=-1781245.2\n", "record": {"elapsed": {"repr": "0:00:07.193577", "seconds": 7.193577}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for RELIANCE: unrealized=-1781245.2, today=-1781245.2", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 21844, "name": "MainProcess"}, "thread": {"id": 24292, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:30:03.540756+05:30", "timestamp": 1755777603.540756}}}
{"text": "2025-08-21 17:30:03.542 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for TCS: unrealized=289524.26, today=289524.26\n", "record": {"elapsed": {"repr": "0:00:07.195509", "seconds": 7.195509}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for TCS: unrealized=289524.26, today=289524.26", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 21844, "name": "MainProcess"}, "thread": {"id": 24292, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:30:03.542688+05:30", "timestamp": 1755777603.542688}}}
{"text": "2025-08-21 17:30:03.545 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for HDFC: unrealized=-362857.79, today=-362857.79\n", "record": {"elapsed": {"repr": "0:00:07.197891", "seconds": 7.197891}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for HDFC: unrealized=-362857.79, today=-362857.79", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 21844, "name": "MainProcess"}, "thread": {"id": 24292, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:30:03.545070+05:30", "timestamp": 1755777603.54507}}}
{"text": "2025-08-21 17:30:03.547 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for INFY: unrealized=1861476.46, today=1861476.46\n", "record": {"elapsed": {"repr": "0:00:07.200222", "seconds": 7.200222}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for INFY: unrealized=1861476.46, today=1861476.46", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 21844, "name": "MainProcess"}, "thread": {"id": 24292, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:30:03.547401+05:30", "timestamp": 1755777603.547401}}}
{"text": "2025-08-21 17:30:03.549 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for ICICIBANK: unrealized=-902885.57, today=-902885.57\n", "record": {"elapsed": {"repr": "0:00:07.202620", "seconds": 7.20262}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for ICICIBANK: unrealized=-902885.57, today=-902885.57", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 21844, "name": "MainProcess"}, "thread": {"id": 24292, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:30:03.549799+05:30", "timestamp": 1755777603.549799}}}
{"text": "2025-08-21 17:30:03.551 | INFO     | app.services.dhan_client:get_pnl:545 - Calculated totals - realized: 0.0, unrealized: -895987.84, day: -895987.84\n", "record": {"elapsed": {"repr": "0:00:07.204471", "seconds": 7.204471}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 545, "message": "Calculated totals - realized: 0.0, unrealized: -895987.84, day: -895987.84", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 21844, "name": "MainProcess"}, "thread": {"id": 24292, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:30:03.551650+05:30", "timestamp": 1755777603.55165}}}
{"text": "2025-08-21 17:30:03.553 | DEBUG    | app.services.dhan_client:get_pnl:554 - PnL consistency check passed: drift=‚Çπ0.00\n", "record": {"elapsed": {"repr": "0:00:07.205854", "seconds": 7.205854}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 554, "message": "PnL consistency check passed: drift=‚Çπ0.00", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 21844, "name": "MainProcess"}, "thread": {"id": 24292, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:30:03.553033+05:30", "timestamp": 1755777603.553033}}}
{"text": "2025-08-21 17:30:03.555 | DEBUG    | app.services.dhan_client:get_pnl:558 - Creating PnLTotals...\n", "record": {"elapsed": {"repr": "0:00:07.208306", "seconds": 7.208306}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 558, "message": "Creating PnLTotals...", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 21844, "name": "MainProcess"}, "thread": {"id": 24292, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:30:03.555485+05:30", "timestamp": 1755777603.555485}}}
{"text": "2025-08-21 17:30:03.557 | DEBUG    | app.services.dhan_client:get_pnl:565 - PnLTotals created successfully\n", "record": {"elapsed": {"repr": "0:00:07.210060", "seconds": 7.21006}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 565, "message": "PnLTotals created successfully", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 21844, "name": "MainProcess"}, "thread": {"id": 24292, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:30:03.557239+05:30", "timestamp": 1755777603.557239}}}
{"text": "2025-08-21 17:30:03.558 | DEBUG    | app.services.dhan_client:get_pnl:574 - Creating PnL model...\n", "record": {"elapsed": {"repr": "0:00:07.211807", "seconds": 7.211807}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 574, "message": "Creating PnL model...", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 21844, "name": "MainProcess"}, "thread": {"id": 24292, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:30:03.558986+05:30", "timestamp": 1755777603.558986}}}
{"text": "2025-08-21 17:30:03.560 | DEBUG    | app.services.dhan_client:get_pnl:575 - Model fields: totals=<class 'app.models.schemas.PnLTotals'>, perSymbol=5, updated_at=2025-08-21 17:30:03.540521+05:30, trading_day=2025-08-21\n", "record": {"elapsed": {"repr": "0:00:07.213432", "seconds": 7.213432}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 575, "message": "Model fields: totals=<class 'app.models.schemas.PnLTotals'>, perSymbol=5, updated_at=2025-08-21 17:30:03.540521+05:30, trading_day=2025-08-21", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 21844, "name": "MainProcess"}, "thread": {"id": 24292, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:30:03.560611+05:30", "timestamp": 1755777603.560611}}}
{"text": "2025-08-21 17:30:03.564 | DEBUG    | app.services.dhan_client:get_pnl:584 - Created PnL model: totals=PnLTotals(realized=0.0, unrealized=-895987.84, day=-895987.84, currency='INR') per_symbol=[PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1412, avg=1385.34, ltp=123.83, unrealized=-1781245.2, today_pnl=-1781245.2), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=1160, avg=1132.72, ltp=883.13, unrealized=289524.26, today_pnl=289524.26), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=791, avg=1735.92, ltp=1277.19, unrealized=-362857.79, today_pnl=-362857.79), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=1902, avg=1982.2, ltp=1003.51, unrealized=1861476.46, today_pnl=1861476.46), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=773, avg=1518.94, ltp=350.91, unrealized=-902885.57, today_pnl=-902885.57)] updated_at=datetime.datetime(2025, 8, 21, 17, 30, 3, 540521, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))) trading_day='2025-08-21'\n", "record": {"elapsed": {"repr": "0:00:07.217252", "seconds": 7.217252}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 584, "message": "Created PnL model: totals=PnLTotals(realized=0.0, unrealized=-895987.84, day=-895987.84, currency='INR') per_symbol=[PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1412, avg=1385.34, ltp=123.83, unrealized=-1781245.2, today_pnl=-1781245.2), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=1160, avg=1132.72, ltp=883.13, unrealized=289524.26, today_pnl=289524.26), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=791, avg=1735.92, ltp=1277.19, unrealized=-362857.79, today_pnl=-362857.79), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=1902, avg=1982.2, ltp=1003.51, unrealized=1861476.46, today_pnl=1861476.46), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=773, avg=1518.94, ltp=350.91, unrealized=-902885.57, today_pnl=-902885.57)] updated_at=datetime.datetime(2025, 8, 21, 17, 30, 3, 540521, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))) trading_day='2025-08-21'", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 21844, "name": "MainProcess"}, "thread": {"id": 24292, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:30:03.564431+05:30", "timestamp": 1755777603.564431}}}
{"text": "2025-08-21 17:30:03.566 | DEBUG    | app.services.dhan_client:get_pnl:585 - PnL model fields: {'totals': PnLTotals(realized=0.0, unrealized=-895987.84, day=-895987.84, currency='INR'), 'per_symbol': [PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1412, avg=1385.34, ltp=123.83, unrealized=-1781245.2, today_pnl=-1781245.2), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=1160, avg=1132.72, ltp=883.13, unrealized=289524.26, today_pnl=289524.26), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=791, avg=1735.92, ltp=1277.19, unrealized=-362857.79, today_pnl=-362857.79), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=1902, avg=1982.2, ltp=1003.51, unrealized=1861476.46, today_pnl=1861476.46), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=773, avg=1518.94, ltp=350.91, unrealized=-902885.57, today_pnl=-902885.57)], 'updated_at': datetime.datetime(2025, 8, 21, 17, 30, 3, 540521, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))), 'trading_day': '2025-08-21'}\n", "record": {"elapsed": {"repr": "0:00:07.219693", "seconds": 7.219693}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 585, "message": "PnL model fields: {'totals': PnLTotals(realized=0.0, unrealized=-895987.84, day=-895987.84, currency='INR'), 'per_symbol': [PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1412, avg=1385.34, ltp=123.83, unrealized=-1781245.2, today_pnl=-1781245.2), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=1160, avg=1132.72, ltp=883.13, unrealized=289524.26, today_pnl=289524.26), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=791, avg=1735.92, ltp=1277.19, unrealized=-362857.79, today_pnl=-362857.79), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=1902, avg=1982.2, ltp=1003.51, unrealized=1861476.46, today_pnl=1861476.46), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=773, avg=1518.94, ltp=350.91, unrealized=-902885.57, today_pnl=-902885.57)], 'updated_at': datetime.datetime(2025, 8, 21, 17, 30, 3, 540521, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))), 'trading_day': '2025-08-21'}", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 21844, "name": "MainProcess"}, "thread": {"id": 24292, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:30:03.566872+05:30", "timestamp": 1755777603.566872}}}
{"text": "2025-08-21 17:30:03.570 | INFO     | app.services.dhan_client:get_pnl:587 - P&L calculation completed successfully: 5 symbols, unrealized=‚Çπ-895987.84\n", "record": {"elapsed": {"repr": "0:00:07.223370", "seconds": 7.22337}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 587, "message": "P&L calculation completed successfully: 5 symbols, unrealized=‚Çπ-895987.84", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 21844, "name": "MainProcess"}, "thread": {"id": 24292, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:30:03.570549+05:30", "timestamp": 1755777603.570549}}}
{"text": "2025-08-21 17:30:03.572 | DEBUG    | app.ws.live:emit_delta:408 - Emitted pnl delta: seq=9\n", "record": {"elapsed": {"repr": "0:00:07.225767", "seconds": 7.225767}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "emit_delta", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 408, "message": "Emitted pnl delta: seq=9", "module": "live", "name": "app.ws.live", "process": {"id": 21844, "name": "MainProcess"}, "thread": {"id": 24292, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:30:03.572946+05:30", "timestamp": 1755777603.572946}}}
{"text": "2025-08-21 17:30:04.518 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:08.170884", "seconds": 8.170884}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 21844, "name": "MainProcess"}, "thread": {"id": 4252, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 17:30:04.518063+05:30", "timestamp": 1755777604.518063}}}
{"text": "2025-08-21 17:30:04.520 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:08.173388", "seconds": 8.173388}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 21844, "name": "MainProcess"}, "thread": {"id": 4252, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 17:30:04.520567+05:30", "timestamp": 1755777604.520567}}}
{"text": "2025-08-21 17:30:04.522 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:08.175612", "seconds": 8.175612}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 21844, "name": "MainProcess"}, "thread": {"id": 4252, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 17:30:04.522791+05:30", "timestamp": 1755777604.522791}}}
{"text": "2025-08-21 17:30:04.524 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:08.177681", "seconds": 8.177681}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 21844, "name": "MainProcess"}, "thread": {"id": 4252, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 17:30:04.524860+05:30", "timestamp": 1755777604.52486}}}
{"text": "2025-08-21 17:30:04.527 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:08.180396", "seconds": 8.180396}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 21844, "name": "MainProcess"}, "thread": {"id": 4252, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 17:30:04.527575+05:30", "timestamp": 1755777604.527575}}}
{"text": "2025-08-21 17:30:04.529 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:08.182492", "seconds": 8.182492}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 21844, "name": "MainProcess"}, "thread": {"id": 4252, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 17:30:04.529671+05:30", "timestamp": 1755777604.529671}}}
{"text": "2025-08-21 17:30:04.531 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:08.184313", "seconds": 8.184313}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 21844, "name": "MainProcess"}, "thread": {"id": 4252, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 17:30:04.531492+05:30", "timestamp": 1755777604.531492}}}
{"text": "2025-08-21 17:30:04.533 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:08.186133", "seconds": 8.186133}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 21844, "name": "MainProcess"}, "thread": {"id": 4252, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 17:30:04.533312+05:30", "timestamp": 1755777604.533312}}}
{"text": "2025-08-21 17:30:04.535 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:08.188121", "seconds": 8.188121}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 21844, "name": "MainProcess"}, "thread": {"id": 4252, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 17:30:04.535300+05:30", "timestamp": 1755777604.5353}}}
{"text": "2025-08-21 17:30:04.538 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:08.191281", "seconds": 8.191281}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 21844, "name": "MainProcess"}, "thread": {"id": 4252, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 17:30:04.538460+05:30", "timestamp": 1755777604.53846}}}
{"text": "2025-08-21 17:30:05.187 | INFO     | app.services.dhan_client:get_pnl:489 - Starting accurate P&L calculation\n", "record": {"elapsed": {"repr": "0:00:08.840148", "seconds": 8.840148}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 489, "message": "Starting accurate P&L calculation", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 21844, "name": "MainProcess"}, "thread": {"id": 24292, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:30:05.187327+05:30", "timestamp": 1755777605.187327}}}
{"text": "2025-08-21 17:30:05.190 | INFO     | app.services.dhan_client:get_pnl:491 - Fetched 5 positions\n", "record": {"elapsed": {"repr": "0:00:08.842977", "seconds": 8.842977}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 491, "message": "Fetched 5 positions", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 21844, "name": "MainProcess"}, "thread": {"id": 24292, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:30:05.190156+05:30", "timestamp": 1755777605.190156}}}
{"text": "2025-08-21 17:30:05.192 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for RELIANCE: unrealized=-1783715.48, today=-1783715.48\n", "record": {"elapsed": {"repr": "0:00:08.845468", "seconds": 8.845468}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for RELIANCE: unrealized=-1783715.48, today=-1783715.48", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 21844, "name": "MainProcess"}, "thread": {"id": 24292, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:30:05.192647+05:30", "timestamp": 1755777605.192647}}}
{"text": "2025-08-21 17:30:05.194 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for TCS: unrealized=305639.12, today=305639.12\n", "record": {"elapsed": {"repr": "0:00:08.847629", "seconds": 8.847629}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for TCS: unrealized=305639.12, today=305639.12", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 21844, "name": "MainProcess"}, "thread": {"id": 24292, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:30:05.194808+05:30", "timestamp": 1755777605.194808}}}
{"text": "2025-08-21 17:30:05.197 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for HDFC: unrealized=-345595.89, today=-345595.89\n", "record": {"elapsed": {"repr": "0:00:08.850403", "seconds": 8.850403}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for HDFC: unrealized=-345595.89, today=-345595.89", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 21844, "name": "MainProcess"}, "thread": {"id": 24292, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:30:05.197582+05:30", "timestamp": 1755777605.197582}}}
{"text": "2025-08-21 17:30:05.200 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for INFY: unrealized=1868882.45, today=1868882.45\n", "record": {"elapsed": {"repr": "0:00:08.852924", "seconds": 8.852924}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for INFY: unrealized=1868882.45, today=1868882.45", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 21844, "name": "MainProcess"}, "thread": {"id": 24292, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:30:05.200103+05:30", "timestamp": 1755777605.200103}}}
{"text": "2025-08-21 17:30:05.202 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for ICICIBANK: unrealized=-904696.39, today=-904696.39\n", "record": {"elapsed": {"repr": "0:00:08.855088", "seconds": 8.855088}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for ICICIBANK: unrealized=-904696.39, today=-904696.39", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 21844, "name": "MainProcess"}, "thread": {"id": 24292, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:30:05.202267+05:30", "timestamp": 1755777605.202267}}}
{"text": "2025-08-21 17:30:05.205 | INFO     | app.services.dhan_client:get_pnl:545 - Calculated totals - realized: 0.0, unrealized: -859486.19, day: -859486.19\n", "record": {"elapsed": {"repr": "0:00:08.858708", "seconds": 8.858708}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 545, "message": "Calculated totals - realized: 0.0, unrealized: -859486.19, day: -859486.19", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 21844, "name": "MainProcess"}, "thread": {"id": 24292, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:30:05.205887+05:30", "timestamp": 1755777605.205887}}}
{"text": "2025-08-21 17:30:05.207 | DEBUG    | app.services.dhan_client:get_pnl:554 - PnL consistency check passed: drift=‚Çπ0.00\n", "record": {"elapsed": {"repr": "0:00:08.860804", "seconds": 8.860804}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 554, "message": "PnL consistency check passed: drift=‚Çπ0.00", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 21844, "name": "MainProcess"}, "thread": {"id": 24292, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:30:05.207983+05:30", "timestamp": 1755777605.207983}}}
{"text": "2025-08-21 17:30:05.209 | DEBUG    | app.services.dhan_client:get_pnl:558 - Creating PnLTotals...\n", "record": {"elapsed": {"repr": "0:00:08.862662", "seconds": 8.862662}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 558, "message": "Creating PnLTotals...", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 21844, "name": "MainProcess"}, "thread": {"id": 24292, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:30:05.209841+05:30", "timestamp": 1755777605.209841}}}
{"text": "2025-08-21 17:30:05.211 | DEBUG    | app.services.dhan_client:get_pnl:565 - PnLTotals created successfully\n", "record": {"elapsed": {"repr": "0:00:08.864112", "seconds": 8.864112}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 565, "message": "PnLTotals created successfully", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 21844, "name": "MainProcess"}, "thread": {"id": 24292, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:30:05.211291+05:30", "timestamp": 1755777605.211291}}}
{"text": "2025-08-21 17:30:05.215 | DEBUG    | app.services.dhan_client:get_pnl:574 - Creating PnL model...\n", "record": {"elapsed": {"repr": "0:00:08.868030", "seconds": 8.86803}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 574, "message": "Creating PnL model...", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 21844, "name": "MainProcess"}, "thread": {"id": 24292, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:30:05.215209+05:30", "timestamp": 1755777605.215209}}}
{"text": "2025-08-21 17:30:05.218 | DEBUG    | app.services.dhan_client:get_pnl:575 - Model fields: totals=<class 'app.models.schemas.PnLTotals'>, perSymbol=5, updated_at=2025-08-21 17:30:05.192367+05:30, trading_day=2025-08-21\n", "record": {"elapsed": {"repr": "0:00:08.870868", "seconds": 8.870868}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 575, "message": "Model fields: totals=<class 'app.models.schemas.PnLTotals'>, perSymbol=5, updated_at=2025-08-21 17:30:05.192367+05:30, trading_day=2025-08-21", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 21844, "name": "MainProcess"}, "thread": {"id": 24292, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:30:05.218047+05:30", "timestamp": 1755777605.218047}}}
{"text": "2025-08-21 17:30:05.222 | DEBUG    | app.services.dhan_client:get_pnl:584 - Created PnL model: totals=PnLTotals(realized=0.0, unrealized=-859486.19, day=-859486.19, currency='INR') per_symbol=[PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1412, avg=1385.34, ltp=122.09, unrealized=-1783715.48, today_pnl=-1783715.48), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=1160, avg=1132.72, ltp=869.24, unrealized=305639.12, today_pnl=305639.12), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=791, avg=1735.92, ltp=1299.01, unrealized=-345595.89, today_pnl=-345595.89), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=1902, avg=1982.2, ltp=999.61, unrealized=1868882.45, today_pnl=1868882.45), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=773, avg=1518.94, ltp=348.57, unrealized=-904696.39, today_pnl=-904696.39)] updated_at=datetime.datetime(2025, 8, 21, 17, 30, 5, 192367, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))) trading_day='2025-08-21'\n", "record": {"elapsed": {"repr": "0:00:08.875291", "seconds": 8.875291}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 584, "message": "Created PnL model: totals=PnLTotals(realized=0.0, unrealized=-859486.19, day=-859486.19, currency='INR') per_symbol=[PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1412, avg=1385.34, ltp=122.09, unrealized=-1783715.48, today_pnl=-1783715.48), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=1160, avg=1132.72, ltp=869.24, unrealized=305639.12, today_pnl=305639.12), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=791, avg=1735.92, ltp=1299.01, unrealized=-345595.89, today_pnl=-345595.89), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=1902, avg=1982.2, ltp=999.61, unrealized=1868882.45, today_pnl=1868882.45), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=773, avg=1518.94, ltp=348.57, unrealized=-904696.39, today_pnl=-904696.39)] updated_at=datetime.datetime(2025, 8, 21, 17, 30, 5, 192367, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))) trading_day='2025-08-21'", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 21844, "name": "MainProcess"}, "thread": {"id": 24292, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:30:05.222470+05:30", "timestamp": 1755777605.22247}}}
{"text": "2025-08-21 17:30:05.226 | DEBUG    | app.services.dhan_client:get_pnl:585 - PnL model fields: {'totals': PnLTotals(realized=0.0, unrealized=-859486.19, day=-859486.19, currency='INR'), 'per_symbol': [PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1412, avg=1385.34, ltp=122.09, unrealized=-1783715.48, today_pnl=-1783715.48), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=1160, avg=1132.72, ltp=869.24, unrealized=305639.12, today_pnl=305639.12), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=791, avg=1735.92, ltp=1299.01, unrealized=-345595.89, today_pnl=-345595.89), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=1902, avg=1982.2, ltp=999.61, unrealized=1868882.45, today_pnl=1868882.45), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=773, avg=1518.94, ltp=348.57, unrealized=-904696.39, today_pnl=-904696.39)], 'updated_at': datetime.datetime(2025, 8, 21, 17, 30, 5, 192367, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))), 'trading_day': '2025-08-21'}\n", "record": {"elapsed": {"repr": "0:00:08.879188", "seconds": 8.879188}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 585, "message": "PnL model fields: {'totals': PnLTotals(realized=0.0, unrealized=-859486.19, day=-859486.19, currency='INR'), 'per_symbol': [PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1412, avg=1385.34, ltp=122.09, unrealized=-1783715.48, today_pnl=-1783715.48), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=1160, avg=1132.72, ltp=869.24, unrealized=305639.12, today_pnl=305639.12), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=791, avg=1735.92, ltp=1299.01, unrealized=-345595.89, today_pnl=-345595.89), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=1902, avg=1982.2, ltp=999.61, unrealized=1868882.45, today_pnl=1868882.45), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=773, avg=1518.94, ltp=348.57, unrealized=-904696.39, today_pnl=-904696.39)], 'updated_at': datetime.datetime(2025, 8, 21, 17, 30, 5, 192367, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))), 'trading_day': '2025-08-21'}", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 21844, "name": "MainProcess"}, "thread": {"id": 24292, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:30:05.226367+05:30", "timestamp": 1755777605.226367}}}
{"text": "2025-08-21 17:30:05.228 | INFO     | app.services.dhan_client:get_pnl:587 - P&L calculation completed successfully: 5 symbols, unrealized=‚Çπ-859486.19\n", "record": {"elapsed": {"repr": "0:00:08.881774", "seconds": 8.881774}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 587, "message": "P&L calculation completed successfully: 5 symbols, unrealized=‚Çπ-859486.19", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 21844, "name": "MainProcess"}, "thread": {"id": 24292, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:30:05.228953+05:30", "timestamp": 1755777605.228953}}}
{"text": "2025-08-21 17:30:05.232 | DEBUG    | app.ws.live:emit_delta:408 - Emitted pnl delta: seq=10\n", "record": {"elapsed": {"repr": "0:00:08.884976", "seconds": 8.884976}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "emit_delta", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 408, "message": "Emitted pnl delta: seq=10", "module": "live", "name": "app.ws.live", "process": {"id": 21844, "name": "MainProcess"}, "thread": {"id": 24292, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:30:05.232155+05:30", "timestamp": 1755777605.232155}}}
{"text": "2025-08-21 17:30:05.285 | DEBUG    | app.ws.live:emit_delta:408 - Emitted positions delta: seq=11\n", "record": {"elapsed": {"repr": "0:00:08.937904", "seconds": 8.937904}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "emit_delta", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 408, "message": "Emitted positions delta: seq=11", "module": "live", "name": "app.ws.live", "process": {"id": 21844, "name": "MainProcess"}, "thread": {"id": 24292, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:30:05.285083+05:30", "timestamp": 1755777605.285083}}}
{"text": "2025-08-21 17:30:06.541 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:10.194308", "seconds": 10.194308}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 21844, "name": "MainProcess"}, "thread": {"id": 4252, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 17:30:06.541487+05:30", "timestamp": 1755777606.541487}}}
{"text": "2025-08-21 17:30:06.543 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:10.196022", "seconds": 10.196022}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 21844, "name": "MainProcess"}, "thread": {"id": 4252, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 17:30:06.543201+05:30", "timestamp": 1755777606.543201}}}
{"text": "2025-08-21 17:30:06.544 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:10.197548", "seconds": 10.197548}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 21844, "name": "MainProcess"}, "thread": {"id": 4252, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 17:30:06.544727+05:30", "timestamp": 1755777606.544727}}}
{"text": "2025-08-21 17:30:06.545 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:10.198664", "seconds": 10.198664}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 21844, "name": "MainProcess"}, "thread": {"id": 4252, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 17:30:06.545843+05:30", "timestamp": 1755777606.545843}}}
{"text": "2025-08-21 17:30:06.547 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:10.200125", "seconds": 10.200125}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 21844, "name": "MainProcess"}, "thread": {"id": 4252, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 17:30:06.547304+05:30", "timestamp": 1755777606.547304}}}
{"text": "2025-08-21 17:30:06.548 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:10.201367", "seconds": 10.201367}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 21844, "name": "MainProcess"}, "thread": {"id": 4252, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 17:30:06.548546+05:30", "timestamp": 1755777606.548546}}}
{"text": "2025-08-21 17:30:06.550 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:10.203051", "seconds": 10.203051}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 21844, "name": "MainProcess"}, "thread": {"id": 4252, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 17:30:06.550230+05:30", "timestamp": 1755777606.55023}}}
{"text": "2025-08-21 17:30:06.551 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:10.204402", "seconds": 10.204402}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 21844, "name": "MainProcess"}, "thread": {"id": 4252, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 17:30:06.551581+05:30", "timestamp": 1755777606.551581}}}
{"text": "2025-08-21 17:30:06.553 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:10.205974", "seconds": 10.205974}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 21844, "name": "MainProcess"}, "thread": {"id": 4252, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 17:30:06.553153+05:30", "timestamp": 1755777606.553153}}}
{"text": "2025-08-21 17:30:06.554 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:10.207762", "seconds": 10.207762}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 21844, "name": "MainProcess"}, "thread": {"id": 4252, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 17:30:06.554941+05:30", "timestamp": 1755777606.554941}}}
{"text": "2025-08-21 17:30:07.186 | INFO     | app.services.dhan_client:get_pnl:489 - Starting accurate P&L calculation\n", "record": {"elapsed": {"repr": "0:00:10.839795", "seconds": 10.839795}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 489, "message": "Starting accurate P&L calculation", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 21844, "name": "MainProcess"}, "thread": {"id": 24292, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:30:07.186974+05:30", "timestamp": 1755777607.186974}}}
{"text": "2025-08-21 17:30:07.189 | INFO     | app.services.dhan_client:get_pnl:491 - Fetched 5 positions\n", "record": {"elapsed": {"repr": "0:00:10.842433", "seconds": 10.842433}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 491, "message": "Fetched 5 positions", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 21844, "name": "MainProcess"}, "thread": {"id": 24292, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:30:07.189612+05:30", "timestamp": 1755777607.189612}}}
{"text": "2025-08-21 17:30:07.190 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for RELIANCE: unrealized=-1781203.01, today=-1781203.01\n", "record": {"elapsed": {"repr": "0:00:10.843785", "seconds": 10.843785}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for RELIANCE: unrealized=-1781203.01, today=-1781203.01", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 21844, "name": "MainProcess"}, "thread": {"id": 24292, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:30:07.190964+05:30", "timestamp": 1755777607.190964}}}
{"text": "2025-08-21 17:30:07.192 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for TCS: unrealized=298242.23, today=298242.23\n", "record": {"elapsed": {"repr": "0:00:10.845146", "seconds": 10.845146}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for TCS: unrealized=298242.23, today=298242.23", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 21844, "name": "MainProcess"}, "thread": {"id": 24292, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:30:07.192325+05:30", "timestamp": 1755777607.192325}}}
{"text": "2025-08-21 17:30:07.193 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for HDFC: unrealized=-345923.97, today=-345923.97\n", "record": {"elapsed": {"repr": "0:00:10.846416", "seconds": 10.846416}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for HDFC: unrealized=-345923.97, today=-345923.97", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 21844, "name": "MainProcess"}, "thread": {"id": 24292, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:30:07.193595+05:30", "timestamp": 1755777607.193595}}}
{"text": "2025-08-21 17:30:07.195 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for INFY: unrealized=1839948.3, today=1839948.3\n", "record": {"elapsed": {"repr": "0:00:10.848766", "seconds": 10.848766}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for INFY: unrealized=1839948.3, today=1839948.3", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 21844, "name": "MainProcess"}, "thread": {"id": 24292, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:30:07.195945+05:30", "timestamp": 1755777607.195945}}}
{"text": "2025-08-21 17:30:07.197 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for ICICIBANK: unrealized=-906069.37, today=-906069.37\n", "record": {"elapsed": {"repr": "0:00:10.850364", "seconds": 10.850364}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for ICICIBANK: unrealized=-906069.37, today=-906069.37", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 21844, "name": "MainProcess"}, "thread": {"id": 24292, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:30:07.197543+05:30", "timestamp": 1755777607.197543}}}
{"text": "2025-08-21 17:30:07.199 | INFO     | app.services.dhan_client:get_pnl:545 - Calculated totals - realized: 0.0, unrealized: -895005.82, day: -895005.82\n", "record": {"elapsed": {"repr": "0:00:10.852074", "seconds": 10.852074}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 545, "message": "Calculated totals - realized: 0.0, unrealized: -895005.82, day: -895005.82", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 21844, "name": "MainProcess"}, "thread": {"id": 24292, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:30:07.199253+05:30", "timestamp": 1755777607.199253}}}
{"text": "2025-08-21 17:30:07.200 | DEBUG    | app.services.dhan_client:get_pnl:554 - PnL consistency check passed: drift=‚Çπ0.00\n", "record": {"elapsed": {"repr": "0:00:10.853655", "seconds": 10.853655}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 554, "message": "PnL consistency check passed: drift=‚Çπ0.00", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 21844, "name": "MainProcess"}, "thread": {"id": 24292, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:30:07.200834+05:30", "timestamp": 1755777607.200834}}}
{"text": "2025-08-21 17:30:07.201 | DEBUG    | app.services.dhan_client:get_pnl:558 - Creating PnLTotals...\n", "record": {"elapsed": {"repr": "0:00:10.854668", "seconds": 10.854668}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 558, "message": "Creating PnLTotals...", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 21844, "name": "MainProcess"}, "thread": {"id": 24292, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:30:07.201847+05:30", "timestamp": 1755777607.201847}}}
{"text": "2025-08-21 17:30:07.202 | DEBUG    | app.services.dhan_client:get_pnl:565 - PnLTotals created successfully\n", "record": {"elapsed": {"repr": "0:00:10.855749", "seconds": 10.855749}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 565, "message": "PnLTotals created successfully", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 21844, "name": "MainProcess"}, "thread": {"id": 24292, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:30:07.202928+05:30", "timestamp": 1755777607.202928}}}
{"text": "2025-08-21 17:30:07.204 | DEBUG    | app.services.dhan_client:get_pnl:574 - Creating PnL model...\n", "record": {"elapsed": {"repr": "0:00:10.857286", "seconds": 10.857286}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 574, "message": "Creating PnL model...", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 21844, "name": "MainProcess"}, "thread": {"id": 24292, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:30:07.204465+05:30", "timestamp": 1755777607.204465}}}
{"text": "2025-08-21 17:30:07.206 | DEBUG    | app.services.dhan_client:get_pnl:575 - Model fields: totals=<class 'app.models.schemas.PnLTotals'>, perSymbol=5, updated_at=2025-08-21 17:30:07.190805+05:30, trading_day=2025-08-21\n", "record": {"elapsed": {"repr": "0:00:10.858874", "seconds": 10.858874}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 575, "message": "Model fields: totals=<class 'app.models.schemas.PnLTotals'>, perSymbol=5, updated_at=2025-08-21 17:30:07.190805+05:30, trading_day=2025-08-21", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 21844, "name": "MainProcess"}, "thread": {"id": 24292, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:30:07.206053+05:30", "timestamp": 1755777607.206053}}}
{"text": "2025-08-21 17:30:07.207 | DEBUG    | app.services.dhan_client:get_pnl:584 - Created PnL model: totals=PnLTotals(realized=0.0, unrealized=-895005.82, day=-895005.82, currency='INR') per_symbol=[PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1412, avg=1385.34, ltp=123.86, unrealized=-1781203.01, today_pnl=-1781203.01), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=1160, avg=1132.72, ltp=875.61, unrealized=298242.23, today_pnl=298242.23), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=791, avg=1735.92, ltp=1298.6, unrealized=-345923.97, today_pnl=-345923.97), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=1902, avg=1982.2, ltp=1014.82, unrealized=1839948.3, today_pnl=1839948.3), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=773, avg=1518.94, ltp=346.79, unrealized=-906069.37, today_pnl=-906069.37)] updated_at=datetime.datetime(2025, 8, 21, 17, 30, 7, 190805, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))) trading_day='2025-08-21'\n", "record": {"elapsed": {"repr": "0:00:10.860466", "seconds": 10.860466}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 584, "message": "Created PnL model: totals=PnLTotals(realized=0.0, unrealized=-895005.82, day=-895005.82, currency='INR') per_symbol=[PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1412, avg=1385.34, ltp=123.86, unrealized=-1781203.01, today_pnl=-1781203.01), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=1160, avg=1132.72, ltp=875.61, unrealized=298242.23, today_pnl=298242.23), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=791, avg=1735.92, ltp=1298.6, unrealized=-345923.97, today_pnl=-345923.97), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=1902, avg=1982.2, ltp=1014.82, unrealized=1839948.3, today_pnl=1839948.3), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=773, avg=1518.94, ltp=346.79, unrealized=-906069.37, today_pnl=-906069.37)] updated_at=datetime.datetime(2025, 8, 21, 17, 30, 7, 190805, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))) trading_day='2025-08-21'", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 21844, "name": "MainProcess"}, "thread": {"id": 24292, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:30:07.207645+05:30", "timestamp": 1755777607.207645}}}
{"text": "2025-08-21 17:30:07.209 | DEBUG    | app.services.dhan_client:get_pnl:585 - PnL model fields: {'totals': PnLTotals(realized=0.0, unrealized=-895005.82, day=-895005.82, currency='INR'), 'per_symbol': [PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1412, avg=1385.34, ltp=123.86, unrealized=-1781203.01, today_pnl=-1781203.01), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=1160, avg=1132.72, ltp=875.61, unrealized=298242.23, today_pnl=298242.23), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=791, avg=1735.92, ltp=1298.6, unrealized=-345923.97, today_pnl=-345923.97), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=1902, avg=1982.2, ltp=1014.82, unrealized=1839948.3, today_pnl=1839948.3), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=773, avg=1518.94, ltp=346.79, unrealized=-906069.37, today_pnl=-906069.37)], 'updated_at': datetime.datetime(2025, 8, 21, 17, 30, 7, 190805, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))), 'trading_day': '2025-08-21'}\n", "record": {"elapsed": {"repr": "0:00:10.862526", "seconds": 10.862526}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 585, "message": "PnL model fields: {'totals': PnLTotals(realized=0.0, unrealized=-895005.82, day=-895005.82, currency='INR'), 'per_symbol': [PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1412, avg=1385.34, ltp=123.86, unrealized=-1781203.01, today_pnl=-1781203.01), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=1160, avg=1132.72, ltp=875.61, unrealized=298242.23, today_pnl=298242.23), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=791, avg=1735.92, ltp=1298.6, unrealized=-345923.97, today_pnl=-345923.97), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=1902, avg=1982.2, ltp=1014.82, unrealized=1839948.3, today_pnl=1839948.3), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=773, avg=1518.94, ltp=346.79, unrealized=-906069.37, today_pnl=-906069.37)], 'updated_at': datetime.datetime(2025, 8, 21, 17, 30, 7, 190805, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))), 'trading_day': '2025-08-21'}", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 21844, "name": "MainProcess"}, "thread": {"id": 24292, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:30:07.209705+05:30", "timestamp": 1755777607.209705}}}
{"text": "2025-08-21 17:30:07.211 | INFO     | app.services.dhan_client:get_pnl:587 - P&L calculation completed successfully: 5 symbols, unrealized=‚Çπ-895005.82\n", "record": {"elapsed": {"repr": "0:00:10.864735", "seconds": 10.864735}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 587, "message": "P&L calculation completed successfully: 5 symbols, unrealized=‚Çπ-895005.82", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 21844, "name": "MainProcess"}, "thread": {"id": 24292, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:30:07.211914+05:30", "timestamp": 1755777607.211914}}}
{"text": "2025-08-21 17:30:07.214 | DEBUG    | app.ws.live:emit_delta:408 - Emitted pnl delta: seq=12\n", "record": {"elapsed": {"repr": "0:00:10.866918", "seconds": 10.866918}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "emit_delta", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 408, "message": "Emitted pnl delta: seq=12", "module": "live", "name": "app.ws.live", "process": {"id": 21844, "name": "MainProcess"}, "thread": {"id": 24292, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:30:07.214097+05:30", "timestamp": 1755777607.214097}}}
{"text": "2025-08-21 17:30:07.255 | DEBUG    | app.ws.live:emit_delta:408 - Emitted positions delta: seq=13\n", "record": {"elapsed": {"repr": "0:00:10.908155", "seconds": 10.908155}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "emit_delta", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 408, "message": "Emitted positions delta: seq=13", "module": "live", "name": "app.ws.live", "process": {"id": 21844, "name": "MainProcess"}, "thread": {"id": 24292, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:30:07.255334+05:30", "timestamp": 1755777607.255334}}}
{"text": "2025-08-21 17:30:08.556 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:12.209730", "seconds": 12.20973}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 21844, "name": "MainProcess"}, "thread": {"id": 4252, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 17:30:08.556909+05:30", "timestamp": 1755777608.556909}}}
{"text": "2025-08-21 17:30:08.558 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:12.211205", "seconds": 12.211205}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 21844, "name": "MainProcess"}, "thread": {"id": 4252, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 17:30:08.558384+05:30", "timestamp": 1755777608.558384}}}
{"text": "2025-08-21 17:30:08.560 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:12.213401", "seconds": 12.213401}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 21844, "name": "MainProcess"}, "thread": {"id": 4252, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 17:30:08.560580+05:30", "timestamp": 1755777608.56058}}}
{"text": "2025-08-21 17:30:08.562 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:12.215790", "seconds": 12.21579}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 21844, "name": "MainProcess"}, "thread": {"id": 4252, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 17:30:08.562969+05:30", "timestamp": 1755777608.562969}}}
{"text": "2025-08-21 17:30:08.564 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:12.217374", "seconds": 12.217374}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 21844, "name": "MainProcess"}, "thread": {"id": 4252, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 17:30:08.564553+05:30", "timestamp": 1755777608.564553}}}
{"text": "2025-08-21 17:30:08.565 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:12.218314", "seconds": 12.218314}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 21844, "name": "MainProcess"}, "thread": {"id": 4252, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 17:30:08.565493+05:30", "timestamp": 1755777608.565493}}}
{"text": "2025-08-21 17:30:08.566 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:12.219177", "seconds": 12.219177}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 21844, "name": "MainProcess"}, "thread": {"id": 4252, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 17:30:08.566356+05:30", "timestamp": 1755777608.566356}}}
{"text": "2025-08-21 17:30:08.567 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:12.220490", "seconds": 12.22049}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 21844, "name": "MainProcess"}, "thread": {"id": 4252, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 17:30:08.567669+05:30", "timestamp": 1755777608.567669}}}
{"text": "2025-08-21 17:30:08.569 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:12.222387", "seconds": 12.222387}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 21844, "name": "MainProcess"}, "thread": {"id": 4252, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 17:30:08.569566+05:30", "timestamp": 1755777608.569566}}}
{"text": "2025-08-21 17:30:08.572 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:12.224988", "seconds": 12.224988}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 21844, "name": "MainProcess"}, "thread": {"id": 4252, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 17:30:08.572167+05:30", "timestamp": 1755777608.572167}}}
{"text": "2025-08-21 17:30:09.148 | INFO     | app.services.dhan_client:get_pnl:489 - Starting accurate P&L calculation\n", "record": {"elapsed": {"repr": "0:00:12.801271", "seconds": 12.801271}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 489, "message": "Starting accurate P&L calculation", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 21844, "name": "MainProcess"}, "thread": {"id": 24292, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:30:09.148450+05:30", "timestamp": 1755777609.14845}}}
{"text": "2025-08-21 17:30:09.149 | INFO     | app.services.dhan_client:get_pnl:491 - Fetched 5 positions\n", "record": {"elapsed": {"repr": "0:00:12.802370", "seconds": 12.80237}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 491, "message": "Fetched 5 positions", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 21844, "name": "MainProcess"}, "thread": {"id": 24292, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:30:09.149549+05:30", "timestamp": 1755777609.149549}}}
{"text": "2025-08-21 17:30:09.150 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for RELIANCE: unrealized=-1780558.46, today=-1780558.46\n", "record": {"elapsed": {"repr": "0:00:12.803643", "seconds": 12.803643}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for RELIANCE: unrealized=-1780558.46, today=-1780558.46", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 21844, "name": "MainProcess"}, "thread": {"id": 24292, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:30:09.150822+05:30", "timestamp": 1755777609.150822}}}
{"text": "2025-08-21 17:30:09.152 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for TCS: unrealized=295731.4, today=295731.4\n", "record": {"elapsed": {"repr": "0:00:12.805480", "seconds": 12.80548}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for TCS: unrealized=295731.4, today=295731.4", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 21844, "name": "MainProcess"}, "thread": {"id": 24292, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:30:09.152659+05:30", "timestamp": 1755777609.152659}}}
{"text": "2025-08-21 17:30:09.154 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for HDFC: unrealized=-325775.92, today=-325775.92\n", "record": {"elapsed": {"repr": "0:00:12.807423", "seconds": 12.807423}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for HDFC: unrealized=-325775.92, today=-325775.92", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 21844, "name": "MainProcess"}, "thread": {"id": 24292, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:30:09.154602+05:30", "timestamp": 1755777609.154602}}}
{"text": "2025-08-21 17:30:09.155 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for INFY: unrealized=1843154.16, today=1843154.16\n", "record": {"elapsed": {"repr": "0:00:12.808777", "seconds": 12.808777}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for INFY: unrealized=1843154.16, today=1843154.16", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 21844, "name": "MainProcess"}, "thread": {"id": 24292, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:30:09.155956+05:30", "timestamp": 1755777609.155956}}}
{"text": "2025-08-21 17:30:09.157 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for ICICIBANK: unrealized=-906541.7, today=-906541.7\n", "record": {"elapsed": {"repr": "0:00:12.810539", "seconds": 12.810539}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for ICICIBANK: unrealized=-906541.7, today=-906541.7", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 21844, "name": "MainProcess"}, "thread": {"id": 24292, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:30:09.157718+05:30", "timestamp": 1755777609.157718}}}
{"text": "2025-08-21 17:30:09.158 | INFO     | app.services.dhan_client:get_pnl:545 - Calculated totals - realized: 0.0, unrealized: -873990.52, day: -873990.52\n", "record": {"elapsed": {"repr": "0:00:12.811525", "seconds": 12.811525}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 545, "message": "Calculated totals - realized: 0.0, unrealized: -873990.52, day: -873990.52", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 21844, "name": "MainProcess"}, "thread": {"id": 24292, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:30:09.158704+05:30", "timestamp": 1755777609.158704}}}
{"text": "2025-08-21 17:30:09.159 | DEBUG    | app.services.dhan_client:get_pnl:554 - PnL consistency check passed: drift=‚Çπ0.00\n", "record": {"elapsed": {"repr": "0:00:12.812655", "seconds": 12.812655}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 554, "message": "PnL consistency check passed: drift=‚Çπ0.00", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 21844, "name": "MainProcess"}, "thread": {"id": 24292, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:30:09.159834+05:30", "timestamp": 1755777609.159834}}}
{"text": "2025-08-21 17:30:09.161 | DEBUG    | app.services.dhan_client:get_pnl:558 - Creating PnLTotals...\n", "record": {"elapsed": {"repr": "0:00:12.814456", "seconds": 12.814456}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 558, "message": "Creating PnLTotals...", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 21844, "name": "MainProcess"}, "thread": {"id": 24292, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:30:09.161635+05:30", "timestamp": 1755777609.161635}}}
{"text": "2025-08-21 17:30:09.163 | DEBUG    | app.services.dhan_client:get_pnl:565 - PnLTotals created successfully\n", "record": {"elapsed": {"repr": "0:00:12.816183", "seconds": 12.816183}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 565, "message": "PnLTotals created successfully", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 21844, "name": "MainProcess"}, "thread": {"id": 24292, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:30:09.163362+05:30", "timestamp": 1755777609.163362}}}
{"text": "2025-08-21 17:30:09.164 | DEBUG    | app.services.dhan_client:get_pnl:574 - Creating PnL model...\n", "record": {"elapsed": {"repr": "0:00:12.817360", "seconds": 12.81736}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 574, "message": "Creating PnL model...", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 21844, "name": "MainProcess"}, "thread": {"id": 24292, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:30:09.164539+05:30", "timestamp": 1755777609.164539}}}
{"text": "2025-08-21 17:30:09.165 | DEBUG    | app.services.dhan_client:get_pnl:575 - Model fields: totals=<class 'app.models.schemas.PnLTotals'>, perSymbol=5, updated_at=2025-08-21 17:30:09.150670+05:30, trading_day=2025-08-21\n", "record": {"elapsed": {"repr": "0:00:12.818481", "seconds": 12.818481}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 575, "message": "Model fields: totals=<class 'app.models.schemas.PnLTotals'>, perSymbol=5, updated_at=2025-08-21 17:30:09.150670+05:30, trading_day=2025-08-21", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 21844, "name": "MainProcess"}, "thread": {"id": 24292, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:30:09.165660+05:30", "timestamp": 1755777609.16566}}}
{"text": "2025-08-21 17:30:09.167 | DEBUG    | app.services.dhan_client:get_pnl:584 - Created PnL model: totals=PnLTotals(realized=0.0, unrealized=-873990.52, day=-873990.52, currency='INR') per_symbol=[PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1412, avg=1385.34, ltp=124.32, unrealized=-1780558.46, today_pnl=-1780558.46), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=1160, avg=1132.72, ltp=877.78, unrealized=295731.4, today_pnl=295731.4), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=791, avg=1735.92, ltp=1324.07, unrealized=-325775.92, today_pnl=-325775.92), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=1902, avg=1982.2, ltp=1013.14, unrealized=1843154.16, today_pnl=1843154.16), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=773, avg=1518.94, ltp=346.18, unrealized=-906541.7, today_pnl=-906541.7)] updated_at=datetime.datetime(2025, 8, 21, 17, 30, 9, 150670, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))) trading_day='2025-08-21'\n", "record": {"elapsed": {"repr": "0:00:12.820223", "seconds": 12.820223}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 584, "message": "Created PnL model: totals=PnLTotals(realized=0.0, unrealized=-873990.52, day=-873990.52, currency='INR') per_symbol=[PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1412, avg=1385.34, ltp=124.32, unrealized=-1780558.46, today_pnl=-1780558.46), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=1160, avg=1132.72, ltp=877.78, unrealized=295731.4, today_pnl=295731.4), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=791, avg=1735.92, ltp=1324.07, unrealized=-325775.92, today_pnl=-325775.92), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=1902, avg=1982.2, ltp=1013.14, unrealized=1843154.16, today_pnl=1843154.16), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=773, avg=1518.94, ltp=346.18, unrealized=-906541.7, today_pnl=-906541.7)] updated_at=datetime.datetime(2025, 8, 21, 17, 30, 9, 150670, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))) trading_day='2025-08-21'", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 21844, "name": "MainProcess"}, "thread": {"id": 24292, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:30:09.167402+05:30", "timestamp": 1755777609.167402}}}
{"text": "2025-08-21 17:30:09.169 | DEBUG    | app.services.dhan_client:get_pnl:585 - PnL model fields: {'totals': PnLTotals(realized=0.0, unrealized=-873990.52, day=-873990.52, currency='INR'), 'per_symbol': [PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1412, avg=1385.34, ltp=124.32, unrealized=-1780558.46, today_pnl=-1780558.46), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=1160, avg=1132.72, ltp=877.78, unrealized=295731.4, today_pnl=295731.4), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=791, avg=1735.92, ltp=1324.07, unrealized=-325775.92, today_pnl=-325775.92), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=1902, avg=1982.2, ltp=1013.14, unrealized=1843154.16, today_pnl=1843154.16), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=773, avg=1518.94, ltp=346.18, unrealized=-906541.7, today_pnl=-906541.7)], 'updated_at': datetime.datetime(2025, 8, 21, 17, 30, 9, 150670, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))), 'trading_day': '2025-08-21'}\n", "record": {"elapsed": {"repr": "0:00:12.822140", "seconds": 12.82214}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 585, "message": "PnL model fields: {'totals': PnLTotals(realized=0.0, unrealized=-873990.52, day=-873990.52, currency='INR'), 'per_symbol': [PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1412, avg=1385.34, ltp=124.32, unrealized=-1780558.46, today_pnl=-1780558.46), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=1160, avg=1132.72, ltp=877.78, unrealized=295731.4, today_pnl=295731.4), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=791, avg=1735.92, ltp=1324.07, unrealized=-325775.92, today_pnl=-325775.92), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=1902, avg=1982.2, ltp=1013.14, unrealized=1843154.16, today_pnl=1843154.16), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=773, avg=1518.94, ltp=346.18, unrealized=-906541.7, today_pnl=-906541.7)], 'updated_at': datetime.datetime(2025, 8, 21, 17, 30, 9, 150670, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))), 'trading_day': '2025-08-21'}", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 21844, "name": "MainProcess"}, "thread": {"id": 24292, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:30:09.169319+05:30", "timestamp": 1755777609.169319}}}
{"text": "2025-08-21 17:30:09.172 | INFO     | app.services.dhan_client:get_pnl:587 - P&L calculation completed successfully: 5 symbols, unrealized=‚Çπ-873990.52\n", "record": {"elapsed": {"repr": "0:00:12.824942", "seconds": 12.824942}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 587, "message": "P&L calculation completed successfully: 5 symbols, unrealized=‚Çπ-873990.52", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 21844, "name": "MainProcess"}, "thread": {"id": 24292, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:30:09.172121+05:30", "timestamp": 1755777609.172121}}}
{"text": "2025-08-21 17:30:09.173 | DEBUG    | app.ws.live:emit_delta:408 - Emitted pnl delta: seq=14\n", "record": {"elapsed": {"repr": "0:00:12.826623", "seconds": 12.826623}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "emit_delta", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 408, "message": "Emitted pnl delta: seq=14", "module": "live", "name": "app.ws.live", "process": {"id": 21844, "name": "MainProcess"}, "thread": {"id": 24292, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:30:09.173802+05:30", "timestamp": 1755777609.173802}}}
{"text": "2025-08-21 17:30:09.211 | DEBUG    | app.ws.live:emit_delta:408 - Emitted positions delta: seq=15\n", "record": {"elapsed": {"repr": "0:00:12.864423", "seconds": 12.864423}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "emit_delta", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 408, "message": "Emitted positions delta: seq=15", "module": "live", "name": "app.ws.live", "process": {"id": 21844, "name": "MainProcess"}, "thread": {"id": 24292, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:30:09.211602+05:30", "timestamp": 1755777609.211602}}}
{"text": "2025-08-21 17:30:10.573 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:14.226599", "seconds": 14.226599}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 21844, "name": "MainProcess"}, "thread": {"id": 4252, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 17:30:10.573778+05:30", "timestamp": 1755777610.573778}}}
{"text": "2025-08-21 17:30:10.575 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:14.228117", "seconds": 14.228117}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 21844, "name": "MainProcess"}, "thread": {"id": 4252, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 17:30:10.575296+05:30", "timestamp": 1755777610.575296}}}
{"text": "2025-08-21 17:30:10.576 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:14.229269", "seconds": 14.229269}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 21844, "name": "MainProcess"}, "thread": {"id": 4252, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 17:30:10.576448+05:30", "timestamp": 1755777610.576448}}}
{"text": "2025-08-21 17:30:10.577 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:14.230452", "seconds": 14.230452}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 21844, "name": "MainProcess"}, "thread": {"id": 4252, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 17:30:10.577631+05:30", "timestamp": 1755777610.577631}}}
{"text": "2025-08-21 17:30:10.579 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:14.232300", "seconds": 14.2323}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 21844, "name": "MainProcess"}, "thread": {"id": 4252, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 17:30:10.579479+05:30", "timestamp": 1755777610.579479}}}
{"text": "2025-08-21 17:30:10.580 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:14.233623", "seconds": 14.233623}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 21844, "name": "MainProcess"}, "thread": {"id": 4252, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 17:30:10.580802+05:30", "timestamp": 1755777610.580802}}}
{"text": "2025-08-21 17:30:10.581 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:14.234744", "seconds": 14.234744}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 21844, "name": "MainProcess"}, "thread": {"id": 4252, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 17:30:10.581923+05:30", "timestamp": 1755777610.581923}}}
{"text": "2025-08-21 17:30:10.583 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:14.235976", "seconds": 14.235976}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 21844, "name": "MainProcess"}, "thread": {"id": 4252, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 17:30:10.583155+05:30", "timestamp": 1755777610.583155}}}
{"text": "2025-08-21 17:30:10.584 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:14.237241", "seconds": 14.237241}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 21844, "name": "MainProcess"}, "thread": {"id": 4252, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 17:30:10.584420+05:30", "timestamp": 1755777610.58442}}}
{"text": "2025-08-21 17:30:10.586 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:14.238979", "seconds": 14.238979}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 21844, "name": "MainProcess"}, "thread": {"id": 4252, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 17:30:10.586158+05:30", "timestamp": 1755777610.586158}}}
{"text": "2025-08-21 17:30:11.087 | INFO     | app.services.dhan_client:get_pnl:489 - Starting accurate P&L calculation\n", "record": {"elapsed": {"repr": "0:00:14.740555", "seconds": 14.740555}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 489, "message": "Starting accurate P&L calculation", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 21844, "name": "MainProcess"}, "thread": {"id": 24292, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:30:11.087734+05:30", "timestamp": 1755777611.087734}}}
{"text": "2025-08-21 17:30:11.088 | INFO     | app.services.dhan_client:get_pnl:491 - Fetched 5 positions\n", "record": {"elapsed": {"repr": "0:00:14.741729", "seconds": 14.741729}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 491, "message": "Fetched 5 positions", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 21844, "name": "MainProcess"}, "thread": {"id": 24292, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:30:11.088908+05:30", "timestamp": 1755777611.088908}}}
{"text": "2025-08-21 17:30:11.090 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for RELIANCE: unrealized=-1783398.8, today=-1783398.8\n", "record": {"elapsed": {"repr": "0:00:14.743177", "seconds": 14.743177}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for RELIANCE: unrealized=-1783398.8, today=-1783398.8", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 21844, "name": "MainProcess"}, "thread": {"id": 24292, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:30:11.090356+05:30", "timestamp": 1755777611.090356}}}
{"text": "2025-08-21 17:30:11.092 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for TCS: unrealized=294005.89, today=294005.89\n", "record": {"elapsed": {"repr": "0:00:14.744898", "seconds": 14.744898}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for TCS: unrealized=294005.89, today=294005.89", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 21844, "name": "MainProcess"}, "thread": {"id": 24292, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:30:11.092077+05:30", "timestamp": 1755777611.092077}}}
{"text": "2025-08-21 17:30:11.093 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for HDFC: unrealized=-310103.07, today=-310103.07\n", "record": {"elapsed": {"repr": "0:00:14.746312", "seconds": 14.746312}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for HDFC: unrealized=-310103.07, today=-310103.07", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 21844, "name": "MainProcess"}, "thread": {"id": 24292, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:30:11.093491+05:30", "timestamp": 1755777611.093491}}}
{"text": "2025-08-21 17:30:11.095 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for INFY: unrealized=1852893.6, today=1852893.6\n", "record": {"elapsed": {"repr": "0:00:14.748170", "seconds": 14.74817}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for INFY: unrealized=1852893.6, today=1852893.6", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 21844, "name": "MainProcess"}, "thread": {"id": 24292, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:30:11.095349+05:30", "timestamp": 1755777611.095349}}}
{"text": "2025-08-21 17:30:11.096 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for ICICIBANK: unrealized=-902159.82, today=-902159.82\n", "record": {"elapsed": {"repr": "0:00:14.749200", "seconds": 14.7492}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for ICICIBANK: unrealized=-902159.82, today=-902159.82", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 21844, "name": "MainProcess"}, "thread": {"id": 24292, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:30:11.096379+05:30", "timestamp": 1755777611.096379}}}
{"text": "2025-08-21 17:30:11.097 | INFO     | app.services.dhan_client:get_pnl:545 - Calculated totals - realized: 0.0, unrealized: -848762.2, day: -848762.2\n", "record": {"elapsed": {"repr": "0:00:14.750219", "seconds": 14.750219}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 545, "message": "Calculated totals - realized: 0.0, unrealized: -848762.2, day: -848762.2", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 21844, "name": "MainProcess"}, "thread": {"id": 24292, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:30:11.097398+05:30", "timestamp": 1755777611.097398}}}
{"text": "2025-08-21 17:30:11.098 | DEBUG    | app.services.dhan_client:get_pnl:554 - PnL consistency check passed: drift=‚Çπ0.00\n", "record": {"elapsed": {"repr": "0:00:14.751159", "seconds": 14.751159}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 554, "message": "PnL consistency check passed: drift=‚Çπ0.00", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 21844, "name": "MainProcess"}, "thread": {"id": 24292, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:30:11.098338+05:30", "timestamp": 1755777611.098338}}}
{"text": "2025-08-21 17:30:11.099 | DEBUG    | app.services.dhan_client:get_pnl:558 - Creating PnLTotals...\n", "record": {"elapsed": {"repr": "0:00:14.752059", "seconds": 14.752059}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 558, "message": "Creating PnLTotals...", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 21844, "name": "MainProcess"}, "thread": {"id": 24292, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:30:11.099238+05:30", "timestamp": 1755777611.099238}}}
{"text": "2025-08-21 17:30:11.100 | DEBUG    | app.services.dhan_client:get_pnl:565 - PnLTotals created successfully\n", "record": {"elapsed": {"repr": "0:00:14.753793", "seconds": 14.753793}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 565, "message": "PnLTotals created successfully", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 21844, "name": "MainProcess"}, "thread": {"id": 24292, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:30:11.100972+05:30", "timestamp": 1755777611.100972}}}
{"text": "2025-08-21 17:30:11.102 | DEBUG    | app.services.dhan_client:get_pnl:574 - Creating PnL model...\n", "record": {"elapsed": {"repr": "0:00:14.755405", "seconds": 14.755405}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 574, "message": "Creating PnL model...", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 21844, "name": "MainProcess"}, "thread": {"id": 24292, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:30:11.102584+05:30", "timestamp": 1755777611.102584}}}
{"text": "2025-08-21 17:30:11.103 | DEBUG    | app.services.dhan_client:get_pnl:575 - Model fields: totals=<class 'app.models.schemas.PnLTotals'>, perSymbol=5, updated_at=2025-08-21 17:30:11.090125+05:30, trading_day=2025-08-21\n", "record": {"elapsed": {"repr": "0:00:14.756480", "seconds": 14.75648}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 575, "message": "Model fields: totals=<class 'app.models.schemas.PnLTotals'>, perSymbol=5, updated_at=2025-08-21 17:30:11.090125+05:30, trading_day=2025-08-21", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 21844, "name": "MainProcess"}, "thread": {"id": 24292, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:30:11.103659+05:30", "timestamp": 1755777611.103659}}}
{"text": "2025-08-21 17:30:11.105 | DEBUG    | app.services.dhan_client:get_pnl:584 - Created PnL model: totals=PnLTotals(realized=0.0, unrealized=-848762.2, day=-848762.2, currency='INR') per_symbol=[PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1412, avg=1385.34, ltp=122.31, unrealized=-1783398.8, today_pnl=-1783398.8), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=1160, avg=1132.72, ltp=879.27, unrealized=294005.89, today_pnl=294005.89), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=791, avg=1735.92, ltp=1343.88, unrealized=-310103.07, today_pnl=-310103.07), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=1902, avg=1982.2, ltp=1008.02, unrealized=1852893.6, today_pnl=1852893.6), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=773, avg=1518.94, ltp=351.85, unrealized=-902159.82, today_pnl=-902159.82)] updated_at=datetime.datetime(2025, 8, 21, 17, 30, 11, 90125, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))) trading_day='2025-08-21'\n", "record": {"elapsed": {"repr": "0:00:14.758522", "seconds": 14.758522}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 584, "message": "Created PnL model: totals=PnLTotals(realized=0.0, unrealized=-848762.2, day=-848762.2, currency='INR') per_symbol=[PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1412, avg=1385.34, ltp=122.31, unrealized=-1783398.8, today_pnl=-1783398.8), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=1160, avg=1132.72, ltp=879.27, unrealized=294005.89, today_pnl=294005.89), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=791, avg=1735.92, ltp=1343.88, unrealized=-310103.07, today_pnl=-310103.07), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=1902, avg=1982.2, ltp=1008.02, unrealized=1852893.6, today_pnl=1852893.6), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=773, avg=1518.94, ltp=351.85, unrealized=-902159.82, today_pnl=-902159.82)] updated_at=datetime.datetime(2025, 8, 21, 17, 30, 11, 90125, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))) trading_day='2025-08-21'", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 21844, "name": "MainProcess"}, "thread": {"id": 24292, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:30:11.105701+05:30", "timestamp": 1755777611.105701}}}
{"text": "2025-08-21 17:30:11.107 | DEBUG    | app.services.dhan_client:get_pnl:585 - PnL model fields: {'totals': PnLTotals(realized=0.0, unrealized=-848762.2, day=-848762.2, currency='INR'), 'per_symbol': [PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1412, avg=1385.34, ltp=122.31, unrealized=-1783398.8, today_pnl=-1783398.8), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=1160, avg=1132.72, ltp=879.27, unrealized=294005.89, today_pnl=294005.89), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=791, avg=1735.92, ltp=1343.88, unrealized=-310103.07, today_pnl=-310103.07), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=1902, avg=1982.2, ltp=1008.02, unrealized=1852893.6, today_pnl=1852893.6), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=773, avg=1518.94, ltp=351.85, unrealized=-902159.82, today_pnl=-902159.82)], 'updated_at': datetime.datetime(2025, 8, 21, 17, 30, 11, 90125, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))), 'trading_day': '2025-08-21'}\n", "record": {"elapsed": {"repr": "0:00:14.760632", "seconds": 14.760632}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 585, "message": "PnL model fields: {'totals': PnLTotals(realized=0.0, unrealized=-848762.2, day=-848762.2, currency='INR'), 'per_symbol': [PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1412, avg=1385.34, ltp=122.31, unrealized=-1783398.8, today_pnl=-1783398.8), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=1160, avg=1132.72, ltp=879.27, unrealized=294005.89, today_pnl=294005.89), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=791, avg=1735.92, ltp=1343.88, unrealized=-310103.07, today_pnl=-310103.07), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=1902, avg=1982.2, ltp=1008.02, unrealized=1852893.6, today_pnl=1852893.6), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=773, avg=1518.94, ltp=351.85, unrealized=-902159.82, today_pnl=-902159.82)], 'updated_at': datetime.datetime(2025, 8, 21, 17, 30, 11, 90125, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))), 'trading_day': '2025-08-21'}", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 21844, "name": "MainProcess"}, "thread": {"id": 24292, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:30:11.107811+05:30", "timestamp": 1755777611.107811}}}
{"text": "2025-08-21 17:30:11.109 | INFO     | app.services.dhan_client:get_pnl:587 - P&L calculation completed successfully: 5 symbols, unrealized=‚Çπ-848762.20\n", "record": {"elapsed": {"repr": "0:00:14.762378", "seconds": 14.762378}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 587, "message": "P&L calculation completed successfully: 5 symbols, unrealized=‚Çπ-848762.20", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 21844, "name": "MainProcess"}, "thread": {"id": 24292, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:30:11.109557+05:30", "timestamp": 1755777611.109557}}}
{"text": "2025-08-21 17:30:11.112 | DEBUG    | app.ws.live:emit_delta:408 - Emitted pnl delta: seq=16\n", "record": {"elapsed": {"repr": "0:00:14.764939", "seconds": 14.764939}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "emit_delta", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 408, "message": "Emitted pnl delta: seq=16", "module": "live", "name": "app.ws.live", "process": {"id": 21844, "name": "MainProcess"}, "thread": {"id": 24292, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:30:11.112118+05:30", "timestamp": 1755777611.112118}}}
{"text": "2025-08-21 17:30:11.148 | DEBUG    | app.ws.live:emit_delta:408 - Emitted positions delta: seq=17\n", "record": {"elapsed": {"repr": "0:00:14.801350", "seconds": 14.80135}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "emit_delta", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 408, "message": "Emitted positions delta: seq=17", "module": "live", "name": "app.ws.live", "process": {"id": 21844, "name": "MainProcess"}, "thread": {"id": 24292, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:30:11.148529+05:30", "timestamp": 1755777611.148529}}}
{"text": "2025-08-21 17:30:12.587 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:16.240412", "seconds": 16.240412}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 21844, "name": "MainProcess"}, "thread": {"id": 4252, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 17:30:12.587591+05:30", "timestamp": 1755777612.587591}}}
{"text": "2025-08-21 17:30:12.588 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:16.241609", "seconds": 16.241609}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 21844, "name": "MainProcess"}, "thread": {"id": 4252, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 17:30:12.588788+05:30", "timestamp": 1755777612.588788}}}
{"text": "2025-08-21 17:30:12.589 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:16.242719", "seconds": 16.242719}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 21844, "name": "MainProcess"}, "thread": {"id": 4252, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 17:30:12.589898+05:30", "timestamp": 1755777612.589898}}}
{"text": "2025-08-21 17:30:12.590 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:16.243724", "seconds": 16.243724}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 21844, "name": "MainProcess"}, "thread": {"id": 4252, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 17:30:12.590903+05:30", "timestamp": 1755777612.590903}}}
{"text": "2025-08-21 17:30:12.592 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:16.245479", "seconds": 16.245479}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 21844, "name": "MainProcess"}, "thread": {"id": 4252, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 17:30:12.592658+05:30", "timestamp": 1755777612.592658}}}
{"text": "2025-08-21 17:30:12.594 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:16.247445", "seconds": 16.247445}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 21844, "name": "MainProcess"}, "thread": {"id": 4252, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 17:30:12.594624+05:30", "timestamp": 1755777612.594624}}}
{"text": "2025-08-21 17:30:12.596 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:16.249474", "seconds": 16.249474}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 21844, "name": "MainProcess"}, "thread": {"id": 4252, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 17:30:12.596653+05:30", "timestamp": 1755777612.596653}}}
{"text": "2025-08-21 17:30:12.598 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:16.250975", "seconds": 16.250975}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 21844, "name": "MainProcess"}, "thread": {"id": 4252, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 17:30:12.598154+05:30", "timestamp": 1755777612.598154}}}
{"text": "2025-08-21 17:30:12.599 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:16.252470", "seconds": 16.25247}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 21844, "name": "MainProcess"}, "thread": {"id": 4252, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 17:30:12.599649+05:30", "timestamp": 1755777612.599649}}}
{"text": "2025-08-21 17:30:12.600 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:16.253429", "seconds": 16.253429}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 21844, "name": "MainProcess"}, "thread": {"id": 4252, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 17:30:12.600608+05:30", "timestamp": 1755777612.600608}}}
{"text": "2025-08-21 17:30:13.001 | INFO     | app.services.dhan_client:get_pnl:489 - Starting accurate P&L calculation\n", "record": {"elapsed": {"repr": "0:00:16.654038", "seconds": 16.654038}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 489, "message": "Starting accurate P&L calculation", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 21844, "name": "MainProcess"}, "thread": {"id": 24292, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:30:13.001217+05:30", "timestamp": 1755777613.001217}}}
{"text": "2025-08-21 17:30:13.003 | INFO     | app.services.dhan_client:get_pnl:491 - Fetched 5 positions\n", "record": {"elapsed": {"repr": "0:00:16.656013", "seconds": 16.656013}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 491, "message": "Fetched 5 positions", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 21844, "name": "MainProcess"}, "thread": {"id": 24292, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:30:13.003192+05:30", "timestamp": 1755777613.003192}}}
{"text": "2025-08-21 17:30:13.004 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for RELIANCE: unrealized=-1785671.41, today=-1785671.41\n", "record": {"elapsed": {"repr": "0:00:16.657316", "seconds": 16.657316}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for RELIANCE: unrealized=-1785671.41, today=-1785671.41", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 21844, "name": "MainProcess"}, "thread": {"id": 24292, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:30:13.004495+05:30", "timestamp": 1755777613.004495}}}
{"text": "2025-08-21 17:30:13.005 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for TCS: unrealized=300115.2, today=300115.2\n", "record": {"elapsed": {"repr": "0:00:16.658585", "seconds": 16.658585}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for TCS: unrealized=300115.2, today=300115.2", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 21844, "name": "MainProcess"}, "thread": {"id": 24292, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:30:13.005764+05:30", "timestamp": 1755777613.005764}}}
{"text": "2025-08-21 17:30:13.007 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for HDFC: unrealized=-297983.97, today=-297983.97\n", "record": {"elapsed": {"repr": "0:00:16.660099", "seconds": 16.660099}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for HDFC: unrealized=-297983.97, today=-297983.97", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 21844, "name": "MainProcess"}, "thread": {"id": 24292, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:30:13.007278+05:30", "timestamp": 1755777613.007278}}}
{"text": "2025-08-21 17:30:13.008 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for INFY: unrealized=1846036.79, today=1846036.79\n", "record": {"elapsed": {"repr": "0:00:16.661561", "seconds": 16.661561}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for INFY: unrealized=1846036.79, today=1846036.79", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 21844, "name": "MainProcess"}, "thread": {"id": 24292, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:30:13.008740+05:30", "timestamp": 1755777613.00874}}}
{"text": "2025-08-21 17:30:13.010 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for ICICIBANK: unrealized=-898404.49, today=-898404.49\n", "record": {"elapsed": {"repr": "0:00:16.663172", "seconds": 16.663172}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for ICICIBANK: unrealized=-898404.49, today=-898404.49", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 21844, "name": "MainProcess"}, "thread": {"id": 24292, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:30:13.010351+05:30", "timestamp": 1755777613.010351}}}
{"text": "2025-08-21 17:30:13.011 | INFO     | app.services.dhan_client:get_pnl:545 - Calculated totals - realized: 0.0, unrealized: -835907.88, day: -835907.88\n", "record": {"elapsed": {"repr": "0:00:16.664598", "seconds": 16.664598}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 545, "message": "Calculated totals - realized: 0.0, unrealized: -835907.88, day: -835907.88", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 21844, "name": "MainProcess"}, "thread": {"id": 24292, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:30:13.011777+05:30", "timestamp": 1755777613.011777}}}
{"text": "2025-08-21 17:30:13.013 | DEBUG    | app.services.dhan_client:get_pnl:554 - PnL consistency check passed: drift=‚Çπ0.00\n", "record": {"elapsed": {"repr": "0:00:16.666022", "seconds": 16.666022}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 554, "message": "PnL consistency check passed: drift=‚Çπ0.00", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 21844, "name": "MainProcess"}, "thread": {"id": 24292, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:30:13.013201+05:30", "timestamp": 1755777613.013201}}}
{"text": "2025-08-21 17:30:13.014 | DEBUG    | app.services.dhan_client:get_pnl:558 - Creating PnLTotals...\n", "record": {"elapsed": {"repr": "0:00:16.667574", "seconds": 16.667574}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 558, "message": "Creating PnLTotals...", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 21844, "name": "MainProcess"}, "thread": {"id": 24292, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:30:13.014753+05:30", "timestamp": 1755777613.014753}}}
{"text": "2025-08-21 17:30:13.017 | DEBUG    | app.services.dhan_client:get_pnl:565 - PnLTotals created successfully\n", "record": {"elapsed": {"repr": "0:00:16.669939", "seconds": 16.669939}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 565, "message": "PnLTotals created successfully", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 21844, "name": "MainProcess"}, "thread": {"id": 24292, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:30:13.017118+05:30", "timestamp": 1755777613.017118}}}
{"text": "2025-08-21 17:30:13.018 | DEBUG    | app.services.dhan_client:get_pnl:574 - Creating PnL model...\n", "record": {"elapsed": {"repr": "0:00:16.671359", "seconds": 16.671359}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 574, "message": "Creating PnL model...", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 21844, "name": "MainProcess"}, "thread": {"id": 24292, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:30:13.018538+05:30", "timestamp": 1755777613.018538}}}
{"text": "2025-08-21 17:30:13.019 | DEBUG    | app.services.dhan_client:get_pnl:575 - Model fields: totals=<class 'app.models.schemas.PnLTotals'>, perSymbol=5, updated_at=2025-08-21 17:30:13.004338+05:30, trading_day=2025-08-21\n", "record": {"elapsed": {"repr": "0:00:16.672546", "seconds": 16.672546}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 575, "message": "Model fields: totals=<class 'app.models.schemas.PnLTotals'>, perSymbol=5, updated_at=2025-08-21 17:30:13.004338+05:30, trading_day=2025-08-21", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 21844, "name": "MainProcess"}, "thread": {"id": 24292, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:30:13.019725+05:30", "timestamp": 1755777613.019725}}}
{"text": "2025-08-21 17:30:13.021 | DEBUG    | app.services.dhan_client:get_pnl:584 - Created PnL model: totals=PnLTotals(realized=0.0, unrealized=-835907.88, day=-835907.88, currency='INR') per_symbol=[PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1412, avg=1385.34, ltp=120.7, unrealized=-1785671.41, today_pnl=-1785671.41), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=1160, avg=1132.72, ltp=874.0, unrealized=300115.2, today_pnl=300115.2), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=791, avg=1735.92, ltp=1359.2, unrealized=-297983.97, today_pnl=-297983.97), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=1902, avg=1982.2, ltp=1011.62, unrealized=1846036.79, today_pnl=1846036.79), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=773, avg=1518.94, ltp=356.71, unrealized=-898404.49, today_pnl=-898404.49)] updated_at=datetime.datetime(2025, 8, 21, 17, 30, 13, 4338, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))) trading_day='2025-08-21'\n", "record": {"elapsed": {"repr": "0:00:16.674454", "seconds": 16.674454}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 584, "message": "Created PnL model: totals=PnLTotals(realized=0.0, unrealized=-835907.88, day=-835907.88, currency='INR') per_symbol=[PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1412, avg=1385.34, ltp=120.7, unrealized=-1785671.41, today_pnl=-1785671.41), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=1160, avg=1132.72, ltp=874.0, unrealized=300115.2, today_pnl=300115.2), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=791, avg=1735.92, ltp=1359.2, unrealized=-297983.97, today_pnl=-297983.97), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=1902, avg=1982.2, ltp=1011.62, unrealized=1846036.79, today_pnl=1846036.79), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=773, avg=1518.94, ltp=356.71, unrealized=-898404.49, today_pnl=-898404.49)] updated_at=datetime.datetime(2025, 8, 21, 17, 30, 13, 4338, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))) trading_day='2025-08-21'", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 21844, "name": "MainProcess"}, "thread": {"id": 24292, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:30:13.021633+05:30", "timestamp": 1755777613.021633}}}
{"text": "2025-08-21 17:30:13.024 | DEBUG    | app.services.dhan_client:get_pnl:585 - PnL model fields: {'totals': PnLTotals(realized=0.0, unrealized=-835907.88, day=-835907.88, currency='INR'), 'per_symbol': [PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1412, avg=1385.34, ltp=120.7, unrealized=-1785671.41, today_pnl=-1785671.41), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=1160, avg=1132.72, ltp=874.0, unrealized=300115.2, today_pnl=300115.2), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=791, avg=1735.92, ltp=1359.2, unrealized=-297983.97, today_pnl=-297983.97), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=1902, avg=1982.2, ltp=1011.62, unrealized=1846036.79, today_pnl=1846036.79), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=773, avg=1518.94, ltp=356.71, unrealized=-898404.49, today_pnl=-898404.49)], 'updated_at': datetime.datetime(2025, 8, 21, 17, 30, 13, 4338, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))), 'trading_day': '2025-08-21'}\n", "record": {"elapsed": {"repr": "0:00:16.676997", "seconds": 16.676997}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 585, "message": "PnL model fields: {'totals': PnLTotals(realized=0.0, unrealized=-835907.88, day=-835907.88, currency='INR'), 'per_symbol': [PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1412, avg=1385.34, ltp=120.7, unrealized=-1785671.41, today_pnl=-1785671.41), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=1160, avg=1132.72, ltp=874.0, unrealized=300115.2, today_pnl=300115.2), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=791, avg=1735.92, ltp=1359.2, unrealized=-297983.97, today_pnl=-297983.97), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=1902, avg=1982.2, ltp=1011.62, unrealized=1846036.79, today_pnl=1846036.79), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=773, avg=1518.94, ltp=356.71, unrealized=-898404.49, today_pnl=-898404.49)], 'updated_at': datetime.datetime(2025, 8, 21, 17, 30, 13, 4338, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))), 'trading_day': '2025-08-21'}", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 21844, "name": "MainProcess"}, "thread": {"id": 24292, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:30:13.024176+05:30", "timestamp": 1755777613.024176}}}
{"text": "2025-08-21 17:30:13.027 | INFO     | app.services.dhan_client:get_pnl:587 - P&L calculation completed successfully: 5 symbols, unrealized=‚Çπ-835907.88\n", "record": {"elapsed": {"repr": "0:00:16.680119", "seconds": 16.680119}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 587, "message": "P&L calculation completed successfully: 5 symbols, unrealized=‚Çπ-835907.88", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 21844, "name": "MainProcess"}, "thread": {"id": 24292, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:30:13.027298+05:30", "timestamp": 1755777613.027298}}}
{"text": "2025-08-21 17:30:13.029 | DEBUG    | app.ws.live:emit_delta:408 - Emitted pnl delta: seq=18\n", "record": {"elapsed": {"repr": "0:00:16.682044", "seconds": 16.682044}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "emit_delta", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 408, "message": "Emitted pnl delta: seq=18", "module": "live", "name": "app.ws.live", "process": {"id": 21844, "name": "MainProcess"}, "thread": {"id": 24292, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:30:13.029223+05:30", "timestamp": 1755777613.029223}}}
{"text": "2025-08-21 17:30:13.049 | DEBUG    | app.ws.live:emit_delta:408 - Emitted positions delta: seq=19\n", "record": {"elapsed": {"repr": "0:00:16.701911", "seconds": 16.701911}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "emit_delta", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 408, "message": "Emitted positions delta: seq=19", "module": "live", "name": "app.ws.live", "process": {"id": 21844, "name": "MainProcess"}, "thread": {"id": 24292, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:30:13.049090+05:30", "timestamp": 1755777613.04909}}}
{"text": "2025-08-21 17:30:14.602 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:18.255708", "seconds": 18.255708}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 21844, "name": "MainProcess"}, "thread": {"id": 4252, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 17:30:14.602887+05:30", "timestamp": 1755777614.602887}}}
{"text": "2025-08-21 17:30:14.604 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:18.256942", "seconds": 18.256942}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 21844, "name": "MainProcess"}, "thread": {"id": 4252, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 17:30:14.604121+05:30", "timestamp": 1755777614.604121}}}
{"text": "2025-08-21 17:30:14.605 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:18.258155", "seconds": 18.258155}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 21844, "name": "MainProcess"}, "thread": {"id": 4252, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 17:30:14.605334+05:30", "timestamp": 1755777614.605334}}}
{"text": "2025-08-21 17:30:14.606 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:18.259355", "seconds": 18.259355}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 21844, "name": "MainProcess"}, "thread": {"id": 4252, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 17:30:14.606534+05:30", "timestamp": 1755777614.606534}}}
{"text": "2025-08-21 17:30:14.607 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:18.260797", "seconds": 18.260797}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 21844, "name": "MainProcess"}, "thread": {"id": 4252, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 17:30:14.607976+05:30", "timestamp": 1755777614.607976}}}
{"text": "2025-08-21 17:30:14.609 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:18.262603", "seconds": 18.262603}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 21844, "name": "MainProcess"}, "thread": {"id": 4252, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 17:30:14.609782+05:30", "timestamp": 1755777614.609782}}}
{"text": "2025-08-21 17:30:14.611 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:18.264325", "seconds": 18.264325}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 21844, "name": "MainProcess"}, "thread": {"id": 4252, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 17:30:14.611504+05:30", "timestamp": 1755777614.611504}}}
{"text": "2025-08-21 17:30:14.612 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:18.265417", "seconds": 18.265417}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 21844, "name": "MainProcess"}, "thread": {"id": 4252, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 17:30:14.612596+05:30", "timestamp": 1755777614.612596}}}
{"text": "2025-08-21 17:30:14.614 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:18.267036", "seconds": 18.267036}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 21844, "name": "MainProcess"}, "thread": {"id": 4252, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 17:30:14.614215+05:30", "timestamp": 1755777614.614215}}}
{"text": "2025-08-21 17:30:14.615 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:18.268225", "seconds": 18.268225}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 21844, "name": "MainProcess"}, "thread": {"id": 4252, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 17:30:14.615404+05:30", "timestamp": 1755777614.615404}}}
{"text": "2025-08-21 17:30:14.874 | INFO     | app.services.dhan_client:get_pnl:489 - Starting accurate P&L calculation\n", "record": {"elapsed": {"repr": "0:00:18.527099", "seconds": 18.527099}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 489, "message": "Starting accurate P&L calculation", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 21844, "name": "MainProcess"}, "thread": {"id": 24292, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:30:14.874278+05:30", "timestamp": 1755777614.874278}}}
{"text": "2025-08-21 17:30:14.875 | INFO     | app.services.dhan_client:get_pnl:491 - Fetched 5 positions\n", "record": {"elapsed": {"repr": "0:00:18.528805", "seconds": 18.528805}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 491, "message": "Fetched 5 positions", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 21844, "name": "MainProcess"}, "thread": {"id": 24292, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:30:14.875984+05:30", "timestamp": 1755777614.875984}}}
{"text": "2025-08-21 17:30:14.878 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for RELIANCE: unrealized=-1786692.14, today=-1786692.14\n", "record": {"elapsed": {"repr": "0:00:18.531693", "seconds": 18.531693}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for RELIANCE: unrealized=-1786692.14, today=-1786692.14", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 21844, "name": "MainProcess"}, "thread": {"id": 24292, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:30:14.878872+05:30", "timestamp": 1755777614.878872}}}
{"text": "2025-08-21 17:30:14.880 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for TCS: unrealized=306814.47, today=306814.47\n", "record": {"elapsed": {"repr": "0:00:18.532997", "seconds": 18.532997}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for TCS: unrealized=306814.47, today=306814.47", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 21844, "name": "MainProcess"}, "thread": {"id": 24292, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:30:14.880176+05:30", "timestamp": 1755777614.880176}}}
{"text": "2025-08-21 17:30:14.881 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for HDFC: unrealized=-290940.13, today=-290940.13\n", "record": {"elapsed": {"repr": "0:00:18.534812", "seconds": 18.534812}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for HDFC: unrealized=-290940.13, today=-290940.13", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 21844, "name": "MainProcess"}, "thread": {"id": 24292, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:30:14.881991+05:30", "timestamp": 1755777614.881991}}}
{"text": "2025-08-21 17:30:14.883 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for INFY: unrealized=1823861.64, today=1823861.64\n", "record": {"elapsed": {"repr": "0:00:18.536807", "seconds": 18.536807}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for INFY: unrealized=1823861.64, today=1823861.64", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 21844, "name": "MainProcess"}, "thread": {"id": 24292, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:30:14.883986+05:30", "timestamp": 1755777614.883986}}}
{"text": "2025-08-21 17:30:14.886 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for ICICIBANK: unrealized=-893906.44, today=-893906.44\n", "record": {"elapsed": {"repr": "0:00:18.539116", "seconds": 18.539116}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for ICICIBANK: unrealized=-893906.44, today=-893906.44", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 21844, "name": "MainProcess"}, "thread": {"id": 24292, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:30:14.886295+05:30", "timestamp": 1755777614.886295}}}
{"text": "2025-08-21 17:30:14.887 | INFO     | app.services.dhan_client:get_pnl:545 - Calculated totals - realized: 0.0, unrealized: -840862.6, day: -840862.6\n", "record": {"elapsed": {"repr": "0:00:18.540473", "seconds": 18.540473}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 545, "message": "Calculated totals - realized: 0.0, unrealized: -840862.6, day: -840862.6", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 21844, "name": "MainProcess"}, "thread": {"id": 24292, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:30:14.887652+05:30", "timestamp": 1755777614.887652}}}
{"text": "2025-08-21 17:30:14.888 | DEBUG    | app.services.dhan_client:get_pnl:554 - PnL consistency check passed: drift=‚Çπ0.00\n", "record": {"elapsed": {"repr": "0:00:18.541481", "seconds": 18.541481}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 554, "message": "PnL consistency check passed: drift=‚Çπ0.00", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 21844, "name": "MainProcess"}, "thread": {"id": 24292, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:30:14.888660+05:30", "timestamp": 1755777614.88866}}}
{"text": "2025-08-21 17:30:14.890 | DEBUG    | app.services.dhan_client:get_pnl:558 - Creating PnLTotals...\n", "record": {"elapsed": {"repr": "0:00:18.543036", "seconds": 18.543036}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 558, "message": "Creating PnLTotals...", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 21844, "name": "MainProcess"}, "thread": {"id": 24292, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:30:14.890215+05:30", "timestamp": 1755777614.890215}}}
{"text": "2025-08-21 17:30:14.891 | DEBUG    | app.services.dhan_client:get_pnl:565 - PnLTotals created successfully\n", "record": {"elapsed": {"repr": "0:00:18.544257", "seconds": 18.544257}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 565, "message": "PnLTotals created successfully", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 21844, "name": "MainProcess"}, "thread": {"id": 24292, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:30:14.891436+05:30", "timestamp": 1755777614.891436}}}
{"text": "2025-08-21 17:30:14.892 | DEBUG    | app.services.dhan_client:get_pnl:574 - Creating PnL model...\n", "record": {"elapsed": {"repr": "0:00:18.545384", "seconds": 18.545384}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 574, "message": "Creating PnL model...", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 21844, "name": "MainProcess"}, "thread": {"id": 24292, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:30:14.892563+05:30", "timestamp": 1755777614.892563}}}
{"text": "2025-08-21 17:30:14.893 | DEBUG    | app.services.dhan_client:get_pnl:575 - Model fields: totals=<class 'app.models.schemas.PnLTotals'>, perSymbol=5, updated_at=2025-08-21 17:30:14.878590+05:30, trading_day=2025-08-21\n", "record": {"elapsed": {"repr": "0:00:18.546522", "seconds": 18.546522}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 575, "message": "Model fields: totals=<class 'app.models.schemas.PnLTotals'>, perSymbol=5, updated_at=2025-08-21 17:30:14.878590+05:30, trading_day=2025-08-21", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 21844, "name": "MainProcess"}, "thread": {"id": 24292, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:30:14.893701+05:30", "timestamp": 1755777614.893701}}}
{"text": "2025-08-21 17:30:14.895 | DEBUG    | app.services.dhan_client:get_pnl:584 - Created PnL model: totals=PnLTotals(realized=0.0, unrealized=-840862.6, day=-840862.6, currency='INR') per_symbol=[PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1412, avg=1385.34, ltp=119.98, unrealized=-1786692.14, today_pnl=-1786692.14), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=1160, avg=1132.72, ltp=868.22, unrealized=306814.47, today_pnl=306814.47), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=791, avg=1735.92, ltp=1368.11, unrealized=-290940.13, today_pnl=-290940.13), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=1902, avg=1982.2, ltp=1023.28, unrealized=1823861.64, today_pnl=1823861.64), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=773, avg=1518.94, ltp=362.53, unrealized=-893906.44, today_pnl=-893906.44)] updated_at=datetime.datetime(2025, 8, 21, 17, 30, 14, 878590, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))) trading_day='2025-08-21'\n", "record": {"elapsed": {"repr": "0:00:18.548412", "seconds": 18.548412}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 584, "message": "Created PnL model: totals=PnLTotals(realized=0.0, unrealized=-840862.6, day=-840862.6, currency='INR') per_symbol=[PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1412, avg=1385.34, ltp=119.98, unrealized=-1786692.14, today_pnl=-1786692.14), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=1160, avg=1132.72, ltp=868.22, unrealized=306814.47, today_pnl=306814.47), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=791, avg=1735.92, ltp=1368.11, unrealized=-290940.13, today_pnl=-290940.13), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=1902, avg=1982.2, ltp=1023.28, unrealized=1823861.64, today_pnl=1823861.64), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=773, avg=1518.94, ltp=362.53, unrealized=-893906.44, today_pnl=-893906.44)] updated_at=datetime.datetime(2025, 8, 21, 17, 30, 14, 878590, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))) trading_day='2025-08-21'", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 21844, "name": "MainProcess"}, "thread": {"id": 24292, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:30:14.895591+05:30", "timestamp": 1755777614.895591}}}
{"text": "2025-08-21 17:30:14.897 | DEBUG    | app.services.dhan_client:get_pnl:585 - PnL model fields: {'totals': PnLTotals(realized=0.0, unrealized=-840862.6, day=-840862.6, currency='INR'), 'per_symbol': [PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1412, avg=1385.34, ltp=119.98, unrealized=-1786692.14, today_pnl=-1786692.14), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=1160, avg=1132.72, ltp=868.22, unrealized=306814.47, today_pnl=306814.47), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=791, avg=1735.92, ltp=1368.11, unrealized=-290940.13, today_pnl=-290940.13), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=1902, avg=1982.2, ltp=1023.28, unrealized=1823861.64, today_pnl=1823861.64), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=773, avg=1518.94, ltp=362.53, unrealized=-893906.44, today_pnl=-893906.44)], 'updated_at': datetime.datetime(2025, 8, 21, 17, 30, 14, 878590, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))), 'trading_day': '2025-08-21'}\n", "record": {"elapsed": {"repr": "0:00:18.550226", "seconds": 18.550226}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 585, "message": "PnL model fields: {'totals': PnLTotals(realized=0.0, unrealized=-840862.6, day=-840862.6, currency='INR'), 'per_symbol': [PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1412, avg=1385.34, ltp=119.98, unrealized=-1786692.14, today_pnl=-1786692.14), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=1160, avg=1132.72, ltp=868.22, unrealized=306814.47, today_pnl=306814.47), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=791, avg=1735.92, ltp=1368.11, unrealized=-290940.13, today_pnl=-290940.13), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=1902, avg=1982.2, ltp=1023.28, unrealized=1823861.64, today_pnl=1823861.64), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=773, avg=1518.94, ltp=362.53, unrealized=-893906.44, today_pnl=-893906.44)], 'updated_at': datetime.datetime(2025, 8, 21, 17, 30, 14, 878590, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))), 'trading_day': '2025-08-21'}", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 21844, "name": "MainProcess"}, "thread": {"id": 24292, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:30:14.897405+05:30", "timestamp": 1755777614.897405}}}
{"text": "2025-08-21 17:30:14.899 | INFO     | app.services.dhan_client:get_pnl:587 - P&L calculation completed successfully: 5 symbols, unrealized=‚Çπ-840862.60\n", "record": {"elapsed": {"repr": "0:00:18.552384", "seconds": 18.552384}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 587, "message": "P&L calculation completed successfully: 5 symbols, unrealized=‚Çπ-840862.60", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 21844, "name": "MainProcess"}, "thread": {"id": 24292, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:30:14.899563+05:30", "timestamp": 1755777614.899563}}}
{"text": "2025-08-21 17:30:14.901 | DEBUG    | app.ws.live:emit_delta:408 - Emitted pnl delta: seq=20\n", "record": {"elapsed": {"repr": "0:00:18.554502", "seconds": 18.554502}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "emit_delta", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 408, "message": "Emitted pnl delta: seq=20", "module": "live", "name": "app.ws.live", "process": {"id": 21844, "name": "MainProcess"}, "thread": {"id": 24292, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:30:14.901681+05:30", "timestamp": 1755777614.901681}}}
{"text": "2025-08-21 17:30:14.903 | DEBUG    | app.ws.live:emit_delta:408 - Emitted positions delta: seq=21\n", "record": {"elapsed": {"repr": "0:00:18.556790", "seconds": 18.55679}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "emit_delta", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 408, "message": "Emitted positions delta: seq=21", "module": "live", "name": "app.ws.live", "process": {"id": 21844, "name": "MainProcess"}, "thread": {"id": 24292, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:30:14.903969+05:30", "timestamp": 1755777614.903969}}}
{"text": "2025-08-21 17:30:16.617 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:20.270515", "seconds": 20.270515}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 21844, "name": "MainProcess"}, "thread": {"id": 4252, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 17:30:16.617694+05:30", "timestamp": 1755777616.617694}}}
{"text": "2025-08-21 17:30:16.619 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:20.272237", "seconds": 20.272237}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 21844, "name": "MainProcess"}, "thread": {"id": 4252, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 17:30:16.619416+05:30", "timestamp": 1755777616.619416}}}
{"text": "2025-08-21 17:30:16.620 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:20.273713", "seconds": 20.273713}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 21844, "name": "MainProcess"}, "thread": {"id": 4252, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 17:30:16.620892+05:30", "timestamp": 1755777616.620892}}}
{"text": "2025-08-21 17:30:16.622 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:20.274884", "seconds": 20.274884}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 21844, "name": "MainProcess"}, "thread": {"id": 4252, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 17:30:16.622063+05:30", "timestamp": 1755777616.622063}}}
{"text": "2025-08-21 17:30:16.624 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:20.276842", "seconds": 20.276842}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 21844, "name": "MainProcess"}, "thread": {"id": 4252, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 17:30:16.624021+05:30", "timestamp": 1755777616.624021}}}
{"text": "2025-08-21 17:30:16.626 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:20.279133", "seconds": 20.279133}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 21844, "name": "MainProcess"}, "thread": {"id": 4252, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 17:30:16.626312+05:30", "timestamp": 1755777616.626312}}}
{"text": "2025-08-21 17:30:16.628 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:20.280876", "seconds": 20.280876}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 21844, "name": "MainProcess"}, "thread": {"id": 4252, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 17:30:16.628055+05:30", "timestamp": 1755777616.628055}}}
{"text": "2025-08-21 17:30:16.629 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:20.282153", "seconds": 20.282153}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 21844, "name": "MainProcess"}, "thread": {"id": 4252, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 17:30:16.629332+05:30", "timestamp": 1755777616.629332}}}
{"text": "2025-08-21 17:30:16.630 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:20.283331", "seconds": 20.283331}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 21844, "name": "MainProcess"}, "thread": {"id": 4252, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 17:30:16.630510+05:30", "timestamp": 1755777616.63051}}}
{"text": "2025-08-21 17:30:16.631 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:20.284606", "seconds": 20.284606}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 21844, "name": "MainProcess"}, "thread": {"id": 4252, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 17:30:16.631785+05:30", "timestamp": 1755777616.631785}}}
{"text": "2025-08-21 17:30:16.686 | INFO     | app.services.dhan_client:get_pnl:489 - Starting accurate P&L calculation\n", "record": {"elapsed": {"repr": "0:00:20.339008", "seconds": 20.339008}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 489, "message": "Starting accurate P&L calculation", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 21844, "name": "MainProcess"}, "thread": {"id": 24292, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:30:16.686187+05:30", "timestamp": 1755777616.686187}}}
{"text": "2025-08-21 17:30:16.687 | INFO     | app.services.dhan_client:get_pnl:491 - Fetched 5 positions\n", "record": {"elapsed": {"repr": "0:00:20.340560", "seconds": 20.34056}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 491, "message": "Fetched 5 positions", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 21844, "name": "MainProcess"}, "thread": {"id": 24292, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:30:16.687739+05:30", "timestamp": 1755777616.687739}}}
{"text": "2025-08-21 17:30:16.688 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for RELIANCE: unrealized=-1789951.12, today=-1789951.12\n", "record": {"elapsed": {"repr": "0:00:20.341793", "seconds": 20.341793}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for RELIANCE: unrealized=-1789951.12, today=-1789951.12", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 21844, "name": "MainProcess"}, "thread": {"id": 24292, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:30:16.688972+05:30", "timestamp": 1755777616.688972}}}
{"text": "2025-08-21 17:30:16.690 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for TCS: unrealized=323360.04, today=323360.04\n", "record": {"elapsed": {"repr": "0:00:20.343077", "seconds": 20.343077}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for TCS: unrealized=323360.04, today=323360.04", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 21844, "name": "MainProcess"}, "thread": {"id": 24292, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:30:16.690256+05:30", "timestamp": 1755777616.690256}}}
{"text": "2025-08-21 17:30:16.691 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for HDFC: unrealized=-304439.34, today=-304439.34\n", "record": {"elapsed": {"repr": "0:00:20.344266", "seconds": 20.344266}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for HDFC: unrealized=-304439.34, today=-304439.34", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 21844, "name": "MainProcess"}, "thread": {"id": 24292, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:30:16.691445+05:30", "timestamp": 1755777616.691445}}}
{"text": "2025-08-21 17:30:16.692 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for INFY: unrealized=1793059.95, today=1793059.95\n", "record": {"elapsed": {"repr": "0:00:20.345714", "seconds": 20.345714}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for INFY: unrealized=1793059.95, today=1793059.95", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 21844, "name": "MainProcess"}, "thread": {"id": 24292, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:30:16.692893+05:30", "timestamp": 1755777616.692893}}}
{"text": "2025-08-21 17:30:16.694 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for ICICIBANK: unrealized=-888641.63, today=-888641.63\n", "record": {"elapsed": {"repr": "0:00:20.347749", "seconds": 20.347749}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for ICICIBANK: unrealized=-888641.63, today=-888641.63", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 21844, "name": "MainProcess"}, "thread": {"id": 24292, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:30:16.694928+05:30", "timestamp": 1755777616.694928}}}
{"text": "2025-08-21 17:30:16.696 | INFO     | app.services.dhan_client:get_pnl:545 - Calculated totals - realized: 0.0, unrealized: -866612.1, day: -866612.1\n", "record": {"elapsed": {"repr": "0:00:20.349677", "seconds": 20.349677}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 545, "message": "Calculated totals - realized: 0.0, unrealized: -866612.1, day: -866612.1", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 21844, "name": "MainProcess"}, "thread": {"id": 24292, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:30:16.696856+05:30", "timestamp": 1755777616.696856}}}
{"text": "2025-08-21 17:30:16.698 | DEBUG    | app.services.dhan_client:get_pnl:554 - PnL consistency check passed: drift=‚Çπ0.00\n", "record": {"elapsed": {"repr": "0:00:20.351584", "seconds": 20.351584}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 554, "message": "PnL consistency check passed: drift=‚Çπ0.00", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 21844, "name": "MainProcess"}, "thread": {"id": 24292, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:30:16.698763+05:30", "timestamp": 1755777616.698763}}}
{"text": "2025-08-21 17:30:16.700 | DEBUG    | app.services.dhan_client:get_pnl:558 - Creating PnLTotals...\n", "record": {"elapsed": {"repr": "0:00:20.353382", "seconds": 20.353382}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 558, "message": "Creating PnLTotals...", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 21844, "name": "MainProcess"}, "thread": {"id": 24292, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:30:16.700561+05:30", "timestamp": 1755777616.700561}}}
{"text": "2025-08-21 17:30:16.701 | DEBUG    | app.services.dhan_client:get_pnl:565 - PnLTotals created successfully\n", "record": {"elapsed": {"repr": "0:00:20.354416", "seconds": 20.354416}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 565, "message": "PnLTotals created successfully", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 21844, "name": "MainProcess"}, "thread": {"id": 24292, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:30:16.701595+05:30", "timestamp": 1755777616.701595}}}
{"text": "2025-08-21 17:30:16.702 | DEBUG    | app.services.dhan_client:get_pnl:574 - Creating PnL model...\n", "record": {"elapsed": {"repr": "0:00:20.355536", "seconds": 20.355536}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 574, "message": "Creating PnL model...", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 21844, "name": "MainProcess"}, "thread": {"id": 24292, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:30:16.702715+05:30", "timestamp": 1755777616.702715}}}
{"text": "2025-08-21 17:30:16.703 | DEBUG    | app.services.dhan_client:get_pnl:575 - Model fields: totals=<class 'app.models.schemas.PnLTotals'>, perSymbol=5, updated_at=2025-08-21 17:30:16.688813+05:30, trading_day=2025-08-21\n", "record": {"elapsed": {"repr": "0:00:20.356475", "seconds": 20.356475}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 575, "message": "Model fields: totals=<class 'app.models.schemas.PnLTotals'>, perSymbol=5, updated_at=2025-08-21 17:30:16.688813+05:30, trading_day=2025-08-21", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 21844, "name": "MainProcess"}, "thread": {"id": 24292, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:30:16.703654+05:30", "timestamp": 1755777616.703654}}}
{"text": "2025-08-21 17:30:16.704 | DEBUG    | app.services.dhan_client:get_pnl:584 - Created PnL model: totals=PnLTotals(realized=0.0, unrealized=-866612.1, day=-866612.1, currency='INR') per_symbol=[PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1412, avg=1385.34, ltp=117.67, unrealized=-1789951.12, today_pnl=-1789951.12), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=1160, avg=1132.72, ltp=853.96, unrealized=323360.04, today_pnl=323360.04), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=791, avg=1735.92, ltp=1351.04, unrealized=-304439.34, today_pnl=-304439.34), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=1902, avg=1982.2, ltp=1039.48, unrealized=1793059.95, today_pnl=1793059.95), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=773, avg=1518.94, ltp=369.34, unrealized=-888641.63, today_pnl=-888641.63)] updated_at=datetime.datetime(2025, 8, 21, 17, 30, 16, 688813, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))) trading_day='2025-08-21'\n", "record": {"elapsed": {"repr": "0:00:20.357768", "seconds": 20.357768}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 584, "message": "Created PnL model: totals=PnLTotals(realized=0.0, unrealized=-866612.1, day=-866612.1, currency='INR') per_symbol=[PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1412, avg=1385.34, ltp=117.67, unrealized=-1789951.12, today_pnl=-1789951.12), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=1160, avg=1132.72, ltp=853.96, unrealized=323360.04, today_pnl=323360.04), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=791, avg=1735.92, ltp=1351.04, unrealized=-304439.34, today_pnl=-304439.34), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=1902, avg=1982.2, ltp=1039.48, unrealized=1793059.95, today_pnl=1793059.95), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=773, avg=1518.94, ltp=369.34, unrealized=-888641.63, today_pnl=-888641.63)] updated_at=datetime.datetime(2025, 8, 21, 17, 30, 16, 688813, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))) trading_day='2025-08-21'", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 21844, "name": "MainProcess"}, "thread": {"id": 24292, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:30:16.704947+05:30", "timestamp": 1755777616.704947}}}
{"text": "2025-08-21 17:30:16.707 | DEBUG    | app.services.dhan_client:get_pnl:585 - PnL model fields: {'totals': PnLTotals(realized=0.0, unrealized=-866612.1, day=-866612.1, currency='INR'), 'per_symbol': [PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1412, avg=1385.34, ltp=117.67, unrealized=-1789951.12, today_pnl=-1789951.12), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=1160, avg=1132.72, ltp=853.96, unrealized=323360.04, today_pnl=323360.04), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=791, avg=1735.92, ltp=1351.04, unrealized=-304439.34, today_pnl=-304439.34), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=1902, avg=1982.2, ltp=1039.48, unrealized=1793059.95, today_pnl=1793059.95), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=773, avg=1518.94, ltp=369.34, unrealized=-888641.63, today_pnl=-888641.63)], 'updated_at': datetime.datetime(2025, 8, 21, 17, 30, 16, 688813, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))), 'trading_day': '2025-08-21'}\n", "record": {"elapsed": {"repr": "0:00:20.360590", "seconds": 20.36059}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 585, "message": "PnL model fields: {'totals': PnLTotals(realized=0.0, unrealized=-866612.1, day=-866612.1, currency='INR'), 'per_symbol': [PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1412, avg=1385.34, ltp=117.67, unrealized=-1789951.12, today_pnl=-1789951.12), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=1160, avg=1132.72, ltp=853.96, unrealized=323360.04, today_pnl=323360.04), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=791, avg=1735.92, ltp=1351.04, unrealized=-304439.34, today_pnl=-304439.34), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=1902, avg=1982.2, ltp=1039.48, unrealized=1793059.95, today_pnl=1793059.95), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=773, avg=1518.94, ltp=369.34, unrealized=-888641.63, today_pnl=-888641.63)], 'updated_at': datetime.datetime(2025, 8, 21, 17, 30, 16, 688813, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))), 'trading_day': '2025-08-21'}", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 21844, "name": "MainProcess"}, "thread": {"id": 24292, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:30:16.707769+05:30", "timestamp": 1755777616.707769}}}
{"text": "2025-08-21 17:30:16.709 | INFO     | app.services.dhan_client:get_pnl:587 - P&L calculation completed successfully: 5 symbols, unrealized=‚Çπ-866612.10\n", "record": {"elapsed": {"repr": "0:00:20.362510", "seconds": 20.36251}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 587, "message": "P&L calculation completed successfully: 5 symbols, unrealized=‚Çπ-866612.10", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 21844, "name": "MainProcess"}, "thread": {"id": 24292, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:30:16.709689+05:30", "timestamp": 1755777616.709689}}}
{"text": "2025-08-21 17:30:16.711 | DEBUG    | app.ws.live:emit_delta:408 - Emitted pnl delta: seq=22\n", "record": {"elapsed": {"repr": "0:00:20.364143", "seconds": 20.364143}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "emit_delta", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 408, "message": "Emitted pnl delta: seq=22", "module": "live", "name": "app.ws.live", "process": {"id": 21844, "name": "MainProcess"}, "thread": {"id": 24292, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:30:16.711322+05:30", "timestamp": 1755777616.711322}}}
{"text": "2025-08-21 17:30:16.713 | DEBUG    | app.ws.live:emit_delta:408 - Emitted positions delta: seq=23\n", "record": {"elapsed": {"repr": "0:00:20.366199", "seconds": 20.366199}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "emit_delta", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 408, "message": "Emitted positions delta: seq=23", "module": "live", "name": "app.ws.live", "process": {"id": 21844, "name": "MainProcess"}, "thread": {"id": 24292, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:30:16.713378+05:30", "timestamp": 1755777616.713378}}}
{"text": "2025-08-21 17:30:18.400 | INFO     | app.services.dhan_client:get_pnl:489 - Starting accurate P&L calculation\n", "record": {"elapsed": {"repr": "0:00:22.053429", "seconds": 22.053429}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 489, "message": "Starting accurate P&L calculation", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 21844, "name": "MainProcess"}, "thread": {"id": 24292, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:30:18.400608+05:30", "timestamp": 1755777618.400608}}}
{"text": "2025-08-21 17:30:18.401 | INFO     | app.services.dhan_client:get_pnl:491 - Fetched 5 positions\n", "record": {"elapsed": {"repr": "0:00:22.054817", "seconds": 22.054817}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 491, "message": "Fetched 5 positions", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 21844, "name": "MainProcess"}, "thread": {"id": 24292, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:30:18.401996+05:30", "timestamp": 1755777618.401996}}}
{"text": "2025-08-21 17:30:18.403 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for RELIANCE: unrealized=-1789951.12, today=-1789951.12\n", "record": {"elapsed": {"repr": "0:00:22.056530", "seconds": 22.05653}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for RELIANCE: unrealized=-1789951.12, today=-1789951.12", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 21844, "name": "MainProcess"}, "thread": {"id": 24292, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:30:18.403709+05:30", "timestamp": 1755777618.403709}}}
{"text": "2025-08-21 17:30:18.405 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for TCS: unrealized=323360.04, today=323360.04\n", "record": {"elapsed": {"repr": "0:00:22.058144", "seconds": 22.058144}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for TCS: unrealized=323360.04, today=323360.04", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 21844, "name": "MainProcess"}, "thread": {"id": 24292, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:30:18.405323+05:30", "timestamp": 1755777618.405323}}}
{"text": "2025-08-21 17:30:18.407 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for HDFC: unrealized=-304439.34, today=-304439.34\n", "record": {"elapsed": {"repr": "0:00:22.060019", "seconds": 22.060019}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for HDFC: unrealized=-304439.34, today=-304439.34", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 21844, "name": "MainProcess"}, "thread": {"id": 24292, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:30:18.407198+05:30", "timestamp": 1755777618.407198}}}
{"text": "2025-08-21 17:30:18.408 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for INFY: unrealized=1793059.95, today=1793059.95\n", "record": {"elapsed": {"repr": "0:00:22.061734", "seconds": 22.061734}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for INFY: unrealized=1793059.95, today=1793059.95", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 21844, "name": "MainProcess"}, "thread": {"id": 24292, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:30:18.408913+05:30", "timestamp": 1755777618.408913}}}
{"text": "2025-08-21 17:30:18.410 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for ICICIBANK: unrealized=-888641.63, today=-888641.63\n", "record": {"elapsed": {"repr": "0:00:22.062973", "seconds": 22.062973}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for ICICIBANK: unrealized=-888641.63, today=-888641.63", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 21844, "name": "MainProcess"}, "thread": {"id": 24292, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:30:18.410152+05:30", "timestamp": 1755777618.410152}}}
{"text": "2025-08-21 17:30:18.412 | INFO     | app.services.dhan_client:get_pnl:545 - Calculated totals - realized: 0.0, unrealized: -866612.1, day: -866612.1\n", "record": {"elapsed": {"repr": "0:00:22.065031", "seconds": 22.065031}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 545, "message": "Calculated totals - realized: 0.0, unrealized: -866612.1, day: -866612.1", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 21844, "name": "MainProcess"}, "thread": {"id": 24292, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:30:18.412210+05:30", "timestamp": 1755777618.41221}}}
{"text": "2025-08-21 17:30:18.413 | DEBUG    | app.services.dhan_client:get_pnl:554 - PnL consistency check passed: drift=‚Çπ0.00\n", "record": {"elapsed": {"repr": "0:00:22.066085", "seconds": 22.066085}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 554, "message": "PnL consistency check passed: drift=‚Çπ0.00", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 21844, "name": "MainProcess"}, "thread": {"id": 24292, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:30:18.413264+05:30", "timestamp": 1755777618.413264}}}
{"text": "2025-08-21 17:30:18.414 | DEBUG    | app.services.dhan_client:get_pnl:558 - Creating PnLTotals...\n", "record": {"elapsed": {"repr": "0:00:22.067637", "seconds": 22.067637}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 558, "message": "Creating PnLTotals...", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 21844, "name": "MainProcess"}, "thread": {"id": 24292, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:30:18.414816+05:30", "timestamp": 1755777618.414816}}}
{"text": "2025-08-21 17:30:18.416 | DEBUG    | app.services.dhan_client:get_pnl:565 - PnLTotals created successfully\n", "record": {"elapsed": {"repr": "0:00:22.069006", "seconds": 22.069006}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 565, "message": "PnLTotals created successfully", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 21844, "name": "MainProcess"}, "thread": {"id": 24292, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:30:18.416185+05:30", "timestamp": 1755777618.416185}}}
{"text": "2025-08-21 17:30:18.417 | DEBUG    | app.services.dhan_client:get_pnl:574 - Creating PnL model...\n", "record": {"elapsed": {"repr": "0:00:22.070498", "seconds": 22.070498}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 574, "message": "Creating PnL model...", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 21844, "name": "MainProcess"}, "thread": {"id": 24292, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:30:18.417677+05:30", "timestamp": 1755777618.417677}}}
{"text": "2025-08-21 17:30:18.419 | DEBUG    | app.services.dhan_client:get_pnl:575 - Model fields: totals=<class 'app.models.schemas.PnLTotals'>, perSymbol=5, updated_at=2025-08-21 17:30:18.403474+05:30, trading_day=2025-08-21\n", "record": {"elapsed": {"repr": "0:00:22.072090", "seconds": 22.07209}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 575, "message": "Model fields: totals=<class 'app.models.schemas.PnLTotals'>, perSymbol=5, updated_at=2025-08-21 17:30:18.403474+05:30, trading_day=2025-08-21", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 21844, "name": "MainProcess"}, "thread": {"id": 24292, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:30:18.419269+05:30", "timestamp": 1755777618.419269}}}
{"text": "2025-08-21 17:30:18.423 | DEBUG    | app.services.dhan_client:get_pnl:584 - Created PnL model: totals=PnLTotals(realized=0.0, unrealized=-866612.1, day=-866612.1, currency='INR') per_symbol=[PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1412, avg=1385.34, ltp=117.67, unrealized=-1789951.12, today_pnl=-1789951.12), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=1160, avg=1132.72, ltp=853.96, unrealized=323360.04, today_pnl=323360.04), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=791, avg=1735.92, ltp=1351.04, unrealized=-304439.34, today_pnl=-304439.34), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=1902, avg=1982.2, ltp=1039.48, unrealized=1793059.95, today_pnl=1793059.95), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=773, avg=1518.94, ltp=369.34, unrealized=-888641.63, today_pnl=-888641.63)] updated_at=datetime.datetime(2025, 8, 21, 17, 30, 18, 403474, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))) trading_day='2025-08-21'\n", "record": {"elapsed": {"repr": "0:00:22.076442", "seconds": 22.076442}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 584, "message": "Created PnL model: totals=PnLTotals(realized=0.0, unrealized=-866612.1, day=-866612.1, currency='INR') per_symbol=[PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1412, avg=1385.34, ltp=117.67, unrealized=-1789951.12, today_pnl=-1789951.12), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=1160, avg=1132.72, ltp=853.96, unrealized=323360.04, today_pnl=323360.04), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=791, avg=1735.92, ltp=1351.04, unrealized=-304439.34, today_pnl=-304439.34), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=1902, avg=1982.2, ltp=1039.48, unrealized=1793059.95, today_pnl=1793059.95), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=773, avg=1518.94, ltp=369.34, unrealized=-888641.63, today_pnl=-888641.63)] updated_at=datetime.datetime(2025, 8, 21, 17, 30, 18, 403474, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))) trading_day='2025-08-21'", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 21844, "name": "MainProcess"}, "thread": {"id": 24292, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:30:18.423621+05:30", "timestamp": 1755777618.423621}}}
{"text": "2025-08-21 17:30:18.425 | DEBUG    | app.services.dhan_client:get_pnl:585 - PnL model fields: {'totals': PnLTotals(realized=0.0, unrealized=-866612.1, day=-866612.1, currency='INR'), 'per_symbol': [PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1412, avg=1385.34, ltp=117.67, unrealized=-1789951.12, today_pnl=-1789951.12), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=1160, avg=1132.72, ltp=853.96, unrealized=323360.04, today_pnl=323360.04), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=791, avg=1735.92, ltp=1351.04, unrealized=-304439.34, today_pnl=-304439.34), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=1902, avg=1982.2, ltp=1039.48, unrealized=1793059.95, today_pnl=1793059.95), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=773, avg=1518.94, ltp=369.34, unrealized=-888641.63, today_pnl=-888641.63)], 'updated_at': datetime.datetime(2025, 8, 21, 17, 30, 18, 403474, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))), 'trading_day': '2025-08-21'}\n", "record": {"elapsed": {"repr": "0:00:22.078793", "seconds": 22.078793}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 585, "message": "PnL model fields: {'totals': PnLTotals(realized=0.0, unrealized=-866612.1, day=-866612.1, currency='INR'), 'per_symbol': [PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1412, avg=1385.34, ltp=117.67, unrealized=-1789951.12, today_pnl=-1789951.12), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=1160, avg=1132.72, ltp=853.96, unrealized=323360.04, today_pnl=323360.04), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=791, avg=1735.92, ltp=1351.04, unrealized=-304439.34, today_pnl=-304439.34), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=1902, avg=1982.2, ltp=1039.48, unrealized=1793059.95, today_pnl=1793059.95), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=773, avg=1518.94, ltp=369.34, unrealized=-888641.63, today_pnl=-888641.63)], 'updated_at': datetime.datetime(2025, 8, 21, 17, 30, 18, 403474, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))), 'trading_day': '2025-08-21'}", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 21844, "name": "MainProcess"}, "thread": {"id": 24292, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:30:18.425972+05:30", "timestamp": 1755777618.425972}}}
{"text": "2025-08-21 17:30:18.428 | INFO     | app.services.dhan_client:get_pnl:587 - P&L calculation completed successfully: 5 symbols, unrealized=‚Çπ-866612.10\n", "record": {"elapsed": {"repr": "0:00:22.081528", "seconds": 22.081528}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 587, "message": "P&L calculation completed successfully: 5 symbols, unrealized=‚Çπ-866612.10", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 21844, "name": "MainProcess"}, "thread": {"id": 24292, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:30:18.428707+05:30", "timestamp": 1755777618.428707}}}
{"text": "2025-08-21 17:30:18.430 | DEBUG    | app.ws.live:emit_delta:408 - Emitted pnl delta: seq=24\n", "record": {"elapsed": {"repr": "0:00:22.083335", "seconds": 22.083335}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "emit_delta", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 408, "message": "Emitted pnl delta: seq=24", "module": "live", "name": "app.ws.live", "process": {"id": 21844, "name": "MainProcess"}, "thread": {"id": 24292, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:30:18.430514+05:30", "timestamp": 1755777618.430514}}}
{"text": "2025-08-21 17:30:18.634 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:22.287013", "seconds": 22.287013}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 21844, "name": "MainProcess"}, "thread": {"id": 4252, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 17:30:18.634192+05:30", "timestamp": 1755777618.634192}}}
{"text": "2025-08-21 17:30:18.635 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:22.288331", "seconds": 22.288331}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 21844, "name": "MainProcess"}, "thread": {"id": 4252, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 17:30:18.635510+05:30", "timestamp": 1755777618.63551}}}
{"text": "2025-08-21 17:30:18.636 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:22.289583", "seconds": 22.289583}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 21844, "name": "MainProcess"}, "thread": {"id": 4252, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 17:30:18.636762+05:30", "timestamp": 1755777618.636762}}}
{"text": "2025-08-21 17:30:18.637 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:22.290719", "seconds": 22.290719}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 21844, "name": "MainProcess"}, "thread": {"id": 4252, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 17:30:18.637898+05:30", "timestamp": 1755777618.637898}}}
{"text": "2025-08-21 17:30:18.639 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:22.291931", "seconds": 22.291931}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 21844, "name": "MainProcess"}, "thread": {"id": 4252, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 17:30:18.639110+05:30", "timestamp": 1755777618.63911}}}
{"text": "2025-08-21 17:30:18.640 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:22.293287", "seconds": 22.293287}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 21844, "name": "MainProcess"}, "thread": {"id": 4252, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 17:30:18.640466+05:30", "timestamp": 1755777618.640466}}}
{"text": "2025-08-21 17:30:18.641 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:22.294735", "seconds": 22.294735}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 21844, "name": "MainProcess"}, "thread": {"id": 4252, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 17:30:18.641914+05:30", "timestamp": 1755777618.641914}}}
{"text": "2025-08-21 17:30:18.643 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:22.296399", "seconds": 22.296399}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 21844, "name": "MainProcess"}, "thread": {"id": 4252, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 17:30:18.643578+05:30", "timestamp": 1755777618.643578}}}
{"text": "2025-08-21 17:30:18.644 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:22.297681", "seconds": 22.297681}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 21844, "name": "MainProcess"}, "thread": {"id": 4252, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 17:30:18.644860+05:30", "timestamp": 1755777618.64486}}}
{"text": "2025-08-21 17:30:18.645 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:22.298738", "seconds": 22.298738}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 21844, "name": "MainProcess"}, "thread": {"id": 4252, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 17:30:18.645917+05:30", "timestamp": 1755777618.645917}}}
{"text": "2025-08-21 17:30:19.978 | INFO     | app.services.dhan_client:get_pnl:489 - Starting accurate P&L calculation\n", "record": {"elapsed": {"repr": "0:00:23.631004", "seconds": 23.631004}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 489, "message": "Starting accurate P&L calculation", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 21844, "name": "MainProcess"}, "thread": {"id": 24292, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:30:19.978183+05:30", "timestamp": 1755777619.978183}}}
{"text": "2025-08-21 17:30:19.979 | INFO     | app.services.dhan_client:get_pnl:491 - Fetched 5 positions\n", "record": {"elapsed": {"repr": "0:00:23.632737", "seconds": 23.632737}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 491, "message": "Fetched 5 positions", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 21844, "name": "MainProcess"}, "thread": {"id": 24292, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:30:19.979916+05:30", "timestamp": 1755777619.979916}}}
{"text": "2025-08-21 17:30:19.981 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for RELIANCE: unrealized=-1789102.8, today=-1789102.8\n", "record": {"elapsed": {"repr": "0:00:23.634275", "seconds": 23.634275}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for RELIANCE: unrealized=-1789102.8, today=-1789102.8", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 21844, "name": "MainProcess"}, "thread": {"id": 24292, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:30:19.981454+05:30", "timestamp": 1755777619.981454}}}
{"text": "2025-08-21 17:30:19.982 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for TCS: unrealized=305505.08, today=305505.08\n", "record": {"elapsed": {"repr": "0:00:23.635668", "seconds": 23.635668}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for TCS: unrealized=305505.08, today=305505.08", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 21844, "name": "MainProcess"}, "thread": {"id": 24292, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:30:19.982847+05:30", "timestamp": 1755777619.982847}}}
{"text": "2025-08-21 17:30:19.984 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for HDFC: unrealized=-323719.93, today=-323719.93\n", "record": {"elapsed": {"repr": "0:00:23.637330", "seconds": 23.63733}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for HDFC: unrealized=-323719.93, today=-323719.93", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 21844, "name": "MainProcess"}, "thread": {"id": 24292, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:30:19.984509+05:30", "timestamp": 1755777619.984509}}}
{"text": "2025-08-21 17:30:19.985 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for INFY: unrealized=1756335.56, today=1756335.56\n", "record": {"elapsed": {"repr": "0:00:23.638819", "seconds": 23.638819}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for INFY: unrealized=1756335.56, today=1756335.56", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 21844, "name": "MainProcess"}, "thread": {"id": 24292, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:30:19.985998+05:30", "timestamp": 1755777619.985998}}}
{"text": "2025-08-21 17:30:19.987 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for ICICIBANK: unrealized=-883979.4, today=-883979.4\n", "record": {"elapsed": {"repr": "0:00:23.640500", "seconds": 23.6405}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for ICICIBANK: unrealized=-883979.4, today=-883979.4", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 21844, "name": "MainProcess"}, "thread": {"id": 24292, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:30:19.987679+05:30", "timestamp": 1755777619.987679}}}
{"text": "2025-08-21 17:30:19.989 | INFO     | app.services.dhan_client:get_pnl:545 - Calculated totals - realized: 0.0, unrealized: -934961.49, day: -934961.49\n", "record": {"elapsed": {"repr": "0:00:23.642598", "seconds": 23.642598}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 545, "message": "Calculated totals - realized: 0.0, unrealized: -934961.49, day: -934961.49", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 21844, "name": "MainProcess"}, "thread": {"id": 24292, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:30:19.989777+05:30", "timestamp": 1755777619.989777}}}
{"text": "2025-08-21 17:30:19.991 | DEBUG    | app.services.dhan_client:get_pnl:554 - PnL consistency check passed: drift=‚Çπ0.00\n", "record": {"elapsed": {"repr": "0:00:23.643946", "seconds": 23.643946}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 554, "message": "PnL consistency check passed: drift=‚Çπ0.00", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 21844, "name": "MainProcess"}, "thread": {"id": 24292, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:30:19.991125+05:30", "timestamp": 1755777619.991125}}}
{"text": "2025-08-21 17:30:19.992 | DEBUG    | app.services.dhan_client:get_pnl:558 - Creating PnLTotals...\n", "record": {"elapsed": {"repr": "0:00:23.645369", "seconds": 23.645369}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 558, "message": "Creating PnLTotals...", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 21844, "name": "MainProcess"}, "thread": {"id": 24292, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:30:19.992548+05:30", "timestamp": 1755777619.992548}}}
{"text": "2025-08-21 17:30:19.993 | DEBUG    | app.services.dhan_client:get_pnl:565 - PnLTotals created successfully\n", "record": {"elapsed": {"repr": "0:00:23.646814", "seconds": 23.646814}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 565, "message": "PnLTotals created successfully", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 21844, "name": "MainProcess"}, "thread": {"id": 24292, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:30:19.993993+05:30", "timestamp": 1755777619.993993}}}
{"text": "2025-08-21 17:30:19.995 | DEBUG    | app.services.dhan_client:get_pnl:574 - Creating PnL model...\n", "record": {"elapsed": {"repr": "0:00:23.648031", "seconds": 23.648031}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 574, "message": "Creating PnL model...", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 21844, "name": "MainProcess"}, "thread": {"id": 24292, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:30:19.995210+05:30", "timestamp": 1755777619.99521}}}
{"text": "2025-08-21 17:30:19.996 | DEBUG    | app.services.dhan_client:get_pnl:575 - Model fields: totals=<class 'app.models.schemas.PnLTotals'>, perSymbol=5, updated_at=2025-08-21 17:30:19.981207+05:30, trading_day=2025-08-21\n", "record": {"elapsed": {"repr": "0:00:23.649119", "seconds": 23.649119}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 575, "message": "Model fields: totals=<class 'app.models.schemas.PnLTotals'>, perSymbol=5, updated_at=2025-08-21 17:30:19.981207+05:30, trading_day=2025-08-21", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 21844, "name": "MainProcess"}, "thread": {"id": 24292, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:30:19.996298+05:30", "timestamp": 1755777619.996298}}}
{"text": "2025-08-21 17:30:19.997 | DEBUG    | app.services.dhan_client:get_pnl:584 - Created PnL model: totals=PnLTotals(realized=0.0, unrealized=-934961.49, day=-934961.49, currency='INR') per_symbol=[PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1412, avg=1385.34, ltp=118.27, unrealized=-1789102.8, today_pnl=-1789102.8), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=1160, avg=1132.72, ltp=869.35, unrealized=305505.08, today_pnl=305505.08), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=791, avg=1735.92, ltp=1326.67, unrealized=-323719.93, today_pnl=-323719.93), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=1902, avg=1982.2, ltp=1058.78, unrealized=1756335.56, today_pnl=1756335.56), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=773, avg=1518.94, ltp=375.37, unrealized=-883979.4, today_pnl=-883979.4)] updated_at=datetime.datetime(2025, 8, 21, 17, 30, 19, 981207, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))) trading_day='2025-08-21'\n", "record": {"elapsed": {"repr": "0:00:23.650640", "seconds": 23.65064}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 584, "message": "Created PnL model: totals=PnLTotals(realized=0.0, unrealized=-934961.49, day=-934961.49, currency='INR') per_symbol=[PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1412, avg=1385.34, ltp=118.27, unrealized=-1789102.8, today_pnl=-1789102.8), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=1160, avg=1132.72, ltp=869.35, unrealized=305505.08, today_pnl=305505.08), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=791, avg=1735.92, ltp=1326.67, unrealized=-323719.93, today_pnl=-323719.93), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=1902, avg=1982.2, ltp=1058.78, unrealized=1756335.56, today_pnl=1756335.56), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=773, avg=1518.94, ltp=375.37, unrealized=-883979.4, today_pnl=-883979.4)] updated_at=datetime.datetime(2025, 8, 21, 17, 30, 19, 981207, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))) trading_day='2025-08-21'", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 21844, "name": "MainProcess"}, "thread": {"id": 24292, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:30:19.997819+05:30", "timestamp": 1755777619.997819}}}
{"text": "2025-08-21 17:30:20.000 | DEBUG    | app.services.dhan_client:get_pnl:585 - PnL model fields: {'totals': PnLTotals(realized=0.0, unrealized=-934961.49, day=-934961.49, currency='INR'), 'per_symbol': [PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1412, avg=1385.34, ltp=118.27, unrealized=-1789102.8, today_pnl=-1789102.8), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=1160, avg=1132.72, ltp=869.35, unrealized=305505.08, today_pnl=305505.08), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=791, avg=1735.92, ltp=1326.67, unrealized=-323719.93, today_pnl=-323719.93), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=1902, avg=1982.2, ltp=1058.78, unrealized=1756335.56, today_pnl=1756335.56), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=773, avg=1518.94, ltp=375.37, unrealized=-883979.4, today_pnl=-883979.4)], 'updated_at': datetime.datetime(2025, 8, 21, 17, 30, 19, 981207, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))), 'trading_day': '2025-08-21'}\n", "record": {"elapsed": {"repr": "0:00:23.653098", "seconds": 23.653098}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 585, "message": "PnL model fields: {'totals': PnLTotals(realized=0.0, unrealized=-934961.49, day=-934961.49, currency='INR'), 'per_symbol': [PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1412, avg=1385.34, ltp=118.27, unrealized=-1789102.8, today_pnl=-1789102.8), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=1160, avg=1132.72, ltp=869.35, unrealized=305505.08, today_pnl=305505.08), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=791, avg=1735.92, ltp=1326.67, unrealized=-323719.93, today_pnl=-323719.93), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=1902, avg=1982.2, ltp=1058.78, unrealized=1756335.56, today_pnl=1756335.56), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=773, avg=1518.94, ltp=375.37, unrealized=-883979.4, today_pnl=-883979.4)], 'updated_at': datetime.datetime(2025, 8, 21, 17, 30, 19, 981207, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))), 'trading_day': '2025-08-21'}", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 21844, "name": "MainProcess"}, "thread": {"id": 24292, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:30:20.000277+05:30", "timestamp": 1755777620.000277}}}
{"text": "2025-08-21 17:30:20.002 | INFO     | app.services.dhan_client:get_pnl:587 - P&L calculation completed successfully: 5 symbols, unrealized=‚Çπ-934961.49\n", "record": {"elapsed": {"repr": "0:00:23.654956", "seconds": 23.654956}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 587, "message": "P&L calculation completed successfully: 5 symbols, unrealized=‚Çπ-934961.49", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 21844, "name": "MainProcess"}, "thread": {"id": 24292, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:30:20.002135+05:30", "timestamp": 1755777620.002135}}}
{"text": "2025-08-21 17:30:20.003 | DEBUG    | app.ws.live:emit_delta:408 - Emitted pnl delta: seq=25\n", "record": {"elapsed": {"repr": "0:00:23.656523", "seconds": 23.656523}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "emit_delta", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 408, "message": "Emitted pnl delta: seq=25", "module": "live", "name": "app.ws.live", "process": {"id": 21844, "name": "MainProcess"}, "thread": {"id": 24292, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:30:20.003702+05:30", "timestamp": 1755777620.003702}}}
{"text": "2025-08-21 17:30:20.005 | DEBUG    | app.ws.live:emit_delta:408 - Emitted positions delta: seq=26\n", "record": {"elapsed": {"repr": "0:00:23.658302", "seconds": 23.658302}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "emit_delta", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 408, "message": "Emitted positions delta: seq=26", "module": "live", "name": "app.ws.live", "process": {"id": 21844, "name": "MainProcess"}, "thread": {"id": 24292, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:30:20.005481+05:30", "timestamp": 1755777620.005481}}}
{"text": "2025-08-21 17:30:20.647 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:24.300233", "seconds": 24.300233}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 21844, "name": "MainProcess"}, "thread": {"id": 4252, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 17:30:20.647412+05:30", "timestamp": 1755777620.647412}}}
{"text": "2025-08-21 17:30:20.648 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:24.301649", "seconds": 24.301649}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 21844, "name": "MainProcess"}, "thread": {"id": 4252, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 17:30:20.648828+05:30", "timestamp": 1755777620.648828}}}
{"text": "2025-08-21 17:30:20.650 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:24.302826", "seconds": 24.302826}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 21844, "name": "MainProcess"}, "thread": {"id": 4252, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 17:30:20.650005+05:30", "timestamp": 1755777620.650005}}}
{"text": "2025-08-21 17:30:20.651 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:24.304390", "seconds": 24.30439}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 21844, "name": "MainProcess"}, "thread": {"id": 4252, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 17:30:20.651569+05:30", "timestamp": 1755777620.651569}}}
{"text": "2025-08-21 17:30:20.652 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:24.305424", "seconds": 24.305424}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 21844, "name": "MainProcess"}, "thread": {"id": 4252, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 17:30:20.652603+05:30", "timestamp": 1755777620.652603}}}
{"text": "2025-08-21 17:30:20.654 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:24.307021", "seconds": 24.307021}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 21844, "name": "MainProcess"}, "thread": {"id": 4252, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 17:30:20.654200+05:30", "timestamp": 1755777620.6542}}}
{"text": "2025-08-21 17:30:20.655 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:24.308519", "seconds": 24.308519}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 21844, "name": "MainProcess"}, "thread": {"id": 4252, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 17:30:20.655698+05:30", "timestamp": 1755777620.655698}}}
{"text": "2025-08-21 17:30:20.656 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:24.309817", "seconds": 24.309817}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 21844, "name": "MainProcess"}, "thread": {"id": 4252, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 17:30:20.656996+05:30", "timestamp": 1755777620.656996}}}
{"text": "2025-08-21 17:30:20.658 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:24.311017", "seconds": 24.311017}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 21844, "name": "MainProcess"}, "thread": {"id": 4252, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 17:30:20.658196+05:30", "timestamp": 1755777620.658196}}}
{"text": "2025-08-21 17:30:20.659 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:24.312367", "seconds": 24.312367}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 21844, "name": "MainProcess"}, "thread": {"id": 4252, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 17:30:20.659546+05:30", "timestamp": 1755777620.659546}}}
{"text": "2025-08-21 17:30:21.831 | INFO     | app.services.dhan_client:get_pnl:489 - Starting accurate P&L calculation\n", "record": {"elapsed": {"repr": "0:00:25.484182", "seconds": 25.484182}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 489, "message": "Starting accurate P&L calculation", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 21844, "name": "MainProcess"}, "thread": {"id": 24292, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:30:21.831361+05:30", "timestamp": 1755777621.831361}}}
{"text": "2025-08-21 17:30:21.832 | INFO     | app.services.dhan_client:get_pnl:491 - Fetched 5 positions\n", "record": {"elapsed": {"repr": "0:00:25.485241", "seconds": 25.485241}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 491, "message": "Fetched 5 positions", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 21844, "name": "MainProcess"}, "thread": {"id": 24292, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:30:21.832420+05:30", "timestamp": 1755777621.83242}}}
{"text": "2025-08-21 17:30:21.833 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for RELIANCE: unrealized=-1792119.69, today=-1792119.69\n", "record": {"elapsed": {"repr": "0:00:25.486133", "seconds": 25.486133}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for RELIANCE: unrealized=-1792119.69, today=-1792119.69", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 21844, "name": "MainProcess"}, "thread": {"id": 24292, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:30:21.833312+05:30", "timestamp": 1755777621.833312}}}
{"text": "2025-08-21 17:30:21.834 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for TCS: unrealized=298717.96, today=298717.96\n", "record": {"elapsed": {"repr": "0:00:25.486950", "seconds": 25.48695}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for TCS: unrealized=298717.96, today=298717.96", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 21844, "name": "MainProcess"}, "thread": {"id": 24292, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:30:21.834129+05:30", "timestamp": 1755777621.834129}}}
{"text": "2025-08-21 17:30:21.835 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for HDFC: unrealized=-311704.63, today=-311704.63\n", "record": {"elapsed": {"repr": "0:00:25.488299", "seconds": 25.488299}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for HDFC: unrealized=-311704.63, today=-311704.63", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 21844, "name": "MainProcess"}, "thread": {"id": 24292, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:30:21.835478+05:30", "timestamp": 1755777621.835478}}}
{"text": "2025-08-21 17:30:21.837 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for INFY: unrealized=1795536.8, today=1795536.8\n", "record": {"elapsed": {"repr": "0:00:25.489823", "seconds": 25.489823}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for INFY: unrealized=1795536.8, today=1795536.8", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 21844, "name": "MainProcess"}, "thread": {"id": 24292, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:30:21.837002+05:30", "timestamp": 1755777621.837002}}}
{"text": "2025-08-21 17:30:21.838 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for ICICIBANK: unrealized=-885315.8, today=-885315.8\n", "record": {"elapsed": {"repr": "0:00:25.491771", "seconds": 25.491771}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for ICICIBANK: unrealized=-885315.8, today=-885315.8", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 21844, "name": "MainProcess"}, "thread": {"id": 24292, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:30:21.838950+05:30", "timestamp": 1755777621.83895}}}
{"text": "2025-08-21 17:30:21.841 | INFO     | app.services.dhan_client:get_pnl:545 - Calculated totals - realized: 0.0, unrealized: -894885.36, day: -894885.36\n", "record": {"elapsed": {"repr": "0:00:25.493949", "seconds": 25.493949}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 545, "message": "Calculated totals - realized: 0.0, unrealized: -894885.36, day: -894885.36", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 21844, "name": "MainProcess"}, "thread": {"id": 24292, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:30:21.841128+05:30", "timestamp": 1755777621.841128}}}
{"text": "2025-08-21 17:30:21.842 | DEBUG    | app.services.dhan_client:get_pnl:554 - PnL consistency check passed: drift=‚Çπ0.00\n", "record": {"elapsed": {"repr": "0:00:25.494964", "seconds": 25.494964}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 554, "message": "PnL consistency check passed: drift=‚Çπ0.00", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 21844, "name": "MainProcess"}, "thread": {"id": 24292, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:30:21.842143+05:30", "timestamp": 1755777621.842143}}}
{"text": "2025-08-21 17:30:21.843 | DEBUG    | app.services.dhan_client:get_pnl:558 - Creating PnLTotals...\n", "record": {"elapsed": {"repr": "0:00:25.495871", "seconds": 25.495871}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 558, "message": "Creating PnLTotals...", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 21844, "name": "MainProcess"}, "thread": {"id": 24292, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:30:21.843050+05:30", "timestamp": 1755777621.84305}}}
{"text": "2025-08-21 17:30:21.844 | DEBUG    | app.services.dhan_client:get_pnl:565 - PnLTotals created successfully\n", "record": {"elapsed": {"repr": "0:00:25.496883", "seconds": 25.496883}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 565, "message": "PnLTotals created successfully", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 21844, "name": "MainProcess"}, "thread": {"id": 24292, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:30:21.844062+05:30", "timestamp": 1755777621.844062}}}
{"text": "2025-08-21 17:30:21.845 | DEBUG    | app.services.dhan_client:get_pnl:574 - Creating PnL model...\n", "record": {"elapsed": {"repr": "0:00:25.497987", "seconds": 25.497987}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 574, "message": "Creating PnL model...", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 21844, "name": "MainProcess"}, "thread": {"id": 24292, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:30:21.845166+05:30", "timestamp": 1755777621.845166}}}
{"text": "2025-08-21 17:30:21.846 | DEBUG    | app.services.dhan_client:get_pnl:575 - Model fields: totals=<class 'app.models.schemas.PnLTotals'>, perSymbol=5, updated_at=2025-08-21 17:30:21.833210+05:30, trading_day=2025-08-21\n", "record": {"elapsed": {"repr": "0:00:25.499650", "seconds": 25.49965}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 575, "message": "Model fields: totals=<class 'app.models.schemas.PnLTotals'>, perSymbol=5, updated_at=2025-08-21 17:30:21.833210+05:30, trading_day=2025-08-21", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 21844, "name": "MainProcess"}, "thread": {"id": 24292, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:30:21.846829+05:30", "timestamp": 1755777621.846829}}}
{"text": "2025-08-21 17:30:21.848 | DEBUG    | app.services.dhan_client:get_pnl:584 - Created PnL model: totals=PnLTotals(realized=0.0, unrealized=-894885.36, day=-894885.36, currency='INR') per_symbol=[PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1412, avg=1385.34, ltp=116.13, unrealized=-1792119.69, today_pnl=-1792119.69), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=1160, avg=1132.72, ltp=875.2, unrealized=298717.96, today_pnl=298717.96), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=791, avg=1735.92, ltp=1341.86, unrealized=-311704.63, today_pnl=-311704.63), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=1902, avg=1982.2, ltp=1038.17, unrealized=1795536.8, today_pnl=1795536.8), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=773, avg=1518.94, ltp=373.64, unrealized=-885315.8, today_pnl=-885315.8)] updated_at=datetime.datetime(2025, 8, 21, 17, 30, 21, 833210, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))) trading_day='2025-08-21'\n", "record": {"elapsed": {"repr": "0:00:25.501790", "seconds": 25.50179}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 584, "message": "Created PnL model: totals=PnLTotals(realized=0.0, unrealized=-894885.36, day=-894885.36, currency='INR') per_symbol=[PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1412, avg=1385.34, ltp=116.13, unrealized=-1792119.69, today_pnl=-1792119.69), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=1160, avg=1132.72, ltp=875.2, unrealized=298717.96, today_pnl=298717.96), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=791, avg=1735.92, ltp=1341.86, unrealized=-311704.63, today_pnl=-311704.63), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=1902, avg=1982.2, ltp=1038.17, unrealized=1795536.8, today_pnl=1795536.8), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=773, avg=1518.94, ltp=373.64, unrealized=-885315.8, today_pnl=-885315.8)] updated_at=datetime.datetime(2025, 8, 21, 17, 30, 21, 833210, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))) trading_day='2025-08-21'", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 21844, "name": "MainProcess"}, "thread": {"id": 24292, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:30:21.848969+05:30", "timestamp": 1755777621.848969}}}
{"text": "2025-08-21 17:30:21.851 | DEBUG    | app.services.dhan_client:get_pnl:585 - PnL model fields: {'totals': PnLTotals(realized=0.0, unrealized=-894885.36, day=-894885.36, currency='INR'), 'per_symbol': [PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1412, avg=1385.34, ltp=116.13, unrealized=-1792119.69, today_pnl=-1792119.69), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=1160, avg=1132.72, ltp=875.2, unrealized=298717.96, today_pnl=298717.96), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=791, avg=1735.92, ltp=1341.86, unrealized=-311704.63, today_pnl=-311704.63), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=1902, avg=1982.2, ltp=1038.17, unrealized=1795536.8, today_pnl=1795536.8), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=773, avg=1518.94, ltp=373.64, unrealized=-885315.8, today_pnl=-885315.8)], 'updated_at': datetime.datetime(2025, 8, 21, 17, 30, 21, 833210, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))), 'trading_day': '2025-08-21'}\n", "record": {"elapsed": {"repr": "0:00:25.504055", "seconds": 25.504055}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 585, "message": "PnL model fields: {'totals': PnLTotals(realized=0.0, unrealized=-894885.36, day=-894885.36, currency='INR'), 'per_symbol': [PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1412, avg=1385.34, ltp=116.13, unrealized=-1792119.69, today_pnl=-1792119.69), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=1160, avg=1132.72, ltp=875.2, unrealized=298717.96, today_pnl=298717.96), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=791, avg=1735.92, ltp=1341.86, unrealized=-311704.63, today_pnl=-311704.63), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=1902, avg=1982.2, ltp=1038.17, unrealized=1795536.8, today_pnl=1795536.8), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=773, avg=1518.94, ltp=373.64, unrealized=-885315.8, today_pnl=-885315.8)], 'updated_at': datetime.datetime(2025, 8, 21, 17, 30, 21, 833210, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))), 'trading_day': '2025-08-21'}", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 21844, "name": "MainProcess"}, "thread": {"id": 24292, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:30:21.851234+05:30", "timestamp": 1755777621.851234}}}
{"text": "2025-08-21 17:30:21.852 | INFO     | app.services.dhan_client:get_pnl:587 - P&L calculation completed successfully: 5 symbols, unrealized=‚Çπ-894885.36\n", "record": {"elapsed": {"repr": "0:00:25.505422", "seconds": 25.505422}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 587, "message": "P&L calculation completed successfully: 5 symbols, unrealized=‚Çπ-894885.36", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 21844, "name": "MainProcess"}, "thread": {"id": 24292, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:30:21.852601+05:30", "timestamp": 1755777621.852601}}}
{"text": "2025-08-21 17:30:21.856 | DEBUG    | app.ws.live:emit_delta:408 - Emitted pnl delta: seq=27\n", "record": {"elapsed": {"repr": "0:00:25.508944", "seconds": 25.508944}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "emit_delta", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 408, "message": "Emitted pnl delta: seq=27", "module": "live", "name": "app.ws.live", "process": {"id": 21844, "name": "MainProcess"}, "thread": {"id": 24292, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:30:21.856123+05:30", "timestamp": 1755777621.856123}}}
{"text": "2025-08-21 17:30:21.858 | DEBUG    | app.ws.live:emit_delta:408 - Emitted positions delta: seq=28\n", "record": {"elapsed": {"repr": "0:00:25.511568", "seconds": 25.511568}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "emit_delta", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 408, "message": "Emitted positions delta: seq=28", "module": "live", "name": "app.ws.live", "process": {"id": 21844, "name": "MainProcess"}, "thread": {"id": 24292, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:30:21.858747+05:30", "timestamp": 1755777621.858747}}}
{"text": "2025-08-21 17:30:21.860 | DEBUG    | app.ws.live:emit_delta:408 - Emitted holdings delta: seq=29\n", "record": {"elapsed": {"repr": "0:00:25.513819", "seconds": 25.513819}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "emit_delta", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 408, "message": "Emitted holdings delta: seq=29", "module": "live", "name": "app.ws.live", "process": {"id": 21844, "name": "MainProcess"}, "thread": {"id": 24292, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:30:21.860998+05:30", "timestamp": 1755777621.860998}}}
{"text": "2025-08-21 17:30:22.661 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:26.314294", "seconds": 26.314294}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 21844, "name": "MainProcess"}, "thread": {"id": 4252, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 17:30:22.661473+05:30", "timestamp": 1755777622.661473}}}
{"text": "2025-08-21 17:30:22.663 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:26.316146", "seconds": 26.316146}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 21844, "name": "MainProcess"}, "thread": {"id": 4252, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 17:30:22.663325+05:30", "timestamp": 1755777622.663325}}}
{"text": "2025-08-21 17:30:22.664 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:26.317460", "seconds": 26.31746}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 21844, "name": "MainProcess"}, "thread": {"id": 4252, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 17:30:22.664639+05:30", "timestamp": 1755777622.664639}}}
{"text": "2025-08-21 17:30:22.666 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:26.319111", "seconds": 26.319111}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 21844, "name": "MainProcess"}, "thread": {"id": 4252, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 17:30:22.666290+05:30", "timestamp": 1755777622.66629}}}
{"text": "2025-08-21 17:30:22.667 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:26.320372", "seconds": 26.320372}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 21844, "name": "MainProcess"}, "thread": {"id": 4252, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 17:30:22.667551+05:30", "timestamp": 1755777622.667551}}}
{"text": "2025-08-21 17:30:22.669 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:26.322363", "seconds": 26.322363}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 21844, "name": "MainProcess"}, "thread": {"id": 4252, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 17:30:22.669542+05:30", "timestamp": 1755777622.669542}}}
{"text": "2025-08-21 17:30:22.671 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:26.324172", "seconds": 26.324172}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 21844, "name": "MainProcess"}, "thread": {"id": 4252, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 17:30:22.671351+05:30", "timestamp": 1755777622.671351}}}
{"text": "2025-08-21 17:30:22.672 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:26.325560", "seconds": 26.32556}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 21844, "name": "MainProcess"}, "thread": {"id": 4252, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 17:30:22.672739+05:30", "timestamp": 1755777622.672739}}}
{"text": "2025-08-21 17:30:22.674 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:26.326932", "seconds": 26.326932}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 21844, "name": "MainProcess"}, "thread": {"id": 4252, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 17:30:22.674111+05:30", "timestamp": 1755777622.674111}}}
{"text": "2025-08-21 17:30:22.675 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:26.328313", "seconds": 26.328313}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 21844, "name": "MainProcess"}, "thread": {"id": 4252, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 17:30:22.675492+05:30", "timestamp": 1755777622.675492}}}
{"text": "2025-08-21 17:30:23.617 | INFO     | app.services.dhan_client:get_pnl:489 - Starting accurate P&L calculation\n", "record": {"elapsed": {"repr": "0:00:27.269824", "seconds": 27.269824}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 489, "message": "Starting accurate P&L calculation", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 21844, "name": "MainProcess"}, "thread": {"id": 24292, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:30:23.617003+05:30", "timestamp": 1755777623.617003}}}
{"text": "2025-08-21 17:30:23.618 | INFO     | app.services.dhan_client:get_pnl:491 - Fetched 5 positions\n", "record": {"elapsed": {"repr": "0:00:27.271058", "seconds": 27.271058}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 491, "message": "Fetched 5 positions", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 21844, "name": "MainProcess"}, "thread": {"id": 24292, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:30:23.618237+05:30", "timestamp": 1755777623.618237}}}
{"text": "2025-08-21 17:30:23.621 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for RELIANCE: unrealized=-1792346.1, today=-1792346.1\n", "record": {"elapsed": {"repr": "0:00:27.274045", "seconds": 27.274045}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for RELIANCE: unrealized=-1792346.1, today=-1792346.1", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 21844, "name": "MainProcess"}, "thread": {"id": 24292, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:30:23.621224+05:30", "timestamp": 1755777623.621224}}}
{"text": "2025-08-21 17:30:23.622 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for TCS: unrealized=312219.51, today=312219.51\n", "record": {"elapsed": {"repr": "0:00:27.275493", "seconds": 27.275493}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for TCS: unrealized=312219.51, today=312219.51", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 21844, "name": "MainProcess"}, "thread": {"id": 24292, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:30:23.622672+05:30", "timestamp": 1755777623.622672}}}
{"text": "2025-08-21 17:30:23.624 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for HDFC: unrealized=-329237.5, today=-329237.5\n", "record": {"elapsed": {"repr": "0:00:27.277143", "seconds": 27.277143}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for HDFC: unrealized=-329237.5, today=-329237.5", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 21844, "name": "MainProcess"}, "thread": {"id": 24292, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:30:23.624322+05:30", "timestamp": 1755777623.624322}}}
{"text": "2025-08-21 17:30:23.625 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for INFY: unrealized=1828186.88, today=1828186.88\n", "record": {"elapsed": {"repr": "0:00:27.278645", "seconds": 27.278645}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for INFY: unrealized=1828186.88, today=1828186.88", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 21844, "name": "MainProcess"}, "thread": {"id": 24292, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:30:23.625824+05:30", "timestamp": 1755777623.625824}}}
{"text": "2025-08-21 17:30:23.627 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for ICICIBANK: unrealized=-883283.11, today=-883283.11\n", "record": {"elapsed": {"repr": "0:00:27.279916", "seconds": 27.279916}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for ICICIBANK: unrealized=-883283.11, today=-883283.11", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 21844, "name": "MainProcess"}, "thread": {"id": 24292, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:30:23.627095+05:30", "timestamp": 1755777623.627095}}}
{"text": "2025-08-21 17:30:23.628 | INFO     | app.services.dhan_client:get_pnl:545 - Calculated totals - realized: 0.0, unrealized: -864460.32, day: -864460.32\n", "record": {"elapsed": {"repr": "0:00:27.280915", "seconds": 27.280915}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 545, "message": "Calculated totals - realized: 0.0, unrealized: -864460.32, day: -864460.32", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 21844, "name": "MainProcess"}, "thread": {"id": 24292, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:30:23.628094+05:30", "timestamp": 1755777623.628094}}}
{"text": "2025-08-21 17:30:23.629 | DEBUG    | app.services.dhan_client:get_pnl:554 - PnL consistency check passed: drift=‚Çπ0.00\n", "record": {"elapsed": {"repr": "0:00:27.282069", "seconds": 27.282069}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 554, "message": "PnL consistency check passed: drift=‚Çπ0.00", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 21844, "name": "MainProcess"}, "thread": {"id": 24292, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:30:23.629248+05:30", "timestamp": 1755777623.629248}}}
{"text": "2025-08-21 17:30:23.631 | DEBUG    | app.services.dhan_client:get_pnl:558 - Creating PnLTotals...\n", "record": {"elapsed": {"repr": "0:00:27.283863", "seconds": 27.283863}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 558, "message": "Creating PnLTotals...", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 21844, "name": "MainProcess"}, "thread": {"id": 24292, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:30:23.631042+05:30", "timestamp": 1755777623.631042}}}
{"text": "2025-08-21 17:30:23.632 | DEBUG    | app.services.dhan_client:get_pnl:565 - PnLTotals created successfully\n", "record": {"elapsed": {"repr": "0:00:27.284944", "seconds": 27.284944}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 565, "message": "PnLTotals created successfully", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 21844, "name": "MainProcess"}, "thread": {"id": 24292, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:30:23.632123+05:30", "timestamp": 1755777623.632123}}}
{"text": "2025-08-21 17:30:23.633 | DEBUG    | app.services.dhan_client:get_pnl:574 - Creating PnL model...\n", "record": {"elapsed": {"repr": "0:00:27.286243", "seconds": 27.286243}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 574, "message": "Creating PnL model...", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 21844, "name": "MainProcess"}, "thread": {"id": 24292, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:30:23.633422+05:30", "timestamp": 1755777623.633422}}}
{"text": "2025-08-21 17:30:23.634 | DEBUG    | app.services.dhan_client:get_pnl:575 - Model fields: totals=<class 'app.models.schemas.PnLTotals'>, perSymbol=5, updated_at=2025-08-21 17:30:23.620923+05:30, trading_day=2025-08-21\n", "record": {"elapsed": {"repr": "0:00:27.287619", "seconds": 27.287619}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 575, "message": "Model fields: totals=<class 'app.models.schemas.PnLTotals'>, perSymbol=5, updated_at=2025-08-21 17:30:23.620923+05:30, trading_day=2025-08-21", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 21844, "name": "MainProcess"}, "thread": {"id": 24292, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:30:23.634798+05:30", "timestamp": 1755777623.634798}}}
{"text": "2025-08-21 17:30:23.638 | DEBUG    | app.services.dhan_client:get_pnl:584 - Created PnL model: totals=PnLTotals(realized=0.0, unrealized=-864460.32, day=-864460.32, currency='INR') per_symbol=[PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1412, avg=1385.34, ltp=115.97, unrealized=-1792346.1, today_pnl=-1792346.1), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=1160, avg=1132.72, ltp=863.57, unrealized=312219.51, today_pnl=312219.51), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=791, avg=1735.92, ltp=1319.69, unrealized=-329237.5, today_pnl=-329237.5), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=1902, avg=1982.2, ltp=1021.01, unrealized=1828186.88, today_pnl=1828186.88), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=773, avg=1518.94, ltp=376.27, unrealized=-883283.11, today_pnl=-883283.11)] updated_at=datetime.datetime(2025, 8, 21, 17, 30, 23, 620923, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))) trading_day='2025-08-21'\n", "record": {"elapsed": {"repr": "0:00:27.290907", "seconds": 27.290907}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 584, "message": "Created PnL model: totals=PnLTotals(realized=0.0, unrealized=-864460.32, day=-864460.32, currency='INR') per_symbol=[PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1412, avg=1385.34, ltp=115.97, unrealized=-1792346.1, today_pnl=-1792346.1), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=1160, avg=1132.72, ltp=863.57, unrealized=312219.51, today_pnl=312219.51), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=791, avg=1735.92, ltp=1319.69, unrealized=-329237.5, today_pnl=-329237.5), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=1902, avg=1982.2, ltp=1021.01, unrealized=1828186.88, today_pnl=1828186.88), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=773, avg=1518.94, ltp=376.27, unrealized=-883283.11, today_pnl=-883283.11)] updated_at=datetime.datetime(2025, 8, 21, 17, 30, 23, 620923, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))) trading_day='2025-08-21'", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 21844, "name": "MainProcess"}, "thread": {"id": 24292, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:30:23.638086+05:30", "timestamp": 1755777623.638086}}}
{"text": "2025-08-21 17:30:23.640 | DEBUG    | app.services.dhan_client:get_pnl:585 - PnL model fields: {'totals': PnLTotals(realized=0.0, unrealized=-864460.32, day=-864460.32, currency='INR'), 'per_symbol': [PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1412, avg=1385.34, ltp=115.97, unrealized=-1792346.1, today_pnl=-1792346.1), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=1160, avg=1132.72, ltp=863.57, unrealized=312219.51, today_pnl=312219.51), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=791, avg=1735.92, ltp=1319.69, unrealized=-329237.5, today_pnl=-329237.5), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=1902, avg=1982.2, ltp=1021.01, unrealized=1828186.88, today_pnl=1828186.88), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=773, avg=1518.94, ltp=376.27, unrealized=-883283.11, today_pnl=-883283.11)], 'updated_at': datetime.datetime(2025, 8, 21, 17, 30, 23, 620923, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))), 'trading_day': '2025-08-21'}\n", "record": {"elapsed": {"repr": "0:00:27.293421", "seconds": 27.293421}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 585, "message": "PnL model fields: {'totals': PnLTotals(realized=0.0, unrealized=-864460.32, day=-864460.32, currency='INR'), 'per_symbol': [PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1412, avg=1385.34, ltp=115.97, unrealized=-1792346.1, today_pnl=-1792346.1), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=1160, avg=1132.72, ltp=863.57, unrealized=312219.51, today_pnl=312219.51), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=791, avg=1735.92, ltp=1319.69, unrealized=-329237.5, today_pnl=-329237.5), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=1902, avg=1982.2, ltp=1021.01, unrealized=1828186.88, today_pnl=1828186.88), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=773, avg=1518.94, ltp=376.27, unrealized=-883283.11, today_pnl=-883283.11)], 'updated_at': datetime.datetime(2025, 8, 21, 17, 30, 23, 620923, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))), 'trading_day': '2025-08-21'}", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 21844, "name": "MainProcess"}, "thread": {"id": 24292, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:30:23.640600+05:30", "timestamp": 1755777623.6406}}}
{"text": "2025-08-21 17:30:23.643 | INFO     | app.services.dhan_client:get_pnl:587 - P&L calculation completed successfully: 5 symbols, unrealized=‚Çπ-864460.32\n", "record": {"elapsed": {"repr": "0:00:27.296397", "seconds": 27.296397}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 587, "message": "P&L calculation completed successfully: 5 symbols, unrealized=‚Çπ-864460.32", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 21844, "name": "MainProcess"}, "thread": {"id": 24292, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:30:23.643576+05:30", "timestamp": 1755777623.643576}}}
{"text": "2025-08-21 17:30:23.645 | DEBUG    | app.ws.live:emit_delta:408 - Emitted pnl delta: seq=30\n", "record": {"elapsed": {"repr": "0:00:27.297998", "seconds": 27.297998}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "emit_delta", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 408, "message": "Emitted pnl delta: seq=30", "module": "live", "name": "app.ws.live", "process": {"id": 21844, "name": "MainProcess"}, "thread": {"id": 24292, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:30:23.645177+05:30", "timestamp": 1755777623.645177}}}
{"text": "2025-08-21 17:30:23.648 | DEBUG    | app.ws.live:emit_delta:408 - Emitted positions delta: seq=31\n", "record": {"elapsed": {"repr": "0:00:27.301259", "seconds": 27.301259}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "emit_delta", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 408, "message": "Emitted positions delta: seq=31", "module": "live", "name": "app.ws.live", "process": {"id": 21844, "name": "MainProcess"}, "thread": {"id": 24292, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:30:23.648438+05:30", "timestamp": 1755777623.648438}}}
{"text": "2025-08-21 17:30:24.677 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:28.330671", "seconds": 28.330671}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 21844, "name": "MainProcess"}, "thread": {"id": 4252, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 17:30:24.677850+05:30", "timestamp": 1755777624.67785}}}
{"text": "2025-08-21 17:30:24.679 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:28.332383", "seconds": 28.332383}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 21844, "name": "MainProcess"}, "thread": {"id": 4252, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 17:30:24.679562+05:30", "timestamp": 1755777624.679562}}}
{"text": "2025-08-21 17:30:24.681 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:28.334614", "seconds": 28.334614}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 21844, "name": "MainProcess"}, "thread": {"id": 4252, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 17:30:24.681793+05:30", "timestamp": 1755777624.681793}}}
{"text": "2025-08-21 17:30:24.683 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:28.336722", "seconds": 28.336722}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 21844, "name": "MainProcess"}, "thread": {"id": 4252, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 17:30:24.683901+05:30", "timestamp": 1755777624.683901}}}
{"text": "2025-08-21 17:30:24.685 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:28.338438", "seconds": 28.338438}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 21844, "name": "MainProcess"}, "thread": {"id": 4252, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 17:30:24.685617+05:30", "timestamp": 1755777624.685617}}}
{"text": "2025-08-21 17:30:24.687 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:28.340130", "seconds": 28.34013}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 21844, "name": "MainProcess"}, "thread": {"id": 4252, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 17:30:24.687309+05:30", "timestamp": 1755777624.687309}}}
{"text": "2025-08-21 17:30:24.688 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:28.341241", "seconds": 28.341241}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 21844, "name": "MainProcess"}, "thread": {"id": 4252, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 17:30:24.688420+05:30", "timestamp": 1755777624.68842}}}
{"text": "2025-08-21 17:30:24.689 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:28.342340", "seconds": 28.34234}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 21844, "name": "MainProcess"}, "thread": {"id": 4252, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 17:30:24.689519+05:30", "timestamp": 1755777624.689519}}}
{"text": "2025-08-21 17:30:24.690 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:28.343304", "seconds": 28.343304}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 21844, "name": "MainProcess"}, "thread": {"id": 4252, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 17:30:24.690483+05:30", "timestamp": 1755777624.690483}}}
{"text": "2025-08-21 17:30:24.692 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:28.345050", "seconds": 28.34505}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 21844, "name": "MainProcess"}, "thread": {"id": 4252, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 17:30:24.692229+05:30", "timestamp": 1755777624.692229}}}
{"text": "2025-08-21 17:30:25.301 | INFO     | app.services.dhan_client:get_pnl:489 - Starting accurate P&L calculation\n", "record": {"elapsed": {"repr": "0:00:28.954500", "seconds": 28.9545}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 489, "message": "Starting accurate P&L calculation", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 21844, "name": "MainProcess"}, "thread": {"id": 24292, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:30:25.301679+05:30", "timestamp": 1755777625.301679}}}
{"text": "2025-08-21 17:30:25.303 | INFO     | app.services.dhan_client:get_pnl:491 - Fetched 5 positions\n", "record": {"elapsed": {"repr": "0:00:28.955892", "seconds": 28.955892}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 491, "message": "Fetched 5 positions", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 21844, "name": "MainProcess"}, "thread": {"id": 24292, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:30:25.303071+05:30", "timestamp": 1755777625.303071}}}
{"text": "2025-08-21 17:30:25.304 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for RELIANCE: unrealized=-1795101.76, today=-1795101.76\n", "record": {"elapsed": {"repr": "0:00:28.957061", "seconds": 28.957061}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for RELIANCE: unrealized=-1795101.76, today=-1795101.76", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 21844, "name": "MainProcess"}, "thread": {"id": 24292, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:30:25.304240+05:30", "timestamp": 1755777625.30424}}}
{"text": "2025-08-21 17:30:25.305 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for TCS: unrealized=312707.99, today=312707.99\n", "record": {"elapsed": {"repr": "0:00:28.958120", "seconds": 28.95812}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for TCS: unrealized=312707.99, today=312707.99", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 21844, "name": "MainProcess"}, "thread": {"id": 24292, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:30:25.305299+05:30", "timestamp": 1755777625.305299}}}
{"text": "2025-08-21 17:30:25.306 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for HDFC: unrealized=-340891.2, today=-340891.2\n", "record": {"elapsed": {"repr": "0:00:28.959606", "seconds": 28.959606}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for HDFC: unrealized=-340891.2, today=-340891.2", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 21844, "name": "MainProcess"}, "thread": {"id": 24292, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:30:25.306785+05:30", "timestamp": 1755777625.306785}}}
{"text": "2025-08-21 17:30:25.307 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for INFY: unrealized=1840386.12, today=1840386.12\n", "record": {"elapsed": {"repr": "0:00:28.960636", "seconds": 28.960636}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for INFY: unrealized=1840386.12, today=1840386.12", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 21844, "name": "MainProcess"}, "thread": {"id": 24292, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:30:25.307815+05:30", "timestamp": 1755777625.307815}}}
{"text": "2025-08-21 17:30:25.309 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for ICICIBANK: unrealized=-884623.44, today=-884623.44\n", "record": {"elapsed": {"repr": "0:00:28.962451", "seconds": 28.962451}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for ICICIBANK: unrealized=-884623.44, today=-884623.44", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 21844, "name": "MainProcess"}, "thread": {"id": 24292, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:30:25.309630+05:30", "timestamp": 1755777625.30963}}}
{"text": "2025-08-21 17:30:25.310 | INFO     | app.services.dhan_client:get_pnl:545 - Calculated totals - realized: 0.0, unrealized: -867522.29, day: -867522.29\n", "record": {"elapsed": {"repr": "0:00:28.963647", "seconds": 28.963647}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 545, "message": "Calculated totals - realized: 0.0, unrealized: -867522.29, day: -867522.29", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 21844, "name": "MainProcess"}, "thread": {"id": 24292, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:30:25.310826+05:30", "timestamp": 1755777625.310826}}}
{"text": "2025-08-21 17:30:25.311 | DEBUG    | app.services.dhan_client:get_pnl:554 - PnL consistency check passed: drift=‚Çπ0.00\n", "record": {"elapsed": {"repr": "0:00:28.964732", "seconds": 28.964732}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 554, "message": "PnL consistency check passed: drift=‚Çπ0.00", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 21844, "name": "MainProcess"}, "thread": {"id": 24292, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:30:25.311911+05:30", "timestamp": 1755777625.311911}}}
{"text": "2025-08-21 17:30:25.313 | DEBUG    | app.services.dhan_client:get_pnl:558 - Creating PnLTotals...\n", "record": {"elapsed": {"repr": "0:00:28.965888", "seconds": 28.965888}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 558, "message": "Creating PnLTotals...", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 21844, "name": "MainProcess"}, "thread": {"id": 24292, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:30:25.313067+05:30", "timestamp": 1755777625.313067}}}
{"text": "2025-08-21 17:30:25.314 | DEBUG    | app.services.dhan_client:get_pnl:565 - PnLTotals created successfully\n", "record": {"elapsed": {"repr": "0:00:28.967280", "seconds": 28.96728}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 565, "message": "PnLTotals created successfully", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 21844, "name": "MainProcess"}, "thread": {"id": 24292, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:30:25.314459+05:30", "timestamp": 1755777625.314459}}}
{"text": "2025-08-21 17:30:25.315 | DEBUG    | app.services.dhan_client:get_pnl:574 - Creating PnL model...\n", "record": {"elapsed": {"repr": "0:00:28.968293", "seconds": 28.968293}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 574, "message": "Creating PnL model...", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 21844, "name": "MainProcess"}, "thread": {"id": 24292, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:30:25.315472+05:30", "timestamp": 1755777625.315472}}}
{"text": "2025-08-21 17:30:25.316 | DEBUG    | app.services.dhan_client:get_pnl:575 - Model fields: totals=<class 'app.models.schemas.PnLTotals'>, perSymbol=5, updated_at=2025-08-21 17:30:25.304100+05:30, trading_day=2025-08-21\n", "record": {"elapsed": {"repr": "0:00:28.969132", "seconds": 28.969132}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 575, "message": "Model fields: totals=<class 'app.models.schemas.PnLTotals'>, perSymbol=5, updated_at=2025-08-21 17:30:25.304100+05:30, trading_day=2025-08-21", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 21844, "name": "MainProcess"}, "thread": {"id": 24292, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:30:25.316311+05:30", "timestamp": 1755777625.316311}}}
{"text": "2025-08-21 17:30:25.317 | DEBUG    | app.services.dhan_client:get_pnl:584 - Created PnL model: totals=PnLTotals(realized=0.0, unrealized=-867522.29, day=-867522.29, currency='INR') per_symbol=[PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1412, avg=1385.34, ltp=114.02, unrealized=-1795101.76, today_pnl=-1795101.76), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=1160, avg=1132.72, ltp=863.14, unrealized=312707.99, today_pnl=312707.99), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=791, avg=1735.92, ltp=1304.96, unrealized=-340891.2, today_pnl=-340891.2), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=1902, avg=1982.2, ltp=1014.59, unrealized=1840386.12, today_pnl=1840386.12), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=773, avg=1518.94, ltp=374.54, unrealized=-884623.44, today_pnl=-884623.44)] updated_at=datetime.datetime(2025, 8, 21, 17, 30, 25, 304100, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))) trading_day='2025-08-21'\n", "record": {"elapsed": {"repr": "0:00:28.970618", "seconds": 28.970618}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 584, "message": "Created PnL model: totals=PnLTotals(realized=0.0, unrealized=-867522.29, day=-867522.29, currency='INR') per_symbol=[PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1412, avg=1385.34, ltp=114.02, unrealized=-1795101.76, today_pnl=-1795101.76), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=1160, avg=1132.72, ltp=863.14, unrealized=312707.99, today_pnl=312707.99), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=791, avg=1735.92, ltp=1304.96, unrealized=-340891.2, today_pnl=-340891.2), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=1902, avg=1982.2, ltp=1014.59, unrealized=1840386.12, today_pnl=1840386.12), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=773, avg=1518.94, ltp=374.54, unrealized=-884623.44, today_pnl=-884623.44)] updated_at=datetime.datetime(2025, 8, 21, 17, 30, 25, 304100, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))) trading_day='2025-08-21'", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 21844, "name": "MainProcess"}, "thread": {"id": 24292, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:30:25.317797+05:30", "timestamp": 1755777625.317797}}}
{"text": "2025-08-21 17:30:25.320 | DEBUG    | app.services.dhan_client:get_pnl:585 - PnL model fields: {'totals': PnLTotals(realized=0.0, unrealized=-867522.29, day=-867522.29, currency='INR'), 'per_symbol': [PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1412, avg=1385.34, ltp=114.02, unrealized=-1795101.76, today_pnl=-1795101.76), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=1160, avg=1132.72, ltp=863.14, unrealized=312707.99, today_pnl=312707.99), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=791, avg=1735.92, ltp=1304.96, unrealized=-340891.2, today_pnl=-340891.2), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=1902, avg=1982.2, ltp=1014.59, unrealized=1840386.12, today_pnl=1840386.12), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=773, avg=1518.94, ltp=374.54, unrealized=-884623.44, today_pnl=-884623.44)], 'updated_at': datetime.datetime(2025, 8, 21, 17, 30, 25, 304100, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))), 'trading_day': '2025-08-21'}\n", "record": {"elapsed": {"repr": "0:00:28.972956", "seconds": 28.972956}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 585, "message": "PnL model fields: {'totals': PnLTotals(realized=0.0, unrealized=-867522.29, day=-867522.29, currency='INR'), 'per_symbol': [PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1412, avg=1385.34, ltp=114.02, unrealized=-1795101.76, today_pnl=-1795101.76), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=1160, avg=1132.72, ltp=863.14, unrealized=312707.99, today_pnl=312707.99), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=791, avg=1735.92, ltp=1304.96, unrealized=-340891.2, today_pnl=-340891.2), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=1902, avg=1982.2, ltp=1014.59, unrealized=1840386.12, today_pnl=1840386.12), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=773, avg=1518.94, ltp=374.54, unrealized=-884623.44, today_pnl=-884623.44)], 'updated_at': datetime.datetime(2025, 8, 21, 17, 30, 25, 304100, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))), 'trading_day': '2025-08-21'}", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 21844, "name": "MainProcess"}, "thread": {"id": 24292, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:30:25.320135+05:30", "timestamp": 1755777625.320135}}}
{"text": "2025-08-21 17:30:25.321 | INFO     | app.services.dhan_client:get_pnl:587 - P&L calculation completed successfully: 5 symbols, unrealized=‚Çπ-867522.29\n", "record": {"elapsed": {"repr": "0:00:28.974391", "seconds": 28.974391}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 587, "message": "P&L calculation completed successfully: 5 symbols, unrealized=‚Çπ-867522.29", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 21844, "name": "MainProcess"}, "thread": {"id": 24292, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:30:25.321570+05:30", "timestamp": 1755777625.32157}}}
{"text": "2025-08-21 17:30:25.323 | DEBUG    | app.ws.live:emit_delta:408 - Emitted pnl delta: seq=32\n", "record": {"elapsed": {"repr": "0:00:28.976037", "seconds": 28.976037}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "emit_delta", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 408, "message": "Emitted pnl delta: seq=32", "module": "live", "name": "app.ws.live", "process": {"id": 21844, "name": "MainProcess"}, "thread": {"id": 24292, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:30:25.323216+05:30", "timestamp": 1755777625.323216}}}
{"text": "2025-08-21 17:30:25.325 | DEBUG    | app.ws.live:emit_delta:408 - Emitted positions delta: seq=33\n", "record": {"elapsed": {"repr": "0:00:28.978195", "seconds": 28.978195}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "emit_delta", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 408, "message": "Emitted positions delta: seq=33", "module": "live", "name": "app.ws.live", "process": {"id": 21844, "name": "MainProcess"}, "thread": {"id": 24292, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:30:25.325374+05:30", "timestamp": 1755777625.325374}}}
{"text": "2025-08-21 17:30:26.694 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:30.347142", "seconds": 30.347142}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 21844, "name": "MainProcess"}, "thread": {"id": 4252, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 17:30:26.694321+05:30", "timestamp": 1755777626.694321}}}
{"text": "2025-08-21 17:30:26.695 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:30.348430", "seconds": 30.34843}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 21844, "name": "MainProcess"}, "thread": {"id": 4252, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 17:30:26.695609+05:30", "timestamp": 1755777626.695609}}}
{"text": "2025-08-21 17:30:26.696 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:30.349677", "seconds": 30.349677}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 21844, "name": "MainProcess"}, "thread": {"id": 4252, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 17:30:26.696856+05:30", "timestamp": 1755777626.696856}}}
{"text": "2025-08-21 17:30:26.698 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:30.351333", "seconds": 30.351333}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 21844, "name": "MainProcess"}, "thread": {"id": 4252, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 17:30:26.698512+05:30", "timestamp": 1755777626.698512}}}
{"text": "2025-08-21 17:30:26.699 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:30.352679", "seconds": 30.352679}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 21844, "name": "MainProcess"}, "thread": {"id": 4252, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 17:30:26.699858+05:30", "timestamp": 1755777626.699858}}}
{"text": "2025-08-21 17:30:26.702 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:30.355290", "seconds": 30.35529}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 21844, "name": "MainProcess"}, "thread": {"id": 4252, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 17:30:26.702469+05:30", "timestamp": 1755777626.702469}}}
{"text": "2025-08-21 17:30:26.704 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:30.357606", "seconds": 30.357606}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 21844, "name": "MainProcess"}, "thread": {"id": 4252, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 17:30:26.704785+05:30", "timestamp": 1755777626.704785}}}
{"text": "2025-08-21 17:30:26.706 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:30.359113", "seconds": 30.359113}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 21844, "name": "MainProcess"}, "thread": {"id": 4252, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 17:30:26.706292+05:30", "timestamp": 1755777626.706292}}}
{"text": "2025-08-21 17:30:26.707 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:30.360411", "seconds": 30.360411}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 21844, "name": "MainProcess"}, "thread": {"id": 4252, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 17:30:26.707590+05:30", "timestamp": 1755777626.70759}}}
{"text": "2025-08-21 17:30:26.709 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:30.361896", "seconds": 30.361896}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 21844, "name": "MainProcess"}, "thread": {"id": 4252, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 17:30:26.709075+05:30", "timestamp": 1755777626.709075}}}
{"text": "2025-08-21 17:30:27.312 | INFO     | app.services.dhan_client:get_pnl:489 - Starting accurate P&L calculation\n", "record": {"elapsed": {"repr": "0:00:30.965687", "seconds": 30.965687}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 489, "message": "Starting accurate P&L calculation", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 21844, "name": "MainProcess"}, "thread": {"id": 24292, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:30:27.312866+05:30", "timestamp": 1755777627.312866}}}
{"text": "2025-08-21 17:30:27.314 | INFO     | app.services.dhan_client:get_pnl:491 - Fetched 5 positions\n", "record": {"elapsed": {"repr": "0:00:30.966989", "seconds": 30.966989}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 491, "message": "Fetched 5 positions", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 21844, "name": "MainProcess"}, "thread": {"id": 24292, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:30:27.314168+05:30", "timestamp": 1755777627.314168}}}
{"text": "2025-08-21 17:30:27.315 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for RELIANCE: unrealized=-1797285.2, today=-1797285.2\n", "record": {"elapsed": {"repr": "0:00:30.968480", "seconds": 30.96848}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for RELIANCE: unrealized=-1797285.2, today=-1797285.2", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 21844, "name": "MainProcess"}, "thread": {"id": 24292, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:30:27.315659+05:30", "timestamp": 1755777627.315659}}}
{"text": "2025-08-21 17:30:27.316 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for TCS: unrealized=316402.59, today=316402.59\n", "record": {"elapsed": {"repr": "0:00:30.969530", "seconds": 30.96953}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for TCS: unrealized=316402.59, today=316402.59", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 21844, "name": "MainProcess"}, "thread": {"id": 24292, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:30:27.316709+05:30", "timestamp": 1755777627.316709}}}
{"text": "2025-08-21 17:30:27.318 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for HDFC: unrealized=-357721.01, today=-357721.01\n", "record": {"elapsed": {"repr": "0:00:30.970947", "seconds": 30.970947}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for HDFC: unrealized=-357721.01, today=-357721.01", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 21844, "name": "MainProcess"}, "thread": {"id": 24292, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:30:27.318126+05:30", "timestamp": 1755777627.318126}}}
{"text": "2025-08-21 17:30:27.319 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for INFY: unrealized=1810477.4, today=1810477.4\n", "record": {"elapsed": {"repr": "0:00:30.972367", "seconds": 30.972367}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for INFY: unrealized=1810477.4, today=1810477.4", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 21844, "name": "MainProcess"}, "thread": {"id": 24292, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:30:27.319546+05:30", "timestamp": 1755777627.319546}}}
{"text": "2025-08-21 17:30:27.320 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for ICICIBANK: unrealized=-887452.95, today=-887452.95\n", "record": {"elapsed": {"repr": "0:00:30.973640", "seconds": 30.97364}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for ICICIBANK: unrealized=-887452.95, today=-887452.95", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 21844, "name": "MainProcess"}, "thread": {"id": 24292, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:30:27.320819+05:30", "timestamp": 1755777627.320819}}}
{"text": "2025-08-21 17:30:27.321 | INFO     | app.services.dhan_client:get_pnl:545 - Calculated totals - realized: 0.0, unrealized: -915579.17, day: -915579.17\n", "record": {"elapsed": {"repr": "0:00:30.974558", "seconds": 30.974558}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 545, "message": "Calculated totals - realized: 0.0, unrealized: -915579.17, day: -915579.17", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 21844, "name": "MainProcess"}, "thread": {"id": 24292, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:30:27.321737+05:30", "timestamp": 1755777627.321737}}}
{"text": "2025-08-21 17:30:27.322 | DEBUG    | app.services.dhan_client:get_pnl:554 - PnL consistency check passed: drift=‚Çπ0.00\n", "record": {"elapsed": {"repr": "0:00:30.975343", "seconds": 30.975343}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 554, "message": "PnL consistency check passed: drift=‚Çπ0.00", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 21844, "name": "MainProcess"}, "thread": {"id": 24292, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:30:27.322522+05:30", "timestamp": 1755777627.322522}}}
{"text": "2025-08-21 17:30:27.323 | DEBUG    | app.services.dhan_client:get_pnl:558 - Creating PnLTotals...\n", "record": {"elapsed": {"repr": "0:00:30.976316", "seconds": 30.976316}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 558, "message": "Creating PnLTotals...", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 21844, "name": "MainProcess"}, "thread": {"id": 24292, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:30:27.323495+05:30", "timestamp": 1755777627.323495}}}
{"text": "2025-08-21 17:30:27.324 | DEBUG    | app.services.dhan_client:get_pnl:565 - PnLTotals created successfully\n", "record": {"elapsed": {"repr": "0:00:30.977262", "seconds": 30.977262}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 565, "message": "PnLTotals created successfully", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 21844, "name": "MainProcess"}, "thread": {"id": 24292, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:30:27.324441+05:30", "timestamp": 1755777627.324441}}}
{"text": "2025-08-21 17:30:27.325 | DEBUG    | app.services.dhan_client:get_pnl:574 - Creating PnL model...\n", "record": {"elapsed": {"repr": "0:00:30.978573", "seconds": 30.978573}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 574, "message": "Creating PnL model...", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 21844, "name": "MainProcess"}, "thread": {"id": 24292, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:30:27.325752+05:30", "timestamp": 1755777627.325752}}}
{"text": "2025-08-21 17:30:27.327 | DEBUG    | app.services.dhan_client:get_pnl:575 - Model fields: totals=<class 'app.models.schemas.PnLTotals'>, perSymbol=5, updated_at=2025-08-21 17:30:27.315468+05:30, trading_day=2025-08-21\n", "record": {"elapsed": {"repr": "0:00:30.980617", "seconds": 30.980617}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 575, "message": "Model fields: totals=<class 'app.models.schemas.PnLTotals'>, perSymbol=5, updated_at=2025-08-21 17:30:27.315468+05:30, trading_day=2025-08-21", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 21844, "name": "MainProcess"}, "thread": {"id": 24292, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:30:27.327796+05:30", "timestamp": 1755777627.327796}}}
{"text": "2025-08-21 17:30:27.329 | DEBUG    | app.services.dhan_client:get_pnl:584 - Created PnL model: totals=PnLTotals(realized=0.0, unrealized=-915579.17, day=-915579.17, currency='INR') per_symbol=[PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1412, avg=1385.34, ltp=112.48, unrealized=-1797285.2, today_pnl=-1797285.2), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=1160, avg=1132.72, ltp=859.96, unrealized=316402.59, today_pnl=316402.59), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=791, avg=1735.92, ltp=1283.68, unrealized=-357721.01, today_pnl=-357721.01), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=1902, avg=1982.2, ltp=1030.32, unrealized=1810477.4, today_pnl=1810477.4), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=773, avg=1518.94, ltp=370.88, unrealized=-887452.95, today_pnl=-887452.95)] updated_at=datetime.datetime(2025, 8, 21, 17, 30, 27, 315468, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))) trading_day='2025-08-21'\n", "record": {"elapsed": {"repr": "0:00:30.982673", "seconds": 30.982673}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 584, "message": "Created PnL model: totals=PnLTotals(realized=0.0, unrealized=-915579.17, day=-915579.17, currency='INR') per_symbol=[PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1412, avg=1385.34, ltp=112.48, unrealized=-1797285.2, today_pnl=-1797285.2), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=1160, avg=1132.72, ltp=859.96, unrealized=316402.59, today_pnl=316402.59), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=791, avg=1735.92, ltp=1283.68, unrealized=-357721.01, today_pnl=-357721.01), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=1902, avg=1982.2, ltp=1030.32, unrealized=1810477.4, today_pnl=1810477.4), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=773, avg=1518.94, ltp=370.88, unrealized=-887452.95, today_pnl=-887452.95)] updated_at=datetime.datetime(2025, 8, 21, 17, 30, 27, 315468, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))) trading_day='2025-08-21'", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 21844, "name": "MainProcess"}, "thread": {"id": 24292, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:30:27.329852+05:30", "timestamp": 1755777627.329852}}}
{"text": "2025-08-21 17:30:27.331 | DEBUG    | app.services.dhan_client:get_pnl:585 - PnL model fields: {'totals': PnLTotals(realized=0.0, unrealized=-915579.17, day=-915579.17, currency='INR'), 'per_symbol': [PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1412, avg=1385.34, ltp=112.48, unrealized=-1797285.2, today_pnl=-1797285.2), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=1160, avg=1132.72, ltp=859.96, unrealized=316402.59, today_pnl=316402.59), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=791, avg=1735.92, ltp=1283.68, unrealized=-357721.01, today_pnl=-357721.01), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=1902, avg=1982.2, ltp=1030.32, unrealized=1810477.4, today_pnl=1810477.4), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=773, avg=1518.94, ltp=370.88, unrealized=-887452.95, today_pnl=-887452.95)], 'updated_at': datetime.datetime(2025, 8, 21, 17, 30, 27, 315468, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))), 'trading_day': '2025-08-21'}\n", "record": {"elapsed": {"repr": "0:00:30.984189", "seconds": 30.984189}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 585, "message": "PnL model fields: {'totals': PnLTotals(realized=0.0, unrealized=-915579.17, day=-915579.17, currency='INR'), 'per_symbol': [PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1412, avg=1385.34, ltp=112.48, unrealized=-1797285.2, today_pnl=-1797285.2), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=1160, avg=1132.72, ltp=859.96, unrealized=316402.59, today_pnl=316402.59), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=791, avg=1735.92, ltp=1283.68, unrealized=-357721.01, today_pnl=-357721.01), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=1902, avg=1982.2, ltp=1030.32, unrealized=1810477.4, today_pnl=1810477.4), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=773, avg=1518.94, ltp=370.88, unrealized=-887452.95, today_pnl=-887452.95)], 'updated_at': datetime.datetime(2025, 8, 21, 17, 30, 27, 315468, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))), 'trading_day': '2025-08-21'}", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 21844, "name": "MainProcess"}, "thread": {"id": 24292, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:30:27.331368+05:30", "timestamp": 1755777627.331368}}}
{"text": "2025-08-21 17:30:27.332 | INFO     | app.services.dhan_client:get_pnl:587 - P&L calculation completed successfully: 5 symbols, unrealized=‚Çπ-915579.17\n", "record": {"elapsed": {"repr": "0:00:30.985707", "seconds": 30.985707}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 587, "message": "P&L calculation completed successfully: 5 symbols, unrealized=‚Çπ-915579.17", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 21844, "name": "MainProcess"}, "thread": {"id": 24292, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:30:27.332886+05:30", "timestamp": 1755777627.332886}}}
{"text": "2025-08-21 17:30:27.336 | DEBUG    | app.ws.live:emit_delta:408 - Emitted pnl delta: seq=34\n", "record": {"elapsed": {"repr": "0:00:30.989306", "seconds": 30.989306}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "emit_delta", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 408, "message": "Emitted pnl delta: seq=34", "module": "live", "name": "app.ws.live", "process": {"id": 21844, "name": "MainProcess"}, "thread": {"id": 24292, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:30:27.336485+05:30", "timestamp": 1755777627.336485}}}
{"text": "2025-08-21 17:30:27.338 | DEBUG    | app.ws.live:emit_delta:408 - Emitted positions delta: seq=35\n", "record": {"elapsed": {"repr": "0:00:30.991535", "seconds": 30.991535}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "emit_delta", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 408, "message": "Emitted positions delta: seq=35", "module": "live", "name": "app.ws.live", "process": {"id": 21844, "name": "MainProcess"}, "thread": {"id": 24292, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:30:27.338714+05:30", "timestamp": 1755777627.338714}}}
{"text": "2025-08-21 17:30:28.711 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:32.364069", "seconds": 32.364069}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 21844, "name": "MainProcess"}, "thread": {"id": 4252, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 17:30:28.711248+05:30", "timestamp": 1755777628.711248}}}
{"text": "2025-08-21 17:30:28.712 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:32.365331", "seconds": 32.365331}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 21844, "name": "MainProcess"}, "thread": {"id": 4252, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 17:30:28.712510+05:30", "timestamp": 1755777628.71251}}}
{"text": "2025-08-21 17:30:28.713 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:32.366223", "seconds": 32.366223}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 21844, "name": "MainProcess"}, "thread": {"id": 4252, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 17:30:28.713402+05:30", "timestamp": 1755777628.713402}}}
{"text": "2025-08-21 17:30:28.714 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:32.367088", "seconds": 32.367088}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 21844, "name": "MainProcess"}, "thread": {"id": 4252, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 17:30:28.714267+05:30", "timestamp": 1755777628.714267}}}
{"text": "2025-08-21 17:30:28.715 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:32.368195", "seconds": 32.368195}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 21844, "name": "MainProcess"}, "thread": {"id": 4252, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 17:30:28.715374+05:30", "timestamp": 1755777628.715374}}}
{"text": "2025-08-21 17:30:28.716 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:32.369623", "seconds": 32.369623}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 21844, "name": "MainProcess"}, "thread": {"id": 4252, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 17:30:28.716802+05:30", "timestamp": 1755777628.716802}}}
{"text": "2025-08-21 17:30:28.719 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:32.372607", "seconds": 32.372607}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 21844, "name": "MainProcess"}, "thread": {"id": 4252, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 17:30:28.719786+05:30", "timestamp": 1755777628.719786}}}
{"text": "2025-08-21 17:30:28.720 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:32.373761", "seconds": 32.373761}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 21844, "name": "MainProcess"}, "thread": {"id": 4252, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 17:30:28.720940+05:30", "timestamp": 1755777628.72094}}}
{"text": "2025-08-21 17:30:28.722 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:32.374821", "seconds": 32.374821}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 21844, "name": "MainProcess"}, "thread": {"id": 4252, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 17:30:28.722000+05:30", "timestamp": 1755777628.722}}}
{"text": "2025-08-21 17:30:28.723 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:32.375841", "seconds": 32.375841}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 21844, "name": "MainProcess"}, "thread": {"id": 4252, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 17:30:28.723020+05:30", "timestamp": 1755777628.72302}}}
{"text": "2025-08-21 17:30:29.335 | INFO     | app.services.dhan_client:get_pnl:489 - Starting accurate P&L calculation\n", "record": {"elapsed": {"repr": "0:00:32.987840", "seconds": 32.98784}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 489, "message": "Starting accurate P&L calculation", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 21844, "name": "MainProcess"}, "thread": {"id": 24292, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:30:29.335019+05:30", "timestamp": 1755777629.335019}}}
{"text": "2025-08-21 17:30:29.336 | INFO     | app.services.dhan_client:get_pnl:491 - Fetched 5 positions\n", "record": {"elapsed": {"repr": "0:00:32.989428", "seconds": 32.989428}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 491, "message": "Fetched 5 positions", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 21844, "name": "MainProcess"}, "thread": {"id": 24292, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:30:29.336607+05:30", "timestamp": 1755777629.336607}}}
{"text": "2025-08-21 17:30:29.338 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for RELIANCE: unrealized=-1794650.87, today=-1794650.87\n", "record": {"elapsed": {"repr": "0:00:32.990983", "seconds": 32.990983}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for RELIANCE: unrealized=-1794650.87, today=-1794650.87", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 21844, "name": "MainProcess"}, "thread": {"id": 24292, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:30:29.338162+05:30", "timestamp": 1755777629.338162}}}
{"text": "2025-08-21 17:30:29.339 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for TCS: unrealized=329941.7, today=329941.7\n", "record": {"elapsed": {"repr": "0:00:32.992758", "seconds": 32.992758}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for TCS: unrealized=329941.7, today=329941.7", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 21844, "name": "MainProcess"}, "thread": {"id": 24292, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:30:29.339937+05:30", "timestamp": 1755777629.339937}}}
{"text": "2025-08-21 17:30:29.341 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for HDFC: unrealized=-350707.8, today=-350707.8\n", "record": {"elapsed": {"repr": "0:00:32.994000", "seconds": 32.994}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for HDFC: unrealized=-350707.8, today=-350707.8", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 21844, "name": "MainProcess"}, "thread": {"id": 24292, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:30:29.341179+05:30", "timestamp": 1755777629.341179}}}
{"text": "2025-08-21 17:30:29.343 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for INFY: unrealized=1803661.78, today=1803661.78\n", "record": {"elapsed": {"repr": "0:00:32.996760", "seconds": 32.99676}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for INFY: unrealized=1803661.78, today=1803661.78", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 21844, "name": "MainProcess"}, "thread": {"id": 24292, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:30:29.343939+05:30", "timestamp": 1755777629.343939}}}
{"text": "2025-08-21 17:30:29.345 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for ICICIBANK: unrealized=-888003.92, today=-888003.92\n", "record": {"elapsed": {"repr": "0:00:32.998467", "seconds": 32.998467}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for ICICIBANK: unrealized=-888003.92, today=-888003.92", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 21844, "name": "MainProcess"}, "thread": {"id": 24292, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:30:29.345646+05:30", "timestamp": 1755777629.345646}}}
{"text": "2025-08-21 17:30:29.347 | INFO     | app.services.dhan_client:get_pnl:545 - Calculated totals - realized: 0.0, unrealized: -899759.11, day: -899759.11\n", "record": {"elapsed": {"repr": "0:00:32.999868", "seconds": 32.999868}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 545, "message": "Calculated totals - realized: 0.0, unrealized: -899759.11, day: -899759.11", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 21844, "name": "MainProcess"}, "thread": {"id": 24292, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:30:29.347047+05:30", "timestamp": 1755777629.347047}}}
{"text": "2025-08-21 17:30:29.349 | DEBUG    | app.services.dhan_client:get_pnl:554 - PnL consistency check passed: drift=‚Çπ0.00\n", "record": {"elapsed": {"repr": "0:00:33.002043", "seconds": 33.002043}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 554, "message": "PnL consistency check passed: drift=‚Çπ0.00", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 21844, "name": "MainProcess"}, "thread": {"id": 24292, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:30:29.349222+05:30", "timestamp": 1755777629.349222}}}
{"text": "2025-08-21 17:30:29.351 | DEBUG    | app.services.dhan_client:get_pnl:558 - Creating PnLTotals...\n", "record": {"elapsed": {"repr": "0:00:33.003971", "seconds": 33.003971}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 558, "message": "Creating PnLTotals...", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 21844, "name": "MainProcess"}, "thread": {"id": 24292, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:30:29.351150+05:30", "timestamp": 1755777629.35115}}}
{"text": "2025-08-21 17:30:29.352 | DEBUG    | app.services.dhan_client:get_pnl:565 - PnLTotals created successfully\n", "record": {"elapsed": {"repr": "0:00:33.005403", "seconds": 33.005403}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 565, "message": "PnLTotals created successfully", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 21844, "name": "MainProcess"}, "thread": {"id": 24292, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:30:29.352582+05:30", "timestamp": 1755777629.352582}}}
{"text": "2025-08-21 17:30:29.354 | DEBUG    | app.services.dhan_client:get_pnl:574 - Creating PnL model...\n", "record": {"elapsed": {"repr": "0:00:33.006903", "seconds": 33.006903}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 574, "message": "Creating PnL model...", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 21844, "name": "MainProcess"}, "thread": {"id": 24292, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:30:29.354082+05:30", "timestamp": 1755777629.354082}}}
{"text": "2025-08-21 17:30:29.355 | DEBUG    | app.services.dhan_client:get_pnl:575 - Model fields: totals=<class 'app.models.schemas.PnLTotals'>, perSymbol=5, updated_at=2025-08-21 17:30:29.338018+05:30, trading_day=2025-08-21\n", "record": {"elapsed": {"repr": "0:00:33.008392", "seconds": 33.008392}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 575, "message": "Model fields: totals=<class 'app.models.schemas.PnLTotals'>, perSymbol=5, updated_at=2025-08-21 17:30:29.338018+05:30, trading_day=2025-08-21", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 21844, "name": "MainProcess"}, "thread": {"id": 24292, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:30:29.355571+05:30", "timestamp": 1755777629.355571}}}
{"text": "2025-08-21 17:30:29.357 | DEBUG    | app.services.dhan_client:get_pnl:584 - Created PnL model: totals=PnLTotals(realized=0.0, unrealized=-899759.11, day=-899759.11, currency='INR') per_symbol=[PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1412, avg=1385.34, ltp=114.34, unrealized=-1794650.87, today_pnl=-1794650.87), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=1160, avg=1132.72, ltp=848.29, unrealized=329941.7, today_pnl=329941.7), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=791, avg=1735.92, ltp=1292.55, unrealized=-350707.8, today_pnl=-350707.8), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=1902, avg=1982.2, ltp=1033.9, unrealized=1803661.78, today_pnl=1803661.78), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=773, avg=1518.94, ltp=370.16, unrealized=-888003.92, today_pnl=-888003.92)] updated_at=datetime.datetime(2025, 8, 21, 17, 30, 29, 338018, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))) trading_day='2025-08-21'\n", "record": {"elapsed": {"repr": "0:00:33.010358", "seconds": 33.010358}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 584, "message": "Created PnL model: totals=PnLTotals(realized=0.0, unrealized=-899759.11, day=-899759.11, currency='INR') per_symbol=[PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1412, avg=1385.34, ltp=114.34, unrealized=-1794650.87, today_pnl=-1794650.87), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=1160, avg=1132.72, ltp=848.29, unrealized=329941.7, today_pnl=329941.7), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=791, avg=1735.92, ltp=1292.55, unrealized=-350707.8, today_pnl=-350707.8), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=1902, avg=1982.2, ltp=1033.9, unrealized=1803661.78, today_pnl=1803661.78), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=773, avg=1518.94, ltp=370.16, unrealized=-888003.92, today_pnl=-888003.92)] updated_at=datetime.datetime(2025, 8, 21, 17, 30, 29, 338018, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))) trading_day='2025-08-21'", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 21844, "name": "MainProcess"}, "thread": {"id": 24292, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:30:29.357537+05:30", "timestamp": 1755777629.357537}}}
{"text": "2025-08-21 17:30:29.360 | DEBUG    | app.services.dhan_client:get_pnl:585 - PnL model fields: {'totals': PnLTotals(realized=0.0, unrealized=-899759.11, day=-899759.11, currency='INR'), 'per_symbol': [PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1412, avg=1385.34, ltp=114.34, unrealized=-1794650.87, today_pnl=-1794650.87), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=1160, avg=1132.72, ltp=848.29, unrealized=329941.7, today_pnl=329941.7), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=791, avg=1735.92, ltp=1292.55, unrealized=-350707.8, today_pnl=-350707.8), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=1902, avg=1982.2, ltp=1033.9, unrealized=1803661.78, today_pnl=1803661.78), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=773, avg=1518.94, ltp=370.16, unrealized=-888003.92, today_pnl=-888003.92)], 'updated_at': datetime.datetime(2025, 8, 21, 17, 30, 29, 338018, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))), 'trading_day': '2025-08-21'}\n", "record": {"elapsed": {"repr": "0:00:33.013362", "seconds": 33.013362}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 585, "message": "PnL model fields: {'totals': PnLTotals(realized=0.0, unrealized=-899759.11, day=-899759.11, currency='INR'), 'per_symbol': [PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1412, avg=1385.34, ltp=114.34, unrealized=-1794650.87, today_pnl=-1794650.87), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=1160, avg=1132.72, ltp=848.29, unrealized=329941.7, today_pnl=329941.7), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=791, avg=1735.92, ltp=1292.55, unrealized=-350707.8, today_pnl=-350707.8), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=1902, avg=1982.2, ltp=1033.9, unrealized=1803661.78, today_pnl=1803661.78), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=773, avg=1518.94, ltp=370.16, unrealized=-888003.92, today_pnl=-888003.92)], 'updated_at': datetime.datetime(2025, 8, 21, 17, 30, 29, 338018, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))), 'trading_day': '2025-08-21'}", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 21844, "name": "MainProcess"}, "thread": {"id": 24292, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:30:29.360541+05:30", "timestamp": 1755777629.360541}}}
{"text": "2025-08-21 17:30:29.362 | INFO     | app.services.dhan_client:get_pnl:587 - P&L calculation completed successfully: 5 symbols, unrealized=‚Çπ-899759.11\n", "record": {"elapsed": {"repr": "0:00:33.015565", "seconds": 33.015565}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 587, "message": "P&L calculation completed successfully: 5 symbols, unrealized=‚Çπ-899759.11", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 21844, "name": "MainProcess"}, "thread": {"id": 24292, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:30:29.362744+05:30", "timestamp": 1755777629.362744}}}
{"text": "2025-08-21 17:30:29.364 | DEBUG    | app.ws.live:emit_delta:408 - Emitted pnl delta: seq=36\n", "record": {"elapsed": {"repr": "0:00:33.017453", "seconds": 33.017453}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "emit_delta", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 408, "message": "Emitted pnl delta: seq=36", "module": "live", "name": "app.ws.live", "process": {"id": 21844, "name": "MainProcess"}, "thread": {"id": 24292, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:30:29.364632+05:30", "timestamp": 1755777629.364632}}}
{"text": "2025-08-21 17:30:29.367 | DEBUG    | app.ws.live:emit_delta:408 - Emitted positions delta: seq=37\n", "record": {"elapsed": {"repr": "0:00:33.020180", "seconds": 33.02018}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "emit_delta", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 408, "message": "Emitted positions delta: seq=37", "module": "live", "name": "app.ws.live", "process": {"id": 21844, "name": "MainProcess"}, "thread": {"id": 24292, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:30:29.367359+05:30", "timestamp": 1755777629.367359}}}
{"text": "2025-08-21 17:30:30.724 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:34.377583", "seconds": 34.377583}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 21844, "name": "MainProcess"}, "thread": {"id": 4252, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 17:30:30.724762+05:30", "timestamp": 1755777630.724762}}}
{"text": "2025-08-21 17:30:30.727 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:34.380057", "seconds": 34.380057}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 21844, "name": "MainProcess"}, "thread": {"id": 4252, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 17:30:30.727236+05:30", "timestamp": 1755777630.727236}}}
{"text": "2025-08-21 17:30:30.728 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:34.381752", "seconds": 34.381752}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 21844, "name": "MainProcess"}, "thread": {"id": 4252, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 17:30:30.728931+05:30", "timestamp": 1755777630.728931}}}
{"text": "2025-08-21 17:30:30.731 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:34.383867", "seconds": 34.383867}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 21844, "name": "MainProcess"}, "thread": {"id": 4252, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 17:30:30.731046+05:30", "timestamp": 1755777630.731046}}}
{"text": "2025-08-21 17:30:30.734 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:34.387053", "seconds": 34.387053}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 21844, "name": "MainProcess"}, "thread": {"id": 4252, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 17:30:30.734232+05:30", "timestamp": 1755777630.734232}}}
{"text": "2025-08-21 17:30:30.736 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:34.389553", "seconds": 34.389553}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 21844, "name": "MainProcess"}, "thread": {"id": 4252, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 17:30:30.736732+05:30", "timestamp": 1755777630.736732}}}
{"text": "2025-08-21 17:30:30.739 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:34.391826", "seconds": 34.391826}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 21844, "name": "MainProcess"}, "thread": {"id": 4252, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 17:30:30.739005+05:30", "timestamp": 1755777630.739005}}}
{"text": "2025-08-21 17:30:30.741 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:34.394334", "seconds": 34.394334}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 21844, "name": "MainProcess"}, "thread": {"id": 4252, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 17:30:30.741513+05:30", "timestamp": 1755777630.741513}}}
{"text": "2025-08-21 17:30:30.743 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:34.396816", "seconds": 34.396816}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 21844, "name": "MainProcess"}, "thread": {"id": 4252, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 17:30:30.743995+05:30", "timestamp": 1755777630.743995}}}
{"text": "2025-08-21 17:30:30.745 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:34.398455", "seconds": 34.398455}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 21844, "name": "MainProcess"}, "thread": {"id": 4252, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 17:30:30.745634+05:30", "timestamp": 1755777630.745634}}}
{"text": "2025-08-21 17:30:30.876 | INFO     | app.services.dhan_client:get_pnl:489 - Starting accurate P&L calculation\n", "record": {"elapsed": {"repr": "0:00:34.529113", "seconds": 34.529113}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 489, "message": "Starting accurate P&L calculation", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 21844, "name": "MainProcess"}, "thread": {"id": 24292, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:30:30.876292+05:30", "timestamp": 1755777630.876292}}}
{"text": "2025-08-21 17:30:30.878 | INFO     | app.services.dhan_client:get_pnl:491 - Fetched 5 positions\n", "record": {"elapsed": {"repr": "0:00:34.530973", "seconds": 34.530973}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 491, "message": "Fetched 5 positions", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 21844, "name": "MainProcess"}, "thread": {"id": 24292, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:30:30.878152+05:30", "timestamp": 1755777630.878152}}}
{"text": "2025-08-21 17:30:30.880 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for RELIANCE: unrealized=-1794991.44, today=-1794991.44\n", "record": {"elapsed": {"repr": "0:00:34.532883", "seconds": 34.532883}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for RELIANCE: unrealized=-1794991.44, today=-1794991.44", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 21844, "name": "MainProcess"}, "thread": {"id": 24292, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:30:30.880062+05:30", "timestamp": 1755777630.880062}}}
{"text": "2025-08-21 17:30:30.882 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for TCS: unrealized=325414.1, today=325414.1\n", "record": {"elapsed": {"repr": "0:00:34.535126", "seconds": 34.535126}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for TCS: unrealized=325414.1, today=325414.1", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 21844, "name": "MainProcess"}, "thread": {"id": 24292, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:30:30.882305+05:30", "timestamp": 1755777630.882305}}}
{"text": "2025-08-21 17:30:30.885 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for HDFC: unrealized=-335204.21, today=-335204.21\n", "record": {"elapsed": {"repr": "0:00:34.537856", "seconds": 34.537856}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for HDFC: unrealized=-335204.21, today=-335204.21", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 21844, "name": "MainProcess"}, "thread": {"id": 24292, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:30:30.885035+05:30", "timestamp": 1755777630.885035}}}
{"text": "2025-08-21 17:30:30.888 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for INFY: unrealized=1777827.08, today=1777827.08\n", "record": {"elapsed": {"repr": "0:00:34.540997", "seconds": 34.540997}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for INFY: unrealized=1777827.08, today=1777827.08", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 21844, "name": "MainProcess"}, "thread": {"id": 24292, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:30:30.888176+05:30", "timestamp": 1755777630.888176}}}
{"text": "2025-08-21 17:30:30.890 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for ICICIBANK: unrealized=-892630.3, today=-892630.3\n", "record": {"elapsed": {"repr": "0:00:34.543073", "seconds": 34.543073}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for ICICIBANK: unrealized=-892630.3, today=-892630.3", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 21844, "name": "MainProcess"}, "thread": {"id": 24292, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:30:30.890252+05:30", "timestamp": 1755777630.890252}}}
{"text": "2025-08-21 17:30:30.891 | INFO     | app.services.dhan_client:get_pnl:545 - Calculated totals - realized: 0.0, unrealized: -919584.77, day: -919584.77\n", "record": {"elapsed": {"repr": "0:00:34.544414", "seconds": 34.544414}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 545, "message": "Calculated totals - realized: 0.0, unrealized: -919584.77, day: -919584.77", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 21844, "name": "MainProcess"}, "thread": {"id": 24292, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:30:30.891593+05:30", "timestamp": 1755777630.891593}}}
{"text": "2025-08-21 17:30:30.893 | DEBUG    | app.services.dhan_client:get_pnl:554 - PnL consistency check passed: drift=‚Çπ0.00\n", "record": {"elapsed": {"repr": "0:00:34.546400", "seconds": 34.5464}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 554, "message": "PnL consistency check passed: drift=‚Çπ0.00", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 21844, "name": "MainProcess"}, "thread": {"id": 24292, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:30:30.893579+05:30", "timestamp": 1755777630.893579}}}
{"text": "2025-08-21 17:30:30.895 | DEBUG    | app.services.dhan_client:get_pnl:558 - Creating PnLTotals...\n", "record": {"elapsed": {"repr": "0:00:34.548464", "seconds": 34.548464}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 558, "message": "Creating PnLTotals...", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 21844, "name": "MainProcess"}, "thread": {"id": 24292, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:30:30.895643+05:30", "timestamp": 1755777630.895643}}}
{"text": "2025-08-21 17:30:30.897 | DEBUG    | app.services.dhan_client:get_pnl:565 - PnLTotals created successfully\n", "record": {"elapsed": {"repr": "0:00:34.550654", "seconds": 34.550654}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 565, "message": "PnLTotals created successfully", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 21844, "name": "MainProcess"}, "thread": {"id": 24292, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:30:30.897833+05:30", "timestamp": 1755777630.897833}}}
{"text": "2025-08-21 17:30:30.900 | DEBUG    | app.services.dhan_client:get_pnl:574 - Creating PnL model...\n", "record": {"elapsed": {"repr": "0:00:34.553046", "seconds": 34.553046}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 574, "message": "Creating PnL model...", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 21844, "name": "MainProcess"}, "thread": {"id": 24292, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:30:30.900225+05:30", "timestamp": 1755777630.900225}}}
{"text": "2025-08-21 17:30:30.902 | DEBUG    | app.services.dhan_client:get_pnl:575 - Model fields: totals=<class 'app.models.schemas.PnLTotals'>, perSymbol=5, updated_at=2025-08-21 17:30:30.879876+05:30, trading_day=2025-08-21\n", "record": {"elapsed": {"repr": "0:00:34.555016", "seconds": 34.555016}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 575, "message": "Model fields: totals=<class 'app.models.schemas.PnLTotals'>, perSymbol=5, updated_at=2025-08-21 17:30:30.879876+05:30, trading_day=2025-08-21", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 21844, "name": "MainProcess"}, "thread": {"id": 24292, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:30:30.902195+05:30", "timestamp": 1755777630.902195}}}
{"text": "2025-08-21 17:30:30.905 | DEBUG    | app.services.dhan_client:get_pnl:584 - Created PnL model: totals=PnLTotals(realized=0.0, unrealized=-919584.77, day=-919584.77, currency='INR') per_symbol=[PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1412, avg=1385.34, ltp=114.1, unrealized=-1794991.44, today_pnl=-1794991.44), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=1160, avg=1132.72, ltp=852.19, unrealized=325414.1, today_pnl=325414.1), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=791, avg=1735.92, ltp=1312.15, unrealized=-335204.21, today_pnl=-335204.21), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=1902, avg=1982.2, ltp=1047.49, unrealized=1777827.08, today_pnl=1777827.08), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=773, avg=1518.94, ltp=364.18, unrealized=-892630.3, today_pnl=-892630.3)] updated_at=datetime.datetime(2025, 8, 21, 17, 30, 30, 879876, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))) trading_day='2025-08-21'\n", "record": {"elapsed": {"repr": "0:00:34.558066", "seconds": 34.558066}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 584, "message": "Created PnL model: totals=PnLTotals(realized=0.0, unrealized=-919584.77, day=-919584.77, currency='INR') per_symbol=[PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1412, avg=1385.34, ltp=114.1, unrealized=-1794991.44, today_pnl=-1794991.44), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=1160, avg=1132.72, ltp=852.19, unrealized=325414.1, today_pnl=325414.1), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=791, avg=1735.92, ltp=1312.15, unrealized=-335204.21, today_pnl=-335204.21), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=1902, avg=1982.2, ltp=1047.49, unrealized=1777827.08, today_pnl=1777827.08), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=773, avg=1518.94, ltp=364.18, unrealized=-892630.3, today_pnl=-892630.3)] updated_at=datetime.datetime(2025, 8, 21, 17, 30, 30, 879876, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))) trading_day='2025-08-21'", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 21844, "name": "MainProcess"}, "thread": {"id": 24292, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:30:30.905245+05:30", "timestamp": 1755777630.905245}}}
{"text": "2025-08-21 17:30:30.908 | DEBUG    | app.services.dhan_client:get_pnl:585 - PnL model fields: {'totals': PnLTotals(realized=0.0, unrealized=-919584.77, day=-919584.77, currency='INR'), 'per_symbol': [PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1412, avg=1385.34, ltp=114.1, unrealized=-1794991.44, today_pnl=-1794991.44), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=1160, avg=1132.72, ltp=852.19, unrealized=325414.1, today_pnl=325414.1), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=791, avg=1735.92, ltp=1312.15, unrealized=-335204.21, today_pnl=-335204.21), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=1902, avg=1982.2, ltp=1047.49, unrealized=1777827.08, today_pnl=1777827.08), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=773, avg=1518.94, ltp=364.18, unrealized=-892630.3, today_pnl=-892630.3)], 'updated_at': datetime.datetime(2025, 8, 21, 17, 30, 30, 879876, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))), 'trading_day': '2025-08-21'}\n", "record": {"elapsed": {"repr": "0:00:34.561101", "seconds": 34.561101}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 585, "message": "PnL model fields: {'totals': PnLTotals(realized=0.0, unrealized=-919584.77, day=-919584.77, currency='INR'), 'per_symbol': [PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1412, avg=1385.34, ltp=114.1, unrealized=-1794991.44, today_pnl=-1794991.44), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=1160, avg=1132.72, ltp=852.19, unrealized=325414.1, today_pnl=325414.1), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=791, avg=1735.92, ltp=1312.15, unrealized=-335204.21, today_pnl=-335204.21), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=1902, avg=1982.2, ltp=1047.49, unrealized=1777827.08, today_pnl=1777827.08), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=773, avg=1518.94, ltp=364.18, unrealized=-892630.3, today_pnl=-892630.3)], 'updated_at': datetime.datetime(2025, 8, 21, 17, 30, 30, 879876, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))), 'trading_day': '2025-08-21'}", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 21844, "name": "MainProcess"}, "thread": {"id": 24292, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:30:30.908280+05:30", "timestamp": 1755777630.90828}}}
{"text": "2025-08-21 17:30:30.911 | INFO     | app.services.dhan_client:get_pnl:587 - P&L calculation completed successfully: 5 symbols, unrealized=‚Çπ-919584.77\n", "record": {"elapsed": {"repr": "0:00:34.564390", "seconds": 34.56439}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 587, "message": "P&L calculation completed successfully: 5 symbols, unrealized=‚Çπ-919584.77", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 21844, "name": "MainProcess"}, "thread": {"id": 24292, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:30:30.911569+05:30", "timestamp": 1755777630.911569}}}
{"text": "2025-08-21 17:30:30.914 | DEBUG    | app.ws.live:emit_delta:408 - Emitted pnl delta: seq=38\n", "record": {"elapsed": {"repr": "0:00:34.567748", "seconds": 34.567748}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "emit_delta", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 408, "message": "Emitted pnl delta: seq=38", "module": "live", "name": "app.ws.live", "process": {"id": 21844, "name": "MainProcess"}, "thread": {"id": 24292, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:30:30.914927+05:30", "timestamp": 1755777630.914927}}}
{"text": "2025-08-21 17:30:30.918 | DEBUG    | app.ws.live:emit_delta:408 - Emitted positions delta: seq=39\n", "record": {"elapsed": {"repr": "0:00:34.571244", "seconds": 34.571244}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "emit_delta", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 408, "message": "Emitted positions delta: seq=39", "module": "live", "name": "app.ws.live", "process": {"id": 21844, "name": "MainProcess"}, "thread": {"id": 24292, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:30:30.918423+05:30", "timestamp": 1755777630.918423}}}
{"text": "2025-08-21 17:30:32.707 | INFO     | app.services.dhan_client:get_pnl:489 - Starting accurate P&L calculation\n", "record": {"elapsed": {"repr": "0:00:36.360116", "seconds": 36.360116}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 489, "message": "Starting accurate P&L calculation", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 21844, "name": "MainProcess"}, "thread": {"id": 24292, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:30:32.707295+05:30", "timestamp": 1755777632.707295}}}
{"text": "2025-08-21 17:30:32.709 | INFO     | app.services.dhan_client:get_pnl:491 - Fetched 5 positions\n", "record": {"elapsed": {"repr": "0:00:36.361970", "seconds": 36.36197}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 491, "message": "Fetched 5 positions", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 21844, "name": "MainProcess"}, "thread": {"id": 24292, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:30:32.709149+05:30", "timestamp": 1755777632.709149}}}
{"text": "2025-08-21 17:30:32.711 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for RELIANCE: unrealized=-1794991.44, today=-1794991.44\n", "record": {"elapsed": {"repr": "0:00:36.363961", "seconds": 36.363961}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for RELIANCE: unrealized=-1794991.44, today=-1794991.44", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 21844, "name": "MainProcess"}, "thread": {"id": 24292, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:30:32.711140+05:30", "timestamp": 1755777632.71114}}}
{"text": "2025-08-21 17:30:32.713 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for TCS: unrealized=325414.1, today=325414.1\n", "record": {"elapsed": {"repr": "0:00:36.366250", "seconds": 36.36625}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for TCS: unrealized=325414.1, today=325414.1", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 21844, "name": "MainProcess"}, "thread": {"id": 24292, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:30:32.713429+05:30", "timestamp": 1755777632.713429}}}
{"text": "2025-08-21 17:30:32.716 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for HDFC: unrealized=-335204.21, today=-335204.21\n", "record": {"elapsed": {"repr": "0:00:36.368966", "seconds": 36.368966}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for HDFC: unrealized=-335204.21, today=-335204.21", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 21844, "name": "MainProcess"}, "thread": {"id": 24292, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:30:32.716145+05:30", "timestamp": 1755777632.716145}}}
{"text": "2025-08-21 17:30:32.718 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for INFY: unrealized=1777827.08, today=1777827.08\n", "record": {"elapsed": {"repr": "0:00:36.371075", "seconds": 36.371075}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for INFY: unrealized=1777827.08, today=1777827.08", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 21844, "name": "MainProcess"}, "thread": {"id": 24292, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:30:32.718254+05:30", "timestamp": 1755777632.718254}}}
{"text": "2025-08-21 17:30:32.720 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for ICICIBANK: unrealized=-892630.3, today=-892630.3\n", "record": {"elapsed": {"repr": "0:00:36.372925", "seconds": 36.372925}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for ICICIBANK: unrealized=-892630.3, today=-892630.3", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 21844, "name": "MainProcess"}, "thread": {"id": 24292, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:30:32.720104+05:30", "timestamp": 1755777632.720104}}}
{"text": "2025-08-21 17:30:32.722 | INFO     | app.services.dhan_client:get_pnl:545 - Calculated totals - realized: 0.0, unrealized: -919584.77, day: -919584.77\n", "record": {"elapsed": {"repr": "0:00:36.375151", "seconds": 36.375151}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 545, "message": "Calculated totals - realized: 0.0, unrealized: -919584.77, day: -919584.77", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 21844, "name": "MainProcess"}, "thread": {"id": 24292, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:30:32.722330+05:30", "timestamp": 1755777632.72233}}}
{"text": "2025-08-21 17:30:32.725 | DEBUG    | app.services.dhan_client:get_pnl:554 - PnL consistency check passed: drift=‚Çπ0.00\n", "record": {"elapsed": {"repr": "0:00:36.377999", "seconds": 36.377999}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 554, "message": "PnL consistency check passed: drift=‚Çπ0.00", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 21844, "name": "MainProcess"}, "thread": {"id": 24292, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:30:32.725178+05:30", "timestamp": 1755777632.725178}}}
{"text": "2025-08-21 17:30:32.727 | DEBUG    | app.services.dhan_client:get_pnl:558 - Creating PnLTotals...\n", "record": {"elapsed": {"repr": "0:00:36.380317", "seconds": 36.380317}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 558, "message": "Creating PnLTotals...", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 21844, "name": "MainProcess"}, "thread": {"id": 24292, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:30:32.727496+05:30", "timestamp": 1755777632.727496}}}
{"text": "2025-08-21 17:30:32.729 | DEBUG    | app.services.dhan_client:get_pnl:565 - PnLTotals created successfully\n", "record": {"elapsed": {"repr": "0:00:36.382394", "seconds": 36.382394}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 565, "message": "PnLTotals created successfully", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 21844, "name": "MainProcess"}, "thread": {"id": 24292, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:30:32.729573+05:30", "timestamp": 1755777632.729573}}}
{"text": "2025-08-21 17:30:32.731 | DEBUG    | app.services.dhan_client:get_pnl:574 - Creating PnL model...\n", "record": {"elapsed": {"repr": "0:00:36.384554", "seconds": 36.384554}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 574, "message": "Creating PnL model...", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 21844, "name": "MainProcess"}, "thread": {"id": 24292, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:30:32.731733+05:30", "timestamp": 1755777632.731733}}}
{"text": "2025-08-21 17:30:32.733 | DEBUG    | app.services.dhan_client:get_pnl:575 - Model fields: totals=<class 'app.models.schemas.PnLTotals'>, perSymbol=5, updated_at=2025-08-21 17:30:32.710878+05:30, trading_day=2025-08-21\n", "record": {"elapsed": {"repr": "0:00:36.386348", "seconds": 36.386348}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 575, "message": "Model fields: totals=<class 'app.models.schemas.PnLTotals'>, perSymbol=5, updated_at=2025-08-21 17:30:32.710878+05:30, trading_day=2025-08-21", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 21844, "name": "MainProcess"}, "thread": {"id": 24292, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:30:32.733527+05:30", "timestamp": 1755777632.733527}}}
{"text": "2025-08-21 17:30:32.737 | DEBUG    | app.services.dhan_client:get_pnl:584 - Created PnL model: totals=PnLTotals(realized=0.0, unrealized=-919584.77, day=-919584.77, currency='INR') per_symbol=[PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1412, avg=1385.34, ltp=114.1, unrealized=-1794991.44, today_pnl=-1794991.44), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=1160, avg=1132.72, ltp=852.19, unrealized=325414.1, today_pnl=325414.1), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=791, avg=1735.92, ltp=1312.15, unrealized=-335204.21, today_pnl=-335204.21), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=1902, avg=1982.2, ltp=1047.49, unrealized=1777827.08, today_pnl=1777827.08), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=773, avg=1518.94, ltp=364.18, unrealized=-892630.3, today_pnl=-892630.3)] updated_at=datetime.datetime(2025, 8, 21, 17, 30, 32, 710878, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))) trading_day='2025-08-21'\n", "record": {"elapsed": {"repr": "0:00:36.390375", "seconds": 36.390375}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 584, "message": "Created PnL model: totals=PnLTotals(realized=0.0, unrealized=-919584.77, day=-919584.77, currency='INR') per_symbol=[PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1412, avg=1385.34, ltp=114.1, unrealized=-1794991.44, today_pnl=-1794991.44), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=1160, avg=1132.72, ltp=852.19, unrealized=325414.1, today_pnl=325414.1), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=791, avg=1735.92, ltp=1312.15, unrealized=-335204.21, today_pnl=-335204.21), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=1902, avg=1982.2, ltp=1047.49, unrealized=1777827.08, today_pnl=1777827.08), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=773, avg=1518.94, ltp=364.18, unrealized=-892630.3, today_pnl=-892630.3)] updated_at=datetime.datetime(2025, 8, 21, 17, 30, 32, 710878, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))) trading_day='2025-08-21'", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 21844, "name": "MainProcess"}, "thread": {"id": 24292, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:30:32.737554+05:30", "timestamp": 1755777632.737554}}}
{"text": "2025-08-21 17:30:32.739 | DEBUG    | app.services.dhan_client:get_pnl:585 - PnL model fields: {'totals': PnLTotals(realized=0.0, unrealized=-919584.77, day=-919584.77, currency='INR'), 'per_symbol': [PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1412, avg=1385.34, ltp=114.1, unrealized=-1794991.44, today_pnl=-1794991.44), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=1160, avg=1132.72, ltp=852.19, unrealized=325414.1, today_pnl=325414.1), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=791, avg=1735.92, ltp=1312.15, unrealized=-335204.21, today_pnl=-335204.21), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=1902, avg=1982.2, ltp=1047.49, unrealized=1777827.08, today_pnl=1777827.08), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=773, avg=1518.94, ltp=364.18, unrealized=-892630.3, today_pnl=-892630.3)], 'updated_at': datetime.datetime(2025, 8, 21, 17, 30, 32, 710878, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))), 'trading_day': '2025-08-21'}\n", "record": {"elapsed": {"repr": "0:00:36.391936", "seconds": 36.391936}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 585, "message": "PnL model fields: {'totals': PnLTotals(realized=0.0, unrealized=-919584.77, day=-919584.77, currency='INR'), 'per_symbol': [PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1412, avg=1385.34, ltp=114.1, unrealized=-1794991.44, today_pnl=-1794991.44), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=1160, avg=1132.72, ltp=852.19, unrealized=325414.1, today_pnl=325414.1), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=791, avg=1735.92, ltp=1312.15, unrealized=-335204.21, today_pnl=-335204.21), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=1902, avg=1982.2, ltp=1047.49, unrealized=1777827.08, today_pnl=1777827.08), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=773, avg=1518.94, ltp=364.18, unrealized=-892630.3, today_pnl=-892630.3)], 'updated_at': datetime.datetime(2025, 8, 21, 17, 30, 32, 710878, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))), 'trading_day': '2025-08-21'}", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 21844, "name": "MainProcess"}, "thread": {"id": 24292, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:30:32.739115+05:30", "timestamp": 1755777632.739115}}}
{"text": "2025-08-21 17:30:32.742 | INFO     | app.services.dhan_client:get_pnl:587 - P&L calculation completed successfully: 5 symbols, unrealized=‚Çπ-919584.77\n", "record": {"elapsed": {"repr": "0:00:36.394824", "seconds": 36.394824}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 587, "message": "P&L calculation completed successfully: 5 symbols, unrealized=‚Çπ-919584.77", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 21844, "name": "MainProcess"}, "thread": {"id": 24292, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:30:32.742003+05:30", "timestamp": 1755777632.742003}}}
{"text": "2025-08-21 17:30:32.744 | DEBUG    | app.ws.live:emit_delta:408 - Emitted pnl delta: seq=40\n", "record": {"elapsed": {"repr": "0:00:36.397091", "seconds": 36.397091}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "emit_delta", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 408, "message": "Emitted pnl delta: seq=40", "module": "live", "name": "app.ws.live", "process": {"id": 21844, "name": "MainProcess"}, "thread": {"id": 24292, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:30:32.744270+05:30", "timestamp": 1755777632.74427}}}
{"text": "2025-08-21 17:30:32.750 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:36.403007", "seconds": 36.403007}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 21844, "name": "MainProcess"}, "thread": {"id": 4252, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 17:30:32.750186+05:30", "timestamp": 1755777632.750186}}}
{"text": "2025-08-21 17:30:32.751 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:36.404360", "seconds": 36.40436}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 21844, "name": "MainProcess"}, "thread": {"id": 4252, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 17:30:32.751539+05:30", "timestamp": 1755777632.751539}}}
{"text": "2025-08-21 17:30:32.753 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:36.406684", "seconds": 36.406684}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 21844, "name": "MainProcess"}, "thread": {"id": 4252, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 17:30:32.753863+05:30", "timestamp": 1755777632.753863}}}
{"text": "2025-08-21 17:30:32.755 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:36.408221", "seconds": 36.408221}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 21844, "name": "MainProcess"}, "thread": {"id": 4252, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 17:30:32.755400+05:30", "timestamp": 1755777632.7554}}}
{"text": "2025-08-21 17:30:32.757 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:36.410096", "seconds": 36.410096}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 21844, "name": "MainProcess"}, "thread": {"id": 4252, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 17:30:32.757275+05:30", "timestamp": 1755777632.757275}}}
{"text": "2025-08-21 17:30:32.758 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:36.411721", "seconds": 36.411721}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 21844, "name": "MainProcess"}, "thread": {"id": 4252, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 17:30:32.758900+05:30", "timestamp": 1755777632.7589}}}
{"text": "2025-08-21 17:30:32.761 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:36.414085", "seconds": 36.414085}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 21844, "name": "MainProcess"}, "thread": {"id": 4252, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 17:30:32.761264+05:30", "timestamp": 1755777632.761264}}}
{"text": "2025-08-21 17:30:32.762 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:36.415044", "seconds": 36.415044}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 21844, "name": "MainProcess"}, "thread": {"id": 4252, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 17:30:32.762223+05:30", "timestamp": 1755777632.762223}}}
{"text": "2025-08-21 17:30:32.764 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:36.417178", "seconds": 36.417178}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 21844, "name": "MainProcess"}, "thread": {"id": 4252, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 17:30:32.764357+05:30", "timestamp": 1755777632.764357}}}
{"text": "2025-08-21 17:30:32.765 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:36.418382", "seconds": 36.418382}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 21844, "name": "MainProcess"}, "thread": {"id": 4252, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 17:30:32.765561+05:30", "timestamp": 1755777632.765561}}}
{"text": "2025-08-21 17:30:34.447 | INFO     | app.services.dhan_client:get_pnl:489 - Starting accurate P&L calculation\n", "record": {"elapsed": {"repr": "0:00:38.100799", "seconds": 38.100799}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 489, "message": "Starting accurate P&L calculation", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 21844, "name": "MainProcess"}, "thread": {"id": 24292, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:30:34.447978+05:30", "timestamp": 1755777634.447978}}}
{"text": "2025-08-21 17:30:34.450 | INFO     | app.services.dhan_client:get_pnl:491 - Fetched 5 positions\n", "record": {"elapsed": {"repr": "0:00:38.103270", "seconds": 38.10327}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 491, "message": "Fetched 5 positions", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 21844, "name": "MainProcess"}, "thread": {"id": 24292, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:30:34.450449+05:30", "timestamp": 1755777634.450449}}}
{"text": "2025-08-21 17:30:34.453 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for RELIANCE: unrealized=-1793904.46, today=-1793904.46\n", "record": {"elapsed": {"repr": "0:00:38.105879", "seconds": 38.105879}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for RELIANCE: unrealized=-1793904.46, today=-1793904.46", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 21844, "name": "MainProcess"}, "thread": {"id": 24292, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:30:34.453058+05:30", "timestamp": 1755777634.453058}}}
{"text": "2025-08-21 17:30:34.455 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for TCS: unrealized=313852.87, today=313852.87\n", "record": {"elapsed": {"repr": "0:00:38.108432", "seconds": 38.108432}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for TCS: unrealized=313852.87, today=313852.87", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 21844, "name": "MainProcess"}, "thread": {"id": 24292, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:30:34.455611+05:30", "timestamp": 1755777634.455611}}}
{"text": "2025-08-21 17:30:34.460 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for HDFC: unrealized=-316209.94, today=-316209.94\n", "record": {"elapsed": {"repr": "0:00:38.113331", "seconds": 38.113331}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for HDFC: unrealized=-316209.94, today=-316209.94", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 21844, "name": "MainProcess"}, "thread": {"id": 24292, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:30:34.460510+05:30", "timestamp": 1755777634.46051}}}
{"text": "2025-08-21 17:30:34.463 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for INFY: unrealized=1780686.09, today=1780686.09\n", "record": {"elapsed": {"repr": "0:00:38.115908", "seconds": 38.115908}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for INFY: unrealized=1780686.09, today=1780686.09", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 21844, "name": "MainProcess"}, "thread": {"id": 24292, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:30:34.463087+05:30", "timestamp": 1755777634.463087}}}
{"text": "2025-08-21 17:30:34.465 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for ICICIBANK: unrealized=-887443.69, today=-887443.69\n", "record": {"elapsed": {"repr": "0:00:38.118144", "seconds": 38.118144}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for ICICIBANK: unrealized=-887443.69, today=-887443.69", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 21844, "name": "MainProcess"}, "thread": {"id": 24292, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:30:34.465323+05:30", "timestamp": 1755777634.465323}}}
{"text": "2025-08-21 17:30:34.467 | INFO     | app.services.dhan_client:get_pnl:545 - Calculated totals - realized: 0.0, unrealized: -903019.13, day: -903019.13\n", "record": {"elapsed": {"repr": "0:00:38.120619", "seconds": 38.120619}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 545, "message": "Calculated totals - realized: 0.0, unrealized: -903019.13, day: -903019.13", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 21844, "name": "MainProcess"}, "thread": {"id": 24292, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:30:34.467798+05:30", "timestamp": 1755777634.467798}}}
{"text": "2025-08-21 17:30:34.470 | DEBUG    | app.services.dhan_client:get_pnl:554 - PnL consistency check passed: drift=‚Çπ0.00\n", "record": {"elapsed": {"repr": "0:00:38.122947", "seconds": 38.122947}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 554, "message": "PnL consistency check passed: drift=‚Çπ0.00", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 21844, "name": "MainProcess"}, "thread": {"id": 24292, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:30:34.470126+05:30", "timestamp": 1755777634.470126}}}
{"text": "2025-08-21 17:30:34.472 | DEBUG    | app.services.dhan_client:get_pnl:558 - Creating PnLTotals...\n", "record": {"elapsed": {"repr": "0:00:38.125261", "seconds": 38.125261}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 558, "message": "Creating PnLTotals...", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 21844, "name": "MainProcess"}, "thread": {"id": 24292, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:30:34.472440+05:30", "timestamp": 1755777634.47244}}}
{"text": "2025-08-21 17:30:34.474 | DEBUG    | app.services.dhan_client:get_pnl:565 - PnLTotals created successfully\n", "record": {"elapsed": {"repr": "0:00:38.127536", "seconds": 38.127536}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 565, "message": "PnLTotals created successfully", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 21844, "name": "MainProcess"}, "thread": {"id": 24292, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:30:34.474715+05:30", "timestamp": 1755777634.474715}}}
{"text": "2025-08-21 17:30:34.476 | DEBUG    | app.services.dhan_client:get_pnl:574 - Creating PnL model...\n", "record": {"elapsed": {"repr": "0:00:38.129468", "seconds": 38.129468}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 574, "message": "Creating PnL model...", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 21844, "name": "MainProcess"}, "thread": {"id": 24292, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:30:34.476647+05:30", "timestamp": 1755777634.476647}}}
{"text": "2025-08-21 17:30:34.478 | DEBUG    | app.services.dhan_client:get_pnl:575 - Model fields: totals=<class 'app.models.schemas.PnLTotals'>, perSymbol=5, updated_at=2025-08-21 17:30:34.452783+05:30, trading_day=2025-08-21\n", "record": {"elapsed": {"repr": "0:00:38.131641", "seconds": 38.131641}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 575, "message": "Model fields: totals=<class 'app.models.schemas.PnLTotals'>, perSymbol=5, updated_at=2025-08-21 17:30:34.452783+05:30, trading_day=2025-08-21", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 21844, "name": "MainProcess"}, "thread": {"id": 24292, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:30:34.478820+05:30", "timestamp": 1755777634.47882}}}
{"text": "2025-08-21 17:30:34.481 | DEBUG    | app.services.dhan_client:get_pnl:584 - Created PnL model: totals=PnLTotals(realized=0.0, unrealized=-903019.13, day=-903019.13, currency='INR') per_symbol=[PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1412, avg=1385.34, ltp=114.87, unrealized=-1793904.46, today_pnl=-1793904.46), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=1160, avg=1132.72, ltp=862.16, unrealized=313852.87, today_pnl=313852.87), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=791, avg=1735.92, ltp=1336.16, unrealized=-316209.94, today_pnl=-316209.94), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=1902, avg=1982.2, ltp=1045.98, unrealized=1780686.09, today_pnl=1780686.09), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=773, avg=1518.94, ltp=370.89, unrealized=-887443.69, today_pnl=-887443.69)] updated_at=datetime.datetime(2025, 8, 21, 17, 30, 34, 452783, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))) trading_day='2025-08-21'\n", "record": {"elapsed": {"repr": "0:00:38.134237", "seconds": 38.134237}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 584, "message": "Created PnL model: totals=PnLTotals(realized=0.0, unrealized=-903019.13, day=-903019.13, currency='INR') per_symbol=[PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1412, avg=1385.34, ltp=114.87, unrealized=-1793904.46, today_pnl=-1793904.46), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=1160, avg=1132.72, ltp=862.16, unrealized=313852.87, today_pnl=313852.87), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=791, avg=1735.92, ltp=1336.16, unrealized=-316209.94, today_pnl=-316209.94), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=1902, avg=1982.2, ltp=1045.98, unrealized=1780686.09, today_pnl=1780686.09), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=773, avg=1518.94, ltp=370.89, unrealized=-887443.69, today_pnl=-887443.69)] updated_at=datetime.datetime(2025, 8, 21, 17, 30, 34, 452783, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))) trading_day='2025-08-21'", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 21844, "name": "MainProcess"}, "thread": {"id": 24292, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:30:34.481416+05:30", "timestamp": 1755777634.481416}}}
{"text": "2025-08-21 17:30:34.485 | DEBUG    | app.services.dhan_client:get_pnl:585 - PnL model fields: {'totals': PnLTotals(realized=0.0, unrealized=-903019.13, day=-903019.13, currency='INR'), 'per_symbol': [PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1412, avg=1385.34, ltp=114.87, unrealized=-1793904.46, today_pnl=-1793904.46), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=1160, avg=1132.72, ltp=862.16, unrealized=313852.87, today_pnl=313852.87), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=791, avg=1735.92, ltp=1336.16, unrealized=-316209.94, today_pnl=-316209.94), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=1902, avg=1982.2, ltp=1045.98, unrealized=1780686.09, today_pnl=1780686.09), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=773, avg=1518.94, ltp=370.89, unrealized=-887443.69, today_pnl=-887443.69)], 'updated_at': datetime.datetime(2025, 8, 21, 17, 30, 34, 452783, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))), 'trading_day': '2025-08-21'}\n", "record": {"elapsed": {"repr": "0:00:38.138534", "seconds": 38.138534}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 585, "message": "PnL model fields: {'totals': PnLTotals(realized=0.0, unrealized=-903019.13, day=-903019.13, currency='INR'), 'per_symbol': [PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1412, avg=1385.34, ltp=114.87, unrealized=-1793904.46, today_pnl=-1793904.46), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=1160, avg=1132.72, ltp=862.16, unrealized=313852.87, today_pnl=313852.87), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=791, avg=1735.92, ltp=1336.16, unrealized=-316209.94, today_pnl=-316209.94), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=1902, avg=1982.2, ltp=1045.98, unrealized=1780686.09, today_pnl=1780686.09), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=773, avg=1518.94, ltp=370.89, unrealized=-887443.69, today_pnl=-887443.69)], 'updated_at': datetime.datetime(2025, 8, 21, 17, 30, 34, 452783, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))), 'trading_day': '2025-08-21'}", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 21844, "name": "MainProcess"}, "thread": {"id": 24292, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:30:34.485713+05:30", "timestamp": 1755777634.485713}}}
{"text": "2025-08-21 17:30:34.489 | INFO     | app.services.dhan_client:get_pnl:587 - P&L calculation completed successfully: 5 symbols, unrealized=‚Çπ-903019.13\n", "record": {"elapsed": {"repr": "0:00:38.142238", "seconds": 38.142238}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 587, "message": "P&L calculation completed successfully: 5 symbols, unrealized=‚Çπ-903019.13", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 21844, "name": "MainProcess"}, "thread": {"id": 24292, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:30:34.489417+05:30", "timestamp": 1755777634.489417}}}
{"text": "2025-08-21 17:30:34.492 | DEBUG    | app.ws.live:emit_delta:408 - Emitted pnl delta: seq=41\n", "record": {"elapsed": {"repr": "0:00:38.145264", "seconds": 38.145264}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "emit_delta", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 408, "message": "Emitted pnl delta: seq=41", "module": "live", "name": "app.ws.live", "process": {"id": 21844, "name": "MainProcess"}, "thread": {"id": 24292, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:30:34.492443+05:30", "timestamp": 1755777634.492443}}}
{"text": "2025-08-21 17:30:34.496 | DEBUG    | app.ws.live:emit_delta:408 - Emitted positions delta: seq=42\n", "record": {"elapsed": {"repr": "0:00:38.149301", "seconds": 38.149301}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "emit_delta", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 408, "message": "Emitted positions delta: seq=42", "module": "live", "name": "app.ws.live", "process": {"id": 21844, "name": "MainProcess"}, "thread": {"id": 24292, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:30:34.496480+05:30", "timestamp": 1755777634.49648}}}
{"text": "2025-08-21 17:30:34.768 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:38.420827", "seconds": 38.420827}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 21844, "name": "MainProcess"}, "thread": {"id": 4252, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 17:30:34.768006+05:30", "timestamp": 1755777634.768006}}}
{"text": "2025-08-21 17:30:34.771 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:38.423967", "seconds": 38.423967}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 21844, "name": "MainProcess"}, "thread": {"id": 4252, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 17:30:34.771146+05:30", "timestamp": 1755777634.771146}}}
{"text": "2025-08-21 17:30:34.773 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:38.426202", "seconds": 38.426202}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 21844, "name": "MainProcess"}, "thread": {"id": 4252, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 17:30:34.773381+05:30", "timestamp": 1755777634.773381}}}
{"text": "2025-08-21 17:30:34.775 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:38.428008", "seconds": 38.428008}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 21844, "name": "MainProcess"}, "thread": {"id": 4252, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 17:30:34.775187+05:30", "timestamp": 1755777634.775187}}}
{"text": "2025-08-21 17:30:34.776 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:38.429732", "seconds": 38.429732}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 21844, "name": "MainProcess"}, "thread": {"id": 4252, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 17:30:34.776911+05:30", "timestamp": 1755777634.776911}}}
{"text": "2025-08-21 17:30:34.779 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:38.432028", "seconds": 38.432028}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 21844, "name": "MainProcess"}, "thread": {"id": 4252, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 17:30:34.779207+05:30", "timestamp": 1755777634.779207}}}
{"text": "2025-08-21 17:30:34.781 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:38.434733", "seconds": 38.434733}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 21844, "name": "MainProcess"}, "thread": {"id": 4252, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 17:30:34.781912+05:30", "timestamp": 1755777634.781912}}}
{"text": "2025-08-21 17:30:34.784 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:38.437127", "seconds": 38.437127}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 21844, "name": "MainProcess"}, "thread": {"id": 4252, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 17:30:34.784306+05:30", "timestamp": 1755777634.784306}}}
{"text": "2025-08-21 17:30:34.787 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:38.439872", "seconds": 38.439872}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 21844, "name": "MainProcess"}, "thread": {"id": 4252, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 17:30:34.787051+05:30", "timestamp": 1755777634.787051}}}
{"text": "2025-08-21 17:30:34.789 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:38.441986", "seconds": 38.441986}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 21844, "name": "MainProcess"}, "thread": {"id": 4252, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 17:30:34.789165+05:30", "timestamp": 1755777634.789165}}}
{"text": "2025-08-21 17:30:36.033 | INFO     | app.ws.live:shutdown_event:557 - Stopping WebSocket polling...\n", "record": {"elapsed": {"repr": "0:00:39.686080", "seconds": 39.68608}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "shutdown_event", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 557, "message": "Stopping WebSocket polling...", "module": "live", "name": "app.ws.live", "process": {"id": 21844, "name": "MainProcess"}, "thread": {"id": 24292, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:30:36.033259+05:30", "timestamp": 1755777636.033259}}}
{"text": "2025-08-21 17:30:36.036 | INFO     | app.ws.live:shutdown_event:557 - Stopping WebSocket polling...\n", "record": {"elapsed": {"repr": "0:00:39.688861", "seconds": 39.688861}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "shutdown_event", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 557, "message": "Stopping WebSocket polling...", "module": "live", "name": "app.ws.live", "process": {"id": 21844, "name": "MainProcess"}, "thread": {"id": 24292, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:30:36.036040+05:30", "timestamp": 1755777636.03604}}}
{"text": "2025-08-21 17:30:36.037 | INFO     | app.main:shutdown_event:35 - Dhan Automation Backend Application shutting down\n", "record": {"elapsed": {"repr": "0:00:39.690728", "seconds": 39.690728}, "exception": null, "extra": {}, "file": {"name": "main.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\main.py"}, "function": "shutdown_event", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 35, "message": "Dhan Automation Backend Application shutting down", "module": "main", "name": "app.main", "process": {"id": 21844, "name": "MainProcess"}, "thread": {"id": 24292, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:30:36.037907+05:30", "timestamp": 1755777636.037907}}}
{"text": "2025-08-21 17:33:47.028 | INFO     | app.services.dhan_client:_initialize_mock_data:53 - Initializing mock data...\n", "record": {"elapsed": {"repr": "0:00:00.082821", "seconds": 0.082821}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_initialize_mock_data", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 53, "message": "Initializing mock data...", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27372, "name": "MainProcess"}, "thread": {"id": 26004, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:33:47.028518+05:30", "timestamp": 1755777827.028518}}}
{"text": "2025-08-21 17:33:47.030 | INFO     | app.services.dhan_client:_initialize_mock_data:75 - Created mock holding for RELIANCE: qty=991, avg_price=370.92632452883566, ltp=347.91609474887457\n", "record": {"elapsed": {"repr": "0:00:00.084519", "seconds": 0.084519}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_initialize_mock_data", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 75, "message": "Created mock holding for RELIANCE: qty=991, avg_price=370.92632452883566, ltp=347.91609474887457", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27372, "name": "MainProcess"}, "thread": {"id": 26004, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:33:47.030216+05:30", "timestamp": 1755777827.030216}}}
{"text": "2025-08-21 17:33:47.031 | INFO     | app.services.dhan_client:_initialize_mock_data:75 - Created mock holding for TCS: qty=2896, avg_price=1764.813746755011, ltp=1629.6846303260668\n", "record": {"elapsed": {"repr": "0:00:00.086026", "seconds": 0.086026}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_initialize_mock_data", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 75, "message": "Created mock holding for TCS: qty=2896, avg_price=1764.813746755011, ltp=1629.6846303260668", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27372, "name": "MainProcess"}, "thread": {"id": 26004, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:33:47.031723+05:30", "timestamp": 1755777827.031723}}}
{"text": "2025-08-21 17:33:47.032 | INFO     | app.services.dhan_client:_initialize_mock_data:75 - Created mock holding for HDFC: qty=2401, avg_price=318.1772738712431, ltp=373.9099953533914\n", "record": {"elapsed": {"repr": "0:00:00.087274", "seconds": 0.087274}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_initialize_mock_data", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 75, "message": "Created mock holding for HDFC: qty=2401, avg_price=318.1772738712431, ltp=373.9099953533914", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27372, "name": "MainProcess"}, "thread": {"id": 26004, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:33:47.032971+05:30", "timestamp": 1755777827.032971}}}
{"text": "2025-08-21 17:33:47.033 | INFO     | app.services.dhan_client:_initialize_mock_data:75 - Created mock holding for INFY: qty=1930, avg_price=1475.8306573667026, ltp=1242.7972046799919\n", "record": {"elapsed": {"repr": "0:00:00.088257", "seconds": 0.088257}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_initialize_mock_data", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 75, "message": "Created mock holding for INFY: qty=1930, avg_price=1475.8306573667026, ltp=1242.7972046799919", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27372, "name": "MainProcess"}, "thread": {"id": 26004, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:33:47.033954+05:30", "timestamp": 1755777827.033954}}}
{"text": "2025-08-21 17:33:47.035 | INFO     | app.services.dhan_client:_initialize_mock_data:75 - Created mock holding for ICICIBANK: qty=3274, avg_price=283.050550872054, ltp=307.3685417758627\n", "record": {"elapsed": {"repr": "0:00:00.089361", "seconds": 0.089361}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_initialize_mock_data", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 75, "message": "Created mock holding for ICICIBANK: qty=3274, avg_price=283.050550872054, ltp=307.3685417758627", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27372, "name": "MainProcess"}, "thread": {"id": 26004, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:33:47.035058+05:30", "timestamp": 1755777827.035058}}}
{"text": "2025-08-21 17:33:47.036 | INFO     | app.services.dhan_client:_initialize_mock_data:75 - Created mock holding for HINDUNILVR: qty=4312, avg_price=422.96278879836314, ltp=382.90613959050165\n", "record": {"elapsed": {"repr": "0:00:00.091091", "seconds": 0.091091}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_initialize_mock_data", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 75, "message": "Created mock holding for HINDUNILVR: qty=4312, avg_price=422.96278879836314, ltp=382.90613959050165", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27372, "name": "MainProcess"}, "thread": {"id": 26004, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:33:47.036788+05:30", "timestamp": 1755777827.036788}}}
{"text": "2025-08-21 17:33:47.038 | INFO     | app.services.dhan_client:_initialize_mock_data:75 - Created mock holding for ITC: qty=1086, avg_price=1594.2430207296236, ltp=1764.365107058711\n", "record": {"elapsed": {"repr": "0:00:00.092319", "seconds": 0.092319}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_initialize_mock_data", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 75, "message": "Created mock holding for ITC: qty=1086, avg_price=1594.2430207296236, ltp=1764.365107058711", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27372, "name": "MainProcess"}, "thread": {"id": 26004, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:33:47.038016+05:30", "timestamp": 1755777827.038016}}}
{"text": "2025-08-21 17:33:47.039 | INFO     | app.services.dhan_client:_initialize_mock_data:75 - Created mock holding for SBIN: qty=4610, avg_price=1710.6184304334022, ltp=1789.989147321066\n", "record": {"elapsed": {"repr": "0:00:00.093528", "seconds": 0.093528}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_initialize_mock_data", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 75, "message": "Created mock holding for SBIN: qty=4610, avg_price=1710.6184304334022, ltp=1789.989147321066", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27372, "name": "MainProcess"}, "thread": {"id": 26004, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:33:47.039225+05:30", "timestamp": 1755777827.039225}}}
{"text": "2025-08-21 17:33:47.040 | INFO     | app.services.dhan_client:_initialize_mock_data:75 - Created mock holding for BHARTIARTL: qty=4565, avg_price=1339.6307408375258, ltp=1414.9343295584954\n", "record": {"elapsed": {"repr": "0:00:00.094953", "seconds": 0.094953}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_initialize_mock_data", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 75, "message": "Created mock holding for BHARTIARTL: qty=4565, avg_price=1339.6307408375258, ltp=1414.9343295584954", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27372, "name": "MainProcess"}, "thread": {"id": 26004, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:33:47.040650+05:30", "timestamp": 1755777827.04065}}}
{"text": "2025-08-21 17:33:47.041 | INFO     | app.services.dhan_client:_initialize_mock_data:75 - Created mock holding for KOTAKBANK: qty=1980, avg_price=1306.4618152082278, ltp=1291.9725102656128\n", "record": {"elapsed": {"repr": "0:00:00.096016", "seconds": 0.096016}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_initialize_mock_data", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 75, "message": "Created mock holding for KOTAKBANK: qty=1980, avg_price=1306.4618152082278, ltp=1291.9725102656128", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27372, "name": "MainProcess"}, "thread": {"id": 26004, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:33:47.041713+05:30", "timestamp": 1755777827.041713}}}
{"text": "2025-08-21 17:33:47.042 | INFO     | app.services.dhan_client:_initialize_mock_data:77 - Created 10 mock holdings\n", "record": {"elapsed": {"repr": "0:00:00.097294", "seconds": 0.097294}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_initialize_mock_data", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 77, "message": "Created 10 mock holdings", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27372, "name": "MainProcess"}, "thread": {"id": 26004, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:33:47.042991+05:30", "timestamp": 1755777827.042991}}}
{"text": "2025-08-21 17:33:47.044 | INFO     | app.services.dhan_client:_initialize_mock_data:91 - Created mock position for RELIANCE: id=pos_001, qty=1250, avg_price=1445.94\n", "record": {"elapsed": {"repr": "0:00:00.099048", "seconds": 0.099048}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_initialize_mock_data", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 91, "message": "Created mock position for RELIANCE: id=pos_001, qty=1250, avg_price=1445.94", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27372, "name": "MainProcess"}, "thread": {"id": 26004, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:33:47.044745+05:30", "timestamp": 1755777827.044745}}}
{"text": "2025-08-21 17:33:47.045 | INFO     | app.services.dhan_client:_initialize_mock_data:91 - Created mock position for TCS: id=pos_002, qty=1814, avg_price=1005.68\n", "record": {"elapsed": {"repr": "0:00:00.100076", "seconds": 0.100076}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_initialize_mock_data", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 91, "message": "Created mock position for TCS: id=pos_002, qty=1814, avg_price=1005.68", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27372, "name": "MainProcess"}, "thread": {"id": 26004, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:33:47.045773+05:30", "timestamp": 1755777827.045773}}}
{"text": "2025-08-21 17:33:47.046 | INFO     | app.services.dhan_client:_initialize_mock_data:91 - Created mock position for HDFC: id=pos_003, qty=734, avg_price=1197.77\n", "record": {"elapsed": {"repr": "0:00:00.101171", "seconds": 0.101171}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_initialize_mock_data", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 91, "message": "Created mock position for HDFC: id=pos_003, qty=734, avg_price=1197.77", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27372, "name": "MainProcess"}, "thread": {"id": 26004, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:33:47.046868+05:30", "timestamp": 1755777827.046868}}}
{"text": "2025-08-21 17:33:47.047 | INFO     | app.services.dhan_client:_initialize_mock_data:91 - Created mock position for INFY: id=pos_004, qty=1135, avg_price=1757.83\n", "record": {"elapsed": {"repr": "0:00:00.102299", "seconds": 0.102299}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_initialize_mock_data", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 91, "message": "Created mock position for INFY: id=pos_004, qty=1135, avg_price=1757.83", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27372, "name": "MainProcess"}, "thread": {"id": 26004, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:33:47.047996+05:30", "timestamp": 1755777827.047996}}}
{"text": "2025-08-21 17:33:47.049 | INFO     | app.services.dhan_client:_initialize_mock_data:91 - Created mock position for ICICIBANK: id=pos_005, qty=1874, avg_price=1965.49\n", "record": {"elapsed": {"repr": "0:00:00.103746", "seconds": 0.103746}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_initialize_mock_data", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 91, "message": "Created mock position for ICICIBANK: id=pos_005, qty=1874, avg_price=1965.49", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27372, "name": "MainProcess"}, "thread": {"id": 26004, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:33:47.049443+05:30", "timestamp": 1755777827.049443}}}
{"text": "2025-08-21 17:33:47.050 | INFO     | app.services.dhan_client:_initialize_mock_data:93 - Created 5 mock positions\n", "record": {"elapsed": {"repr": "0:00:00.104897", "seconds": 0.104897}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_initialize_mock_data", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 93, "message": "Created 5 mock positions", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27372, "name": "MainProcess"}, "thread": {"id": 26004, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:33:47.050594+05:30", "timestamp": 1755777827.050594}}}
{"text": "2025-08-21 17:33:47.053 | INFO     | app.services.dhan_client:_initialize_mock_data:111 - Created 10 mock orders\n", "record": {"elapsed": {"repr": "0:00:00.107397", "seconds": 0.107397}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_initialize_mock_data", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 111, "message": "Created 10 mock orders", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27372, "name": "MainProcess"}, "thread": {"id": 26004, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:33:47.053094+05:30", "timestamp": 1755777827.053094}}}
{"text": "2025-08-21 17:33:47.054 | INFO     | app.services.dhan_client:_initialize_mock_data:127 - Created 20 mock trades\n", "record": {"elapsed": {"repr": "0:00:00.109097", "seconds": 0.109097}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_initialize_mock_data", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 127, "message": "Created 20 mock trades", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27372, "name": "MainProcess"}, "thread": {"id": 26004, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:33:47.054794+05:30", "timestamp": 1755777827.054794}}}
{"text": "2025-08-21 17:33:47.056 | INFO     | app.services.dhan_client:_initialize_mock_data:128 - Mock data initialization completed successfully\n", "record": {"elapsed": {"repr": "0:00:00.110422", "seconds": 0.110422}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_initialize_mock_data", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 128, "message": "Mock data initialization completed successfully", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27372, "name": "MainProcess"}, "thread": {"id": 26004, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:33:47.056119+05:30", "timestamp": 1755777827.056119}}}
{"text": "2025-08-21 17:33:47.103 | INFO     | app.main:<module>:38 - Starting Dhan Automation Backend Application\n", "record": {"elapsed": {"repr": "0:00:00.158104", "seconds": 0.158104}, "exception": null, "extra": {}, "file": {"name": "main.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\main.py"}, "function": "<module>", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 38, "message": "Starting Dhan Automation Backend Application", "module": "main", "name": "app.main", "process": {"id": 27372, "name": "MainProcess"}, "thread": {"id": 26004, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:33:47.103801+05:30", "timestamp": 1755777827.103801}}}
{"text": "2025-08-21 17:33:47.107 | INFO     | app.ws.live:startup_event:551 - Starting WebSocket polling...\n", "record": {"elapsed": {"repr": "0:00:00.162260", "seconds": 0.16226}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "startup_event", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 551, "message": "Starting WebSocket polling...", "module": "live", "name": "app.ws.live", "process": {"id": 27372, "name": "MainProcess"}, "thread": {"id": 26004, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:33:47.107957+05:30", "timestamp": 1755777827.107957}}}
{"text": "2025-08-21 17:33:47.109 | INFO     | app.main:startup_event:30 - Dhan Automation Backend Application started successfully\n", "record": {"elapsed": {"repr": "0:00:00.163620", "seconds": 0.16362}, "exception": null, "extra": {}, "file": {"name": "main.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\main.py"}, "function": "startup_event", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 30, "message": "Dhan Automation Backend Application started successfully", "module": "main", "name": "app.main", "process": {"id": 27372, "name": "MainProcess"}, "thread": {"id": 26004, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:33:47.109317+05:30", "timestamp": 1755777827.109317}}}
{"text": "2025-08-21 17:33:47.110 | INFO     | app.main:startup_event:31 - Using MOCK data mode\n", "record": {"elapsed": {"repr": "0:00:00.164728", "seconds": 0.164728}, "exception": null, "extra": {}, "file": {"name": "main.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\main.py"}, "function": "startup_event", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 31, "message": "Using MOCK data mode", "module": "main", "name": "app.main", "process": {"id": 27372, "name": "MainProcess"}, "thread": {"id": 26004, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:33:47.110425+05:30", "timestamp": 1755777827.110425}}}
{"text": "2025-08-21 17:33:47.111 | INFO     | app.ws.live:startup_event:551 - Starting WebSocket polling...\n", "record": {"elapsed": {"repr": "0:00:00.166221", "seconds": 0.166221}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "startup_event", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 551, "message": "Starting WebSocket polling...", "module": "live", "name": "app.ws.live", "process": {"id": 27372, "name": "MainProcess"}, "thread": {"id": 26004, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:33:47.111918+05:30", "timestamp": 1755777827.111918}}}
{"text": "2025-08-21 17:33:48.994 | DEBUG    | app.ws.live:emit_delta:408 - Emitted positions delta: seq=1\n", "record": {"elapsed": {"repr": "0:00:02.048736", "seconds": 2.048736}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "emit_delta", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 408, "message": "Emitted positions delta: seq=1", "module": "live", "name": "app.ws.live", "process": {"id": 27372, "name": "MainProcess"}, "thread": {"id": 26004, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:33:48.994433+05:30", "timestamp": 1755777828.994433}}}
{"text": "2025-08-21 17:33:48.995 | INFO     | app.services.dhan_client:get_pnl:489 - Starting accurate P&L calculation\n", "record": {"elapsed": {"repr": "0:00:02.050152", "seconds": 2.050152}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 489, "message": "Starting accurate P&L calculation", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27372, "name": "MainProcess"}, "thread": {"id": 26004, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:33:48.995849+05:30", "timestamp": 1755777828.995849}}}
{"text": "2025-08-21 17:33:48.996 | INFO     | app.services.dhan_client:get_pnl:491 - Fetched 5 positions\n", "record": {"elapsed": {"repr": "0:00:02.051069", "seconds": 2.051069}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 491, "message": "Fetched 5 positions", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27372, "name": "MainProcess"}, "thread": {"id": 26004, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:33:48.996766+05:30", "timestamp": 1755777828.996766}}}
{"text": "2025-08-21 17:33:48.997 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for RELIANCE: unrealized=-1372529.88, today=-1372529.88\n", "record": {"elapsed": {"repr": "0:00:02.052043", "seconds": 2.052043}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for RELIANCE: unrealized=-1372529.88, today=-1372529.88", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27372, "name": "MainProcess"}, "thread": {"id": 26004, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:33:48.997740+05:30", "timestamp": 1755777828.99774}}}
{"text": "2025-08-21 17:33:48.998 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for TCS: unrealized=-1131944.4, today=-1131944.4\n", "record": {"elapsed": {"repr": "0:00:02.053043", "seconds": 2.053043}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for TCS: unrealized=-1131944.4, today=-1131944.4", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27372, "name": "MainProcess"}, "thread": {"id": 26004, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:33:48.998740+05:30", "timestamp": 1755777828.99874}}}
{"text": "2025-08-21 17:33:48.999 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for HDFC: unrealized=-604713.24, today=-604713.24\n", "record": {"elapsed": {"repr": "0:00:02.054102", "seconds": 2.054102}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for HDFC: unrealized=-604713.24, today=-604713.24", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27372, "name": "MainProcess"}, "thread": {"id": 26004, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:33:48.999799+05:30", "timestamp": 1755777828.999799}}}
{"text": "2025-08-21 17:33:49.001 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for INFY: unrealized=584562.22, today=584562.22\n", "record": {"elapsed": {"repr": "0:00:02.055332", "seconds": 2.055332}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for INFY: unrealized=584562.22, today=584562.22", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27372, "name": "MainProcess"}, "thread": {"id": 26004, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:33:49.001029+05:30", "timestamp": 1755777829.001029}}}
{"text": "2025-08-21 17:33:49.002 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for ICICIBANK: unrealized=-3107319.61, today=-3107319.61\n", "record": {"elapsed": {"repr": "0:00:02.057062", "seconds": 2.057062}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for ICICIBANK: unrealized=-3107319.61, today=-3107319.61", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27372, "name": "MainProcess"}, "thread": {"id": 26004, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:33:49.002759+05:30", "timestamp": 1755777829.002759}}}
{"text": "2025-08-21 17:33:49.004 | INFO     | app.services.dhan_client:get_pnl:545 - Calculated totals - realized: 0.0, unrealized: -5631944.91, day: -5631944.91\n", "record": {"elapsed": {"repr": "0:00:02.058324", "seconds": 2.058324}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 545, "message": "Calculated totals - realized: 0.0, unrealized: -5631944.91, day: -5631944.91", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27372, "name": "MainProcess"}, "thread": {"id": 26004, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:33:49.004021+05:30", "timestamp": 1755777829.004021}}}
{"text": "2025-08-21 17:33:49.005 | DEBUG    | app.services.dhan_client:get_pnl:554 - PnL consistency check passed: drift=‚Çπ0.00\n", "record": {"elapsed": {"repr": "0:00:02.059374", "seconds": 2.059374}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 554, "message": "PnL consistency check passed: drift=‚Çπ0.00", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27372, "name": "MainProcess"}, "thread": {"id": 26004, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:33:49.005071+05:30", "timestamp": 1755777829.005071}}}
{"text": "2025-08-21 17:33:49.006 | DEBUG    | app.services.dhan_client:get_pnl:558 - Creating PnLTotals...\n", "record": {"elapsed": {"repr": "0:00:02.060575", "seconds": 2.060575}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 558, "message": "Creating PnLTotals...", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27372, "name": "MainProcess"}, "thread": {"id": 26004, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:33:49.006272+05:30", "timestamp": 1755777829.006272}}}
{"text": "2025-08-21 17:33:49.007 | DEBUG    | app.services.dhan_client:get_pnl:565 - PnLTotals created successfully\n", "record": {"elapsed": {"repr": "0:00:02.061673", "seconds": 2.061673}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 565, "message": "PnLTotals created successfully", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27372, "name": "MainProcess"}, "thread": {"id": 26004, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:33:49.007370+05:30", "timestamp": 1755777829.00737}}}
{"text": "2025-08-21 17:33:49.008 | DEBUG    | app.services.dhan_client:get_pnl:574 - Creating PnL model...\n", "record": {"elapsed": {"repr": "0:00:02.062806", "seconds": 2.062806}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 574, "message": "Creating PnL model...", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27372, "name": "MainProcess"}, "thread": {"id": 26004, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:33:49.008503+05:30", "timestamp": 1755777829.008503}}}
{"text": "2025-08-21 17:33:49.009 | DEBUG    | app.services.dhan_client:get_pnl:575 - Model fields: totals=<class 'app.models.schemas.PnLTotals'>, perSymbol=5, updated_at=2025-08-21 17:33:48.997617+05:30, trading_day=2025-08-21\n", "record": {"elapsed": {"repr": "0:00:02.064086", "seconds": 2.064086}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 575, "message": "Model fields: totals=<class 'app.models.schemas.PnLTotals'>, perSymbol=5, updated_at=2025-08-21 17:33:48.997617+05:30, trading_day=2025-08-21", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27372, "name": "MainProcess"}, "thread": {"id": 26004, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:33:49.009783+05:30", "timestamp": 1755777829.009783}}}
{"text": "2025-08-21 17:33:49.011 | DEBUG    | app.services.dhan_client:get_pnl:584 - Created PnL model: totals=PnLTotals(realized=0.0, unrealized=-5631944.91, day=-5631944.91, currency='INR') per_symbol=[PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1250, avg=1445.94, ltp=347.92, unrealized=-1372529.88, today_pnl=-1372529.88), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=1814, avg=1005.68, ltp=1629.68, unrealized=-1131944.4, today_pnl=-1131944.4), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=734, avg=1197.77, ltp=373.91, unrealized=-604713.24, today_pnl=-604713.24), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=1135, avg=1757.83, ltp=1242.8, unrealized=584562.22, today_pnl=584562.22), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=1874, avg=1965.49, ltp=307.37, unrealized=-3107319.61, today_pnl=-3107319.61)] updated_at=datetime.datetime(2025, 8, 21, 17, 33, 48, 997617, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))) trading_day='2025-08-21'\n", "record": {"elapsed": {"repr": "0:00:02.066028", "seconds": 2.066028}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 584, "message": "Created PnL model: totals=PnLTotals(realized=0.0, unrealized=-5631944.91, day=-5631944.91, currency='INR') per_symbol=[PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1250, avg=1445.94, ltp=347.92, unrealized=-1372529.88, today_pnl=-1372529.88), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=1814, avg=1005.68, ltp=1629.68, unrealized=-1131944.4, today_pnl=-1131944.4), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=734, avg=1197.77, ltp=373.91, unrealized=-604713.24, today_pnl=-604713.24), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=1135, avg=1757.83, ltp=1242.8, unrealized=584562.22, today_pnl=584562.22), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=1874, avg=1965.49, ltp=307.37, unrealized=-3107319.61, today_pnl=-3107319.61)] updated_at=datetime.datetime(2025, 8, 21, 17, 33, 48, 997617, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))) trading_day='2025-08-21'", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27372, "name": "MainProcess"}, "thread": {"id": 26004, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:33:49.011725+05:30", "timestamp": 1755777829.011725}}}
{"text": "2025-08-21 17:33:49.013 | DEBUG    | app.services.dhan_client:get_pnl:585 - PnL model fields: {'totals': PnLTotals(realized=0.0, unrealized=-5631944.91, day=-5631944.91, currency='INR'), 'per_symbol': [PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1250, avg=1445.94, ltp=347.92, unrealized=-1372529.88, today_pnl=-1372529.88), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=1814, avg=1005.68, ltp=1629.68, unrealized=-1131944.4, today_pnl=-1131944.4), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=734, avg=1197.77, ltp=373.91, unrealized=-604713.24, today_pnl=-604713.24), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=1135, avg=1757.83, ltp=1242.8, unrealized=584562.22, today_pnl=584562.22), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=1874, avg=1965.49, ltp=307.37, unrealized=-3107319.61, today_pnl=-3107319.61)], 'updated_at': datetime.datetime(2025, 8, 21, 17, 33, 48, 997617, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))), 'trading_day': '2025-08-21'}\n", "record": {"elapsed": {"repr": "0:00:02.067793", "seconds": 2.067793}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 585, "message": "PnL model fields: {'totals': PnLTotals(realized=0.0, unrealized=-5631944.91, day=-5631944.91, currency='INR'), 'per_symbol': [PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1250, avg=1445.94, ltp=347.92, unrealized=-1372529.88, today_pnl=-1372529.88), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=1814, avg=1005.68, ltp=1629.68, unrealized=-1131944.4, today_pnl=-1131944.4), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=734, avg=1197.77, ltp=373.91, unrealized=-604713.24, today_pnl=-604713.24), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=1135, avg=1757.83, ltp=1242.8, unrealized=584562.22, today_pnl=584562.22), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=1874, avg=1965.49, ltp=307.37, unrealized=-3107319.61, today_pnl=-3107319.61)], 'updated_at': datetime.datetime(2025, 8, 21, 17, 33, 48, 997617, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))), 'trading_day': '2025-08-21'}", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27372, "name": "MainProcess"}, "thread": {"id": 26004, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:33:49.013490+05:30", "timestamp": 1755777829.01349}}}
{"text": "2025-08-21 17:33:49.015 | INFO     | app.services.dhan_client:get_pnl:587 - P&L calculation completed successfully: 5 symbols, unrealized=‚Çπ-5631944.91\n", "record": {"elapsed": {"repr": "0:00:02.069498", "seconds": 2.069498}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 587, "message": "P&L calculation completed successfully: 5 symbols, unrealized=‚Çπ-5631944.91", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27372, "name": "MainProcess"}, "thread": {"id": 26004, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:33:49.015195+05:30", "timestamp": 1755777829.015195}}}
{"text": "2025-08-21 17:33:49.016 | DEBUG    | app.ws.live:emit_delta:408 - Emitted pnl delta: seq=2\n", "record": {"elapsed": {"repr": "0:00:02.071049", "seconds": 2.071049}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "emit_delta", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 408, "message": "Emitted pnl delta: seq=2", "module": "live", "name": "app.ws.live", "process": {"id": 27372, "name": "MainProcess"}, "thread": {"id": 26004, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:33:49.016746+05:30", "timestamp": 1755777829.016746}}}
{"text": "2025-08-21 17:33:49.059 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:02.113852", "seconds": 2.113852}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27372, "name": "MainProcess"}, "thread": {"id": 4988, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 17:33:49.059549+05:30", "timestamp": 1755777829.059549}}}
{"text": "2025-08-21 17:33:49.060 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:02.115140", "seconds": 2.11514}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27372, "name": "MainProcess"}, "thread": {"id": 4988, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 17:33:49.060837+05:30", "timestamp": 1755777829.060837}}}
{"text": "2025-08-21 17:33:49.062 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:02.116530", "seconds": 2.11653}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27372, "name": "MainProcess"}, "thread": {"id": 4988, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 17:33:49.062227+05:30", "timestamp": 1755777829.062227}}}
{"text": "2025-08-21 17:33:49.063 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:02.117553", "seconds": 2.117553}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27372, "name": "MainProcess"}, "thread": {"id": 4988, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 17:33:49.063250+05:30", "timestamp": 1755777829.06325}}}
{"text": "2025-08-21 17:33:49.064 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:02.118544", "seconds": 2.118544}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27372, "name": "MainProcess"}, "thread": {"id": 4988, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 17:33:49.064241+05:30", "timestamp": 1755777829.064241}}}
{"text": "2025-08-21 17:33:49.065 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:02.119404", "seconds": 2.119404}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27372, "name": "MainProcess"}, "thread": {"id": 4988, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 17:33:49.065101+05:30", "timestamp": 1755777829.065101}}}
{"text": "2025-08-21 17:33:49.066 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:02.120787", "seconds": 2.120787}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27372, "name": "MainProcess"}, "thread": {"id": 4988, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 17:33:49.066484+05:30", "timestamp": 1755777829.066484}}}
{"text": "2025-08-21 17:33:49.068 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:02.122522", "seconds": 2.122522}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27372, "name": "MainProcess"}, "thread": {"id": 4988, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 17:33:49.068219+05:30", "timestamp": 1755777829.068219}}}
{"text": "2025-08-21 17:33:49.069 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:02.123803", "seconds": 2.123803}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27372, "name": "MainProcess"}, "thread": {"id": 4988, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 17:33:49.069500+05:30", "timestamp": 1755777829.0695}}}
{"text": "2025-08-21 17:33:49.070 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:02.124924", "seconds": 2.124924}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27372, "name": "MainProcess"}, "thread": {"id": 4988, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 17:33:49.070621+05:30", "timestamp": 1755777829.070621}}}
{"text": "2025-08-21 17:33:50.001 | DEBUG    | app.ws.live:emit_delta:408 - Emitted orders delta: seq=3\n", "record": {"elapsed": {"repr": "0:00:03.055766", "seconds": 3.055766}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "emit_delta", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 408, "message": "Emitted orders delta: seq=3", "module": "live", "name": "app.ws.live", "process": {"id": 27372, "name": "MainProcess"}, "thread": {"id": 26004, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:33:50.001463+05:30", "timestamp": 1755777830.001463}}}
{"text": "2025-08-21 17:33:50.826 | DEBUG    | app.ws.live:emit_delta:408 - Emitted positions delta: seq=4\n", "record": {"elapsed": {"repr": "0:00:03.880536", "seconds": 3.880536}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "emit_delta", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 408, "message": "Emitted positions delta: seq=4", "module": "live", "name": "app.ws.live", "process": {"id": 27372, "name": "MainProcess"}, "thread": {"id": 26004, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:33:50.826233+05:30", "timestamp": 1755777830.826233}}}
{"text": "2025-08-21 17:33:50.852 | INFO     | app.services.dhan_client:get_pnl:489 - Starting accurate P&L calculation\n", "record": {"elapsed": {"repr": "0:00:03.907270", "seconds": 3.90727}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 489, "message": "Starting accurate P&L calculation", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27372, "name": "MainProcess"}, "thread": {"id": 26004, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:33:50.852967+05:30", "timestamp": 1755777830.852967}}}
{"text": "2025-08-21 17:33:50.855 | INFO     | app.services.dhan_client:get_pnl:491 - Fetched 5 positions\n", "record": {"elapsed": {"repr": "0:00:03.909558", "seconds": 3.909558}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 491, "message": "Fetched 5 positions", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27372, "name": "MainProcess"}, "thread": {"id": 26004, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:33:50.855255+05:30", "timestamp": 1755777830.855255}}}
{"text": "2025-08-21 17:33:50.857 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for RELIANCE: unrealized=-1368823.69, today=-1368823.69\n", "record": {"elapsed": {"repr": "0:00:03.911621", "seconds": 3.911621}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for RELIANCE: unrealized=-1368823.69, today=-1368823.69", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27372, "name": "MainProcess"}, "thread": {"id": 26004, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:33:50.857318+05:30", "timestamp": 1755777830.857318}}}
{"text": "2025-08-21 17:33:50.858 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for TCS: unrealized=-1109396.5, today=-1109396.5\n", "record": {"elapsed": {"repr": "0:00:03.913221", "seconds": 3.913221}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for TCS: unrealized=-1109396.5, today=-1109396.5", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27372, "name": "MainProcess"}, "thread": {"id": 26004, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:33:50.858918+05:30", "timestamp": 1755777830.858918}}}
{"text": "2025-08-21 17:33:50.860 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for HDFC: unrealized=-606634.67, today=-606634.67\n", "record": {"elapsed": {"repr": "0:00:03.914899", "seconds": 3.914899}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for HDFC: unrealized=-606634.67, today=-606634.67", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27372, "name": "MainProcess"}, "thread": {"id": 26004, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:33:50.860596+05:30", "timestamp": 1755777830.860596}}}
{"text": "2025-08-21 17:33:50.862 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for INFY: unrealized=574503.21, today=574503.21\n", "record": {"elapsed": {"repr": "0:00:03.916502", "seconds": 3.916502}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for INFY: unrealized=574503.21, today=574503.21", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27372, "name": "MainProcess"}, "thread": {"id": 26004, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:33:50.862199+05:30", "timestamp": 1755777830.862199}}}
{"text": "2025-08-21 17:33:50.863 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for ICICIBANK: unrealized=-3118001.13, today=-3118001.13\n", "record": {"elapsed": {"repr": "0:00:03.917923", "seconds": 3.917923}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for ICICIBANK: unrealized=-3118001.13, today=-3118001.13", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27372, "name": "MainProcess"}, "thread": {"id": 26004, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:33:50.863620+05:30", "timestamp": 1755777830.86362}}}
{"text": "2025-08-21 17:33:50.865 | INFO     | app.services.dhan_client:get_pnl:545 - Calculated totals - realized: 0.0, unrealized: -5628352.78, day: -5628352.78\n", "record": {"elapsed": {"repr": "0:00:03.919379", "seconds": 3.919379}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 545, "message": "Calculated totals - realized: 0.0, unrealized: -5628352.78, day: -5628352.78", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27372, "name": "MainProcess"}, "thread": {"id": 26004, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:33:50.865076+05:30", "timestamp": 1755777830.865076}}}
{"text": "2025-08-21 17:33:50.866 | DEBUG    | app.services.dhan_client:get_pnl:554 - PnL consistency check passed: drift=‚Çπ0.00\n", "record": {"elapsed": {"repr": "0:00:03.920934", "seconds": 3.920934}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 554, "message": "PnL consistency check passed: drift=‚Çπ0.00", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27372, "name": "MainProcess"}, "thread": {"id": 26004, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:33:50.866631+05:30", "timestamp": 1755777830.866631}}}
{"text": "2025-08-21 17:33:50.867 | DEBUG    | app.services.dhan_client:get_pnl:558 - Creating PnLTotals...\n", "record": {"elapsed": {"repr": "0:00:03.922255", "seconds": 3.922255}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 558, "message": "Creating PnLTotals...", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27372, "name": "MainProcess"}, "thread": {"id": 26004, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:33:50.867952+05:30", "timestamp": 1755777830.867952}}}
{"text": "2025-08-21 17:33:50.869 | DEBUG    | app.services.dhan_client:get_pnl:565 - PnLTotals created successfully\n", "record": {"elapsed": {"repr": "0:00:03.923439", "seconds": 3.923439}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 565, "message": "PnLTotals created successfully", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27372, "name": "MainProcess"}, "thread": {"id": 26004, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:33:50.869136+05:30", "timestamp": 1755777830.869136}}}
{"text": "2025-08-21 17:33:50.870 | DEBUG    | app.services.dhan_client:get_pnl:574 - Creating PnL model...\n", "record": {"elapsed": {"repr": "0:00:03.924869", "seconds": 3.924869}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 574, "message": "Creating PnL model...", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27372, "name": "MainProcess"}, "thread": {"id": 26004, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:33:50.870566+05:30", "timestamp": 1755777830.870566}}}
{"text": "2025-08-21 17:33:50.871 | DEBUG    | app.services.dhan_client:get_pnl:575 - Model fields: totals=<class 'app.models.schemas.PnLTotals'>, perSymbol=5, updated_at=2025-08-21 17:33:50.857155+05:30, trading_day=2025-08-21\n", "record": {"elapsed": {"repr": "0:00:03.926031", "seconds": 3.926031}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 575, "message": "Model fields: totals=<class 'app.models.schemas.PnLTotals'>, perSymbol=5, updated_at=2025-08-21 17:33:50.857155+05:30, trading_day=2025-08-21", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27372, "name": "MainProcess"}, "thread": {"id": 26004, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:33:50.871728+05:30", "timestamp": 1755777830.871728}}}
{"text": "2025-08-21 17:33:50.873 | DEBUG    | app.services.dhan_client:get_pnl:584 - Created PnL model: totals=PnLTotals(realized=0.0, unrealized=-5628352.78, day=-5628352.78, currency='INR') per_symbol=[PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1250, avg=1445.94, ltp=350.88, unrealized=-1368823.69, today_pnl=-1368823.69), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=1814, avg=1005.68, ltp=1617.25, unrealized=-1109396.5, today_pnl=-1109396.5), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=734, avg=1197.77, ltp=371.29, unrealized=-606634.67, today_pnl=-606634.67), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=1135, avg=1757.83, ltp=1251.66, unrealized=574503.21, today_pnl=574503.21), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=1874, avg=1965.49, ltp=301.67, unrealized=-3118001.13, today_pnl=-3118001.13)] updated_at=datetime.datetime(2025, 8, 21, 17, 33, 50, 857155, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))) trading_day='2025-08-21'\n", "record": {"elapsed": {"repr": "0:00:03.928027", "seconds": 3.928027}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 584, "message": "Created PnL model: totals=PnLTotals(realized=0.0, unrealized=-5628352.78, day=-5628352.78, currency='INR') per_symbol=[PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1250, avg=1445.94, ltp=350.88, unrealized=-1368823.69, today_pnl=-1368823.69), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=1814, avg=1005.68, ltp=1617.25, unrealized=-1109396.5, today_pnl=-1109396.5), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=734, avg=1197.77, ltp=371.29, unrealized=-606634.67, today_pnl=-606634.67), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=1135, avg=1757.83, ltp=1251.66, unrealized=574503.21, today_pnl=574503.21), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=1874, avg=1965.49, ltp=301.67, unrealized=-3118001.13, today_pnl=-3118001.13)] updated_at=datetime.datetime(2025, 8, 21, 17, 33, 50, 857155, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))) trading_day='2025-08-21'", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27372, "name": "MainProcess"}, "thread": {"id": 26004, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:33:50.873724+05:30", "timestamp": 1755777830.873724}}}
{"text": "2025-08-21 17:33:50.875 | DEBUG    | app.services.dhan_client:get_pnl:585 - PnL model fields: {'totals': PnLTotals(realized=0.0, unrealized=-5628352.78, day=-5628352.78, currency='INR'), 'per_symbol': [PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1250, avg=1445.94, ltp=350.88, unrealized=-1368823.69, today_pnl=-1368823.69), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=1814, avg=1005.68, ltp=1617.25, unrealized=-1109396.5, today_pnl=-1109396.5), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=734, avg=1197.77, ltp=371.29, unrealized=-606634.67, today_pnl=-606634.67), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=1135, avg=1757.83, ltp=1251.66, unrealized=574503.21, today_pnl=574503.21), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=1874, avg=1965.49, ltp=301.67, unrealized=-3118001.13, today_pnl=-3118001.13)], 'updated_at': datetime.datetime(2025, 8, 21, 17, 33, 50, 857155, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))), 'trading_day': '2025-08-21'}\n", "record": {"elapsed": {"repr": "0:00:03.930129", "seconds": 3.930129}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 585, "message": "PnL model fields: {'totals': PnLTotals(realized=0.0, unrealized=-5628352.78, day=-5628352.78, currency='INR'), 'per_symbol': [PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1250, avg=1445.94, ltp=350.88, unrealized=-1368823.69, today_pnl=-1368823.69), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=1814, avg=1005.68, ltp=1617.25, unrealized=-1109396.5, today_pnl=-1109396.5), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=734, avg=1197.77, ltp=371.29, unrealized=-606634.67, today_pnl=-606634.67), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=1135, avg=1757.83, ltp=1251.66, unrealized=574503.21, today_pnl=574503.21), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=1874, avg=1965.49, ltp=301.67, unrealized=-3118001.13, today_pnl=-3118001.13)], 'updated_at': datetime.datetime(2025, 8, 21, 17, 33, 50, 857155, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))), 'trading_day': '2025-08-21'}", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27372, "name": "MainProcess"}, "thread": {"id": 26004, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:33:50.875826+05:30", "timestamp": 1755777830.875826}}}
{"text": "2025-08-21 17:33:50.877 | INFO     | app.services.dhan_client:get_pnl:587 - P&L calculation completed successfully: 5 symbols, unrealized=‚Çπ-5628352.78\n", "record": {"elapsed": {"repr": "0:00:03.932126", "seconds": 3.932126}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 587, "message": "P&L calculation completed successfully: 5 symbols, unrealized=‚Çπ-5628352.78", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27372, "name": "MainProcess"}, "thread": {"id": 26004, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:33:50.877823+05:30", "timestamp": 1755777830.877823}}}
{"text": "2025-08-21 17:33:50.879 | DEBUG    | app.ws.live:emit_delta:408 - Emitted pnl delta: seq=5\n", "record": {"elapsed": {"repr": "0:00:03.933876", "seconds": 3.933876}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "emit_delta", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 408, "message": "Emitted pnl delta: seq=5", "module": "live", "name": "app.ws.live", "process": {"id": 27372, "name": "MainProcess"}, "thread": {"id": 26004, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:33:50.879573+05:30", "timestamp": 1755777830.879573}}}
{"text": "2025-08-21 17:33:51.072 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:04.127093", "seconds": 4.127093}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27372, "name": "MainProcess"}, "thread": {"id": 4988, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 17:33:51.072790+05:30", "timestamp": 1755777831.07279}}}
{"text": "2025-08-21 17:33:51.073 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:04.128297", "seconds": 4.128297}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27372, "name": "MainProcess"}, "thread": {"id": 4988, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 17:33:51.073994+05:30", "timestamp": 1755777831.073994}}}
{"text": "2025-08-21 17:33:51.076 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:04.130396", "seconds": 4.130396}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27372, "name": "MainProcess"}, "thread": {"id": 4988, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 17:33:51.076093+05:30", "timestamp": 1755777831.076093}}}
{"text": "2025-08-21 17:33:51.078 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:04.132430", "seconds": 4.13243}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27372, "name": "MainProcess"}, "thread": {"id": 4988, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 17:33:51.078127+05:30", "timestamp": 1755777831.078127}}}
{"text": "2025-08-21 17:33:51.079 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:04.133553", "seconds": 4.133553}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27372, "name": "MainProcess"}, "thread": {"id": 4988, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 17:33:51.079250+05:30", "timestamp": 1755777831.07925}}}
{"text": "2025-08-21 17:33:51.080 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:04.134598", "seconds": 4.134598}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27372, "name": "MainProcess"}, "thread": {"id": 4988, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 17:33:51.080295+05:30", "timestamp": 1755777831.080295}}}
{"text": "2025-08-21 17:33:51.081 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:04.135471", "seconds": 4.135471}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27372, "name": "MainProcess"}, "thread": {"id": 4988, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 17:33:51.081168+05:30", "timestamp": 1755777831.081168}}}
{"text": "2025-08-21 17:33:51.082 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:04.136337", "seconds": 4.136337}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27372, "name": "MainProcess"}, "thread": {"id": 4988, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 17:33:51.082034+05:30", "timestamp": 1755777831.082034}}}
{"text": "2025-08-21 17:33:51.083 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:04.137489", "seconds": 4.137489}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27372, "name": "MainProcess"}, "thread": {"id": 4988, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 17:33:51.083186+05:30", "timestamp": 1755777831.083186}}}
{"text": "2025-08-21 17:33:51.084 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:04.138660", "seconds": 4.13866}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27372, "name": "MainProcess"}, "thread": {"id": 4988, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 17:33:51.084357+05:30", "timestamp": 1755777831.084357}}}
{"text": "2025-08-21 17:33:52.567 | DEBUG    | app.ws.live:emit_delta:408 - Emitted positions delta: seq=6\n", "record": {"elapsed": {"repr": "0:00:05.621459", "seconds": 5.621459}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "emit_delta", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 408, "message": "Emitted positions delta: seq=6", "module": "live", "name": "app.ws.live", "process": {"id": 27372, "name": "MainProcess"}, "thread": {"id": 26004, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:33:52.567156+05:30", "timestamp": 1755777832.567156}}}
{"text": "2025-08-21 17:33:52.646 | INFO     | app.services.dhan_client:get_pnl:489 - Starting accurate P&L calculation\n", "record": {"elapsed": {"repr": "0:00:05.700605", "seconds": 5.700605}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 489, "message": "Starting accurate P&L calculation", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27372, "name": "MainProcess"}, "thread": {"id": 26004, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:33:52.646302+05:30", "timestamp": 1755777832.646302}}}
{"text": "2025-08-21 17:33:52.655 | INFO     | app.services.dhan_client:get_pnl:491 - Fetched 5 positions\n", "record": {"elapsed": {"repr": "0:00:05.710047", "seconds": 5.710047}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 491, "message": "Fetched 5 positions", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27372, "name": "MainProcess"}, "thread": {"id": 26004, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:33:52.655744+05:30", "timestamp": 1755777832.655744}}}
{"text": "2025-08-21 17:33:52.661 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for RELIANCE: unrealized=-1360160.09, today=-1360160.09\n", "record": {"elapsed": {"repr": "0:00:05.715761", "seconds": 5.715761}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for RELIANCE: unrealized=-1360160.09, today=-1360160.09", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27372, "name": "MainProcess"}, "thread": {"id": 26004, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:33:52.661458+05:30", "timestamp": 1755777832.661458}}}
{"text": "2025-08-21 17:33:52.667 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for TCS: unrealized=-1094675.83, today=-1094675.83\n", "record": {"elapsed": {"repr": "0:00:05.721347", "seconds": 5.721347}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for TCS: unrealized=-1094675.83, today=-1094675.83", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27372, "name": "MainProcess"}, "thread": {"id": 26004, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:33:52.667044+05:30", "timestamp": 1755777832.667044}}}
{"text": "2025-08-21 17:33:52.672 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for HDFC: unrealized=-602739.81, today=-602739.81\n", "record": {"elapsed": {"repr": "0:00:05.726461", "seconds": 5.726461}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for HDFC: unrealized=-602739.81, today=-602739.81", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27372, "name": "MainProcess"}, "thread": {"id": 26004, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:33:52.672158+05:30", "timestamp": 1755777832.672158}}}
{"text": "2025-08-21 17:33:52.675 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for INFY: unrealized=547239.35, today=547239.35\n", "record": {"elapsed": {"repr": "0:00:05.730222", "seconds": 5.730222}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for INFY: unrealized=547239.35, today=547239.35", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27372, "name": "MainProcess"}, "thread": {"id": 26004, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:33:52.675919+05:30", "timestamp": 1755777832.675919}}}
{"text": "2025-08-21 17:33:52.681 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for ICICIBANK: unrealized=-3117806.1, today=-3117806.1\n", "record": {"elapsed": {"repr": "0:00:05.736182", "seconds": 5.736182}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for ICICIBANK: unrealized=-3117806.1, today=-3117806.1", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27372, "name": "MainProcess"}, "thread": {"id": 26004, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:33:52.681879+05:30", "timestamp": 1755777832.681879}}}
{"text": "2025-08-21 17:33:52.689 | INFO     | app.services.dhan_client:get_pnl:545 - Calculated totals - realized: 0.0, unrealized: -5628142.48, day: -5628142.48\n", "record": {"elapsed": {"repr": "0:00:05.743349", "seconds": 5.743349}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 545, "message": "Calculated totals - realized: 0.0, unrealized: -5628142.48, day: -5628142.48", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27372, "name": "MainProcess"}, "thread": {"id": 26004, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:33:52.689046+05:30", "timestamp": 1755777832.689046}}}
{"text": "2025-08-21 17:33:52.691 | DEBUG    | app.services.dhan_client:get_pnl:554 - PnL consistency check passed: drift=‚Çπ0.00\n", "record": {"elapsed": {"repr": "0:00:05.746104", "seconds": 5.746104}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 554, "message": "PnL consistency check passed: drift=‚Çπ0.00", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27372, "name": "MainProcess"}, "thread": {"id": 26004, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:33:52.691801+05:30", "timestamp": 1755777832.691801}}}
{"text": "2025-08-21 17:33:52.694 | DEBUG    | app.services.dhan_client:get_pnl:558 - Creating PnLTotals...\n", "record": {"elapsed": {"repr": "0:00:05.748559", "seconds": 5.748559}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 558, "message": "Creating PnLTotals...", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27372, "name": "MainProcess"}, "thread": {"id": 26004, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:33:52.694256+05:30", "timestamp": 1755777832.694256}}}
{"text": "2025-08-21 17:33:52.696 | DEBUG    | app.services.dhan_client:get_pnl:565 - PnLTotals created successfully\n", "record": {"elapsed": {"repr": "0:00:05.751182", "seconds": 5.751182}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 565, "message": "PnLTotals created successfully", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27372, "name": "MainProcess"}, "thread": {"id": 26004, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:33:52.696879+05:30", "timestamp": 1755777832.696879}}}
{"text": "2025-08-21 17:33:52.699 | DEBUG    | app.services.dhan_client:get_pnl:574 - Creating PnL model...\n", "record": {"elapsed": {"repr": "0:00:05.753321", "seconds": 5.753321}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 574, "message": "Creating PnL model...", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27372, "name": "MainProcess"}, "thread": {"id": 26004, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:33:52.699018+05:30", "timestamp": 1755777832.699018}}}
{"text": "2025-08-21 17:33:52.702 | DEBUG    | app.services.dhan_client:get_pnl:575 - Model fields: totals=<class 'app.models.schemas.PnLTotals'>, perSymbol=5, updated_at=2025-08-21 17:33:52.661190+05:30, trading_day=2025-08-21\n", "record": {"elapsed": {"repr": "0:00:05.756408", "seconds": 5.756408}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 575, "message": "Model fields: totals=<class 'app.models.schemas.PnLTotals'>, perSymbol=5, updated_at=2025-08-21 17:33:52.661190+05:30, trading_day=2025-08-21", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27372, "name": "MainProcess"}, "thread": {"id": 26004, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:33:52.702105+05:30", "timestamp": 1755777832.702105}}}
{"text": "2025-08-21 17:33:52.705 | DEBUG    | app.services.dhan_client:get_pnl:584 - Created PnL model: totals=PnLTotals(realized=0.0, unrealized=-5628142.48, day=-5628142.48, currency='INR') per_symbol=[PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1250, avg=1445.94, ltp=357.81, unrealized=-1360160.09, today_pnl=-1360160.09), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=1814, avg=1005.68, ltp=1609.14, unrealized=-1094675.83, today_pnl=-1094675.83), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=734, avg=1197.77, ltp=376.6, unrealized=-602739.81, today_pnl=-602739.81), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=1135, avg=1757.83, ltp=1275.68, unrealized=547239.35, today_pnl=547239.35), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=1874, avg=1965.49, ltp=301.77, unrealized=-3117806.1, today_pnl=-3117806.1)] updated_at=datetime.datetime(2025, 8, 21, 17, 33, 52, 661190, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))) trading_day='2025-08-21'\n", "record": {"elapsed": {"repr": "0:00:05.759514", "seconds": 5.759514}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 584, "message": "Created PnL model: totals=PnLTotals(realized=0.0, unrealized=-5628142.48, day=-5628142.48, currency='INR') per_symbol=[PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1250, avg=1445.94, ltp=357.81, unrealized=-1360160.09, today_pnl=-1360160.09), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=1814, avg=1005.68, ltp=1609.14, unrealized=-1094675.83, today_pnl=-1094675.83), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=734, avg=1197.77, ltp=376.6, unrealized=-602739.81, today_pnl=-602739.81), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=1135, avg=1757.83, ltp=1275.68, unrealized=547239.35, today_pnl=547239.35), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=1874, avg=1965.49, ltp=301.77, unrealized=-3117806.1, today_pnl=-3117806.1)] updated_at=datetime.datetime(2025, 8, 21, 17, 33, 52, 661190, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))) trading_day='2025-08-21'", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27372, "name": "MainProcess"}, "thread": {"id": 26004, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:33:52.705211+05:30", "timestamp": 1755777832.705211}}}
{"text": "2025-08-21 17:33:52.707 | DEBUG    | app.services.dhan_client:get_pnl:585 - PnL model fields: {'totals': PnLTotals(realized=0.0, unrealized=-5628142.48, day=-5628142.48, currency='INR'), 'per_symbol': [PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1250, avg=1445.94, ltp=357.81, unrealized=-1360160.09, today_pnl=-1360160.09), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=1814, avg=1005.68, ltp=1609.14, unrealized=-1094675.83, today_pnl=-1094675.83), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=734, avg=1197.77, ltp=376.6, unrealized=-602739.81, today_pnl=-602739.81), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=1135, avg=1757.83, ltp=1275.68, unrealized=547239.35, today_pnl=547239.35), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=1874, avg=1965.49, ltp=301.77, unrealized=-3117806.1, today_pnl=-3117806.1)], 'updated_at': datetime.datetime(2025, 8, 21, 17, 33, 52, 661190, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))), 'trading_day': '2025-08-21'}\n", "record": {"elapsed": {"repr": "0:00:05.762094", "seconds": 5.762094}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 585, "message": "PnL model fields: {'totals': PnLTotals(realized=0.0, unrealized=-5628142.48, day=-5628142.48, currency='INR'), 'per_symbol': [PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1250, avg=1445.94, ltp=357.81, unrealized=-1360160.09, today_pnl=-1360160.09), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=1814, avg=1005.68, ltp=1609.14, unrealized=-1094675.83, today_pnl=-1094675.83), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=734, avg=1197.77, ltp=376.6, unrealized=-602739.81, today_pnl=-602739.81), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=1135, avg=1757.83, ltp=1275.68, unrealized=547239.35, today_pnl=547239.35), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=1874, avg=1965.49, ltp=301.77, unrealized=-3117806.1, today_pnl=-3117806.1)], 'updated_at': datetime.datetime(2025, 8, 21, 17, 33, 52, 661190, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))), 'trading_day': '2025-08-21'}", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27372, "name": "MainProcess"}, "thread": {"id": 26004, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:33:52.707791+05:30", "timestamp": 1755777832.707791}}}
{"text": "2025-08-21 17:33:52.710 | INFO     | app.services.dhan_client:get_pnl:587 - P&L calculation completed successfully: 5 symbols, unrealized=‚Çπ-5628142.48\n", "record": {"elapsed": {"repr": "0:00:05.764953", "seconds": 5.764953}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 587, "message": "P&L calculation completed successfully: 5 symbols, unrealized=‚Çπ-5628142.48", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27372, "name": "MainProcess"}, "thread": {"id": 26004, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:33:52.710650+05:30", "timestamp": 1755777832.71065}}}
{"text": "2025-08-21 17:33:52.714 | DEBUG    | app.ws.live:emit_delta:408 - Emitted pnl delta: seq=7\n", "record": {"elapsed": {"repr": "0:00:05.769283", "seconds": 5.769283}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "emit_delta", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 408, "message": "Emitted pnl delta: seq=7", "module": "live", "name": "app.ws.live", "process": {"id": 27372, "name": "MainProcess"}, "thread": {"id": 26004, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:33:52.714980+05:30", "timestamp": 1755777832.71498}}}
{"text": "2025-08-21 17:33:53.097 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:06.151511", "seconds": 6.151511}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27372, "name": "MainProcess"}, "thread": {"id": 4988, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 17:33:53.097208+05:30", "timestamp": 1755777833.097208}}}
{"text": "2025-08-21 17:33:53.127 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:06.181602", "seconds": 6.181602}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27372, "name": "MainProcess"}, "thread": {"id": 4988, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 17:33:53.127299+05:30", "timestamp": 1755777833.127299}}}
{"text": "2025-08-21 17:33:53.173 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:06.228026", "seconds": 6.228026}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27372, "name": "MainProcess"}, "thread": {"id": 4988, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 17:33:53.173723+05:30", "timestamp": 1755777833.173723}}}
{"text": "2025-08-21 17:33:53.210 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:06.264863", "seconds": 6.264863}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27372, "name": "MainProcess"}, "thread": {"id": 4988, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 17:33:53.210560+05:30", "timestamp": 1755777833.21056}}}
{"text": "2025-08-21 17:33:53.226 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:06.281175", "seconds": 6.281175}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27372, "name": "MainProcess"}, "thread": {"id": 4988, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 17:33:53.226872+05:30", "timestamp": 1755777833.226872}}}
{"text": "2025-08-21 17:33:53.252 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:06.306429", "seconds": 6.306429}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27372, "name": "MainProcess"}, "thread": {"id": 4988, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 17:33:53.252126+05:30", "timestamp": 1755777833.252126}}}
{"text": "2025-08-21 17:33:53.300 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:06.354406", "seconds": 6.354406}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27372, "name": "MainProcess"}, "thread": {"id": 4988, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 17:33:53.300103+05:30", "timestamp": 1755777833.300103}}}
{"text": "2025-08-21 17:33:53.314 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:06.368537", "seconds": 6.368537}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27372, "name": "MainProcess"}, "thread": {"id": 4988, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 17:33:53.314234+05:30", "timestamp": 1755777833.314234}}}
{"text": "2025-08-21 17:33:53.352 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:06.406675", "seconds": 6.406675}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27372, "name": "MainProcess"}, "thread": {"id": 4988, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 17:33:53.352372+05:30", "timestamp": 1755777833.352372}}}
{"text": "2025-08-21 17:33:53.388 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:06.443150", "seconds": 6.44315}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27372, "name": "MainProcess"}, "thread": {"id": 4988, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 17:33:53.388847+05:30", "timestamp": 1755777833.388847}}}
{"text": "2025-08-21 17:33:54.180 | DEBUG    | app.ws.live:emit_delta:408 - Emitted positions delta: seq=8\n", "record": {"elapsed": {"repr": "0:00:07.234698", "seconds": 7.234698}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "emit_delta", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 408, "message": "Emitted positions delta: seq=8", "module": "live", "name": "app.ws.live", "process": {"id": 27372, "name": "MainProcess"}, "thread": {"id": 26004, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:33:54.180395+05:30", "timestamp": 1755777834.180395}}}
{"text": "2025-08-21 17:33:54.403 | INFO     | app.services.dhan_client:get_pnl:489 - Starting accurate P&L calculation\n", "record": {"elapsed": {"repr": "0:00:07.458246", "seconds": 7.458246}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 489, "message": "Starting accurate P&L calculation", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27372, "name": "MainProcess"}, "thread": {"id": 26004, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:33:54.403943+05:30", "timestamp": 1755777834.403943}}}
{"text": "2025-08-21 17:33:54.406 | INFO     | app.services.dhan_client:get_pnl:491 - Fetched 5 positions\n", "record": {"elapsed": {"repr": "0:00:07.460741", "seconds": 7.460741}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 491, "message": "Fetched 5 positions", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27372, "name": "MainProcess"}, "thread": {"id": 26004, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:33:54.406438+05:30", "timestamp": 1755777834.406438}}}
{"text": "2025-08-21 17:33:54.408 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for RELIANCE: unrealized=-1363145.5, today=-1363145.5\n", "record": {"elapsed": {"repr": "0:00:07.462698", "seconds": 7.462698}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for RELIANCE: unrealized=-1363145.5, today=-1363145.5", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27372, "name": "MainProcess"}, "thread": {"id": 26004, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:33:54.408395+05:30", "timestamp": 1755777834.408395}}}
{"text": "2025-08-21 17:33:54.410 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for TCS: unrealized=-1103693.95, today=-1103693.95\n", "record": {"elapsed": {"repr": "0:00:07.464775", "seconds": 7.464775}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for TCS: unrealized=-1103693.95, today=-1103693.95", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27372, "name": "MainProcess"}, "thread": {"id": 26004, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:33:54.410472+05:30", "timestamp": 1755777834.410472}}}
{"text": "2025-08-21 17:33:54.412 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for HDFC: unrealized=-604851.45, today=-604851.45\n", "record": {"elapsed": {"repr": "0:00:07.466919", "seconds": 7.466919}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for HDFC: unrealized=-604851.45, today=-604851.45", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27372, "name": "MainProcess"}, "thread": {"id": 26004, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:33:54.412616+05:30", "timestamp": 1755777834.412616}}}
{"text": "2025-08-21 17:33:54.414 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for INFY: unrealized=526145.49, today=526145.49\n", "record": {"elapsed": {"repr": "0:00:07.469264", "seconds": 7.469264}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for INFY: unrealized=526145.49, today=526145.49", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27372, "name": "MainProcess"}, "thread": {"id": 26004, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:33:54.414961+05:30", "timestamp": 1755777834.414961}}}
{"text": "2025-08-21 17:33:54.417 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for ICICIBANK: unrealized=-3119627.8, today=-3119627.8\n", "record": {"elapsed": {"repr": "0:00:07.471611", "seconds": 7.471611}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for ICICIBANK: unrealized=-3119627.8, today=-3119627.8", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27372, "name": "MainProcess"}, "thread": {"id": 26004, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:33:54.417308+05:30", "timestamp": 1755777834.417308}}}
{"text": "2025-08-21 17:33:54.419 | INFO     | app.services.dhan_client:get_pnl:545 - Calculated totals - realized: 0.0, unrealized: -5665173.21, day: -5665173.21\n", "record": {"elapsed": {"repr": "0:00:07.473925", "seconds": 7.473925}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 545, "message": "Calculated totals - realized: 0.0, unrealized: -5665173.21, day: -5665173.21", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27372, "name": "MainProcess"}, "thread": {"id": 26004, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:33:54.419622+05:30", "timestamp": 1755777834.419622}}}
{"text": "2025-08-21 17:33:54.422 | DEBUG    | app.services.dhan_client:get_pnl:554 - PnL consistency check passed: drift=‚Çπ0.00\n", "record": {"elapsed": {"repr": "0:00:07.476530", "seconds": 7.47653}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 554, "message": "PnL consistency check passed: drift=‚Çπ0.00", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27372, "name": "MainProcess"}, "thread": {"id": 26004, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:33:54.422227+05:30", "timestamp": 1755777834.422227}}}
{"text": "2025-08-21 17:33:54.424 | DEBUG    | app.services.dhan_client:get_pnl:558 - Creating PnLTotals...\n", "record": {"elapsed": {"repr": "0:00:07.478805", "seconds": 7.478805}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 558, "message": "Creating PnLTotals...", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27372, "name": "MainProcess"}, "thread": {"id": 26004, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:33:54.424502+05:30", "timestamp": 1755777834.424502}}}
{"text": "2025-08-21 17:33:54.426 | DEBUG    | app.services.dhan_client:get_pnl:565 - PnLTotals created successfully\n", "record": {"elapsed": {"repr": "0:00:07.480418", "seconds": 7.480418}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 565, "message": "PnLTotals created successfully", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27372, "name": "MainProcess"}, "thread": {"id": 26004, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:33:54.426115+05:30", "timestamp": 1755777834.426115}}}
{"text": "2025-08-21 17:33:54.428 | DEBUG    | app.services.dhan_client:get_pnl:574 - Creating PnL model...\n", "record": {"elapsed": {"repr": "0:00:07.482416", "seconds": 7.482416}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 574, "message": "Creating PnL model...", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27372, "name": "MainProcess"}, "thread": {"id": 26004, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:33:54.428113+05:30", "timestamp": 1755777834.428113}}}
{"text": "2025-08-21 17:33:54.429 | DEBUG    | app.services.dhan_client:get_pnl:575 - Model fields: totals=<class 'app.models.schemas.PnLTotals'>, perSymbol=5, updated_at=2025-08-21 17:33:54.408054+05:30, trading_day=2025-08-21\n", "record": {"elapsed": {"repr": "0:00:07.484061", "seconds": 7.484061}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 575, "message": "Model fields: totals=<class 'app.models.schemas.PnLTotals'>, perSymbol=5, updated_at=2025-08-21 17:33:54.408054+05:30, trading_day=2025-08-21", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27372, "name": "MainProcess"}, "thread": {"id": 26004, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:33:54.429758+05:30", "timestamp": 1755777834.429758}}}
{"text": "2025-08-21 17:33:54.433 | DEBUG    | app.services.dhan_client:get_pnl:584 - Created PnL model: totals=PnLTotals(realized=0.0, unrealized=-5665173.21, day=-5665173.21, currency='INR') per_symbol=[PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1250, avg=1445.94, ltp=355.42, unrealized=-1363145.5, today_pnl=-1363145.5), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=1814, avg=1005.68, ltp=1614.11, unrealized=-1103693.95, today_pnl=-1103693.95), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=734, avg=1197.77, ltp=373.72, unrealized=-604851.45, today_pnl=-604851.45), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=1135, avg=1757.83, ltp=1294.27, unrealized=526145.49, today_pnl=526145.49), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=1874, avg=1965.49, ltp=300.8, unrealized=-3119627.8, today_pnl=-3119627.8)] updated_at=datetime.datetime(2025, 8, 21, 17, 33, 54, 408054, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))) trading_day='2025-08-21'\n", "record": {"elapsed": {"repr": "0:00:07.487582", "seconds": 7.487582}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 584, "message": "Created PnL model: totals=PnLTotals(realized=0.0, unrealized=-5665173.21, day=-5665173.21, currency='INR') per_symbol=[PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1250, avg=1445.94, ltp=355.42, unrealized=-1363145.5, today_pnl=-1363145.5), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=1814, avg=1005.68, ltp=1614.11, unrealized=-1103693.95, today_pnl=-1103693.95), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=734, avg=1197.77, ltp=373.72, unrealized=-604851.45, today_pnl=-604851.45), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=1135, avg=1757.83, ltp=1294.27, unrealized=526145.49, today_pnl=526145.49), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=1874, avg=1965.49, ltp=300.8, unrealized=-3119627.8, today_pnl=-3119627.8)] updated_at=datetime.datetime(2025, 8, 21, 17, 33, 54, 408054, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))) trading_day='2025-08-21'", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27372, "name": "MainProcess"}, "thread": {"id": 26004, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:33:54.433279+05:30", "timestamp": 1755777834.433279}}}
{"text": "2025-08-21 17:33:54.436 | DEBUG    | app.services.dhan_client:get_pnl:585 - PnL model fields: {'totals': PnLTotals(realized=0.0, unrealized=-5665173.21, day=-5665173.21, currency='INR'), 'per_symbol': [PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1250, avg=1445.94, ltp=355.42, unrealized=-1363145.5, today_pnl=-1363145.5), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=1814, avg=1005.68, ltp=1614.11, unrealized=-1103693.95, today_pnl=-1103693.95), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=734, avg=1197.77, ltp=373.72, unrealized=-604851.45, today_pnl=-604851.45), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=1135, avg=1757.83, ltp=1294.27, unrealized=526145.49, today_pnl=526145.49), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=1874, avg=1965.49, ltp=300.8, unrealized=-3119627.8, today_pnl=-3119627.8)], 'updated_at': datetime.datetime(2025, 8, 21, 17, 33, 54, 408054, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))), 'trading_day': '2025-08-21'}\n", "record": {"elapsed": {"repr": "0:00:07.490708", "seconds": 7.490708}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 585, "message": "PnL model fields: {'totals': PnLTotals(realized=0.0, unrealized=-5665173.21, day=-5665173.21, currency='INR'), 'per_symbol': [PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1250, avg=1445.94, ltp=355.42, unrealized=-1363145.5, today_pnl=-1363145.5), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=1814, avg=1005.68, ltp=1614.11, unrealized=-1103693.95, today_pnl=-1103693.95), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=734, avg=1197.77, ltp=373.72, unrealized=-604851.45, today_pnl=-604851.45), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=1135, avg=1757.83, ltp=1294.27, unrealized=526145.49, today_pnl=526145.49), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=1874, avg=1965.49, ltp=300.8, unrealized=-3119627.8, today_pnl=-3119627.8)], 'updated_at': datetime.datetime(2025, 8, 21, 17, 33, 54, 408054, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))), 'trading_day': '2025-08-21'}", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27372, "name": "MainProcess"}, "thread": {"id": 26004, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:33:54.436405+05:30", "timestamp": 1755777834.436405}}}
{"text": "2025-08-21 17:33:54.439 | INFO     | app.services.dhan_client:get_pnl:587 - P&L calculation completed successfully: 5 symbols, unrealized=‚Çπ-5665173.21\n", "record": {"elapsed": {"repr": "0:00:07.493311", "seconds": 7.493311}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 587, "message": "P&L calculation completed successfully: 5 symbols, unrealized=‚Çπ-5665173.21", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27372, "name": "MainProcess"}, "thread": {"id": 26004, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:33:54.439008+05:30", "timestamp": 1755777834.439008}}}
{"text": "2025-08-21 17:33:54.441 | DEBUG    | app.ws.live:emit_delta:408 - Emitted pnl delta: seq=9\n", "record": {"elapsed": {"repr": "0:00:07.495927", "seconds": 7.495927}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "emit_delta", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 408, "message": "Emitted pnl delta: seq=9", "module": "live", "name": "app.ws.live", "process": {"id": 27372, "name": "MainProcess"}, "thread": {"id": 26004, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:33:54.441624+05:30", "timestamp": 1755777834.441624}}}
{"text": "2025-08-21 17:33:55.397 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:08.451859", "seconds": 8.451859}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27372, "name": "MainProcess"}, "thread": {"id": 4988, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 17:33:55.397556+05:30", "timestamp": 1755777835.397556}}}
{"text": "2025-08-21 17:33:55.400 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:08.454909", "seconds": 8.454909}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27372, "name": "MainProcess"}, "thread": {"id": 4988, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 17:33:55.400606+05:30", "timestamp": 1755777835.400606}}}
{"text": "2025-08-21 17:33:55.403 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:08.457335", "seconds": 8.457335}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27372, "name": "MainProcess"}, "thread": {"id": 4988, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 17:33:55.403032+05:30", "timestamp": 1755777835.403032}}}
{"text": "2025-08-21 17:33:55.404 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:08.459294", "seconds": 8.459294}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27372, "name": "MainProcess"}, "thread": {"id": 4988, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 17:33:55.404991+05:30", "timestamp": 1755777835.404991}}}
{"text": "2025-08-21 17:33:55.408 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:08.462499", "seconds": 8.462499}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27372, "name": "MainProcess"}, "thread": {"id": 4988, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 17:33:55.408196+05:30", "timestamp": 1755777835.408196}}}
{"text": "2025-08-21 17:33:55.410 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:08.464495", "seconds": 8.464495}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27372, "name": "MainProcess"}, "thread": {"id": 4988, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 17:33:55.410192+05:30", "timestamp": 1755777835.410192}}}
{"text": "2025-08-21 17:33:55.412 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:08.466907", "seconds": 8.466907}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27372, "name": "MainProcess"}, "thread": {"id": 4988, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 17:33:55.412604+05:30", "timestamp": 1755777835.412604}}}
{"text": "2025-08-21 17:33:55.415 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:08.469804", "seconds": 8.469804}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27372, "name": "MainProcess"}, "thread": {"id": 4988, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 17:33:55.415501+05:30", "timestamp": 1755777835.415501}}}
{"text": "2025-08-21 17:33:55.418 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:08.472936", "seconds": 8.472936}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27372, "name": "MainProcess"}, "thread": {"id": 4988, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 17:33:55.418633+05:30", "timestamp": 1755777835.418633}}}
{"text": "2025-08-21 17:33:55.420 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:08.475067", "seconds": 8.475067}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27372, "name": "MainProcess"}, "thread": {"id": 4988, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 17:33:55.420764+05:30", "timestamp": 1755777835.420764}}}
{"text": "2025-08-21 17:33:55.990 | INFO     | app.services.dhan_client:get_pnl:489 - Starting accurate P&L calculation\n", "record": {"elapsed": {"repr": "0:00:09.044554", "seconds": 9.044554}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 489, "message": "Starting accurate P&L calculation", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27372, "name": "MainProcess"}, "thread": {"id": 26004, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:33:55.990251+05:30", "timestamp": 1755777835.990251}}}
{"text": "2025-08-21 17:33:55.992 | INFO     | app.services.dhan_client:get_pnl:491 - Fetched 5 positions\n", "record": {"elapsed": {"repr": "0:00:09.046962", "seconds": 9.046962}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 491, "message": "Fetched 5 positions", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27372, "name": "MainProcess"}, "thread": {"id": 26004, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:33:55.992659+05:30", "timestamp": 1755777835.992659}}}
{"text": "2025-08-21 17:33:55.995 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for RELIANCE: unrealized=-1357515.44, today=-1357515.44\n", "record": {"elapsed": {"repr": "0:00:09.049773", "seconds": 9.049773}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for RELIANCE: unrealized=-1357515.44, today=-1357515.44", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27372, "name": "MainProcess"}, "thread": {"id": 26004, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:33:55.995470+05:30", "timestamp": 1755777835.99547}}}
{"text": "2025-08-21 17:33:55.998 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for TCS: unrealized=-1079162.58, today=-1079162.58\n", "record": {"elapsed": {"repr": "0:00:09.052728", "seconds": 9.052728}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for TCS: unrealized=-1079162.58, today=-1079162.58", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27372, "name": "MainProcess"}, "thread": {"id": 26004, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:33:55.998425+05:30", "timestamp": 1755777835.998425}}}
{"text": "2025-08-21 17:33:56.001 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for HDFC: unrealized=-603891.66, today=-603891.66\n", "record": {"elapsed": {"repr": "0:00:09.055793", "seconds": 9.055793}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for HDFC: unrealized=-603891.66, today=-603891.66", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27372, "name": "MainProcess"}, "thread": {"id": 26004, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:33:56.001490+05:30", "timestamp": 1755777836.00149}}}
{"text": "2025-08-21 17:33:56.003 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for INFY: unrealized=503580.79, today=503580.79\n", "record": {"elapsed": {"repr": "0:00:09.058087", "seconds": 9.058087}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for INFY: unrealized=503580.79, today=503580.79", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27372, "name": "MainProcess"}, "thread": {"id": 26004, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:33:56.003784+05:30", "timestamp": 1755777836.003784}}}
{"text": "2025-08-21 17:33:56.005 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for ICICIBANK: unrealized=-3127859.85, today=-3127859.85\n", "record": {"elapsed": {"repr": "0:00:09.060225", "seconds": 9.060225}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for ICICIBANK: unrealized=-3127859.85, today=-3127859.85", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27372, "name": "MainProcess"}, "thread": {"id": 26004, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:33:56.005922+05:30", "timestamp": 1755777836.005922}}}
{"text": "2025-08-21 17:33:56.008 | INFO     | app.services.dhan_client:get_pnl:545 - Calculated totals - realized: 0.0, unrealized: -5664848.74, day: -5664848.74\n", "record": {"elapsed": {"repr": "0:00:09.062852", "seconds": 9.062852}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 545, "message": "Calculated totals - realized: 0.0, unrealized: -5664848.74, day: -5664848.74", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27372, "name": "MainProcess"}, "thread": {"id": 26004, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:33:56.008549+05:30", "timestamp": 1755777836.008549}}}
{"text": "2025-08-21 17:33:56.010 | DEBUG    | app.services.dhan_client:get_pnl:554 - PnL consistency check passed: drift=‚Çπ0.00\n", "record": {"elapsed": {"repr": "0:00:09.065114", "seconds": 9.065114}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 554, "message": "PnL consistency check passed: drift=‚Çπ0.00", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27372, "name": "MainProcess"}, "thread": {"id": 26004, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:33:56.010811+05:30", "timestamp": 1755777836.010811}}}
{"text": "2025-08-21 17:33:56.013 | DEBUG    | app.services.dhan_client:get_pnl:558 - Creating PnLTotals...\n", "record": {"elapsed": {"repr": "0:00:09.067397", "seconds": 9.067397}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 558, "message": "Creating PnLTotals...", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27372, "name": "MainProcess"}, "thread": {"id": 26004, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:33:56.013094+05:30", "timestamp": 1755777836.013094}}}
{"text": "2025-08-21 17:33:56.015 | DEBUG    | app.services.dhan_client:get_pnl:565 - PnLTotals created successfully\n", "record": {"elapsed": {"repr": "0:00:09.069629", "seconds": 9.069629}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 565, "message": "PnLTotals created successfully", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27372, "name": "MainProcess"}, "thread": {"id": 26004, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:33:56.015326+05:30", "timestamp": 1755777836.015326}}}
{"text": "2025-08-21 17:33:56.017 | DEBUG    | app.services.dhan_client:get_pnl:574 - Creating PnL model...\n", "record": {"elapsed": {"repr": "0:00:09.071987", "seconds": 9.071987}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 574, "message": "Creating PnL model...", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27372, "name": "MainProcess"}, "thread": {"id": 26004, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:33:56.017684+05:30", "timestamp": 1755777836.017684}}}
{"text": "2025-08-21 17:33:56.019 | DEBUG    | app.services.dhan_client:get_pnl:575 - Model fields: totals=<class 'app.models.schemas.PnLTotals'>, perSymbol=5, updated_at=2025-08-21 17:33:55.995055+05:30, trading_day=2025-08-21\n", "record": {"elapsed": {"repr": "0:00:09.074229", "seconds": 9.074229}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 575, "message": "Model fields: totals=<class 'app.models.schemas.PnLTotals'>, perSymbol=5, updated_at=2025-08-21 17:33:55.995055+05:30, trading_day=2025-08-21", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27372, "name": "MainProcess"}, "thread": {"id": 26004, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:33:56.019926+05:30", "timestamp": 1755777836.019926}}}
{"text": "2025-08-21 17:33:56.022 | DEBUG    | app.services.dhan_client:get_pnl:584 - Created PnL model: totals=PnLTotals(realized=0.0, unrealized=-5664848.74, day=-5664848.74, currency='INR') per_symbol=[PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1250, avg=1445.94, ltp=359.93, unrealized=-1357515.44, today_pnl=-1357515.44), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=1814, avg=1005.68, ltp=1600.59, unrealized=-1079162.58, today_pnl=-1079162.58), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=734, avg=1197.77, ltp=375.03, unrealized=-603891.66, today_pnl=-603891.66), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=1135, avg=1757.83, ltp=1314.15, unrealized=503580.79, today_pnl=503580.79), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=1874, avg=1965.49, ltp=296.41, unrealized=-3127859.85, today_pnl=-3127859.85)] updated_at=datetime.datetime(2025, 8, 21, 17, 33, 55, 995055, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))) trading_day='2025-08-21'\n", "record": {"elapsed": {"repr": "0:00:09.076894", "seconds": 9.076894}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 584, "message": "Created PnL model: totals=PnLTotals(realized=0.0, unrealized=-5664848.74, day=-5664848.74, currency='INR') per_symbol=[PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1250, avg=1445.94, ltp=359.93, unrealized=-1357515.44, today_pnl=-1357515.44), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=1814, avg=1005.68, ltp=1600.59, unrealized=-1079162.58, today_pnl=-1079162.58), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=734, avg=1197.77, ltp=375.03, unrealized=-603891.66, today_pnl=-603891.66), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=1135, avg=1757.83, ltp=1314.15, unrealized=503580.79, today_pnl=503580.79), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=1874, avg=1965.49, ltp=296.41, unrealized=-3127859.85, today_pnl=-3127859.85)] updated_at=datetime.datetime(2025, 8, 21, 17, 33, 55, 995055, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))) trading_day='2025-08-21'", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27372, "name": "MainProcess"}, "thread": {"id": 26004, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:33:56.022591+05:30", "timestamp": 1755777836.022591}}}
{"text": "2025-08-21 17:33:56.026 | DEBUG    | app.services.dhan_client:get_pnl:585 - PnL model fields: {'totals': PnLTotals(realized=0.0, unrealized=-5664848.74, day=-5664848.74, currency='INR'), 'per_symbol': [PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1250, avg=1445.94, ltp=359.93, unrealized=-1357515.44, today_pnl=-1357515.44), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=1814, avg=1005.68, ltp=1600.59, unrealized=-1079162.58, today_pnl=-1079162.58), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=734, avg=1197.77, ltp=375.03, unrealized=-603891.66, today_pnl=-603891.66), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=1135, avg=1757.83, ltp=1314.15, unrealized=503580.79, today_pnl=503580.79), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=1874, avg=1965.49, ltp=296.41, unrealized=-3127859.85, today_pnl=-3127859.85)], 'updated_at': datetime.datetime(2025, 8, 21, 17, 33, 55, 995055, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))), 'trading_day': '2025-08-21'}\n", "record": {"elapsed": {"repr": "0:00:09.080591", "seconds": 9.080591}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 585, "message": "PnL model fields: {'totals': PnLTotals(realized=0.0, unrealized=-5664848.74, day=-5664848.74, currency='INR'), 'per_symbol': [PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1250, avg=1445.94, ltp=359.93, unrealized=-1357515.44, today_pnl=-1357515.44), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=1814, avg=1005.68, ltp=1600.59, unrealized=-1079162.58, today_pnl=-1079162.58), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=734, avg=1197.77, ltp=375.03, unrealized=-603891.66, today_pnl=-603891.66), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=1135, avg=1757.83, ltp=1314.15, unrealized=503580.79, today_pnl=503580.79), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=1874, avg=1965.49, ltp=296.41, unrealized=-3127859.85, today_pnl=-3127859.85)], 'updated_at': datetime.datetime(2025, 8, 21, 17, 33, 55, 995055, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))), 'trading_day': '2025-08-21'}", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27372, "name": "MainProcess"}, "thread": {"id": 26004, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:33:56.026288+05:30", "timestamp": 1755777836.026288}}}
{"text": "2025-08-21 17:33:56.029 | INFO     | app.services.dhan_client:get_pnl:587 - P&L calculation completed successfully: 5 symbols, unrealized=‚Çπ-5664848.74\n", "record": {"elapsed": {"repr": "0:00:09.084014", "seconds": 9.084014}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 587, "message": "P&L calculation completed successfully: 5 symbols, unrealized=‚Çπ-5664848.74", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27372, "name": "MainProcess"}, "thread": {"id": 26004, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:33:56.029711+05:30", "timestamp": 1755777836.029711}}}
{"text": "2025-08-21 17:33:56.032 | DEBUG    | app.ws.live:emit_delta:408 - Emitted pnl delta: seq=10\n", "record": {"elapsed": {"repr": "0:00:09.087104", "seconds": 9.087104}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "emit_delta", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 408, "message": "Emitted pnl delta: seq=10", "module": "live", "name": "app.ws.live", "process": {"id": 27372, "name": "MainProcess"}, "thread": {"id": 26004, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:33:56.032801+05:30", "timestamp": 1755777836.032801}}}
{"text": "2025-08-21 17:33:56.102 | DEBUG    | app.ws.live:emit_delta:408 - Emitted positions delta: seq=11\n", "record": {"elapsed": {"repr": "0:00:09.156822", "seconds": 9.156822}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "emit_delta", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 408, "message": "Emitted positions delta: seq=11", "module": "live", "name": "app.ws.live", "process": {"id": 27372, "name": "MainProcess"}, "thread": {"id": 26004, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:33:56.102519+05:30", "timestamp": 1755777836.102519}}}
{"text": "2025-08-21 17:33:57.424 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:10.478437", "seconds": 10.478437}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27372, "name": "MainProcess"}, "thread": {"id": 4988, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 17:33:57.424134+05:30", "timestamp": 1755777837.424134}}}
{"text": "2025-08-21 17:33:57.426 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:10.480841", "seconds": 10.480841}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27372, "name": "MainProcess"}, "thread": {"id": 4988, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 17:33:57.426538+05:30", "timestamp": 1755777837.426538}}}
{"text": "2025-08-21 17:33:57.428 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:10.483178", "seconds": 10.483178}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27372, "name": "MainProcess"}, "thread": {"id": 4988, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 17:33:57.428875+05:30", "timestamp": 1755777837.428875}}}
{"text": "2025-08-21 17:33:57.431 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:10.485470", "seconds": 10.48547}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27372, "name": "MainProcess"}, "thread": {"id": 4988, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 17:33:57.431167+05:30", "timestamp": 1755777837.431167}}}
{"text": "2025-08-21 17:33:57.432 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:10.487089", "seconds": 10.487089}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27372, "name": "MainProcess"}, "thread": {"id": 4988, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 17:33:57.432786+05:30", "timestamp": 1755777837.432786}}}
{"text": "2025-08-21 17:33:57.434 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:10.488697", "seconds": 10.488697}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27372, "name": "MainProcess"}, "thread": {"id": 4988, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 17:33:57.434394+05:30", "timestamp": 1755777837.434394}}}
{"text": "2025-08-21 17:33:57.436 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:10.490511", "seconds": 10.490511}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27372, "name": "MainProcess"}, "thread": {"id": 4988, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 17:33:57.436208+05:30", "timestamp": 1755777837.436208}}}
{"text": "2025-08-21 17:33:57.438 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:10.492460", "seconds": 10.49246}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27372, "name": "MainProcess"}, "thread": {"id": 4988, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 17:33:57.438157+05:30", "timestamp": 1755777837.438157}}}
{"text": "2025-08-21 17:33:57.440 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:10.495135", "seconds": 10.495135}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27372, "name": "MainProcess"}, "thread": {"id": 4988, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 17:33:57.440832+05:30", "timestamp": 1755777837.440832}}}
{"text": "2025-08-21 17:33:57.443 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:10.497358", "seconds": 10.497358}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27372, "name": "MainProcess"}, "thread": {"id": 4988, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 17:33:57.443055+05:30", "timestamp": 1755777837.443055}}}
{"text": "2025-08-21 17:33:57.888 | INFO     | app.services.dhan_client:get_pnl:489 - Starting accurate P&L calculation\n", "record": {"elapsed": {"repr": "0:00:10.942487", "seconds": 10.942487}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 489, "message": "Starting accurate P&L calculation", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27372, "name": "MainProcess"}, "thread": {"id": 26004, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:33:57.888184+05:30", "timestamp": 1755777837.888184}}}
{"text": "2025-08-21 17:33:57.890 | INFO     | app.services.dhan_client:get_pnl:491 - Fetched 5 positions\n", "record": {"elapsed": {"repr": "0:00:10.944688", "seconds": 10.944688}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 491, "message": "Fetched 5 positions", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27372, "name": "MainProcess"}, "thread": {"id": 26004, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:33:57.890385+05:30", "timestamp": 1755777837.890385}}}
{"text": "2025-08-21 17:33:57.891 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for RELIANCE: unrealized=-1365881.73, today=-1365881.73\n", "record": {"elapsed": {"repr": "0:00:10.946290", "seconds": 10.94629}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for RELIANCE: unrealized=-1365881.73, today=-1365881.73", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27372, "name": "MainProcess"}, "thread": {"id": 26004, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:33:57.891987+05:30", "timestamp": 1755777837.891987}}}
{"text": "2025-08-21 17:33:57.893 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for TCS: unrealized=-1053531.46, today=-1053531.46\n", "record": {"elapsed": {"repr": "0:00:10.947611", "seconds": 10.947611}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for TCS: unrealized=-1053531.46, today=-1053531.46", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27372, "name": "MainProcess"}, "thread": {"id": 26004, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:33:57.893308+05:30", "timestamp": 1755777837.893308}}}
{"text": "2025-08-21 17:33:57.895 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for HDFC: unrealized=-600676.99, today=-600676.99\n", "record": {"elapsed": {"repr": "0:00:10.949449", "seconds": 10.949449}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for HDFC: unrealized=-600676.99, today=-600676.99", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27372, "name": "MainProcess"}, "thread": {"id": 26004, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:33:57.895146+05:30", "timestamp": 1755777837.895146}}}
{"text": "2025-08-21 17:33:57.896 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for INFY: unrealized=527984.81, today=527984.81\n", "record": {"elapsed": {"repr": "0:00:10.951066", "seconds": 10.951066}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for INFY: unrealized=527984.81, today=527984.81", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27372, "name": "MainProcess"}, "thread": {"id": 26004, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:33:57.896763+05:30", "timestamp": 1755777837.896763}}}
{"text": "2025-08-21 17:33:57.898 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for ICICIBANK: unrealized=-3122218.75, today=-3122218.75\n", "record": {"elapsed": {"repr": "0:00:10.953214", "seconds": 10.953214}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for ICICIBANK: unrealized=-3122218.75, today=-3122218.75", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27372, "name": "MainProcess"}, "thread": {"id": 26004, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:33:57.898911+05:30", "timestamp": 1755777837.898911}}}
{"text": "2025-08-21 17:33:57.900 | INFO     | app.services.dhan_client:get_pnl:545 - Calculated totals - realized: 0.0, unrealized: -5614324.12, day: -5614324.12\n", "record": {"elapsed": {"repr": "0:00:10.954749", "seconds": 10.954749}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 545, "message": "Calculated totals - realized: 0.0, unrealized: -5614324.12, day: -5614324.12", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27372, "name": "MainProcess"}, "thread": {"id": 26004, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:33:57.900446+05:30", "timestamp": 1755777837.900446}}}
{"text": "2025-08-21 17:33:57.903 | DEBUG    | app.services.dhan_client:get_pnl:554 - PnL consistency check passed: drift=‚Çπ0.00\n", "record": {"elapsed": {"repr": "0:00:10.957311", "seconds": 10.957311}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 554, "message": "PnL consistency check passed: drift=‚Çπ0.00", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27372, "name": "MainProcess"}, "thread": {"id": 26004, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:33:57.903008+05:30", "timestamp": 1755777837.903008}}}
{"text": "2025-08-21 17:33:57.905 | DEBUG    | app.services.dhan_client:get_pnl:558 - Creating PnLTotals...\n", "record": {"elapsed": {"repr": "0:00:10.959587", "seconds": 10.959587}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 558, "message": "Creating PnLTotals...", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27372, "name": "MainProcess"}, "thread": {"id": 26004, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:33:57.905284+05:30", "timestamp": 1755777837.905284}}}
{"text": "2025-08-21 17:33:57.906 | DEBUG    | app.services.dhan_client:get_pnl:565 - PnLTotals created successfully\n", "record": {"elapsed": {"repr": "0:00:10.961185", "seconds": 10.961185}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 565, "message": "PnLTotals created successfully", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27372, "name": "MainProcess"}, "thread": {"id": 26004, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:33:57.906882+05:30", "timestamp": 1755777837.906882}}}
{"text": "2025-08-21 17:33:57.908 | DEBUG    | app.services.dhan_client:get_pnl:574 - Creating PnL model...\n", "record": {"elapsed": {"repr": "0:00:10.963016", "seconds": 10.963016}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 574, "message": "Creating PnL model...", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27372, "name": "MainProcess"}, "thread": {"id": 26004, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:33:57.908713+05:30", "timestamp": 1755777837.908713}}}
{"text": "2025-08-21 17:33:57.910 | DEBUG    | app.services.dhan_client:get_pnl:575 - Model fields: totals=<class 'app.models.schemas.PnLTotals'>, perSymbol=5, updated_at=2025-08-21 17:33:57.891842+05:30, trading_day=2025-08-21\n", "record": {"elapsed": {"repr": "0:00:10.964618", "seconds": 10.964618}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 575, "message": "Model fields: totals=<class 'app.models.schemas.PnLTotals'>, perSymbol=5, updated_at=2025-08-21 17:33:57.891842+05:30, trading_day=2025-08-21", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27372, "name": "MainProcess"}, "thread": {"id": 26004, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:33:57.910315+05:30", "timestamp": 1755777837.910315}}}
{"text": "2025-08-21 17:33:57.913 | DEBUG    | app.services.dhan_client:get_pnl:584 - Created PnL model: totals=PnLTotals(realized=0.0, unrealized=-5614324.12, day=-5614324.12, currency='INR') per_symbol=[PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1250, avg=1445.94, ltp=353.23, unrealized=-1365881.73, today_pnl=-1365881.73), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=1814, avg=1005.68, ltp=1586.46, unrealized=-1053531.46, today_pnl=-1053531.46), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=734, avg=1197.77, ltp=379.41, unrealized=-600676.99, today_pnl=-600676.99), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=1135, avg=1757.83, ltp=1292.65, unrealized=527984.81, today_pnl=527984.81), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=1874, avg=1965.49, ltp=299.42, unrealized=-3122218.75, today_pnl=-3122218.75)] updated_at=datetime.datetime(2025, 8, 21, 17, 33, 57, 891842, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))) trading_day='2025-08-21'\n", "record": {"elapsed": {"repr": "0:00:10.967734", "seconds": 10.967734}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 584, "message": "Created PnL model: totals=PnLTotals(realized=0.0, unrealized=-5614324.12, day=-5614324.12, currency='INR') per_symbol=[PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1250, avg=1445.94, ltp=353.23, unrealized=-1365881.73, today_pnl=-1365881.73), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=1814, avg=1005.68, ltp=1586.46, unrealized=-1053531.46, today_pnl=-1053531.46), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=734, avg=1197.77, ltp=379.41, unrealized=-600676.99, today_pnl=-600676.99), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=1135, avg=1757.83, ltp=1292.65, unrealized=527984.81, today_pnl=527984.81), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=1874, avg=1965.49, ltp=299.42, unrealized=-3122218.75, today_pnl=-3122218.75)] updated_at=datetime.datetime(2025, 8, 21, 17, 33, 57, 891842, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))) trading_day='2025-08-21'", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27372, "name": "MainProcess"}, "thread": {"id": 26004, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:33:57.913431+05:30", "timestamp": 1755777837.913431}}}
{"text": "2025-08-21 17:33:57.917 | DEBUG    | app.services.dhan_client:get_pnl:585 - PnL model fields: {'totals': PnLTotals(realized=0.0, unrealized=-5614324.12, day=-5614324.12, currency='INR'), 'per_symbol': [PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1250, avg=1445.94, ltp=353.23, unrealized=-1365881.73, today_pnl=-1365881.73), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=1814, avg=1005.68, ltp=1586.46, unrealized=-1053531.46, today_pnl=-1053531.46), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=734, avg=1197.77, ltp=379.41, unrealized=-600676.99, today_pnl=-600676.99), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=1135, avg=1757.83, ltp=1292.65, unrealized=527984.81, today_pnl=527984.81), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=1874, avg=1965.49, ltp=299.42, unrealized=-3122218.75, today_pnl=-3122218.75)], 'updated_at': datetime.datetime(2025, 8, 21, 17, 33, 57, 891842, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))), 'trading_day': '2025-08-21'}\n", "record": {"elapsed": {"repr": "0:00:10.971519", "seconds": 10.971519}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 585, "message": "PnL model fields: {'totals': PnLTotals(realized=0.0, unrealized=-5614324.12, day=-5614324.12, currency='INR'), 'per_symbol': [PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1250, avg=1445.94, ltp=353.23, unrealized=-1365881.73, today_pnl=-1365881.73), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=1814, avg=1005.68, ltp=1586.46, unrealized=-1053531.46, today_pnl=-1053531.46), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=734, avg=1197.77, ltp=379.41, unrealized=-600676.99, today_pnl=-600676.99), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=1135, avg=1757.83, ltp=1292.65, unrealized=527984.81, today_pnl=527984.81), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=1874, avg=1965.49, ltp=299.42, unrealized=-3122218.75, today_pnl=-3122218.75)], 'updated_at': datetime.datetime(2025, 8, 21, 17, 33, 57, 891842, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))), 'trading_day': '2025-08-21'}", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27372, "name": "MainProcess"}, "thread": {"id": 26004, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:33:57.917216+05:30", "timestamp": 1755777837.917216}}}
{"text": "2025-08-21 17:33:57.919 | INFO     | app.services.dhan_client:get_pnl:587 - P&L calculation completed successfully: 5 symbols, unrealized=‚Çπ-5614324.12\n", "record": {"elapsed": {"repr": "0:00:10.973478", "seconds": 10.973478}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 587, "message": "P&L calculation completed successfully: 5 symbols, unrealized=‚Çπ-5614324.12", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27372, "name": "MainProcess"}, "thread": {"id": 26004, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:33:57.919175+05:30", "timestamp": 1755777837.919175}}}
{"text": "2025-08-21 17:33:57.921 | DEBUG    | app.ws.live:emit_delta:408 - Emitted pnl delta: seq=12\n", "record": {"elapsed": {"repr": "0:00:10.975611", "seconds": 10.975611}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "emit_delta", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 408, "message": "Emitted pnl delta: seq=12", "module": "live", "name": "app.ws.live", "process": {"id": 27372, "name": "MainProcess"}, "thread": {"id": 26004, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:33:57.921308+05:30", "timestamp": 1755777837.921308}}}
{"text": "2025-08-21 17:33:57.985 | DEBUG    | app.ws.live:emit_delta:408 - Emitted positions delta: seq=13\n", "record": {"elapsed": {"repr": "0:00:11.039945", "seconds": 11.039945}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "emit_delta", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 408, "message": "Emitted positions delta: seq=13", "module": "live", "name": "app.ws.live", "process": {"id": 27372, "name": "MainProcess"}, "thread": {"id": 26004, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:33:57.985642+05:30", "timestamp": 1755777837.985642}}}
{"text": "2025-08-21 17:33:59.445 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:12.499638", "seconds": 12.499638}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27372, "name": "MainProcess"}, "thread": {"id": 4988, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 17:33:59.445335+05:30", "timestamp": 1755777839.445335}}}
{"text": "2025-08-21 17:33:59.446 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:12.500989", "seconds": 12.500989}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27372, "name": "MainProcess"}, "thread": {"id": 4988, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 17:33:59.446686+05:30", "timestamp": 1755777839.446686}}}
{"text": "2025-08-21 17:33:59.448 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:12.502841", "seconds": 12.502841}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27372, "name": "MainProcess"}, "thread": {"id": 4988, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 17:33:59.448538+05:30", "timestamp": 1755777839.448538}}}
{"text": "2025-08-21 17:33:59.449 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:12.504207", "seconds": 12.504207}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27372, "name": "MainProcess"}, "thread": {"id": 4988, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 17:33:59.449904+05:30", "timestamp": 1755777839.449904}}}
{"text": "2025-08-21 17:33:59.451 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:12.506102", "seconds": 12.506102}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27372, "name": "MainProcess"}, "thread": {"id": 4988, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 17:33:59.451799+05:30", "timestamp": 1755777839.451799}}}
{"text": "2025-08-21 17:33:59.453 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:12.507741", "seconds": 12.507741}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27372, "name": "MainProcess"}, "thread": {"id": 4988, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 17:33:59.453438+05:30", "timestamp": 1755777839.453438}}}
{"text": "2025-08-21 17:33:59.454 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:12.508924", "seconds": 12.508924}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27372, "name": "MainProcess"}, "thread": {"id": 4988, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 17:33:59.454621+05:30", "timestamp": 1755777839.454621}}}
{"text": "2025-08-21 17:33:59.456 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:12.510359", "seconds": 12.510359}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27372, "name": "MainProcess"}, "thread": {"id": 4988, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 17:33:59.456056+05:30", "timestamp": 1755777839.456056}}}
{"text": "2025-08-21 17:33:59.457 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:12.511391", "seconds": 12.511391}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27372, "name": "MainProcess"}, "thread": {"id": 4988, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 17:33:59.457088+05:30", "timestamp": 1755777839.457088}}}
{"text": "2025-08-21 17:33:59.458 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:12.513090", "seconds": 12.51309}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27372, "name": "MainProcess"}, "thread": {"id": 4988, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 17:33:59.458787+05:30", "timestamp": 1755777839.458787}}}
{"text": "2025-08-21 17:33:59.711 | INFO     | app.services.dhan_client:get_pnl:489 - Starting accurate P&L calculation\n", "record": {"elapsed": {"repr": "0:00:12.766089", "seconds": 12.766089}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 489, "message": "Starting accurate P&L calculation", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27372, "name": "MainProcess"}, "thread": {"id": 26004, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:33:59.711786+05:30", "timestamp": 1755777839.711786}}}
{"text": "2025-08-21 17:33:59.713 | INFO     | app.services.dhan_client:get_pnl:491 - Fetched 5 positions\n", "record": {"elapsed": {"repr": "0:00:12.767398", "seconds": 12.767398}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 491, "message": "Fetched 5 positions", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27372, "name": "MainProcess"}, "thread": {"id": 26004, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:33:59.713095+05:30", "timestamp": 1755777839.713095}}}
{"text": "2025-08-21 17:33:59.714 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for RELIANCE: unrealized=-1358441.9, today=-1358441.9\n", "record": {"elapsed": {"repr": "0:00:12.768685", "seconds": 12.768685}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for RELIANCE: unrealized=-1358441.9, today=-1358441.9", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27372, "name": "MainProcess"}, "thread": {"id": 26004, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:33:59.714382+05:30", "timestamp": 1755777839.714382}}}
{"text": "2025-08-21 17:33:59.715 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for TCS: unrealized=-1043898.84, today=-1043898.84\n", "record": {"elapsed": {"repr": "0:00:12.769738", "seconds": 12.769738}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for TCS: unrealized=-1043898.84, today=-1043898.84", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27372, "name": "MainProcess"}, "thread": {"id": 26004, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:33:59.715435+05:30", "timestamp": 1755777839.715435}}}
{"text": "2025-08-21 17:33:59.716 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for HDFC: unrealized=-598580.2, today=-598580.2\n", "record": {"elapsed": {"repr": "0:00:12.770894", "seconds": 12.770894}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for HDFC: unrealized=-598580.2, today=-598580.2", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27372, "name": "MainProcess"}, "thread": {"id": 26004, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:33:59.716591+05:30", "timestamp": 1755777839.716591}}}
{"text": "2025-08-21 17:33:59.717 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for INFY: unrealized=510721.96, today=510721.96\n", "record": {"elapsed": {"repr": "0:00:12.771674", "seconds": 12.771674}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for INFY: unrealized=510721.96, today=510721.96", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27372, "name": "MainProcess"}, "thread": {"id": 26004, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:33:59.717371+05:30", "timestamp": 1755777839.717371}}}
{"text": "2025-08-21 17:33:59.718 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for ICICIBANK: unrealized=-3127224.67, today=-3127224.67\n", "record": {"elapsed": {"repr": "0:00:12.772572", "seconds": 12.772572}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for ICICIBANK: unrealized=-3127224.67, today=-3127224.67", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27372, "name": "MainProcess"}, "thread": {"id": 26004, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:33:59.718269+05:30", "timestamp": 1755777839.718269}}}
{"text": "2025-08-21 17:33:59.719 | INFO     | app.services.dhan_client:get_pnl:545 - Calculated totals - realized: 0.0, unrealized: -5617423.65, day: -5617423.65\n", "record": {"elapsed": {"repr": "0:00:12.773710", "seconds": 12.77371}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 545, "message": "Calculated totals - realized: 0.0, unrealized: -5617423.65, day: -5617423.65", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27372, "name": "MainProcess"}, "thread": {"id": 26004, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:33:59.719407+05:30", "timestamp": 1755777839.719407}}}
{"text": "2025-08-21 17:33:59.721 | DEBUG    | app.services.dhan_client:get_pnl:554 - PnL consistency check passed: drift=‚Çπ0.00\n", "record": {"elapsed": {"repr": "0:00:12.775658", "seconds": 12.775658}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 554, "message": "PnL consistency check passed: drift=‚Çπ0.00", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27372, "name": "MainProcess"}, "thread": {"id": 26004, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:33:59.721355+05:30", "timestamp": 1755777839.721355}}}
{"text": "2025-08-21 17:33:59.722 | DEBUG    | app.services.dhan_client:get_pnl:558 - Creating PnLTotals...\n", "record": {"elapsed": {"repr": "0:00:12.777184", "seconds": 12.777184}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 558, "message": "Creating PnLTotals...", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27372, "name": "MainProcess"}, "thread": {"id": 26004, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:33:59.722881+05:30", "timestamp": 1755777839.722881}}}
{"text": "2025-08-21 17:33:59.724 | DEBUG    | app.services.dhan_client:get_pnl:565 - PnLTotals created successfully\n", "record": {"elapsed": {"repr": "0:00:12.778311", "seconds": 12.778311}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 565, "message": "PnLTotals created successfully", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27372, "name": "MainProcess"}, "thread": {"id": 26004, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:33:59.724008+05:30", "timestamp": 1755777839.724008}}}
{"text": "2025-08-21 17:33:59.725 | DEBUG    | app.services.dhan_client:get_pnl:574 - Creating PnL model...\n", "record": {"elapsed": {"repr": "0:00:12.779705", "seconds": 12.779705}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 574, "message": "Creating PnL model...", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27372, "name": "MainProcess"}, "thread": {"id": 26004, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:33:59.725402+05:30", "timestamp": 1755777839.725402}}}
{"text": "2025-08-21 17:33:59.726 | DEBUG    | app.services.dhan_client:get_pnl:575 - Model fields: totals=<class 'app.models.schemas.PnLTotals'>, perSymbol=5, updated_at=2025-08-21 17:33:59.714134+05:30, trading_day=2025-08-21\n", "record": {"elapsed": {"repr": "0:00:12.780761", "seconds": 12.780761}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 575, "message": "Model fields: totals=<class 'app.models.schemas.PnLTotals'>, perSymbol=5, updated_at=2025-08-21 17:33:59.714134+05:30, trading_day=2025-08-21", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27372, "name": "MainProcess"}, "thread": {"id": 26004, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:33:59.726458+05:30", "timestamp": 1755777839.726458}}}
{"text": "2025-08-21 17:33:59.727 | DEBUG    | app.services.dhan_client:get_pnl:584 - Created PnL model: totals=PnLTotals(realized=0.0, unrealized=-5617423.65, day=-5617423.65, currency='INR') per_symbol=[PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1250, avg=1445.94, ltp=359.19, unrealized=-1358441.9, today_pnl=-1358441.9), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=1814, avg=1005.68, ltp=1581.15, unrealized=-1043898.84, today_pnl=-1043898.84), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=734, avg=1197.77, ltp=382.27, unrealized=-598580.2, today_pnl=-598580.2), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=1135, avg=1757.83, ltp=1307.85, unrealized=510721.96, today_pnl=510721.96), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=1874, avg=1965.49, ltp=296.75, unrealized=-3127224.67, today_pnl=-3127224.67)] updated_at=datetime.datetime(2025, 8, 21, 17, 33, 59, 714134, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))) trading_day='2025-08-21'\n", "record": {"elapsed": {"repr": "0:00:12.782197", "seconds": 12.782197}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 584, "message": "Created PnL model: totals=PnLTotals(realized=0.0, unrealized=-5617423.65, day=-5617423.65, currency='INR') per_symbol=[PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1250, avg=1445.94, ltp=359.19, unrealized=-1358441.9, today_pnl=-1358441.9), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=1814, avg=1005.68, ltp=1581.15, unrealized=-1043898.84, today_pnl=-1043898.84), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=734, avg=1197.77, ltp=382.27, unrealized=-598580.2, today_pnl=-598580.2), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=1135, avg=1757.83, ltp=1307.85, unrealized=510721.96, today_pnl=510721.96), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=1874, avg=1965.49, ltp=296.75, unrealized=-3127224.67, today_pnl=-3127224.67)] updated_at=datetime.datetime(2025, 8, 21, 17, 33, 59, 714134, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))) trading_day='2025-08-21'", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27372, "name": "MainProcess"}, "thread": {"id": 26004, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:33:59.727894+05:30", "timestamp": 1755777839.727894}}}
{"text": "2025-08-21 17:33:59.730 | DEBUG    | app.services.dhan_client:get_pnl:585 - PnL model fields: {'totals': PnLTotals(realized=0.0, unrealized=-5617423.65, day=-5617423.65, currency='INR'), 'per_symbol': [PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1250, avg=1445.94, ltp=359.19, unrealized=-1358441.9, today_pnl=-1358441.9), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=1814, avg=1005.68, ltp=1581.15, unrealized=-1043898.84, today_pnl=-1043898.84), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=734, avg=1197.77, ltp=382.27, unrealized=-598580.2, today_pnl=-598580.2), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=1135, avg=1757.83, ltp=1307.85, unrealized=510721.96, today_pnl=510721.96), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=1874, avg=1965.49, ltp=296.75, unrealized=-3127224.67, today_pnl=-3127224.67)], 'updated_at': datetime.datetime(2025, 8, 21, 17, 33, 59, 714134, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))), 'trading_day': '2025-08-21'}\n", "record": {"elapsed": {"repr": "0:00:12.785254", "seconds": 12.785254}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 585, "message": "PnL model fields: {'totals': PnLTotals(realized=0.0, unrealized=-5617423.65, day=-5617423.65, currency='INR'), 'per_symbol': [PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1250, avg=1445.94, ltp=359.19, unrealized=-1358441.9, today_pnl=-1358441.9), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=1814, avg=1005.68, ltp=1581.15, unrealized=-1043898.84, today_pnl=-1043898.84), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=734, avg=1197.77, ltp=382.27, unrealized=-598580.2, today_pnl=-598580.2), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=1135, avg=1757.83, ltp=1307.85, unrealized=510721.96, today_pnl=510721.96), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=1874, avg=1965.49, ltp=296.75, unrealized=-3127224.67, today_pnl=-3127224.67)], 'updated_at': datetime.datetime(2025, 8, 21, 17, 33, 59, 714134, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))), 'trading_day': '2025-08-21'}", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27372, "name": "MainProcess"}, "thread": {"id": 26004, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:33:59.730951+05:30", "timestamp": 1755777839.730951}}}
{"text": "2025-08-21 17:33:59.733 | INFO     | app.services.dhan_client:get_pnl:587 - P&L calculation completed successfully: 5 symbols, unrealized=‚Çπ-5617423.65\n", "record": {"elapsed": {"repr": "0:00:12.787488", "seconds": 12.787488}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 587, "message": "P&L calculation completed successfully: 5 symbols, unrealized=‚Çπ-5617423.65", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27372, "name": "MainProcess"}, "thread": {"id": 26004, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:33:59.733185+05:30", "timestamp": 1755777839.733185}}}
{"text": "2025-08-21 17:33:59.735 | DEBUG    | app.ws.live:emit_delta:408 - Emitted pnl delta: seq=14\n", "record": {"elapsed": {"repr": "0:00:12.789508", "seconds": 12.789508}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "emit_delta", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 408, "message": "Emitted pnl delta: seq=14", "module": "live", "name": "app.ws.live", "process": {"id": 27372, "name": "MainProcess"}, "thread": {"id": 26004, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:33:59.735205+05:30", "timestamp": 1755777839.735205}}}
{"text": "2025-08-21 17:33:59.813 | DEBUG    | app.ws.live:emit_delta:408 - Emitted positions delta: seq=15\n", "record": {"elapsed": {"repr": "0:00:12.867658", "seconds": 12.867658}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "emit_delta", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 408, "message": "Emitted positions delta: seq=15", "module": "live", "name": "app.ws.live", "process": {"id": 27372, "name": "MainProcess"}, "thread": {"id": 26004, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:33:59.813355+05:30", "timestamp": 1755777839.813355}}}
{"text": "2025-08-21 17:34:01.435 | INFO     | app.services.dhan_client:get_pnl:489 - Starting accurate P&L calculation\n", "record": {"elapsed": {"repr": "0:00:14.490129", "seconds": 14.490129}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 489, "message": "Starting accurate P&L calculation", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27372, "name": "MainProcess"}, "thread": {"id": 26004, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:34:01.435826+05:30", "timestamp": 1755777841.435826}}}
{"text": "2025-08-21 17:34:01.437 | INFO     | app.services.dhan_client:get_pnl:491 - Fetched 5 positions\n", "record": {"elapsed": {"repr": "0:00:14.491361", "seconds": 14.491361}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 491, "message": "Fetched 5 positions", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27372, "name": "MainProcess"}, "thread": {"id": 26004, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:34:01.437058+05:30", "timestamp": 1755777841.437058}}}
{"text": "2025-08-21 17:34:01.438 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for RELIANCE: unrealized=-1358441.9, today=-1358441.9\n", "record": {"elapsed": {"repr": "0:00:14.492897", "seconds": 14.492897}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for RELIANCE: unrealized=-1358441.9, today=-1358441.9", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27372, "name": "MainProcess"}, "thread": {"id": 26004, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:34:01.438594+05:30", "timestamp": 1755777841.438594}}}
{"text": "2025-08-21 17:34:01.439 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for TCS: unrealized=-1043898.84, today=-1043898.84\n", "record": {"elapsed": {"repr": "0:00:14.494170", "seconds": 14.49417}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for TCS: unrealized=-1043898.84, today=-1043898.84", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27372, "name": "MainProcess"}, "thread": {"id": 26004, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:34:01.439867+05:30", "timestamp": 1755777841.439867}}}
{"text": "2025-08-21 17:34:01.440 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for HDFC: unrealized=-598580.2, today=-598580.2\n", "record": {"elapsed": {"repr": "0:00:14.495213", "seconds": 14.495213}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for HDFC: unrealized=-598580.2, today=-598580.2", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27372, "name": "MainProcess"}, "thread": {"id": 26004, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:34:01.440910+05:30", "timestamp": 1755777841.44091}}}
{"text": "2025-08-21 17:34:01.441 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for INFY: unrealized=510721.96, today=510721.96\n", "record": {"elapsed": {"repr": "0:00:14.496279", "seconds": 14.496279}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for INFY: unrealized=510721.96, today=510721.96", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27372, "name": "MainProcess"}, "thread": {"id": 26004, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:34:01.441976+05:30", "timestamp": 1755777841.441976}}}
{"text": "2025-08-21 17:34:01.443 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for ICICIBANK: unrealized=-3127224.67, today=-3127224.67\n", "record": {"elapsed": {"repr": "0:00:14.497667", "seconds": 14.497667}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for ICICIBANK: unrealized=-3127224.67, today=-3127224.67", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27372, "name": "MainProcess"}, "thread": {"id": 26004, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:34:01.443364+05:30", "timestamp": 1755777841.443364}}}
{"text": "2025-08-21 17:34:01.444 | INFO     | app.services.dhan_client:get_pnl:545 - Calculated totals - realized: 0.0, unrealized: -5617423.65, day: -5617423.65\n", "record": {"elapsed": {"repr": "0:00:14.499115", "seconds": 14.499115}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 545, "message": "Calculated totals - realized: 0.0, unrealized: -5617423.65, day: -5617423.65", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27372, "name": "MainProcess"}, "thread": {"id": 26004, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:34:01.444812+05:30", "timestamp": 1755777841.444812}}}
{"text": "2025-08-21 17:34:01.445 | DEBUG    | app.services.dhan_client:get_pnl:554 - PnL consistency check passed: drift=‚Çπ0.00\n", "record": {"elapsed": {"repr": "0:00:14.500251", "seconds": 14.500251}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 554, "message": "PnL consistency check passed: drift=‚Çπ0.00", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27372, "name": "MainProcess"}, "thread": {"id": 26004, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:34:01.445948+05:30", "timestamp": 1755777841.445948}}}
{"text": "2025-08-21 17:34:01.446 | DEBUG    | app.services.dhan_client:get_pnl:558 - Creating PnLTotals...\n", "record": {"elapsed": {"repr": "0:00:14.501294", "seconds": 14.501294}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 558, "message": "Creating PnLTotals...", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27372, "name": "MainProcess"}, "thread": {"id": 26004, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:34:01.446991+05:30", "timestamp": 1755777841.446991}}}
{"text": "2025-08-21 17:34:01.448 | DEBUG    | app.services.dhan_client:get_pnl:565 - PnLTotals created successfully\n", "record": {"elapsed": {"repr": "0:00:14.502540", "seconds": 14.50254}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 565, "message": "PnLTotals created successfully", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27372, "name": "MainProcess"}, "thread": {"id": 26004, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:34:01.448237+05:30", "timestamp": 1755777841.448237}}}
{"text": "2025-08-21 17:34:01.449 | DEBUG    | app.services.dhan_client:get_pnl:574 - Creating PnL model...\n", "record": {"elapsed": {"repr": "0:00:14.503445", "seconds": 14.503445}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 574, "message": "Creating PnL model...", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27372, "name": "MainProcess"}, "thread": {"id": 26004, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:34:01.449142+05:30", "timestamp": 1755777841.449142}}}
{"text": "2025-08-21 17:34:01.450 | DEBUG    | app.services.dhan_client:get_pnl:575 - Model fields: totals=<class 'app.models.schemas.PnLTotals'>, perSymbol=5, updated_at=2025-08-21 17:34:01.438443+05:30, trading_day=2025-08-21\n", "record": {"elapsed": {"repr": "0:00:14.504337", "seconds": 14.504337}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 575, "message": "Model fields: totals=<class 'app.models.schemas.PnLTotals'>, perSymbol=5, updated_at=2025-08-21 17:34:01.438443+05:30, trading_day=2025-08-21", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27372, "name": "MainProcess"}, "thread": {"id": 26004, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:34:01.450034+05:30", "timestamp": 1755777841.450034}}}
{"text": "2025-08-21 17:34:01.451 | DEBUG    | app.services.dhan_client:get_pnl:584 - Created PnL model: totals=PnLTotals(realized=0.0, unrealized=-5617423.65, day=-5617423.65, currency='INR') per_symbol=[PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1250, avg=1445.94, ltp=359.19, unrealized=-1358441.9, today_pnl=-1358441.9), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=1814, avg=1005.68, ltp=1581.15, unrealized=-1043898.84, today_pnl=-1043898.84), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=734, avg=1197.77, ltp=382.27, unrealized=-598580.2, today_pnl=-598580.2), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=1135, avg=1757.83, ltp=1307.85, unrealized=510721.96, today_pnl=510721.96), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=1874, avg=1965.49, ltp=296.75, unrealized=-3127224.67, today_pnl=-3127224.67)] updated_at=datetime.datetime(2025, 8, 21, 17, 34, 1, 438443, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))) trading_day='2025-08-21'\n", "record": {"elapsed": {"repr": "0:00:14.505891", "seconds": 14.505891}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 584, "message": "Created PnL model: totals=PnLTotals(realized=0.0, unrealized=-5617423.65, day=-5617423.65, currency='INR') per_symbol=[PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1250, avg=1445.94, ltp=359.19, unrealized=-1358441.9, today_pnl=-1358441.9), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=1814, avg=1005.68, ltp=1581.15, unrealized=-1043898.84, today_pnl=-1043898.84), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=734, avg=1197.77, ltp=382.27, unrealized=-598580.2, today_pnl=-598580.2), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=1135, avg=1757.83, ltp=1307.85, unrealized=510721.96, today_pnl=510721.96), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=1874, avg=1965.49, ltp=296.75, unrealized=-3127224.67, today_pnl=-3127224.67)] updated_at=datetime.datetime(2025, 8, 21, 17, 34, 1, 438443, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))) trading_day='2025-08-21'", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27372, "name": "MainProcess"}, "thread": {"id": 26004, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:34:01.451588+05:30", "timestamp": 1755777841.451588}}}
{"text": "2025-08-21 17:34:01.453 | DEBUG    | app.services.dhan_client:get_pnl:585 - PnL model fields: {'totals': PnLTotals(realized=0.0, unrealized=-5617423.65, day=-5617423.65, currency='INR'), 'per_symbol': [PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1250, avg=1445.94, ltp=359.19, unrealized=-1358441.9, today_pnl=-1358441.9), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=1814, avg=1005.68, ltp=1581.15, unrealized=-1043898.84, today_pnl=-1043898.84), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=734, avg=1197.77, ltp=382.27, unrealized=-598580.2, today_pnl=-598580.2), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=1135, avg=1757.83, ltp=1307.85, unrealized=510721.96, today_pnl=510721.96), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=1874, avg=1965.49, ltp=296.75, unrealized=-3127224.67, today_pnl=-3127224.67)], 'updated_at': datetime.datetime(2025, 8, 21, 17, 34, 1, 438443, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))), 'trading_day': '2025-08-21'}\n", "record": {"elapsed": {"repr": "0:00:14.508067", "seconds": 14.508067}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 585, "message": "PnL model fields: {'totals': PnLTotals(realized=0.0, unrealized=-5617423.65, day=-5617423.65, currency='INR'), 'per_symbol': [PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1250, avg=1445.94, ltp=359.19, unrealized=-1358441.9, today_pnl=-1358441.9), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=1814, avg=1005.68, ltp=1581.15, unrealized=-1043898.84, today_pnl=-1043898.84), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=734, avg=1197.77, ltp=382.27, unrealized=-598580.2, today_pnl=-598580.2), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=1135, avg=1757.83, ltp=1307.85, unrealized=510721.96, today_pnl=510721.96), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=1874, avg=1965.49, ltp=296.75, unrealized=-3127224.67, today_pnl=-3127224.67)], 'updated_at': datetime.datetime(2025, 8, 21, 17, 34, 1, 438443, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))), 'trading_day': '2025-08-21'}", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27372, "name": "MainProcess"}, "thread": {"id": 26004, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:34:01.453764+05:30", "timestamp": 1755777841.453764}}}
{"text": "2025-08-21 17:34:01.455 | INFO     | app.services.dhan_client:get_pnl:587 - P&L calculation completed successfully: 5 symbols, unrealized=‚Çπ-5617423.65\n", "record": {"elapsed": {"repr": "0:00:14.509911", "seconds": 14.509911}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 587, "message": "P&L calculation completed successfully: 5 symbols, unrealized=‚Çπ-5617423.65", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27372, "name": "MainProcess"}, "thread": {"id": 26004, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:34:01.455608+05:30", "timestamp": 1755777841.455608}}}
{"text": "2025-08-21 17:34:01.457 | DEBUG    | app.ws.live:emit_delta:408 - Emitted pnl delta: seq=16\n", "record": {"elapsed": {"repr": "0:00:14.511721", "seconds": 14.511721}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "emit_delta", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 408, "message": "Emitted pnl delta: seq=16", "module": "live", "name": "app.ws.live", "process": {"id": 27372, "name": "MainProcess"}, "thread": {"id": 26004, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:34:01.457418+05:30", "timestamp": 1755777841.457418}}}
{"text": "2025-08-21 17:34:01.461 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:14.515312", "seconds": 14.515312}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27372, "name": "MainProcess"}, "thread": {"id": 4988, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 17:34:01.461009+05:30", "timestamp": 1755777841.461009}}}
{"text": "2025-08-21 17:34:01.462 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:14.516749", "seconds": 14.516749}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27372, "name": "MainProcess"}, "thread": {"id": 4988, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 17:34:01.462446+05:30", "timestamp": 1755777841.462446}}}
{"text": "2025-08-21 17:34:01.463 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:14.517951", "seconds": 14.517951}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27372, "name": "MainProcess"}, "thread": {"id": 4988, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 17:34:01.463648+05:30", "timestamp": 1755777841.463648}}}
{"text": "2025-08-21 17:34:01.465 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:14.519441", "seconds": 14.519441}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27372, "name": "MainProcess"}, "thread": {"id": 4988, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 17:34:01.465138+05:30", "timestamp": 1755777841.465138}}}
{"text": "2025-08-21 17:34:01.466 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:14.520384", "seconds": 14.520384}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27372, "name": "MainProcess"}, "thread": {"id": 4988, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 17:34:01.466081+05:30", "timestamp": 1755777841.466081}}}
{"text": "2025-08-21 17:34:01.466 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:14.521240", "seconds": 14.52124}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27372, "name": "MainProcess"}, "thread": {"id": 4988, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 17:34:01.466937+05:30", "timestamp": 1755777841.466937}}}
{"text": "2025-08-21 17:34:01.468 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:14.522379", "seconds": 14.522379}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27372, "name": "MainProcess"}, "thread": {"id": 4988, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 17:34:01.468076+05:30", "timestamp": 1755777841.468076}}}
{"text": "2025-08-21 17:34:01.469 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:14.523550", "seconds": 14.52355}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27372, "name": "MainProcess"}, "thread": {"id": 4988, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 17:34:01.469247+05:30", "timestamp": 1755777841.469247}}}
{"text": "2025-08-21 17:34:01.471 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:14.525321", "seconds": 14.525321}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27372, "name": "MainProcess"}, "thread": {"id": 4988, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 17:34:01.471018+05:30", "timestamp": 1755777841.471018}}}
{"text": "2025-08-21 17:34:01.472 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:14.526496", "seconds": 14.526496}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27372, "name": "MainProcess"}, "thread": {"id": 4988, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 17:34:01.472193+05:30", "timestamp": 1755777841.472193}}}
{"text": "2025-08-21 17:34:01.561 | DEBUG    | app.ws.live:emit_delta:408 - Emitted positions delta: seq=17\n", "record": {"elapsed": {"repr": "0:00:14.615935", "seconds": 14.615935}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "emit_delta", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 408, "message": "Emitted positions delta: seq=17", "module": "live", "name": "app.ws.live", "process": {"id": 27372, "name": "MainProcess"}, "thread": {"id": 26004, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:34:01.561632+05:30", "timestamp": 1755777841.561632}}}
{"text": "2025-08-21 17:34:03.026 | INFO     | app.services.dhan_client:get_pnl:489 - Starting accurate P&L calculation\n", "record": {"elapsed": {"repr": "0:00:16.080340", "seconds": 16.08034}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 489, "message": "Starting accurate P&L calculation", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27372, "name": "MainProcess"}, "thread": {"id": 26004, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:34:03.026037+05:30", "timestamp": 1755777843.026037}}}
{"text": "2025-08-21 17:34:03.027 | INFO     | app.services.dhan_client:get_pnl:491 - Fetched 5 positions\n", "record": {"elapsed": {"repr": "0:00:16.081635", "seconds": 16.081635}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 491, "message": "Fetched 5 positions", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27372, "name": "MainProcess"}, "thread": {"id": 26004, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:34:03.027332+05:30", "timestamp": 1755777843.027332}}}
{"text": "2025-08-21 17:34:03.028 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for RELIANCE: unrealized=-1363235.49, today=-1363235.49\n", "record": {"elapsed": {"repr": "0:00:16.082593", "seconds": 16.082593}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for RELIANCE: unrealized=-1363235.49, today=-1363235.49", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27372, "name": "MainProcess"}, "thread": {"id": 26004, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:34:03.028290+05:30", "timestamp": 1755777843.02829}}}
{"text": "2025-08-21 17:34:03.029 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for TCS: unrealized=-1100454.9, today=-1100454.9\n", "record": {"elapsed": {"repr": "0:00:16.083941", "seconds": 16.083941}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for TCS: unrealized=-1100454.9, today=-1100454.9", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27372, "name": "MainProcess"}, "thread": {"id": 26004, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:34:03.029638+05:30", "timestamp": 1755777843.029638}}}
{"text": "2025-08-21 17:34:03.030 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for HDFC: unrealized=-596209.12, today=-596209.12\n", "record": {"elapsed": {"repr": "0:00:16.084784", "seconds": 16.084784}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for HDFC: unrealized=-596209.12, today=-596209.12", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27372, "name": "MainProcess"}, "thread": {"id": 26004, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:34:03.030481+05:30", "timestamp": 1755777843.030481}}}
{"text": "2025-08-21 17:34:03.031 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for INFY: unrealized=517689.52, today=517689.52\n", "record": {"elapsed": {"repr": "0:00:16.085726", "seconds": 16.085726}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for INFY: unrealized=517689.52, today=517689.52", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27372, "name": "MainProcess"}, "thread": {"id": 26004, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:34:03.031423+05:30", "timestamp": 1755777843.031423}}}
{"text": "2025-08-21 17:34:03.032 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for ICICIBANK: unrealized=-3134550.02, today=-3134550.02\n", "record": {"elapsed": {"repr": "0:00:16.086960", "seconds": 16.08696}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for ICICIBANK: unrealized=-3134550.02, today=-3134550.02", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27372, "name": "MainProcess"}, "thread": {"id": 26004, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:34:03.032657+05:30", "timestamp": 1755777843.032657}}}
{"text": "2025-08-21 17:34:03.033 | INFO     | app.services.dhan_client:get_pnl:545 - Calculated totals - realized: 0.0, unrealized: -5676760.01, day: -5676760.01\n", "record": {"elapsed": {"repr": "0:00:16.088101", "seconds": 16.088101}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 545, "message": "Calculated totals - realized: 0.0, unrealized: -5676760.01, day: -5676760.01", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27372, "name": "MainProcess"}, "thread": {"id": 26004, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:34:03.033798+05:30", "timestamp": 1755777843.033798}}}
{"text": "2025-08-21 17:34:03.035 | DEBUG    | app.services.dhan_client:get_pnl:554 - PnL consistency check passed: drift=‚Çπ0.00\n", "record": {"elapsed": {"repr": "0:00:16.089982", "seconds": 16.089982}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 554, "message": "PnL consistency check passed: drift=‚Çπ0.00", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27372, "name": "MainProcess"}, "thread": {"id": 26004, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:34:03.035679+05:30", "timestamp": 1755777843.035679}}}
{"text": "2025-08-21 17:34:03.036 | DEBUG    | app.services.dhan_client:get_pnl:558 - Creating PnLTotals...\n", "record": {"elapsed": {"repr": "0:00:16.090912", "seconds": 16.090912}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 558, "message": "Creating PnLTotals...", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27372, "name": "MainProcess"}, "thread": {"id": 26004, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:34:03.036609+05:30", "timestamp": 1755777843.036609}}}
{"text": "2025-08-21 17:34:03.038 | DEBUG    | app.services.dhan_client:get_pnl:565 - PnLTotals created successfully\n", "record": {"elapsed": {"repr": "0:00:16.092484", "seconds": 16.092484}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 565, "message": "PnLTotals created successfully", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27372, "name": "MainProcess"}, "thread": {"id": 26004, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:34:03.038181+05:30", "timestamp": 1755777843.038181}}}
{"text": "2025-08-21 17:34:03.039 | DEBUG    | app.services.dhan_client:get_pnl:574 - Creating PnL model...\n", "record": {"elapsed": {"repr": "0:00:16.093850", "seconds": 16.09385}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 574, "message": "Creating PnL model...", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27372, "name": "MainProcess"}, "thread": {"id": 26004, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:34:03.039547+05:30", "timestamp": 1755777843.039547}}}
{"text": "2025-08-21 17:34:03.040 | DEBUG    | app.services.dhan_client:get_pnl:575 - Model fields: totals=<class 'app.models.schemas.PnLTotals'>, perSymbol=5, updated_at=2025-08-21 17:34:03.028179+05:30, trading_day=2025-08-21\n", "record": {"elapsed": {"repr": "0:00:16.094691", "seconds": 16.094691}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 575, "message": "Model fields: totals=<class 'app.models.schemas.PnLTotals'>, perSymbol=5, updated_at=2025-08-21 17:34:03.028179+05:30, trading_day=2025-08-21", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27372, "name": "MainProcess"}, "thread": {"id": 26004, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:34:03.040388+05:30", "timestamp": 1755777843.040388}}}
{"text": "2025-08-21 17:34:03.041 | DEBUG    | app.services.dhan_client:get_pnl:584 - Created PnL model: totals=PnLTotals(realized=0.0, unrealized=-5676760.01, day=-5676760.01, currency='INR') per_symbol=[PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1250, avg=1445.94, ltp=355.35, unrealized=-1363235.49, today_pnl=-1363235.49), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=1814, avg=1005.68, ltp=1612.33, unrealized=-1100454.9, today_pnl=-1100454.9), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=734, avg=1197.77, ltp=385.5, unrealized=-596209.12, today_pnl=-596209.12), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=1135, avg=1757.83, ltp=1301.72, unrealized=517689.52, today_pnl=517689.52), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=1874, avg=1965.49, ltp=292.84, unrealized=-3134550.02, today_pnl=-3134550.02)] updated_at=datetime.datetime(2025, 8, 21, 17, 34, 3, 28179, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))) trading_day='2025-08-21'\n", "record": {"elapsed": {"repr": "0:00:16.095769", "seconds": 16.095769}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 584, "message": "Created PnL model: totals=PnLTotals(realized=0.0, unrealized=-5676760.01, day=-5676760.01, currency='INR') per_symbol=[PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1250, avg=1445.94, ltp=355.35, unrealized=-1363235.49, today_pnl=-1363235.49), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=1814, avg=1005.68, ltp=1612.33, unrealized=-1100454.9, today_pnl=-1100454.9), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=734, avg=1197.77, ltp=385.5, unrealized=-596209.12, today_pnl=-596209.12), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=1135, avg=1757.83, ltp=1301.72, unrealized=517689.52, today_pnl=517689.52), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=1874, avg=1965.49, ltp=292.84, unrealized=-3134550.02, today_pnl=-3134550.02)] updated_at=datetime.datetime(2025, 8, 21, 17, 34, 3, 28179, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))) trading_day='2025-08-21'", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27372, "name": "MainProcess"}, "thread": {"id": 26004, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:34:03.041466+05:30", "timestamp": 1755777843.041466}}}
{"text": "2025-08-21 17:34:03.043 | DEBUG    | app.services.dhan_client:get_pnl:585 - PnL model fields: {'totals': PnLTotals(realized=0.0, unrealized=-5676760.01, day=-5676760.01, currency='INR'), 'per_symbol': [PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1250, avg=1445.94, ltp=355.35, unrealized=-1363235.49, today_pnl=-1363235.49), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=1814, avg=1005.68, ltp=1612.33, unrealized=-1100454.9, today_pnl=-1100454.9), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=734, avg=1197.77, ltp=385.5, unrealized=-596209.12, today_pnl=-596209.12), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=1135, avg=1757.83, ltp=1301.72, unrealized=517689.52, today_pnl=517689.52), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=1874, avg=1965.49, ltp=292.84, unrealized=-3134550.02, today_pnl=-3134550.02)], 'updated_at': datetime.datetime(2025, 8, 21, 17, 34, 3, 28179, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))), 'trading_day': '2025-08-21'}\n", "record": {"elapsed": {"repr": "0:00:16.097452", "seconds": 16.097452}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 585, "message": "PnL model fields: {'totals': PnLTotals(realized=0.0, unrealized=-5676760.01, day=-5676760.01, currency='INR'), 'per_symbol': [PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1250, avg=1445.94, ltp=355.35, unrealized=-1363235.49, today_pnl=-1363235.49), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=1814, avg=1005.68, ltp=1612.33, unrealized=-1100454.9, today_pnl=-1100454.9), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=734, avg=1197.77, ltp=385.5, unrealized=-596209.12, today_pnl=-596209.12), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=1135, avg=1757.83, ltp=1301.72, unrealized=517689.52, today_pnl=517689.52), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=1874, avg=1965.49, ltp=292.84, unrealized=-3134550.02, today_pnl=-3134550.02)], 'updated_at': datetime.datetime(2025, 8, 21, 17, 34, 3, 28179, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))), 'trading_day': '2025-08-21'}", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27372, "name": "MainProcess"}, "thread": {"id": 26004, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:34:03.043149+05:30", "timestamp": 1755777843.043149}}}
{"text": "2025-08-21 17:34:03.045 | INFO     | app.services.dhan_client:get_pnl:587 - P&L calculation completed successfully: 5 symbols, unrealized=‚Çπ-5676760.01\n", "record": {"elapsed": {"repr": "0:00:16.099392", "seconds": 16.099392}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 587, "message": "P&L calculation completed successfully: 5 symbols, unrealized=‚Çπ-5676760.01", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27372, "name": "MainProcess"}, "thread": {"id": 26004, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:34:03.045089+05:30", "timestamp": 1755777843.045089}}}
{"text": "2025-08-21 17:34:03.046 | DEBUG    | app.ws.live:emit_delta:408 - Emitted pnl delta: seq=18\n", "record": {"elapsed": {"repr": "0:00:16.101031", "seconds": 16.101031}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "emit_delta", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 408, "message": "Emitted pnl delta: seq=18", "module": "live", "name": "app.ws.live", "process": {"id": 27372, "name": "MainProcess"}, "thread": {"id": 26004, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:34:03.046728+05:30", "timestamp": 1755777843.046728}}}
{"text": "2025-08-21 17:34:03.473 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:16.528017", "seconds": 16.528017}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27372, "name": "MainProcess"}, "thread": {"id": 4988, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 17:34:03.473714+05:30", "timestamp": 1755777843.473714}}}
{"text": "2025-08-21 17:34:03.475 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:16.529823", "seconds": 16.529823}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27372, "name": "MainProcess"}, "thread": {"id": 4988, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 17:34:03.475520+05:30", "timestamp": 1755777843.47552}}}
{"text": "2025-08-21 17:34:03.478 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:16.532878", "seconds": 16.532878}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27372, "name": "MainProcess"}, "thread": {"id": 4988, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 17:34:03.478575+05:30", "timestamp": 1755777843.478575}}}
{"text": "2025-08-21 17:34:03.479 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:16.534127", "seconds": 16.534127}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27372, "name": "MainProcess"}, "thread": {"id": 4988, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 17:34:03.479824+05:30", "timestamp": 1755777843.479824}}}
{"text": "2025-08-21 17:34:03.481 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:16.535706", "seconds": 16.535706}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27372, "name": "MainProcess"}, "thread": {"id": 4988, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 17:34:03.481403+05:30", "timestamp": 1755777843.481403}}}
