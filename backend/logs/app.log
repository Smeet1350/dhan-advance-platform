{"text": "2025-08-21 22:05:15.148 | DEBUG    | app.ws.live:emit_delta:408 - Emitted pnl delta: seq=12\n", "record": {"elapsed": {"repr": "0:00:10.904609", "seconds": 10.904609}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "emit_delta", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 408, "message": "Emitted pnl delta: seq=12", "module": "live", "name": "app.ws.live", "process": {"id": 29644, "name": "MainProcess"}, "thread": {"id": 29140, "name": "MainThread"}, "time": {"repr": "2025-08-21 22:05:15.148381+05:30", "timestamp": 1755794115.148381}}}
{"text": "2025-08-21 22:05:16.018 | DEBUG    | app.ws.live:emit_delta:408 - Emitted positions delta: seq=13\n", "record": {"elapsed": {"repr": "0:00:11.774495", "seconds": 11.774495}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "emit_delta", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 408, "message": "Emitted positions delta: seq=13", "module": "live", "name": "app.ws.live", "process": {"id": 29644, "name": "MainProcess"}, "thread": {"id": 29140, "name": "MainThread"}, "time": {"repr": "2025-08-21 22:05:16.018267+05:30", "timestamp": 1755794116.018267}}}
{"text": "2025-08-21 22:05:16.619 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:12.375328", "seconds": 12.375328}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 29644, "name": "MainProcess"}, "thread": {"id": 15452, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 22:05:16.619100+05:30", "timestamp": 1755794116.6191}}}
{"text": "2025-08-21 22:05:16.624 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:12.380897", "seconds": 12.380897}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 29644, "name": "MainProcess"}, "thread": {"id": 15452, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 22:05:16.624669+05:30", "timestamp": 1755794116.624669}}}
{"text": "2025-08-21 22:05:16.628 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:12.384293", "seconds": 12.384293}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 29644, "name": "MainProcess"}, "thread": {"id": 15452, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 22:05:16.628065+05:30", "timestamp": 1755794116.628065}}}
{"text": "2025-08-21 22:05:16.634 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:12.390905", "seconds": 12.390905}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 29644, "name": "MainProcess"}, "thread": {"id": 15452, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 22:05:16.634677+05:30", "timestamp": 1755794116.634677}}}
{"text": "2025-08-21 22:05:16.636 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:12.392383", "seconds": 12.392383}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 29644, "name": "MainProcess"}, "thread": {"id": 15452, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 22:05:16.636155+05:30", "timestamp": 1755794116.636155}}}
{"text": "2025-08-21 22:05:16.640 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:12.397056", "seconds": 12.397056}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 29644, "name": "MainProcess"}, "thread": {"id": 15452, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 22:05:16.640828+05:30", "timestamp": 1755794116.640828}}}
{"text": "2025-08-21 22:05:16.642 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:12.398328", "seconds": 12.398328}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 29644, "name": "MainProcess"}, "thread": {"id": 15452, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 22:05:16.642100+05:30", "timestamp": 1755794116.6421}}}
{"text": "2025-08-21 22:05:16.644 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:12.400501", "seconds": 12.400501}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 29644, "name": "MainProcess"}, "thread": {"id": 15452, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 22:05:16.644273+05:30", "timestamp": 1755794116.644273}}}
{"text": "2025-08-21 22:05:16.647 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:12.403947", "seconds": 12.403947}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 29644, "name": "MainProcess"}, "thread": {"id": 15452, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 22:05:16.647719+05:30", "timestamp": 1755794116.647719}}}
{"text": "2025-08-21 22:05:16.649 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:12.406210", "seconds": 12.40621}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 29644, "name": "MainProcess"}, "thread": {"id": 15452, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 22:05:16.649982+05:30", "timestamp": 1755794116.649982}}}
{"text": "2025-08-21 22:05:17.065 | INFO     | app.services.dhan_client:get_pnl:489 - Starting accurate P&L calculation\n", "record": {"elapsed": {"repr": "0:00:12.822157", "seconds": 12.822157}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 489, "message": "Starting accurate P&L calculation", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 29644, "name": "MainProcess"}, "thread": {"id": 29140, "name": "MainThread"}, "time": {"repr": "2025-08-21 22:05:17.065929+05:30", "timestamp": 1755794117.065929}}}
{"text": "2025-08-21 22:05:17.070 | INFO     | app.services.dhan_client:get_pnl:491 - Fetched 5 positions\n", "record": {"elapsed": {"repr": "0:00:12.826261", "seconds": 12.826261}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 491, "message": "Fetched 5 positions", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 29644, "name": "MainProcess"}, "thread": {"id": 29140, "name": "MainThread"}, "time": {"repr": "2025-08-21 22:05:17.070033+05:30", "timestamp": 1755794117.070033}}}
{"text": "2025-08-21 22:05:17.073 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for RELIANCE: unrealized=125450.97, today=125450.97\n", "record": {"elapsed": {"repr": "0:00:12.829950", "seconds": 12.82995}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for RELIANCE: unrealized=125450.97, today=125450.97", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 29644, "name": "MainProcess"}, "thread": {"id": 29140, "name": "MainThread"}, "time": {"repr": "2025-08-21 22:05:17.073722+05:30", "timestamp": 1755794117.073722}}}
{"text": "2025-08-21 22:05:17.080 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for TCS: unrealized=-23330.6, today=-23330.6\n", "record": {"elapsed": {"repr": "0:00:12.836269", "seconds": 12.836269}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for TCS: unrealized=-23330.6, today=-23330.6", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 29644, "name": "MainProcess"}, "thread": {"id": 29140, "name": "MainThread"}, "time": {"repr": "2025-08-21 22:05:17.080041+05:30", "timestamp": 1755794117.080041}}}
{"text": "2025-08-21 22:05:17.087 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for HDFC: unrealized=1792401.88, today=1792401.88\n", "record": {"elapsed": {"repr": "0:00:12.843325", "seconds": 12.843325}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for HDFC: unrealized=1792401.88, today=1792401.88", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 29644, "name": "MainProcess"}, "thread": {"id": 29140, "name": "MainThread"}, "time": {"repr": "2025-08-21 22:05:17.087097+05:30", "timestamp": 1755794117.087097}}}
{"text": "2025-08-21 22:05:17.098 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for INFY: unrealized=1502027.22, today=1502027.22\n", "record": {"elapsed": {"repr": "0:00:12.854991", "seconds": 12.854991}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for INFY: unrealized=1502027.22, today=1502027.22", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 29644, "name": "MainProcess"}, "thread": {"id": 29140, "name": "MainThread"}, "time": {"repr": "2025-08-21 22:05:17.098763+05:30", "timestamp": 1755794117.098763}}}
{"text": "2025-08-21 22:05:17.112 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for ICICIBANK: unrealized=-1342638.9, today=-1342638.9\n", "record": {"elapsed": {"repr": "0:00:12.868703", "seconds": 12.868703}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for ICICIBANK: unrealized=-1342638.9, today=-1342638.9", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 29644, "name": "MainProcess"}, "thread": {"id": 29140, "name": "MainThread"}, "time": {"repr": "2025-08-21 22:05:17.112475+05:30", "timestamp": 1755794117.112475}}}
{"text": "2025-08-21 22:05:17.119 | INFO     | app.services.dhan_client:get_pnl:545 - Calculated totals - realized: 0.0, unrealized: 2053910.57, day: 2053910.57\n", "record": {"elapsed": {"repr": "0:00:12.875973", "seconds": 12.875973}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 545, "message": "Calculated totals - realized: 0.0, unrealized: 2053910.57, day: 2053910.57", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 29644, "name": "MainProcess"}, "thread": {"id": 29140, "name": "MainThread"}, "time": {"repr": "2025-08-21 22:05:17.119745+05:30", "timestamp": 1755794117.119745}}}
{"text": "2025-08-21 22:05:17.136 | DEBUG    | app.services.dhan_client:get_pnl:554 - PnL consistency check passed: drift=‚Çπ0.00\n", "record": {"elapsed": {"repr": "0:00:12.892645", "seconds": 12.892645}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 554, "message": "PnL consistency check passed: drift=‚Çπ0.00", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 29644, "name": "MainProcess"}, "thread": {"id": 29140, "name": "MainThread"}, "time": {"repr": "2025-08-21 22:05:17.136417+05:30", "timestamp": 1755794117.136417}}}
{"text": "2025-08-21 22:05:17.141 | DEBUG    | app.services.dhan_client:get_pnl:558 - Creating PnLTotals...\n", "record": {"elapsed": {"repr": "0:00:12.898224", "seconds": 12.898224}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 558, "message": "Creating PnLTotals...", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 29644, "name": "MainProcess"}, "thread": {"id": 29140, "name": "MainThread"}, "time": {"repr": "2025-08-21 22:05:17.141996+05:30", "timestamp": 1755794117.141996}}}
{"text": "2025-08-21 22:05:17.144 | DEBUG    | app.services.dhan_client:get_pnl:565 - PnLTotals created successfully\n", "record": {"elapsed": {"repr": "0:00:12.900558", "seconds": 12.900558}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 565, "message": "PnLTotals created successfully", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 29644, "name": "MainProcess"}, "thread": {"id": 29140, "name": "MainThread"}, "time": {"repr": "2025-08-21 22:05:17.144330+05:30", "timestamp": 1755794117.14433}}}
{"text": "2025-08-21 22:05:17.145 | DEBUG    | app.services.dhan_client:get_pnl:574 - Creating PnL model...\n", "record": {"elapsed": {"repr": "0:00:12.901894", "seconds": 12.901894}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 574, "message": "Creating PnL model...", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 29644, "name": "MainProcess"}, "thread": {"id": 29140, "name": "MainThread"}, "time": {"repr": "2025-08-21 22:05:17.145666+05:30", "timestamp": 1755794117.145666}}}
{"text": "2025-08-21 22:05:17.147 | DEBUG    | app.services.dhan_client:get_pnl:575 - Model fields: totals=<class 'app.models.schemas.PnLTotals'>, perSymbol=5, updated_at=2025-08-21 22:05:17.073330+05:30, trading_day=2025-08-21\n", "record": {"elapsed": {"repr": "0:00:12.903811", "seconds": 12.903811}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 575, "message": "Model fields: totals=<class 'app.models.schemas.PnLTotals'>, perSymbol=5, updated_at=2025-08-21 22:05:17.073330+05:30, trading_day=2025-08-21", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 29644, "name": "MainProcess"}, "thread": {"id": 29140, "name": "MainThread"}, "time": {"repr": "2025-08-21 22:05:17.147583+05:30", "timestamp": 1755794117.147583}}}
{"text": "2025-08-21 22:05:17.153 | DEBUG    | app.services.dhan_client:get_pnl:584 - Created PnL model: totals=PnLTotals(realized=0.0, unrealized=2053910.57, day=2053910.57, currency='INR') per_symbol=[PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1596, avg=105.2, ltp=183.8, unrealized=125450.97, today_pnl=125450.97), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=895, avg=965.72, ltp=991.79, unrealized=-23330.6, today_pnl=-23330.6), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=1697, avg=987.4, ltp=2043.62, unrealized=1792401.88, today_pnl=1792401.88), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=1638, avg=1011.79, ltp=94.8, unrealized=1502027.22, today_pnl=1502027.22), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=1535, avg=1230.09, ltp=355.41, unrealized=-1342638.9, today_pnl=-1342638.9)] updated_at=datetime.datetime(2025, 8, 21, 22, 5, 17, 73330, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))) trading_day='2025-08-21'\n", "record": {"elapsed": {"repr": "0:00:12.909532", "seconds": 12.909532}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 584, "message": "Created PnL model: totals=PnLTotals(realized=0.0, unrealized=2053910.57, day=2053910.57, currency='INR') per_symbol=[PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1596, avg=105.2, ltp=183.8, unrealized=125450.97, today_pnl=125450.97), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=895, avg=965.72, ltp=991.79, unrealized=-23330.6, today_pnl=-23330.6), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=1697, avg=987.4, ltp=2043.62, unrealized=1792401.88, today_pnl=1792401.88), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=1638, avg=1011.79, ltp=94.8, unrealized=1502027.22, today_pnl=1502027.22), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=1535, avg=1230.09, ltp=355.41, unrealized=-1342638.9, today_pnl=-1342638.9)] updated_at=datetime.datetime(2025, 8, 21, 22, 5, 17, 73330, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))) trading_day='2025-08-21'", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 29644, "name": "MainProcess"}, "thread": {"id": 29140, "name": "MainThread"}, "time": {"repr": "2025-08-21 22:05:17.153304+05:30", "timestamp": 1755794117.153304}}}
{"text": "2025-08-21 22:05:17.156 | DEBUG    | app.services.dhan_client:get_pnl:585 - PnL model fields: {'totals': PnLTotals(realized=0.0, unrealized=2053910.57, day=2053910.57, currency='INR'), 'per_symbol': [PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1596, avg=105.2, ltp=183.8, unrealized=125450.97, today_pnl=125450.97), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=895, avg=965.72, ltp=991.79, unrealized=-23330.6, today_pnl=-23330.6), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=1697, avg=987.4, ltp=2043.62, unrealized=1792401.88, today_pnl=1792401.88), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=1638, avg=1011.79, ltp=94.8, unrealized=1502027.22, today_pnl=1502027.22), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=1535, avg=1230.09, ltp=355.41, unrealized=-1342638.9, today_pnl=-1342638.9)], 'updated_at': datetime.datetime(2025, 8, 21, 22, 5, 17, 73330, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))), 'trading_day': '2025-08-21'}\n", "record": {"elapsed": {"repr": "0:00:12.912413", "seconds": 12.912413}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 585, "message": "PnL model fields: {'totals': PnLTotals(realized=0.0, unrealized=2053910.57, day=2053910.57, currency='INR'), 'per_symbol': [PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1596, avg=105.2, ltp=183.8, unrealized=125450.97, today_pnl=125450.97), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=895, avg=965.72, ltp=991.79, unrealized=-23330.6, today_pnl=-23330.6), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=1697, avg=987.4, ltp=2043.62, unrealized=1792401.88, today_pnl=1792401.88), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=1638, avg=1011.79, ltp=94.8, unrealized=1502027.22, today_pnl=1502027.22), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=1535, avg=1230.09, ltp=355.41, unrealized=-1342638.9, today_pnl=-1342638.9)], 'updated_at': datetime.datetime(2025, 8, 21, 22, 5, 17, 73330, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))), 'trading_day': '2025-08-21'}", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 29644, "name": "MainProcess"}, "thread": {"id": 29140, "name": "MainThread"}, "time": {"repr": "2025-08-21 22:05:17.156185+05:30", "timestamp": 1755794117.156185}}}
{"text": "2025-08-21 22:05:17.158 | INFO     | app.services.dhan_client:get_pnl:587 - P&L calculation completed successfully: 5 symbols, unrealized=‚Çπ2053910.57\n", "record": {"elapsed": {"repr": "0:00:12.914942", "seconds": 12.914942}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 587, "message": "P&L calculation completed successfully: 5 symbols, unrealized=‚Çπ2053910.57", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 29644, "name": "MainProcess"}, "thread": {"id": 29140, "name": "MainThread"}, "time": {"repr": "2025-08-21 22:05:17.158714+05:30", "timestamp": 1755794117.158714}}}
{"text": "2025-08-21 22:05:17.163 | DEBUG    | app.ws.live:emit_delta:408 - Emitted pnl delta: seq=14\n", "record": {"elapsed": {"repr": "0:00:12.919659", "seconds": 12.919659}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "emit_delta", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 408, "message": "Emitted pnl delta: seq=14", "module": "live", "name": "app.ws.live", "process": {"id": 29644, "name": "MainProcess"}, "thread": {"id": 29140, "name": "MainThread"}, "time": {"repr": "2025-08-21 22:05:17.163431+05:30", "timestamp": 1755794117.163431}}}
{"text": "2025-08-21 22:05:17.863 | DEBUG    | app.ws.live:emit_delta:408 - Emitted positions delta: seq=15\n", "record": {"elapsed": {"repr": "0:00:13.620218", "seconds": 13.620218}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "emit_delta", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 408, "message": "Emitted positions delta: seq=15", "module": "live", "name": "app.ws.live", "process": {"id": 29644, "name": "MainProcess"}, "thread": {"id": 29140, "name": "MainThread"}, "time": {"repr": "2025-08-21 22:05:17.863990+05:30", "timestamp": 1755794117.86399}}}
{"text": "2025-08-21 22:05:18.055 | INFO     | app.main:add_trace_id:43 - Request started - Method: GET, Path: /health, Trace ID: c38493ab-6c77-47a3-83a4-4336ce42784d\n", "record": {"elapsed": {"repr": "0:00:13.811917", "seconds": 13.811917}, "exception": null, "extra": {}, "file": {"name": "main.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\main.py"}, "function": "add_trace_id", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 43, "message": "Request started - Method: GET, Path: /health, Trace ID: c38493ab-6c77-47a3-83a4-4336ce42784d", "module": "main", "name": "app.main", "process": {"id": 29644, "name": "MainProcess"}, "thread": {"id": 29140, "name": "MainThread"}, "time": {"repr": "2025-08-21 22:05:18.055689+05:30", "timestamp": 1755794118.055689}}}
{"text": "2025-08-21 22:05:18.063 | INFO     | app.main:add_trace_id:47 - Request completed - Method: GET, Path: /health, Status: 404, Trace ID: c38493ab-6c77-47a3-83a4-4336ce42784d\n", "record": {"elapsed": {"repr": "0:00:13.819997", "seconds": 13.819997}, "exception": null, "extra": {}, "file": {"name": "main.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\main.py"}, "function": "add_trace_id", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 47, "message": "Request completed - Method: GET, Path: /health, Status: 404, Trace ID: c38493ab-6c77-47a3-83a4-4336ce42784d", "module": "main", "name": "app.main", "process": {"id": 29644, "name": "MainProcess"}, "thread": {"id": 29140, "name": "MainThread"}, "time": {"repr": "2025-08-21 22:05:18.063769+05:30", "timestamp": 1755794118.063769}}}
{"text": "2025-08-21 22:05:18.651 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:14.407422", "seconds": 14.407422}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 29644, "name": "MainProcess"}, "thread": {"id": 15452, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 22:05:18.651194+05:30", "timestamp": 1755794118.651194}}}
{"text": "2025-08-21 22:05:18.653 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:14.409393", "seconds": 14.409393}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 29644, "name": "MainProcess"}, "thread": {"id": 15452, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 22:05:18.653165+05:30", "timestamp": 1755794118.653165}}}
{"text": "2025-08-21 22:05:18.655 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:14.411527", "seconds": 14.411527}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 29644, "name": "MainProcess"}, "thread": {"id": 15452, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 22:05:18.655299+05:30", "timestamp": 1755794118.655299}}}
{"text": "2025-08-21 22:05:18.657 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:14.413745", "seconds": 14.413745}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 29644, "name": "MainProcess"}, "thread": {"id": 15452, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 22:05:18.657517+05:30", "timestamp": 1755794118.657517}}}
{"text": "2025-08-21 22:05:18.659 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:14.415608", "seconds": 14.415608}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 29644, "name": "MainProcess"}, "thread": {"id": 15452, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 22:05:18.659380+05:30", "timestamp": 1755794118.65938}}}
{"text": "2025-08-21 22:05:18.662 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:14.418981", "seconds": 14.418981}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 29644, "name": "MainProcess"}, "thread": {"id": 15452, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 22:05:18.662753+05:30", "timestamp": 1755794118.662753}}}
{"text": "2025-08-21 22:05:18.664 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:14.421173", "seconds": 14.421173}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 29644, "name": "MainProcess"}, "thread": {"id": 15452, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 22:05:18.664945+05:30", "timestamp": 1755794118.664945}}}
{"text": "2025-08-21 22:05:18.668 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:14.424471", "seconds": 14.424471}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 29644, "name": "MainProcess"}, "thread": {"id": 15452, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 22:05:18.668243+05:30", "timestamp": 1755794118.668243}}}
{"text": "2025-08-21 22:05:18.671 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:14.427356", "seconds": 14.427356}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 29644, "name": "MainProcess"}, "thread": {"id": 15452, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 22:05:18.671128+05:30", "timestamp": 1755794118.671128}}}
{"text": "2025-08-21 22:05:18.674 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:14.430365", "seconds": 14.430365}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 29644, "name": "MainProcess"}, "thread": {"id": 15452, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 22:05:18.674137+05:30", "timestamp": 1755794118.674137}}}
{"text": "2025-08-21 22:05:19.080 | INFO     | app.services.dhan_client:get_pnl:489 - Starting accurate P&L calculation\n", "record": {"elapsed": {"repr": "0:00:14.836568", "seconds": 14.836568}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 489, "message": "Starting accurate P&L calculation", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 29644, "name": "MainProcess"}, "thread": {"id": 29140, "name": "MainThread"}, "time": {"repr": "2025-08-21 22:05:19.080340+05:30", "timestamp": 1755794119.08034}}}
{"text": "2025-08-21 22:05:19.082 | INFO     | app.services.dhan_client:get_pnl:491 - Fetched 5 positions\n", "record": {"elapsed": {"repr": "0:00:14.838421", "seconds": 14.838421}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 491, "message": "Fetched 5 positions", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 29644, "name": "MainProcess"}, "thread": {"id": 29140, "name": "MainThread"}, "time": {"repr": "2025-08-21 22:05:19.082193+05:30", "timestamp": 1755794119.082193}}}
{"text": "2025-08-21 22:05:19.086 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for RELIANCE: unrealized=124063.52, today=124063.52\n", "record": {"elapsed": {"repr": "0:00:14.842268", "seconds": 14.842268}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for RELIANCE: unrealized=124063.52, today=124063.52", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 29644, "name": "MainProcess"}, "thread": {"id": 29140, "name": "MainThread"}, "time": {"repr": "2025-08-21 22:05:19.086040+05:30", "timestamp": 1755794119.08604}}}
{"text": "2025-08-21 22:05:19.087 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for TCS: unrealized=-22298.96, today=-22298.96\n", "record": {"elapsed": {"repr": "0:00:14.843833", "seconds": 14.843833}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for TCS: unrealized=-22298.96, today=-22298.96", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 29644, "name": "MainProcess"}, "thread": {"id": 29140, "name": "MainThread"}, "time": {"repr": "2025-08-21 22:05:19.087605+05:30", "timestamp": 1755794119.087605}}}
{"text": "2025-08-21 22:05:19.089 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for HDFC: unrealized=1850593.16, today=1850593.16\n", "record": {"elapsed": {"repr": "0:00:14.845996", "seconds": 14.845996}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for HDFC: unrealized=1850593.16, today=1850593.16", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 29644, "name": "MainProcess"}, "thread": {"id": 29140, "name": "MainThread"}, "time": {"repr": "2025-08-21 22:05:19.089768+05:30", "timestamp": 1755794119.089768}}}
{"text": "2025-08-21 22:05:19.096 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for INFY: unrealized=1504061.96, today=1504061.96\n", "record": {"elapsed": {"repr": "0:00:14.852886", "seconds": 14.852886}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for INFY: unrealized=1504061.96, today=1504061.96", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 29644, "name": "MainProcess"}, "thread": {"id": 29140, "name": "MainThread"}, "time": {"repr": "2025-08-21 22:05:19.096658+05:30", "timestamp": 1755794119.096658}}}
{"text": "2025-08-21 22:05:19.099 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for ICICIBANK: unrealized=-1339607.96, today=-1339607.96\n", "record": {"elapsed": {"repr": "0:00:14.855931", "seconds": 14.855931}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for ICICIBANK: unrealized=-1339607.96, today=-1339607.96", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 29644, "name": "MainProcess"}, "thread": {"id": 29140, "name": "MainThread"}, "time": {"repr": "2025-08-21 22:05:19.099703+05:30", "timestamp": 1755794119.099703}}}
{"text": "2025-08-21 22:05:19.100 | INFO     | app.services.dhan_client:get_pnl:545 - Calculated totals - realized: 0.0, unrealized: 2116811.72, day: 2116811.72\n", "record": {"elapsed": {"repr": "0:00:14.857080", "seconds": 14.85708}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 545, "message": "Calculated totals - realized: 0.0, unrealized: 2116811.72, day: 2116811.72", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 29644, "name": "MainProcess"}, "thread": {"id": 29140, "name": "MainThread"}, "time": {"repr": "2025-08-21 22:05:19.100852+05:30", "timestamp": 1755794119.100852}}}
{"text": "2025-08-21 22:05:19.102 | DEBUG    | app.services.dhan_client:get_pnl:554 - PnL consistency check passed: drift=‚Çπ0.00\n", "record": {"elapsed": {"repr": "0:00:14.858304", "seconds": 14.858304}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 554, "message": "PnL consistency check passed: drift=‚Çπ0.00", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 29644, "name": "MainProcess"}, "thread": {"id": 29140, "name": "MainThread"}, "time": {"repr": "2025-08-21 22:05:19.102076+05:30", "timestamp": 1755794119.102076}}}
{"text": "2025-08-21 22:05:19.104 | DEBUG    | app.services.dhan_client:get_pnl:558 - Creating PnLTotals...\n", "record": {"elapsed": {"repr": "0:00:14.860808", "seconds": 14.860808}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 558, "message": "Creating PnLTotals...", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 29644, "name": "MainProcess"}, "thread": {"id": 29140, "name": "MainThread"}, "time": {"repr": "2025-08-21 22:05:19.104580+05:30", "timestamp": 1755794119.10458}}}
{"text": "2025-08-21 22:05:19.107 | DEBUG    | app.services.dhan_client:get_pnl:565 - PnLTotals created successfully\n", "record": {"elapsed": {"repr": "0:00:14.863673", "seconds": 14.863673}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 565, "message": "PnLTotals created successfully", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 29644, "name": "MainProcess"}, "thread": {"id": 29140, "name": "MainThread"}, "time": {"repr": "2025-08-21 22:05:19.107445+05:30", "timestamp": 1755794119.107445}}}
{"text": "2025-08-21 22:05:19.108 | DEBUG    | app.services.dhan_client:get_pnl:574 - Creating PnL model...\n", "record": {"elapsed": {"repr": "0:00:14.864922", "seconds": 14.864922}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 574, "message": "Creating PnL model...", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 29644, "name": "MainProcess"}, "thread": {"id": 29140, "name": "MainThread"}, "time": {"repr": "2025-08-21 22:05:19.108694+05:30", "timestamp": 1755794119.108694}}}
{"text": "2025-08-21 22:05:19.110 | DEBUG    | app.services.dhan_client:get_pnl:575 - Model fields: totals=<class 'app.models.schemas.PnLTotals'>, perSymbol=5, updated_at=2025-08-21 22:05:19.085795+05:30, trading_day=2025-08-21\n", "record": {"elapsed": {"repr": "0:00:14.866767", "seconds": 14.866767}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 575, "message": "Model fields: totals=<class 'app.models.schemas.PnLTotals'>, perSymbol=5, updated_at=2025-08-21 22:05:19.085795+05:30, trading_day=2025-08-21", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 29644, "name": "MainProcess"}, "thread": {"id": 29140, "name": "MainThread"}, "time": {"repr": "2025-08-21 22:05:19.110539+05:30", "timestamp": 1755794119.110539}}}
{"text": "2025-08-21 22:05:19.113 | DEBUG    | app.services.dhan_client:get_pnl:584 - Created PnL model: totals=PnLTotals(realized=0.0, unrealized=2116811.72, day=2116811.72, currency='INR') per_symbol=[PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1596, avg=105.2, ltp=182.93, unrealized=124063.52, today_pnl=124063.52), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=895, avg=965.72, ltp=990.64, unrealized=-22298.96, today_pnl=-22298.96), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=1697, avg=987.4, ltp=2077.91, unrealized=1850593.16, today_pnl=1850593.16), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=1638, avg=1011.79, ltp=93.56, unrealized=1504061.96, today_pnl=1504061.96), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=1535, avg=1230.09, ltp=357.38, unrealized=-1339607.96, today_pnl=-1339607.96)] updated_at=datetime.datetime(2025, 8, 21, 22, 5, 19, 85795, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))) trading_day='2025-08-21'\n", "record": {"elapsed": {"repr": "0:00:14.869275", "seconds": 14.869275}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 584, "message": "Created PnL model: totals=PnLTotals(realized=0.0, unrealized=2116811.72, day=2116811.72, currency='INR') per_symbol=[PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1596, avg=105.2, ltp=182.93, unrealized=124063.52, today_pnl=124063.52), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=895, avg=965.72, ltp=990.64, unrealized=-22298.96, today_pnl=-22298.96), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=1697, avg=987.4, ltp=2077.91, unrealized=1850593.16, today_pnl=1850593.16), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=1638, avg=1011.79, ltp=93.56, unrealized=1504061.96, today_pnl=1504061.96), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=1535, avg=1230.09, ltp=357.38, unrealized=-1339607.96, today_pnl=-1339607.96)] updated_at=datetime.datetime(2025, 8, 21, 22, 5, 19, 85795, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))) trading_day='2025-08-21'", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 29644, "name": "MainProcess"}, "thread": {"id": 29140, "name": "MainThread"}, "time": {"repr": "2025-08-21 22:05:19.113047+05:30", "timestamp": 1755794119.113047}}}
{"text": "2025-08-21 22:05:19.116 | DEBUG    | app.services.dhan_client:get_pnl:585 - PnL model fields: {'totals': PnLTotals(realized=0.0, unrealized=2116811.72, day=2116811.72, currency='INR'), 'per_symbol': [PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1596, avg=105.2, ltp=182.93, unrealized=124063.52, today_pnl=124063.52), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=895, avg=965.72, ltp=990.64, unrealized=-22298.96, today_pnl=-22298.96), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=1697, avg=987.4, ltp=2077.91, unrealized=1850593.16, today_pnl=1850593.16), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=1638, avg=1011.79, ltp=93.56, unrealized=1504061.96, today_pnl=1504061.96), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=1535, avg=1230.09, ltp=357.38, unrealized=-1339607.96, today_pnl=-1339607.96)], 'updated_at': datetime.datetime(2025, 8, 21, 22, 5, 19, 85795, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))), 'trading_day': '2025-08-21'}\n", "record": {"elapsed": {"repr": "0:00:14.872644", "seconds": 14.872644}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 585, "message": "PnL model fields: {'totals': PnLTotals(realized=0.0, unrealized=2116811.72, day=2116811.72, currency='INR'), 'per_symbol': [PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1596, avg=105.2, ltp=182.93, unrealized=124063.52, today_pnl=124063.52), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=895, avg=965.72, ltp=990.64, unrealized=-22298.96, today_pnl=-22298.96), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=1697, avg=987.4, ltp=2077.91, unrealized=1850593.16, today_pnl=1850593.16), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=1638, avg=1011.79, ltp=93.56, unrealized=1504061.96, today_pnl=1504061.96), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=1535, avg=1230.09, ltp=357.38, unrealized=-1339607.96, today_pnl=-1339607.96)], 'updated_at': datetime.datetime(2025, 8, 21, 22, 5, 19, 85795, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))), 'trading_day': '2025-08-21'}", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 29644, "name": "MainProcess"}, "thread": {"id": 29140, "name": "MainThread"}, "time": {"repr": "2025-08-21 22:05:19.116416+05:30", "timestamp": 1755794119.116416}}}
{"text": "2025-08-21 22:05:19.119 | INFO     | app.services.dhan_client:get_pnl:587 - P&L calculation completed successfully: 5 symbols, unrealized=‚Çπ2116811.72\n", "record": {"elapsed": {"repr": "0:00:14.875342", "seconds": 14.875342}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 587, "message": "P&L calculation completed successfully: 5 symbols, unrealized=‚Çπ2116811.72", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 29644, "name": "MainProcess"}, "thread": {"id": 29140, "name": "MainThread"}, "time": {"repr": "2025-08-21 22:05:19.119114+05:30", "timestamp": 1755794119.119114}}}
{"text": "2025-08-21 22:05:19.121 | DEBUG    | app.ws.live:emit_delta:408 - Emitted pnl delta: seq=16\n", "record": {"elapsed": {"repr": "0:00:14.877965", "seconds": 14.877965}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "emit_delta", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 408, "message": "Emitted pnl delta: seq=16", "module": "live", "name": "app.ws.live", "process": {"id": 29644, "name": "MainProcess"}, "thread": {"id": 29140, "name": "MainThread"}, "time": {"repr": "2025-08-21 22:05:19.121737+05:30", "timestamp": 1755794119.121737}}}
{"text": "2025-08-21 22:05:19.680 | DEBUG    | app.ws.live:emit_delta:408 - Emitted positions delta: seq=17\n", "record": {"elapsed": {"repr": "0:00:15.436508", "seconds": 15.436508}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "emit_delta", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 408, "message": "Emitted positions delta: seq=17", "module": "live", "name": "app.ws.live", "process": {"id": 29644, "name": "MainProcess"}, "thread": {"id": 29140, "name": "MainThread"}, "time": {"repr": "2025-08-21 22:05:19.680280+05:30", "timestamp": 1755794119.68028}}}
{"text": "2025-08-21 22:05:20.678 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:16.434417", "seconds": 16.434417}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 29644, "name": "MainProcess"}, "thread": {"id": 15452, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 22:05:20.678189+05:30", "timestamp": 1755794120.678189}}}
{"text": "2025-08-21 22:05:20.680 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:16.437021", "seconds": 16.437021}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 29644, "name": "MainProcess"}, "thread": {"id": 15452, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 22:05:20.680793+05:30", "timestamp": 1755794120.680793}}}
{"text": "2025-08-21 22:05:20.683 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:16.439846", "seconds": 16.439846}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 29644, "name": "MainProcess"}, "thread": {"id": 15452, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 22:05:20.683618+05:30", "timestamp": 1755794120.683618}}}
{"text": "2025-08-21 22:05:20.687 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:16.443671", "seconds": 16.443671}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 29644, "name": "MainProcess"}, "thread": {"id": 15452, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 22:05:20.687443+05:30", "timestamp": 1755794120.687443}}}
{"text": "2025-08-21 22:05:20.689 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:16.445690", "seconds": 16.44569}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 29644, "name": "MainProcess"}, "thread": {"id": 15452, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 22:05:20.689462+05:30", "timestamp": 1755794120.689462}}}
{"text": "2025-08-21 22:05:20.690 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:16.446606", "seconds": 16.446606}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 29644, "name": "MainProcess"}, "thread": {"id": 15452, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 22:05:20.690378+05:30", "timestamp": 1755794120.690378}}}
{"text": "2025-08-21 22:05:20.692 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:16.449080", "seconds": 16.44908}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 29644, "name": "MainProcess"}, "thread": {"id": 15452, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 22:05:20.692852+05:30", "timestamp": 1755794120.692852}}}
{"text": "2025-08-21 22:05:20.693 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:16.449697", "seconds": 16.449697}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 29644, "name": "MainProcess"}, "thread": {"id": 15452, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 22:05:20.693469+05:30", "timestamp": 1755794120.693469}}}
{"text": "2025-08-21 22:05:20.697 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:16.453260", "seconds": 16.45326}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 29644, "name": "MainProcess"}, "thread": {"id": 15452, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 22:05:20.697032+05:30", "timestamp": 1755794120.697032}}}
{"text": "2025-08-21 22:05:20.700 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:16.456312", "seconds": 16.456312}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 29644, "name": "MainProcess"}, "thread": {"id": 15452, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 22:05:20.700084+05:30", "timestamp": 1755794120.700084}}}
{"text": "2025-08-21 22:05:21.014 | INFO     | app.services.dhan_client:get_pnl:489 - Starting accurate P&L calculation\n", "record": {"elapsed": {"repr": "0:00:16.771077", "seconds": 16.771077}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 489, "message": "Starting accurate P&L calculation", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 29644, "name": "MainProcess"}, "thread": {"id": 29140, "name": "MainThread"}, "time": {"repr": "2025-08-21 22:05:21.014849+05:30", "timestamp": 1755794121.014849}}}
{"text": "2025-08-21 22:05:21.016 | INFO     | app.services.dhan_client:get_pnl:491 - Fetched 5 positions\n", "record": {"elapsed": {"repr": "0:00:16.773051", "seconds": 16.773051}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 491, "message": "Fetched 5 positions", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 29644, "name": "MainProcess"}, "thread": {"id": 29140, "name": "MainThread"}, "time": {"repr": "2025-08-21 22:05:21.016823+05:30", "timestamp": 1755794121.016823}}}
{"text": "2025-08-21 22:05:21.018 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for RELIANCE: unrealized=124631.34, today=124631.34\n", "record": {"elapsed": {"repr": "0:00:16.774527", "seconds": 16.774527}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for RELIANCE: unrealized=124631.34, today=124631.34", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 29644, "name": "MainProcess"}, "thread": {"id": 29140, "name": "MainThread"}, "time": {"repr": "2025-08-21 22:05:21.018299+05:30", "timestamp": 1755794121.018299}}}
{"text": "2025-08-21 22:05:21.020 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for TCS: unrealized=-4973.06, today=-4973.06\n", "record": {"elapsed": {"repr": "0:00:16.776705", "seconds": 16.776705}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for TCS: unrealized=-4973.06, today=-4973.06", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 29644, "name": "MainProcess"}, "thread": {"id": 29140, "name": "MainThread"}, "time": {"repr": "2025-08-21 22:05:21.020477+05:30", "timestamp": 1755794121.020477}}}
{"text": "2025-08-21 22:05:21.022 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for HDFC: unrealized=1817685.58, today=1817685.58\n", "record": {"elapsed": {"repr": "0:00:16.778670", "seconds": 16.77867}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for HDFC: unrealized=1817685.58, today=1817685.58", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 29644, "name": "MainProcess"}, "thread": {"id": 29140, "name": "MainThread"}, "time": {"repr": "2025-08-21 22:05:21.022442+05:30", "timestamp": 1755794121.022442}}}
{"text": "2025-08-21 22:05:21.024 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for INFY: unrealized=1505793.39, today=1505793.39\n", "record": {"elapsed": {"repr": "0:00:16.780980", "seconds": 16.78098}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for INFY: unrealized=1505793.39, today=1505793.39", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 29644, "name": "MainProcess"}, "thread": {"id": 29140, "name": "MainThread"}, "time": {"repr": "2025-08-21 22:05:21.024752+05:30", "timestamp": 1755794121.024752}}}
{"text": "2025-08-21 22:05:21.026 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for ICICIBANK: unrealized=-1333044.28, today=-1333044.28\n", "record": {"elapsed": {"repr": "0:00:16.782654", "seconds": 16.782654}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for ICICIBANK: unrealized=-1333044.28, today=-1333044.28", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 29644, "name": "MainProcess"}, "thread": {"id": 29140, "name": "MainThread"}, "time": {"repr": "2025-08-21 22:05:21.026426+05:30", "timestamp": 1755794121.026426}}}
{"text": "2025-08-21 22:05:21.028 | INFO     | app.services.dhan_client:get_pnl:545 - Calculated totals - realized: 0.0, unrealized: 2110092.97, day: 2110092.97\n", "record": {"elapsed": {"repr": "0:00:16.785219", "seconds": 16.785219}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 545, "message": "Calculated totals - realized: 0.0, unrealized: 2110092.97, day: 2110092.97", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 29644, "name": "MainProcess"}, "thread": {"id": 29140, "name": "MainThread"}, "time": {"repr": "2025-08-21 22:05:21.028991+05:30", "timestamp": 1755794121.028991}}}
{"text": "2025-08-21 22:05:21.033 | DEBUG    | app.services.dhan_client:get_pnl:554 - PnL consistency check passed: drift=‚Çπ0.00\n", "record": {"elapsed": {"repr": "0:00:16.789331", "seconds": 16.789331}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 554, "message": "PnL consistency check passed: drift=‚Çπ0.00", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 29644, "name": "MainProcess"}, "thread": {"id": 29140, "name": "MainThread"}, "time": {"repr": "2025-08-21 22:05:21.033103+05:30", "timestamp": 1755794121.033103}}}
{"text": "2025-08-21 22:05:21.034 | DEBUG    | app.services.dhan_client:get_pnl:558 - Creating PnLTotals...\n", "record": {"elapsed": {"repr": "0:00:16.790943", "seconds": 16.790943}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 558, "message": "Creating PnLTotals...", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 29644, "name": "MainProcess"}, "thread": {"id": 29140, "name": "MainThread"}, "time": {"repr": "2025-08-21 22:05:21.034715+05:30", "timestamp": 1755794121.034715}}}
{"text": "2025-08-21 22:05:21.037 | DEBUG    | app.services.dhan_client:get_pnl:565 - PnLTotals created successfully\n", "record": {"elapsed": {"repr": "0:00:16.793286", "seconds": 16.793286}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 565, "message": "PnLTotals created successfully", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 29644, "name": "MainProcess"}, "thread": {"id": 29140, "name": "MainThread"}, "time": {"repr": "2025-08-21 22:05:21.037058+05:30", "timestamp": 1755794121.037058}}}
{"text": "2025-08-21 22:05:21.038 | DEBUG    | app.services.dhan_client:get_pnl:574 - Creating PnL model...\n", "record": {"elapsed": {"repr": "0:00:16.794238", "seconds": 16.794238}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 574, "message": "Creating PnL model...", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 29644, "name": "MainProcess"}, "thread": {"id": 29140, "name": "MainThread"}, "time": {"repr": "2025-08-21 22:05:21.038010+05:30", "timestamp": 1755794121.03801}}}
{"text": "2025-08-21 22:05:21.040 | DEBUG    | app.services.dhan_client:get_pnl:575 - Model fields: totals=<class 'app.models.schemas.PnLTotals'>, perSymbol=5, updated_at=2025-08-21 22:05:21.018107+05:30, trading_day=2025-08-21\n", "record": {"elapsed": {"repr": "0:00:16.796766", "seconds": 16.796766}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 575, "message": "Model fields: totals=<class 'app.models.schemas.PnLTotals'>, perSymbol=5, updated_at=2025-08-21 22:05:21.018107+05:30, trading_day=2025-08-21", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 29644, "name": "MainProcess"}, "thread": {"id": 29140, "name": "MainThread"}, "time": {"repr": "2025-08-21 22:05:21.040538+05:30", "timestamp": 1755794121.040538}}}
{"text": "2025-08-21 22:05:21.042 | DEBUG    | app.services.dhan_client:get_pnl:584 - Created PnL model: totals=PnLTotals(realized=0.0, unrealized=2110092.97, day=2110092.97, currency='INR') per_symbol=[PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1596, avg=105.2, ltp=183.29, unrealized=124631.34, today_pnl=124631.34), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=895, avg=965.72, ltp=971.28, unrealized=-4973.06, today_pnl=-4973.06), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=1697, avg=987.4, ltp=2058.52, unrealized=1817685.58, today_pnl=1817685.58), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=1638, avg=1011.79, ltp=92.5, unrealized=1505793.39, today_pnl=1505793.39), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=1535, avg=1230.09, ltp=361.66, unrealized=-1333044.28, today_pnl=-1333044.28)] updated_at=datetime.datetime(2025, 8, 21, 22, 5, 21, 18107, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))) trading_day='2025-08-21'\n", "record": {"elapsed": {"repr": "0:00:16.798254", "seconds": 16.798254}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 584, "message": "Created PnL model: totals=PnLTotals(realized=0.0, unrealized=2110092.97, day=2110092.97, currency='INR') per_symbol=[PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1596, avg=105.2, ltp=183.29, unrealized=124631.34, today_pnl=124631.34), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=895, avg=965.72, ltp=971.28, unrealized=-4973.06, today_pnl=-4973.06), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=1697, avg=987.4, ltp=2058.52, unrealized=1817685.58, today_pnl=1817685.58), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=1638, avg=1011.79, ltp=92.5, unrealized=1505793.39, today_pnl=1505793.39), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=1535, avg=1230.09, ltp=361.66, unrealized=-1333044.28, today_pnl=-1333044.28)] updated_at=datetime.datetime(2025, 8, 21, 22, 5, 21, 18107, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))) trading_day='2025-08-21'", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 29644, "name": "MainProcess"}, "thread": {"id": 29140, "name": "MainThread"}, "time": {"repr": "2025-08-21 22:05:21.042026+05:30", "timestamp": 1755794121.042026}}}
{"text": "2025-08-21 22:05:21.045 | DEBUG    | app.services.dhan_client:get_pnl:585 - PnL model fields: {'totals': PnLTotals(realized=0.0, unrealized=2110092.97, day=2110092.97, currency='INR'), 'per_symbol': [PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1596, avg=105.2, ltp=183.29, unrealized=124631.34, today_pnl=124631.34), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=895, avg=965.72, ltp=971.28, unrealized=-4973.06, today_pnl=-4973.06), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=1697, avg=987.4, ltp=2058.52, unrealized=1817685.58, today_pnl=1817685.58), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=1638, avg=1011.79, ltp=92.5, unrealized=1505793.39, today_pnl=1505793.39), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=1535, avg=1230.09, ltp=361.66, unrealized=-1333044.28, today_pnl=-1333044.28)], 'updated_at': datetime.datetime(2025, 8, 21, 22, 5, 21, 18107, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))), 'trading_day': '2025-08-21'}\n", "record": {"elapsed": {"repr": "0:00:16.801733", "seconds": 16.801733}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 585, "message": "PnL model fields: {'totals': PnLTotals(realized=0.0, unrealized=2110092.97, day=2110092.97, currency='INR'), 'per_symbol': [PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1596, avg=105.2, ltp=183.29, unrealized=124631.34, today_pnl=124631.34), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=895, avg=965.72, ltp=971.28, unrealized=-4973.06, today_pnl=-4973.06), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=1697, avg=987.4, ltp=2058.52, unrealized=1817685.58, today_pnl=1817685.58), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=1638, avg=1011.79, ltp=92.5, unrealized=1505793.39, today_pnl=1505793.39), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=1535, avg=1230.09, ltp=361.66, unrealized=-1333044.28, today_pnl=-1333044.28)], 'updated_at': datetime.datetime(2025, 8, 21, 22, 5, 21, 18107, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))), 'trading_day': '2025-08-21'}", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 29644, "name": "MainProcess"}, "thread": {"id": 29140, "name": "MainThread"}, "time": {"repr": "2025-08-21 22:05:21.045505+05:30", "timestamp": 1755794121.045505}}}
{"text": "2025-08-21 22:05:21.047 | INFO     | app.services.dhan_client:get_pnl:587 - P&L calculation completed successfully: 5 symbols, unrealized=‚Çπ2110092.97\n", "record": {"elapsed": {"repr": "0:00:16.803240", "seconds": 16.80324}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 587, "message": "P&L calculation completed successfully: 5 symbols, unrealized=‚Çπ2110092.97", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 29644, "name": "MainProcess"}, "thread": {"id": 29140, "name": "MainThread"}, "time": {"repr": "2025-08-21 22:05:21.047012+05:30", "timestamp": 1755794121.047012}}}
{"text": "2025-08-21 22:05:21.049 | DEBUG    | app.ws.live:emit_delta:408 - Emitted pnl delta: seq=18\n", "record": {"elapsed": {"repr": "0:00:16.806045", "seconds": 16.806045}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "emit_delta", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 408, "message": "Emitted pnl delta: seq=18", "module": "live", "name": "app.ws.live", "process": {"id": 29644, "name": "MainProcess"}, "thread": {"id": 29140, "name": "MainThread"}, "time": {"repr": "2025-08-21 22:05:21.049817+05:30", "timestamp": 1755794121.049817}}}
{"text": "2025-08-21 22:05:21.359 | DEBUG    | app.ws.live:emit_delta:408 - Emitted positions delta: seq=19\n", "record": {"elapsed": {"repr": "0:00:17.115948", "seconds": 17.115948}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "emit_delta", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 408, "message": "Emitted positions delta: seq=19", "module": "live", "name": "app.ws.live", "process": {"id": 29644, "name": "MainProcess"}, "thread": {"id": 29140, "name": "MainThread"}, "time": {"repr": "2025-08-21 22:05:21.359720+05:30", "timestamp": 1755794121.35972}}}
{"text": "2025-08-21 22:05:22.438 | INFO     | app.main:add_trace_id:43 - Request started - Method: GET, Path: /positions, Trace ID: 4afed9e1-02b4-406a-849d-b42e878bd659\n", "record": {"elapsed": {"repr": "0:00:18.194320", "seconds": 18.19432}, "exception": null, "extra": {}, "file": {"name": "main.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\main.py"}, "function": "add_trace_id", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 43, "message": "Request started - Method: GET, Path: /positions, Trace ID: 4afed9e1-02b4-406a-849d-b42e878bd659", "module": "main", "name": "app.main", "process": {"id": 29644, "name": "MainProcess"}, "thread": {"id": 29140, "name": "MainThread"}, "time": {"repr": "2025-08-21 22:05:22.438092+05:30", "timestamp": 1755794122.438092}}}
{"text": "2025-08-21 22:05:22.441 | INFO     | app.main:add_trace_id:47 - Request completed - Method: GET, Path: /positions, Status: 200, Trace ID: 4afed9e1-02b4-406a-849d-b42e878bd659\n", "record": {"elapsed": {"repr": "0:00:18.198216", "seconds": 18.198216}, "exception": null, "extra": {}, "file": {"name": "main.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\main.py"}, "function": "add_trace_id", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 47, "message": "Request completed - Method: GET, Path: /positions, Status: 200, Trace ID: 4afed9e1-02b4-406a-849d-b42e878bd659", "module": "main", "name": "app.main", "process": {"id": 29644, "name": "MainProcess"}, "thread": {"id": 29140, "name": "MainThread"}, "time": {"repr": "2025-08-21 22:05:22.441988+05:30", "timestamp": 1755794122.441988}}}
{"text": "2025-08-21 22:05:22.702 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:18.459221", "seconds": 18.459221}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 29644, "name": "MainProcess"}, "thread": {"id": 15452, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 22:05:22.702993+05:30", "timestamp": 1755794122.702993}}}
{"text": "2025-08-21 22:05:22.705 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:18.461877", "seconds": 18.461877}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 29644, "name": "MainProcess"}, "thread": {"id": 15452, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 22:05:22.705649+05:30", "timestamp": 1755794122.705649}}}
{"text": "2025-08-21 22:05:22.707 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:18.463714", "seconds": 18.463714}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 29644, "name": "MainProcess"}, "thread": {"id": 15452, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 22:05:22.707486+05:30", "timestamp": 1755794122.707486}}}
{"text": "2025-08-21 22:05:22.709 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:18.465466", "seconds": 18.465466}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 29644, "name": "MainProcess"}, "thread": {"id": 15452, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 22:05:22.709238+05:30", "timestamp": 1755794122.709238}}}
{"text": "2025-08-21 22:05:22.712 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:18.469109", "seconds": 18.469109}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 29644, "name": "MainProcess"}, "thread": {"id": 15452, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 22:05:22.712881+05:30", "timestamp": 1755794122.712881}}}
{"text": "2025-08-21 22:05:22.713 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:18.470196", "seconds": 18.470196}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 29644, "name": "MainProcess"}, "thread": {"id": 15452, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 22:05:22.713968+05:30", "timestamp": 1755794122.713968}}}
{"text": "2025-08-21 22:05:22.715 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:18.471686", "seconds": 18.471686}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 29644, "name": "MainProcess"}, "thread": {"id": 15452, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 22:05:22.715458+05:30", "timestamp": 1755794122.715458}}}
{"text": "2025-08-21 22:05:22.718 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:18.474252", "seconds": 18.474252}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 29644, "name": "MainProcess"}, "thread": {"id": 15452, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 22:05:22.718024+05:30", "timestamp": 1755794122.718024}}}
{"text": "2025-08-21 22:05:22.721 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:18.477708", "seconds": 18.477708}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 29644, "name": "MainProcess"}, "thread": {"id": 15452, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 22:05:22.721480+05:30", "timestamp": 1755794122.72148}}}
{"text": "2025-08-21 22:05:22.728 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:18.484901", "seconds": 18.484901}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 29644, "name": "MainProcess"}, "thread": {"id": 15452, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 22:05:22.728673+05:30", "timestamp": 1755794122.728673}}}
{"text": "2025-08-21 22:05:22.871 | DEBUG    | app.ws.live:emit_delta:408 - Emitted positions delta: seq=20\n", "record": {"elapsed": {"repr": "0:00:18.628106", "seconds": 18.628106}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "emit_delta", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 408, "message": "Emitted positions delta: seq=20", "module": "live", "name": "app.ws.live", "process": {"id": 29644, "name": "MainProcess"}, "thread": {"id": 29140, "name": "MainThread"}, "time": {"repr": "2025-08-21 22:05:22.871878+05:30", "timestamp": 1755794122.871878}}}
{"text": "2025-08-21 22:05:22.905 | INFO     | app.services.dhan_client:get_pnl:489 - Starting accurate P&L calculation\n", "record": {"elapsed": {"repr": "0:00:18.661409", "seconds": 18.661409}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 489, "message": "Starting accurate P&L calculation", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 29644, "name": "MainProcess"}, "thread": {"id": 29140, "name": "MainThread"}, "time": {"repr": "2025-08-21 22:05:22.905181+05:30", "timestamp": 1755794122.905181}}}
{"text": "2025-08-21 22:05:22.907 | INFO     | app.services.dhan_client:get_pnl:491 - Fetched 5 positions\n", "record": {"elapsed": {"repr": "0:00:18.663356", "seconds": 18.663356}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 491, "message": "Fetched 5 positions", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 29644, "name": "MainProcess"}, "thread": {"id": 29140, "name": "MainThread"}, "time": {"repr": "2025-08-21 22:05:22.907128+05:30", "timestamp": 1755794122.907128}}}
{"text": "2025-08-21 22:05:22.910 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for RELIANCE: unrealized=122244.8, today=122244.8\n", "record": {"elapsed": {"repr": "0:00:18.666430", "seconds": 18.66643}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for RELIANCE: unrealized=122244.8, today=122244.8", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 29644, "name": "MainProcess"}, "thread": {"id": 29140, "name": "MainThread"}, "time": {"repr": "2025-08-21 22:05:22.910202+05:30", "timestamp": 1755794122.910202}}}
{"text": "2025-08-21 22:05:22.913 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for TCS: unrealized=321.61, today=321.61\n", "record": {"elapsed": {"repr": "0:00:18.669790", "seconds": 18.66979}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for TCS: unrealized=321.61, today=321.61", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 29644, "name": "MainProcess"}, "thread": {"id": 29140, "name": "MainThread"}, "time": {"repr": "2025-08-21 22:05:22.913562+05:30", "timestamp": 1755794122.913562}}}
{"text": "2025-08-21 22:05:22.915 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for HDFC: unrealized=1775492.4, today=1775492.4\n", "record": {"elapsed": {"repr": "0:00:18.671352", "seconds": 18.671352}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for HDFC: unrealized=1775492.4, today=1775492.4", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 29644, "name": "MainProcess"}, "thread": {"id": 29140, "name": "MainThread"}, "time": {"repr": "2025-08-21 22:05:22.915124+05:30", "timestamp": 1755794122.915124}}}
{"text": "2025-08-21 22:05:22.919 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for INFY: unrealized=1505610.23, today=1505610.23\n", "record": {"elapsed": {"repr": "0:00:18.675554", "seconds": 18.675554}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for INFY: unrealized=1505610.23, today=1505610.23", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 29644, "name": "MainProcess"}, "thread": {"id": 29140, "name": "MainThread"}, "time": {"repr": "2025-08-21 22:05:22.919326+05:30", "timestamp": 1755794122.919326}}}
{"text": "2025-08-21 22:05:22.920 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for ICICIBANK: unrealized=-1336672.74, today=-1336672.74\n", "record": {"elapsed": {"repr": "0:00:18.676824", "seconds": 18.676824}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for ICICIBANK: unrealized=-1336672.74, today=-1336672.74", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 29644, "name": "MainProcess"}, "thread": {"id": 29140, "name": "MainThread"}, "time": {"repr": "2025-08-21 22:05:22.920596+05:30", "timestamp": 1755794122.920596}}}
{"text": "2025-08-21 22:05:22.922 | INFO     | app.services.dhan_client:get_pnl:545 - Calculated totals - realized: 0.0, unrealized: 2066996.3, day: 2066996.3\n", "record": {"elapsed": {"repr": "0:00:18.678459", "seconds": 18.678459}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 545, "message": "Calculated totals - realized: 0.0, unrealized: 2066996.3, day: 2066996.3", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 29644, "name": "MainProcess"}, "thread": {"id": 29140, "name": "MainThread"}, "time": {"repr": "2025-08-21 22:05:22.922231+05:30", "timestamp": 1755794122.922231}}}
{"text": "2025-08-21 22:05:22.924 | DEBUG    | app.services.dhan_client:get_pnl:554 - PnL consistency check passed: drift=‚Çπ0.00\n", "record": {"elapsed": {"repr": "0:00:18.680238", "seconds": 18.680238}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 554, "message": "PnL consistency check passed: drift=‚Çπ0.00", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 29644, "name": "MainProcess"}, "thread": {"id": 29140, "name": "MainThread"}, "time": {"repr": "2025-08-21 22:05:22.924010+05:30", "timestamp": 1755794122.92401}}}
{"text": "2025-08-21 22:05:22.935 | DEBUG    | app.services.dhan_client:get_pnl:558 - Creating PnLTotals...\n", "record": {"elapsed": {"repr": "0:00:18.691484", "seconds": 18.691484}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 558, "message": "Creating PnLTotals...", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 29644, "name": "MainProcess"}, "thread": {"id": 29140, "name": "MainThread"}, "time": {"repr": "2025-08-21 22:05:22.935256+05:30", "timestamp": 1755794122.935256}}}
{"text": "2025-08-21 22:05:22.944 | DEBUG    | app.services.dhan_client:get_pnl:565 - PnLTotals created successfully\n", "record": {"elapsed": {"repr": "0:00:18.700447", "seconds": 18.700447}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 565, "message": "PnLTotals created successfully", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 29644, "name": "MainProcess"}, "thread": {"id": 29140, "name": "MainThread"}, "time": {"repr": "2025-08-21 22:05:22.944219+05:30", "timestamp": 1755794122.944219}}}
{"text": "2025-08-21 22:05:22.948 | DEBUG    | app.services.dhan_client:get_pnl:574 - Creating PnL model...\n", "record": {"elapsed": {"repr": "0:00:18.705194", "seconds": 18.705194}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 574, "message": "Creating PnL model...", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 29644, "name": "MainProcess"}, "thread": {"id": 29140, "name": "MainThread"}, "time": {"repr": "2025-08-21 22:05:22.948966+05:30", "timestamp": 1755794122.948966}}}
{"text": "2025-08-21 22:05:22.956 | DEBUG    | app.services.dhan_client:get_pnl:575 - Model fields: totals=<class 'app.models.schemas.PnLTotals'>, perSymbol=5, updated_at=2025-08-21 22:05:22.909954+05:30, trading_day=2025-08-21\n", "record": {"elapsed": {"repr": "0:00:18.712315", "seconds": 18.712315}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 575, "message": "Model fields: totals=<class 'app.models.schemas.PnLTotals'>, perSymbol=5, updated_at=2025-08-21 22:05:22.909954+05:30, trading_day=2025-08-21", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 29644, "name": "MainProcess"}, "thread": {"id": 29140, "name": "MainThread"}, "time": {"repr": "2025-08-21 22:05:22.956087+05:30", "timestamp": 1755794122.956087}}}
{"text": "2025-08-21 22:05:22.971 | DEBUG    | app.services.dhan_client:get_pnl:584 - Created PnL model: totals=PnLTotals(realized=0.0, unrealized=2066996.3, day=2066996.3, currency='INR') per_symbol=[PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1596, avg=105.2, ltp=181.79, unrealized=122244.8, today_pnl=122244.8), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=895, avg=965.72, ltp=965.36, unrealized=321.61, today_pnl=321.61), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=1697, avg=987.4, ltp=2033.65, unrealized=1775492.4, today_pnl=1775492.4), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=1638, avg=1011.79, ltp=92.61, unrealized=1505610.23, today_pnl=1505610.23), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=1535, avg=1230.09, ltp=359.29, unrealized=-1336672.74, today_pnl=-1336672.74)] updated_at=datetime.datetime(2025, 8, 21, 22, 5, 22, 909954, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))) trading_day='2025-08-21'\n", "record": {"elapsed": {"repr": "0:00:18.727252", "seconds": 18.727252}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 584, "message": "Created PnL model: totals=PnLTotals(realized=0.0, unrealized=2066996.3, day=2066996.3, currency='INR') per_symbol=[PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1596, avg=105.2, ltp=181.79, unrealized=122244.8, today_pnl=122244.8), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=895, avg=965.72, ltp=965.36, unrealized=321.61, today_pnl=321.61), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=1697, avg=987.4, ltp=2033.65, unrealized=1775492.4, today_pnl=1775492.4), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=1638, avg=1011.79, ltp=92.61, unrealized=1505610.23, today_pnl=1505610.23), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=1535, avg=1230.09, ltp=359.29, unrealized=-1336672.74, today_pnl=-1336672.74)] updated_at=datetime.datetime(2025, 8, 21, 22, 5, 22, 909954, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))) trading_day='2025-08-21'", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 29644, "name": "MainProcess"}, "thread": {"id": 29140, "name": "MainThread"}, "time": {"repr": "2025-08-21 22:05:22.971024+05:30", "timestamp": 1755794122.971024}}}
{"text": "2025-08-21 22:05:22.994 | DEBUG    | app.services.dhan_client:get_pnl:585 - PnL model fields: {'totals': PnLTotals(realized=0.0, unrealized=2066996.3, day=2066996.3, currency='INR'), 'per_symbol': [PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1596, avg=105.2, ltp=181.79, unrealized=122244.8, today_pnl=122244.8), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=895, avg=965.72, ltp=965.36, unrealized=321.61, today_pnl=321.61), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=1697, avg=987.4, ltp=2033.65, unrealized=1775492.4, today_pnl=1775492.4), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=1638, avg=1011.79, ltp=92.61, unrealized=1505610.23, today_pnl=1505610.23), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=1535, avg=1230.09, ltp=359.29, unrealized=-1336672.74, today_pnl=-1336672.74)], 'updated_at': datetime.datetime(2025, 8, 21, 22, 5, 22, 909954, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))), 'trading_day': '2025-08-21'}\n", "record": {"elapsed": {"repr": "0:00:18.750885", "seconds": 18.750885}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 585, "message": "PnL model fields: {'totals': PnLTotals(realized=0.0, unrealized=2066996.3, day=2066996.3, currency='INR'), 'per_symbol': [PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1596, avg=105.2, ltp=181.79, unrealized=122244.8, today_pnl=122244.8), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=895, avg=965.72, ltp=965.36, unrealized=321.61, today_pnl=321.61), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=1697, avg=987.4, ltp=2033.65, unrealized=1775492.4, today_pnl=1775492.4), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=1638, avg=1011.79, ltp=92.61, unrealized=1505610.23, today_pnl=1505610.23), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=1535, avg=1230.09, ltp=359.29, unrealized=-1336672.74, today_pnl=-1336672.74)], 'updated_at': datetime.datetime(2025, 8, 21, 22, 5, 22, 909954, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))), 'trading_day': '2025-08-21'}", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 29644, "name": "MainProcess"}, "thread": {"id": 29140, "name": "MainThread"}, "time": {"repr": "2025-08-21 22:05:22.994657+05:30", "timestamp": 1755794122.994657}}}
{"text": "2025-08-21 22:05:23.008 | INFO     | app.services.dhan_client:get_pnl:587 - P&L calculation completed successfully: 5 symbols, unrealized=‚Çπ2066996.30\n", "record": {"elapsed": {"repr": "0:00:18.764594", "seconds": 18.764594}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 587, "message": "P&L calculation completed successfully: 5 symbols, unrealized=‚Çπ2066996.30", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 29644, "name": "MainProcess"}, "thread": {"id": 29140, "name": "MainThread"}, "time": {"repr": "2025-08-21 22:05:23.008366+05:30", "timestamp": 1755794123.008366}}}
{"text": "2025-08-21 22:05:23.015 | DEBUG    | app.ws.live:emit_delta:408 - Emitted pnl delta: seq=21\n", "record": {"elapsed": {"repr": "0:00:18.771679", "seconds": 18.771679}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "emit_delta", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 408, "message": "Emitted pnl delta: seq=21", "module": "live", "name": "app.ws.live", "process": {"id": 29644, "name": "MainProcess"}, "thread": {"id": 29140, "name": "MainThread"}, "time": {"repr": "2025-08-21 22:05:23.015451+05:30", "timestamp": 1755794123.015451}}}
{"text": "2025-08-21 22:05:24.745 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:20.501265", "seconds": 20.501265}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 29644, "name": "MainProcess"}, "thread": {"id": 15452, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 22:05:24.745037+05:30", "timestamp": 1755794124.745037}}}
{"text": "2025-08-21 22:05:24.746 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:20.503050", "seconds": 20.50305}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 29644, "name": "MainProcess"}, "thread": {"id": 15452, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 22:05:24.746822+05:30", "timestamp": 1755794124.746822}}}
{"text": "2025-08-21 22:05:24.748 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:20.505042", "seconds": 20.505042}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 29644, "name": "MainProcess"}, "thread": {"id": 15452, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 22:05:24.748814+05:30", "timestamp": 1755794124.748814}}}
{"text": "2025-08-21 22:05:24.749 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:20.505970", "seconds": 20.50597}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 29644, "name": "MainProcess"}, "thread": {"id": 15452, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 22:05:24.749742+05:30", "timestamp": 1755794124.749742}}}
{"text": "2025-08-21 22:05:24.751 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:20.507865", "seconds": 20.507865}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 29644, "name": "MainProcess"}, "thread": {"id": 15452, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 22:05:24.751637+05:30", "timestamp": 1755794124.751637}}}
{"text": "2025-08-21 22:05:24.753 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:20.509278", "seconds": 20.509278}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 29644, "name": "MainProcess"}, "thread": {"id": 15452, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 22:05:24.753050+05:30", "timestamp": 1755794124.75305}}}
{"text": "2025-08-21 22:05:24.754 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:20.510335", "seconds": 20.510335}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 29644, "name": "MainProcess"}, "thread": {"id": 15452, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 22:05:24.754107+05:30", "timestamp": 1755794124.754107}}}
{"text": "2025-08-21 22:05:24.755 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:20.511917", "seconds": 20.511917}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 29644, "name": "MainProcess"}, "thread": {"id": 15452, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 22:05:24.755689+05:30", "timestamp": 1755794124.755689}}}
{"text": "2025-08-21 22:05:24.757 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:20.514016", "seconds": 20.514016}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 29644, "name": "MainProcess"}, "thread": {"id": 15452, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 22:05:24.757788+05:30", "timestamp": 1755794124.757788}}}
{"text": "2025-08-21 22:05:24.759 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:20.516045", "seconds": 20.516045}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 29644, "name": "MainProcess"}, "thread": {"id": 15452, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 22:05:24.759817+05:30", "timestamp": 1755794124.759817}}}
{"text": "2025-08-21 22:05:24.874 | INFO     | app.services.dhan_client:get_pnl:489 - Starting accurate P&L calculation\n", "record": {"elapsed": {"repr": "0:00:20.630544", "seconds": 20.630544}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 489, "message": "Starting accurate P&L calculation", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 29644, "name": "MainProcess"}, "thread": {"id": 29140, "name": "MainThread"}, "time": {"repr": "2025-08-21 22:05:24.874316+05:30", "timestamp": 1755794124.874316}}}
{"text": "2025-08-21 22:05:24.876 | INFO     | app.services.dhan_client:get_pnl:491 - Fetched 5 positions\n", "record": {"elapsed": {"repr": "0:00:20.632921", "seconds": 20.632921}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 491, "message": "Fetched 5 positions", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 29644, "name": "MainProcess"}, "thread": {"id": 29140, "name": "MainThread"}, "time": {"repr": "2025-08-21 22:05:24.876693+05:30", "timestamp": 1755794124.876693}}}
{"text": "2025-08-21 22:05:24.879 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for RELIANCE: unrealized=127858.44, today=127858.44\n", "record": {"elapsed": {"repr": "0:00:20.635286", "seconds": 20.635286}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for RELIANCE: unrealized=127858.44, today=127858.44", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 29644, "name": "MainProcess"}, "thread": {"id": 29140, "name": "MainThread"}, "time": {"repr": "2025-08-21 22:05:24.879058+05:30", "timestamp": 1755794124.879058}}}
{"text": "2025-08-21 22:05:24.881 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for TCS: unrealized=5059.79, today=5059.79\n", "record": {"elapsed": {"repr": "0:00:20.637302", "seconds": 20.637302}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for TCS: unrealized=5059.79, today=5059.79", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 29644, "name": "MainProcess"}, "thread": {"id": 29140, "name": "MainThread"}, "time": {"repr": "2025-08-21 22:05:24.881074+05:30", "timestamp": 1755794124.881074}}}
{"text": "2025-08-21 22:05:24.882 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for HDFC: unrealized=1814692.63, today=1814692.63\n", "record": {"elapsed": {"repr": "0:00:20.638675", "seconds": 20.638675}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for HDFC: unrealized=1814692.63, today=1814692.63", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 29644, "name": "MainProcess"}, "thread": {"id": 29140, "name": "MainThread"}, "time": {"repr": "2025-08-21 22:05:24.882447+05:30", "timestamp": 1755794124.882447}}}
{"text": "2025-08-21 22:05:24.885 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for INFY: unrealized=1503075.12, today=1503075.12\n", "record": {"elapsed": {"repr": "0:00:20.641530", "seconds": 20.64153}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for INFY: unrealized=1503075.12, today=1503075.12", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 29644, "name": "MainProcess"}, "thread": {"id": 29140, "name": "MainThread"}, "time": {"repr": "2025-08-21 22:05:24.885302+05:30", "timestamp": 1755794124.885302}}}
{"text": "2025-08-21 22:05:24.887 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for ICICIBANK: unrealized=-1334097.8, today=-1334097.8\n", "record": {"elapsed": {"repr": "0:00:20.643284", "seconds": 20.643284}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for ICICIBANK: unrealized=-1334097.8, today=-1334097.8", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 29644, "name": "MainProcess"}, "thread": {"id": 29140, "name": "MainThread"}, "time": {"repr": "2025-08-21 22:05:24.887056+05:30", "timestamp": 1755794124.887056}}}
{"text": "2025-08-21 22:05:24.889 | INFO     | app.services.dhan_client:get_pnl:545 - Calculated totals - realized: 0.0, unrealized: 2116588.18, day: 2116588.18\n", "record": {"elapsed": {"repr": "0:00:20.645367", "seconds": 20.645367}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 545, "message": "Calculated totals - realized: 0.0, unrealized: 2116588.18, day: 2116588.18", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 29644, "name": "MainProcess"}, "thread": {"id": 29140, "name": "MainThread"}, "time": {"repr": "2025-08-21 22:05:24.889139+05:30", "timestamp": 1755794124.889139}}}
{"text": "2025-08-21 22:05:24.890 | DEBUG    | app.services.dhan_client:get_pnl:554 - PnL consistency check passed: drift=‚Çπ0.00\n", "record": {"elapsed": {"repr": "0:00:20.647201", "seconds": 20.647201}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 554, "message": "PnL consistency check passed: drift=‚Çπ0.00", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 29644, "name": "MainProcess"}, "thread": {"id": 29140, "name": "MainThread"}, "time": {"repr": "2025-08-21 22:05:24.890973+05:30", "timestamp": 1755794124.890973}}}
{"text": "2025-08-21 22:05:24.892 | DEBUG    | app.services.dhan_client:get_pnl:558 - Creating PnLTotals...\n", "record": {"elapsed": {"repr": "0:00:20.648768", "seconds": 20.648768}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 558, "message": "Creating PnLTotals...", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 29644, "name": "MainProcess"}, "thread": {"id": 29140, "name": "MainThread"}, "time": {"repr": "2025-08-21 22:05:24.892540+05:30", "timestamp": 1755794124.89254}}}
{"text": "2025-08-21 22:05:24.894 | DEBUG    | app.services.dhan_client:get_pnl:565 - PnLTotals created successfully\n", "record": {"elapsed": {"repr": "0:00:20.650782", "seconds": 20.650782}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 565, "message": "PnLTotals created successfully", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 29644, "name": "MainProcess"}, "thread": {"id": 29140, "name": "MainThread"}, "time": {"repr": "2025-08-21 22:05:24.894554+05:30", "timestamp": 1755794124.894554}}}
{"text": "2025-08-21 22:05:24.895 | DEBUG    | app.services.dhan_client:get_pnl:574 - Creating PnL model...\n", "record": {"elapsed": {"repr": "0:00:20.651752", "seconds": 20.651752}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 574, "message": "Creating PnL model...", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 29644, "name": "MainProcess"}, "thread": {"id": 29140, "name": "MainThread"}, "time": {"repr": "2025-08-21 22:05:24.895524+05:30", "timestamp": 1755794124.895524}}}
{"text": "2025-08-21 22:05:24.896 | DEBUG    | app.services.dhan_client:get_pnl:575 - Model fields: totals=<class 'app.models.schemas.PnLTotals'>, perSymbol=5, updated_at=2025-08-21 22:05:24.878712+05:30, trading_day=2025-08-21\n", "record": {"elapsed": {"repr": "0:00:20.652677", "seconds": 20.652677}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 575, "message": "Model fields: totals=<class 'app.models.schemas.PnLTotals'>, perSymbol=5, updated_at=2025-08-21 22:05:24.878712+05:30, trading_day=2025-08-21", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 29644, "name": "MainProcess"}, "thread": {"id": 29140, "name": "MainThread"}, "time": {"repr": "2025-08-21 22:05:24.896449+05:30", "timestamp": 1755794124.896449}}}
{"text": "2025-08-21 22:05:24.898 | DEBUG    | app.services.dhan_client:get_pnl:584 - Created PnL model: totals=PnLTotals(realized=0.0, unrealized=2116588.18, day=2116588.18, currency='INR') per_symbol=[PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1596, avg=105.2, ltp=185.31, unrealized=127858.44, today_pnl=127858.44), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=895, avg=965.72, ltp=960.07, unrealized=5059.79, today_pnl=5059.79), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=1697, avg=987.4, ltp=2056.75, unrealized=1814692.63, today_pnl=1814692.63), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=1638, avg=1011.79, ltp=94.16, unrealized=1503075.12, today_pnl=1503075.12), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=1535, avg=1230.09, ltp=360.97, unrealized=-1334097.8, today_pnl=-1334097.8)] updated_at=datetime.datetime(2025, 8, 21, 22, 5, 24, 878712, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))) trading_day='2025-08-21'\n", "record": {"elapsed": {"repr": "0:00:20.655161", "seconds": 20.655161}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 584, "message": "Created PnL model: totals=PnLTotals(realized=0.0, unrealized=2116588.18, day=2116588.18, currency='INR') per_symbol=[PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1596, avg=105.2, ltp=185.31, unrealized=127858.44, today_pnl=127858.44), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=895, avg=965.72, ltp=960.07, unrealized=5059.79, today_pnl=5059.79), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=1697, avg=987.4, ltp=2056.75, unrealized=1814692.63, today_pnl=1814692.63), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=1638, avg=1011.79, ltp=94.16, unrealized=1503075.12, today_pnl=1503075.12), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=1535, avg=1230.09, ltp=360.97, unrealized=-1334097.8, today_pnl=-1334097.8)] updated_at=datetime.datetime(2025, 8, 21, 22, 5, 24, 878712, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))) trading_day='2025-08-21'", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 29644, "name": "MainProcess"}, "thread": {"id": 29140, "name": "MainThread"}, "time": {"repr": "2025-08-21 22:05:24.898933+05:30", "timestamp": 1755794124.898933}}}
{"text": "2025-08-21 22:05:24.901 | DEBUG    | app.services.dhan_client:get_pnl:585 - PnL model fields: {'totals': PnLTotals(realized=0.0, unrealized=2116588.18, day=2116588.18, currency='INR'), 'per_symbol': [PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1596, avg=105.2, ltp=185.31, unrealized=127858.44, today_pnl=127858.44), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=895, avg=965.72, ltp=960.07, unrealized=5059.79, today_pnl=5059.79), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=1697, avg=987.4, ltp=2056.75, unrealized=1814692.63, today_pnl=1814692.63), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=1638, avg=1011.79, ltp=94.16, unrealized=1503075.12, today_pnl=1503075.12), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=1535, avg=1230.09, ltp=360.97, unrealized=-1334097.8, today_pnl=-1334097.8)], 'updated_at': datetime.datetime(2025, 8, 21, 22, 5, 24, 878712, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))), 'trading_day': '2025-08-21'}\n", "record": {"elapsed": {"repr": "0:00:20.658051", "seconds": 20.658051}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 585, "message": "PnL model fields: {'totals': PnLTotals(realized=0.0, unrealized=2116588.18, day=2116588.18, currency='INR'), 'per_symbol': [PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1596, avg=105.2, ltp=185.31, unrealized=127858.44, today_pnl=127858.44), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=895, avg=965.72, ltp=960.07, unrealized=5059.79, today_pnl=5059.79), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=1697, avg=987.4, ltp=2056.75, unrealized=1814692.63, today_pnl=1814692.63), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=1638, avg=1011.79, ltp=94.16, unrealized=1503075.12, today_pnl=1503075.12), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=1535, avg=1230.09, ltp=360.97, unrealized=-1334097.8, today_pnl=-1334097.8)], 'updated_at': datetime.datetime(2025, 8, 21, 22, 5, 24, 878712, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))), 'trading_day': '2025-08-21'}", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 29644, "name": "MainProcess"}, "thread": {"id": 29140, "name": "MainThread"}, "time": {"repr": "2025-08-21 22:05:24.901823+05:30", "timestamp": 1755794124.901823}}}
{"text": "2025-08-21 22:05:24.903 | INFO     | app.services.dhan_client:get_pnl:587 - P&L calculation completed successfully: 5 symbols, unrealized=‚Çπ2116588.18\n", "record": {"elapsed": {"repr": "0:00:20.659856", "seconds": 20.659856}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 587, "message": "P&L calculation completed successfully: 5 symbols, unrealized=‚Çπ2116588.18", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 29644, "name": "MainProcess"}, "thread": {"id": 29140, "name": "MainThread"}, "time": {"repr": "2025-08-21 22:05:24.903628+05:30", "timestamp": 1755794124.903628}}}
{"text": "2025-08-21 22:05:24.905 | DEBUG    | app.ws.live:emit_delta:408 - Emitted pnl delta: seq=22\n", "record": {"elapsed": {"repr": "0:00:20.662115", "seconds": 20.662115}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "emit_delta", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 408, "message": "Emitted pnl delta: seq=22", "module": "live", "name": "app.ws.live", "process": {"id": 29644, "name": "MainProcess"}, "thread": {"id": 29140, "name": "MainThread"}, "time": {"repr": "2025-08-21 22:05:24.905887+05:30", "timestamp": 1755794124.905887}}}
{"text": "2025-08-21 22:05:26.312 | DEBUG    | app.ws.live:emit_delta:408 - Emitted positions delta: seq=23\n", "record": {"elapsed": {"repr": "0:00:22.069138", "seconds": 22.069138}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "emit_delta", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 408, "message": "Emitted positions delta: seq=23", "module": "live", "name": "app.ws.live", "process": {"id": 29644, "name": "MainProcess"}, "thread": {"id": 29140, "name": "MainThread"}, "time": {"repr": "2025-08-21 22:05:26.312910+05:30", "timestamp": 1755794126.31291}}}
{"text": "2025-08-21 22:05:26.689 | INFO     | app.services.dhan_client:get_pnl:489 - Starting accurate P&L calculation\n", "record": {"elapsed": {"repr": "0:00:22.445755", "seconds": 22.445755}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 489, "message": "Starting accurate P&L calculation", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 29644, "name": "MainProcess"}, "thread": {"id": 29140, "name": "MainThread"}, "time": {"repr": "2025-08-21 22:05:26.689527+05:30", "timestamp": 1755794126.689527}}}
{"text": "2025-08-21 22:05:26.692 | INFO     | app.services.dhan_client:get_pnl:491 - Fetched 5 positions\n", "record": {"elapsed": {"repr": "0:00:22.448329", "seconds": 22.448329}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 491, "message": "Fetched 5 positions", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 29644, "name": "MainProcess"}, "thread": {"id": 29140, "name": "MainThread"}, "time": {"repr": "2025-08-21 22:05:26.692101+05:30", "timestamp": 1755794126.692101}}}
{"text": "2025-08-21 22:05:26.694 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for RELIANCE: unrealized=127858.44, today=127858.44\n", "record": {"elapsed": {"repr": "0:00:22.451079", "seconds": 22.451079}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for RELIANCE: unrealized=127858.44, today=127858.44", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 29644, "name": "MainProcess"}, "thread": {"id": 29140, "name": "MainThread"}, "time": {"repr": "2025-08-21 22:05:26.694851+05:30", "timestamp": 1755794126.694851}}}
{"text": "2025-08-21 22:05:26.696 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for TCS: unrealized=5059.79, today=5059.79\n", "record": {"elapsed": {"repr": "0:00:22.453089", "seconds": 22.453089}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for TCS: unrealized=5059.79, today=5059.79", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 29644, "name": "MainProcess"}, "thread": {"id": 29140, "name": "MainThread"}, "time": {"repr": "2025-08-21 22:05:26.696861+05:30", "timestamp": 1755794126.696861}}}
{"text": "2025-08-21 22:05:26.699 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for HDFC: unrealized=1814692.63, today=1814692.63\n", "record": {"elapsed": {"repr": "0:00:22.455550", "seconds": 22.45555}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for HDFC: unrealized=1814692.63, today=1814692.63", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 29644, "name": "MainProcess"}, "thread": {"id": 29140, "name": "MainThread"}, "time": {"repr": "2025-08-21 22:05:26.699322+05:30", "timestamp": 1755794126.699322}}}
{"text": "2025-08-21 22:05:26.701 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for INFY: unrealized=1503075.12, today=1503075.12\n", "record": {"elapsed": {"repr": "0:00:22.457519", "seconds": 22.457519}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for INFY: unrealized=1503075.12, today=1503075.12", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 29644, "name": "MainProcess"}, "thread": {"id": 29140, "name": "MainThread"}, "time": {"repr": "2025-08-21 22:05:26.701291+05:30", "timestamp": 1755794126.701291}}}
{"text": "2025-08-21 22:05:26.703 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for ICICIBANK: unrealized=-1334097.8, today=-1334097.8\n", "record": {"elapsed": {"repr": "0:00:22.459961", "seconds": 22.459961}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for ICICIBANK: unrealized=-1334097.8, today=-1334097.8", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 29644, "name": "MainProcess"}, "thread": {"id": 29140, "name": "MainThread"}, "time": {"repr": "2025-08-21 22:05:26.703733+05:30", "timestamp": 1755794126.703733}}}
{"text": "2025-08-21 22:05:26.707 | INFO     | app.services.dhan_client:get_pnl:545 - Calculated totals - realized: 0.0, unrealized: 2116588.18, day: 2116588.18\n", "record": {"elapsed": {"repr": "0:00:22.463881", "seconds": 22.463881}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 545, "message": "Calculated totals - realized: 0.0, unrealized: 2116588.18, day: 2116588.18", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 29644, "name": "MainProcess"}, "thread": {"id": 29140, "name": "MainThread"}, "time": {"repr": "2025-08-21 22:05:26.707653+05:30", "timestamp": 1755794126.707653}}}
{"text": "2025-08-21 22:05:26.711 | DEBUG    | app.services.dhan_client:get_pnl:554 - PnL consistency check passed: drift=‚Çπ0.00\n", "record": {"elapsed": {"repr": "0:00:22.467312", "seconds": 22.467312}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 554, "message": "PnL consistency check passed: drift=‚Çπ0.00", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 29644, "name": "MainProcess"}, "thread": {"id": 29140, "name": "MainThread"}, "time": {"repr": "2025-08-21 22:05:26.711084+05:30", "timestamp": 1755794126.711084}}}
{"text": "2025-08-21 22:05:26.714 | DEBUG    | app.services.dhan_client:get_pnl:558 - Creating PnLTotals...\n", "record": {"elapsed": {"repr": "0:00:22.470827", "seconds": 22.470827}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 558, "message": "Creating PnLTotals...", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 29644, "name": "MainProcess"}, "thread": {"id": 29140, "name": "MainThread"}, "time": {"repr": "2025-08-21 22:05:26.714599+05:30", "timestamp": 1755794126.714599}}}
{"text": "2025-08-21 22:05:26.716 | DEBUG    | app.services.dhan_client:get_pnl:565 - PnLTotals created successfully\n", "record": {"elapsed": {"repr": "0:00:22.473038", "seconds": 22.473038}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 565, "message": "PnLTotals created successfully", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 29644, "name": "MainProcess"}, "thread": {"id": 29140, "name": "MainThread"}, "time": {"repr": "2025-08-21 22:05:26.716810+05:30", "timestamp": 1755794126.71681}}}
{"text": "2025-08-21 22:05:26.720 | DEBUG    | app.services.dhan_client:get_pnl:574 - Creating PnL model...\n", "record": {"elapsed": {"repr": "0:00:22.476763", "seconds": 22.476763}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 574, "message": "Creating PnL model...", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 29644, "name": "MainProcess"}, "thread": {"id": 29140, "name": "MainThread"}, "time": {"repr": "2025-08-21 22:05:26.720535+05:30", "timestamp": 1755794126.720535}}}
{"text": "2025-08-21 22:05:26.723 | DEBUG    | app.services.dhan_client:get_pnl:575 - Model fields: totals=<class 'app.models.schemas.PnLTotals'>, perSymbol=5, updated_at=2025-08-21 22:05:26.694498+05:30, trading_day=2025-08-21\n", "record": {"elapsed": {"repr": "0:00:22.479781", "seconds": 22.479781}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 575, "message": "Model fields: totals=<class 'app.models.schemas.PnLTotals'>, perSymbol=5, updated_at=2025-08-21 22:05:26.694498+05:30, trading_day=2025-08-21", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 29644, "name": "MainProcess"}, "thread": {"id": 29140, "name": "MainThread"}, "time": {"repr": "2025-08-21 22:05:26.723553+05:30", "timestamp": 1755794126.723553}}}
{"text": "2025-08-21 22:05:26.725 | DEBUG    | app.services.dhan_client:get_pnl:584 - Created PnL model: totals=PnLTotals(realized=0.0, unrealized=2116588.18, day=2116588.18, currency='INR') per_symbol=[PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1596, avg=105.2, ltp=185.31, unrealized=127858.44, today_pnl=127858.44), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=895, avg=965.72, ltp=960.07, unrealized=5059.79, today_pnl=5059.79), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=1697, avg=987.4, ltp=2056.75, unrealized=1814692.63, today_pnl=1814692.63), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=1638, avg=1011.79, ltp=94.16, unrealized=1503075.12, today_pnl=1503075.12), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=1535, avg=1230.09, ltp=360.97, unrealized=-1334097.8, today_pnl=-1334097.8)] updated_at=datetime.datetime(2025, 8, 21, 22, 5, 26, 694498, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))) trading_day='2025-08-21'\n", "record": {"elapsed": {"repr": "0:00:22.482029", "seconds": 22.482029}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 584, "message": "Created PnL model: totals=PnLTotals(realized=0.0, unrealized=2116588.18, day=2116588.18, currency='INR') per_symbol=[PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1596, avg=105.2, ltp=185.31, unrealized=127858.44, today_pnl=127858.44), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=895, avg=965.72, ltp=960.07, unrealized=5059.79, today_pnl=5059.79), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=1697, avg=987.4, ltp=2056.75, unrealized=1814692.63, today_pnl=1814692.63), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=1638, avg=1011.79, ltp=94.16, unrealized=1503075.12, today_pnl=1503075.12), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=1535, avg=1230.09, ltp=360.97, unrealized=-1334097.8, today_pnl=-1334097.8)] updated_at=datetime.datetime(2025, 8, 21, 22, 5, 26, 694498, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))) trading_day='2025-08-21'", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 29644, "name": "MainProcess"}, "thread": {"id": 29140, "name": "MainThread"}, "time": {"repr": "2025-08-21 22:05:26.725801+05:30", "timestamp": 1755794126.725801}}}
{"text": "2025-08-21 22:05:26.729 | DEBUG    | app.services.dhan_client:get_pnl:585 - PnL model fields: {'totals': PnLTotals(realized=0.0, unrealized=2116588.18, day=2116588.18, currency='INR'), 'per_symbol': [PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1596, avg=105.2, ltp=185.31, unrealized=127858.44, today_pnl=127858.44), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=895, avg=965.72, ltp=960.07, unrealized=5059.79, today_pnl=5059.79), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=1697, avg=987.4, ltp=2056.75, unrealized=1814692.63, today_pnl=1814692.63), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=1638, avg=1011.79, ltp=94.16, unrealized=1503075.12, today_pnl=1503075.12), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=1535, avg=1230.09, ltp=360.97, unrealized=-1334097.8, today_pnl=-1334097.8)], 'updated_at': datetime.datetime(2025, 8, 21, 22, 5, 26, 694498, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))), 'trading_day': '2025-08-21'}\n", "record": {"elapsed": {"repr": "0:00:22.485533", "seconds": 22.485533}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 585, "message": "PnL model fields: {'totals': PnLTotals(realized=0.0, unrealized=2116588.18, day=2116588.18, currency='INR'), 'per_symbol': [PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1596, avg=105.2, ltp=185.31, unrealized=127858.44, today_pnl=127858.44), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=895, avg=965.72, ltp=960.07, unrealized=5059.79, today_pnl=5059.79), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=1697, avg=987.4, ltp=2056.75, unrealized=1814692.63, today_pnl=1814692.63), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=1638, avg=1011.79, ltp=94.16, unrealized=1503075.12, today_pnl=1503075.12), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=1535, avg=1230.09, ltp=360.97, unrealized=-1334097.8, today_pnl=-1334097.8)], 'updated_at': datetime.datetime(2025, 8, 21, 22, 5, 26, 694498, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))), 'trading_day': '2025-08-21'}", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 29644, "name": "MainProcess"}, "thread": {"id": 29140, "name": "MainThread"}, "time": {"repr": "2025-08-21 22:05:26.729305+05:30", "timestamp": 1755794126.729305}}}
{"text": "2025-08-21 22:05:26.731 | INFO     | app.services.dhan_client:get_pnl:587 - P&L calculation completed successfully: 5 symbols, unrealized=‚Çπ2116588.18\n", "record": {"elapsed": {"repr": "0:00:22.487559", "seconds": 22.487559}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 587, "message": "P&L calculation completed successfully: 5 symbols, unrealized=‚Çπ2116588.18", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 29644, "name": "MainProcess"}, "thread": {"id": 29140, "name": "MainThread"}, "time": {"repr": "2025-08-21 22:05:26.731331+05:30", "timestamp": 1755794126.731331}}}
{"text": "2025-08-21 22:05:26.733 | DEBUG    | app.ws.live:emit_delta:408 - Emitted pnl delta: seq=24\n", "record": {"elapsed": {"repr": "0:00:22.490104", "seconds": 22.490104}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "emit_delta", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 408, "message": "Emitted pnl delta: seq=24", "module": "live", "name": "app.ws.live", "process": {"id": 29644, "name": "MainProcess"}, "thread": {"id": 29140, "name": "MainThread"}, "time": {"repr": "2025-08-21 22:05:26.733876+05:30", "timestamp": 1755794126.733876}}}
{"text": "2025-08-21 22:05:26.762 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:22.518537", "seconds": 22.518537}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 29644, "name": "MainProcess"}, "thread": {"id": 15452, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 22:05:26.762309+05:30", "timestamp": 1755794126.762309}}}
{"text": "2025-08-21 22:05:26.764 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:22.520563", "seconds": 22.520563}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 29644, "name": "MainProcess"}, "thread": {"id": 15452, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 22:05:26.764335+05:30", "timestamp": 1755794126.764335}}}
{"text": "2025-08-21 22:05:26.765 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:22.521876", "seconds": 22.521876}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 29644, "name": "MainProcess"}, "thread": {"id": 15452, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 22:05:26.765648+05:30", "timestamp": 1755794126.765648}}}
{"text": "2025-08-21 22:05:26.768 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:22.524755", "seconds": 22.524755}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 29644, "name": "MainProcess"}, "thread": {"id": 15452, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 22:05:26.768527+05:30", "timestamp": 1755794126.768527}}}
{"text": "2025-08-21 22:05:26.769 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:22.526015", "seconds": 22.526015}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 29644, "name": "MainProcess"}, "thread": {"id": 15452, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 22:05:26.769787+05:30", "timestamp": 1755794126.769787}}}
{"text": "2025-08-21 22:05:26.772 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:22.528415", "seconds": 22.528415}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 29644, "name": "MainProcess"}, "thread": {"id": 15452, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 22:05:26.772187+05:30", "timestamp": 1755794126.772187}}}
{"text": "2025-08-21 22:05:26.774 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:22.530722", "seconds": 22.530722}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 29644, "name": "MainProcess"}, "thread": {"id": 15452, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 22:05:26.774494+05:30", "timestamp": 1755794126.774494}}}
{"text": "2025-08-21 22:05:26.776 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:22.532463", "seconds": 22.532463}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 29644, "name": "MainProcess"}, "thread": {"id": 15452, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 22:05:26.776235+05:30", "timestamp": 1755794126.776235}}}
{"text": "2025-08-21 22:05:26.779 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:22.535310", "seconds": 22.53531}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 29644, "name": "MainProcess"}, "thread": {"id": 15452, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 22:05:26.779082+05:30", "timestamp": 1755794126.779082}}}
{"text": "2025-08-21 22:05:26.780 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:22.537165", "seconds": 22.537165}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 29644, "name": "MainProcess"}, "thread": {"id": 15452, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 22:05:26.780937+05:30", "timestamp": 1755794126.780937}}}
{"text": "2025-08-21 22:05:28.308 | DEBUG    | app.ws.live:emit_delta:408 - Emitted positions delta: seq=25\n", "record": {"elapsed": {"repr": "0:00:24.064355", "seconds": 24.064355}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "emit_delta", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 408, "message": "Emitted positions delta: seq=25", "module": "live", "name": "app.ws.live", "process": {"id": 29644, "name": "MainProcess"}, "thread": {"id": 29140, "name": "MainThread"}, "time": {"repr": "2025-08-21 22:05:28.308127+05:30", "timestamp": 1755794128.308127}}}
{"text": "2025-08-21 22:05:28.348 | INFO     | app.main:add_trace_id:43 - Request started - Method: POST, Path: /squareoff/pos_001, Trace ID: 45fcb02d-0b02-472d-9630-520ed32547fd\n", "record": {"elapsed": {"repr": "0:00:24.104908", "seconds": 24.104908}, "exception": null, "extra": {}, "file": {"name": "main.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\main.py"}, "function": "add_trace_id", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 43, "message": "Request started - Method: POST, Path: /squareoff/pos_001, Trace ID: 45fcb02d-0b02-472d-9630-520ed32547fd", "module": "main", "name": "app.main", "process": {"id": 29644, "name": "MainProcess"}, "thread": {"id": 29140, "name": "MainThread"}, "time": {"repr": "2025-08-21 22:05:28.348680+05:30", "timestamp": 1755794128.34868}}}
{"text": "2025-08-21 22:05:28.350 | INFO     | app.routes.actions:squareoff_position:21 - Square-off request for position pos_001, quantity: None\n", "record": {"elapsed": {"repr": "0:00:24.107217", "seconds": 24.107217}, "exception": null, "extra": {}, "file": {"name": "actions.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\routes\\actions.py"}, "function": "squareoff_position", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 21, "message": "Square-off request for position pos_001, quantity: None", "module": "actions", "name": "app.routes.actions", "process": {"id": 29644, "name": "MainProcess"}, "thread": {"id": 29140, "name": "MainThread"}, "time": {"repr": "2025-08-21 22:05:28.350989+05:30", "timestamp": 1755794128.350989}}}
{"text": "2025-08-21 22:05:28.351 | INFO     | app.services.dhan_client:squareoff_position_async:618 - Square-off request for position pos_001, quantity: 1596\n", "record": {"elapsed": {"repr": "0:00:24.108081", "seconds": 24.108081}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "squareoff_position_async", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 618, "message": "Square-off request for position pos_001, quantity: 1596", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 29644, "name": "MainProcess"}, "thread": {"id": 29140, "name": "MainThread"}, "time": {"repr": "2025-08-21 22:05:28.351853+05:30", "timestamp": 1755794128.351853}}}
{"text": "2025-08-21 22:05:28.352 | ERROR    | app.services.dhan_client:squareoff_position_async:649 - Error in square-off: 'DhanClient' object has no attribute 'use_mock_data'\n", "record": {"elapsed": {"repr": "0:00:24.109017", "seconds": 24.109017}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "squareoff_position_async", "level": {"icon": "‚ùå", "name": "ERROR", "no": 40}, "line": 649, "message": "Error in square-off: 'DhanClient' object has no attribute 'use_mock_data'", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 29644, "name": "MainProcess"}, "thread": {"id": 29140, "name": "MainThread"}, "time": {"repr": "2025-08-21 22:05:28.352789+05:30", "timestamp": 1755794128.352789}}}
{"text": "2025-08-21 22:05:28.354 | INFO     | app.main:add_trace_id:47 - Request completed - Method: POST, Path: /squareoff/pos_001, Status: 200, Trace ID: 45fcb02d-0b02-472d-9630-520ed32547fd\n", "record": {"elapsed": {"repr": "0:00:24.110239", "seconds": 24.110239}, "exception": null, "extra": {}, "file": {"name": "main.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\main.py"}, "function": "add_trace_id", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 47, "message": "Request completed - Method: POST, Path: /squareoff/pos_001, Status: 200, Trace ID: 45fcb02d-0b02-472d-9630-520ed32547fd", "module": "main", "name": "app.main", "process": {"id": 29644, "name": "MainProcess"}, "thread": {"id": 29140, "name": "MainThread"}, "time": {"repr": "2025-08-21 22:05:28.354011+05:30", "timestamp": 1755794128.354011}}}
{"text": "2025-08-21 22:05:28.437 | INFO     | app.services.dhan_client:get_pnl:489 - Starting accurate P&L calculation\n", "record": {"elapsed": {"repr": "0:00:24.194162", "seconds": 24.194162}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 489, "message": "Starting accurate P&L calculation", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 29644, "name": "MainProcess"}, "thread": {"id": 29140, "name": "MainThread"}, "time": {"repr": "2025-08-21 22:05:28.437934+05:30", "timestamp": 1755794128.437934}}}
{"text": "2025-08-21 22:05:28.439 | INFO     | app.services.dhan_client:get_pnl:491 - Fetched 5 positions\n", "record": {"elapsed": {"repr": "0:00:24.195828", "seconds": 24.195828}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 491, "message": "Fetched 5 positions", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 29644, "name": "MainProcess"}, "thread": {"id": 29140, "name": "MainThread"}, "time": {"repr": "2025-08-21 22:05:28.439600+05:30", "timestamp": 1755794128.4396}}}
{"text": "2025-08-21 22:05:28.441 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for RELIANCE: unrealized=126444.73, today=126444.73\n", "record": {"elapsed": {"repr": "0:00:24.197700", "seconds": 24.1977}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for RELIANCE: unrealized=126444.73, today=126444.73", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 29644, "name": "MainProcess"}, "thread": {"id": 29140, "name": "MainThread"}, "time": {"repr": "2025-08-21 22:05:28.441472+05:30", "timestamp": 1755794128.441472}}}
{"text": "2025-08-21 22:05:28.443 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for TCS: unrealized=11623.95, today=11623.95\n", "record": {"elapsed": {"repr": "0:00:24.200121", "seconds": 24.200121}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for TCS: unrealized=11623.95, today=11623.95", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 29644, "name": "MainProcess"}, "thread": {"id": 29140, "name": "MainThread"}, "time": {"repr": "2025-08-21 22:05:28.443893+05:30", "timestamp": 1755794128.443893}}}
{"text": "2025-08-21 22:05:28.445 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for HDFC: unrealized=1806600.14, today=1806600.14\n", "record": {"elapsed": {"repr": "0:00:24.201480", "seconds": 24.20148}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for HDFC: unrealized=1806600.14, today=1806600.14", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 29644, "name": "MainProcess"}, "thread": {"id": 29140, "name": "MainThread"}, "time": {"repr": "2025-08-21 22:05:28.445252+05:30", "timestamp": 1755794128.445252}}}
{"text": "2025-08-21 22:05:28.447 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for INFY: unrealized=1501814.87, today=1501814.87\n", "record": {"elapsed": {"repr": "0:00:24.204091", "seconds": 24.204091}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for INFY: unrealized=1501814.87, today=1501814.87", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 29644, "name": "MainProcess"}, "thread": {"id": 29140, "name": "MainThread"}, "time": {"repr": "2025-08-21 22:05:28.447863+05:30", "timestamp": 1755794128.447863}}}
{"text": "2025-08-21 22:05:28.450 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for ICICIBANK: unrealized=-1333332.2, today=-1333332.2\n", "record": {"elapsed": {"repr": "0:00:24.206742", "seconds": 24.206742}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for ICICIBANK: unrealized=-1333332.2, today=-1333332.2", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 29644, "name": "MainProcess"}, "thread": {"id": 29140, "name": "MainThread"}, "time": {"repr": "2025-08-21 22:05:28.450514+05:30", "timestamp": 1755794128.450514}}}
{"text": "2025-08-21 22:05:28.452 | INFO     | app.services.dhan_client:get_pnl:545 - Calculated totals - realized: 0.0, unrealized: 2113151.49, day: 2113151.49\n", "record": {"elapsed": {"repr": "0:00:24.208389", "seconds": 24.208389}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 545, "message": "Calculated totals - realized: 0.0, unrealized: 2113151.49, day: 2113151.49", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 29644, "name": "MainProcess"}, "thread": {"id": 29140, "name": "MainThread"}, "time": {"repr": "2025-08-21 22:05:28.452161+05:30", "timestamp": 1755794128.452161}}}
{"text": "2025-08-21 22:05:28.455 | DEBUG    | app.services.dhan_client:get_pnl:554 - PnL consistency check passed: drift=‚Çπ0.00\n", "record": {"elapsed": {"repr": "0:00:24.212106", "seconds": 24.212106}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 554, "message": "PnL consistency check passed: drift=‚Çπ0.00", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 29644, "name": "MainProcess"}, "thread": {"id": 29140, "name": "MainThread"}, "time": {"repr": "2025-08-21 22:05:28.455878+05:30", "timestamp": 1755794128.455878}}}
{"text": "2025-08-21 22:05:28.458 | DEBUG    | app.services.dhan_client:get_pnl:558 - Creating PnLTotals...\n", "record": {"elapsed": {"repr": "0:00:24.214531", "seconds": 24.214531}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 558, "message": "Creating PnLTotals...", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 29644, "name": "MainProcess"}, "thread": {"id": 29140, "name": "MainThread"}, "time": {"repr": "2025-08-21 22:05:28.458303+05:30", "timestamp": 1755794128.458303}}}
{"text": "2025-08-21 22:05:28.460 | DEBUG    | app.services.dhan_client:get_pnl:565 - PnLTotals created successfully\n", "record": {"elapsed": {"repr": "0:00:24.216229", "seconds": 24.216229}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 565, "message": "PnLTotals created successfully", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 29644, "name": "MainProcess"}, "thread": {"id": 29140, "name": "MainThread"}, "time": {"repr": "2025-08-21 22:05:28.460001+05:30", "timestamp": 1755794128.460001}}}
{"text": "2025-08-21 22:05:28.462 | DEBUG    | app.services.dhan_client:get_pnl:574 - Creating PnL model...\n", "record": {"elapsed": {"repr": "0:00:24.218589", "seconds": 24.218589}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 574, "message": "Creating PnL model...", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 29644, "name": "MainProcess"}, "thread": {"id": 29140, "name": "MainThread"}, "time": {"repr": "2025-08-21 22:05:28.462361+05:30", "timestamp": 1755794128.462361}}}
{"text": "2025-08-21 22:05:28.463 | DEBUG    | app.services.dhan_client:get_pnl:575 - Model fields: totals=<class 'app.models.schemas.PnLTotals'>, perSymbol=5, updated_at=2025-08-21 22:05:28.441072+05:30, trading_day=2025-08-21\n", "record": {"elapsed": {"repr": "0:00:24.219984", "seconds": 24.219984}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 575, "message": "Model fields: totals=<class 'app.models.schemas.PnLTotals'>, perSymbol=5, updated_at=2025-08-21 22:05:28.441072+05:30, trading_day=2025-08-21", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 29644, "name": "MainProcess"}, "thread": {"id": 29140, "name": "MainThread"}, "time": {"repr": "2025-08-21 22:05:28.463756+05:30", "timestamp": 1755794128.463756}}}
{"text": "2025-08-21 22:05:28.467 | DEBUG    | app.services.dhan_client:get_pnl:584 - Created PnL model: totals=PnLTotals(realized=0.0, unrealized=2113151.49, day=2113151.49, currency='INR') per_symbol=[PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1596, avg=105.2, ltp=184.43, unrealized=126444.73, today_pnl=126444.73), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=895, avg=965.72, ltp=952.73, unrealized=11623.95, today_pnl=11623.95), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=1697, avg=987.4, ltp=2051.98, unrealized=1806600.14, today_pnl=1806600.14), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=1638, avg=1011.79, ltp=94.93, unrealized=1501814.87, today_pnl=1501814.87), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=1535, avg=1230.09, ltp=361.47, unrealized=-1333332.2, today_pnl=-1333332.2)] updated_at=datetime.datetime(2025, 8, 21, 22, 5, 28, 441072, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))) trading_day='2025-08-21'\n", "record": {"elapsed": {"repr": "0:00:24.223461", "seconds": 24.223461}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 584, "message": "Created PnL model: totals=PnLTotals(realized=0.0, unrealized=2113151.49, day=2113151.49, currency='INR') per_symbol=[PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1596, avg=105.2, ltp=184.43, unrealized=126444.73, today_pnl=126444.73), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=895, avg=965.72, ltp=952.73, unrealized=11623.95, today_pnl=11623.95), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=1697, avg=987.4, ltp=2051.98, unrealized=1806600.14, today_pnl=1806600.14), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=1638, avg=1011.79, ltp=94.93, unrealized=1501814.87, today_pnl=1501814.87), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=1535, avg=1230.09, ltp=361.47, unrealized=-1333332.2, today_pnl=-1333332.2)] updated_at=datetime.datetime(2025, 8, 21, 22, 5, 28, 441072, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))) trading_day='2025-08-21'", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 29644, "name": "MainProcess"}, "thread": {"id": 29140, "name": "MainThread"}, "time": {"repr": "2025-08-21 22:05:28.467233+05:30", "timestamp": 1755794128.467233}}}
{"text": "2025-08-21 22:05:28.470 | DEBUG    | app.services.dhan_client:get_pnl:585 - PnL model fields: {'totals': PnLTotals(realized=0.0, unrealized=2113151.49, day=2113151.49, currency='INR'), 'per_symbol': [PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1596, avg=105.2, ltp=184.43, unrealized=126444.73, today_pnl=126444.73), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=895, avg=965.72, ltp=952.73, unrealized=11623.95, today_pnl=11623.95), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=1697, avg=987.4, ltp=2051.98, unrealized=1806600.14, today_pnl=1806600.14), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=1638, avg=1011.79, ltp=94.93, unrealized=1501814.87, today_pnl=1501814.87), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=1535, avg=1230.09, ltp=361.47, unrealized=-1333332.2, today_pnl=-1333332.2)], 'updated_at': datetime.datetime(2025, 8, 21, 22, 5, 28, 441072, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))), 'trading_day': '2025-08-21'}\n", "record": {"elapsed": {"repr": "0:00:24.226278", "seconds": 24.226278}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 585, "message": "PnL model fields: {'totals': PnLTotals(realized=0.0, unrealized=2113151.49, day=2113151.49, currency='INR'), 'per_symbol': [PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1596, avg=105.2, ltp=184.43, unrealized=126444.73, today_pnl=126444.73), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=895, avg=965.72, ltp=952.73, unrealized=11623.95, today_pnl=11623.95), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=1697, avg=987.4, ltp=2051.98, unrealized=1806600.14, today_pnl=1806600.14), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=1638, avg=1011.79, ltp=94.93, unrealized=1501814.87, today_pnl=1501814.87), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=1535, avg=1230.09, ltp=361.47, unrealized=-1333332.2, today_pnl=-1333332.2)], 'updated_at': datetime.datetime(2025, 8, 21, 22, 5, 28, 441072, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))), 'trading_day': '2025-08-21'}", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 29644, "name": "MainProcess"}, "thread": {"id": 29140, "name": "MainThread"}, "time": {"repr": "2025-08-21 22:05:28.470050+05:30", "timestamp": 1755794128.47005}}}
{"text": "2025-08-21 22:05:28.472 | INFO     | app.services.dhan_client:get_pnl:587 - P&L calculation completed successfully: 5 symbols, unrealized=‚Çπ2113151.49\n", "record": {"elapsed": {"repr": "0:00:24.228636", "seconds": 24.228636}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 587, "message": "P&L calculation completed successfully: 5 symbols, unrealized=‚Çπ2113151.49", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 29644, "name": "MainProcess"}, "thread": {"id": 29140, "name": "MainThread"}, "time": {"repr": "2025-08-21 22:05:28.472408+05:30", "timestamp": 1755794128.472408}}}
{"text": "2025-08-21 22:05:28.474 | DEBUG    | app.ws.live:emit_delta:408 - Emitted pnl delta: seq=26\n", "record": {"elapsed": {"repr": "0:00:24.230862", "seconds": 24.230862}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "emit_delta", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 408, "message": "Emitted pnl delta: seq=26", "module": "live", "name": "app.ws.live", "process": {"id": 29644, "name": "MainProcess"}, "thread": {"id": 29140, "name": "MainThread"}, "time": {"repr": "2025-08-21 22:05:28.474634+05:30", "timestamp": 1755794128.474634}}}
{"text": "2025-08-21 22:05:28.783 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:24.539921", "seconds": 24.539921}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 29644, "name": "MainProcess"}, "thread": {"id": 15452, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 22:05:28.783693+05:30", "timestamp": 1755794128.783693}}}
{"text": "2025-08-21 22:05:28.785 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:24.542192", "seconds": 24.542192}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 29644, "name": "MainProcess"}, "thread": {"id": 15452, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 22:05:28.785964+05:30", "timestamp": 1755794128.785964}}}
{"text": "2025-08-21 22:05:28.787 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:24.543234", "seconds": 24.543234}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 29644, "name": "MainProcess"}, "thread": {"id": 15452, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 22:05:28.787006+05:30", "timestamp": 1755794128.787006}}}
{"text": "2025-08-21 22:05:28.789 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:24.545300", "seconds": 24.5453}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 29644, "name": "MainProcess"}, "thread": {"id": 15452, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 22:05:28.789072+05:30", "timestamp": 1755794128.789072}}}
{"text": "2025-08-21 22:05:28.791 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:24.547498", "seconds": 24.547498}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 29644, "name": "MainProcess"}, "thread": {"id": 15452, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 22:05:28.791270+05:30", "timestamp": 1755794128.79127}}}
{"text": "2025-08-21 22:05:28.793 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:24.549703", "seconds": 24.549703}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 29644, "name": "MainProcess"}, "thread": {"id": 15452, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 22:05:28.793475+05:30", "timestamp": 1755794128.793475}}}
{"text": "2025-08-21 22:05:28.795 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:24.552096", "seconds": 24.552096}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 29644, "name": "MainProcess"}, "thread": {"id": 15452, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 22:05:28.795868+05:30", "timestamp": 1755794128.795868}}}
{"text": "2025-08-21 22:05:28.797 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:24.554018", "seconds": 24.554018}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 29644, "name": "MainProcess"}, "thread": {"id": 15452, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 22:05:28.797790+05:30", "timestamp": 1755794128.79779}}}
{"text": "2025-08-21 22:05:28.799 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:24.556138", "seconds": 24.556138}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 29644, "name": "MainProcess"}, "thread": {"id": 15452, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 22:05:28.799910+05:30", "timestamp": 1755794128.79991}}}
{"text": "2025-08-21 22:05:28.800 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:24.557066", "seconds": 24.557066}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 29644, "name": "MainProcess"}, "thread": {"id": 15452, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 22:05:28.800838+05:30", "timestamp": 1755794128.800838}}}
{"text": "2025-08-21 22:05:29.793 | DEBUG    | app.ws.live:emit_delta:408 - Emitted holdings delta: seq=27\n", "record": {"elapsed": {"repr": "0:00:25.550155", "seconds": 25.550155}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "emit_delta", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 408, "message": "Emitted holdings delta: seq=27", "module": "live", "name": "app.ws.live", "process": {"id": 29644, "name": "MainProcess"}, "thread": {"id": 29140, "name": "MainThread"}, "time": {"repr": "2025-08-21 22:05:29.793927+05:30", "timestamp": 1755794129.793927}}}
{"text": "2025-08-21 22:05:30.038 | INFO     | app.services.dhan_client:get_pnl:489 - Starting accurate P&L calculation\n", "record": {"elapsed": {"repr": "0:00:25.795214", "seconds": 25.795214}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 489, "message": "Starting accurate P&L calculation", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 29644, "name": "MainProcess"}, "thread": {"id": 29140, "name": "MainThread"}, "time": {"repr": "2025-08-21 22:05:30.038986+05:30", "timestamp": 1755794130.038986}}}
{"text": "2025-08-21 22:05:30.040 | INFO     | app.services.dhan_client:get_pnl:491 - Fetched 5 positions\n", "record": {"elapsed": {"repr": "0:00:25.797170", "seconds": 25.79717}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 491, "message": "Fetched 5 positions", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 29644, "name": "MainProcess"}, "thread": {"id": 29140, "name": "MainThread"}, "time": {"repr": "2025-08-21 22:05:30.040942+05:30", "timestamp": 1755794130.040942}}}
{"text": "2025-08-21 22:05:30.042 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for RELIANCE: unrealized=130285.19, today=130285.19\n", "record": {"elapsed": {"repr": "0:00:25.798450", "seconds": 25.79845}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for RELIANCE: unrealized=130285.19, today=130285.19", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 29644, "name": "MainProcess"}, "thread": {"id": 29140, "name": "MainThread"}, "time": {"repr": "2025-08-21 22:05:30.042222+05:30", "timestamp": 1755794130.042222}}}
{"text": "2025-08-21 22:05:30.044 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for TCS: unrealized=4019.51, today=4019.51\n", "record": {"elapsed": {"repr": "0:00:25.800433", "seconds": 25.800433}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for TCS: unrealized=4019.51, today=4019.51", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 29644, "name": "MainProcess"}, "thread": {"id": 29140, "name": "MainThread"}, "time": {"repr": "2025-08-21 22:05:30.044205+05:30", "timestamp": 1755794130.044205}}}
{"text": "2025-08-21 22:05:30.046 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for HDFC: unrealized=1834047.25, today=1834047.25\n", "record": {"elapsed": {"repr": "0:00:25.802376", "seconds": 25.802376}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for HDFC: unrealized=1834047.25, today=1834047.25", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 29644, "name": "MainProcess"}, "thread": {"id": 29140, "name": "MainThread"}, "time": {"repr": "2025-08-21 22:05:30.046148+05:30", "timestamp": 1755794130.046148}}}
{"text": "2025-08-21 22:05:30.049 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for INFY: unrealized=1501561.1, today=1501561.1\n", "record": {"elapsed": {"repr": "0:00:25.805607", "seconds": 25.805607}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for INFY: unrealized=1501561.1, today=1501561.1", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 29644, "name": "MainProcess"}, "thread": {"id": 29140, "name": "MainThread"}, "time": {"repr": "2025-08-21 22:05:30.049379+05:30", "timestamp": 1755794130.049379}}}
{"text": "2025-08-21 22:05:30.051 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for ICICIBANK: unrealized=-1332073.73, today=-1332073.73\n", "record": {"elapsed": {"repr": "0:00:25.807307", "seconds": 25.807307}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for ICICIBANK: unrealized=-1332073.73, today=-1332073.73", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 29644, "name": "MainProcess"}, "thread": {"id": 29140, "name": "MainThread"}, "time": {"repr": "2025-08-21 22:05:30.051079+05:30", "timestamp": 1755794130.051079}}}
{"text": "2025-08-21 22:05:30.052 | INFO     | app.services.dhan_client:get_pnl:545 - Calculated totals - realized: 0.0, unrealized: 2137839.32, day: 2137839.32\n", "record": {"elapsed": {"repr": "0:00:25.808588", "seconds": 25.808588}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 545, "message": "Calculated totals - realized: 0.0, unrealized: 2137839.32, day: 2137839.32", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 29644, "name": "MainProcess"}, "thread": {"id": 29140, "name": "MainThread"}, "time": {"repr": "2025-08-21 22:05:30.052360+05:30", "timestamp": 1755794130.05236}}}
{"text": "2025-08-21 22:05:30.056 | DEBUG    | app.services.dhan_client:get_pnl:554 - PnL consistency check passed: drift=‚Çπ0.00\n", "record": {"elapsed": {"repr": "0:00:25.812812", "seconds": 25.812812}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 554, "message": "PnL consistency check passed: drift=‚Çπ0.00", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 29644, "name": "MainProcess"}, "thread": {"id": 29140, "name": "MainThread"}, "time": {"repr": "2025-08-21 22:05:30.056584+05:30", "timestamp": 1755794130.056584}}}
{"text": "2025-08-21 22:05:30.057 | DEBUG    | app.services.dhan_client:get_pnl:558 - Creating PnLTotals...\n", "record": {"elapsed": {"repr": "0:00:25.814215", "seconds": 25.814215}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 558, "message": "Creating PnLTotals...", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 29644, "name": "MainProcess"}, "thread": {"id": 29140, "name": "MainThread"}, "time": {"repr": "2025-08-21 22:05:30.057987+05:30", "timestamp": 1755794130.057987}}}
{"text": "2025-08-21 22:05:30.059 | DEBUG    | app.services.dhan_client:get_pnl:565 - PnLTotals created successfully\n", "record": {"elapsed": {"repr": "0:00:25.815828", "seconds": 25.815828}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 565, "message": "PnLTotals created successfully", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 29644, "name": "MainProcess"}, "thread": {"id": 29140, "name": "MainThread"}, "time": {"repr": "2025-08-21 22:05:30.059600+05:30", "timestamp": 1755794130.0596}}}
{"text": "2025-08-21 22:05:30.060 | DEBUG    | app.services.dhan_client:get_pnl:574 - Creating PnL model...\n", "record": {"elapsed": {"repr": "0:00:25.817141", "seconds": 25.817141}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 574, "message": "Creating PnL model...", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 29644, "name": "MainProcess"}, "thread": {"id": 29140, "name": "MainThread"}, "time": {"repr": "2025-08-21 22:05:30.060913+05:30", "timestamp": 1755794130.060913}}}
{"text": "2025-08-21 22:05:30.063 | DEBUG    | app.services.dhan_client:get_pnl:575 - Model fields: totals=<class 'app.models.schemas.PnLTotals'>, perSymbol=5, updated_at=2025-08-21 22:05:30.042053+05:30, trading_day=2025-08-21\n", "record": {"elapsed": {"repr": "0:00:25.819509", "seconds": 25.819509}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 575, "message": "Model fields: totals=<class 'app.models.schemas.PnLTotals'>, perSymbol=5, updated_at=2025-08-21 22:05:30.042053+05:30, trading_day=2025-08-21", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 29644, "name": "MainProcess"}, "thread": {"id": 29140, "name": "MainThread"}, "time": {"repr": "2025-08-21 22:05:30.063281+05:30", "timestamp": 1755794130.063281}}}
{"text": "2025-08-21 22:05:30.066 | DEBUG    | app.services.dhan_client:get_pnl:584 - Created PnL model: totals=PnLTotals(realized=0.0, unrealized=2137839.32, day=2137839.32, currency='INR') per_symbol=[PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1596, avg=105.2, ltp=186.83, unrealized=130285.19, today_pnl=130285.19), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=895, avg=965.72, ltp=961.23, unrealized=4019.51, today_pnl=4019.51), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=1697, avg=987.4, ltp=2068.16, unrealized=1834047.25, today_pnl=1834047.25), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=1638, avg=1011.79, ltp=95.09, unrealized=1501561.1, today_pnl=1501561.1), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=1535, avg=1230.09, ltp=362.29, unrealized=-1332073.73, today_pnl=-1332073.73)] updated_at=datetime.datetime(2025, 8, 21, 22, 5, 30, 42053, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))) trading_day='2025-08-21'\n", "record": {"elapsed": {"repr": "0:00:25.822363", "seconds": 25.822363}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 584, "message": "Created PnL model: totals=PnLTotals(realized=0.0, unrealized=2137839.32, day=2137839.32, currency='INR') per_symbol=[PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1596, avg=105.2, ltp=186.83, unrealized=130285.19, today_pnl=130285.19), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=895, avg=965.72, ltp=961.23, unrealized=4019.51, today_pnl=4019.51), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=1697, avg=987.4, ltp=2068.16, unrealized=1834047.25, today_pnl=1834047.25), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=1638, avg=1011.79, ltp=95.09, unrealized=1501561.1, today_pnl=1501561.1), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=1535, avg=1230.09, ltp=362.29, unrealized=-1332073.73, today_pnl=-1332073.73)] updated_at=datetime.datetime(2025, 8, 21, 22, 5, 30, 42053, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))) trading_day='2025-08-21'", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 29644, "name": "MainProcess"}, "thread": {"id": 29140, "name": "MainThread"}, "time": {"repr": "2025-08-21 22:05:30.066135+05:30", "timestamp": 1755794130.066135}}}
{"text": "2025-08-21 22:05:30.070 | DEBUG    | app.services.dhan_client:get_pnl:585 - PnL model fields: {'totals': PnLTotals(realized=0.0, unrealized=2137839.32, day=2137839.32, currency='INR'), 'per_symbol': [PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1596, avg=105.2, ltp=186.83, unrealized=130285.19, today_pnl=130285.19), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=895, avg=965.72, ltp=961.23, unrealized=4019.51, today_pnl=4019.51), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=1697, avg=987.4, ltp=2068.16, unrealized=1834047.25, today_pnl=1834047.25), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=1638, avg=1011.79, ltp=95.09, unrealized=1501561.1, today_pnl=1501561.1), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=1535, avg=1230.09, ltp=362.29, unrealized=-1332073.73, today_pnl=-1332073.73)], 'updated_at': datetime.datetime(2025, 8, 21, 22, 5, 30, 42053, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))), 'trading_day': '2025-08-21'}\n", "record": {"elapsed": {"repr": "0:00:25.826410", "seconds": 25.82641}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 585, "message": "PnL model fields: {'totals': PnLTotals(realized=0.0, unrealized=2137839.32, day=2137839.32, currency='INR'), 'per_symbol': [PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1596, avg=105.2, ltp=186.83, unrealized=130285.19, today_pnl=130285.19), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=895, avg=965.72, ltp=961.23, unrealized=4019.51, today_pnl=4019.51), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=1697, avg=987.4, ltp=2068.16, unrealized=1834047.25, today_pnl=1834047.25), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=1638, avg=1011.79, ltp=95.09, unrealized=1501561.1, today_pnl=1501561.1), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=1535, avg=1230.09, ltp=362.29, unrealized=-1332073.73, today_pnl=-1332073.73)], 'updated_at': datetime.datetime(2025, 8, 21, 22, 5, 30, 42053, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))), 'trading_day': '2025-08-21'}", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 29644, "name": "MainProcess"}, "thread": {"id": 29140, "name": "MainThread"}, "time": {"repr": "2025-08-21 22:05:30.070182+05:30", "timestamp": 1755794130.070182}}}
{"text": "2025-08-21 22:05:30.072 | INFO     | app.services.dhan_client:get_pnl:587 - P&L calculation completed successfully: 5 symbols, unrealized=‚Çπ2137839.32\n", "record": {"elapsed": {"repr": "0:00:25.829176", "seconds": 25.829176}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 587, "message": "P&L calculation completed successfully: 5 symbols, unrealized=‚Çπ2137839.32", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 29644, "name": "MainProcess"}, "thread": {"id": 29140, "name": "MainThread"}, "time": {"repr": "2025-08-21 22:05:30.072948+05:30", "timestamp": 1755794130.072948}}}
{"text": "2025-08-21 22:05:30.074 | DEBUG    | app.ws.live:emit_delta:408 - Emitted pnl delta: seq=28\n", "record": {"elapsed": {"repr": "0:00:25.830969", "seconds": 25.830969}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "emit_delta", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 408, "message": "Emitted pnl delta: seq=28", "module": "live", "name": "app.ws.live", "process": {"id": 29644, "name": "MainProcess"}, "thread": {"id": 29140, "name": "MainThread"}, "time": {"repr": "2025-08-21 22:05:30.074741+05:30", "timestamp": 1755794130.074741}}}
{"text": "2025-08-21 22:05:30.291 | DEBUG    | app.ws.live:emit_delta:408 - Emitted positions delta: seq=29\n", "record": {"elapsed": {"repr": "0:00:26.047767", "seconds": 26.047767}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "emit_delta", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 408, "message": "Emitted positions delta: seq=29", "module": "live", "name": "app.ws.live", "process": {"id": 29644, "name": "MainProcess"}, "thread": {"id": 29140, "name": "MainThread"}, "time": {"repr": "2025-08-21 22:05:30.291539+05:30", "timestamp": 1755794130.291539}}}
{"text": "2025-08-21 22:05:30.802 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:26.558618", "seconds": 26.558618}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 29644, "name": "MainProcess"}, "thread": {"id": 15452, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 22:05:30.802390+05:30", "timestamp": 1755794130.80239}}}
{"text": "2025-08-21 22:05:30.803 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:26.559532", "seconds": 26.559532}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 29644, "name": "MainProcess"}, "thread": {"id": 15452, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 22:05:30.803304+05:30", "timestamp": 1755794130.803304}}}
{"text": "2025-08-21 22:05:30.804 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:26.560267", "seconds": 26.560267}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 29644, "name": "MainProcess"}, "thread": {"id": 15452, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 22:05:30.804039+05:30", "timestamp": 1755794130.804039}}}
{"text": "2025-08-21 22:05:30.804 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:26.560874", "seconds": 26.560874}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 29644, "name": "MainProcess"}, "thread": {"id": 15452, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 22:05:30.804646+05:30", "timestamp": 1755794130.804646}}}
{"text": "2025-08-21 22:05:30.805 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:26.561516", "seconds": 26.561516}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 29644, "name": "MainProcess"}, "thread": {"id": 15452, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 22:05:30.805288+05:30", "timestamp": 1755794130.805288}}}
{"text": "2025-08-21 22:05:30.805 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:26.562141", "seconds": 26.562141}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 29644, "name": "MainProcess"}, "thread": {"id": 15452, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 22:05:30.805913+05:30", "timestamp": 1755794130.805913}}}
{"text": "2025-08-21 22:05:30.806 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:26.562775", "seconds": 26.562775}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 29644, "name": "MainProcess"}, "thread": {"id": 15452, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 22:05:30.806547+05:30", "timestamp": 1755794130.806547}}}
{"text": "2025-08-21 22:05:30.807 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:26.563357", "seconds": 26.563357}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 29644, "name": "MainProcess"}, "thread": {"id": 15452, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 22:05:30.807129+05:30", "timestamp": 1755794130.807129}}}
{"text": "2025-08-21 22:05:30.807 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:26.563971", "seconds": 26.563971}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 29644, "name": "MainProcess"}, "thread": {"id": 15452, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 22:05:30.807743+05:30", "timestamp": 1755794130.807743}}}
{"text": "2025-08-21 22:05:30.808 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:26.564610", "seconds": 26.56461}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 29644, "name": "MainProcess"}, "thread": {"id": 15452, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 22:05:30.808382+05:30", "timestamp": 1755794130.808382}}}
{"text": "2025-08-21 22:05:31.938 | INFO     | app.services.dhan_client:get_pnl:489 - Starting accurate P&L calculation\n", "record": {"elapsed": {"repr": "0:00:27.694814", "seconds": 27.694814}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 489, "message": "Starting accurate P&L calculation", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 29644, "name": "MainProcess"}, "thread": {"id": 29140, "name": "MainThread"}, "time": {"repr": "2025-08-21 22:05:31.938586+05:30", "timestamp": 1755794131.938586}}}
{"text": "2025-08-21 22:05:31.939 | INFO     | app.services.dhan_client:get_pnl:491 - Fetched 5 positions\n", "record": {"elapsed": {"repr": "0:00:27.695660", "seconds": 27.69566}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 491, "message": "Fetched 5 positions", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 29644, "name": "MainProcess"}, "thread": {"id": 29140, "name": "MainThread"}, "time": {"repr": "2025-08-21 22:05:31.939432+05:30", "timestamp": 1755794131.939432}}}
{"text": "2025-08-21 22:05:31.940 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for RELIANCE: unrealized=126544.62, today=126544.62\n", "record": {"elapsed": {"repr": "0:00:27.696361", "seconds": 27.696361}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for RELIANCE: unrealized=126544.62, today=126544.62", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 29644, "name": "MainProcess"}, "thread": {"id": 29140, "name": "MainThread"}, "time": {"repr": "2025-08-21 22:05:31.940133+05:30", "timestamp": 1755794131.940133}}}
{"text": "2025-08-21 22:05:31.940 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for TCS: unrealized=-11164.07, today=-11164.07\n", "record": {"elapsed": {"repr": "0:00:27.696989", "seconds": 27.696989}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for TCS: unrealized=-11164.07, today=-11164.07", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 29644, "name": "MainProcess"}, "thread": {"id": 29140, "name": "MainThread"}, "time": {"repr": "2025-08-21 22:05:31.940761+05:30", "timestamp": 1755794131.940761}}}
{"text": "2025-08-21 22:05:31.941 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for HDFC: unrealized=1896533.57, today=1896533.57\n", "record": {"elapsed": {"repr": "0:00:27.697633", "seconds": 27.697633}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for HDFC: unrealized=1896533.57, today=1896533.57", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 29644, "name": "MainProcess"}, "thread": {"id": 29140, "name": "MainThread"}, "time": {"repr": "2025-08-21 22:05:31.941405+05:30", "timestamp": 1755794131.941405}}}
{"text": "2025-08-21 22:05:31.942 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for INFY: unrealized=1499953.02, today=1499953.02\n", "record": {"elapsed": {"repr": "0:00:27.698264", "seconds": 27.698264}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for INFY: unrealized=1499953.02, today=1499953.02", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 29644, "name": "MainProcess"}, "thread": {"id": 29140, "name": "MainThread"}, "time": {"repr": "2025-08-21 22:05:31.942036+05:30", "timestamp": 1755794131.942036}}}
{"text": "2025-08-21 22:05:31.942 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for ICICIBANK: unrealized=-1325625.27, today=-1325625.27\n", "record": {"elapsed": {"repr": "0:00:27.699204", "seconds": 27.699204}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for ICICIBANK: unrealized=-1325625.27, today=-1325625.27", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 29644, "name": "MainProcess"}, "thread": {"id": 29140, "name": "MainThread"}, "time": {"repr": "2025-08-21 22:05:31.942976+05:30", "timestamp": 1755794131.942976}}}
{"text": "2025-08-21 22:05:31.943 | INFO     | app.services.dhan_client:get_pnl:545 - Calculated totals - realized: 0.0, unrealized: 2186241.87, day: 2186241.87\n", "record": {"elapsed": {"repr": "0:00:27.699904", "seconds": 27.699904}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 545, "message": "Calculated totals - realized: 0.0, unrealized: 2186241.87, day: 2186241.87", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 29644, "name": "MainProcess"}, "thread": {"id": 29140, "name": "MainThread"}, "time": {"repr": "2025-08-21 22:05:31.943676+05:30", "timestamp": 1755794131.943676}}}
{"text": "2025-08-21 22:05:31.944 | DEBUG    | app.services.dhan_client:get_pnl:554 - PnL consistency check passed: drift=‚Çπ0.00\n", "record": {"elapsed": {"repr": "0:00:27.700545", "seconds": 27.700545}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 554, "message": "PnL consistency check passed: drift=‚Çπ0.00", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 29644, "name": "MainProcess"}, "thread": {"id": 29140, "name": "MainThread"}, "time": {"repr": "2025-08-21 22:05:31.944317+05:30", "timestamp": 1755794131.944317}}}
{"text": "2025-08-21 22:05:31.945 | DEBUG    | app.services.dhan_client:get_pnl:558 - Creating PnLTotals...\n", "record": {"elapsed": {"repr": "0:00:27.701239", "seconds": 27.701239}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 558, "message": "Creating PnLTotals...", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 29644, "name": "MainProcess"}, "thread": {"id": 29140, "name": "MainThread"}, "time": {"repr": "2025-08-21 22:05:31.945011+05:30", "timestamp": 1755794131.945011}}}
{"text": "2025-08-21 22:05:31.945 | DEBUG    | app.services.dhan_client:get_pnl:565 - PnLTotals created successfully\n", "record": {"elapsed": {"repr": "0:00:27.701917", "seconds": 27.701917}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 565, "message": "PnLTotals created successfully", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 29644, "name": "MainProcess"}, "thread": {"id": 29140, "name": "MainThread"}, "time": {"repr": "2025-08-21 22:05:31.945689+05:30", "timestamp": 1755794131.945689}}}
{"text": "2025-08-21 22:05:31.946 | DEBUG    | app.services.dhan_client:get_pnl:574 - Creating PnL model...\n", "record": {"elapsed": {"repr": "0:00:27.702650", "seconds": 27.70265}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 574, "message": "Creating PnL model...", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 29644, "name": "MainProcess"}, "thread": {"id": 29140, "name": "MainThread"}, "time": {"repr": "2025-08-21 22:05:31.946422+05:30", "timestamp": 1755794131.946422}}}
{"text": "2025-08-21 22:05:31.947 | DEBUG    | app.services.dhan_client:get_pnl:575 - Model fields: totals=<class 'app.models.schemas.PnLTotals'>, perSymbol=5, updated_at=2025-08-21 22:05:31.940044+05:30, trading_day=2025-08-21\n", "record": {"elapsed": {"repr": "0:00:27.703392", "seconds": 27.703392}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 575, "message": "Model fields: totals=<class 'app.models.schemas.PnLTotals'>, perSymbol=5, updated_at=2025-08-21 22:05:31.940044+05:30, trading_day=2025-08-21", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 29644, "name": "MainProcess"}, "thread": {"id": 29140, "name": "MainThread"}, "time": {"repr": "2025-08-21 22:05:31.947164+05:30", "timestamp": 1755794131.947164}}}
{"text": "2025-08-21 22:05:31.948 | DEBUG    | app.services.dhan_client:get_pnl:584 - Created PnL model: totals=PnLTotals(realized=0.0, unrealized=2186241.87, day=2186241.87, currency='INR') per_symbol=[PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1596, avg=105.2, ltp=184.49, unrealized=126544.62, today_pnl=126544.62), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=895, avg=965.72, ltp=978.19, unrealized=-11164.07, today_pnl=-11164.07), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=1697, avg=987.4, ltp=2104.98, unrealized=1896533.57, today_pnl=1896533.57), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=1638, avg=1011.79, ltp=96.07, unrealized=1499953.02, today_pnl=1499953.02), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=1535, avg=1230.09, ltp=366.49, unrealized=-1325625.27, today_pnl=-1325625.27)] updated_at=datetime.datetime(2025, 8, 21, 22, 5, 31, 940044, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))) trading_day='2025-08-21'\n", "record": {"elapsed": {"repr": "0:00:27.704539", "seconds": 27.704539}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 584, "message": "Created PnL model: totals=PnLTotals(realized=0.0, unrealized=2186241.87, day=2186241.87, currency='INR') per_symbol=[PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1596, avg=105.2, ltp=184.49, unrealized=126544.62, today_pnl=126544.62), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=895, avg=965.72, ltp=978.19, unrealized=-11164.07, today_pnl=-11164.07), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=1697, avg=987.4, ltp=2104.98, unrealized=1896533.57, today_pnl=1896533.57), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=1638, avg=1011.79, ltp=96.07, unrealized=1499953.02, today_pnl=1499953.02), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=1535, avg=1230.09, ltp=366.49, unrealized=-1325625.27, today_pnl=-1325625.27)] updated_at=datetime.datetime(2025, 8, 21, 22, 5, 31, 940044, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))) trading_day='2025-08-21'", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 29644, "name": "MainProcess"}, "thread": {"id": 29140, "name": "MainThread"}, "time": {"repr": "2025-08-21 22:05:31.948311+05:30", "timestamp": 1755794131.948311}}}
{"text": "2025-08-21 22:05:31.949 | DEBUG    | app.services.dhan_client:get_pnl:585 - PnL model fields: {'totals': PnLTotals(realized=0.0, unrealized=2186241.87, day=2186241.87, currency='INR'), 'per_symbol': [PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1596, avg=105.2, ltp=184.49, unrealized=126544.62, today_pnl=126544.62), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=895, avg=965.72, ltp=978.19, unrealized=-11164.07, today_pnl=-11164.07), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=1697, avg=987.4, ltp=2104.98, unrealized=1896533.57, today_pnl=1896533.57), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=1638, avg=1011.79, ltp=96.07, unrealized=1499953.02, today_pnl=1499953.02), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=1535, avg=1230.09, ltp=366.49, unrealized=-1325625.27, today_pnl=-1325625.27)], 'updated_at': datetime.datetime(2025, 8, 21, 22, 5, 31, 940044, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))), 'trading_day': '2025-08-21'}\n", "record": {"elapsed": {"repr": "0:00:27.705819", "seconds": 27.705819}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 585, "message": "PnL model fields: {'totals': PnLTotals(realized=0.0, unrealized=2186241.87, day=2186241.87, currency='INR'), 'per_symbol': [PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1596, avg=105.2, ltp=184.49, unrealized=126544.62, today_pnl=126544.62), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=895, avg=965.72, ltp=978.19, unrealized=-11164.07, today_pnl=-11164.07), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=1697, avg=987.4, ltp=2104.98, unrealized=1896533.57, today_pnl=1896533.57), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=1638, avg=1011.79, ltp=96.07, unrealized=1499953.02, today_pnl=1499953.02), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=1535, avg=1230.09, ltp=366.49, unrealized=-1325625.27, today_pnl=-1325625.27)], 'updated_at': datetime.datetime(2025, 8, 21, 22, 5, 31, 940044, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))), 'trading_day': '2025-08-21'}", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 29644, "name": "MainProcess"}, "thread": {"id": 29140, "name": "MainThread"}, "time": {"repr": "2025-08-21 22:05:31.949591+05:30", "timestamp": 1755794131.949591}}}
{"text": "2025-08-21 22:05:31.950 | INFO     | app.services.dhan_client:get_pnl:587 - P&L calculation completed successfully: 5 symbols, unrealized=‚Çπ2186241.87\n", "record": {"elapsed": {"repr": "0:00:27.706771", "seconds": 27.706771}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 587, "message": "P&L calculation completed successfully: 5 symbols, unrealized=‚Çπ2186241.87", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 29644, "name": "MainProcess"}, "thread": {"id": 29140, "name": "MainThread"}, "time": {"repr": "2025-08-21 22:05:31.950543+05:30", "timestamp": 1755794131.950543}}}
{"text": "2025-08-21 22:05:31.951 | DEBUG    | app.ws.live:emit_delta:408 - Emitted pnl delta: seq=30\n", "record": {"elapsed": {"repr": "0:00:27.707836", "seconds": 27.707836}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "emit_delta", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 408, "message": "Emitted pnl delta: seq=30", "module": "live", "name": "app.ws.live", "process": {"id": 29644, "name": "MainProcess"}, "thread": {"id": 29140, "name": "MainThread"}, "time": {"repr": "2025-08-21 22:05:31.951608+05:30", "timestamp": 1755794131.951608}}}
{"text": "2025-08-21 22:05:32.277 | DEBUG    | app.ws.live:emit_delta:408 - Emitted positions delta: seq=31\n", "record": {"elapsed": {"repr": "0:00:28.033308", "seconds": 28.033308}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "emit_delta", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 408, "message": "Emitted positions delta: seq=31", "module": "live", "name": "app.ws.live", "process": {"id": 29644, "name": "MainProcess"}, "thread": {"id": 29140, "name": "MainThread"}, "time": {"repr": "2025-08-21 22:05:32.277080+05:30", "timestamp": 1755794132.27708}}}
{"text": "2025-08-21 22:05:32.809 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:28.566059", "seconds": 28.566059}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 29644, "name": "MainProcess"}, "thread": {"id": 15452, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 22:05:32.809831+05:30", "timestamp": 1755794132.809831}}}
{"text": "2025-08-21 22:05:32.812 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:28.569073", "seconds": 28.569073}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 29644, "name": "MainProcess"}, "thread": {"id": 15452, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 22:05:32.812845+05:30", "timestamp": 1755794132.812845}}}
{"text": "2025-08-21 22:05:32.816 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:28.572804", "seconds": 28.572804}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 29644, "name": "MainProcess"}, "thread": {"id": 15452, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 22:05:32.816576+05:30", "timestamp": 1755794132.816576}}}
{"text": "2025-08-21 22:05:32.818 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:28.575106", "seconds": 28.575106}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 29644, "name": "MainProcess"}, "thread": {"id": 15452, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 22:05:32.818878+05:30", "timestamp": 1755794132.818878}}}
{"text": "2025-08-21 22:05:32.821 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:28.577567", "seconds": 28.577567}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 29644, "name": "MainProcess"}, "thread": {"id": 15452, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 22:05:32.821339+05:30", "timestamp": 1755794132.821339}}}
{"text": "2025-08-21 22:05:32.823 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:28.579603", "seconds": 28.579603}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 29644, "name": "MainProcess"}, "thread": {"id": 15452, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 22:05:32.823375+05:30", "timestamp": 1755794132.823375}}}
{"text": "2025-08-21 22:05:32.827 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:28.583473", "seconds": 28.583473}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 29644, "name": "MainProcess"}, "thread": {"id": 15452, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 22:05:32.827245+05:30", "timestamp": 1755794132.827245}}}
{"text": "2025-08-21 22:05:32.830 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:28.586508", "seconds": 28.586508}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 29644, "name": "MainProcess"}, "thread": {"id": 15452, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 22:05:32.830280+05:30", "timestamp": 1755794132.83028}}}
{"text": "2025-08-21 22:05:32.832 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:28.588625", "seconds": 28.588625}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 29644, "name": "MainProcess"}, "thread": {"id": 15452, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 22:05:32.832397+05:30", "timestamp": 1755794132.832397}}}
{"text": "2025-08-21 22:05:32.834 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:28.590736", "seconds": 28.590736}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 29644, "name": "MainProcess"}, "thread": {"id": 15452, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 22:05:32.834508+05:30", "timestamp": 1755794132.834508}}}
{"text": "2025-08-21 22:05:33.759 | INFO     | app.services.dhan_client:get_pnl:489 - Starting accurate P&L calculation\n", "record": {"elapsed": {"repr": "0:00:29.515229", "seconds": 29.515229}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 489, "message": "Starting accurate P&L calculation", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 29644, "name": "MainProcess"}, "thread": {"id": 29140, "name": "MainThread"}, "time": {"repr": "2025-08-21 22:05:33.759001+05:30", "timestamp": 1755794133.759001}}}
{"text": "2025-08-21 22:05:33.760 | INFO     | app.services.dhan_client:get_pnl:491 - Fetched 5 positions\n", "record": {"elapsed": {"repr": "0:00:29.516395", "seconds": 29.516395}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 491, "message": "Fetched 5 positions", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 29644, "name": "MainProcess"}, "thread": {"id": 29140, "name": "MainThread"}, "time": {"repr": "2025-08-21 22:05:33.760167+05:30", "timestamp": 1755794133.760167}}}
{"text": "2025-08-21 22:05:33.761 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for RELIANCE: unrealized=129905.43, today=129905.43\n", "record": {"elapsed": {"repr": "0:00:29.517244", "seconds": 29.517244}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for RELIANCE: unrealized=129905.43, today=129905.43", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 29644, "name": "MainProcess"}, "thread": {"id": 29140, "name": "MainThread"}, "time": {"repr": "2025-08-21 22:05:33.761016+05:30", "timestamp": 1755794133.761016}}}
{"text": "2025-08-21 22:05:33.761 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for TCS: unrealized=-4796.9, today=-4796.9\n", "record": {"elapsed": {"repr": "0:00:29.517929", "seconds": 29.517929}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for TCS: unrealized=-4796.9, today=-4796.9", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 29644, "name": "MainProcess"}, "thread": {"id": 29140, "name": "MainThread"}, "time": {"repr": "2025-08-21 22:05:33.761701+05:30", "timestamp": 1755794133.761701}}}
{"text": "2025-08-21 22:05:33.762 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for HDFC: unrealized=1867303.72, today=1867303.72\n", "record": {"elapsed": {"repr": "0:00:29.518849", "seconds": 29.518849}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for HDFC: unrealized=1867303.72, today=1867303.72", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 29644, "name": "MainProcess"}, "thread": {"id": 29140, "name": "MainThread"}, "time": {"repr": "2025-08-21 22:05:33.762621+05:30", "timestamp": 1755794133.762621}}}
{"text": "2025-08-21 22:05:33.763 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for INFY: unrealized=1501165.44, today=1501165.44\n", "record": {"elapsed": {"repr": "0:00:29.519695", "seconds": 29.519695}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for INFY: unrealized=1501165.44, today=1501165.44", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 29644, "name": "MainProcess"}, "thread": {"id": 29140, "name": "MainThread"}, "time": {"repr": "2025-08-21 22:05:33.763467+05:30", "timestamp": 1755794133.763467}}}
{"text": "2025-08-21 22:05:33.764 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for ICICIBANK: unrealized=-1318149.27, today=-1318149.27\n", "record": {"elapsed": {"repr": "0:00:29.520666", "seconds": 29.520666}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for ICICIBANK: unrealized=-1318149.27, today=-1318149.27", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 29644, "name": "MainProcess"}, "thread": {"id": 29140, "name": "MainThread"}, "time": {"repr": "2025-08-21 22:05:33.764438+05:30", "timestamp": 1755794133.764438}}}
{"text": "2025-08-21 22:05:33.765 | INFO     | app.services.dhan_client:get_pnl:545 - Calculated totals - realized: 0.0, unrealized: 2175428.42, day: 2175428.42\n", "record": {"elapsed": {"repr": "0:00:29.521423", "seconds": 29.521423}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 545, "message": "Calculated totals - realized: 0.0, unrealized: 2175428.42, day: 2175428.42", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 29644, "name": "MainProcess"}, "thread": {"id": 29140, "name": "MainThread"}, "time": {"repr": "2025-08-21 22:05:33.765195+05:30", "timestamp": 1755794133.765195}}}
{"text": "2025-08-21 22:05:33.765 | DEBUG    | app.services.dhan_client:get_pnl:554 - PnL consistency check passed: drift=‚Çπ0.00\n", "record": {"elapsed": {"repr": "0:00:29.522223", "seconds": 29.522223}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 554, "message": "PnL consistency check passed: drift=‚Çπ0.00", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 29644, "name": "MainProcess"}, "thread": {"id": 29140, "name": "MainThread"}, "time": {"repr": "2025-08-21 22:05:33.765995+05:30", "timestamp": 1755794133.765995}}}
{"text": "2025-08-21 22:05:33.766 | DEBUG    | app.services.dhan_client:get_pnl:558 - Creating PnLTotals...\n", "record": {"elapsed": {"repr": "0:00:29.523113", "seconds": 29.523113}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 558, "message": "Creating PnLTotals...", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 29644, "name": "MainProcess"}, "thread": {"id": 29140, "name": "MainThread"}, "time": {"repr": "2025-08-21 22:05:33.766885+05:30", "timestamp": 1755794133.766885}}}
{"text": "2025-08-21 22:05:33.767 | DEBUG    | app.services.dhan_client:get_pnl:565 - PnLTotals created successfully\n", "record": {"elapsed": {"repr": "0:00:29.523961", "seconds": 29.523961}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 565, "message": "PnLTotals created successfully", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 29644, "name": "MainProcess"}, "thread": {"id": 29140, "name": "MainThread"}, "time": {"repr": "2025-08-21 22:05:33.767733+05:30", "timestamp": 1755794133.767733}}}
{"text": "2025-08-21 22:05:33.768 | DEBUG    | app.services.dhan_client:get_pnl:574 - Creating PnL model...\n", "record": {"elapsed": {"repr": "0:00:29.524789", "seconds": 29.524789}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 574, "message": "Creating PnL model...", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 29644, "name": "MainProcess"}, "thread": {"id": 29140, "name": "MainThread"}, "time": {"repr": "2025-08-21 22:05:33.768561+05:30", "timestamp": 1755794133.768561}}}
{"text": "2025-08-21 22:05:33.769 | DEBUG    | app.services.dhan_client:get_pnl:575 - Model fields: totals=<class 'app.models.schemas.PnLTotals'>, perSymbol=5, updated_at=2025-08-21 22:05:33.760913+05:30, trading_day=2025-08-21\n", "record": {"elapsed": {"repr": "0:00:29.525649", "seconds": 29.525649}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 575, "message": "Model fields: totals=<class 'app.models.schemas.PnLTotals'>, perSymbol=5, updated_at=2025-08-21 22:05:33.760913+05:30, trading_day=2025-08-21", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 29644, "name": "MainProcess"}, "thread": {"id": 29140, "name": "MainThread"}, "time": {"repr": "2025-08-21 22:05:33.769421+05:30", "timestamp": 1755794133.769421}}}
{"text": "2025-08-21 22:05:33.770 | DEBUG    | app.services.dhan_client:get_pnl:584 - Created PnL model: totals=PnLTotals(realized=0.0, unrealized=2175428.42, day=2175428.42, currency='INR') per_symbol=[PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1596, avg=105.2, ltp=186.59, unrealized=129905.43, today_pnl=129905.43), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=895, avg=965.72, ltp=971.08, unrealized=-4796.9, today_pnl=-4796.9), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=1697, avg=987.4, ltp=2087.76, unrealized=1867303.72, today_pnl=1867303.72), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=1638, avg=1011.79, ltp=95.33, unrealized=1501165.44, today_pnl=1501165.44), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=1535, avg=1230.09, ltp=371.36, unrealized=-1318149.27, today_pnl=-1318149.27)] updated_at=datetime.datetime(2025, 8, 21, 22, 5, 33, 760913, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))) trading_day='2025-08-21'\n", "record": {"elapsed": {"repr": "0:00:29.526611", "seconds": 29.526611}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 584, "message": "Created PnL model: totals=PnLTotals(realized=0.0, unrealized=2175428.42, day=2175428.42, currency='INR') per_symbol=[PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1596, avg=105.2, ltp=186.59, unrealized=129905.43, today_pnl=129905.43), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=895, avg=965.72, ltp=971.08, unrealized=-4796.9, today_pnl=-4796.9), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=1697, avg=987.4, ltp=2087.76, unrealized=1867303.72, today_pnl=1867303.72), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=1638, avg=1011.79, ltp=95.33, unrealized=1501165.44, today_pnl=1501165.44), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=1535, avg=1230.09, ltp=371.36, unrealized=-1318149.27, today_pnl=-1318149.27)] updated_at=datetime.datetime(2025, 8, 21, 22, 5, 33, 760913, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))) trading_day='2025-08-21'", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 29644, "name": "MainProcess"}, "thread": {"id": 29140, "name": "MainThread"}, "time": {"repr": "2025-08-21 22:05:33.770383+05:30", "timestamp": 1755794133.770383}}}
{"text": "2025-08-21 22:05:33.771 | DEBUG    | app.services.dhan_client:get_pnl:585 - PnL model fields: {'totals': PnLTotals(realized=0.0, unrealized=2175428.42, day=2175428.42, currency='INR'), 'per_symbol': [PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1596, avg=105.2, ltp=186.59, unrealized=129905.43, today_pnl=129905.43), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=895, avg=965.72, ltp=971.08, unrealized=-4796.9, today_pnl=-4796.9), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=1697, avg=987.4, ltp=2087.76, unrealized=1867303.72, today_pnl=1867303.72), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=1638, avg=1011.79, ltp=95.33, unrealized=1501165.44, today_pnl=1501165.44), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=1535, avg=1230.09, ltp=371.36, unrealized=-1318149.27, today_pnl=-1318149.27)], 'updated_at': datetime.datetime(2025, 8, 21, 22, 5, 33, 760913, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))), 'trading_day': '2025-08-21'}\n", "record": {"elapsed": {"repr": "0:00:29.527721", "seconds": 29.527721}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 585, "message": "PnL model fields: {'totals': PnLTotals(realized=0.0, unrealized=2175428.42, day=2175428.42, currency='INR'), 'per_symbol': [PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1596, avg=105.2, ltp=186.59, unrealized=129905.43, today_pnl=129905.43), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=895, avg=965.72, ltp=971.08, unrealized=-4796.9, today_pnl=-4796.9), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=1697, avg=987.4, ltp=2087.76, unrealized=1867303.72, today_pnl=1867303.72), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=1638, avg=1011.79, ltp=95.33, unrealized=1501165.44, today_pnl=1501165.44), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=1535, avg=1230.09, ltp=371.36, unrealized=-1318149.27, today_pnl=-1318149.27)], 'updated_at': datetime.datetime(2025, 8, 21, 22, 5, 33, 760913, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))), 'trading_day': '2025-08-21'}", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 29644, "name": "MainProcess"}, "thread": {"id": 29140, "name": "MainThread"}, "time": {"repr": "2025-08-21 22:05:33.771493+05:30", "timestamp": 1755794133.771493}}}
{"text": "2025-08-21 22:05:33.772 | INFO     | app.services.dhan_client:get_pnl:587 - P&L calculation completed successfully: 5 symbols, unrealized=‚Çπ2175428.42\n", "record": {"elapsed": {"repr": "0:00:29.528744", "seconds": 29.528744}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 587, "message": "P&L calculation completed successfully: 5 symbols, unrealized=‚Çπ2175428.42", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 29644, "name": "MainProcess"}, "thread": {"id": 29140, "name": "MainThread"}, "time": {"repr": "2025-08-21 22:05:33.772516+05:30", "timestamp": 1755794133.772516}}}
{"text": "2025-08-21 22:05:33.773 | DEBUG    | app.ws.live:emit_delta:408 - Emitted pnl delta: seq=32\n", "record": {"elapsed": {"repr": "0:00:29.529826", "seconds": 29.529826}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "emit_delta", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 408, "message": "Emitted pnl delta: seq=32", "module": "live", "name": "app.ws.live", "process": {"id": 29644, "name": "MainProcess"}, "thread": {"id": 29140, "name": "MainThread"}, "time": {"repr": "2025-08-21 22:05:33.773598+05:30", "timestamp": 1755794133.773598}}}
{"text": "2025-08-21 22:05:33.952 | INFO     | app.main:add_trace_id:43 - Request started - Method: GET, Path: /positions, Trace ID: 37ab202e-018b-4432-9662-a713eaba4120\n", "record": {"elapsed": {"repr": "0:00:29.709025", "seconds": 29.709025}, "exception": null, "extra": {}, "file": {"name": "main.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\main.py"}, "function": "add_trace_id", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 43, "message": "Request started - Method: GET, Path: /positions, Trace ID: 37ab202e-018b-4432-9662-a713eaba4120", "module": "main", "name": "app.main", "process": {"id": 29644, "name": "MainProcess"}, "thread": {"id": 29140, "name": "MainThread"}, "time": {"repr": "2025-08-21 22:05:33.952797+05:30", "timestamp": 1755794133.952797}}}
{"text": "2025-08-21 22:05:33.956 | INFO     | app.main:add_trace_id:47 - Request completed - Method: GET, Path: /positions, Status: 200, Trace ID: 37ab202e-018b-4432-9662-a713eaba4120\n", "record": {"elapsed": {"repr": "0:00:29.712770", "seconds": 29.71277}, "exception": null, "extra": {}, "file": {"name": "main.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\main.py"}, "function": "add_trace_id", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 47, "message": "Request completed - Method: GET, Path: /positions, Status: 200, Trace ID: 37ab202e-018b-4432-9662-a713eaba4120", "module": "main", "name": "app.main", "process": {"id": 29644, "name": "MainProcess"}, "thread": {"id": 29140, "name": "MainThread"}, "time": {"repr": "2025-08-21 22:05:33.956542+05:30", "timestamp": 1755794133.956542}}}
{"text": "2025-08-21 22:05:34.250 | DEBUG    | app.ws.live:emit_delta:408 - Emitted positions delta: seq=33\n", "record": {"elapsed": {"repr": "0:00:30.006669", "seconds": 30.006669}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "emit_delta", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 408, "message": "Emitted positions delta: seq=33", "module": "live", "name": "app.ws.live", "process": {"id": 29644, "name": "MainProcess"}, "thread": {"id": 29140, "name": "MainThread"}, "time": {"repr": "2025-08-21 22:05:34.250441+05:30", "timestamp": 1755794134.250441}}}
{"text": "2025-08-21 22:05:34.838 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:30.594621", "seconds": 30.594621}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 29644, "name": "MainProcess"}, "thread": {"id": 15452, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 22:05:34.838393+05:30", "timestamp": 1755794134.838393}}}
{"text": "2025-08-21 22:05:34.840 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:30.596822", "seconds": 30.596822}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 29644, "name": "MainProcess"}, "thread": {"id": 15452, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 22:05:34.840594+05:30", "timestamp": 1755794134.840594}}}
{"text": "2025-08-21 22:05:34.842 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:30.598661", "seconds": 30.598661}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 29644, "name": "MainProcess"}, "thread": {"id": 15452, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 22:05:34.842433+05:30", "timestamp": 1755794134.842433}}}
{"text": "2025-08-21 22:05:34.843 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:30.599725", "seconds": 30.599725}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 29644, "name": "MainProcess"}, "thread": {"id": 15452, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 22:05:34.843497+05:30", "timestamp": 1755794134.843497}}}
{"text": "2025-08-21 22:05:34.845 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:30.601417", "seconds": 30.601417}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 29644, "name": "MainProcess"}, "thread": {"id": 15452, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 22:05:34.845189+05:30", "timestamp": 1755794134.845189}}}
{"text": "2025-08-21 22:05:34.846 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:30.603123", "seconds": 30.603123}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 29644, "name": "MainProcess"}, "thread": {"id": 15452, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 22:05:34.846895+05:30", "timestamp": 1755794134.846895}}}
{"text": "2025-08-21 22:05:34.848 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:30.604841", "seconds": 30.604841}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 29644, "name": "MainProcess"}, "thread": {"id": 15452, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 22:05:34.848613+05:30", "timestamp": 1755794134.848613}}}
{"text": "2025-08-21 22:05:34.850 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:30.606723", "seconds": 30.606723}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 29644, "name": "MainProcess"}, "thread": {"id": 15452, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 22:05:34.850495+05:30", "timestamp": 1755794134.850495}}}
{"text": "2025-08-21 22:05:34.852 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:30.608481", "seconds": 30.608481}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 29644, "name": "MainProcess"}, "thread": {"id": 15452, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 22:05:34.852253+05:30", "timestamp": 1755794134.852253}}}
{"text": "2025-08-21 22:05:34.853 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:30.609814", "seconds": 30.609814}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 29644, "name": "MainProcess"}, "thread": {"id": 15452, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 22:05:34.853586+05:30", "timestamp": 1755794134.853586}}}
{"text": "2025-08-21 22:05:35.489 | INFO     | app.services.dhan_client:get_pnl:489 - Starting accurate P&L calculation\n", "record": {"elapsed": {"repr": "0:00:31.245975", "seconds": 31.245975}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 489, "message": "Starting accurate P&L calculation", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 29644, "name": "MainProcess"}, "thread": {"id": 29140, "name": "MainThread"}, "time": {"repr": "2025-08-21 22:05:35.489747+05:30", "timestamp": 1755794135.489747}}}
{"text": "2025-08-21 22:05:35.490 | INFO     | app.services.dhan_client:get_pnl:491 - Fetched 5 positions\n", "record": {"elapsed": {"repr": "0:00:31.247200", "seconds": 31.2472}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 491, "message": "Fetched 5 positions", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 29644, "name": "MainProcess"}, "thread": {"id": 29140, "name": "MainThread"}, "time": {"repr": "2025-08-21 22:05:35.490972+05:30", "timestamp": 1755794135.490972}}}
{"text": "2025-08-21 22:05:35.492 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for RELIANCE: unrealized=129424.91, today=129424.91\n", "record": {"elapsed": {"repr": "0:00:31.248556", "seconds": 31.248556}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for RELIANCE: unrealized=129424.91, today=129424.91", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 29644, "name": "MainProcess"}, "thread": {"id": 29140, "name": "MainThread"}, "time": {"repr": "2025-08-21 22:05:35.492328+05:30", "timestamp": 1755794135.492328}}}
{"text": "2025-08-21 22:05:35.494 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for TCS: unrealized=-8518.47, today=-8518.47\n", "record": {"elapsed": {"repr": "0:00:31.250692", "seconds": 31.250692}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for TCS: unrealized=-8518.47, today=-8518.47", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 29644, "name": "MainProcess"}, "thread": {"id": 29140, "name": "MainThread"}, "time": {"repr": "2025-08-21 22:05:35.494464+05:30", "timestamp": 1755794135.494464}}}
{"text": "2025-08-21 22:05:35.495 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for HDFC: unrealized=1812040.2, today=1812040.2\n", "record": {"elapsed": {"repr": "0:00:31.252092", "seconds": 31.252092}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for HDFC: unrealized=1812040.2, today=1812040.2", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 29644, "name": "MainProcess"}, "thread": {"id": 29140, "name": "MainThread"}, "time": {"repr": "2025-08-21 22:05:35.495864+05:30", "timestamp": 1755794135.495864}}}
{"text": "2025-08-21 22:05:35.497 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for INFY: unrealized=1502169.52, today=1502169.52\n", "record": {"elapsed": {"repr": "0:00:31.254149", "seconds": 31.254149}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for INFY: unrealized=1502169.52, today=1502169.52", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 29644, "name": "MainProcess"}, "thread": {"id": 29140, "name": "MainThread"}, "time": {"repr": "2025-08-21 22:05:35.497921+05:30", "timestamp": 1755794135.497921}}}
{"text": "2025-08-21 22:05:35.500 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for ICICIBANK: unrealized=-1316249.78, today=-1316249.78\n", "record": {"elapsed": {"repr": "0:00:31.256318", "seconds": 31.256318}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for ICICIBANK: unrealized=-1316249.78, today=-1316249.78", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 29644, "name": "MainProcess"}, "thread": {"id": 29140, "name": "MainThread"}, "time": {"repr": "2025-08-21 22:05:35.500090+05:30", "timestamp": 1755794135.50009}}}
{"text": "2025-08-21 22:05:35.501 | INFO     | app.services.dhan_client:get_pnl:545 - Calculated totals - realized: 0.0, unrealized: 2118866.38, day: 2118866.38\n", "record": {"elapsed": {"repr": "0:00:31.257813", "seconds": 31.257813}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 545, "message": "Calculated totals - realized: 0.0, unrealized: 2118866.38, day: 2118866.38", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 29644, "name": "MainProcess"}, "thread": {"id": 29140, "name": "MainThread"}, "time": {"repr": "2025-08-21 22:05:35.501585+05:30", "timestamp": 1755794135.501585}}}
{"text": "2025-08-21 22:05:35.503 | DEBUG    | app.services.dhan_client:get_pnl:554 - PnL consistency check passed: drift=‚Çπ0.00\n", "record": {"elapsed": {"repr": "0:00:31.259341", "seconds": 31.259341}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 554, "message": "PnL consistency check passed: drift=‚Çπ0.00", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 29644, "name": "MainProcess"}, "thread": {"id": 29140, "name": "MainThread"}, "time": {"repr": "2025-08-21 22:05:35.503113+05:30", "timestamp": 1755794135.503113}}}
{"text": "2025-08-21 22:05:35.504 | DEBUG    | app.services.dhan_client:get_pnl:558 - Creating PnLTotals...\n", "record": {"elapsed": {"repr": "0:00:31.260933", "seconds": 31.260933}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 558, "message": "Creating PnLTotals...", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 29644, "name": "MainProcess"}, "thread": {"id": 29140, "name": "MainThread"}, "time": {"repr": "2025-08-21 22:05:35.504705+05:30", "timestamp": 1755794135.504705}}}
{"text": "2025-08-21 22:05:35.506 | DEBUG    | app.services.dhan_client:get_pnl:565 - PnLTotals created successfully\n", "record": {"elapsed": {"repr": "0:00:31.262273", "seconds": 31.262273}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 565, "message": "PnLTotals created successfully", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 29644, "name": "MainProcess"}, "thread": {"id": 29140, "name": "MainThread"}, "time": {"repr": "2025-08-21 22:05:35.506045+05:30", "timestamp": 1755794135.506045}}}
{"text": "2025-08-21 22:05:35.508 | DEBUG    | app.services.dhan_client:get_pnl:574 - Creating PnL model...\n", "record": {"elapsed": {"repr": "0:00:31.264245", "seconds": 31.264245}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 574, "message": "Creating PnL model...", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 29644, "name": "MainProcess"}, "thread": {"id": 29140, "name": "MainThread"}, "time": {"repr": "2025-08-21 22:05:35.508017+05:30", "timestamp": 1755794135.508017}}}
{"text": "2025-08-21 22:05:35.509 | DEBUG    | app.services.dhan_client:get_pnl:575 - Model fields: totals=<class 'app.models.schemas.PnLTotals'>, perSymbol=5, updated_at=2025-08-21 22:05:35.492066+05:30, trading_day=2025-08-21\n", "record": {"elapsed": {"repr": "0:00:31.265565", "seconds": 31.265565}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 575, "message": "Model fields: totals=<class 'app.models.schemas.PnLTotals'>, perSymbol=5, updated_at=2025-08-21 22:05:35.492066+05:30, trading_day=2025-08-21", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 29644, "name": "MainProcess"}, "thread": {"id": 29140, "name": "MainThread"}, "time": {"repr": "2025-08-21 22:05:35.509337+05:30", "timestamp": 1755794135.509337}}}
{"text": "2025-08-21 22:05:35.510 | DEBUG    | app.services.dhan_client:get_pnl:584 - Created PnL model: totals=PnLTotals(realized=0.0, unrealized=2118866.38, day=2118866.38, currency='INR') per_symbol=[PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1596, avg=105.2, ltp=186.29, unrealized=129424.91, today_pnl=129424.91), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=895, avg=965.72, ltp=975.24, unrealized=-8518.47, today_pnl=-8518.47), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=1697, avg=987.4, ltp=2055.19, unrealized=1812040.2, today_pnl=1812040.2), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=1638, avg=1011.79, ltp=94.71, unrealized=1502169.52, today_pnl=1502169.52), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=1535, avg=1230.09, ltp=372.6, unrealized=-1316249.78, today_pnl=-1316249.78)] updated_at=datetime.datetime(2025, 8, 21, 22, 5, 35, 492066, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))) trading_day='2025-08-21'\n", "record": {"elapsed": {"repr": "0:00:31.267019", "seconds": 31.267019}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 584, "message": "Created PnL model: totals=PnLTotals(realized=0.0, unrealized=2118866.38, day=2118866.38, currency='INR') per_symbol=[PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1596, avg=105.2, ltp=186.29, unrealized=129424.91, today_pnl=129424.91), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=895, avg=965.72, ltp=975.24, unrealized=-8518.47, today_pnl=-8518.47), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=1697, avg=987.4, ltp=2055.19, unrealized=1812040.2, today_pnl=1812040.2), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=1638, avg=1011.79, ltp=94.71, unrealized=1502169.52, today_pnl=1502169.52), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=1535, avg=1230.09, ltp=372.6, unrealized=-1316249.78, today_pnl=-1316249.78)] updated_at=datetime.datetime(2025, 8, 21, 22, 5, 35, 492066, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))) trading_day='2025-08-21'", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 29644, "name": "MainProcess"}, "thread": {"id": 29140, "name": "MainThread"}, "time": {"repr": "2025-08-21 22:05:35.510791+05:30", "timestamp": 1755794135.510791}}}
{"text": "2025-08-21 22:05:35.513 | DEBUG    | app.services.dhan_client:get_pnl:585 - PnL model fields: {'totals': PnLTotals(realized=0.0, unrealized=2118866.38, day=2118866.38, currency='INR'), 'per_symbol': [PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1596, avg=105.2, ltp=186.29, unrealized=129424.91, today_pnl=129424.91), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=895, avg=965.72, ltp=975.24, unrealized=-8518.47, today_pnl=-8518.47), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=1697, avg=987.4, ltp=2055.19, unrealized=1812040.2, today_pnl=1812040.2), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=1638, avg=1011.79, ltp=94.71, unrealized=1502169.52, today_pnl=1502169.52), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=1535, avg=1230.09, ltp=372.6, unrealized=-1316249.78, today_pnl=-1316249.78)], 'updated_at': datetime.datetime(2025, 8, 21, 22, 5, 35, 492066, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))), 'trading_day': '2025-08-21'}\n", "record": {"elapsed": {"repr": "0:00:31.270098", "seconds": 31.270098}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 585, "message": "PnL model fields: {'totals': PnLTotals(realized=0.0, unrealized=2118866.38, day=2118866.38, currency='INR'), 'per_symbol': [PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1596, avg=105.2, ltp=186.29, unrealized=129424.91, today_pnl=129424.91), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=895, avg=965.72, ltp=975.24, unrealized=-8518.47, today_pnl=-8518.47), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=1697, avg=987.4, ltp=2055.19, unrealized=1812040.2, today_pnl=1812040.2), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=1638, avg=1011.79, ltp=94.71, unrealized=1502169.52, today_pnl=1502169.52), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=1535, avg=1230.09, ltp=372.6, unrealized=-1316249.78, today_pnl=-1316249.78)], 'updated_at': datetime.datetime(2025, 8, 21, 22, 5, 35, 492066, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))), 'trading_day': '2025-08-21'}", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 29644, "name": "MainProcess"}, "thread": {"id": 29140, "name": "MainThread"}, "time": {"repr": "2025-08-21 22:05:35.513870+05:30", "timestamp": 1755794135.51387}}}
{"text": "2025-08-21 22:05:35.516 | INFO     | app.services.dhan_client:get_pnl:587 - P&L calculation completed successfully: 5 symbols, unrealized=‚Çπ2118866.38\n", "record": {"elapsed": {"repr": "0:00:31.272830", "seconds": 31.27283}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 587, "message": "P&L calculation completed successfully: 5 symbols, unrealized=‚Çπ2118866.38", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 29644, "name": "MainProcess"}, "thread": {"id": 29140, "name": "MainThread"}, "time": {"repr": "2025-08-21 22:05:35.516602+05:30", "timestamp": 1755794135.516602}}}
{"text": "2025-08-21 22:05:35.518 | DEBUG    | app.ws.live:emit_delta:408 - Emitted pnl delta: seq=34\n", "record": {"elapsed": {"repr": "0:00:31.275184", "seconds": 31.275184}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "emit_delta", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 408, "message": "Emitted pnl delta: seq=34", "module": "live", "name": "app.ws.live", "process": {"id": 29644, "name": "MainProcess"}, "thread": {"id": 29140, "name": "MainThread"}, "time": {"repr": "2025-08-21 22:05:35.518956+05:30", "timestamp": 1755794135.518956}}}
{"text": "2025-08-21 22:05:36.215 | DEBUG    | app.ws.live:emit_delta:408 - Emitted positions delta: seq=35\n", "record": {"elapsed": {"repr": "0:00:31.971919", "seconds": 31.971919}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "emit_delta", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 408, "message": "Emitted positions delta: seq=35", "module": "live", "name": "app.ws.live", "process": {"id": 29644, "name": "MainProcess"}, "thread": {"id": 29140, "name": "MainThread"}, "time": {"repr": "2025-08-21 22:05:36.215691+05:30", "timestamp": 1755794136.215691}}}
{"text": "2025-08-21 22:05:36.855 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:32.612027", "seconds": 32.612027}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 29644, "name": "MainProcess"}, "thread": {"id": 15452, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 22:05:36.855799+05:30", "timestamp": 1755794136.855799}}}
{"text": "2025-08-21 22:05:36.856 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:32.612842", "seconds": 32.612842}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 29644, "name": "MainProcess"}, "thread": {"id": 15452, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 22:05:36.856614+05:30", "timestamp": 1755794136.856614}}}
{"text": "2025-08-21 22:05:36.857 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:32.613565", "seconds": 32.613565}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 29644, "name": "MainProcess"}, "thread": {"id": 15452, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 22:05:36.857337+05:30", "timestamp": 1755794136.857337}}}
{"text": "2025-08-21 22:05:36.858 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:32.614341", "seconds": 32.614341}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 29644, "name": "MainProcess"}, "thread": {"id": 15452, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 22:05:36.858113+05:30", "timestamp": 1755794136.858113}}}
{"text": "2025-08-21 22:05:36.858 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:32.615064", "seconds": 32.615064}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 29644, "name": "MainProcess"}, "thread": {"id": 15452, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 22:05:36.858836+05:30", "timestamp": 1755794136.858836}}}
{"text": "2025-08-21 22:05:36.859 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:32.615828", "seconds": 32.615828}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 29644, "name": "MainProcess"}, "thread": {"id": 15452, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 22:05:36.859600+05:30", "timestamp": 1755794136.8596}}}
{"text": "2025-08-21 22:05:36.860 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:32.616450", "seconds": 32.61645}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 29644, "name": "MainProcess"}, "thread": {"id": 15452, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 22:05:36.860222+05:30", "timestamp": 1755794136.860222}}}
{"text": "2025-08-21 22:05:36.860 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:32.617209", "seconds": 32.617209}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 29644, "name": "MainProcess"}, "thread": {"id": 15452, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 22:05:36.860981+05:30", "timestamp": 1755794136.860981}}}
{"text": "2025-08-21 22:05:36.861 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:32.617874", "seconds": 32.617874}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 29644, "name": "MainProcess"}, "thread": {"id": 15452, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 22:05:36.861646+05:30", "timestamp": 1755794136.861646}}}
{"text": "2025-08-21 22:05:36.862 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:32.618597", "seconds": 32.618597}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 29644, "name": "MainProcess"}, "thread": {"id": 15452, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 22:05:36.862369+05:30", "timestamp": 1755794136.862369}}}
{"text": "2025-08-21 22:05:37.112 | INFO     | app.services.dhan_client:get_pnl:489 - Starting accurate P&L calculation\n", "record": {"elapsed": {"repr": "0:00:32.868340", "seconds": 32.86834}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 489, "message": "Starting accurate P&L calculation", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 29644, "name": "MainProcess"}, "thread": {"id": 29140, "name": "MainThread"}, "time": {"repr": "2025-08-21 22:05:37.112112+05:30", "timestamp": 1755794137.112112}}}
{"text": "2025-08-21 22:05:37.113 | INFO     | app.services.dhan_client:get_pnl:491 - Fetched 5 positions\n", "record": {"elapsed": {"repr": "0:00:32.869589", "seconds": 32.869589}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 491, "message": "Fetched 5 positions", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 29644, "name": "MainProcess"}, "thread": {"id": 29140, "name": "MainThread"}, "time": {"repr": "2025-08-21 22:05:37.113361+05:30", "timestamp": 1755794137.113361}}}
{"text": "2025-08-21 22:05:37.115 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for RELIANCE: unrealized=133911.22, today=133911.22\n", "record": {"elapsed": {"repr": "0:00:32.871455", "seconds": 32.871455}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for RELIANCE: unrealized=133911.22, today=133911.22", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 29644, "name": "MainProcess"}, "thread": {"id": 29140, "name": "MainThread"}, "time": {"repr": "2025-08-21 22:05:37.115227+05:30", "timestamp": 1755794137.115227}}}
{"text": "2025-08-21 22:05:37.116 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for TCS: unrealized=1319.84, today=1319.84\n", "record": {"elapsed": {"repr": "0:00:32.872584", "seconds": 32.872584}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for TCS: unrealized=1319.84, today=1319.84", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 29644, "name": "MainProcess"}, "thread": {"id": 29140, "name": "MainThread"}, "time": {"repr": "2025-08-21 22:05:37.116356+05:30", "timestamp": 1755794137.116356}}}
{"text": "2025-08-21 22:05:37.118 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for HDFC: unrealized=1856457.95, today=1856457.95\n", "record": {"elapsed": {"repr": "0:00:32.874758", "seconds": 32.874758}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for HDFC: unrealized=1856457.95, today=1856457.95", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 29644, "name": "MainProcess"}, "thread": {"id": 29140, "name": "MainThread"}, "time": {"repr": "2025-08-21 22:05:37.118530+05:30", "timestamp": 1755794137.11853}}}
{"text": "2025-08-21 22:05:37.119 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for INFY: unrealized=1503510.28, today=1503510.28\n", "record": {"elapsed": {"repr": "0:00:32.876096", "seconds": 32.876096}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for INFY: unrealized=1503510.28, today=1503510.28", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 29644, "name": "MainProcess"}, "thread": {"id": 29140, "name": "MainThread"}, "time": {"repr": "2025-08-21 22:05:37.119868+05:30", "timestamp": 1755794137.119868}}}
{"text": "2025-08-21 22:05:37.121 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for ICICIBANK: unrealized=-1326338.05, today=-1326338.05\n", "record": {"elapsed": {"repr": "0:00:32.877692", "seconds": 32.877692}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for ICICIBANK: unrealized=-1326338.05, today=-1326338.05", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 29644, "name": "MainProcess"}, "thread": {"id": 29140, "name": "MainThread"}, "time": {"repr": "2025-08-21 22:05:37.121464+05:30", "timestamp": 1755794137.121464}}}
{"text": "2025-08-21 22:05:37.123 | INFO     | app.services.dhan_client:get_pnl:545 - Calculated totals - realized: 0.0, unrealized: 2168861.24, day: 2168861.24\n", "record": {"elapsed": {"repr": "0:00:32.879323", "seconds": 32.879323}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 545, "message": "Calculated totals - realized: 0.0, unrealized: 2168861.24, day: 2168861.24", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 29644, "name": "MainProcess"}, "thread": {"id": 29140, "name": "MainThread"}, "time": {"repr": "2025-08-21 22:05:37.123095+05:30", "timestamp": 1755794137.123095}}}
{"text": "2025-08-21 22:05:37.125 | DEBUG    | app.services.dhan_client:get_pnl:554 - PnL consistency check passed: drift=‚Çπ0.00\n", "record": {"elapsed": {"repr": "0:00:32.881252", "seconds": 32.881252}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 554, "message": "PnL consistency check passed: drift=‚Çπ0.00", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 29644, "name": "MainProcess"}, "thread": {"id": 29140, "name": "MainThread"}, "time": {"repr": "2025-08-21 22:05:37.125024+05:30", "timestamp": 1755794137.125024}}}
{"text": "2025-08-21 22:05:37.127 | DEBUG    | app.services.dhan_client:get_pnl:558 - Creating PnLTotals...\n", "record": {"elapsed": {"repr": "0:00:32.883690", "seconds": 32.88369}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 558, "message": "Creating PnLTotals...", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 29644, "name": "MainProcess"}, "thread": {"id": 29140, "name": "MainThread"}, "time": {"repr": "2025-08-21 22:05:37.127462+05:30", "timestamp": 1755794137.127462}}}
{"text": "2025-08-21 22:05:37.129 | DEBUG    | app.services.dhan_client:get_pnl:565 - PnLTotals created successfully\n", "record": {"elapsed": {"repr": "0:00:32.885563", "seconds": 32.885563}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 565, "message": "PnLTotals created successfully", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 29644, "name": "MainProcess"}, "thread": {"id": 29140, "name": "MainThread"}, "time": {"repr": "2025-08-21 22:05:37.129335+05:30", "timestamp": 1755794137.129335}}}
{"text": "2025-08-21 22:05:37.131 | DEBUG    | app.services.dhan_client:get_pnl:574 - Creating PnL model...\n", "record": {"elapsed": {"repr": "0:00:32.887783", "seconds": 32.887783}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 574, "message": "Creating PnL model...", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 29644, "name": "MainProcess"}, "thread": {"id": 29140, "name": "MainThread"}, "time": {"repr": "2025-08-21 22:05:37.131555+05:30", "timestamp": 1755794137.131555}}}
{"text": "2025-08-21 22:05:37.133 | DEBUG    | app.services.dhan_client:get_pnl:575 - Model fields: totals=<class 'app.models.schemas.PnLTotals'>, perSymbol=5, updated_at=2025-08-21 22:05:37.114986+05:30, trading_day=2025-08-21\n", "record": {"elapsed": {"repr": "0:00:32.889983", "seconds": 32.889983}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 575, "message": "Model fields: totals=<class 'app.models.schemas.PnLTotals'>, perSymbol=5, updated_at=2025-08-21 22:05:37.114986+05:30, trading_day=2025-08-21", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 29644, "name": "MainProcess"}, "thread": {"id": 29140, "name": "MainThread"}, "time": {"repr": "2025-08-21 22:05:37.133755+05:30", "timestamp": 1755794137.133755}}}
{"text": "2025-08-21 22:05:37.135 | DEBUG    | app.services.dhan_client:get_pnl:584 - Created PnL model: totals=PnLTotals(realized=0.0, unrealized=2168861.24, day=2168861.24, currency='INR') per_symbol=[PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1596, avg=105.2, ltp=189.1, unrealized=133911.22, today_pnl=133911.22), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=895, avg=965.72, ltp=964.25, unrealized=1319.84, today_pnl=1319.84), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=1697, avg=987.4, ltp=2081.36, unrealized=1856457.95, today_pnl=1856457.95), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=1638, avg=1011.79, ltp=93.9, unrealized=1503510.28, today_pnl=1503510.28), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=1535, avg=1230.09, ltp=366.03, unrealized=-1326338.05, today_pnl=-1326338.05)] updated_at=datetime.datetime(2025, 8, 21, 22, 5, 37, 114986, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))) trading_day='2025-08-21'\n", "record": {"elapsed": {"repr": "0:00:32.891964", "seconds": 32.891964}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 584, "message": "Created PnL model: totals=PnLTotals(realized=0.0, unrealized=2168861.24, day=2168861.24, currency='INR') per_symbol=[PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1596, avg=105.2, ltp=189.1, unrealized=133911.22, today_pnl=133911.22), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=895, avg=965.72, ltp=964.25, unrealized=1319.84, today_pnl=1319.84), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=1697, avg=987.4, ltp=2081.36, unrealized=1856457.95, today_pnl=1856457.95), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=1638, avg=1011.79, ltp=93.9, unrealized=1503510.28, today_pnl=1503510.28), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=1535, avg=1230.09, ltp=366.03, unrealized=-1326338.05, today_pnl=-1326338.05)] updated_at=datetime.datetime(2025, 8, 21, 22, 5, 37, 114986, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))) trading_day='2025-08-21'", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 29644, "name": "MainProcess"}, "thread": {"id": 29140, "name": "MainThread"}, "time": {"repr": "2025-08-21 22:05:37.135736+05:30", "timestamp": 1755794137.135736}}}
{"text": "2025-08-21 22:05:37.140 | DEBUG    | app.services.dhan_client:get_pnl:585 - PnL model fields: {'totals': PnLTotals(realized=0.0, unrealized=2168861.24, day=2168861.24, currency='INR'), 'per_symbol': [PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1596, avg=105.2, ltp=189.1, unrealized=133911.22, today_pnl=133911.22), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=895, avg=965.72, ltp=964.25, unrealized=1319.84, today_pnl=1319.84), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=1697, avg=987.4, ltp=2081.36, unrealized=1856457.95, today_pnl=1856457.95), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=1638, avg=1011.79, ltp=93.9, unrealized=1503510.28, today_pnl=1503510.28), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=1535, avg=1230.09, ltp=366.03, unrealized=-1326338.05, today_pnl=-1326338.05)], 'updated_at': datetime.datetime(2025, 8, 21, 22, 5, 37, 114986, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))), 'trading_day': '2025-08-21'}\n", "record": {"elapsed": {"repr": "0:00:32.896552", "seconds": 32.896552}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 585, "message": "PnL model fields: {'totals': PnLTotals(realized=0.0, unrealized=2168861.24, day=2168861.24, currency='INR'), 'per_symbol': [PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1596, avg=105.2, ltp=189.1, unrealized=133911.22, today_pnl=133911.22), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=895, avg=965.72, ltp=964.25, unrealized=1319.84, today_pnl=1319.84), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=1697, avg=987.4, ltp=2081.36, unrealized=1856457.95, today_pnl=1856457.95), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=1638, avg=1011.79, ltp=93.9, unrealized=1503510.28, today_pnl=1503510.28), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=1535, avg=1230.09, ltp=366.03, unrealized=-1326338.05, today_pnl=-1326338.05)], 'updated_at': datetime.datetime(2025, 8, 21, 22, 5, 37, 114986, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))), 'trading_day': '2025-08-21'}", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 29644, "name": "MainProcess"}, "thread": {"id": 29140, "name": "MainThread"}, "time": {"repr": "2025-08-21 22:05:37.140324+05:30", "timestamp": 1755794137.140324}}}
{"text": "2025-08-21 22:05:37.142 | INFO     | app.services.dhan_client:get_pnl:587 - P&L calculation completed successfully: 5 symbols, unrealized=‚Çπ2168861.24\n", "record": {"elapsed": {"repr": "0:00:32.898857", "seconds": 32.898857}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 587, "message": "P&L calculation completed successfully: 5 symbols, unrealized=‚Çπ2168861.24", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 29644, "name": "MainProcess"}, "thread": {"id": 29140, "name": "MainThread"}, "time": {"repr": "2025-08-21 22:05:37.142629+05:30", "timestamp": 1755794137.142629}}}
{"text": "2025-08-21 22:05:37.144 | DEBUG    | app.ws.live:emit_delta:408 - Emitted pnl delta: seq=36\n", "record": {"elapsed": {"repr": "0:00:32.900932", "seconds": 32.900932}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "emit_delta", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 408, "message": "Emitted pnl delta: seq=36", "module": "live", "name": "app.ws.live", "process": {"id": 29644, "name": "MainProcess"}, "thread": {"id": 29140, "name": "MainThread"}, "time": {"repr": "2025-08-21 22:05:37.144704+05:30", "timestamp": 1755794137.144704}}}
{"text": "2025-08-21 22:05:38.157 | DEBUG    | app.ws.live:emit_delta:408 - Emitted positions delta: seq=37\n", "record": {"elapsed": {"repr": "0:00:33.913937", "seconds": 33.913937}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "emit_delta", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 408, "message": "Emitted positions delta: seq=37", "module": "live", "name": "app.ws.live", "process": {"id": 29644, "name": "MainProcess"}, "thread": {"id": 29140, "name": "MainThread"}, "time": {"repr": "2025-08-21 22:05:38.157709+05:30", "timestamp": 1755794138.157709}}}
{"text": "2025-08-21 22:05:38.863 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:34.620094", "seconds": 34.620094}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 29644, "name": "MainProcess"}, "thread": {"id": 15452, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 22:05:38.863866+05:30", "timestamp": 1755794138.863866}}}
{"text": "2025-08-21 22:05:38.865 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:34.621839", "seconds": 34.621839}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 29644, "name": "MainProcess"}, "thread": {"id": 15452, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 22:05:38.865611+05:30", "timestamp": 1755794138.865611}}}
{"text": "2025-08-21 22:05:38.866 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:34.622882", "seconds": 34.622882}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 29644, "name": "MainProcess"}, "thread": {"id": 15452, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 22:05:38.866654+05:30", "timestamp": 1755794138.866654}}}
{"text": "2025-08-21 22:05:38.867 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:34.623988", "seconds": 34.623988}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 29644, "name": "MainProcess"}, "thread": {"id": 15452, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 22:05:38.867760+05:30", "timestamp": 1755794138.86776}}}
{"text": "2025-08-21 22:05:38.869 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:34.625504", "seconds": 34.625504}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 29644, "name": "MainProcess"}, "thread": {"id": 15452, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 22:05:38.869276+05:30", "timestamp": 1755794138.869276}}}
{"text": "2025-08-21 22:05:38.870 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:34.626875", "seconds": 34.626875}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 29644, "name": "MainProcess"}, "thread": {"id": 15452, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 22:05:38.870647+05:30", "timestamp": 1755794138.870647}}}
{"text": "2025-08-21 22:05:38.871 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:34.628216", "seconds": 34.628216}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 29644, "name": "MainProcess"}, "thread": {"id": 15452, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 22:05:38.871988+05:30", "timestamp": 1755794138.871988}}}
{"text": "2025-08-21 22:05:38.873 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:34.629837", "seconds": 34.629837}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 29644, "name": "MainProcess"}, "thread": {"id": 15452, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 22:05:38.873609+05:30", "timestamp": 1755794138.873609}}}
{"text": "2025-08-21 22:05:38.874 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:34.630792", "seconds": 34.630792}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 29644, "name": "MainProcess"}, "thread": {"id": 15452, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 22:05:38.874564+05:30", "timestamp": 1755794138.874564}}}
{"text": "2025-08-21 22:05:38.875 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:34.631563", "seconds": 34.631563}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 29644, "name": "MainProcess"}, "thread": {"id": 15452, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 22:05:38.875335+05:30", "timestamp": 1755794138.875335}}}
{"text": "2025-08-21 22:05:39.053 | INFO     | app.services.dhan_client:get_pnl:489 - Starting accurate P&L calculation\n", "record": {"elapsed": {"repr": "0:00:34.809887", "seconds": 34.809887}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 489, "message": "Starting accurate P&L calculation", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 29644, "name": "MainProcess"}, "thread": {"id": 29140, "name": "MainThread"}, "time": {"repr": "2025-08-21 22:05:39.053659+05:30", "timestamp": 1755794139.053659}}}
{"text": "2025-08-21 22:05:39.054 | INFO     | app.services.dhan_client:get_pnl:491 - Fetched 5 positions\n", "record": {"elapsed": {"repr": "0:00:34.810898", "seconds": 34.810898}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 491, "message": "Fetched 5 positions", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 29644, "name": "MainProcess"}, "thread": {"id": 29140, "name": "MainThread"}, "time": {"repr": "2025-08-21 22:05:39.054670+05:30", "timestamp": 1755794139.05467}}}
{"text": "2025-08-21 22:05:39.055 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for RELIANCE: unrealized=137607.43, today=137607.43\n", "record": {"elapsed": {"repr": "0:00:34.811842", "seconds": 34.811842}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for RELIANCE: unrealized=137607.43, today=137607.43", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 29644, "name": "MainProcess"}, "thread": {"id": 29140, "name": "MainThread"}, "time": {"repr": "2025-08-21 22:05:39.055614+05:30", "timestamp": 1755794139.055614}}}
{"text": "2025-08-21 22:05:39.056 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for TCS: unrealized=-13487.7, today=-13487.7\n", "record": {"elapsed": {"repr": "0:00:34.812588", "seconds": 34.812588}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for TCS: unrealized=-13487.7, today=-13487.7", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 29644, "name": "MainProcess"}, "thread": {"id": 29140, "name": "MainThread"}, "time": {"repr": "2025-08-21 22:05:39.056360+05:30", "timestamp": 1755794139.05636}}}
{"text": "2025-08-21 22:05:39.057 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for HDFC: unrealized=1888560.33, today=1888560.33\n", "record": {"elapsed": {"repr": "0:00:34.813421", "seconds": 34.813421}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for HDFC: unrealized=1888560.33, today=1888560.33", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 29644, "name": "MainProcess"}, "thread": {"id": 29140, "name": "MainThread"}, "time": {"repr": "2025-08-21 22:05:39.057193+05:30", "timestamp": 1755794139.057193}}}
{"text": "2025-08-21 22:05:39.057 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for INFY: unrealized=1502359.69, today=1502359.69\n", "record": {"elapsed": {"repr": "0:00:34.814183", "seconds": 34.814183}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for INFY: unrealized=1502359.69, today=1502359.69", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 29644, "name": "MainProcess"}, "thread": {"id": 29140, "name": "MainThread"}, "time": {"repr": "2025-08-21 22:05:39.057955+05:30", "timestamp": 1755794139.057955}}}
{"text": "2025-08-21 22:05:39.058 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for ICICIBANK: unrealized=-1320841.69, today=-1320841.69\n", "record": {"elapsed": {"repr": "0:00:34.814948", "seconds": 34.814948}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for ICICIBANK: unrealized=-1320841.69, today=-1320841.69", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 29644, "name": "MainProcess"}, "thread": {"id": 29140, "name": "MainThread"}, "time": {"repr": "2025-08-21 22:05:39.058720+05:30", "timestamp": 1755794139.05872}}}
{"text": "2025-08-21 22:05:39.059 | INFO     | app.services.dhan_client:get_pnl:545 - Calculated totals - realized: 0.0, unrealized: 2194198.06, day: 2194198.06\n", "record": {"elapsed": {"repr": "0:00:34.815653", "seconds": 34.815653}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 545, "message": "Calculated totals - realized: 0.0, unrealized: 2194198.06, day: 2194198.06", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 29644, "name": "MainProcess"}, "thread": {"id": 29140, "name": "MainThread"}, "time": {"repr": "2025-08-21 22:05:39.059425+05:30", "timestamp": 1755794139.059425}}}
{"text": "2025-08-21 22:05:39.060 | DEBUG    | app.services.dhan_client:get_pnl:554 - PnL consistency check passed: drift=‚Çπ0.00\n", "record": {"elapsed": {"repr": "0:00:34.816617", "seconds": 34.816617}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 554, "message": "PnL consistency check passed: drift=‚Çπ0.00", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 29644, "name": "MainProcess"}, "thread": {"id": 29140, "name": "MainThread"}, "time": {"repr": "2025-08-21 22:05:39.060389+05:30", "timestamp": 1755794139.060389}}}
{"text": "2025-08-21 22:05:39.061 | DEBUG    | app.services.dhan_client:get_pnl:558 - Creating PnLTotals...\n", "record": {"elapsed": {"repr": "0:00:34.817370", "seconds": 34.81737}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 558, "message": "Creating PnLTotals...", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 29644, "name": "MainProcess"}, "thread": {"id": 29140, "name": "MainThread"}, "time": {"repr": "2025-08-21 22:05:39.061142+05:30", "timestamp": 1755794139.061142}}}
{"text": "2025-08-21 22:05:39.061 | DEBUG    | app.services.dhan_client:get_pnl:565 - PnLTotals created successfully\n", "record": {"elapsed": {"repr": "0:00:34.818215", "seconds": 34.818215}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 565, "message": "PnLTotals created successfully", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 29644, "name": "MainProcess"}, "thread": {"id": 29140, "name": "MainThread"}, "time": {"repr": "2025-08-21 22:05:39.061987+05:30", "timestamp": 1755794139.061987}}}
{"text": "2025-08-21 22:05:39.062 | DEBUG    | app.services.dhan_client:get_pnl:574 - Creating PnL model...\n", "record": {"elapsed": {"repr": "0:00:34.819039", "seconds": 34.819039}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 574, "message": "Creating PnL model...", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 29644, "name": "MainProcess"}, "thread": {"id": 29140, "name": "MainThread"}, "time": {"repr": "2025-08-21 22:05:39.062811+05:30", "timestamp": 1755794139.062811}}}
{"text": "2025-08-21 22:05:39.063 | DEBUG    | app.services.dhan_client:get_pnl:575 - Model fields: totals=<class 'app.models.schemas.PnLTotals'>, perSymbol=5, updated_at=2025-08-21 22:05:39.055506+05:30, trading_day=2025-08-21\n", "record": {"elapsed": {"repr": "0:00:34.819716", "seconds": 34.819716}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 575, "message": "Model fields: totals=<class 'app.models.schemas.PnLTotals'>, perSymbol=5, updated_at=2025-08-21 22:05:39.055506+05:30, trading_day=2025-08-21", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 29644, "name": "MainProcess"}, "thread": {"id": 29140, "name": "MainThread"}, "time": {"repr": "2025-08-21 22:05:39.063488+05:30", "timestamp": 1755794139.063488}}}
{"text": "2025-08-21 22:05:39.064 | DEBUG    | app.services.dhan_client:get_pnl:584 - Created PnL model: totals=PnLTotals(realized=0.0, unrealized=2194198.06, day=2194198.06, currency='INR') per_symbol=[PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1596, avg=105.2, ltp=191.42, unrealized=137607.43, today_pnl=137607.43), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=895, avg=965.72, ltp=980.79, unrealized=-13487.7, today_pnl=-13487.7), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=1697, avg=987.4, ltp=2100.28, unrealized=1888560.33, today_pnl=1888560.33), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=1638, avg=1011.79, ltp=94.6, unrealized=1502359.69, today_pnl=1502359.69), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=1535, avg=1230.09, ltp=369.61, unrealized=-1320841.69, today_pnl=-1320841.69)] updated_at=datetime.datetime(2025, 8, 21, 22, 5, 39, 55506, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))) trading_day='2025-08-21'\n", "record": {"elapsed": {"repr": "0:00:34.820743", "seconds": 34.820743}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 584, "message": "Created PnL model: totals=PnLTotals(realized=0.0, unrealized=2194198.06, day=2194198.06, currency='INR') per_symbol=[PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1596, avg=105.2, ltp=191.42, unrealized=137607.43, today_pnl=137607.43), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=895, avg=965.72, ltp=980.79, unrealized=-13487.7, today_pnl=-13487.7), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=1697, avg=987.4, ltp=2100.28, unrealized=1888560.33, today_pnl=1888560.33), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=1638, avg=1011.79, ltp=94.6, unrealized=1502359.69, today_pnl=1502359.69), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=1535, avg=1230.09, ltp=369.61, unrealized=-1320841.69, today_pnl=-1320841.69)] updated_at=datetime.datetime(2025, 8, 21, 22, 5, 39, 55506, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))) trading_day='2025-08-21'", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 29644, "name": "MainProcess"}, "thread": {"id": 29140, "name": "MainThread"}, "time": {"repr": "2025-08-21 22:05:39.064515+05:30", "timestamp": 1755794139.064515}}}
{"text": "2025-08-21 22:05:39.065 | DEBUG    | app.services.dhan_client:get_pnl:585 - PnL model fields: {'totals': PnLTotals(realized=0.0, unrealized=2194198.06, day=2194198.06, currency='INR'), 'per_symbol': [PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1596, avg=105.2, ltp=191.42, unrealized=137607.43, today_pnl=137607.43), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=895, avg=965.72, ltp=980.79, unrealized=-13487.7, today_pnl=-13487.7), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=1697, avg=987.4, ltp=2100.28, unrealized=1888560.33, today_pnl=1888560.33), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=1638, avg=1011.79, ltp=94.6, unrealized=1502359.69, today_pnl=1502359.69), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=1535, avg=1230.09, ltp=369.61, unrealized=-1320841.69, today_pnl=-1320841.69)], 'updated_at': datetime.datetime(2025, 8, 21, 22, 5, 39, 55506, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))), 'trading_day': '2025-08-21'}\n", "record": {"elapsed": {"repr": "0:00:34.821770", "seconds": 34.82177}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 585, "message": "PnL model fields: {'totals': PnLTotals(realized=0.0, unrealized=2194198.06, day=2194198.06, currency='INR'), 'per_symbol': [PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1596, avg=105.2, ltp=191.42, unrealized=137607.43, today_pnl=137607.43), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=895, avg=965.72, ltp=980.79, unrealized=-13487.7, today_pnl=-13487.7), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=1697, avg=987.4, ltp=2100.28, unrealized=1888560.33, today_pnl=1888560.33), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=1638, avg=1011.79, ltp=94.6, unrealized=1502359.69, today_pnl=1502359.69), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=1535, avg=1230.09, ltp=369.61, unrealized=-1320841.69, today_pnl=-1320841.69)], 'updated_at': datetime.datetime(2025, 8, 21, 22, 5, 39, 55506, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))), 'trading_day': '2025-08-21'}", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 29644, "name": "MainProcess"}, "thread": {"id": 29140, "name": "MainThread"}, "time": {"repr": "2025-08-21 22:05:39.065542+05:30", "timestamp": 1755794139.065542}}}
{"text": "2025-08-21 22:05:39.066 | INFO     | app.services.dhan_client:get_pnl:587 - P&L calculation completed successfully: 5 symbols, unrealized=‚Çπ2194198.06\n", "record": {"elapsed": {"repr": "0:00:34.822700", "seconds": 34.8227}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 587, "message": "P&L calculation completed successfully: 5 symbols, unrealized=‚Çπ2194198.06", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 29644, "name": "MainProcess"}, "thread": {"id": 29140, "name": "MainThread"}, "time": {"repr": "2025-08-21 22:05:39.066472+05:30", "timestamp": 1755794139.066472}}}
{"text": "2025-08-21 22:05:39.067 | DEBUG    | app.ws.live:emit_delta:408 - Emitted pnl delta: seq=38\n", "record": {"elapsed": {"repr": "0:00:34.823749", "seconds": 34.823749}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "emit_delta", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 408, "message": "Emitted pnl delta: seq=38", "module": "live", "name": "app.ws.live", "process": {"id": 29644, "name": "MainProcess"}, "thread": {"id": 29140, "name": "MainThread"}, "time": {"repr": "2025-08-21 22:05:39.067521+05:30", "timestamp": 1755794139.067521}}}
{"text": "2025-08-21 22:05:49.750 | INFO     | app.services.dhan_client:_initialize_mock_data:53 - Initializing mock data...\n", "record": {"elapsed": {"repr": "0:00:00.164660", "seconds": 0.16466}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_initialize_mock_data", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 53, "message": "Initializing mock data...", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 10756, "name": "MainProcess"}, "thread": {"id": 8976, "name": "MainThread"}, "time": {"repr": "2025-08-21 22:05:49.750006+05:30", "timestamp": 1755794149.750006}}}
{"text": "2025-08-21 22:05:49.752 | INFO     | app.services.dhan_client:_initialize_mock_data:75 - Created mock holding for RELIANCE: qty=2143, avg_price=252.95262791269485, ltp=300.1249773233397\n", "record": {"elapsed": {"repr": "0:00:00.167609", "seconds": 0.167609}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_initialize_mock_data", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 75, "message": "Created mock holding for RELIANCE: qty=2143, avg_price=252.95262791269485, ltp=300.1249773233397", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 10756, "name": "MainProcess"}, "thread": {"id": 8976, "name": "MainThread"}, "time": {"repr": "2025-08-21 22:05:49.752955+05:30", "timestamp": 1755794149.752955}}}
{"text": "2025-08-21 22:05:49.755 | INFO     | app.services.dhan_client:_initialize_mock_data:75 - Created mock holding for TCS: qty=313, avg_price=322.33392594484906, ltp=331.9979358438689\n", "record": {"elapsed": {"repr": "0:00:00.169919", "seconds": 0.169919}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_initialize_mock_data", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 75, "message": "Created mock holding for TCS: qty=313, avg_price=322.33392594484906, ltp=331.9979358438689", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 10756, "name": "MainProcess"}, "thread": {"id": 8976, "name": "MainThread"}, "time": {"repr": "2025-08-21 22:05:49.755265+05:30", "timestamp": 1755794149.755265}}}
{"text": "2025-08-21 22:05:49.758 | INFO     | app.services.dhan_client:_initialize_mock_data:75 - Created mock holding for HDFC: qty=2475, avg_price=1270.324595678899, ltp=1123.464198259592\n", "record": {"elapsed": {"repr": "0:00:00.172712", "seconds": 0.172712}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_initialize_mock_data", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 75, "message": "Created mock holding for HDFC: qty=2475, avg_price=1270.324595678899, ltp=1123.464198259592", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 10756, "name": "MainProcess"}, "thread": {"id": 8976, "name": "MainThread"}, "time": {"repr": "2025-08-21 22:05:49.758058+05:30", "timestamp": 1755794149.758058}}}
{"text": "2025-08-21 22:05:49.762 | INFO     | app.services.dhan_client:_initialize_mock_data:75 - Created mock holding for INFY: qty=864, avg_price=697.9768920886669, ltp=778.0010708212119\n", "record": {"elapsed": {"repr": "0:00:00.177255", "seconds": 0.177255}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_initialize_mock_data", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 75, "message": "Created mock holding for INFY: qty=864, avg_price=697.9768920886669, ltp=778.0010708212119", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 10756, "name": "MainProcess"}, "thread": {"id": 8976, "name": "MainThread"}, "time": {"repr": "2025-08-21 22:05:49.762601+05:30", "timestamp": 1755794149.762601}}}
{"text": "2025-08-21 22:05:49.764 | INFO     | app.services.dhan_client:_initialize_mock_data:75 - Created mock holding for ICICIBANK: qty=4309, avg_price=1931.5666699474004, ltp=1994.830231351129\n", "record": {"elapsed": {"repr": "0:00:00.178803", "seconds": 0.178803}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_initialize_mock_data", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 75, "message": "Created mock holding for ICICIBANK: qty=4309, avg_price=1931.5666699474004, ltp=1994.830231351129", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 10756, "name": "MainProcess"}, "thread": {"id": 8976, "name": "MainThread"}, "time": {"repr": "2025-08-21 22:05:49.764149+05:30", "timestamp": 1755794149.764149}}}
{"text": "2025-08-21 22:05:49.766 | INFO     | app.services.dhan_client:_initialize_mock_data:75 - Created mock holding for HINDUNILVR: qty=3924, avg_price=1363.024981194647, ltp=1474.2212689237808\n", "record": {"elapsed": {"repr": "0:00:00.181572", "seconds": 0.181572}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_initialize_mock_data", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 75, "message": "Created mock holding for HINDUNILVR: qty=3924, avg_price=1363.024981194647, ltp=1474.2212689237808", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 10756, "name": "MainProcess"}, "thread": {"id": 8976, "name": "MainThread"}, "time": {"repr": "2025-08-21 22:05:49.766918+05:30", "timestamp": 1755794149.766918}}}
{"text": "2025-08-21 22:05:49.770 | INFO     | app.services.dhan_client:_initialize_mock_data:75 - Created mock holding for ITC: qty=4117, avg_price=1765.6454522736728, ltp=1578.652168610931\n", "record": {"elapsed": {"repr": "0:00:00.184910", "seconds": 0.18491}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_initialize_mock_data", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 75, "message": "Created mock holding for ITC: qty=4117, avg_price=1765.6454522736728, ltp=1578.652168610931", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 10756, "name": "MainProcess"}, "thread": {"id": 8976, "name": "MainThread"}, "time": {"repr": "2025-08-21 22:05:49.770256+05:30", "timestamp": 1755794149.770256}}}
{"text": "2025-08-21 22:05:49.772 | INFO     | app.services.dhan_client:_initialize_mock_data:75 - Created mock holding for SBIN: qty=3797, avg_price=1214.295149403197, ltp=1106.4033580099772\n", "record": {"elapsed": {"repr": "0:00:00.187413", "seconds": 0.187413}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_initialize_mock_data", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 75, "message": "Created mock holding for SBIN: qty=3797, avg_price=1214.295149403197, ltp=1106.4033580099772", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 10756, "name": "MainProcess"}, "thread": {"id": 8976, "name": "MainThread"}, "time": {"repr": "2025-08-21 22:05:49.772759+05:30", "timestamp": 1755794149.772759}}}
{"text": "2025-08-21 22:05:49.775 | INFO     | app.services.dhan_client:_initialize_mock_data:75 - Created mock holding for BHARTIARTL: qty=253, avg_price=182.52719781697766, ltp=188.7200408409243\n", "record": {"elapsed": {"repr": "0:00:00.189840", "seconds": 0.18984}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_initialize_mock_data", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 75, "message": "Created mock holding for BHARTIARTL: qty=253, avg_price=182.52719781697766, ltp=188.7200408409243", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 10756, "name": "MainProcess"}, "thread": {"id": 8976, "name": "MainThread"}, "time": {"repr": "2025-08-21 22:05:49.775186+05:30", "timestamp": 1755794149.775186}}}
{"text": "2025-08-21 22:05:49.778 | INFO     | app.services.dhan_client:_initialize_mock_data:75 - Created mock holding for KOTAKBANK: qty=283, avg_price=1444.4201983547005, ltp=1388.6147037524559\n", "record": {"elapsed": {"repr": "0:00:00.193513", "seconds": 0.193513}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_initialize_mock_data", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 75, "message": "Created mock holding for KOTAKBANK: qty=283, avg_price=1444.4201983547005, ltp=1388.6147037524559", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 10756, "name": "MainProcess"}, "thread": {"id": 8976, "name": "MainThread"}, "time": {"repr": "2025-08-21 22:05:49.778859+05:30", "timestamp": 1755794149.778859}}}
{"text": "2025-08-21 22:05:49.780 | INFO     | app.services.dhan_client:_initialize_mock_data:77 - Created 10 mock holdings\n", "record": {"elapsed": {"repr": "0:00:00.194750", "seconds": 0.19475}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_initialize_mock_data", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 77, "message": "Created 10 mock holdings", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 10756, "name": "MainProcess"}, "thread": {"id": 8976, "name": "MainThread"}, "time": {"repr": "2025-08-21 22:05:49.780096+05:30", "timestamp": 1755794149.780096}}}
{"text": "2025-08-21 22:05:49.783 | INFO     | app.services.dhan_client:_initialize_mock_data:91 - Created mock position for RELIANCE: id=pos_001, qty=1418, avg_price=719.94\n", "record": {"elapsed": {"repr": "0:00:00.197801", "seconds": 0.197801}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_initialize_mock_data", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 91, "message": "Created mock position for RELIANCE: id=pos_001, qty=1418, avg_price=719.94", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 10756, "name": "MainProcess"}, "thread": {"id": 8976, "name": "MainThread"}, "time": {"repr": "2025-08-21 22:05:49.783147+05:30", "timestamp": 1755794149.783147}}}
{"text": "2025-08-21 22:05:49.784 | INFO     | app.services.dhan_client:_initialize_mock_data:91 - Created mock position for TCS: id=pos_002, qty=715, avg_price=1511.34\n", "record": {"elapsed": {"repr": "0:00:00.199203", "seconds": 0.199203}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_initialize_mock_data", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 91, "message": "Created mock position for TCS: id=pos_002, qty=715, avg_price=1511.34", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 10756, "name": "MainProcess"}, "thread": {"id": 8976, "name": "MainThread"}, "time": {"repr": "2025-08-21 22:05:49.784549+05:30", "timestamp": 1755794149.784549}}}
{"text": "2025-08-21 22:05:49.786 | INFO     | app.services.dhan_client:_initialize_mock_data:91 - Created mock position for HDFC: id=pos_003, qty=1996, avg_price=149.84\n", "record": {"elapsed": {"repr": "0:00:00.201313", "seconds": 0.201313}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_initialize_mock_data", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 91, "message": "Created mock position for HDFC: id=pos_003, qty=1996, avg_price=149.84", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 10756, "name": "MainProcess"}, "thread": {"id": 8976, "name": "MainThread"}, "time": {"repr": "2025-08-21 22:05:49.786659+05:30", "timestamp": 1755794149.786659}}}
{"text": "2025-08-21 22:05:49.789 | INFO     | app.services.dhan_client:_initialize_mock_data:91 - Created mock position for INFY: id=pos_004, qty=170, avg_price=221.79\n", "record": {"elapsed": {"repr": "0:00:00.204126", "seconds": 0.204126}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_initialize_mock_data", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 91, "message": "Created mock position for INFY: id=pos_004, qty=170, avg_price=221.79", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 10756, "name": "MainProcess"}, "thread": {"id": 8976, "name": "MainThread"}, "time": {"repr": "2025-08-21 22:05:49.789472+05:30", "timestamp": 1755794149.789472}}}
{"text": "2025-08-21 22:05:49.791 | INFO     | app.services.dhan_client:_initialize_mock_data:91 - Created mock position for ICICIBANK: id=pos_005, qty=661, avg_price=994.02\n", "record": {"elapsed": {"repr": "0:00:00.206577", "seconds": 0.206577}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_initialize_mock_data", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 91, "message": "Created mock position for ICICIBANK: id=pos_005, qty=661, avg_price=994.02", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 10756, "name": "MainProcess"}, "thread": {"id": 8976, "name": "MainThread"}, "time": {"repr": "2025-08-21 22:05:49.791923+05:30", "timestamp": 1755794149.791923}}}
{"text": "2025-08-21 22:05:49.793 | INFO     | app.services.dhan_client:_initialize_mock_data:93 - Created 5 mock positions\n", "record": {"elapsed": {"repr": "0:00:00.208307", "seconds": 0.208307}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_initialize_mock_data", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 93, "message": "Created 5 mock positions", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 10756, "name": "MainProcess"}, "thread": {"id": 8976, "name": "MainThread"}, "time": {"repr": "2025-08-21 22:05:49.793653+05:30", "timestamp": 1755794149.793653}}}
{"text": "2025-08-21 22:05:49.797 | INFO     | app.services.dhan_client:_initialize_mock_data:111 - Created 10 mock orders\n", "record": {"elapsed": {"repr": "0:00:00.211781", "seconds": 0.211781}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_initialize_mock_data", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 111, "message": "Created 10 mock orders", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 10756, "name": "MainProcess"}, "thread": {"id": 8976, "name": "MainThread"}, "time": {"repr": "2025-08-21 22:05:49.797127+05:30", "timestamp": 1755794149.797127}}}
{"text": "2025-08-21 22:05:49.801 | INFO     | app.services.dhan_client:_initialize_mock_data:127 - Created 20 mock trades\n", "record": {"elapsed": {"repr": "0:00:00.216364", "seconds": 0.216364}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_initialize_mock_data", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 127, "message": "Created 20 mock trades", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 10756, "name": "MainProcess"}, "thread": {"id": 8976, "name": "MainThread"}, "time": {"repr": "2025-08-21 22:05:49.801710+05:30", "timestamp": 1755794149.80171}}}
{"text": "2025-08-21 22:05:49.803 | INFO     | app.services.dhan_client:_initialize_mock_data:128 - Mock data initialization completed successfully\n", "record": {"elapsed": {"repr": "0:00:00.218071", "seconds": 0.218071}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_initialize_mock_data", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 128, "message": "Mock data initialization completed successfully", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 10756, "name": "MainProcess"}, "thread": {"id": 8976, "name": "MainThread"}, "time": {"repr": "2025-08-21 22:05:49.803417+05:30", "timestamp": 1755794149.803417}}}
{"text": "2025-08-21 22:05:49.913 | INFO     | app.main:<module>:38 - Starting Dhan Automation Backend Application\n", "record": {"elapsed": {"repr": "0:00:00.327728", "seconds": 0.327728}, "exception": null, "extra": {}, "file": {"name": "main.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\main.py"}, "function": "<module>", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 38, "message": "Starting Dhan Automation Backend Application", "module": "main", "name": "app.main", "process": {"id": 10756, "name": "MainProcess"}, "thread": {"id": 8976, "name": "MainThread"}, "time": {"repr": "2025-08-21 22:05:49.913074+05:30", "timestamp": 1755794149.913074}}}
{"text": "2025-08-21 22:05:49.924 | INFO     | app.ws.live:startup_event:551 - Starting WebSocket polling...\n", "record": {"elapsed": {"repr": "0:00:00.339509", "seconds": 0.339509}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "startup_event", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 551, "message": "Starting WebSocket polling...", "module": "live", "name": "app.ws.live", "process": {"id": 10756, "name": "MainProcess"}, "thread": {"id": 8976, "name": "MainThread"}, "time": {"repr": "2025-08-21 22:05:49.924855+05:30", "timestamp": 1755794149.924855}}}
{"text": "2025-08-21 22:05:49.928 | INFO     | app.main:startup_event:30 - Dhan Automation Backend Application started successfully\n", "record": {"elapsed": {"repr": "0:00:00.343296", "seconds": 0.343296}, "exception": null, "extra": {}, "file": {"name": "main.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\main.py"}, "function": "startup_event", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 30, "message": "Dhan Automation Backend Application started successfully", "module": "main", "name": "app.main", "process": {"id": 10756, "name": "MainProcess"}, "thread": {"id": 8976, "name": "MainThread"}, "time": {"repr": "2025-08-21 22:05:49.928642+05:30", "timestamp": 1755794149.928642}}}
{"text": "2025-08-21 22:05:49.930 | INFO     | app.main:startup_event:31 - Using MOCK data mode\n", "record": {"elapsed": {"repr": "0:00:00.344964", "seconds": 0.344964}, "exception": null, "extra": {}, "file": {"name": "main.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\main.py"}, "function": "startup_event", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 31, "message": "Using MOCK data mode", "module": "main", "name": "app.main", "process": {"id": 10756, "name": "MainProcess"}, "thread": {"id": 8976, "name": "MainThread"}, "time": {"repr": "2025-08-21 22:05:49.930310+05:30", "timestamp": 1755794149.93031}}}
{"text": "2025-08-21 22:05:49.932 | INFO     | app.ws.live:startup_event:551 - Starting WebSocket polling...\n", "record": {"elapsed": {"repr": "0:00:00.347526", "seconds": 0.347526}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "startup_event", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 551, "message": "Starting WebSocket polling...", "module": "live", "name": "app.ws.live", "process": {"id": 10756, "name": "MainProcess"}, "thread": {"id": 8976, "name": "MainThread"}, "time": {"repr": "2025-08-21 22:05:49.932872+05:30", "timestamp": 1755794149.932872}}}
{"text": "2025-08-21 22:05:51.728 | DEBUG    | app.ws.live:emit_delta:408 - Emitted positions delta: seq=1\n", "record": {"elapsed": {"repr": "0:00:02.143268", "seconds": 2.143268}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "emit_delta", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 408, "message": "Emitted positions delta: seq=1", "module": "live", "name": "app.ws.live", "process": {"id": 10756, "name": "MainProcess"}, "thread": {"id": 8976, "name": "MainThread"}, "time": {"repr": "2025-08-21 22:05:51.728614+05:30", "timestamp": 1755794151.728614}}}
{"text": "2025-08-21 22:05:51.730 | INFO     | app.services.dhan_client:get_pnl:489 - Starting accurate P&L calculation\n", "record": {"elapsed": {"repr": "0:00:02.145118", "seconds": 2.145118}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 489, "message": "Starting accurate P&L calculation", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 10756, "name": "MainProcess"}, "thread": {"id": 8976, "name": "MainThread"}, "time": {"repr": "2025-08-21 22:05:51.730464+05:30", "timestamp": 1755794151.730464}}}
{"text": "2025-08-21 22:05:51.732 | INFO     | app.services.dhan_client:get_pnl:491 - Fetched 5 positions\n", "record": {"elapsed": {"repr": "0:00:02.147540", "seconds": 2.14754}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 491, "message": "Fetched 5 positions", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 10756, "name": "MainProcess"}, "thread": {"id": 8976, "name": "MainThread"}, "time": {"repr": "2025-08-21 22:05:51.732886+05:30", "timestamp": 1755794151.732886}}}
{"text": "2025-08-21 22:05:51.735 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for RELIANCE: unrealized=-595297.7, today=-595297.7\n", "record": {"elapsed": {"repr": "0:00:02.150307", "seconds": 2.150307}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for RELIANCE: unrealized=-595297.7, today=-595297.7", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 10756, "name": "MainProcess"}, "thread": {"id": 8976, "name": "MainThread"}, "time": {"repr": "2025-08-21 22:05:51.735653+05:30", "timestamp": 1755794151.735653}}}
{"text": "2025-08-21 22:05:51.738 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for TCS: unrealized=843229.58, today=843229.58\n", "record": {"elapsed": {"repr": "0:00:02.152753", "seconds": 2.152753}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for TCS: unrealized=843229.58, today=843229.58", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 10756, "name": "MainProcess"}, "thread": {"id": 8976, "name": "MainThread"}, "time": {"repr": "2025-08-21 22:05:51.738099+05:30", "timestamp": 1755794151.738099}}}
{"text": "2025-08-21 22:05:51.740 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for HDFC: unrealized=1943353.9, today=1943353.9\n", "record": {"elapsed": {"repr": "0:00:02.155360", "seconds": 2.15536}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for HDFC: unrealized=1943353.9, today=1943353.9", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 10756, "name": "MainProcess"}, "thread": {"id": 8976, "name": "MainThread"}, "time": {"repr": "2025-08-21 22:05:51.740706+05:30", "timestamp": 1755794151.740706}}}
{"text": "2025-08-21 22:05:51.743 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for INFY: unrealized=-94555.88, today=-94555.88\n", "record": {"elapsed": {"repr": "0:00:02.158373", "seconds": 2.158373}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for INFY: unrealized=-94555.88, today=-94555.88", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 10756, "name": "MainProcess"}, "thread": {"id": 8976, "name": "MainThread"}, "time": {"repr": "2025-08-21 22:05:51.743719+05:30", "timestamp": 1755794151.743719}}}
{"text": "2025-08-21 22:05:51.746 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for ICICIBANK: unrealized=661535.56, today=661535.56\n", "record": {"elapsed": {"repr": "0:00:02.160901", "seconds": 2.160901}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for ICICIBANK: unrealized=661535.56, today=661535.56", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 10756, "name": "MainProcess"}, "thread": {"id": 8976, "name": "MainThread"}, "time": {"repr": "2025-08-21 22:05:51.746247+05:30", "timestamp": 1755794151.746247}}}
{"text": "2025-08-21 22:05:51.747 | INFO     | app.services.dhan_client:get_pnl:545 - Calculated totals - realized: 0.0, unrealized: 2758265.46, day: 2758265.46\n", "record": {"elapsed": {"repr": "0:00:02.162548", "seconds": 2.162548}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 545, "message": "Calculated totals - realized: 0.0, unrealized: 2758265.46, day: 2758265.46", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 10756, "name": "MainProcess"}, "thread": {"id": 8976, "name": "MainThread"}, "time": {"repr": "2025-08-21 22:05:51.747894+05:30", "timestamp": 1755794151.747894}}}
{"text": "2025-08-21 22:05:51.750 | DEBUG    | app.services.dhan_client:get_pnl:554 - PnL consistency check passed: drift=‚Çπ0.00\n", "record": {"elapsed": {"repr": "0:00:02.164855", "seconds": 2.164855}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 554, "message": "PnL consistency check passed: drift=‚Çπ0.00", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 10756, "name": "MainProcess"}, "thread": {"id": 8976, "name": "MainThread"}, "time": {"repr": "2025-08-21 22:05:51.750201+05:30", "timestamp": 1755794151.750201}}}
{"text": "2025-08-21 22:05:51.753 | DEBUG    | app.services.dhan_client:get_pnl:558 - Creating PnLTotals...\n", "record": {"elapsed": {"repr": "0:00:02.168477", "seconds": 2.168477}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 558, "message": "Creating PnLTotals...", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 10756, "name": "MainProcess"}, "thread": {"id": 8976, "name": "MainThread"}, "time": {"repr": "2025-08-21 22:05:51.753823+05:30", "timestamp": 1755794151.753823}}}
{"text": "2025-08-21 22:05:51.758 | DEBUG    | app.services.dhan_client:get_pnl:565 - PnLTotals created successfully\n", "record": {"elapsed": {"repr": "0:00:02.173065", "seconds": 2.173065}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 565, "message": "PnLTotals created successfully", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 10756, "name": "MainProcess"}, "thread": {"id": 8976, "name": "MainThread"}, "time": {"repr": "2025-08-21 22:05:51.758411+05:30", "timestamp": 1755794151.758411}}}
{"text": "2025-08-21 22:05:51.760 | DEBUG    | app.services.dhan_client:get_pnl:574 - Creating PnL model...\n", "record": {"elapsed": {"repr": "0:00:02.175287", "seconds": 2.175287}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 574, "message": "Creating PnL model...", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 10756, "name": "MainProcess"}, "thread": {"id": 8976, "name": "MainThread"}, "time": {"repr": "2025-08-21 22:05:51.760633+05:30", "timestamp": 1755794151.760633}}}
{"text": "2025-08-21 22:05:51.763 | DEBUG    | app.services.dhan_client:get_pnl:575 - Model fields: totals=<class 'app.models.schemas.PnLTotals'>, perSymbol=5, updated_at=2025-08-21 22:05:51.735466+05:30, trading_day=2025-08-21\n", "record": {"elapsed": {"repr": "0:00:02.177919", "seconds": 2.177919}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 575, "message": "Model fields: totals=<class 'app.models.schemas.PnLTotals'>, perSymbol=5, updated_at=2025-08-21 22:05:51.735466+05:30, trading_day=2025-08-21", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 10756, "name": "MainProcess"}, "thread": {"id": 8976, "name": "MainThread"}, "time": {"repr": "2025-08-21 22:05:51.763265+05:30", "timestamp": 1755794151.763265}}}
{"text": "2025-08-21 22:05:51.766 | DEBUG    | app.services.dhan_client:get_pnl:584 - Created PnL model: totals=PnLTotals(realized=0.0, unrealized=2758265.46, day=2758265.46, currency='INR') per_symbol=[PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1418, avg=719.94, ltp=300.12, unrealized=-595297.7, today_pnl=-595297.7), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=715, avg=1511.34, ltp=332.0, unrealized=843229.58, today_pnl=843229.58), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=1996, avg=149.84, ltp=1123.46, unrealized=1943353.9, today_pnl=1943353.9), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=170, avg=221.79, ltp=778.0, unrealized=-94555.88, today_pnl=-94555.88), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=661, avg=994.02, ltp=1994.83, unrealized=661535.56, today_pnl=661535.56)] updated_at=datetime.datetime(2025, 8, 21, 22, 5, 51, 735466, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))) trading_day='2025-08-21'\n", "record": {"elapsed": {"repr": "0:00:02.181170", "seconds": 2.18117}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 584, "message": "Created PnL model: totals=PnLTotals(realized=0.0, unrealized=2758265.46, day=2758265.46, currency='INR') per_symbol=[PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1418, avg=719.94, ltp=300.12, unrealized=-595297.7, today_pnl=-595297.7), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=715, avg=1511.34, ltp=332.0, unrealized=843229.58, today_pnl=843229.58), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=1996, avg=149.84, ltp=1123.46, unrealized=1943353.9, today_pnl=1943353.9), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=170, avg=221.79, ltp=778.0, unrealized=-94555.88, today_pnl=-94555.88), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=661, avg=994.02, ltp=1994.83, unrealized=661535.56, today_pnl=661535.56)] updated_at=datetime.datetime(2025, 8, 21, 22, 5, 51, 735466, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))) trading_day='2025-08-21'", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 10756, "name": "MainProcess"}, "thread": {"id": 8976, "name": "MainThread"}, "time": {"repr": "2025-08-21 22:05:51.766516+05:30", "timestamp": 1755794151.766516}}}
{"text": "2025-08-21 22:05:51.771 | DEBUG    | app.services.dhan_client:get_pnl:585 - PnL model fields: {'totals': PnLTotals(realized=0.0, unrealized=2758265.46, day=2758265.46, currency='INR'), 'per_symbol': [PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1418, avg=719.94, ltp=300.12, unrealized=-595297.7, today_pnl=-595297.7), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=715, avg=1511.34, ltp=332.0, unrealized=843229.58, today_pnl=843229.58), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=1996, avg=149.84, ltp=1123.46, unrealized=1943353.9, today_pnl=1943353.9), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=170, avg=221.79, ltp=778.0, unrealized=-94555.88, today_pnl=-94555.88), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=661, avg=994.02, ltp=1994.83, unrealized=661535.56, today_pnl=661535.56)], 'updated_at': datetime.datetime(2025, 8, 21, 22, 5, 51, 735466, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))), 'trading_day': '2025-08-21'}\n", "record": {"elapsed": {"repr": "0:00:02.185736", "seconds": 2.185736}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 585, "message": "PnL model fields: {'totals': PnLTotals(realized=0.0, unrealized=2758265.46, day=2758265.46, currency='INR'), 'per_symbol': [PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1418, avg=719.94, ltp=300.12, unrealized=-595297.7, today_pnl=-595297.7), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=715, avg=1511.34, ltp=332.0, unrealized=843229.58, today_pnl=843229.58), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=1996, avg=149.84, ltp=1123.46, unrealized=1943353.9, today_pnl=1943353.9), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=170, avg=221.79, ltp=778.0, unrealized=-94555.88, today_pnl=-94555.88), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=661, avg=994.02, ltp=1994.83, unrealized=661535.56, today_pnl=661535.56)], 'updated_at': datetime.datetime(2025, 8, 21, 22, 5, 51, 735466, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))), 'trading_day': '2025-08-21'}", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 10756, "name": "MainProcess"}, "thread": {"id": 8976, "name": "MainThread"}, "time": {"repr": "2025-08-21 22:05:51.771082+05:30", "timestamp": 1755794151.771082}}}
{"text": "2025-08-21 22:05:51.774 | INFO     | app.services.dhan_client:get_pnl:587 - P&L calculation completed successfully: 5 symbols, unrealized=‚Çπ2758265.46\n", "record": {"elapsed": {"repr": "0:00:02.189526", "seconds": 2.189526}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 587, "message": "P&L calculation completed successfully: 5 symbols, unrealized=‚Çπ2758265.46", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 10756, "name": "MainProcess"}, "thread": {"id": 8976, "name": "MainThread"}, "time": {"repr": "2025-08-21 22:05:51.774872+05:30", "timestamp": 1755794151.774872}}}
{"text": "2025-08-21 22:05:51.777 | DEBUG    | app.ws.live:emit_delta:408 - Emitted pnl delta: seq=2\n", "record": {"elapsed": {"repr": "0:00:02.192255", "seconds": 2.192255}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "emit_delta", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 408, "message": "Emitted pnl delta: seq=2", "module": "live", "name": "app.ws.live", "process": {"id": 10756, "name": "MainProcess"}, "thread": {"id": 8976, "name": "MainThread"}, "time": {"repr": "2025-08-21 22:05:51.777601+05:30", "timestamp": 1755794151.777601}}}
{"text": "2025-08-21 22:05:51.809 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:02.224064", "seconds": 2.224064}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 10756, "name": "MainProcess"}, "thread": {"id": 2628, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 22:05:51.809410+05:30", "timestamp": 1755794151.80941}}}
{"text": "2025-08-21 22:05:51.811 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:02.226335", "seconds": 2.226335}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 10756, "name": "MainProcess"}, "thread": {"id": 2628, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 22:05:51.811681+05:30", "timestamp": 1755794151.811681}}}
{"text": "2025-08-21 22:05:51.813 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:02.228632", "seconds": 2.228632}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 10756, "name": "MainProcess"}, "thread": {"id": 2628, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 22:05:51.813978+05:30", "timestamp": 1755794151.813978}}}
{"text": "2025-08-21 22:05:51.814 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:02.229590", "seconds": 2.22959}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 10756, "name": "MainProcess"}, "thread": {"id": 2628, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 22:05:51.814936+05:30", "timestamp": 1755794151.814936}}}
{"text": "2025-08-21 22:05:51.817 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:02.232437", "seconds": 2.232437}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 10756, "name": "MainProcess"}, "thread": {"id": 2628, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 22:05:51.817783+05:30", "timestamp": 1755794151.817783}}}
{"text": "2025-08-21 22:05:51.820 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:02.234936", "seconds": 2.234936}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 10756, "name": "MainProcess"}, "thread": {"id": 2628, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 22:05:51.820282+05:30", "timestamp": 1755794151.820282}}}
{"text": "2025-08-21 22:05:51.822 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:02.237412", "seconds": 2.237412}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 10756, "name": "MainProcess"}, "thread": {"id": 2628, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 22:05:51.822758+05:30", "timestamp": 1755794151.822758}}}
{"text": "2025-08-21 22:05:51.824 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:02.239398", "seconds": 2.239398}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 10756, "name": "MainProcess"}, "thread": {"id": 2628, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 22:05:51.824744+05:30", "timestamp": 1755794151.824744}}}
{"text": "2025-08-21 22:05:51.827 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:02.241757", "seconds": 2.241757}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 10756, "name": "MainProcess"}, "thread": {"id": 2628, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 22:05:51.827103+05:30", "timestamp": 1755794151.827103}}}
{"text": "2025-08-21 22:05:51.829 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:02.243833", "seconds": 2.243833}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 10756, "name": "MainProcess"}, "thread": {"id": 2628, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 22:05:51.829179+05:30", "timestamp": 1755794151.829179}}}
{"text": "2025-08-21 22:05:52.731 | DEBUG    | app.ws.live:emit_delta:408 - Emitted orders delta: seq=3\n", "record": {"elapsed": {"repr": "0:00:03.146344", "seconds": 3.146344}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "emit_delta", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 408, "message": "Emitted orders delta: seq=3", "module": "live", "name": "app.ws.live", "process": {"id": 10756, "name": "MainProcess"}, "thread": {"id": 8976, "name": "MainThread"}, "time": {"repr": "2025-08-21 22:05:52.731690+05:30", "timestamp": 1755794152.73169}}}
{"text": "2025-08-21 22:05:53.429 | DEBUG    | app.ws.live:emit_delta:408 - Emitted positions delta: seq=4\n", "record": {"elapsed": {"repr": "0:00:03.843870", "seconds": 3.84387}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "emit_delta", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 408, "message": "Emitted positions delta: seq=4", "module": "live", "name": "app.ws.live", "process": {"id": 10756, "name": "MainProcess"}, "thread": {"id": 8976, "name": "MainThread"}, "time": {"repr": "2025-08-21 22:05:53.429216+05:30", "timestamp": 1755794153.429216}}}
{"text": "2025-08-21 22:05:53.496 | INFO     | app.services.dhan_client:get_pnl:489 - Starting accurate P&L calculation\n", "record": {"elapsed": {"repr": "0:00:03.910725", "seconds": 3.910725}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 489, "message": "Starting accurate P&L calculation", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 10756, "name": "MainProcess"}, "thread": {"id": 8976, "name": "MainThread"}, "time": {"repr": "2025-08-21 22:05:53.496071+05:30", "timestamp": 1755794153.496071}}}
{"text": "2025-08-21 22:05:53.498 | INFO     | app.services.dhan_client:get_pnl:491 - Fetched 5 positions\n", "record": {"elapsed": {"repr": "0:00:03.913307", "seconds": 3.913307}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 491, "message": "Fetched 5 positions", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 10756, "name": "MainProcess"}, "thread": {"id": 8976, "name": "MainThread"}, "time": {"repr": "2025-08-21 22:05:53.498653+05:30", "timestamp": 1755794153.498653}}}
{"text": "2025-08-21 22:05:53.500 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for RELIANCE: unrealized=-588056.77, today=-588056.77\n", "record": {"elapsed": {"repr": "0:00:03.915104", "seconds": 3.915104}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for RELIANCE: unrealized=-588056.77, today=-588056.77", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 10756, "name": "MainProcess"}, "thread": {"id": 8976, "name": "MainThread"}, "time": {"repr": "2025-08-21 22:05:53.500450+05:30", "timestamp": 1755794153.50045}}}
{"text": "2025-08-21 22:05:53.503 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for TCS: unrealized=847711.84, today=847711.84\n", "record": {"elapsed": {"repr": "0:00:03.917682", "seconds": 3.917682}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for TCS: unrealized=847711.84, today=847711.84", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 10756, "name": "MainProcess"}, "thread": {"id": 8976, "name": "MainThread"}, "time": {"repr": "2025-08-21 22:05:53.503028+05:30", "timestamp": 1755794153.503028}}}
{"text": "2025-08-21 22:05:53.504 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for HDFC: unrealized=1923653.85, today=1923653.85\n", "record": {"elapsed": {"repr": "0:00:03.919040", "seconds": 3.91904}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for HDFC: unrealized=1923653.85, today=1923653.85", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 10756, "name": "MainProcess"}, "thread": {"id": 8976, "name": "MainThread"}, "time": {"repr": "2025-08-21 22:05:53.504386+05:30", "timestamp": 1755794153.504386}}}
{"text": "2025-08-21 22:05:53.507 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for INFY: unrealized=-92760.15, today=-92760.15\n", "record": {"elapsed": {"repr": "0:00:03.921812", "seconds": 3.921812}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for INFY: unrealized=-92760.15, today=-92760.15", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 10756, "name": "MainProcess"}, "thread": {"id": 8976, "name": "MainThread"}, "time": {"repr": "2025-08-21 22:05:53.507158+05:30", "timestamp": 1755794153.507158}}}
{"text": "2025-08-21 22:05:53.508 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for ICICIBANK: unrealized=656457.9, today=656457.9\n", "record": {"elapsed": {"repr": "0:00:03.922834", "seconds": 3.922834}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for ICICIBANK: unrealized=656457.9, today=656457.9", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 10756, "name": "MainProcess"}, "thread": {"id": 8976, "name": "MainThread"}, "time": {"repr": "2025-08-21 22:05:53.508180+05:30", "timestamp": 1755794153.50818}}}
{"text": "2025-08-21 22:05:53.509 | INFO     | app.services.dhan_client:get_pnl:545 - Calculated totals - realized: 0.0, unrealized: 2747006.67, day: 2747006.67\n", "record": {"elapsed": {"repr": "0:00:03.924514", "seconds": 3.924514}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 545, "message": "Calculated totals - realized: 0.0, unrealized: 2747006.67, day: 2747006.67", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 10756, "name": "MainProcess"}, "thread": {"id": 8976, "name": "MainThread"}, "time": {"repr": "2025-08-21 22:05:53.509860+05:30", "timestamp": 1755794153.50986}}}
{"text": "2025-08-21 22:05:53.511 | DEBUG    | app.services.dhan_client:get_pnl:554 - PnL consistency check passed: drift=‚Çπ0.00\n", "record": {"elapsed": {"repr": "0:00:03.925840", "seconds": 3.92584}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 554, "message": "PnL consistency check passed: drift=‚Çπ0.00", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 10756, "name": "MainProcess"}, "thread": {"id": 8976, "name": "MainThread"}, "time": {"repr": "2025-08-21 22:05:53.511186+05:30", "timestamp": 1755794153.511186}}}
{"text": "2025-08-21 22:05:53.512 | DEBUG    | app.services.dhan_client:get_pnl:558 - Creating PnLTotals...\n", "record": {"elapsed": {"repr": "0:00:03.927234", "seconds": 3.927234}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 558, "message": "Creating PnLTotals...", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 10756, "name": "MainProcess"}, "thread": {"id": 8976, "name": "MainThread"}, "time": {"repr": "2025-08-21 22:05:53.512580+05:30", "timestamp": 1755794153.51258}}}
{"text": "2025-08-21 22:05:53.514 | DEBUG    | app.services.dhan_client:get_pnl:565 - PnLTotals created successfully\n", "record": {"elapsed": {"repr": "0:00:03.928968", "seconds": 3.928968}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 565, "message": "PnLTotals created successfully", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 10756, "name": "MainProcess"}, "thread": {"id": 8976, "name": "MainThread"}, "time": {"repr": "2025-08-21 22:05:53.514314+05:30", "timestamp": 1755794153.514314}}}
{"text": "2025-08-21 22:05:53.515 | DEBUG    | app.services.dhan_client:get_pnl:574 - Creating PnL model...\n", "record": {"elapsed": {"repr": "0:00:03.930496", "seconds": 3.930496}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 574, "message": "Creating PnL model...", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 10756, "name": "MainProcess"}, "thread": {"id": 8976, "name": "MainThread"}, "time": {"repr": "2025-08-21 22:05:53.515842+05:30", "timestamp": 1755794153.515842}}}
{"text": "2025-08-21 22:05:53.517 | DEBUG    | app.services.dhan_client:get_pnl:575 - Model fields: totals=<class 'app.models.schemas.PnLTotals'>, perSymbol=5, updated_at=2025-08-21 22:05:53.500080+05:30, trading_day=2025-08-21\n", "record": {"elapsed": {"repr": "0:00:03.932596", "seconds": 3.932596}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 575, "message": "Model fields: totals=<class 'app.models.schemas.PnLTotals'>, perSymbol=5, updated_at=2025-08-21 22:05:53.500080+05:30, trading_day=2025-08-21", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 10756, "name": "MainProcess"}, "thread": {"id": 8976, "name": "MainThread"}, "time": {"repr": "2025-08-21 22:05:53.517942+05:30", "timestamp": 1755794153.517942}}}
{"text": "2025-08-21 22:05:53.520 | DEBUG    | app.services.dhan_client:get_pnl:584 - Created PnL model: totals=PnLTotals(realized=0.0, unrealized=2747006.67, day=2747006.67, currency='INR') per_symbol=[PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1418, avg=719.94, ltp=305.23, unrealized=-588056.77, today_pnl=-588056.77), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=715, avg=1511.34, ltp=325.73, unrealized=847711.84, today_pnl=847711.84), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=1996, avg=149.84, ltp=1113.59, unrealized=1923653.85, today_pnl=1923653.85), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=170, avg=221.79, ltp=767.44, unrealized=-92760.15, today_pnl=-92760.15), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=661, avg=994.02, ltp=1987.15, unrealized=656457.9, today_pnl=656457.9)] updated_at=datetime.datetime(2025, 8, 21, 22, 5, 53, 500080, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))) trading_day='2025-08-21'\n", "record": {"elapsed": {"repr": "0:00:03.935260", "seconds": 3.93526}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 584, "message": "Created PnL model: totals=PnLTotals(realized=0.0, unrealized=2747006.67, day=2747006.67, currency='INR') per_symbol=[PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1418, avg=719.94, ltp=305.23, unrealized=-588056.77, today_pnl=-588056.77), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=715, avg=1511.34, ltp=325.73, unrealized=847711.84, today_pnl=847711.84), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=1996, avg=149.84, ltp=1113.59, unrealized=1923653.85, today_pnl=1923653.85), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=170, avg=221.79, ltp=767.44, unrealized=-92760.15, today_pnl=-92760.15), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=661, avg=994.02, ltp=1987.15, unrealized=656457.9, today_pnl=656457.9)] updated_at=datetime.datetime(2025, 8, 21, 22, 5, 53, 500080, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))) trading_day='2025-08-21'", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 10756, "name": "MainProcess"}, "thread": {"id": 8976, "name": "MainThread"}, "time": {"repr": "2025-08-21 22:05:53.520606+05:30", "timestamp": 1755794153.520606}}}
{"text": "2025-08-21 22:05:53.523 | DEBUG    | app.services.dhan_client:get_pnl:585 - PnL model fields: {'totals': PnLTotals(realized=0.0, unrealized=2747006.67, day=2747006.67, currency='INR'), 'per_symbol': [PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1418, avg=719.94, ltp=305.23, unrealized=-588056.77, today_pnl=-588056.77), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=715, avg=1511.34, ltp=325.73, unrealized=847711.84, today_pnl=847711.84), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=1996, avg=149.84, ltp=1113.59, unrealized=1923653.85, today_pnl=1923653.85), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=170, avg=221.79, ltp=767.44, unrealized=-92760.15, today_pnl=-92760.15), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=661, avg=994.02, ltp=1987.15, unrealized=656457.9, today_pnl=656457.9)], 'updated_at': datetime.datetime(2025, 8, 21, 22, 5, 53, 500080, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))), 'trading_day': '2025-08-21'}\n", "record": {"elapsed": {"repr": "0:00:03.938495", "seconds": 3.938495}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 585, "message": "PnL model fields: {'totals': PnLTotals(realized=0.0, unrealized=2747006.67, day=2747006.67, currency='INR'), 'per_symbol': [PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1418, avg=719.94, ltp=305.23, unrealized=-588056.77, today_pnl=-588056.77), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=715, avg=1511.34, ltp=325.73, unrealized=847711.84, today_pnl=847711.84), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=1996, avg=149.84, ltp=1113.59, unrealized=1923653.85, today_pnl=1923653.85), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=170, avg=221.79, ltp=767.44, unrealized=-92760.15, today_pnl=-92760.15), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=661, avg=994.02, ltp=1987.15, unrealized=656457.9, today_pnl=656457.9)], 'updated_at': datetime.datetime(2025, 8, 21, 22, 5, 53, 500080, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))), 'trading_day': '2025-08-21'}", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 10756, "name": "MainProcess"}, "thread": {"id": 8976, "name": "MainThread"}, "time": {"repr": "2025-08-21 22:05:53.523841+05:30", "timestamp": 1755794153.523841}}}
{"text": "2025-08-21 22:05:53.525 | INFO     | app.services.dhan_client:get_pnl:587 - P&L calculation completed successfully: 5 symbols, unrealized=‚Çπ2747006.67\n", "record": {"elapsed": {"repr": "0:00:03.940294", "seconds": 3.940294}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 587, "message": "P&L calculation completed successfully: 5 symbols, unrealized=‚Çπ2747006.67", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 10756, "name": "MainProcess"}, "thread": {"id": 8976, "name": "MainThread"}, "time": {"repr": "2025-08-21 22:05:53.525640+05:30", "timestamp": 1755794153.52564}}}
{"text": "2025-08-21 22:05:53.528 | DEBUG    | app.ws.live:emit_delta:408 - Emitted pnl delta: seq=5\n", "record": {"elapsed": {"repr": "0:00:03.943158", "seconds": 3.943158}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "emit_delta", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 408, "message": "Emitted pnl delta: seq=5", "module": "live", "name": "app.ws.live", "process": {"id": 10756, "name": "MainProcess"}, "thread": {"id": 8976, "name": "MainThread"}, "time": {"repr": "2025-08-21 22:05:53.528504+05:30", "timestamp": 1755794153.528504}}}
{"text": "2025-08-21 22:05:53.539 | INFO     | app.ws.live:shutdown_event:557 - Stopping WebSocket polling...\n", "record": {"elapsed": {"repr": "0:00:03.954054", "seconds": 3.954054}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "shutdown_event", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 557, "message": "Stopping WebSocket polling...", "module": "live", "name": "app.ws.live", "process": {"id": 10756, "name": "MainProcess"}, "thread": {"id": 8976, "name": "MainThread"}, "time": {"repr": "2025-08-21 22:05:53.539400+05:30", "timestamp": 1755794153.5394}}}
{"text": "2025-08-21 22:05:53.542 | INFO     | app.ws.live:shutdown_event:557 - Stopping WebSocket polling...\n", "record": {"elapsed": {"repr": "0:00:03.956667", "seconds": 3.956667}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "shutdown_event", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 557, "message": "Stopping WebSocket polling...", "module": "live", "name": "app.ws.live", "process": {"id": 10756, "name": "MainProcess"}, "thread": {"id": 8976, "name": "MainThread"}, "time": {"repr": "2025-08-21 22:05:53.542013+05:30", "timestamp": 1755794153.542013}}}
{"text": "2025-08-21 22:05:53.544 | INFO     | app.main:shutdown_event:35 - Dhan Automation Backend Application shutting down\n", "record": {"elapsed": {"repr": "0:00:03.958729", "seconds": 3.958729}, "exception": null, "extra": {}, "file": {"name": "main.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\main.py"}, "function": "shutdown_event", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 35, "message": "Dhan Automation Backend Application shutting down", "module": "main", "name": "app.main", "process": {"id": 10756, "name": "MainProcess"}, "thread": {"id": 8976, "name": "MainThread"}, "time": {"repr": "2025-08-21 22:05:53.544075+05:30", "timestamp": 1755794153.544075}}}
{"text": "2025-08-21 22:06:02.655 | INFO     | app.services.dhan_client:_initialize_mock_data:53 - Initializing mock data...\n", "record": {"elapsed": {"repr": "0:00:00.218791", "seconds": 0.218791}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_initialize_mock_data", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 53, "message": "Initializing mock data...", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 4504, "name": "MainProcess"}, "thread": {"id": 20804, "name": "MainThread"}, "time": {"repr": "2025-08-21 22:06:02.655282+05:30", "timestamp": 1755794162.655282}}}
{"text": "2025-08-21 22:06:02.658 | INFO     | app.services.dhan_client:_initialize_mock_data:75 - Created mock holding for RELIANCE: qty=3693, avg_price=822.8788196943382, ltp=890.1625745605176\n", "record": {"elapsed": {"repr": "0:00:00.222282", "seconds": 0.222282}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_initialize_mock_data", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 75, "message": "Created mock holding for RELIANCE: qty=3693, avg_price=822.8788196943382, ltp=890.1625745605176", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 4504, "name": "MainProcess"}, "thread": {"id": 20804, "name": "MainThread"}, "time": {"repr": "2025-08-21 22:06:02.658773+05:30", "timestamp": 1755794162.658773}}}
{"text": "2025-08-21 22:06:02.661 | INFO     | app.services.dhan_client:_initialize_mock_data:75 - Created mock holding for TCS: qty=2981, avg_price=278.6334052594924, ltp=239.737345883406\n", "record": {"elapsed": {"repr": "0:00:00.225301", "seconds": 0.225301}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_initialize_mock_data", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 75, "message": "Created mock holding for TCS: qty=2981, avg_price=278.6334052594924, ltp=239.737345883406", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 4504, "name": "MainProcess"}, "thread": {"id": 20804, "name": "MainThread"}, "time": {"repr": "2025-08-21 22:06:02.661792+05:30", "timestamp": 1755794162.661792}}}
{"text": "2025-08-21 22:06:02.664 | INFO     | app.services.dhan_client:_initialize_mock_data:75 - Created mock holding for HDFC: qty=3407, avg_price=1131.168414340485, ltp=1037.9741588291581\n", "record": {"elapsed": {"repr": "0:00:00.228434", "seconds": 0.228434}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_initialize_mock_data", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 75, "message": "Created mock holding for HDFC: qty=3407, avg_price=1131.168414340485, ltp=1037.9741588291581", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 4504, "name": "MainProcess"}, "thread": {"id": 20804, "name": "MainThread"}, "time": {"repr": "2025-08-21 22:06:02.664925+05:30", "timestamp": 1755794162.664925}}}
{"text": "2025-08-21 22:06:02.671 | INFO     | app.services.dhan_client:_initialize_mock_data:75 - Created mock holding for INFY: qty=3359, avg_price=589.3194015419404, ltp=507.1890261511123\n", "record": {"elapsed": {"repr": "0:00:00.235429", "seconds": 0.235429}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_initialize_mock_data", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 75, "message": "Created mock holding for INFY: qty=3359, avg_price=589.3194015419404, ltp=507.1890261511123", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 4504, "name": "MainProcess"}, "thread": {"id": 20804, "name": "MainThread"}, "time": {"repr": "2025-08-21 22:06:02.671920+05:30", "timestamp": 1755794162.67192}}}
{"text": "2025-08-21 22:06:02.674 | INFO     | app.services.dhan_client:_initialize_mock_data:75 - Created mock holding for ICICIBANK: qty=1135, avg_price=258.172683383284, ltp=282.40866066976065\n", "record": {"elapsed": {"repr": "0:00:00.237718", "seconds": 0.237718}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_initialize_mock_data", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 75, "message": "Created mock holding for ICICIBANK: qty=1135, avg_price=258.172683383284, ltp=282.40866066976065", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 4504, "name": "MainProcess"}, "thread": {"id": 20804, "name": "MainThread"}, "time": {"repr": "2025-08-21 22:06:02.674209+05:30", "timestamp": 1755794162.674209}}}
{"text": "2025-08-21 22:06:02.677 | INFO     | app.services.dhan_client:_initialize_mock_data:75 - Created mock holding for HINDUNILVR: qty=1730, avg_price=811.0008323027433, ltp=706.9652131933873\n", "record": {"elapsed": {"repr": "0:00:00.241205", "seconds": 0.241205}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_initialize_mock_data", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 75, "message": "Created mock holding for HINDUNILVR: qty=1730, avg_price=811.0008323027433, ltp=706.9652131933873", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 4504, "name": "MainProcess"}, "thread": {"id": 20804, "name": "MainThread"}, "time": {"repr": "2025-08-21 22:06:02.677696+05:30", "timestamp": 1755794162.677696}}}
{"text": "2025-08-21 22:06:02.680 | INFO     | app.services.dhan_client:_initialize_mock_data:75 - Created mock holding for ITC: qty=1513, avg_price=1023.1498046668751, ltp=1182.2671654156088\n", "record": {"elapsed": {"repr": "0:00:00.243872", "seconds": 0.243872}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_initialize_mock_data", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 75, "message": "Created mock holding for ITC: qty=1513, avg_price=1023.1498046668751, ltp=1182.2671654156088", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 4504, "name": "MainProcess"}, "thread": {"id": 20804, "name": "MainThread"}, "time": {"repr": "2025-08-21 22:06:02.680363+05:30", "timestamp": 1755794162.680363}}}
{"text": "2025-08-21 22:06:02.681 | INFO     | app.services.dhan_client:_initialize_mock_data:75 - Created mock holding for SBIN: qty=1712, avg_price=803.9436602923615, ltp=909.9665580652994\n", "record": {"elapsed": {"repr": "0:00:00.244868", "seconds": 0.244868}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_initialize_mock_data", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 75, "message": "Created mock holding for SBIN: qty=1712, avg_price=803.9436602923615, ltp=909.9665580652994", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 4504, "name": "MainProcess"}, "thread": {"id": 20804, "name": "MainThread"}, "time": {"repr": "2025-08-21 22:06:02.681359+05:30", "timestamp": 1755794162.681359}}}
{"text": "2025-08-21 22:06:02.683 | INFO     | app.services.dhan_client:_initialize_mock_data:75 - Created mock holding for BHARTIARTL: qty=4215, avg_price=1505.6347471773274, ltp=1548.938777698936\n", "record": {"elapsed": {"repr": "0:00:00.246811", "seconds": 0.246811}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_initialize_mock_data", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 75, "message": "Created mock holding for BHARTIARTL: qty=4215, avg_price=1505.6347471773274, ltp=1548.938777698936", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 4504, "name": "MainProcess"}, "thread": {"id": 20804, "name": "MainThread"}, "time": {"repr": "2025-08-21 22:06:02.683302+05:30", "timestamp": 1755794162.683302}}}
{"text": "2025-08-21 22:06:02.685 | INFO     | app.services.dhan_client:_initialize_mock_data:75 - Created mock holding for KOTAKBANK: qty=3852, avg_price=525.4367587646383, ltp=619.4159250342196\n", "record": {"elapsed": {"repr": "0:00:00.248644", "seconds": 0.248644}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_initialize_mock_data", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 75, "message": "Created mock holding for KOTAKBANK: qty=3852, avg_price=525.4367587646383, ltp=619.4159250342196", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 4504, "name": "MainProcess"}, "thread": {"id": 20804, "name": "MainThread"}, "time": {"repr": "2025-08-21 22:06:02.685135+05:30", "timestamp": 1755794162.685135}}}
{"text": "2025-08-21 22:06:02.686 | INFO     | app.services.dhan_client:_initialize_mock_data:77 - Created 10 mock holdings\n", "record": {"elapsed": {"repr": "0:00:00.250291", "seconds": 0.250291}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_initialize_mock_data", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 77, "message": "Created 10 mock holdings", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 4504, "name": "MainProcess"}, "thread": {"id": 20804, "name": "MainThread"}, "time": {"repr": "2025-08-21 22:06:02.686782+05:30", "timestamp": 1755794162.686782}}}
{"text": "2025-08-21 22:06:02.688 | INFO     | app.services.dhan_client:_initialize_mock_data:91 - Created mock position for RELIANCE: id=pos_001, qty=1255, avg_price=651.37\n", "record": {"elapsed": {"repr": "0:00:00.251789", "seconds": 0.251789}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_initialize_mock_data", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 91, "message": "Created mock position for RELIANCE: id=pos_001, qty=1255, avg_price=651.37", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 4504, "name": "MainProcess"}, "thread": {"id": 20804, "name": "MainThread"}, "time": {"repr": "2025-08-21 22:06:02.688280+05:30", "timestamp": 1755794162.68828}}}
{"text": "2025-08-21 22:06:02.690 | INFO     | app.services.dhan_client:_initialize_mock_data:91 - Created mock position for TCS: id=pos_002, qty=1835, avg_price=1714.34\n", "record": {"elapsed": {"repr": "0:00:00.254315", "seconds": 0.254315}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_initialize_mock_data", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 91, "message": "Created mock position for TCS: id=pos_002, qty=1835, avg_price=1714.34", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 4504, "name": "MainProcess"}, "thread": {"id": 20804, "name": "MainThread"}, "time": {"repr": "2025-08-21 22:06:02.690806+05:30", "timestamp": 1755794162.690806}}}
{"text": "2025-08-21 22:06:02.692 | INFO     | app.services.dhan_client:_initialize_mock_data:91 - Created mock position for HDFC: id=pos_003, qty=402, avg_price=1570.15\n", "record": {"elapsed": {"repr": "0:00:00.255789", "seconds": 0.255789}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_initialize_mock_data", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 91, "message": "Created mock position for HDFC: id=pos_003, qty=402, avg_price=1570.15", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 4504, "name": "MainProcess"}, "thread": {"id": 20804, "name": "MainThread"}, "time": {"repr": "2025-08-21 22:06:02.692280+05:30", "timestamp": 1755794162.69228}}}
{"text": "2025-08-21 22:06:02.694 | INFO     | app.services.dhan_client:_initialize_mock_data:91 - Created mock position for INFY: id=pos_004, qty=1889, avg_price=458.11\n", "record": {"elapsed": {"repr": "0:00:00.257784", "seconds": 0.257784}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_initialize_mock_data", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 91, "message": "Created mock position for INFY: id=pos_004, qty=1889, avg_price=458.11", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 4504, "name": "MainProcess"}, "thread": {"id": 20804, "name": "MainThread"}, "time": {"repr": "2025-08-21 22:06:02.694275+05:30", "timestamp": 1755794162.694275}}}
{"text": "2025-08-21 22:06:02.695 | INFO     | app.services.dhan_client:_initialize_mock_data:91 - Created mock position for ICICIBANK: id=pos_005, qty=1029, avg_price=664.9\n", "record": {"elapsed": {"repr": "0:00:00.259181", "seconds": 0.259181}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_initialize_mock_data", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 91, "message": "Created mock position for ICICIBANK: id=pos_005, qty=1029, avg_price=664.9", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 4504, "name": "MainProcess"}, "thread": {"id": 20804, "name": "MainThread"}, "time": {"repr": "2025-08-21 22:06:02.695672+05:30", "timestamp": 1755794162.695672}}}
{"text": "2025-08-21 22:06:02.697 | INFO     | app.services.dhan_client:_initialize_mock_data:93 - Created 5 mock positions\n", "record": {"elapsed": {"repr": "0:00:00.261137", "seconds": 0.261137}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_initialize_mock_data", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 93, "message": "Created 5 mock positions", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 4504, "name": "MainProcess"}, "thread": {"id": 20804, "name": "MainThread"}, "time": {"repr": "2025-08-21 22:06:02.697628+05:30", "timestamp": 1755794162.697628}}}
{"text": "2025-08-21 22:06:02.700 | INFO     | app.services.dhan_client:_initialize_mock_data:111 - Created 10 mock orders\n", "record": {"elapsed": {"repr": "0:00:00.264371", "seconds": 0.264371}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_initialize_mock_data", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 111, "message": "Created 10 mock orders", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 4504, "name": "MainProcess"}, "thread": {"id": 20804, "name": "MainThread"}, "time": {"repr": "2025-08-21 22:06:02.700862+05:30", "timestamp": 1755794162.700862}}}
{"text": "2025-08-21 22:06:02.703 | INFO     | app.services.dhan_client:_initialize_mock_data:127 - Created 20 mock trades\n", "record": {"elapsed": {"repr": "0:00:00.266831", "seconds": 0.266831}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_initialize_mock_data", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 127, "message": "Created 20 mock trades", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 4504, "name": "MainProcess"}, "thread": {"id": 20804, "name": "MainThread"}, "time": {"repr": "2025-08-21 22:06:02.703322+05:30", "timestamp": 1755794162.703322}}}
{"text": "2025-08-21 22:06:02.705 | INFO     | app.services.dhan_client:_initialize_mock_data:128 - Mock data initialization completed successfully\n", "record": {"elapsed": {"repr": "0:00:00.269056", "seconds": 0.269056}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_initialize_mock_data", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 128, "message": "Mock data initialization completed successfully", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 4504, "name": "MainProcess"}, "thread": {"id": 20804, "name": "MainThread"}, "time": {"repr": "2025-08-21 22:06:02.705547+05:30", "timestamp": 1755794162.705547}}}
{"text": "2025-08-21 22:06:02.817 | INFO     | app.main:<module>:38 - Starting Dhan Automation Backend Application\n", "record": {"elapsed": {"repr": "0:00:00.380831", "seconds": 0.380831}, "exception": null, "extra": {}, "file": {"name": "main.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\main.py"}, "function": "<module>", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 38, "message": "Starting Dhan Automation Backend Application", "module": "main", "name": "app.main", "process": {"id": 4504, "name": "MainProcess"}, "thread": {"id": 20804, "name": "MainThread"}, "time": {"repr": "2025-08-21 22:06:02.817322+05:30", "timestamp": 1755794162.817322}}}
{"text": "2025-08-21 22:06:12.219 | INFO     | app.services.dhan_client:_initialize_mock_data:53 - Initializing mock data...\n", "record": {"elapsed": {"repr": "0:00:00.140303", "seconds": 0.140303}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_initialize_mock_data", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 53, "message": "Initializing mock data...", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 30236, "name": "MainProcess"}, "thread": {"id": 30312, "name": "MainThread"}, "time": {"repr": "2025-08-21 22:06:12.219703+05:30", "timestamp": 1755794172.219703}}}
{"text": "2025-08-21 22:06:12.222 | INFO     | app.services.dhan_client:_initialize_mock_data:75 - Created mock holding for RELIANCE: qty=1860, avg_price=986.4865679750911, ltp=1059.5479566201307\n", "record": {"elapsed": {"repr": "0:00:00.142871", "seconds": 0.142871}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_initialize_mock_data", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 75, "message": "Created mock holding for RELIANCE: qty=1860, avg_price=986.4865679750911, ltp=1059.5479566201307", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 30236, "name": "MainProcess"}, "thread": {"id": 30312, "name": "MainThread"}, "time": {"repr": "2025-08-21 22:06:12.222271+05:30", "timestamp": 1755794172.222271}}}
{"text": "2025-08-21 22:06:12.224 | INFO     | app.services.dhan_client:_initialize_mock_data:75 - Created mock holding for TCS: qty=781, avg_price=1012.1724629419451, ltp=1117.3741872062105\n", "record": {"elapsed": {"repr": "0:00:00.145402", "seconds": 0.145402}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_initialize_mock_data", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 75, "message": "Created mock holding for TCS: qty=781, avg_price=1012.1724629419451, ltp=1117.3741872062105", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 30236, "name": "MainProcess"}, "thread": {"id": 30312, "name": "MainThread"}, "time": {"repr": "2025-08-21 22:06:12.224802+05:30", "timestamp": 1755794172.224802}}}
{"text": "2025-08-21 22:06:12.226 | INFO     | app.services.dhan_client:_initialize_mock_data:75 - Created mock holding for HDFC: qty=490, avg_price=1534.0207918399667, ltp=1589.4347158094856\n", "record": {"elapsed": {"repr": "0:00:00.147476", "seconds": 0.147476}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_initialize_mock_data", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 75, "message": "Created mock holding for HDFC: qty=490, avg_price=1534.0207918399667, ltp=1589.4347158094856", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 30236, "name": "MainProcess"}, "thread": {"id": 30312, "name": "MainThread"}, "time": {"repr": "2025-08-21 22:06:12.226876+05:30", "timestamp": 1755794172.226876}}}
{"text": "2025-08-21 22:06:12.228 | INFO     | app.services.dhan_client:_initialize_mock_data:75 - Created mock holding for INFY: qty=4066, avg_price=172.4763777643322, ltp=157.28125893142916\n", "record": {"elapsed": {"repr": "0:00:00.149513", "seconds": 0.149513}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_initialize_mock_data", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 75, "message": "Created mock holding for INFY: qty=4066, avg_price=172.4763777643322, ltp=157.28125893142916", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 30236, "name": "MainProcess"}, "thread": {"id": 30312, "name": "MainThread"}, "time": {"repr": "2025-08-21 22:06:12.228913+05:30", "timestamp": 1755794172.228913}}}
{"text": "2025-08-21 22:06:12.230 | INFO     | app.services.dhan_client:_initialize_mock_data:75 - Created mock holding for ICICIBANK: qty=533, avg_price=1033.9729904876258, ltp=955.6438615602134\n", "record": {"elapsed": {"repr": "0:00:00.150754", "seconds": 0.150754}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_initialize_mock_data", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 75, "message": "Created mock holding for ICICIBANK: qty=533, avg_price=1033.9729904876258, ltp=955.6438615602134", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 30236, "name": "MainProcess"}, "thread": {"id": 30312, "name": "MainThread"}, "time": {"repr": "2025-08-21 22:06:12.230154+05:30", "timestamp": 1755794172.230154}}}
{"text": "2025-08-21 22:06:12.232 | INFO     | app.services.dhan_client:_initialize_mock_data:75 - Created mock holding for HINDUNILVR: qty=1304, avg_price=410.7873346139028, ltp=383.9040438253478\n", "record": {"elapsed": {"repr": "0:00:00.152629", "seconds": 0.152629}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_initialize_mock_data", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 75, "message": "Created mock holding for HINDUNILVR: qty=1304, avg_price=410.7873346139028, ltp=383.9040438253478", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 30236, "name": "MainProcess"}, "thread": {"id": 30312, "name": "MainThread"}, "time": {"repr": "2025-08-21 22:06:12.232029+05:30", "timestamp": 1755794172.232029}}}
{"text": "2025-08-21 22:06:12.233 | INFO     | app.services.dhan_client:_initialize_mock_data:75 - Created mock holding for ITC: qty=449, avg_price=859.5181488289927, ltp=1021.1971416701128\n", "record": {"elapsed": {"repr": "0:00:00.153989", "seconds": 0.153989}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_initialize_mock_data", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 75, "message": "Created mock holding for ITC: qty=449, avg_price=859.5181488289927, ltp=1021.1971416701128", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 30236, "name": "MainProcess"}, "thread": {"id": 30312, "name": "MainThread"}, "time": {"repr": "2025-08-21 22:06:12.233389+05:30", "timestamp": 1755794172.233389}}}
{"text": "2025-08-21 22:06:12.235 | INFO     | app.services.dhan_client:_initialize_mock_data:75 - Created mock holding for SBIN: qty=2654, avg_price=1547.4977867707025, ltp=1375.817999381067\n", "record": {"elapsed": {"repr": "0:00:00.156157", "seconds": 0.156157}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_initialize_mock_data", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 75, "message": "Created mock holding for SBIN: qty=2654, avg_price=1547.4977867707025, ltp=1375.817999381067", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 30236, "name": "MainProcess"}, "thread": {"id": 30312, "name": "MainThread"}, "time": {"repr": "2025-08-21 22:06:12.235557+05:30", "timestamp": 1755794172.235557}}}
{"text": "2025-08-21 22:06:12.237 | INFO     | app.services.dhan_client:_initialize_mock_data:75 - Created mock holding for BHARTIARTL: qty=2557, avg_price=207.86811754605185, ltp=185.80054069178192\n", "record": {"elapsed": {"repr": "0:00:00.158271", "seconds": 0.158271}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_initialize_mock_data", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 75, "message": "Created mock holding for BHARTIARTL: qty=2557, avg_price=207.86811754605185, ltp=185.80054069178192", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 30236, "name": "MainProcess"}, "thread": {"id": 30312, "name": "MainThread"}, "time": {"repr": "2025-08-21 22:06:12.237671+05:30", "timestamp": 1755794172.237671}}}
{"text": "2025-08-21 22:06:12.240 | INFO     | app.services.dhan_client:_initialize_mock_data:75 - Created mock holding for KOTAKBANK: qty=2086, avg_price=966.7441673015607, ltp=801.3994966111318\n", "record": {"elapsed": {"repr": "0:00:00.160727", "seconds": 0.160727}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_initialize_mock_data", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 75, "message": "Created mock holding for KOTAKBANK: qty=2086, avg_price=966.7441673015607, ltp=801.3994966111318", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 30236, "name": "MainProcess"}, "thread": {"id": 30312, "name": "MainThread"}, "time": {"repr": "2025-08-21 22:06:12.240127+05:30", "timestamp": 1755794172.240127}}}
{"text": "2025-08-21 22:06:12.241 | INFO     | app.services.dhan_client:_initialize_mock_data:77 - Created 10 mock holdings\n", "record": {"elapsed": {"repr": "0:00:00.161890", "seconds": 0.16189}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_initialize_mock_data", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 77, "message": "Created 10 mock holdings", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 30236, "name": "MainProcess"}, "thread": {"id": 30312, "name": "MainThread"}, "time": {"repr": "2025-08-21 22:06:12.241290+05:30", "timestamp": 1755794172.24129}}}
{"text": "2025-08-21 22:06:12.243 | INFO     | app.services.dhan_client:_initialize_mock_data:91 - Created mock position for RELIANCE: id=pos_001, qty=1636, avg_price=394.87\n", "record": {"elapsed": {"repr": "0:00:00.163972", "seconds": 0.163972}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_initialize_mock_data", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 91, "message": "Created mock position for RELIANCE: id=pos_001, qty=1636, avg_price=394.87", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 30236, "name": "MainProcess"}, "thread": {"id": 30312, "name": "MainThread"}, "time": {"repr": "2025-08-21 22:06:12.243372+05:30", "timestamp": 1755794172.243372}}}
{"text": "2025-08-21 22:06:12.245 | INFO     | app.services.dhan_client:_initialize_mock_data:91 - Created mock position for TCS: id=pos_002, qty=1873, avg_price=154.89\n", "record": {"elapsed": {"repr": "0:00:00.166356", "seconds": 0.166356}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_initialize_mock_data", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 91, "message": "Created mock position for TCS: id=pos_002, qty=1873, avg_price=154.89", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 30236, "name": "MainProcess"}, "thread": {"id": 30312, "name": "MainThread"}, "time": {"repr": "2025-08-21 22:06:12.245756+05:30", "timestamp": 1755794172.245756}}}
{"text": "2025-08-21 22:06:12.247 | INFO     | app.services.dhan_client:_initialize_mock_data:91 - Created mock position for HDFC: id=pos_003, qty=1408, avg_price=221.34\n", "record": {"elapsed": {"repr": "0:00:00.168514", "seconds": 0.168514}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_initialize_mock_data", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 91, "message": "Created mock position for HDFC: id=pos_003, qty=1408, avg_price=221.34", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 30236, "name": "MainProcess"}, "thread": {"id": 30312, "name": "MainThread"}, "time": {"repr": "2025-08-21 22:06:12.247914+05:30", "timestamp": 1755794172.247914}}}
{"text": "2025-08-21 22:06:12.249 | INFO     | app.services.dhan_client:_initialize_mock_data:91 - Created mock position for INFY: id=pos_004, qty=105, avg_price=848.94\n", "record": {"elapsed": {"repr": "0:00:00.170464", "seconds": 0.170464}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_initialize_mock_data", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 91, "message": "Created mock position for INFY: id=pos_004, qty=105, avg_price=848.94", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 30236, "name": "MainProcess"}, "thread": {"id": 30312, "name": "MainThread"}, "time": {"repr": "2025-08-21 22:06:12.249864+05:30", "timestamp": 1755794172.249864}}}
{"text": "2025-08-21 22:06:12.253 | INFO     | app.services.dhan_client:_initialize_mock_data:91 - Created mock position for ICICIBANK: id=pos_005, qty=1389, avg_price=684.77\n", "record": {"elapsed": {"repr": "0:00:00.174467", "seconds": 0.174467}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_initialize_mock_data", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 91, "message": "Created mock position for ICICIBANK: id=pos_005, qty=1389, avg_price=684.77", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 30236, "name": "MainProcess"}, "thread": {"id": 30312, "name": "MainThread"}, "time": {"repr": "2025-08-21 22:06:12.253867+05:30", "timestamp": 1755794172.253867}}}
{"text": "2025-08-21 22:06:12.257 | INFO     | app.services.dhan_client:_initialize_mock_data:93 - Created 5 mock positions\n", "record": {"elapsed": {"repr": "0:00:00.177683", "seconds": 0.177683}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_initialize_mock_data", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 93, "message": "Created 5 mock positions", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 30236, "name": "MainProcess"}, "thread": {"id": 30312, "name": "MainThread"}, "time": {"repr": "2025-08-21 22:06:12.257083+05:30", "timestamp": 1755794172.257083}}}
{"text": "2025-08-21 22:06:12.261 | INFO     | app.services.dhan_client:_initialize_mock_data:111 - Created 10 mock orders\n", "record": {"elapsed": {"repr": "0:00:00.182156", "seconds": 0.182156}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_initialize_mock_data", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 111, "message": "Created 10 mock orders", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 30236, "name": "MainProcess"}, "thread": {"id": 30312, "name": "MainThread"}, "time": {"repr": "2025-08-21 22:06:12.261556+05:30", "timestamp": 1755794172.261556}}}
{"text": "2025-08-21 22:06:12.266 | INFO     | app.services.dhan_client:_initialize_mock_data:127 - Created 20 mock trades\n", "record": {"elapsed": {"repr": "0:00:00.187442", "seconds": 0.187442}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_initialize_mock_data", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 127, "message": "Created 20 mock trades", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 30236, "name": "MainProcess"}, "thread": {"id": 30312, "name": "MainThread"}, "time": {"repr": "2025-08-21 22:06:12.266842+05:30", "timestamp": 1755794172.266842}}}
{"text": "2025-08-21 22:06:12.268 | INFO     | app.services.dhan_client:_initialize_mock_data:128 - Mock data initialization completed successfully\n", "record": {"elapsed": {"repr": "0:00:00.189209", "seconds": 0.189209}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_initialize_mock_data", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 128, "message": "Mock data initialization completed successfully", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 30236, "name": "MainProcess"}, "thread": {"id": 30312, "name": "MainThread"}, "time": {"repr": "2025-08-21 22:06:12.268609+05:30", "timestamp": 1755794172.268609}}}
{"text": "2025-08-21 22:06:12.369 | INFO     | app.main:<module>:38 - Starting Dhan Automation Backend Application\n", "record": {"elapsed": {"repr": "0:00:00.290058", "seconds": 0.290058}, "exception": null, "extra": {}, "file": {"name": "main.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\main.py"}, "function": "<module>", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 38, "message": "Starting Dhan Automation Backend Application", "module": "main", "name": "app.main", "process": {"id": 30236, "name": "MainProcess"}, "thread": {"id": 30312, "name": "MainThread"}, "time": {"repr": "2025-08-21 22:06:12.369458+05:30", "timestamp": 1755794172.369458}}}
