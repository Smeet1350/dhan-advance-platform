{"text": "2025-08-21 18:29:32.163 | INFO     | app.ws.live:disconnect:234 - WebSocket disconnected: 127.0.0.1\n", "record": {"elapsed": {"repr": "0:00:56.161362", "seconds": 56.161362}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "disconnect", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 234, "message": "WebSocket disconnected: 127.0.0.1", "module": "live", "name": "app.ws.live", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:29:32.163337+05:30", "timestamp": 1755781172.163337}}}
{"text": "2025-08-21 18:29:32.179 | INFO     | app.ws.live:disconnect:234 - WebSocket disconnected: 127.0.0.1\n", "record": {"elapsed": {"repr": "0:00:56.177530", "seconds": 56.17753}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "disconnect", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 234, "message": "WebSocket disconnected: 127.0.0.1", "module": "live", "name": "app.ws.live", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:29:32.179505+05:30", "timestamp": 1755781172.179505}}}
{"text": "2025-08-21 18:29:32.181 | INFO     | app.ws.live:disconnect:234 - WebSocket disconnected: 127.0.0.1\n", "record": {"elapsed": {"repr": "0:00:56.179267", "seconds": 56.179267}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "disconnect", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 234, "message": "WebSocket disconnected: 127.0.0.1", "module": "live", "name": "app.ws.live", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:29:32.181242+05:30", "timestamp": 1755781172.181242}}}
{"text": "2025-08-21 18:29:32.182 | INFO     | app.ws.live:disconnect:234 - WebSocket disconnected: 127.0.0.1\n", "record": {"elapsed": {"repr": "0:00:56.180355", "seconds": 56.180355}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "disconnect", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 234, "message": "WebSocket disconnected: 127.0.0.1", "module": "live", "name": "app.ws.live", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:29:32.182330+05:30", "timestamp": 1755781172.18233}}}
{"text": "2025-08-21 18:29:32.183 | INFO     | app.ws.live:disconnect:234 - WebSocket disconnected: 127.0.0.1\n", "record": {"elapsed": {"repr": "0:00:56.181323", "seconds": 56.181323}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "disconnect", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 234, "message": "WebSocket disconnected: 127.0.0.1", "module": "live", "name": "app.ws.live", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:29:32.183298+05:30", "timestamp": 1755781172.183298}}}
{"text": "2025-08-21 18:29:32.184 | INFO     | app.ws.live:disconnect:234 - WebSocket disconnected: 127.0.0.1\n", "record": {"elapsed": {"repr": "0:00:56.182424", "seconds": 56.182424}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "disconnect", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 234, "message": "WebSocket disconnected: 127.0.0.1", "module": "live", "name": "app.ws.live", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:29:32.184399+05:30", "timestamp": 1755781172.184399}}}
{"text": "2025-08-21 18:29:32.185 | INFO     | app.ws.live:disconnect:234 - WebSocket disconnected: 127.0.0.1\n", "record": {"elapsed": {"repr": "0:00:56.183876", "seconds": 56.183876}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "disconnect", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 234, "message": "WebSocket disconnected: 127.0.0.1", "module": "live", "name": "app.ws.live", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:29:32.185851+05:30", "timestamp": 1755781172.185851}}}
{"text": "2025-08-21 18:29:32.206 | INFO     | app.ws.live:disconnect:234 - WebSocket disconnected: 127.0.0.1\n", "record": {"elapsed": {"repr": "0:00:56.204974", "seconds": 56.204974}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "disconnect", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 234, "message": "WebSocket disconnected: 127.0.0.1", "module": "live", "name": "app.ws.live", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:29:32.206949+05:30", "timestamp": 1755781172.206949}}}
{"text": "2025-08-21 18:29:32.208 | INFO     | app.ws.live:disconnect:234 - WebSocket disconnected: 127.0.0.1\n", "record": {"elapsed": {"repr": "0:00:56.206101", "seconds": 56.206101}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "disconnect", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 234, "message": "WebSocket disconnected: 127.0.0.1", "module": "live", "name": "app.ws.live", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:29:32.208076+05:30", "timestamp": 1755781172.208076}}}
{"text": "2025-08-21 18:29:32.209 | INFO     | app.ws.live:disconnect:234 - WebSocket disconnected: 127.0.0.1\n", "record": {"elapsed": {"repr": "0:00:56.207122", "seconds": 56.207122}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "disconnect", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 234, "message": "WebSocket disconnected: 127.0.0.1", "module": "live", "name": "app.ws.live", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:29:32.209097+05:30", "timestamp": 1755781172.209097}}}
{"text": "2025-08-21 18:29:32.210 | INFO     | app.ws.live:disconnect:234 - WebSocket disconnected: 127.0.0.1\n", "record": {"elapsed": {"repr": "0:00:56.208140", "seconds": 56.20814}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "disconnect", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 234, "message": "WebSocket disconnected: 127.0.0.1", "module": "live", "name": "app.ws.live", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:29:32.210115+05:30", "timestamp": 1755781172.210115}}}
{"text": "2025-08-21 18:29:32.210 | INFO     | app.ws.live:disconnect:234 - WebSocket disconnected: 127.0.0.1\n", "record": {"elapsed": {"repr": "0:00:56.209002", "seconds": 56.209002}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "disconnect", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 234, "message": "WebSocket disconnected: 127.0.0.1", "module": "live", "name": "app.ws.live", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:29:32.210977+05:30", "timestamp": 1755781172.210977}}}
{"text": "2025-08-21 18:29:32.212 | INFO     | app.ws.live:disconnect:234 - WebSocket disconnected: 127.0.0.1\n", "record": {"elapsed": {"repr": "0:00:56.210096", "seconds": 56.210096}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "disconnect", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 234, "message": "WebSocket disconnected: 127.0.0.1", "module": "live", "name": "app.ws.live", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:29:32.212071+05:30", "timestamp": 1755781172.212071}}}
{"text": "2025-08-21 18:29:32.212 | INFO     | app.ws.live:disconnect:234 - WebSocket disconnected: 127.0.0.1\n", "record": {"elapsed": {"repr": "0:00:56.210993", "seconds": 56.210993}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "disconnect", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 234, "message": "WebSocket disconnected: 127.0.0.1", "module": "live", "name": "app.ws.live", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:29:32.212968+05:30", "timestamp": 1755781172.212968}}}
{"text": "2025-08-21 18:29:32.213 | INFO     | app.ws.live:disconnect:234 - WebSocket disconnected: 127.0.0.1\n", "record": {"elapsed": {"repr": "0:00:56.211881", "seconds": 56.211881}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "disconnect", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 234, "message": "WebSocket disconnected: 127.0.0.1", "module": "live", "name": "app.ws.live", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:29:32.213856+05:30", "timestamp": 1755781172.213856}}}
{"text": "2025-08-21 18:29:32.214 | INFO     | app.ws.live:disconnect:234 - WebSocket disconnected: 127.0.0.1\n", "record": {"elapsed": {"repr": "0:00:56.212765", "seconds": 56.212765}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "disconnect", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 234, "message": "WebSocket disconnected: 127.0.0.1", "module": "live", "name": "app.ws.live", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:29:32.214740+05:30", "timestamp": 1755781172.21474}}}
{"text": "2025-08-21 18:29:32.215 | INFO     | app.ws.live:disconnect:234 - WebSocket disconnected: 127.0.0.1\n", "record": {"elapsed": {"repr": "0:00:56.213658", "seconds": 56.213658}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "disconnect", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 234, "message": "WebSocket disconnected: 127.0.0.1", "module": "live", "name": "app.ws.live", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:29:32.215633+05:30", "timestamp": 1755781172.215633}}}
{"text": "2025-08-21 18:29:32.216 | INFO     | app.ws.live:disconnect:234 - WebSocket disconnected: 127.0.0.1\n", "record": {"elapsed": {"repr": "0:00:56.214506", "seconds": 56.214506}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "disconnect", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 234, "message": "WebSocket disconnected: 127.0.0.1", "module": "live", "name": "app.ws.live", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:29:32.216481+05:30", "timestamp": 1755781172.216481}}}
{"text": "2025-08-21 18:29:32.217 | INFO     | app.ws.live:disconnect:234 - WebSocket disconnected: 127.0.0.1\n", "record": {"elapsed": {"repr": "0:00:56.215404", "seconds": 56.215404}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "disconnect", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 234, "message": "WebSocket disconnected: 127.0.0.1", "module": "live", "name": "app.ws.live", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:29:32.217379+05:30", "timestamp": 1755781172.217379}}}
{"text": "2025-08-21 18:29:32.218 | INFO     | app.ws.live:disconnect:234 - WebSocket disconnected: 127.0.0.1\n", "record": {"elapsed": {"repr": "0:00:56.216199", "seconds": 56.216199}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "disconnect", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 234, "message": "WebSocket disconnected: 127.0.0.1", "module": "live", "name": "app.ws.live", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:29:32.218174+05:30", "timestamp": 1755781172.218174}}}
{"text": "2025-08-21 18:29:32.219 | INFO     | app.ws.live:disconnect:234 - WebSocket disconnected: 127.0.0.1\n", "record": {"elapsed": {"repr": "0:00:56.217221", "seconds": 56.217221}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "disconnect", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 234, "message": "WebSocket disconnected: 127.0.0.1", "module": "live", "name": "app.ws.live", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:29:32.219196+05:30", "timestamp": 1755781172.219196}}}
{"text": "2025-08-21 18:29:32.220 | INFO     | app.ws.live:disconnect:234 - WebSocket disconnected: 127.0.0.1\n", "record": {"elapsed": {"repr": "0:00:56.218278", "seconds": 56.218278}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "disconnect", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 234, "message": "WebSocket disconnected: 127.0.0.1", "module": "live", "name": "app.ws.live", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:29:32.220253+05:30", "timestamp": 1755781172.220253}}}
{"text": "2025-08-21 18:29:32.221 | INFO     | app.ws.live:disconnect:234 - WebSocket disconnected: 127.0.0.1\n", "record": {"elapsed": {"repr": "0:00:56.219408", "seconds": 56.219408}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "disconnect", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 234, "message": "WebSocket disconnected: 127.0.0.1", "module": "live", "name": "app.ws.live", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:29:32.221383+05:30", "timestamp": 1755781172.221383}}}
{"text": "2025-08-21 18:29:32.222 | INFO     | app.ws.live:disconnect:234 - WebSocket disconnected: 127.0.0.1\n", "record": {"elapsed": {"repr": "0:00:56.220409", "seconds": 56.220409}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "disconnect", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 234, "message": "WebSocket disconnected: 127.0.0.1", "module": "live", "name": "app.ws.live", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:29:32.222384+05:30", "timestamp": 1755781172.222384}}}
{"text": "2025-08-21 18:29:32.223 | INFO     | app.ws.live:disconnect:234 - WebSocket disconnected: 127.0.0.1\n", "record": {"elapsed": {"repr": "0:00:56.222004", "seconds": 56.222004}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "disconnect", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 234, "message": "WebSocket disconnected: 127.0.0.1", "module": "live", "name": "app.ws.live", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:29:32.223979+05:30", "timestamp": 1755781172.223979}}}
{"text": "2025-08-21 18:29:32.229 | INFO     | app.ws.live:disconnect:234 - WebSocket disconnected: 127.0.0.1\n", "record": {"elapsed": {"repr": "0:00:56.227864", "seconds": 56.227864}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "disconnect", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 234, "message": "WebSocket disconnected: 127.0.0.1", "module": "live", "name": "app.ws.live", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:29:32.229839+05:30", "timestamp": 1755781172.229839}}}
{"text": "2025-08-21 18:29:32.230 | INFO     | app.ws.live:disconnect:234 - WebSocket disconnected: 127.0.0.1\n", "record": {"elapsed": {"repr": "0:00:56.228532", "seconds": 56.228532}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "disconnect", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 234, "message": "WebSocket disconnected: 127.0.0.1", "module": "live", "name": "app.ws.live", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:29:32.230507+05:30", "timestamp": 1755781172.230507}}}
{"text": "2025-08-21 18:29:32.231 | INFO     | app.ws.live:disconnect:234 - WebSocket disconnected: 127.0.0.1\n", "record": {"elapsed": {"repr": "0:00:56.229470", "seconds": 56.22947}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "disconnect", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 234, "message": "WebSocket disconnected: 127.0.0.1", "module": "live", "name": "app.ws.live", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:29:32.231445+05:30", "timestamp": 1755781172.231445}}}
{"text": "2025-08-21 18:29:32.232 | INFO     | app.ws.live:disconnect:234 - WebSocket disconnected: 127.0.0.1\n", "record": {"elapsed": {"repr": "0:00:56.230357", "seconds": 56.230357}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "disconnect", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 234, "message": "WebSocket disconnected: 127.0.0.1", "module": "live", "name": "app.ws.live", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:29:32.232332+05:30", "timestamp": 1755781172.232332}}}
{"text": "2025-08-21 18:29:32.233 | INFO     | app.ws.live:disconnect:234 - WebSocket disconnected: 127.0.0.1\n", "record": {"elapsed": {"repr": "0:00:56.231215", "seconds": 56.231215}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "disconnect", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 234, "message": "WebSocket disconnected: 127.0.0.1", "module": "live", "name": "app.ws.live", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:29:32.233190+05:30", "timestamp": 1755781172.23319}}}
{"text": "2025-08-21 18:29:32.234 | INFO     | app.ws.live:disconnect:234 - WebSocket disconnected: 127.0.0.1\n", "record": {"elapsed": {"repr": "0:00:56.232136", "seconds": 56.232136}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "disconnect", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 234, "message": "WebSocket disconnected: 127.0.0.1", "module": "live", "name": "app.ws.live", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:29:32.234111+05:30", "timestamp": 1755781172.234111}}}
{"text": "2025-08-21 18:29:32.237 | INFO     | app.ws.live:disconnect:234 - WebSocket disconnected: 127.0.0.1\n", "record": {"elapsed": {"repr": "0:00:56.235172", "seconds": 56.235172}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "disconnect", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 234, "message": "WebSocket disconnected: 127.0.0.1", "module": "live", "name": "app.ws.live", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:29:32.237147+05:30", "timestamp": 1755781172.237147}}}
{"text": "2025-08-21 18:29:32.238 | INFO     | app.ws.live:disconnect:234 - WebSocket disconnected: 127.0.0.1\n", "record": {"elapsed": {"repr": "0:00:56.236445", "seconds": 56.236445}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "disconnect", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 234, "message": "WebSocket disconnected: 127.0.0.1", "module": "live", "name": "app.ws.live", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:29:32.238420+05:30", "timestamp": 1755781172.23842}}}
{"text": "2025-08-21 18:29:32.241 | INFO     | app.ws.live:disconnect:234 - WebSocket disconnected: 127.0.0.1\n", "record": {"elapsed": {"repr": "0:00:56.239223", "seconds": 56.239223}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "disconnect", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 234, "message": "WebSocket disconnected: 127.0.0.1", "module": "live", "name": "app.ws.live", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:29:32.241198+05:30", "timestamp": 1755781172.241198}}}
{"text": "2025-08-21 18:29:32.243 | INFO     | app.ws.live:disconnect:234 - WebSocket disconnected: 127.0.0.1\n", "record": {"elapsed": {"repr": "0:00:56.241056", "seconds": 56.241056}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "disconnect", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 234, "message": "WebSocket disconnected: 127.0.0.1", "module": "live", "name": "app.ws.live", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:29:32.243031+05:30", "timestamp": 1755781172.243031}}}
{"text": "2025-08-21 18:29:32.244 | INFO     | app.ws.live:disconnect:234 - WebSocket disconnected: 127.0.0.1\n", "record": {"elapsed": {"repr": "0:00:56.242820", "seconds": 56.24282}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "disconnect", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 234, "message": "WebSocket disconnected: 127.0.0.1", "module": "live", "name": "app.ws.live", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:29:32.244795+05:30", "timestamp": 1755781172.244795}}}
{"text": "2025-08-21 18:29:32.246 | INFO     | app.ws.live:disconnect:234 - WebSocket disconnected: 127.0.0.1\n", "record": {"elapsed": {"repr": "0:00:56.244412", "seconds": 56.244412}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "disconnect", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 234, "message": "WebSocket disconnected: 127.0.0.1", "module": "live", "name": "app.ws.live", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:29:32.246387+05:30", "timestamp": 1755781172.246387}}}
{"text": "2025-08-21 18:29:32.247 | INFO     | app.ws.live:disconnect:234 - WebSocket disconnected: 127.0.0.1\n", "record": {"elapsed": {"repr": "0:00:56.245716", "seconds": 56.245716}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "disconnect", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 234, "message": "WebSocket disconnected: 127.0.0.1", "module": "live", "name": "app.ws.live", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:29:32.247691+05:30", "timestamp": 1755781172.247691}}}
{"text": "2025-08-21 18:29:32.249 | INFO     | app.ws.live:disconnect:234 - WebSocket disconnected: 127.0.0.1\n", "record": {"elapsed": {"repr": "0:00:56.247092", "seconds": 56.247092}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "disconnect", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 234, "message": "WebSocket disconnected: 127.0.0.1", "module": "live", "name": "app.ws.live", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:29:32.249067+05:30", "timestamp": 1755781172.249067}}}
{"text": "2025-08-21 18:29:32.250 | INFO     | app.ws.live:disconnect:234 - WebSocket disconnected: 127.0.0.1\n", "record": {"elapsed": {"repr": "0:00:56.248058", "seconds": 56.248058}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "disconnect", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 234, "message": "WebSocket disconnected: 127.0.0.1", "module": "live", "name": "app.ws.live", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:29:32.250033+05:30", "timestamp": 1755781172.250033}}}
{"text": "2025-08-21 18:29:32.251 | INFO     | app.ws.live:disconnect:234 - WebSocket disconnected: 127.0.0.1\n", "record": {"elapsed": {"repr": "0:00:56.249084", "seconds": 56.249084}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "disconnect", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 234, "message": "WebSocket disconnected: 127.0.0.1", "module": "live", "name": "app.ws.live", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:29:32.251059+05:30", "timestamp": 1755781172.251059}}}
{"text": "2025-08-21 18:29:32.252 | INFO     | app.ws.live:disconnect:234 - WebSocket disconnected: 127.0.0.1\n", "record": {"elapsed": {"repr": "0:00:56.250285", "seconds": 56.250285}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "disconnect", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 234, "message": "WebSocket disconnected: 127.0.0.1", "module": "live", "name": "app.ws.live", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:29:32.252260+05:30", "timestamp": 1755781172.25226}}}
{"text": "2025-08-21 18:29:32.253 | INFO     | app.ws.live:disconnect:234 - WebSocket disconnected: 127.0.0.1\n", "record": {"elapsed": {"repr": "0:00:56.251309", "seconds": 56.251309}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "disconnect", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 234, "message": "WebSocket disconnected: 127.0.0.1", "module": "live", "name": "app.ws.live", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:29:32.253284+05:30", "timestamp": 1755781172.253284}}}
{"text": "2025-08-21 18:29:32.254 | INFO     | app.ws.live:disconnect:234 - WebSocket disconnected: 127.0.0.1\n", "record": {"elapsed": {"repr": "0:00:56.252353", "seconds": 56.252353}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "disconnect", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 234, "message": "WebSocket disconnected: 127.0.0.1", "module": "live", "name": "app.ws.live", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:29:32.254328+05:30", "timestamp": 1755781172.254328}}}
{"text": "2025-08-21 18:29:32.256 | INFO     | app.ws.live:disconnect:234 - WebSocket disconnected: 127.0.0.1\n", "record": {"elapsed": {"repr": "0:00:56.254258", "seconds": 56.254258}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "disconnect", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 234, "message": "WebSocket disconnected: 127.0.0.1", "module": "live", "name": "app.ws.live", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:29:32.256233+05:30", "timestamp": 1755781172.256233}}}
{"text": "2025-08-21 18:29:32.257 | INFO     | app.ws.live:disconnect:234 - WebSocket disconnected: 127.0.0.1\n", "record": {"elapsed": {"repr": "0:00:56.255622", "seconds": 56.255622}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "disconnect", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 234, "message": "WebSocket disconnected: 127.0.0.1", "module": "live", "name": "app.ws.live", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:29:32.257597+05:30", "timestamp": 1755781172.257597}}}
{"text": "2025-08-21 18:29:32.258 | INFO     | app.ws.live:disconnect:234 - WebSocket disconnected: 127.0.0.1\n", "record": {"elapsed": {"repr": "0:00:56.256922", "seconds": 56.256922}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "disconnect", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 234, "message": "WebSocket disconnected: 127.0.0.1", "module": "live", "name": "app.ws.live", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:29:32.258897+05:30", "timestamp": 1755781172.258897}}}
{"text": "2025-08-21 18:29:32.262 | INFO     | app.ws.live:disconnect:234 - WebSocket disconnected: 127.0.0.1\n", "record": {"elapsed": {"repr": "0:00:56.260122", "seconds": 56.260122}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "disconnect", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 234, "message": "WebSocket disconnected: 127.0.0.1", "module": "live", "name": "app.ws.live", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:29:32.262097+05:30", "timestamp": 1755781172.262097}}}
{"text": "2025-08-21 18:29:32.263 | INFO     | app.ws.live:disconnect:234 - WebSocket disconnected: 127.0.0.1\n", "record": {"elapsed": {"repr": "0:00:56.261626", "seconds": 56.261626}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "disconnect", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 234, "message": "WebSocket disconnected: 127.0.0.1", "module": "live", "name": "app.ws.live", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:29:32.263601+05:30", "timestamp": 1755781172.263601}}}
{"text": "2025-08-21 18:29:32.264 | INFO     | app.ws.live:disconnect:234 - WebSocket disconnected: 127.0.0.1\n", "record": {"elapsed": {"repr": "0:00:56.262829", "seconds": 56.262829}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "disconnect", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 234, "message": "WebSocket disconnected: 127.0.0.1", "module": "live", "name": "app.ws.live", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:29:32.264804+05:30", "timestamp": 1755781172.264804}}}
{"text": "2025-08-21 18:29:32.265 | INFO     | app.ws.live:disconnect:234 - WebSocket disconnected: 127.0.0.1\n", "record": {"elapsed": {"repr": "0:00:56.263839", "seconds": 56.263839}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "disconnect", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 234, "message": "WebSocket disconnected: 127.0.0.1", "module": "live", "name": "app.ws.live", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:29:32.265814+05:30", "timestamp": 1755781172.265814}}}
{"text": "2025-08-21 18:29:32.266 | INFO     | app.ws.live:disconnect:234 - WebSocket disconnected: 127.0.0.1\n", "record": {"elapsed": {"repr": "0:00:56.264971", "seconds": 56.264971}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "disconnect", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 234, "message": "WebSocket disconnected: 127.0.0.1", "module": "live", "name": "app.ws.live", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:29:32.266946+05:30", "timestamp": 1755781172.266946}}}
{"text": "2025-08-21 18:29:32.267 | INFO     | app.ws.live:disconnect:234 - WebSocket disconnected: 127.0.0.1\n", "record": {"elapsed": {"repr": "0:00:56.265883", "seconds": 56.265883}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "disconnect", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 234, "message": "WebSocket disconnected: 127.0.0.1", "module": "live", "name": "app.ws.live", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:29:32.267858+05:30", "timestamp": 1755781172.267858}}}
{"text": "2025-08-21 18:29:32.268 | INFO     | app.ws.live:disconnect:234 - WebSocket disconnected: 127.0.0.1\n", "record": {"elapsed": {"repr": "0:00:56.266868", "seconds": 56.266868}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "disconnect", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 234, "message": "WebSocket disconnected: 127.0.0.1", "module": "live", "name": "app.ws.live", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:29:32.268843+05:30", "timestamp": 1755781172.268843}}}
{"text": "2025-08-21 18:29:32.269 | INFO     | app.ws.live:disconnect:234 - WebSocket disconnected: 127.0.0.1\n", "record": {"elapsed": {"repr": "0:00:56.267624", "seconds": 56.267624}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "disconnect", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 234, "message": "WebSocket disconnected: 127.0.0.1", "module": "live", "name": "app.ws.live", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:29:32.269599+05:30", "timestamp": 1755781172.269599}}}
{"text": "2025-08-21 18:29:32.270 | INFO     | app.ws.live:disconnect:234 - WebSocket disconnected: 127.0.0.1\n", "record": {"elapsed": {"repr": "0:00:56.268401", "seconds": 56.268401}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "disconnect", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 234, "message": "WebSocket disconnected: 127.0.0.1", "module": "live", "name": "app.ws.live", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:29:32.270376+05:30", "timestamp": 1755781172.270376}}}
{"text": "2025-08-21 18:29:32.271 | INFO     | app.ws.live:disconnect:234 - WebSocket disconnected: 127.0.0.1\n", "record": {"elapsed": {"repr": "0:00:56.269134", "seconds": 56.269134}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "disconnect", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 234, "message": "WebSocket disconnected: 127.0.0.1", "module": "live", "name": "app.ws.live", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:29:32.271109+05:30", "timestamp": 1755781172.271109}}}
{"text": "2025-08-21 18:29:32.272 | INFO     | app.ws.live:disconnect:234 - WebSocket disconnected: 127.0.0.1\n", "record": {"elapsed": {"repr": "0:00:56.270046", "seconds": 56.270046}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "disconnect", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 234, "message": "WebSocket disconnected: 127.0.0.1", "module": "live", "name": "app.ws.live", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:29:32.272021+05:30", "timestamp": 1755781172.272021}}}
{"text": "2025-08-21 18:29:32.272 | INFO     | app.ws.live:disconnect:234 - WebSocket disconnected: 127.0.0.1\n", "record": {"elapsed": {"repr": "0:00:56.270978", "seconds": 56.270978}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "disconnect", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 234, "message": "WebSocket disconnected: 127.0.0.1", "module": "live", "name": "app.ws.live", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:29:32.272953+05:30", "timestamp": 1755781172.272953}}}
{"text": "2025-08-21 18:29:32.274 | INFO     | app.ws.live:disconnect:234 - WebSocket disconnected: 127.0.0.1\n", "record": {"elapsed": {"repr": "0:00:56.272168", "seconds": 56.272168}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "disconnect", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 234, "message": "WebSocket disconnected: 127.0.0.1", "module": "live", "name": "app.ws.live", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:29:32.274143+05:30", "timestamp": 1755781172.274143}}}
{"text": "2025-08-21 18:29:32.275 | INFO     | app.ws.live:disconnect:234 - WebSocket disconnected: 127.0.0.1\n", "record": {"elapsed": {"repr": "0:00:56.273215", "seconds": 56.273215}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "disconnect", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 234, "message": "WebSocket disconnected: 127.0.0.1", "module": "live", "name": "app.ws.live", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:29:32.275190+05:30", "timestamp": 1755781172.27519}}}
{"text": "2025-08-21 18:29:32.276 | INFO     | app.ws.live:disconnect:234 - WebSocket disconnected: 127.0.0.1\n", "record": {"elapsed": {"repr": "0:00:56.274235", "seconds": 56.274235}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "disconnect", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 234, "message": "WebSocket disconnected: 127.0.0.1", "module": "live", "name": "app.ws.live", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:29:32.276210+05:30", "timestamp": 1755781172.27621}}}
{"text": "2025-08-21 18:29:32.277 | INFO     | app.ws.live:disconnect:234 - WebSocket disconnected: 127.0.0.1\n", "record": {"elapsed": {"repr": "0:00:56.275608", "seconds": 56.275608}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "disconnect", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 234, "message": "WebSocket disconnected: 127.0.0.1", "module": "live", "name": "app.ws.live", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:29:32.277583+05:30", "timestamp": 1755781172.277583}}}
{"text": "2025-08-21 18:29:32.278 | INFO     | app.ws.live:disconnect:234 - WebSocket disconnected: 127.0.0.1\n", "record": {"elapsed": {"repr": "0:00:56.276703", "seconds": 56.276703}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "disconnect", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 234, "message": "WebSocket disconnected: 127.0.0.1", "module": "live", "name": "app.ws.live", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:29:32.278678+05:30", "timestamp": 1755781172.278678}}}
{"text": "2025-08-21 18:29:32.280 | INFO     | app.ws.live:disconnect:234 - WebSocket disconnected: 127.0.0.1\n", "record": {"elapsed": {"repr": "0:00:56.278034", "seconds": 56.278034}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "disconnect", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 234, "message": "WebSocket disconnected: 127.0.0.1", "module": "live", "name": "app.ws.live", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:29:32.280009+05:30", "timestamp": 1755781172.280009}}}
{"text": "2025-08-21 18:29:32.280 | INFO     | app.ws.live:disconnect:234 - WebSocket disconnected: 127.0.0.1\n", "record": {"elapsed": {"repr": "0:00:56.278848", "seconds": 56.278848}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "disconnect", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 234, "message": "WebSocket disconnected: 127.0.0.1", "module": "live", "name": "app.ws.live", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:29:32.280823+05:30", "timestamp": 1755781172.280823}}}
{"text": "2025-08-21 18:29:32.282 | INFO     | app.ws.live:disconnect:234 - WebSocket disconnected: 127.0.0.1\n", "record": {"elapsed": {"repr": "0:00:56.280025", "seconds": 56.280025}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "disconnect", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 234, "message": "WebSocket disconnected: 127.0.0.1", "module": "live", "name": "app.ws.live", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:29:32.282000+05:30", "timestamp": 1755781172.282}}}
{"text": "2025-08-21 18:29:32.285 | INFO     | app.ws.live:disconnect:234 - WebSocket disconnected: 127.0.0.1\n", "record": {"elapsed": {"repr": "0:00:56.283400", "seconds": 56.2834}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "disconnect", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 234, "message": "WebSocket disconnected: 127.0.0.1", "module": "live", "name": "app.ws.live", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:29:32.285375+05:30", "timestamp": 1755781172.285375}}}
{"text": "2025-08-21 18:29:32.287 | INFO     | app.ws.live:disconnect:234 - WebSocket disconnected: 127.0.0.1\n", "record": {"elapsed": {"repr": "0:00:56.285747", "seconds": 56.285747}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "disconnect", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 234, "message": "WebSocket disconnected: 127.0.0.1", "module": "live", "name": "app.ws.live", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:29:32.287722+05:30", "timestamp": 1755781172.287722}}}
{"text": "2025-08-21 18:29:32.288 | INFO     | app.ws.live:disconnect:234 - WebSocket disconnected: 127.0.0.1\n", "record": {"elapsed": {"repr": "0:00:56.286736", "seconds": 56.286736}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "disconnect", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 234, "message": "WebSocket disconnected: 127.0.0.1", "module": "live", "name": "app.ws.live", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:29:32.288711+05:30", "timestamp": 1755781172.288711}}}
{"text": "2025-08-21 18:29:32.289 | INFO     | app.ws.live:disconnect:234 - WebSocket disconnected: 127.0.0.1\n", "record": {"elapsed": {"repr": "0:00:56.287894", "seconds": 56.287894}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "disconnect", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 234, "message": "WebSocket disconnected: 127.0.0.1", "module": "live", "name": "app.ws.live", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:29:32.289869+05:30", "timestamp": 1755781172.289869}}}
{"text": "2025-08-21 18:29:32.290 | INFO     | app.ws.live:disconnect:234 - WebSocket disconnected: 127.0.0.1\n", "record": {"elapsed": {"repr": "0:00:56.288936", "seconds": 56.288936}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "disconnect", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 234, "message": "WebSocket disconnected: 127.0.0.1", "module": "live", "name": "app.ws.live", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:29:32.290911+05:30", "timestamp": 1755781172.290911}}}
{"text": "2025-08-21 18:29:32.292 | INFO     | app.ws.live:disconnect:234 - WebSocket disconnected: 127.0.0.1\n", "record": {"elapsed": {"repr": "0:00:56.290142", "seconds": 56.290142}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "disconnect", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 234, "message": "WebSocket disconnected: 127.0.0.1", "module": "live", "name": "app.ws.live", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:29:32.292117+05:30", "timestamp": 1755781172.292117}}}
{"text": "2025-08-21 18:29:32.293 | INFO     | app.ws.live:disconnect:234 - WebSocket disconnected: 127.0.0.1\n", "record": {"elapsed": {"repr": "0:00:56.291233", "seconds": 56.291233}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "disconnect", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 234, "message": "WebSocket disconnected: 127.0.0.1", "module": "live", "name": "app.ws.live", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:29:32.293208+05:30", "timestamp": 1755781172.293208}}}
{"text": "2025-08-21 18:29:32.295 | INFO     | app.ws.live:disconnect:234 - WebSocket disconnected: 127.0.0.1\n", "record": {"elapsed": {"repr": "0:00:56.293088", "seconds": 56.293088}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "disconnect", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 234, "message": "WebSocket disconnected: 127.0.0.1", "module": "live", "name": "app.ws.live", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:29:32.295063+05:30", "timestamp": 1755781172.295063}}}
{"text": "2025-08-21 18:29:32.297 | INFO     | app.ws.live:disconnect:234 - WebSocket disconnected: 127.0.0.1\n", "record": {"elapsed": {"repr": "0:00:56.295481", "seconds": 56.295481}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "disconnect", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 234, "message": "WebSocket disconnected: 127.0.0.1", "module": "live", "name": "app.ws.live", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:29:32.297456+05:30", "timestamp": 1755781172.297456}}}
{"text": "2025-08-21 18:29:32.300 | INFO     | app.ws.live:disconnect:234 - WebSocket disconnected: 127.0.0.1\n", "record": {"elapsed": {"repr": "0:00:56.298040", "seconds": 56.29804}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "disconnect", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 234, "message": "WebSocket disconnected: 127.0.0.1", "module": "live", "name": "app.ws.live", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:29:32.300015+05:30", "timestamp": 1755781172.300015}}}
{"text": "2025-08-21 18:29:32.301 | INFO     | app.ws.live:disconnect:234 - WebSocket disconnected: 127.0.0.1\n", "record": {"elapsed": {"repr": "0:00:56.299229", "seconds": 56.299229}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "disconnect", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 234, "message": "WebSocket disconnected: 127.0.0.1", "module": "live", "name": "app.ws.live", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:29:32.301204+05:30", "timestamp": 1755781172.301204}}}
{"text": "2025-08-21 18:29:32.302 | INFO     | app.ws.live:disconnect:234 - WebSocket disconnected: 127.0.0.1\n", "record": {"elapsed": {"repr": "0:00:56.300451", "seconds": 56.300451}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "disconnect", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 234, "message": "WebSocket disconnected: 127.0.0.1", "module": "live", "name": "app.ws.live", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:29:32.302426+05:30", "timestamp": 1755781172.302426}}}
{"text": "2025-08-21 18:29:32.303 | INFO     | app.ws.live:disconnect:234 - WebSocket disconnected: 127.0.0.1\n", "record": {"elapsed": {"repr": "0:00:56.301354", "seconds": 56.301354}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "disconnect", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 234, "message": "WebSocket disconnected: 127.0.0.1", "module": "live", "name": "app.ws.live", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:29:32.303329+05:30", "timestamp": 1755781172.303329}}}
{"text": "2025-08-21 18:29:32.304 | INFO     | app.ws.live:disconnect:234 - WebSocket disconnected: 127.0.0.1\n", "record": {"elapsed": {"repr": "0:00:56.302208", "seconds": 56.302208}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "disconnect", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 234, "message": "WebSocket disconnected: 127.0.0.1", "module": "live", "name": "app.ws.live", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:29:32.304183+05:30", "timestamp": 1755781172.304183}}}
{"text": "2025-08-21 18:29:32.309 | INFO     | app.ws.live:disconnect:234 - WebSocket disconnected: 127.0.0.1\n", "record": {"elapsed": {"repr": "0:00:56.307079", "seconds": 56.307079}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "disconnect", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 234, "message": "WebSocket disconnected: 127.0.0.1", "module": "live", "name": "app.ws.live", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:29:32.309054+05:30", "timestamp": 1755781172.309054}}}
{"text": "2025-08-21 18:29:32.313 | INFO     | app.ws.live:disconnect:234 - WebSocket disconnected: 127.0.0.1\n", "record": {"elapsed": {"repr": "0:00:56.311413", "seconds": 56.311413}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "disconnect", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 234, "message": "WebSocket disconnected: 127.0.0.1", "module": "live", "name": "app.ws.live", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:29:32.313388+05:30", "timestamp": 1755781172.313388}}}
{"text": "2025-08-21 18:29:32.315 | INFO     | app.ws.live:disconnect:234 - WebSocket disconnected: 127.0.0.1\n", "record": {"elapsed": {"repr": "0:00:56.313331", "seconds": 56.313331}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "disconnect", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 234, "message": "WebSocket disconnected: 127.0.0.1", "module": "live", "name": "app.ws.live", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:29:32.315306+05:30", "timestamp": 1755781172.315306}}}
{"text": "2025-08-21 18:29:32.317 | INFO     | app.ws.live:disconnect:234 - WebSocket disconnected: 127.0.0.1\n", "record": {"elapsed": {"repr": "0:00:56.315196", "seconds": 56.315196}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "disconnect", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 234, "message": "WebSocket disconnected: 127.0.0.1", "module": "live", "name": "app.ws.live", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:29:32.317171+05:30", "timestamp": 1755781172.317171}}}
{"text": "2025-08-21 18:29:32.318 | INFO     | app.ws.live:disconnect:234 - WebSocket disconnected: 127.0.0.1\n", "record": {"elapsed": {"repr": "0:00:56.316258", "seconds": 56.316258}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "disconnect", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 234, "message": "WebSocket disconnected: 127.0.0.1", "module": "live", "name": "app.ws.live", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:29:32.318233+05:30", "timestamp": 1755781172.318233}}}
{"text": "2025-08-21 18:29:32.319 | INFO     | app.ws.live:disconnect:234 - WebSocket disconnected: 127.0.0.1\n", "record": {"elapsed": {"repr": "0:00:56.317452", "seconds": 56.317452}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "disconnect", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 234, "message": "WebSocket disconnected: 127.0.0.1", "module": "live", "name": "app.ws.live", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:29:32.319427+05:30", "timestamp": 1755781172.319427}}}
{"text": "2025-08-21 18:29:32.321 | INFO     | app.ws.live:disconnect:234 - WebSocket disconnected: 127.0.0.1\n", "record": {"elapsed": {"repr": "0:00:56.319282", "seconds": 56.319282}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "disconnect", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 234, "message": "WebSocket disconnected: 127.0.0.1", "module": "live", "name": "app.ws.live", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:29:32.321257+05:30", "timestamp": 1755781172.321257}}}
{"text": "2025-08-21 18:29:32.322 | INFO     | app.ws.live:disconnect:234 - WebSocket disconnected: 127.0.0.1\n", "record": {"elapsed": {"repr": "0:00:56.320451", "seconds": 56.320451}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "disconnect", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 234, "message": "WebSocket disconnected: 127.0.0.1", "module": "live", "name": "app.ws.live", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:29:32.322426+05:30", "timestamp": 1755781172.322426}}}
{"text": "2025-08-21 18:29:32.323 | INFO     | app.ws.live:disconnect:234 - WebSocket disconnected: 127.0.0.1\n", "record": {"elapsed": {"repr": "0:00:56.321991", "seconds": 56.321991}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "disconnect", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 234, "message": "WebSocket disconnected: 127.0.0.1", "module": "live", "name": "app.ws.live", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:29:32.323966+05:30", "timestamp": 1755781172.323966}}}
{"text": "2025-08-21 18:29:32.325 | INFO     | app.ws.live:disconnect:234 - WebSocket disconnected: 127.0.0.1\n", "record": {"elapsed": {"repr": "0:00:56.323331", "seconds": 56.323331}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "disconnect", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 234, "message": "WebSocket disconnected: 127.0.0.1", "module": "live", "name": "app.ws.live", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:29:32.325306+05:30", "timestamp": 1755781172.325306}}}
{"text": "2025-08-21 18:29:32.326 | INFO     | app.ws.live:disconnect:234 - WebSocket disconnected: 127.0.0.1\n", "record": {"elapsed": {"repr": "0:00:56.324528", "seconds": 56.324528}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "disconnect", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 234, "message": "WebSocket disconnected: 127.0.0.1", "module": "live", "name": "app.ws.live", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:29:32.326503+05:30", "timestamp": 1755781172.326503}}}
{"text": "2025-08-21 18:29:32.327 | INFO     | app.ws.live:disconnect:234 - WebSocket disconnected: 127.0.0.1\n", "record": {"elapsed": {"repr": "0:00:56.325639", "seconds": 56.325639}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "disconnect", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 234, "message": "WebSocket disconnected: 127.0.0.1", "module": "live", "name": "app.ws.live", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:29:32.327614+05:30", "timestamp": 1755781172.327614}}}
{"text": "2025-08-21 18:29:32.328 | INFO     | app.ws.live:disconnect:234 - WebSocket disconnected: 127.0.0.1\n", "record": {"elapsed": {"repr": "0:00:56.326732", "seconds": 56.326732}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "disconnect", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 234, "message": "WebSocket disconnected: 127.0.0.1", "module": "live", "name": "app.ws.live", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:29:32.328707+05:30", "timestamp": 1755781172.328707}}}
{"text": "2025-08-21 18:29:32.329 | INFO     | app.ws.live:disconnect:234 - WebSocket disconnected: 127.0.0.1\n", "record": {"elapsed": {"repr": "0:00:56.327696", "seconds": 56.327696}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "disconnect", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 234, "message": "WebSocket disconnected: 127.0.0.1", "module": "live", "name": "app.ws.live", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:29:32.329671+05:30", "timestamp": 1755781172.329671}}}
{"text": "2025-08-21 18:29:32.331 | INFO     | app.ws.live:disconnect:234 - WebSocket disconnected: 127.0.0.1\n", "record": {"elapsed": {"repr": "0:00:56.329305", "seconds": 56.329305}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "disconnect", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 234, "message": "WebSocket disconnected: 127.0.0.1", "module": "live", "name": "app.ws.live", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:29:32.331280+05:30", "timestamp": 1755781172.33128}}}
{"text": "2025-08-21 18:29:32.333 | INFO     | app.ws.live:disconnect:234 - WebSocket disconnected: 127.0.0.1\n", "record": {"elapsed": {"repr": "0:00:56.331133", "seconds": 56.331133}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "disconnect", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 234, "message": "WebSocket disconnected: 127.0.0.1", "module": "live", "name": "app.ws.live", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:29:32.333108+05:30", "timestamp": 1755781172.333108}}}
{"text": "2025-08-21 18:29:32.340 | INFO     | app.ws.live:disconnect:234 - WebSocket disconnected: 127.0.0.1\n", "record": {"elapsed": {"repr": "0:00:56.338772", "seconds": 56.338772}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "disconnect", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 234, "message": "WebSocket disconnected: 127.0.0.1", "module": "live", "name": "app.ws.live", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:29:32.340747+05:30", "timestamp": 1755781172.340747}}}
{"text": "2025-08-21 18:29:32.342 | INFO     | app.ws.live:disconnect:234 - WebSocket disconnected: 127.0.0.1\n", "record": {"elapsed": {"repr": "0:00:56.340611", "seconds": 56.340611}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "disconnect", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 234, "message": "WebSocket disconnected: 127.0.0.1", "module": "live", "name": "app.ws.live", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:29:32.342586+05:30", "timestamp": 1755781172.342586}}}
{"text": "2025-08-21 18:29:32.413 | INFO     | app.services.dhan_client:get_pnl:489 - Starting accurate P&L calculation\n", "record": {"elapsed": {"repr": "0:00:56.411167", "seconds": 56.411167}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 489, "message": "Starting accurate P&L calculation", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:29:32.413142+05:30", "timestamp": 1755781172.413142}}}
{"text": "2025-08-21 18:29:32.417 | INFO     | app.services.dhan_client:get_pnl:491 - Fetched 5 positions\n", "record": {"elapsed": {"repr": "0:00:56.415568", "seconds": 56.415568}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 491, "message": "Fetched 5 positions", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:29:32.417543+05:30", "timestamp": 1755781172.417543}}}
{"text": "2025-08-21 18:29:32.418 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for RELIANCE: unrealized=-1096825.58, today=-1096825.58\n", "record": {"elapsed": {"repr": "0:00:56.416670", "seconds": 56.41667}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for RELIANCE: unrealized=-1096825.58, today=-1096825.58", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:29:32.418645+05:30", "timestamp": 1755781172.418645}}}
{"text": "2025-08-21 18:29:32.419 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for TCS: unrealized=960925.18, today=960925.18\n", "record": {"elapsed": {"repr": "0:00:56.417692", "seconds": 56.417692}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for TCS: unrealized=960925.18, today=960925.18", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:29:32.419667+05:30", "timestamp": 1755781172.419667}}}
{"text": "2025-08-21 18:29:32.420 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for HDFC: unrealized=-2094086.83, today=-2094086.83\n", "record": {"elapsed": {"repr": "0:00:56.418867", "seconds": 56.418867}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for HDFC: unrealized=-2094086.83, today=-2094086.83", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:29:32.420842+05:30", "timestamp": 1755781172.420842}}}
{"text": "2025-08-21 18:29:32.421 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for INFY: unrealized=187288.38, today=187288.38\n", "record": {"elapsed": {"repr": "0:00:56.419621", "seconds": 56.419621}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for INFY: unrealized=187288.38, today=187288.38", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:29:32.421596+05:30", "timestamp": 1755781172.421596}}}
{"text": "2025-08-21 18:29:32.422 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for ICICIBANK: unrealized=367263.36, today=367263.36\n", "record": {"elapsed": {"repr": "0:00:56.420337", "seconds": 56.420337}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for ICICIBANK: unrealized=367263.36, today=367263.36", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:29:32.422312+05:30", "timestamp": 1755781172.422312}}}
{"text": "2025-08-21 18:29:32.423 | INFO     | app.services.dhan_client:get_pnl:545 - Calculated totals - realized: 0.0, unrealized: -1675435.49, day: -1675435.49\n", "record": {"elapsed": {"repr": "0:00:56.421347", "seconds": 56.421347}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 545, "message": "Calculated totals - realized: 0.0, unrealized: -1675435.49, day: -1675435.49", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:29:32.423322+05:30", "timestamp": 1755781172.423322}}}
{"text": "2025-08-21 18:29:32.424 | DEBUG    | app.services.dhan_client:get_pnl:554 - PnL consistency check passed: drift=₹0.00\n", "record": {"elapsed": {"repr": "0:00:56.422320", "seconds": 56.42232}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 554, "message": "PnL consistency check passed: drift=₹0.00", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:29:32.424295+05:30", "timestamp": 1755781172.424295}}}
{"text": "2025-08-21 18:29:32.427 | DEBUG    | app.services.dhan_client:get_pnl:558 - Creating PnLTotals...\n", "record": {"elapsed": {"repr": "0:00:56.425058", "seconds": 56.425058}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 558, "message": "Creating PnLTotals...", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:29:32.427033+05:30", "timestamp": 1755781172.427033}}}
{"text": "2025-08-21 18:29:32.429 | DEBUG    | app.services.dhan_client:get_pnl:565 - PnLTotals created successfully\n", "record": {"elapsed": {"repr": "0:00:56.427996", "seconds": 56.427996}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 565, "message": "PnLTotals created successfully", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:29:32.429971+05:30", "timestamp": 1755781172.429971}}}
{"text": "2025-08-21 18:29:32.431 | DEBUG    | app.services.dhan_client:get_pnl:574 - Creating PnL model...\n", "record": {"elapsed": {"repr": "0:00:56.429225", "seconds": 56.429225}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 574, "message": "Creating PnL model...", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:29:32.431200+05:30", "timestamp": 1755781172.4312}}}
{"text": "2025-08-21 18:29:32.431 | DEBUG    | app.services.dhan_client:get_pnl:575 - Model fields: totals=<class 'app.models.schemas.PnLTotals'>, perSymbol=5, updated_at=2025-08-21 18:29:32.418538+05:30, trading_day=2025-08-21\n", "record": {"elapsed": {"repr": "0:00:56.429979", "seconds": 56.429979}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 575, "message": "Model fields: totals=<class 'app.models.schemas.PnLTotals'>, perSymbol=5, updated_at=2025-08-21 18:29:32.418538+05:30, trading_day=2025-08-21", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:29:32.431954+05:30", "timestamp": 1755781172.431954}}}
{"text": "2025-08-21 18:29:32.433 | DEBUG    | app.services.dhan_client:get_pnl:584 - Created PnL model: totals=PnLTotals(realized=0.0, unrealized=-1675435.49, day=-1675435.49, currency='INR') per_symbol=[PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1543, avg=1999.73, ltp=1288.89, unrealized=-1096825.58, today_pnl=-1096825.58), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=613, avg=1989.23, ltp=421.65, unrealized=960925.18, today_pnl=960925.18), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=1709, avg=1838.62, ltp=613.29, unrealized=-2094086.83, today_pnl=-2094086.83), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=697, avg=852.74, ltp=584.03, unrealized=187288.38, today_pnl=187288.38), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=255, avg=915.17, ltp=2355.42, unrealized=367263.36, today_pnl=367263.36)] updated_at=datetime.datetime(2025, 8, 21, 18, 29, 32, 418538, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))) trading_day='2025-08-21'\n", "record": {"elapsed": {"repr": "0:00:56.431508", "seconds": 56.431508}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 584, "message": "Created PnL model: totals=PnLTotals(realized=0.0, unrealized=-1675435.49, day=-1675435.49, currency='INR') per_symbol=[PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1543, avg=1999.73, ltp=1288.89, unrealized=-1096825.58, today_pnl=-1096825.58), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=613, avg=1989.23, ltp=421.65, unrealized=960925.18, today_pnl=960925.18), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=1709, avg=1838.62, ltp=613.29, unrealized=-2094086.83, today_pnl=-2094086.83), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=697, avg=852.74, ltp=584.03, unrealized=187288.38, today_pnl=187288.38), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=255, avg=915.17, ltp=2355.42, unrealized=367263.36, today_pnl=367263.36)] updated_at=datetime.datetime(2025, 8, 21, 18, 29, 32, 418538, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))) trading_day='2025-08-21'", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:29:32.433483+05:30", "timestamp": 1755781172.433483}}}
{"text": "2025-08-21 18:29:32.435 | DEBUG    | app.services.dhan_client:get_pnl:585 - PnL model fields: {'totals': PnLTotals(realized=0.0, unrealized=-1675435.49, day=-1675435.49, currency='INR'), 'per_symbol': [PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1543, avg=1999.73, ltp=1288.89, unrealized=-1096825.58, today_pnl=-1096825.58), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=613, avg=1989.23, ltp=421.65, unrealized=960925.18, today_pnl=960925.18), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=1709, avg=1838.62, ltp=613.29, unrealized=-2094086.83, today_pnl=-2094086.83), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=697, avg=852.74, ltp=584.03, unrealized=187288.38, today_pnl=187288.38), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=255, avg=915.17, ltp=2355.42, unrealized=367263.36, today_pnl=367263.36)], 'updated_at': datetime.datetime(2025, 8, 21, 18, 29, 32, 418538, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))), 'trading_day': '2025-08-21'}\n", "record": {"elapsed": {"repr": "0:00:56.433031", "seconds": 56.433031}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 585, "message": "PnL model fields: {'totals': PnLTotals(realized=0.0, unrealized=-1675435.49, day=-1675435.49, currency='INR'), 'per_symbol': [PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1543, avg=1999.73, ltp=1288.89, unrealized=-1096825.58, today_pnl=-1096825.58), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=613, avg=1989.23, ltp=421.65, unrealized=960925.18, today_pnl=960925.18), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=1709, avg=1838.62, ltp=613.29, unrealized=-2094086.83, today_pnl=-2094086.83), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=697, avg=852.74, ltp=584.03, unrealized=187288.38, today_pnl=187288.38), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=255, avg=915.17, ltp=2355.42, unrealized=367263.36, today_pnl=367263.36)], 'updated_at': datetime.datetime(2025, 8, 21, 18, 29, 32, 418538, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))), 'trading_day': '2025-08-21'}", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:29:32.435006+05:30", "timestamp": 1755781172.435006}}}
{"text": "2025-08-21 18:29:32.436 | INFO     | app.services.dhan_client:get_pnl:587 - P&L calculation completed successfully: 5 symbols, unrealized=₹-1675435.49\n", "record": {"elapsed": {"repr": "0:00:56.434242", "seconds": 56.434242}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 587, "message": "P&L calculation completed successfully: 5 symbols, unrealized=₹-1675435.49", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:29:32.436217+05:30", "timestamp": 1755781172.436217}}}
{"text": "2025-08-21 18:29:32.437 | DEBUG    | app.ws.live:emit_delta:408 - Emitted pnl delta: seq=76\n", "record": {"elapsed": {"repr": "0:00:56.435581", "seconds": 56.435581}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "emit_delta", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 408, "message": "Emitted pnl delta: seq=76", "module": "live", "name": "app.ws.live", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:29:32.437556+05:30", "timestamp": 1755781172.437556}}}
{"text": "2025-08-21 18:29:32.472 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:56.470498", "seconds": 56.470498}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 17632, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 18:29:32.472473+05:30", "timestamp": 1755781172.472473}}}
{"text": "2025-08-21 18:29:32.473 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:56.471408", "seconds": 56.471408}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 17632, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 18:29:32.473383+05:30", "timestamp": 1755781172.473383}}}
{"text": "2025-08-21 18:29:32.474 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:56.472305", "seconds": 56.472305}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 17632, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 18:29:32.474280+05:30", "timestamp": 1755781172.47428}}}
{"text": "2025-08-21 18:29:32.474 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:56.472944", "seconds": 56.472944}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 17632, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 18:29:32.474919+05:30", "timestamp": 1755781172.474919}}}
{"text": "2025-08-21 18:29:32.475 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:56.473610", "seconds": 56.47361}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 17632, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 18:29:32.475585+05:30", "timestamp": 1755781172.475585}}}
{"text": "2025-08-21 18:29:32.476 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:56.474303", "seconds": 56.474303}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 17632, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 18:29:32.476278+05:30", "timestamp": 1755781172.476278}}}
{"text": "2025-08-21 18:29:32.476 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:56.474947", "seconds": 56.474947}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 17632, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 18:29:32.476922+05:30", "timestamp": 1755781172.476922}}}
{"text": "2025-08-21 18:29:32.477 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:56.475539", "seconds": 56.475539}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 17632, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 18:29:32.477514+05:30", "timestamp": 1755781172.477514}}}
{"text": "2025-08-21 18:29:32.478 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:56.476246", "seconds": 56.476246}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 17632, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 18:29:32.478221+05:30", "timestamp": 1755781172.478221}}}
{"text": "2025-08-21 18:29:32.478 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:56.476860", "seconds": 56.47686}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 17632, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 18:29:32.478835+05:30", "timestamp": 1755781172.478835}}}
{"text": "2025-08-21 18:29:32.750 | INFO     | app.main:add_trace_id:43 - Request started - Method: GET, Path: /pnl, Trace ID: a872dd4b-d0f8-471c-ad3d-e6fbaf6d4587\n", "record": {"elapsed": {"repr": "0:00:56.748977", "seconds": 56.748977}, "exception": null, "extra": {}, "file": {"name": "main.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\main.py"}, "function": "add_trace_id", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 43, "message": "Request started - Method: GET, Path: /pnl, Trace ID: a872dd4b-d0f8-471c-ad3d-e6fbaf6d4587", "module": "main", "name": "app.main", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:29:32.750952+05:30", "timestamp": 1755781172.750952}}}
{"text": "2025-08-21 18:29:32.751 | INFO     | app.main:add_trace_id:43 - Request started - Method: GET, Path: /positions, Trace ID: c667cc15-22d8-43ff-b301-de1acef52562\n", "record": {"elapsed": {"repr": "0:00:56.749828", "seconds": 56.749828}, "exception": null, "extra": {}, "file": {"name": "main.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\main.py"}, "function": "add_trace_id", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 43, "message": "Request started - Method: GET, Path: /positions, Trace ID: c667cc15-22d8-43ff-b301-de1acef52562", "module": "main", "name": "app.main", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:29:32.751803+05:30", "timestamp": 1755781172.751803}}}
{"text": "2025-08-21 18:29:32.752 | INFO     | app.main:add_trace_id:43 - Request started - Method: GET, Path: /holdings, Trace ID: 6e48f884-61cb-4ef4-b7fe-616e76693f8c\n", "record": {"elapsed": {"repr": "0:00:56.750585", "seconds": 56.750585}, "exception": null, "extra": {}, "file": {"name": "main.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\main.py"}, "function": "add_trace_id", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 43, "message": "Request started - Method: GET, Path: /holdings, Trace ID: 6e48f884-61cb-4ef4-b7fe-616e76693f8c", "module": "main", "name": "app.main", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:29:32.752560+05:30", "timestamp": 1755781172.75256}}}
{"text": "2025-08-21 18:29:32.755 | INFO     | app.main:add_trace_id:43 - Request started - Method: GET, Path: /orders, Trace ID: f15204df-886f-44e9-8505-2343d964a22f\n", "record": {"elapsed": {"repr": "0:00:56.753211", "seconds": 56.753211}, "exception": null, "extra": {}, "file": {"name": "main.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\main.py"}, "function": "add_trace_id", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 43, "message": "Request started - Method: GET, Path: /orders, Trace ID: f15204df-886f-44e9-8505-2343d964a22f", "module": "main", "name": "app.main", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:29:32.755186+05:30", "timestamp": 1755781172.755186}}}
{"text": "2025-08-21 18:29:32.756 | INFO     | app.main:add_trace_id:43 - Request started - Method: GET, Path: /trades, Trace ID: f6346de6-33dc-4765-87b5-ed7d1342b132\n", "record": {"elapsed": {"repr": "0:00:56.754987", "seconds": 56.754987}, "exception": null, "extra": {}, "file": {"name": "main.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\main.py"}, "function": "add_trace_id", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 43, "message": "Request started - Method: GET, Path: /trades, Trace ID: f6346de6-33dc-4765-87b5-ed7d1342b132", "module": "main", "name": "app.main", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:29:32.756962+05:30", "timestamp": 1755781172.756962}}}
{"text": "2025-08-21 18:29:32.758 | INFO     | app.ws.live:connect:226 - WebSocket connected: 127.0.0.1\n", "record": {"elapsed": {"repr": "0:00:56.756396", "seconds": 56.756396}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "connect", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 226, "message": "WebSocket connected: 127.0.0.1", "module": "live", "name": "app.ws.live", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:29:32.758371+05:30", "timestamp": 1755781172.758371}}}
{"text": "2025-08-21 18:29:32.761 | INFO     | app.routes.data:pnl:69 - PnL endpoint called\n", "record": {"elapsed": {"repr": "0:00:56.759622", "seconds": 56.759622}, "exception": null, "extra": {}, "file": {"name": "data.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\routes\\data.py"}, "function": "pnl", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 69, "message": "PnL endpoint called", "module": "data", "name": "app.routes.data", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 23196, "name": "AnyIO worker thread"}, "time": {"repr": "2025-08-21 18:29:32.761597+05:30", "timestamp": 1755781172.761597}}}
{"text": "2025-08-21 18:29:32.763 | INFO     | app.services.dhan_client:get_pnl:489 - Starting accurate P&L calculation\n", "record": {"elapsed": {"repr": "0:00:56.761382", "seconds": 56.761382}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 489, "message": "Starting accurate P&L calculation", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 23196, "name": "AnyIO worker thread"}, "time": {"repr": "2025-08-21 18:29:32.763357+05:30", "timestamp": 1755781172.763357}}}
{"text": "2025-08-21 18:29:32.765 | INFO     | app.services.dhan_client:get_pnl:491 - Fetched 5 positions\n", "record": {"elapsed": {"repr": "0:00:56.763367", "seconds": 56.763367}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 491, "message": "Fetched 5 positions", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 23196, "name": "AnyIO worker thread"}, "time": {"repr": "2025-08-21 18:29:32.765342+05:30", "timestamp": 1755781172.765342}}}
{"text": "2025-08-21 18:29:32.774 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for RELIANCE: unrealized=-1120219.34, today=-1120219.34\n", "record": {"elapsed": {"repr": "0:00:56.772636", "seconds": 56.772636}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for RELIANCE: unrealized=-1120219.34, today=-1120219.34", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 23196, "name": "AnyIO worker thread"}, "time": {"repr": "2025-08-21 18:29:32.774611+05:30", "timestamp": 1755781172.774611}}}
{"text": "2025-08-21 18:29:32.775 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for TCS: unrealized=965271.09, today=965271.09\n", "record": {"elapsed": {"repr": "0:00:56.773864", "seconds": 56.773864}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for TCS: unrealized=965271.09, today=965271.09", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 23196, "name": "AnyIO worker thread"}, "time": {"repr": "2025-08-21 18:29:32.775839+05:30", "timestamp": 1755781172.775839}}}
{"text": "2025-08-21 18:29:32.776 | INFO     | app.main:add_trace_id:47 - Request completed - Method: GET, Path: /positions, Status: 200, Trace ID: c667cc15-22d8-43ff-b301-de1acef52562\n", "record": {"elapsed": {"repr": "0:00:56.774248", "seconds": 56.774248}, "exception": null, "extra": {}, "file": {"name": "main.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\main.py"}, "function": "add_trace_id", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 47, "message": "Request completed - Method: GET, Path: /positions, Status: 200, Trace ID: c667cc15-22d8-43ff-b301-de1acef52562", "module": "main", "name": "app.main", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:29:32.776223+05:30", "timestamp": 1755781172.776223}}}
{"text": "2025-08-21 18:29:32.776 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for HDFC: unrealized=-2101031.26, today=-2101031.26\n", "record": {"elapsed": {"repr": "0:00:56.774851", "seconds": 56.774851}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for HDFC: unrealized=-2101031.26, today=-2101031.26", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 23196, "name": "AnyIO worker thread"}, "time": {"repr": "2025-08-21 18:29:32.776826+05:30", "timestamp": 1755781172.776826}}}
{"text": "2025-08-21 18:29:32.778 | INFO     | app.main:add_trace_id:47 - Request completed - Method: GET, Path: /holdings, Status: 200, Trace ID: 6e48f884-61cb-4ef4-b7fe-616e76693f8c\n", "record": {"elapsed": {"repr": "0:00:56.776197", "seconds": 56.776197}, "exception": null, "extra": {}, "file": {"name": "main.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\main.py"}, "function": "add_trace_id", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 47, "message": "Request completed - Method: GET, Path: /holdings, Status: 200, Trace ID: 6e48f884-61cb-4ef4-b7fe-616e76693f8c", "module": "main", "name": "app.main", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:29:32.778172+05:30", "timestamp": 1755781172.778172}}}
{"text": "2025-08-21 18:29:32.778 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for INFY: unrealized=187645.44, today=187645.44\n", "record": {"elapsed": {"repr": "0:00:56.776443", "seconds": 56.776443}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for INFY: unrealized=187645.44, today=187645.44", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 23196, "name": "AnyIO worker thread"}, "time": {"repr": "2025-08-21 18:29:32.778418+05:30", "timestamp": 1755781172.778418}}}
{"text": "2025-08-21 18:29:32.779 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for ICICIBANK: unrealized=374938.54, today=374938.54\n", "record": {"elapsed": {"repr": "0:00:56.777902", "seconds": 56.777902}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for ICICIBANK: unrealized=374938.54, today=374938.54", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 23196, "name": "AnyIO worker thread"}, "time": {"repr": "2025-08-21 18:29:32.779877+05:30", "timestamp": 1755781172.779877}}}
{"text": "2025-08-21 18:29:32.782 | INFO     | app.main:add_trace_id:47 - Request completed - Method: GET, Path: /orders, Status: 200, Trace ID: f15204df-886f-44e9-8505-2343d964a22f\n", "record": {"elapsed": {"repr": "0:00:56.780578", "seconds": 56.780578}, "exception": null, "extra": {}, "file": {"name": "main.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\main.py"}, "function": "add_trace_id", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 47, "message": "Request completed - Method: GET, Path: /orders, Status: 200, Trace ID: f15204df-886f-44e9-8505-2343d964a22f", "module": "main", "name": "app.main", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:29:32.782553+05:30", "timestamp": 1755781172.782553}}}
{"text": "2025-08-21 18:29:32.782 | INFO     | app.services.dhan_client:get_pnl:545 - Calculated totals - realized: 0.0, unrealized: -1693395.53, day: -1693395.53\n", "record": {"elapsed": {"repr": "0:00:56.780984", "seconds": 56.780984}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 545, "message": "Calculated totals - realized: 0.0, unrealized: -1693395.53, day: -1693395.53", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 23196, "name": "AnyIO worker thread"}, "time": {"repr": "2025-08-21 18:29:32.782959+05:30", "timestamp": 1755781172.782959}}}
{"text": "2025-08-21 18:29:32.787 | INFO     | app.main:add_trace_id:47 - Request completed - Method: GET, Path: /trades, Status: 200, Trace ID: f6346de6-33dc-4765-87b5-ed7d1342b132\n", "record": {"elapsed": {"repr": "0:00:56.785090", "seconds": 56.78509}, "exception": null, "extra": {}, "file": {"name": "main.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\main.py"}, "function": "add_trace_id", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 47, "message": "Request completed - Method: GET, Path: /trades, Status: 200, Trace ID: f6346de6-33dc-4765-87b5-ed7d1342b132", "module": "main", "name": "app.main", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:29:32.787065+05:30", "timestamp": 1755781172.787065}}}
{"text": "2025-08-21 18:29:32.787 | DEBUG    | app.services.dhan_client:get_pnl:554 - PnL consistency check passed: drift=₹0.00\n", "record": {"elapsed": {"repr": "0:00:56.786017", "seconds": 56.786017}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 554, "message": "PnL consistency check passed: drift=₹0.00", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 23196, "name": "AnyIO worker thread"}, "time": {"repr": "2025-08-21 18:29:32.787992+05:30", "timestamp": 1755781172.787992}}}
{"text": "2025-08-21 18:29:32.792 | DEBUG    | app.services.dhan_client:get_pnl:558 - Creating PnLTotals...\n", "record": {"elapsed": {"repr": "0:00:56.790414", "seconds": 56.790414}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 558, "message": "Creating PnLTotals...", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 23196, "name": "AnyIO worker thread"}, "time": {"repr": "2025-08-21 18:29:32.792389+05:30", "timestamp": 1755781172.792389}}}
{"text": "2025-08-21 18:29:32.793 | DEBUG    | app.services.dhan_client:get_pnl:565 - PnLTotals created successfully\n", "record": {"elapsed": {"repr": "0:00:56.791279", "seconds": 56.791279}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 565, "message": "PnLTotals created successfully", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 23196, "name": "AnyIO worker thread"}, "time": {"repr": "2025-08-21 18:29:32.793254+05:30", "timestamp": 1755781172.793254}}}
{"text": "2025-08-21 18:29:32.794 | DEBUG    | app.services.dhan_client:get_pnl:574 - Creating PnL model...\n", "record": {"elapsed": {"repr": "0:00:56.792852", "seconds": 56.792852}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 574, "message": "Creating PnL model...", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 23196, "name": "AnyIO worker thread"}, "time": {"repr": "2025-08-21 18:29:32.794827+05:30", "timestamp": 1755781172.794827}}}
{"text": "2025-08-21 18:29:32.798 | DEBUG    | app.services.dhan_client:get_pnl:575 - Model fields: totals=<class 'app.models.schemas.PnLTotals'>, perSymbol=5, updated_at=2025-08-21 18:29:32.774507+05:30, trading_day=2025-08-21\n", "record": {"elapsed": {"repr": "0:00:56.796031", "seconds": 56.796031}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 575, "message": "Model fields: totals=<class 'app.models.schemas.PnLTotals'>, perSymbol=5, updated_at=2025-08-21 18:29:32.774507+05:30, trading_day=2025-08-21", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 23196, "name": "AnyIO worker thread"}, "time": {"repr": "2025-08-21 18:29:32.798006+05:30", "timestamp": 1755781172.798006}}}
{"text": "2025-08-21 18:29:32.799 | INFO     | app.ws.live:connect:226 - WebSocket connected: 127.0.0.1\n", "record": {"elapsed": {"repr": "0:00:56.797237", "seconds": 56.797237}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "connect", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 226, "message": "WebSocket connected: 127.0.0.1", "module": "live", "name": "app.ws.live", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:29:32.799212+05:30", "timestamp": 1755781172.799212}}}
{"text": "2025-08-21 18:29:32.799 | DEBUG    | app.services.dhan_client:get_pnl:584 - Created PnL model: totals=PnLTotals(realized=0.0, unrealized=-1693395.53, day=-1693395.53, currency='INR') per_symbol=[PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1543, avg=1999.73, ltp=1273.73, unrealized=-1120219.34, today_pnl=-1120219.34), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=613, avg=1989.23, ltp=414.56, unrealized=965271.09, today_pnl=965271.09), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=1709, avg=1838.62, ltp=609.23, unrealized=-2101031.26, today_pnl=-2101031.26), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=697, avg=852.74, ltp=583.52, unrealized=187645.44, today_pnl=187645.44), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=255, avg=915.17, ltp=2385.52, unrealized=374938.54, today_pnl=374938.54)] updated_at=datetime.datetime(2025, 8, 21, 18, 29, 32, 774507, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))) trading_day='2025-08-21'\n", "record": {"elapsed": {"repr": "0:00:56.797751", "seconds": 56.797751}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 584, "message": "Created PnL model: totals=PnLTotals(realized=0.0, unrealized=-1693395.53, day=-1693395.53, currency='INR') per_symbol=[PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1543, avg=1999.73, ltp=1273.73, unrealized=-1120219.34, today_pnl=-1120219.34), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=613, avg=1989.23, ltp=414.56, unrealized=965271.09, today_pnl=965271.09), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=1709, avg=1838.62, ltp=609.23, unrealized=-2101031.26, today_pnl=-2101031.26), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=697, avg=852.74, ltp=583.52, unrealized=187645.44, today_pnl=187645.44), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=255, avg=915.17, ltp=2385.52, unrealized=374938.54, today_pnl=374938.54)] updated_at=datetime.datetime(2025, 8, 21, 18, 29, 32, 774507, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))) trading_day='2025-08-21'", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 23196, "name": "AnyIO worker thread"}, "time": {"repr": "2025-08-21 18:29:32.799726+05:30", "timestamp": 1755781172.799726}}}
{"text": "2025-08-21 18:29:32.801 | DEBUG    | app.services.dhan_client:get_pnl:585 - PnL model fields: {'totals': PnLTotals(realized=0.0, unrealized=-1693395.53, day=-1693395.53, currency='INR'), 'per_symbol': [PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1543, avg=1999.73, ltp=1273.73, unrealized=-1120219.34, today_pnl=-1120219.34), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=613, avg=1989.23, ltp=414.56, unrealized=965271.09, today_pnl=965271.09), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=1709, avg=1838.62, ltp=609.23, unrealized=-2101031.26, today_pnl=-2101031.26), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=697, avg=852.74, ltp=583.52, unrealized=187645.44, today_pnl=187645.44), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=255, avg=915.17, ltp=2385.52, unrealized=374938.54, today_pnl=374938.54)], 'updated_at': datetime.datetime(2025, 8, 21, 18, 29, 32, 774507, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))), 'trading_day': '2025-08-21'}\n", "record": {"elapsed": {"repr": "0:00:56.799378", "seconds": 56.799378}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 585, "message": "PnL model fields: {'totals': PnLTotals(realized=0.0, unrealized=-1693395.53, day=-1693395.53, currency='INR'), 'per_symbol': [PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1543, avg=1999.73, ltp=1273.73, unrealized=-1120219.34, today_pnl=-1120219.34), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=613, avg=1989.23, ltp=414.56, unrealized=965271.09, today_pnl=965271.09), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=1709, avg=1838.62, ltp=609.23, unrealized=-2101031.26, today_pnl=-2101031.26), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=697, avg=852.74, ltp=583.52, unrealized=187645.44, today_pnl=187645.44), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=255, avg=915.17, ltp=2385.52, unrealized=374938.54, today_pnl=374938.54)], 'updated_at': datetime.datetime(2025, 8, 21, 18, 29, 32, 774507, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))), 'trading_day': '2025-08-21'}", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 23196, "name": "AnyIO worker thread"}, "time": {"repr": "2025-08-21 18:29:32.801353+05:30", "timestamp": 1755781172.801353}}}
{"text": "2025-08-21 18:29:32.802 | INFO     | app.services.dhan_client:get_pnl:587 - P&L calculation completed successfully: 5 symbols, unrealized=₹-1693395.53\n", "record": {"elapsed": {"repr": "0:00:56.800759", "seconds": 56.800759}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 587, "message": "P&L calculation completed successfully: 5 symbols, unrealized=₹-1693395.53", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 23196, "name": "AnyIO worker thread"}, "time": {"repr": "2025-08-21 18:29:32.802734+05:30", "timestamp": 1755781172.802734}}}
{"text": "2025-08-21 18:29:32.803 | INFO     | app.routes.data:pnl:71 - PnL data returned: True\n", "record": {"elapsed": {"repr": "0:00:56.801993", "seconds": 56.801993}, "exception": null, "extra": {}, "file": {"name": "data.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\routes\\data.py"}, "function": "pnl", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 71, "message": "PnL data returned: True", "module": "data", "name": "app.routes.data", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 23196, "name": "AnyIO worker thread"}, "time": {"repr": "2025-08-21 18:29:32.803968+05:30", "timestamp": 1755781172.803968}}}
{"text": "2025-08-21 18:29:32.807 | INFO     | app.main:add_trace_id:47 - Request completed - Method: GET, Path: /pnl, Status: 200, Trace ID: a872dd4b-d0f8-471c-ad3d-e6fbaf6d4587\n", "record": {"elapsed": {"repr": "0:00:56.805112", "seconds": 56.805112}, "exception": null, "extra": {}, "file": {"name": "main.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\main.py"}, "function": "add_trace_id", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 47, "message": "Request completed - Method: GET, Path: /pnl, Status: 200, Trace ID: a872dd4b-d0f8-471c-ad3d-e6fbaf6d4587", "module": "main", "name": "app.main", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:29:32.807087+05:30", "timestamp": 1755781172.807087}}}
{"text": "2025-08-21 18:29:32.814 | INFO     | app.ws.live:connect:226 - WebSocket connected: 127.0.0.1\n", "record": {"elapsed": {"repr": "0:00:56.812882", "seconds": 56.812882}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "connect", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 226, "message": "WebSocket connected: 127.0.0.1", "module": "live", "name": "app.ws.live", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:29:32.814857+05:30", "timestamp": 1755781172.814857}}}
{"text": "2025-08-21 18:29:32.839 | INFO     | app.ws.live:connect:226 - WebSocket connected: 127.0.0.1\n", "record": {"elapsed": {"repr": "0:00:56.837765", "seconds": 56.837765}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "connect", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 226, "message": "WebSocket connected: 127.0.0.1", "module": "live", "name": "app.ws.live", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:29:32.839740+05:30", "timestamp": 1755781172.83974}}}
{"text": "2025-08-21 18:29:32.856 | INFO     | app.ws.live:connect:226 - WebSocket connected: 127.0.0.1\n", "record": {"elapsed": {"repr": "0:00:56.854730", "seconds": 56.85473}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "connect", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 226, "message": "WebSocket connected: 127.0.0.1", "module": "live", "name": "app.ws.live", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:29:32.856705+05:30", "timestamp": 1755781172.856705}}}
{"text": "2025-08-21 18:29:32.884 | INFO     | app.ws.live:connect:226 - WebSocket connected: 127.0.0.1\n", "record": {"elapsed": {"repr": "0:00:56.882968", "seconds": 56.882968}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "connect", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 226, "message": "WebSocket connected: 127.0.0.1", "module": "live", "name": "app.ws.live", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:29:32.884943+05:30", "timestamp": 1755781172.884943}}}
{"text": "2025-08-21 18:29:32.911 | INFO     | app.ws.live:connect:226 - WebSocket connected: 127.0.0.1\n", "record": {"elapsed": {"repr": "0:00:56.909907", "seconds": 56.909907}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "connect", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 226, "message": "WebSocket connected: 127.0.0.1", "module": "live", "name": "app.ws.live", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:29:32.911882+05:30", "timestamp": 1755781172.911882}}}
{"text": "2025-08-21 18:29:32.933 | INFO     | app.ws.live:connect:226 - WebSocket connected: 127.0.0.1\n", "record": {"elapsed": {"repr": "0:00:56.931294", "seconds": 56.931294}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "connect", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 226, "message": "WebSocket connected: 127.0.0.1", "module": "live", "name": "app.ws.live", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:29:32.933269+05:30", "timestamp": 1755781172.933269}}}
{"text": "2025-08-21 18:29:32.944 | INFO     | app.ws.live:connect:226 - WebSocket connected: 127.0.0.1\n", "record": {"elapsed": {"repr": "0:00:56.942638", "seconds": 56.942638}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "connect", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 226, "message": "WebSocket connected: 127.0.0.1", "module": "live", "name": "app.ws.live", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:29:32.944613+05:30", "timestamp": 1755781172.944613}}}
{"text": "2025-08-21 18:29:33.085 | DEBUG    | app.ws.live:emit_delta:408 - Emitted positions delta: seq=77\n", "record": {"elapsed": {"repr": "0:00:57.083040", "seconds": 57.08304}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "emit_delta", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 408, "message": "Emitted positions delta: seq=77", "module": "live", "name": "app.ws.live", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:29:33.085015+05:30", "timestamp": 1755781173.085015}}}
{"text": "2025-08-21 18:29:33.087 | DEBUG    | app.ws.live:emit_summary:430 - Emitted positions summary: seq=78\n", "record": {"elapsed": {"repr": "0:00:57.085141", "seconds": 57.085141}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "emit_summary", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 430, "message": "Emitted positions summary: seq=78", "module": "live", "name": "app.ws.live", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:29:33.087116+05:30", "timestamp": 1755781173.087116}}}
{"text": "2025-08-21 18:29:33.097 | INFO     | app.ws.live:connect:226 - WebSocket connected: 127.0.0.1\n", "record": {"elapsed": {"repr": "0:00:57.095874", "seconds": 57.095874}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "connect", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 226, "message": "WebSocket connected: 127.0.0.1", "module": "live", "name": "app.ws.live", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:29:33.097849+05:30", "timestamp": 1755781173.097849}}}
{"text": "2025-08-21 18:29:33.119 | INFO     | app.ws.live:connect:226 - WebSocket connected: 127.0.0.1\n", "record": {"elapsed": {"repr": "0:00:57.117836", "seconds": 57.117836}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "connect", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 226, "message": "WebSocket connected: 127.0.0.1", "module": "live", "name": "app.ws.live", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:29:33.119811+05:30", "timestamp": 1755781173.119811}}}
{"text": "2025-08-21 18:29:33.176 | INFO     | app.ws.live:connect:226 - WebSocket connected: 127.0.0.1\n", "record": {"elapsed": {"repr": "0:00:57.174931", "seconds": 57.174931}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "connect", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 226, "message": "WebSocket connected: 127.0.0.1", "module": "live", "name": "app.ws.live", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:29:33.176906+05:30", "timestamp": 1755781173.176906}}}
{"text": "2025-08-21 18:29:33.242 | INFO     | app.ws.live:connect:226 - WebSocket connected: 127.0.0.1\n", "record": {"elapsed": {"repr": "0:00:57.240154", "seconds": 57.240154}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "connect", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 226, "message": "WebSocket connected: 127.0.0.1", "module": "live", "name": "app.ws.live", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:29:33.242129+05:30", "timestamp": 1755781173.242129}}}
{"text": "2025-08-21 18:29:33.410 | INFO     | app.ws.live:connect:226 - WebSocket connected: 127.0.0.1\n", "record": {"elapsed": {"repr": "0:00:57.408414", "seconds": 57.408414}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "connect", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 226, "message": "WebSocket connected: 127.0.0.1", "module": "live", "name": "app.ws.live", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:29:33.410389+05:30", "timestamp": 1755781173.410389}}}
{"text": "2025-08-21 18:29:33.434 | INFO     | app.ws.live:connect:226 - WebSocket connected: 127.0.0.1\n", "record": {"elapsed": {"repr": "0:00:57.432453", "seconds": 57.432453}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "connect", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 226, "message": "WebSocket connected: 127.0.0.1", "module": "live", "name": "app.ws.live", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:29:33.434428+05:30", "timestamp": 1755781173.434428}}}
{"text": "2025-08-21 18:29:33.449 | INFO     | app.ws.live:connect:226 - WebSocket connected: 127.0.0.1\n", "record": {"elapsed": {"repr": "0:00:57.447791", "seconds": 57.447791}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "connect", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 226, "message": "WebSocket connected: 127.0.0.1", "module": "live", "name": "app.ws.live", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:29:33.449766+05:30", "timestamp": 1755781173.449766}}}
{"text": "2025-08-21 18:29:33.618 | INFO     | app.ws.live:connect:226 - WebSocket connected: 127.0.0.1\n", "record": {"elapsed": {"repr": "0:00:57.616773", "seconds": 57.616773}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "connect", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 226, "message": "WebSocket connected: 127.0.0.1", "module": "live", "name": "app.ws.live", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:29:33.618748+05:30", "timestamp": 1755781173.618748}}}
{"text": "2025-08-21 18:29:33.643 | INFO     | app.ws.live:connect:226 - WebSocket connected: 127.0.0.1\n", "record": {"elapsed": {"repr": "0:00:57.641480", "seconds": 57.64148}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "connect", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 226, "message": "WebSocket connected: 127.0.0.1", "module": "live", "name": "app.ws.live", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:29:33.643455+05:30", "timestamp": 1755781173.643455}}}
{"text": "2025-08-21 18:29:33.657 | INFO     | app.ws.live:connect:226 - WebSocket connected: 127.0.0.1\n", "record": {"elapsed": {"repr": "0:00:57.655279", "seconds": 57.655279}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "connect", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 226, "message": "WebSocket connected: 127.0.0.1", "module": "live", "name": "app.ws.live", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:29:33.657254+05:30", "timestamp": 1755781173.657254}}}
{"text": "2025-08-21 18:29:33.988 | INFO     | app.services.dhan_client:get_pnl:489 - Starting accurate P&L calculation\n", "record": {"elapsed": {"repr": "0:00:57.986444", "seconds": 57.986444}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 489, "message": "Starting accurate P&L calculation", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:29:33.988419+05:30", "timestamp": 1755781173.988419}}}
{"text": "2025-08-21 18:29:33.989 | INFO     | app.services.dhan_client:get_pnl:491 - Fetched 5 positions\n", "record": {"elapsed": {"repr": "0:00:57.987376", "seconds": 57.987376}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 491, "message": "Fetched 5 positions", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:29:33.989351+05:30", "timestamp": 1755781173.989351}}}
{"text": "2025-08-21 18:29:33.990 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for RELIANCE: unrealized=-1120219.34, today=-1120219.34\n", "record": {"elapsed": {"repr": "0:00:57.988063", "seconds": 57.988063}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for RELIANCE: unrealized=-1120219.34, today=-1120219.34", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:29:33.990038+05:30", "timestamp": 1755781173.990038}}}
{"text": "2025-08-21 18:29:33.991 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for TCS: unrealized=965271.09, today=965271.09\n", "record": {"elapsed": {"repr": "0:00:57.989099", "seconds": 57.989099}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for TCS: unrealized=965271.09, today=965271.09", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:29:33.991074+05:30", "timestamp": 1755781173.991074}}}
{"text": "2025-08-21 18:29:33.991 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for HDFC: unrealized=-2101031.26, today=-2101031.26\n", "record": {"elapsed": {"repr": "0:00:57.989936", "seconds": 57.989936}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for HDFC: unrealized=-2101031.26, today=-2101031.26", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:29:33.991911+05:30", "timestamp": 1755781173.991911}}}
{"text": "2025-08-21 18:29:33.992 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for INFY: unrealized=187645.44, today=187645.44\n", "record": {"elapsed": {"repr": "0:00:57.990704", "seconds": 57.990704}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for INFY: unrealized=187645.44, today=187645.44", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:29:33.992679+05:30", "timestamp": 1755781173.992679}}}
{"text": "2025-08-21 18:29:33.993 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for ICICIBANK: unrealized=374938.54, today=374938.54\n", "record": {"elapsed": {"repr": "0:00:57.991499", "seconds": 57.991499}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for ICICIBANK: unrealized=374938.54, today=374938.54", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:29:33.993474+05:30", "timestamp": 1755781173.993474}}}
{"text": "2025-08-21 18:29:33.994 | INFO     | app.services.dhan_client:get_pnl:545 - Calculated totals - realized: 0.0, unrealized: -1693395.53, day: -1693395.53\n", "record": {"elapsed": {"repr": "0:00:57.992405", "seconds": 57.992405}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 545, "message": "Calculated totals - realized: 0.0, unrealized: -1693395.53, day: -1693395.53", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:29:33.994380+05:30", "timestamp": 1755781173.99438}}}
{"text": "2025-08-21 18:29:33.995 | DEBUG    | app.services.dhan_client:get_pnl:554 - PnL consistency check passed: drift=₹0.00\n", "record": {"elapsed": {"repr": "0:00:57.993074", "seconds": 57.993074}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 554, "message": "PnL consistency check passed: drift=₹0.00", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:29:33.995049+05:30", "timestamp": 1755781173.995049}}}
{"text": "2025-08-21 18:29:33.995 | DEBUG    | app.services.dhan_client:get_pnl:558 - Creating PnLTotals...\n", "record": {"elapsed": {"repr": "0:00:57.993738", "seconds": 57.993738}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 558, "message": "Creating PnLTotals...", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:29:33.995713+05:30", "timestamp": 1755781173.995713}}}
{"text": "2025-08-21 18:29:33.996 | DEBUG    | app.services.dhan_client:get_pnl:565 - PnLTotals created successfully\n", "record": {"elapsed": {"repr": "0:00:57.994484", "seconds": 57.994484}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 565, "message": "PnLTotals created successfully", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:29:33.996459+05:30", "timestamp": 1755781173.996459}}}
{"text": "2025-08-21 18:29:33.997 | DEBUG    | app.services.dhan_client:get_pnl:574 - Creating PnL model...\n", "record": {"elapsed": {"repr": "0:00:57.995242", "seconds": 57.995242}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 574, "message": "Creating PnL model...", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:29:33.997217+05:30", "timestamp": 1755781173.997217}}}
{"text": "2025-08-21 18:29:33.997 | DEBUG    | app.services.dhan_client:get_pnl:575 - Model fields: totals=<class 'app.models.schemas.PnLTotals'>, perSymbol=5, updated_at=2025-08-21 18:29:33.989937+05:30, trading_day=2025-08-21\n", "record": {"elapsed": {"repr": "0:00:57.995990", "seconds": 57.99599}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 575, "message": "Model fields: totals=<class 'app.models.schemas.PnLTotals'>, perSymbol=5, updated_at=2025-08-21 18:29:33.989937+05:30, trading_day=2025-08-21", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:29:33.997965+05:30", "timestamp": 1755781173.997965}}}
{"text": "2025-08-21 18:29:33.999 | DEBUG    | app.services.dhan_client:get_pnl:584 - Created PnL model: totals=PnLTotals(realized=0.0, unrealized=-1693395.53, day=-1693395.53, currency='INR') per_symbol=[PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1543, avg=1999.73, ltp=1273.73, unrealized=-1120219.34, today_pnl=-1120219.34), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=613, avg=1989.23, ltp=414.56, unrealized=965271.09, today_pnl=965271.09), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=1709, avg=1838.62, ltp=609.23, unrealized=-2101031.26, today_pnl=-2101031.26), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=697, avg=852.74, ltp=583.52, unrealized=187645.44, today_pnl=187645.44), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=255, avg=915.17, ltp=2385.52, unrealized=374938.54, today_pnl=374938.54)] updated_at=datetime.datetime(2025, 8, 21, 18, 29, 33, 989937, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))) trading_day='2025-08-21'\n", "record": {"elapsed": {"repr": "0:00:57.997549", "seconds": 57.997549}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 584, "message": "Created PnL model: totals=PnLTotals(realized=0.0, unrealized=-1693395.53, day=-1693395.53, currency='INR') per_symbol=[PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1543, avg=1999.73, ltp=1273.73, unrealized=-1120219.34, today_pnl=-1120219.34), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=613, avg=1989.23, ltp=414.56, unrealized=965271.09, today_pnl=965271.09), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=1709, avg=1838.62, ltp=609.23, unrealized=-2101031.26, today_pnl=-2101031.26), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=697, avg=852.74, ltp=583.52, unrealized=187645.44, today_pnl=187645.44), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=255, avg=915.17, ltp=2385.52, unrealized=374938.54, today_pnl=374938.54)] updated_at=datetime.datetime(2025, 8, 21, 18, 29, 33, 989937, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))) trading_day='2025-08-21'", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:29:33.999524+05:30", "timestamp": 1755781173.999524}}}
{"text": "2025-08-21 18:29:34.000 | DEBUG    | app.services.dhan_client:get_pnl:585 - PnL model fields: {'totals': PnLTotals(realized=0.0, unrealized=-1693395.53, day=-1693395.53, currency='INR'), 'per_symbol': [PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1543, avg=1999.73, ltp=1273.73, unrealized=-1120219.34, today_pnl=-1120219.34), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=613, avg=1989.23, ltp=414.56, unrealized=965271.09, today_pnl=965271.09), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=1709, avg=1838.62, ltp=609.23, unrealized=-2101031.26, today_pnl=-2101031.26), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=697, avg=852.74, ltp=583.52, unrealized=187645.44, today_pnl=187645.44), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=255, avg=915.17, ltp=2385.52, unrealized=374938.54, today_pnl=374938.54)], 'updated_at': datetime.datetime(2025, 8, 21, 18, 29, 33, 989937, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))), 'trading_day': '2025-08-21'}\n", "record": {"elapsed": {"repr": "0:00:57.998677", "seconds": 57.998677}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 585, "message": "PnL model fields: {'totals': PnLTotals(realized=0.0, unrealized=-1693395.53, day=-1693395.53, currency='INR'), 'per_symbol': [PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1543, avg=1999.73, ltp=1273.73, unrealized=-1120219.34, today_pnl=-1120219.34), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=613, avg=1989.23, ltp=414.56, unrealized=965271.09, today_pnl=965271.09), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=1709, avg=1838.62, ltp=609.23, unrealized=-2101031.26, today_pnl=-2101031.26), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=697, avg=852.74, ltp=583.52, unrealized=187645.44, today_pnl=187645.44), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=255, avg=915.17, ltp=2385.52, unrealized=374938.54, today_pnl=374938.54)], 'updated_at': datetime.datetime(2025, 8, 21, 18, 29, 33, 989937, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))), 'trading_day': '2025-08-21'}", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:29:34.000652+05:30", "timestamp": 1755781174.000652}}}
{"text": "2025-08-21 18:29:34.001 | INFO     | app.services.dhan_client:get_pnl:587 - P&L calculation completed successfully: 5 symbols, unrealized=₹-1693395.53\n", "record": {"elapsed": {"repr": "0:00:57.999734", "seconds": 57.999734}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 587, "message": "P&L calculation completed successfully: 5 symbols, unrealized=₹-1693395.53", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:29:34.001709+05:30", "timestamp": 1755781174.001709}}}
{"text": "2025-08-21 18:29:34.002 | ERROR    | app.ws.live:broadcast:253 - Failed to broadcast to client: Object of type PnLTotals is not JSON serializable\n", "record": {"elapsed": {"repr": "0:00:58.000844", "seconds": 58.000844}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "broadcast", "level": {"icon": "❌", "name": "ERROR", "no": 40}, "line": 253, "message": "Failed to broadcast to client: Object of type PnLTotals is not JSON serializable", "module": "live", "name": "app.ws.live", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:29:34.002819+05:30", "timestamp": 1755781174.002819}}}
{"text": "2025-08-21 18:29:34.003 | ERROR    | app.ws.live:broadcast:253 - Failed to broadcast to client: Object of type PnLTotals is not JSON serializable\n", "record": {"elapsed": {"repr": "0:00:58.001872", "seconds": 58.001872}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "broadcast", "level": {"icon": "❌", "name": "ERROR", "no": 40}, "line": 253, "message": "Failed to broadcast to client: Object of type PnLTotals is not JSON serializable", "module": "live", "name": "app.ws.live", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:29:34.003847+05:30", "timestamp": 1755781174.003847}}}
{"text": "2025-08-21 18:29:34.004 | ERROR    | app.ws.live:broadcast:253 - Failed to broadcast to client: Object of type PnLTotals is not JSON serializable\n", "record": {"elapsed": {"repr": "0:00:58.002555", "seconds": 58.002555}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "broadcast", "level": {"icon": "❌", "name": "ERROR", "no": 40}, "line": 253, "message": "Failed to broadcast to client: Object of type PnLTotals is not JSON serializable", "module": "live", "name": "app.ws.live", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:29:34.004530+05:30", "timestamp": 1755781174.00453}}}
{"text": "2025-08-21 18:29:34.005 | ERROR    | app.ws.live:broadcast:253 - Failed to broadcast to client: Object of type PnLTotals is not JSON serializable\n", "record": {"elapsed": {"repr": "0:00:58.003445", "seconds": 58.003445}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "broadcast", "level": {"icon": "❌", "name": "ERROR", "no": 40}, "line": 253, "message": "Failed to broadcast to client: Object of type PnLTotals is not JSON serializable", "module": "live", "name": "app.ws.live", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:29:34.005420+05:30", "timestamp": 1755781174.00542}}}
{"text": "2025-08-21 18:29:34.006 | ERROR    | app.ws.live:broadcast:253 - Failed to broadcast to client: Object of type PnLTotals is not JSON serializable\n", "record": {"elapsed": {"repr": "0:00:58.004474", "seconds": 58.004474}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "broadcast", "level": {"icon": "❌", "name": "ERROR", "no": 40}, "line": 253, "message": "Failed to broadcast to client: Object of type PnLTotals is not JSON serializable", "module": "live", "name": "app.ws.live", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:29:34.006449+05:30", "timestamp": 1755781174.006449}}}
{"text": "2025-08-21 18:29:34.007 | ERROR    | app.ws.live:broadcast:253 - Failed to broadcast to client: Object of type PnLTotals is not JSON serializable\n", "record": {"elapsed": {"repr": "0:00:58.005264", "seconds": 58.005264}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "broadcast", "level": {"icon": "❌", "name": "ERROR", "no": 40}, "line": 253, "message": "Failed to broadcast to client: Object of type PnLTotals is not JSON serializable", "module": "live", "name": "app.ws.live", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:29:34.007239+05:30", "timestamp": 1755781174.007239}}}
{"text": "2025-08-21 18:29:34.008 | ERROR    | app.ws.live:broadcast:253 - Failed to broadcast to client: Object of type PnLTotals is not JSON serializable\n", "record": {"elapsed": {"repr": "0:00:58.006039", "seconds": 58.006039}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "broadcast", "level": {"icon": "❌", "name": "ERROR", "no": 40}, "line": 253, "message": "Failed to broadcast to client: Object of type PnLTotals is not JSON serializable", "module": "live", "name": "app.ws.live", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:29:34.008014+05:30", "timestamp": 1755781174.008014}}}
{"text": "2025-08-21 18:29:34.008 | ERROR    | app.ws.live:broadcast:253 - Failed to broadcast to client: Object of type PnLTotals is not JSON serializable\n", "record": {"elapsed": {"repr": "0:00:58.006850", "seconds": 58.00685}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "broadcast", "level": {"icon": "❌", "name": "ERROR", "no": 40}, "line": 253, "message": "Failed to broadcast to client: Object of type PnLTotals is not JSON serializable", "module": "live", "name": "app.ws.live", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:29:34.008825+05:30", "timestamp": 1755781174.008825}}}
{"text": "2025-08-21 18:29:34.009 | ERROR    | app.ws.live:broadcast:253 - Failed to broadcast to client: Object of type PnLTotals is not JSON serializable\n", "record": {"elapsed": {"repr": "0:00:58.007553", "seconds": 58.007553}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "broadcast", "level": {"icon": "❌", "name": "ERROR", "no": 40}, "line": 253, "message": "Failed to broadcast to client: Object of type PnLTotals is not JSON serializable", "module": "live", "name": "app.ws.live", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:29:34.009528+05:30", "timestamp": 1755781174.009528}}}
{"text": "2025-08-21 18:29:34.010 | ERROR    | app.ws.live:broadcast:253 - Failed to broadcast to client: Object of type PnLTotals is not JSON serializable\n", "record": {"elapsed": {"repr": "0:00:58.008285", "seconds": 58.008285}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "broadcast", "level": {"icon": "❌", "name": "ERROR", "no": 40}, "line": 253, "message": "Failed to broadcast to client: Object of type PnLTotals is not JSON serializable", "module": "live", "name": "app.ws.live", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:29:34.010260+05:30", "timestamp": 1755781174.01026}}}
{"text": "2025-08-21 18:29:34.011 | ERROR    | app.ws.live:broadcast:253 - Failed to broadcast to client: Object of type PnLTotals is not JSON serializable\n", "record": {"elapsed": {"repr": "0:00:58.009034", "seconds": 58.009034}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "broadcast", "level": {"icon": "❌", "name": "ERROR", "no": 40}, "line": 253, "message": "Failed to broadcast to client: Object of type PnLTotals is not JSON serializable", "module": "live", "name": "app.ws.live", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:29:34.011009+05:30", "timestamp": 1755781174.011009}}}
{"text": "2025-08-21 18:29:34.011 | ERROR    | app.ws.live:broadcast:253 - Failed to broadcast to client: Object of type PnLTotals is not JSON serializable\n", "record": {"elapsed": {"repr": "0:00:58.009650", "seconds": 58.00965}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "broadcast", "level": {"icon": "❌", "name": "ERROR", "no": 40}, "line": 253, "message": "Failed to broadcast to client: Object of type PnLTotals is not JSON serializable", "module": "live", "name": "app.ws.live", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:29:34.011625+05:30", "timestamp": 1755781174.011625}}}
{"text": "2025-08-21 18:29:34.012 | ERROR    | app.ws.live:broadcast:253 - Failed to broadcast to client: Object of type PnLTotals is not JSON serializable\n", "record": {"elapsed": {"repr": "0:00:58.010865", "seconds": 58.010865}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "broadcast", "level": {"icon": "❌", "name": "ERROR", "no": 40}, "line": 253, "message": "Failed to broadcast to client: Object of type PnLTotals is not JSON serializable", "module": "live", "name": "app.ws.live", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:29:34.012840+05:30", "timestamp": 1755781174.01284}}}
{"text": "2025-08-21 18:29:34.014 | ERROR    | app.ws.live:broadcast:253 - Failed to broadcast to client: Object of type PnLTotals is not JSON serializable\n", "record": {"elapsed": {"repr": "0:00:58.012187", "seconds": 58.012187}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "broadcast", "level": {"icon": "❌", "name": "ERROR", "no": 40}, "line": 253, "message": "Failed to broadcast to client: Object of type PnLTotals is not JSON serializable", "module": "live", "name": "app.ws.live", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:29:34.014162+05:30", "timestamp": 1755781174.014162}}}
{"text": "2025-08-21 18:29:34.015 | ERROR    | app.ws.live:broadcast:253 - Failed to broadcast to client: Object of type PnLTotals is not JSON serializable\n", "record": {"elapsed": {"repr": "0:00:58.013346", "seconds": 58.013346}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "broadcast", "level": {"icon": "❌", "name": "ERROR", "no": 40}, "line": 253, "message": "Failed to broadcast to client: Object of type PnLTotals is not JSON serializable", "module": "live", "name": "app.ws.live", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:29:34.015321+05:30", "timestamp": 1755781174.015321}}}
{"text": "2025-08-21 18:29:34.016 | ERROR    | app.ws.live:broadcast:253 - Failed to broadcast to client: Object of type PnLTotals is not JSON serializable\n", "record": {"elapsed": {"repr": "0:00:58.014051", "seconds": 58.014051}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "broadcast", "level": {"icon": "❌", "name": "ERROR", "no": 40}, "line": 253, "message": "Failed to broadcast to client: Object of type PnLTotals is not JSON serializable", "module": "live", "name": "app.ws.live", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:29:34.016026+05:30", "timestamp": 1755781174.016026}}}
{"text": "2025-08-21 18:29:34.016 | ERROR    | app.ws.live:broadcast:253 - Failed to broadcast to client: Object of type PnLTotals is not JSON serializable\n", "record": {"elapsed": {"repr": "0:00:58.014844", "seconds": 58.014844}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "broadcast", "level": {"icon": "❌", "name": "ERROR", "no": 40}, "line": 253, "message": "Failed to broadcast to client: Object of type PnLTotals is not JSON serializable", "module": "live", "name": "app.ws.live", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:29:34.016819+05:30", "timestamp": 1755781174.016819}}}
{"text": "2025-08-21 18:29:34.017 | ERROR    | app.ws.live:broadcast:253 - Failed to broadcast to client: Object of type PnLTotals is not JSON serializable\n", "record": {"elapsed": {"repr": "0:00:58.015510", "seconds": 58.01551}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "broadcast", "level": {"icon": "❌", "name": "ERROR", "no": 40}, "line": 253, "message": "Failed to broadcast to client: Object of type PnLTotals is not JSON serializable", "module": "live", "name": "app.ws.live", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:29:34.017485+05:30", "timestamp": 1755781174.017485}}}
{"text": "2025-08-21 18:29:34.018 | ERROR    | app.ws.live:broadcast:253 - Failed to broadcast to client: Object of type PnLTotals is not JSON serializable\n", "record": {"elapsed": {"repr": "0:00:58.016421", "seconds": 58.016421}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "broadcast", "level": {"icon": "❌", "name": "ERROR", "no": 40}, "line": 253, "message": "Failed to broadcast to client: Object of type PnLTotals is not JSON serializable", "module": "live", "name": "app.ws.live", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:29:34.018396+05:30", "timestamp": 1755781174.018396}}}
{"text": "2025-08-21 18:29:34.019 | INFO     | app.ws.live:disconnect:234 - WebSocket disconnected: 127.0.0.1\n", "record": {"elapsed": {"repr": "0:00:58.017145", "seconds": 58.017145}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "disconnect", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 234, "message": "WebSocket disconnected: 127.0.0.1", "module": "live", "name": "app.ws.live", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:29:34.019120+05:30", "timestamp": 1755781174.01912}}}
{"text": "2025-08-21 18:29:34.020 | INFO     | app.ws.live:disconnect:234 - WebSocket disconnected: 127.0.0.1\n", "record": {"elapsed": {"repr": "0:00:58.018715", "seconds": 58.018715}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "disconnect", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 234, "message": "WebSocket disconnected: 127.0.0.1", "module": "live", "name": "app.ws.live", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:29:34.020690+05:30", "timestamp": 1755781174.02069}}}
{"text": "2025-08-21 18:29:34.021 | INFO     | app.ws.live:disconnect:234 - WebSocket disconnected: 127.0.0.1\n", "record": {"elapsed": {"repr": "0:00:58.019363", "seconds": 58.019363}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "disconnect", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 234, "message": "WebSocket disconnected: 127.0.0.1", "module": "live", "name": "app.ws.live", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:29:34.021338+05:30", "timestamp": 1755781174.021338}}}
{"text": "2025-08-21 18:29:34.022 | INFO     | app.ws.live:disconnect:234 - WebSocket disconnected: 127.0.0.1\n", "record": {"elapsed": {"repr": "0:00:58.020179", "seconds": 58.020179}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "disconnect", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 234, "message": "WebSocket disconnected: 127.0.0.1", "module": "live", "name": "app.ws.live", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:29:34.022154+05:30", "timestamp": 1755781174.022154}}}
{"text": "2025-08-21 18:29:34.022 | INFO     | app.ws.live:disconnect:234 - WebSocket disconnected: 127.0.0.1\n", "record": {"elapsed": {"repr": "0:00:58.020719", "seconds": 58.020719}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "disconnect", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 234, "message": "WebSocket disconnected: 127.0.0.1", "module": "live", "name": "app.ws.live", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:29:34.022694+05:30", "timestamp": 1755781174.022694}}}
{"text": "2025-08-21 18:29:34.023 | INFO     | app.ws.live:disconnect:234 - WebSocket disconnected: 127.0.0.1\n", "record": {"elapsed": {"repr": "0:00:58.021425", "seconds": 58.021425}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "disconnect", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 234, "message": "WebSocket disconnected: 127.0.0.1", "module": "live", "name": "app.ws.live", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:29:34.023400+05:30", "timestamp": 1755781174.0234}}}
{"text": "2025-08-21 18:29:34.023 | INFO     | app.ws.live:disconnect:234 - WebSocket disconnected: 127.0.0.1\n", "record": {"elapsed": {"repr": "0:00:58.021994", "seconds": 58.021994}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "disconnect", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 234, "message": "WebSocket disconnected: 127.0.0.1", "module": "live", "name": "app.ws.live", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:29:34.023969+05:30", "timestamp": 1755781174.023969}}}
{"text": "2025-08-21 18:29:34.024 | INFO     | app.ws.live:disconnect:234 - WebSocket disconnected: 127.0.0.1\n", "record": {"elapsed": {"repr": "0:00:58.022501", "seconds": 58.022501}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "disconnect", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 234, "message": "WebSocket disconnected: 127.0.0.1", "module": "live", "name": "app.ws.live", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:29:34.024476+05:30", "timestamp": 1755781174.024476}}}
{"text": "2025-08-21 18:29:34.025 | INFO     | app.ws.live:disconnect:234 - WebSocket disconnected: 127.0.0.1\n", "record": {"elapsed": {"repr": "0:00:58.023130", "seconds": 58.02313}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "disconnect", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 234, "message": "WebSocket disconnected: 127.0.0.1", "module": "live", "name": "app.ws.live", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:29:34.025105+05:30", "timestamp": 1755781174.025105}}}
{"text": "2025-08-21 18:29:34.025 | INFO     | app.ws.live:disconnect:234 - WebSocket disconnected: 127.0.0.1\n", "record": {"elapsed": {"repr": "0:00:58.023692", "seconds": 58.023692}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "disconnect", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 234, "message": "WebSocket disconnected: 127.0.0.1", "module": "live", "name": "app.ws.live", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:29:34.025667+05:30", "timestamp": 1755781174.025667}}}
{"text": "2025-08-21 18:29:34.026 | INFO     | app.ws.live:disconnect:234 - WebSocket disconnected: 127.0.0.1\n", "record": {"elapsed": {"repr": "0:00:58.024392", "seconds": 58.024392}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "disconnect", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 234, "message": "WebSocket disconnected: 127.0.0.1", "module": "live", "name": "app.ws.live", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:29:34.026367+05:30", "timestamp": 1755781174.026367}}}
{"text": "2025-08-21 18:29:34.027 | INFO     | app.ws.live:disconnect:234 - WebSocket disconnected: 127.0.0.1\n", "record": {"elapsed": {"repr": "0:00:58.025058", "seconds": 58.025058}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "disconnect", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 234, "message": "WebSocket disconnected: 127.0.0.1", "module": "live", "name": "app.ws.live", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:29:34.027033+05:30", "timestamp": 1755781174.027033}}}
{"text": "2025-08-21 18:29:34.028 | INFO     | app.ws.live:disconnect:234 - WebSocket disconnected: 127.0.0.1\n", "record": {"elapsed": {"repr": "0:00:58.026065", "seconds": 58.026065}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "disconnect", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 234, "message": "WebSocket disconnected: 127.0.0.1", "module": "live", "name": "app.ws.live", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:29:34.028040+05:30", "timestamp": 1755781174.02804}}}
{"text": "2025-08-21 18:29:34.029 | INFO     | app.ws.live:disconnect:234 - WebSocket disconnected: 127.0.0.1\n", "record": {"elapsed": {"repr": "0:00:58.027030", "seconds": 58.02703}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "disconnect", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 234, "message": "WebSocket disconnected: 127.0.0.1", "module": "live", "name": "app.ws.live", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:29:34.029005+05:30", "timestamp": 1755781174.029005}}}
{"text": "2025-08-21 18:29:34.029 | INFO     | app.ws.live:disconnect:234 - WebSocket disconnected: 127.0.0.1\n", "record": {"elapsed": {"repr": "0:00:58.027912", "seconds": 58.027912}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "disconnect", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 234, "message": "WebSocket disconnected: 127.0.0.1", "module": "live", "name": "app.ws.live", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:29:34.029887+05:30", "timestamp": 1755781174.029887}}}
{"text": "2025-08-21 18:29:34.030 | INFO     | app.ws.live:disconnect:234 - WebSocket disconnected: 127.0.0.1\n", "record": {"elapsed": {"repr": "0:00:58.028979", "seconds": 58.028979}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "disconnect", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 234, "message": "WebSocket disconnected: 127.0.0.1", "module": "live", "name": "app.ws.live", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:29:34.030954+05:30", "timestamp": 1755781174.030954}}}
{"text": "2025-08-21 18:29:34.031 | INFO     | app.ws.live:disconnect:234 - WebSocket disconnected: 127.0.0.1\n", "record": {"elapsed": {"repr": "0:00:58.029866", "seconds": 58.029866}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "disconnect", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 234, "message": "WebSocket disconnected: 127.0.0.1", "module": "live", "name": "app.ws.live", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:29:34.031841+05:30", "timestamp": 1755781174.031841}}}
{"text": "2025-08-21 18:29:34.032 | INFO     | app.ws.live:disconnect:234 - WebSocket disconnected: 127.0.0.1\n", "record": {"elapsed": {"repr": "0:00:58.030866", "seconds": 58.030866}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "disconnect", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 234, "message": "WebSocket disconnected: 127.0.0.1", "module": "live", "name": "app.ws.live", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:29:34.032841+05:30", "timestamp": 1755781174.032841}}}
{"text": "2025-08-21 18:29:34.033 | INFO     | app.ws.live:disconnect:234 - WebSocket disconnected: 127.0.0.1\n", "record": {"elapsed": {"repr": "0:00:58.031689", "seconds": 58.031689}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "disconnect", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 234, "message": "WebSocket disconnected: 127.0.0.1", "module": "live", "name": "app.ws.live", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:29:34.033664+05:30", "timestamp": 1755781174.033664}}}
{"text": "2025-08-21 18:29:34.035 | DEBUG    | app.ws.live:emit_delta:408 - Emitted pnl delta: seq=79\n", "record": {"elapsed": {"repr": "0:00:58.033267", "seconds": 58.033267}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "emit_delta", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 408, "message": "Emitted pnl delta: seq=79", "module": "live", "name": "app.ws.live", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:29:34.035242+05:30", "timestamp": 1755781174.035242}}}
{"text": "2025-08-21 18:29:34.066 | INFO     | app.ws.live:connect:226 - WebSocket connected: 127.0.0.1\n", "record": {"elapsed": {"repr": "0:00:58.064238", "seconds": 58.064238}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "connect", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 226, "message": "WebSocket connected: 127.0.0.1", "module": "live", "name": "app.ws.live", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:29:34.066213+05:30", "timestamp": 1755781174.066213}}}
{"text": "2025-08-21 18:29:34.081 | INFO     | app.ws.live:connect:226 - WebSocket connected: 127.0.0.1\n", "record": {"elapsed": {"repr": "0:00:58.079879", "seconds": 58.079879}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "connect", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 226, "message": "WebSocket connected: 127.0.0.1", "module": "live", "name": "app.ws.live", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:29:34.081854+05:30", "timestamp": 1755781174.081854}}}
{"text": "2025-08-21 18:29:34.100 | INFO     | app.ws.live:connect:226 - WebSocket connected: 127.0.0.1\n", "record": {"elapsed": {"repr": "0:00:58.098127", "seconds": 58.098127}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "connect", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 226, "message": "WebSocket connected: 127.0.0.1", "module": "live", "name": "app.ws.live", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:29:34.100102+05:30", "timestamp": 1755781174.100102}}}
{"text": "2025-08-21 18:29:34.392 | INFO     | app.ws.live:connect:226 - WebSocket connected: 127.0.0.1\n", "record": {"elapsed": {"repr": "0:00:58.390508", "seconds": 58.390508}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "connect", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 226, "message": "WebSocket connected: 127.0.0.1", "module": "live", "name": "app.ws.live", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:29:34.392483+05:30", "timestamp": 1755781174.392483}}}
{"text": "2025-08-21 18:29:34.410 | INFO     | app.ws.live:connect:226 - WebSocket connected: 127.0.0.1\n", "record": {"elapsed": {"repr": "0:00:58.408154", "seconds": 58.408154}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "connect", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 226, "message": "WebSocket connected: 127.0.0.1", "module": "live", "name": "app.ws.live", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:29:34.410129+05:30", "timestamp": 1755781174.410129}}}
{"text": "2025-08-21 18:29:34.426 | INFO     | app.ws.live:connect:226 - WebSocket connected: 127.0.0.1\n", "record": {"elapsed": {"repr": "0:00:58.424174", "seconds": 58.424174}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "connect", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 226, "message": "WebSocket connected: 127.0.0.1", "module": "live", "name": "app.ws.live", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:29:34.426149+05:30", "timestamp": 1755781174.426149}}}
{"text": "2025-08-21 18:29:34.479 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:58.477971", "seconds": 58.477971}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 17632, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 18:29:34.479946+05:30", "timestamp": 1755781174.479946}}}
{"text": "2025-08-21 18:29:34.480 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:58.478780", "seconds": 58.47878}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 17632, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 18:29:34.480755+05:30", "timestamp": 1755781174.480755}}}
{"text": "2025-08-21 18:29:34.481 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:58.479564", "seconds": 58.479564}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 17632, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 18:29:34.481539+05:30", "timestamp": 1755781174.481539}}}
{"text": "2025-08-21 18:29:34.482 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:58.480213", "seconds": 58.480213}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 17632, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 18:29:34.482188+05:30", "timestamp": 1755781174.482188}}}
{"text": "2025-08-21 18:29:34.482 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:58.480784", "seconds": 58.480784}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 17632, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 18:29:34.482759+05:30", "timestamp": 1755781174.482759}}}
{"text": "2025-08-21 18:29:34.483 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:58.481421", "seconds": 58.481421}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 17632, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 18:29:34.483396+05:30", "timestamp": 1755781174.483396}}}
{"text": "2025-08-21 18:29:34.484 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:58.482114", "seconds": 58.482114}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 17632, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 18:29:34.484089+05:30", "timestamp": 1755781174.484089}}}
{"text": "2025-08-21 18:29:34.484 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:58.482848", "seconds": 58.482848}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 17632, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 18:29:34.484823+05:30", "timestamp": 1755781174.484823}}}
{"text": "2025-08-21 18:29:34.485 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:58.483517", "seconds": 58.483517}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 17632, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 18:29:34.485492+05:30", "timestamp": 1755781174.485492}}}
{"text": "2025-08-21 18:29:34.486 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:58.484253", "seconds": 58.484253}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 17632, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 18:29:34.486228+05:30", "timestamp": 1755781174.486228}}}
{"text": "2025-08-21 18:29:34.704 | DEBUG    | app.ws.live:emit_summary:430 - Emitted orders summary: seq=80\n", "record": {"elapsed": {"repr": "0:00:58.703002", "seconds": 58.703002}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "emit_summary", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 430, "message": "Emitted orders summary: seq=80", "module": "live", "name": "app.ws.live", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:29:34.704977+05:30", "timestamp": 1755781174.704977}}}
{"text": "2025-08-21 18:29:34.822 | INFO     | app.ws.live:connect:226 - WebSocket connected: 127.0.0.1\n", "record": {"elapsed": {"repr": "0:00:58.820936", "seconds": 58.820936}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "connect", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 226, "message": "WebSocket connected: 127.0.0.1", "module": "live", "name": "app.ws.live", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:29:34.822911+05:30", "timestamp": 1755781174.822911}}}
{"text": "2025-08-21 18:29:34.858 | INFO     | app.ws.live:connect:226 - WebSocket connected: 127.0.0.1\n", "record": {"elapsed": {"repr": "0:00:58.856586", "seconds": 58.856586}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "connect", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 226, "message": "WebSocket connected: 127.0.0.1", "module": "live", "name": "app.ws.live", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:29:34.858561+05:30", "timestamp": 1755781174.858561}}}
{"text": "2025-08-21 18:29:34.876 | INFO     | app.ws.live:connect:226 - WebSocket connected: 127.0.0.1\n", "record": {"elapsed": {"repr": "0:00:58.874459", "seconds": 58.874459}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "connect", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 226, "message": "WebSocket connected: 127.0.0.1", "module": "live", "name": "app.ws.live", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:29:34.876434+05:30", "timestamp": 1755781174.876434}}}
{"text": "2025-08-21 18:29:34.913 | DEBUG    | app.ws.live:websocket_endpoint:517 - Received WebSocket message: {'type': 'subscribe', 'channels': ['positions', 'orders', 'holdings', 'trades', 'pnl']}\n", "record": {"elapsed": {"repr": "0:00:58.911283", "seconds": 58.911283}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "websocket_endpoint", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 517, "message": "Received WebSocket message: {'type': 'subscribe', 'channels': ['positions', 'orders', 'holdings', 'trades', 'pnl']}", "module": "live", "name": "app.ws.live", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:29:34.913258+05:30", "timestamp": 1755781174.913258}}}
{"text": "2025-08-21 18:29:34.914 | INFO     | app.ws.live:handle_message:281 - Client 127.0.0.1 subscribed to: ['positions', 'orders', 'holdings', 'trades', 'pnl']\n", "record": {"elapsed": {"repr": "0:00:58.912441", "seconds": 58.912441}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "handle_message", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 281, "message": "Client 127.0.0.1 subscribed to: ['positions', 'orders', 'holdings', 'trades', 'pnl']", "module": "live", "name": "app.ws.live", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:29:34.914416+05:30", "timestamp": 1755781174.914416}}}
{"text": "2025-08-21 18:29:34.916 | DEBUG    | app.ws.live:websocket_endpoint:517 - Received WebSocket message: {'type': 'subscribe', 'channels': ['positions', 'orders', 'holdings', 'trades', 'pnl']}\n", "record": {"elapsed": {"repr": "0:00:58.914866", "seconds": 58.914866}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "websocket_endpoint", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 517, "message": "Received WebSocket message: {'type': 'subscribe', 'channels': ['positions', 'orders', 'holdings', 'trades', 'pnl']}", "module": "live", "name": "app.ws.live", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:29:34.916841+05:30", "timestamp": 1755781174.916841}}}
{"text": "2025-08-21 18:29:34.917 | INFO     | app.ws.live:handle_message:281 - Client 127.0.0.1 subscribed to: ['positions', 'orders', 'holdings', 'trades', 'pnl']\n", "record": {"elapsed": {"repr": "0:00:58.915843", "seconds": 58.915843}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "handle_message", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 281, "message": "Client 127.0.0.1 subscribed to: ['positions', 'orders', 'holdings', 'trades', 'pnl']", "module": "live", "name": "app.ws.live", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:29:34.917818+05:30", "timestamp": 1755781174.917818}}}
{"text": "2025-08-21 18:29:34.962 | DEBUG    | app.ws.live:emit_delta:408 - Emitted positions delta: seq=81\n", "record": {"elapsed": {"repr": "0:00:58.960739", "seconds": 58.960739}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "emit_delta", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 408, "message": "Emitted positions delta: seq=81", "module": "live", "name": "app.ws.live", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:29:34.962714+05:30", "timestamp": 1755781174.962714}}}
{"text": "2025-08-21 18:29:34.964 | DEBUG    | app.ws.live:emit_summary:430 - Emitted positions summary: seq=82\n", "record": {"elapsed": {"repr": "0:00:58.962745", "seconds": 58.962745}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "emit_summary", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 430, "message": "Emitted positions summary: seq=82", "module": "live", "name": "app.ws.live", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:29:34.964720+05:30", "timestamp": 1755781174.96472}}}
{"text": "2025-08-21 18:29:34.999 | INFO     | app.ws.live:connect:226 - WebSocket connected: 127.0.0.1\n", "record": {"elapsed": {"repr": "0:00:58.997170", "seconds": 58.99717}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "connect", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 226, "message": "WebSocket connected: 127.0.0.1", "module": "live", "name": "app.ws.live", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:29:34.999145+05:30", "timestamp": 1755781174.999145}}}
{"text": "2025-08-21 18:29:35.099 | INFO     | app.ws.live:connect:226 - WebSocket connected: 127.0.0.1\n", "record": {"elapsed": {"repr": "0:00:59.097256", "seconds": 59.097256}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "connect", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 226, "message": "WebSocket connected: 127.0.0.1", "module": "live", "name": "app.ws.live", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:29:35.099231+05:30", "timestamp": 1755781175.099231}}}
{"text": "2025-08-21 18:29:35.221 | INFO     | app.ws.live:connect:226 - WebSocket connected: 127.0.0.1\n", "record": {"elapsed": {"repr": "0:00:59.219521", "seconds": 59.219521}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "connect", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 226, "message": "WebSocket connected: 127.0.0.1", "module": "live", "name": "app.ws.live", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:29:35.221496+05:30", "timestamp": 1755781175.221496}}}
{"text": "2025-08-21 18:29:35.306 | INFO     | app.ws.live:connect:226 - WebSocket connected: 127.0.0.1\n", "record": {"elapsed": {"repr": "0:00:59.304745", "seconds": 59.304745}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "connect", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 226, "message": "WebSocket connected: 127.0.0.1", "module": "live", "name": "app.ws.live", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:29:35.306720+05:30", "timestamp": 1755781175.30672}}}
{"text": "2025-08-21 18:29:35.430 | INFO     | app.ws.live:connect:226 - WebSocket connected: 127.0.0.1\n", "record": {"elapsed": {"repr": "0:00:59.428768", "seconds": 59.428768}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "connect", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 226, "message": "WebSocket connected: 127.0.0.1", "module": "live", "name": "app.ws.live", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:29:35.430743+05:30", "timestamp": 1755781175.430743}}}
{"text": "2025-08-21 18:29:35.554 | INFO     | app.ws.live:connect:226 - WebSocket connected: 127.0.0.1\n", "record": {"elapsed": {"repr": "0:00:59.552615", "seconds": 59.552615}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "connect", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 226, "message": "WebSocket connected: 127.0.0.1", "module": "live", "name": "app.ws.live", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:29:35.554590+05:30", "timestamp": 1755781175.55459}}}
{"text": "2025-08-21 18:29:35.559 | DEBUG    | app.ws.live:websocket_endpoint:517 - Received WebSocket message: {'type': 'subscribe', 'channels': ['positions', 'orders', 'holdings', 'trades', 'pnl']}\n", "record": {"elapsed": {"repr": "0:00:59.557050", "seconds": 59.55705}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "websocket_endpoint", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 517, "message": "Received WebSocket message: {'type': 'subscribe', 'channels': ['positions', 'orders', 'holdings', 'trades', 'pnl']}", "module": "live", "name": "app.ws.live", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:29:35.559025+05:30", "timestamp": 1755781175.559025}}}
{"text": "2025-08-21 18:29:35.560 | INFO     | app.ws.live:handle_message:281 - Client 127.0.0.1 subscribed to: ['positions', 'orders', 'holdings', 'trades', 'pnl']\n", "record": {"elapsed": {"repr": "0:00:59.558232", "seconds": 59.558232}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "handle_message", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 281, "message": "Client 127.0.0.1 subscribed to: ['positions', 'orders', 'holdings', 'trades', 'pnl']", "module": "live", "name": "app.ws.live", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:29:35.560207+05:30", "timestamp": 1755781175.560207}}}
{"text": "2025-08-21 18:29:35.570 | INFO     | app.ws.live:connect:226 - WebSocket connected: 127.0.0.1\n", "record": {"elapsed": {"repr": "0:00:59.568672", "seconds": 59.568672}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "connect", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 226, "message": "WebSocket connected: 127.0.0.1", "module": "live", "name": "app.ws.live", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:29:35.570647+05:30", "timestamp": 1755781175.570647}}}
{"text": "2025-08-21 18:29:35.780 | INFO     | app.ws.live:connect:226 - WebSocket connected: 127.0.0.1\n", "record": {"elapsed": {"repr": "0:00:59.778566", "seconds": 59.778566}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "connect", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 226, "message": "WebSocket connected: 127.0.0.1", "module": "live", "name": "app.ws.live", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:29:35.780541+05:30", "timestamp": 1755781175.780541}}}
{"text": "2025-08-21 18:29:35.834 | INFO     | app.ws.live:connect:226 - WebSocket connected: 127.0.0.1\n", "record": {"elapsed": {"repr": "0:00:59.832572", "seconds": 59.832572}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "connect", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 226, "message": "WebSocket connected: 127.0.0.1", "module": "live", "name": "app.ws.live", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:29:35.834547+05:30", "timestamp": 1755781175.834547}}}
{"text": "2025-08-21 18:29:35.886 | INFO     | app.services.dhan_client:get_pnl:489 - Starting accurate P&L calculation\n", "record": {"elapsed": {"repr": "0:00:59.884675", "seconds": 59.884675}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 489, "message": "Starting accurate P&L calculation", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:29:35.886650+05:30", "timestamp": 1755781175.88665}}}
{"text": "2025-08-21 18:29:35.888 | INFO     | app.services.dhan_client:get_pnl:491 - Fetched 5 positions\n", "record": {"elapsed": {"repr": "0:00:59.886099", "seconds": 59.886099}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 491, "message": "Fetched 5 positions", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:29:35.888074+05:30", "timestamp": 1755781175.888074}}}
{"text": "2025-08-21 18:29:35.888 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for RELIANCE: unrealized=-1112516.46, today=-1112516.46\n", "record": {"elapsed": {"repr": "0:00:59.887010", "seconds": 59.88701}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for RELIANCE: unrealized=-1112516.46, today=-1112516.46", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:29:35.888985+05:30", "timestamp": 1755781175.888985}}}
{"text": "2025-08-21 18:29:35.889 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for TCS: unrealized=966589.1, today=966589.1\n", "record": {"elapsed": {"repr": "0:00:59.887846", "seconds": 59.887846}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for TCS: unrealized=966589.1, today=966589.1", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:29:35.889821+05:30", "timestamp": 1755781175.889821}}}
{"text": "2025-08-21 18:29:35.890 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for HDFC: unrealized=-2089187.14, today=-2089187.14\n", "record": {"elapsed": {"repr": "0:00:59.888871", "seconds": 59.888871}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for HDFC: unrealized=-2089187.14, today=-2089187.14", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:29:35.890846+05:30", "timestamp": 1755781175.890846}}}
{"text": "2025-08-21 18:29:35.892 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for INFY: unrealized=191034.56, today=191034.56\n", "record": {"elapsed": {"repr": "0:00:59.890267", "seconds": 59.890267}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for INFY: unrealized=191034.56, today=191034.56", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:29:35.892242+05:30", "timestamp": 1755781175.892242}}}
{"text": "2025-08-21 18:29:35.894 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for ICICIBANK: unrealized=372842.93, today=372842.93\n", "record": {"elapsed": {"repr": "0:00:59.892302", "seconds": 59.892302}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for ICICIBANK: unrealized=372842.93, today=372842.93", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:29:35.894277+05:30", "timestamp": 1755781175.894277}}}
{"text": "2025-08-21 18:29:35.894 | INFO     | app.services.dhan_client:get_pnl:545 - Calculated totals - realized: 0.0, unrealized: -1671237.01, day: -1671237.01\n", "record": {"elapsed": {"repr": "0:00:59.892905", "seconds": 59.892905}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 545, "message": "Calculated totals - realized: 0.0, unrealized: -1671237.01, day: -1671237.01", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:29:35.894880+05:30", "timestamp": 1755781175.89488}}}
{"text": "2025-08-21 18:29:35.895 | DEBUG    | app.services.dhan_client:get_pnl:554 - PnL consistency check passed: drift=₹0.00\n", "record": {"elapsed": {"repr": "0:00:59.893487", "seconds": 59.893487}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 554, "message": "PnL consistency check passed: drift=₹0.00", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:29:35.895462+05:30", "timestamp": 1755781175.895462}}}
{"text": "2025-08-21 18:29:35.896 | DEBUG    | app.services.dhan_client:get_pnl:558 - Creating PnLTotals...\n", "record": {"elapsed": {"repr": "0:00:59.894240", "seconds": 59.89424}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 558, "message": "Creating PnLTotals...", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:29:35.896215+05:30", "timestamp": 1755781175.896215}}}
{"text": "2025-08-21 18:29:35.896 | DEBUG    | app.services.dhan_client:get_pnl:565 - PnLTotals created successfully\n", "record": {"elapsed": {"repr": "0:00:59.894850", "seconds": 59.89485}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 565, "message": "PnLTotals created successfully", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:29:35.896825+05:30", "timestamp": 1755781175.896825}}}
{"text": "2025-08-21 18:29:35.897 | DEBUG    | app.services.dhan_client:get_pnl:574 - Creating PnL model...\n", "record": {"elapsed": {"repr": "0:00:59.895439", "seconds": 59.895439}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 574, "message": "Creating PnL model...", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:29:35.897414+05:30", "timestamp": 1755781175.897414}}}
{"text": "2025-08-21 18:29:35.898 | DEBUG    | app.services.dhan_client:get_pnl:575 - Model fields: totals=<class 'app.models.schemas.PnLTotals'>, perSymbol=5, updated_at=2025-08-21 18:29:35.888880+05:30, trading_day=2025-08-21\n", "record": {"elapsed": {"repr": "0:00:59.896070", "seconds": 59.89607}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 575, "message": "Model fields: totals=<class 'app.models.schemas.PnLTotals'>, perSymbol=5, updated_at=2025-08-21 18:29:35.888880+05:30, trading_day=2025-08-21", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:29:35.898045+05:30", "timestamp": 1755781175.898045}}}
{"text": "2025-08-21 18:29:35.898 | DEBUG    | app.services.dhan_client:get_pnl:584 - Created PnL model: totals=PnLTotals(realized=0.0, unrealized=-1671237.01, day=-1671237.01, currency='INR') per_symbol=[PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1543, avg=1999.73, ltp=1278.72, unrealized=-1112516.46, today_pnl=-1112516.46), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=613, avg=1989.23, ltp=412.41, unrealized=966589.1, today_pnl=966589.1), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=1709, avg=1838.62, ltp=616.16, unrealized=-2089187.14, today_pnl=-2089187.14), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=697, avg=852.74, ltp=578.66, unrealized=191034.56, today_pnl=191034.56), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=255, avg=915.17, ltp=2377.3, unrealized=372842.93, today_pnl=372842.93)] updated_at=datetime.datetime(2025, 8, 21, 18, 29, 35, 888880, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))) trading_day='2025-08-21'\n", "record": {"elapsed": {"repr": "0:00:59.896914", "seconds": 59.896914}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 584, "message": "Created PnL model: totals=PnLTotals(realized=0.0, unrealized=-1671237.01, day=-1671237.01, currency='INR') per_symbol=[PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1543, avg=1999.73, ltp=1278.72, unrealized=-1112516.46, today_pnl=-1112516.46), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=613, avg=1989.23, ltp=412.41, unrealized=966589.1, today_pnl=966589.1), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=1709, avg=1838.62, ltp=616.16, unrealized=-2089187.14, today_pnl=-2089187.14), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=697, avg=852.74, ltp=578.66, unrealized=191034.56, today_pnl=191034.56), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=255, avg=915.17, ltp=2377.3, unrealized=372842.93, today_pnl=372842.93)] updated_at=datetime.datetime(2025, 8, 21, 18, 29, 35, 888880, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))) trading_day='2025-08-21'", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:29:35.898889+05:30", "timestamp": 1755781175.898889}}}
{"text": "2025-08-21 18:29:35.900 | DEBUG    | app.services.dhan_client:get_pnl:585 - PnL model fields: {'totals': PnLTotals(realized=0.0, unrealized=-1671237.01, day=-1671237.01, currency='INR'), 'per_symbol': [PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1543, avg=1999.73, ltp=1278.72, unrealized=-1112516.46, today_pnl=-1112516.46), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=613, avg=1989.23, ltp=412.41, unrealized=966589.1, today_pnl=966589.1), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=1709, avg=1838.62, ltp=616.16, unrealized=-2089187.14, today_pnl=-2089187.14), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=697, avg=852.74, ltp=578.66, unrealized=191034.56, today_pnl=191034.56), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=255, avg=915.17, ltp=2377.3, unrealized=372842.93, today_pnl=372842.93)], 'updated_at': datetime.datetime(2025, 8, 21, 18, 29, 35, 888880, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))), 'trading_day': '2025-08-21'}\n", "record": {"elapsed": {"repr": "0:00:59.898116", "seconds": 59.898116}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 585, "message": "PnL model fields: {'totals': PnLTotals(realized=0.0, unrealized=-1671237.01, day=-1671237.01, currency='INR'), 'per_symbol': [PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1543, avg=1999.73, ltp=1278.72, unrealized=-1112516.46, today_pnl=-1112516.46), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=613, avg=1989.23, ltp=412.41, unrealized=966589.1, today_pnl=966589.1), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=1709, avg=1838.62, ltp=616.16, unrealized=-2089187.14, today_pnl=-2089187.14), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=697, avg=852.74, ltp=578.66, unrealized=191034.56, today_pnl=191034.56), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=255, avg=915.17, ltp=2377.3, unrealized=372842.93, today_pnl=372842.93)], 'updated_at': datetime.datetime(2025, 8, 21, 18, 29, 35, 888880, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))), 'trading_day': '2025-08-21'}", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:29:35.900091+05:30", "timestamp": 1755781175.900091}}}
{"text": "2025-08-21 18:29:35.901 | INFO     | app.services.dhan_client:get_pnl:587 - P&L calculation completed successfully: 5 symbols, unrealized=₹-1671237.01\n", "record": {"elapsed": {"repr": "0:00:59.899652", "seconds": 59.899652}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 587, "message": "P&L calculation completed successfully: 5 symbols, unrealized=₹-1671237.01", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:29:35.901627+05:30", "timestamp": 1755781175.901627}}}
{"text": "2025-08-21 18:29:35.902 | ERROR    | app.ws.live:broadcast:253 - Failed to broadcast to client: Object of type PnLTotals is not JSON serializable\n", "record": {"elapsed": {"repr": "0:00:59.900948", "seconds": 59.900948}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "broadcast", "level": {"icon": "❌", "name": "ERROR", "no": 40}, "line": 253, "message": "Failed to broadcast to client: Object of type PnLTotals is not JSON serializable", "module": "live", "name": "app.ws.live", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:29:35.902923+05:30", "timestamp": 1755781175.902923}}}
{"text": "2025-08-21 18:29:35.903 | ERROR    | app.ws.live:broadcast:253 - Failed to broadcast to client: Object of type PnLTotals is not JSON serializable\n", "record": {"elapsed": {"repr": "0:00:59.901789", "seconds": 59.901789}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "broadcast", "level": {"icon": "❌", "name": "ERROR", "no": 40}, "line": 253, "message": "Failed to broadcast to client: Object of type PnLTotals is not JSON serializable", "module": "live", "name": "app.ws.live", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:29:35.903764+05:30", "timestamp": 1755781175.903764}}}
{"text": "2025-08-21 18:29:35.904 | ERROR    | app.ws.live:broadcast:253 - Failed to broadcast to client: Object of type PnLTotals is not JSON serializable\n", "record": {"elapsed": {"repr": "0:00:59.902841", "seconds": 59.902841}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "broadcast", "level": {"icon": "❌", "name": "ERROR", "no": 40}, "line": 253, "message": "Failed to broadcast to client: Object of type PnLTotals is not JSON serializable", "module": "live", "name": "app.ws.live", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:29:35.904816+05:30", "timestamp": 1755781175.904816}}}
{"text": "2025-08-21 18:29:35.905 | ERROR    | app.ws.live:broadcast:253 - Failed to broadcast to client: Object of type PnLTotals is not JSON serializable\n", "record": {"elapsed": {"repr": "0:00:59.903656", "seconds": 59.903656}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "broadcast", "level": {"icon": "❌", "name": "ERROR", "no": 40}, "line": 253, "message": "Failed to broadcast to client: Object of type PnLTotals is not JSON serializable", "module": "live", "name": "app.ws.live", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:29:35.905631+05:30", "timestamp": 1755781175.905631}}}
{"text": "2025-08-21 18:29:35.907 | ERROR    | app.ws.live:broadcast:253 - Failed to broadcast to client: Object of type PnLTotals is not JSON serializable\n", "record": {"elapsed": {"repr": "0:00:59.905400", "seconds": 59.9054}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "broadcast", "level": {"icon": "❌", "name": "ERROR", "no": 40}, "line": 253, "message": "Failed to broadcast to client: Object of type PnLTotals is not JSON serializable", "module": "live", "name": "app.ws.live", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:29:35.907375+05:30", "timestamp": 1755781175.907375}}}
{"text": "2025-08-21 18:29:35.908 | ERROR    | app.ws.live:broadcast:253 - Failed to broadcast to client: Object of type PnLTotals is not JSON serializable\n", "record": {"elapsed": {"repr": "0:00:59.906380", "seconds": 59.90638}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "broadcast", "level": {"icon": "❌", "name": "ERROR", "no": 40}, "line": 253, "message": "Failed to broadcast to client: Object of type PnLTotals is not JSON serializable", "module": "live", "name": "app.ws.live", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:29:35.908355+05:30", "timestamp": 1755781175.908355}}}
{"text": "2025-08-21 18:29:35.909 | ERROR    | app.ws.live:broadcast:253 - Failed to broadcast to client: Object of type PnLTotals is not JSON serializable\n", "record": {"elapsed": {"repr": "0:00:59.907256", "seconds": 59.907256}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "broadcast", "level": {"icon": "❌", "name": "ERROR", "no": 40}, "line": 253, "message": "Failed to broadcast to client: Object of type PnLTotals is not JSON serializable", "module": "live", "name": "app.ws.live", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:29:35.909231+05:30", "timestamp": 1755781175.909231}}}
{"text": "2025-08-21 18:29:35.909 | ERROR    | app.ws.live:broadcast:253 - Failed to broadcast to client: Object of type PnLTotals is not JSON serializable\n", "record": {"elapsed": {"repr": "0:00:59.908012", "seconds": 59.908012}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "broadcast", "level": {"icon": "❌", "name": "ERROR", "no": 40}, "line": 253, "message": "Failed to broadcast to client: Object of type PnLTotals is not JSON serializable", "module": "live", "name": "app.ws.live", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:29:35.909987+05:30", "timestamp": 1755781175.909987}}}
{"text": "2025-08-21 18:29:35.911 | ERROR    | app.ws.live:broadcast:253 - Failed to broadcast to client: Object of type PnLTotals is not JSON serializable\n", "record": {"elapsed": {"repr": "0:00:59.909140", "seconds": 59.90914}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "broadcast", "level": {"icon": "❌", "name": "ERROR", "no": 40}, "line": 253, "message": "Failed to broadcast to client: Object of type PnLTotals is not JSON serializable", "module": "live", "name": "app.ws.live", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:29:35.911115+05:30", "timestamp": 1755781175.911115}}}
{"text": "2025-08-21 18:29:35.912 | ERROR    | app.ws.live:broadcast:253 - Failed to broadcast to client: Object of type PnLTotals is not JSON serializable\n", "record": {"elapsed": {"repr": "0:00:59.910691", "seconds": 59.910691}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "broadcast", "level": {"icon": "❌", "name": "ERROR", "no": 40}, "line": 253, "message": "Failed to broadcast to client: Object of type PnLTotals is not JSON serializable", "module": "live", "name": "app.ws.live", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:29:35.912666+05:30", "timestamp": 1755781175.912666}}}
{"text": "2025-08-21 18:29:35.913 | ERROR    | app.ws.live:broadcast:253 - Failed to broadcast to client: Object of type PnLTotals is not JSON serializable\n", "record": {"elapsed": {"repr": "0:00:59.911354", "seconds": 59.911354}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "broadcast", "level": {"icon": "❌", "name": "ERROR", "no": 40}, "line": 253, "message": "Failed to broadcast to client: Object of type PnLTotals is not JSON serializable", "module": "live", "name": "app.ws.live", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:29:35.913329+05:30", "timestamp": 1755781175.913329}}}
{"text": "2025-08-21 18:29:35.913 | ERROR    | app.ws.live:broadcast:253 - Failed to broadcast to client: Object of type PnLTotals is not JSON serializable\n", "record": {"elapsed": {"repr": "0:00:59.911992", "seconds": 59.911992}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "broadcast", "level": {"icon": "❌", "name": "ERROR", "no": 40}, "line": 253, "message": "Failed to broadcast to client: Object of type PnLTotals is not JSON serializable", "module": "live", "name": "app.ws.live", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:29:35.913967+05:30", "timestamp": 1755781175.913967}}}
{"text": "2025-08-21 18:29:35.914 | ERROR    | app.ws.live:broadcast:253 - Failed to broadcast to client: Object of type PnLTotals is not JSON serializable\n", "record": {"elapsed": {"repr": "0:00:59.912755", "seconds": 59.912755}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "broadcast", "level": {"icon": "❌", "name": "ERROR", "no": 40}, "line": 253, "message": "Failed to broadcast to client: Object of type PnLTotals is not JSON serializable", "module": "live", "name": "app.ws.live", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:29:35.914730+05:30", "timestamp": 1755781175.91473}}}
{"text": "2025-08-21 18:29:35.915 | ERROR    | app.ws.live:broadcast:253 - Failed to broadcast to client: Object of type PnLTotals is not JSON serializable\n", "record": {"elapsed": {"repr": "0:00:59.913381", "seconds": 59.913381}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "broadcast", "level": {"icon": "❌", "name": "ERROR", "no": 40}, "line": 253, "message": "Failed to broadcast to client: Object of type PnLTotals is not JSON serializable", "module": "live", "name": "app.ws.live", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:29:35.915356+05:30", "timestamp": 1755781175.915356}}}
{"text": "2025-08-21 18:29:35.916 | ERROR    | app.ws.live:broadcast:253 - Failed to broadcast to client: Object of type PnLTotals is not JSON serializable\n", "record": {"elapsed": {"repr": "0:00:59.914174", "seconds": 59.914174}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "broadcast", "level": {"icon": "❌", "name": "ERROR", "no": 40}, "line": 253, "message": "Failed to broadcast to client: Object of type PnLTotals is not JSON serializable", "module": "live", "name": "app.ws.live", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:29:35.916149+05:30", "timestamp": 1755781175.916149}}}
{"text": "2025-08-21 18:29:35.916 | ERROR    | app.ws.live:broadcast:253 - Failed to broadcast to client: Object of type PnLTotals is not JSON serializable\n", "record": {"elapsed": {"repr": "0:00:59.915000", "seconds": 59.915}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "broadcast", "level": {"icon": "❌", "name": "ERROR", "no": 40}, "line": 253, "message": "Failed to broadcast to client: Object of type PnLTotals is not JSON serializable", "module": "live", "name": "app.ws.live", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:29:35.916975+05:30", "timestamp": 1755781175.916975}}}
{"text": "2025-08-21 18:29:35.917 | ERROR    | app.ws.live:broadcast:253 - Failed to broadcast to client: Object of type PnLTotals is not JSON serializable\n", "record": {"elapsed": {"repr": "0:00:59.915724", "seconds": 59.915724}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "broadcast", "level": {"icon": "❌", "name": "ERROR", "no": 40}, "line": 253, "message": "Failed to broadcast to client: Object of type PnLTotals is not JSON serializable", "module": "live", "name": "app.ws.live", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:29:35.917699+05:30", "timestamp": 1755781175.917699}}}
{"text": "2025-08-21 18:29:35.919 | ERROR    | app.ws.live:broadcast:253 - Failed to broadcast to client: Object of type PnLTotals is not JSON serializable\n", "record": {"elapsed": {"repr": "0:00:59.917184", "seconds": 59.917184}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "broadcast", "level": {"icon": "❌", "name": "ERROR", "no": 40}, "line": 253, "message": "Failed to broadcast to client: Object of type PnLTotals is not JSON serializable", "module": "live", "name": "app.ws.live", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:29:35.919159+05:30", "timestamp": 1755781175.919159}}}
{"text": "2025-08-21 18:29:35.920 | INFO     | app.ws.live:disconnect:234 - WebSocket disconnected: 127.0.0.1\n", "record": {"elapsed": {"repr": "0:00:59.918034", "seconds": 59.918034}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "disconnect", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 234, "message": "WebSocket disconnected: 127.0.0.1", "module": "live", "name": "app.ws.live", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:29:35.920009+05:30", "timestamp": 1755781175.920009}}}
{"text": "2025-08-21 18:29:35.920 | INFO     | app.ws.live:disconnect:234 - WebSocket disconnected: 127.0.0.1\n", "record": {"elapsed": {"repr": "0:00:59.918644", "seconds": 59.918644}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "disconnect", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 234, "message": "WebSocket disconnected: 127.0.0.1", "module": "live", "name": "app.ws.live", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:29:35.920619+05:30", "timestamp": 1755781175.920619}}}
{"text": "2025-08-21 18:29:35.921 | INFO     | app.ws.live:disconnect:234 - WebSocket disconnected: 127.0.0.1\n", "record": {"elapsed": {"repr": "0:00:59.919383", "seconds": 59.919383}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "disconnect", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 234, "message": "WebSocket disconnected: 127.0.0.1", "module": "live", "name": "app.ws.live", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:29:35.921358+05:30", "timestamp": 1755781175.921358}}}
{"text": "2025-08-21 18:29:35.922 | INFO     | app.ws.live:disconnect:234 - WebSocket disconnected: 127.0.0.1\n", "record": {"elapsed": {"repr": "0:00:59.920048", "seconds": 59.920048}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "disconnect", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 234, "message": "WebSocket disconnected: 127.0.0.1", "module": "live", "name": "app.ws.live", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:29:35.922023+05:30", "timestamp": 1755781175.922023}}}
{"text": "2025-08-21 18:29:35.922 | INFO     | app.ws.live:disconnect:234 - WebSocket disconnected: 127.0.0.1\n", "record": {"elapsed": {"repr": "0:00:59.920922", "seconds": 59.920922}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "disconnect", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 234, "message": "WebSocket disconnected: 127.0.0.1", "module": "live", "name": "app.ws.live", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:29:35.922897+05:30", "timestamp": 1755781175.922897}}}
{"text": "2025-08-21 18:29:35.923 | INFO     | app.ws.live:disconnect:234 - WebSocket disconnected: 127.0.0.1\n", "record": {"elapsed": {"repr": "0:00:59.921565", "seconds": 59.921565}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "disconnect", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 234, "message": "WebSocket disconnected: 127.0.0.1", "module": "live", "name": "app.ws.live", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:29:35.923540+05:30", "timestamp": 1755781175.92354}}}
{"text": "2025-08-21 18:29:35.924 | INFO     | app.ws.live:disconnect:234 - WebSocket disconnected: 127.0.0.1\n", "record": {"elapsed": {"repr": "0:00:59.922182", "seconds": 59.922182}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "disconnect", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 234, "message": "WebSocket disconnected: 127.0.0.1", "module": "live", "name": "app.ws.live", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:29:35.924157+05:30", "timestamp": 1755781175.924157}}}
{"text": "2025-08-21 18:29:35.924 | INFO     | app.ws.live:disconnect:234 - WebSocket disconnected: 127.0.0.1\n", "record": {"elapsed": {"repr": "0:00:59.922718", "seconds": 59.922718}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "disconnect", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 234, "message": "WebSocket disconnected: 127.0.0.1", "module": "live", "name": "app.ws.live", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:29:35.924693+05:30", "timestamp": 1755781175.924693}}}
{"text": "2025-08-21 18:29:35.925 | INFO     | app.ws.live:disconnect:234 - WebSocket disconnected: 127.0.0.1\n", "record": {"elapsed": {"repr": "0:00:59.923186", "seconds": 59.923186}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "disconnect", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 234, "message": "WebSocket disconnected: 127.0.0.1", "module": "live", "name": "app.ws.live", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:29:35.925161+05:30", "timestamp": 1755781175.925161}}}
{"text": "2025-08-21 18:29:35.925 | INFO     | app.ws.live:disconnect:234 - WebSocket disconnected: 127.0.0.1\n", "record": {"elapsed": {"repr": "0:00:59.923763", "seconds": 59.923763}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "disconnect", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 234, "message": "WebSocket disconnected: 127.0.0.1", "module": "live", "name": "app.ws.live", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:29:35.925738+05:30", "timestamp": 1755781175.925738}}}
{"text": "2025-08-21 18:29:35.926 | INFO     | app.ws.live:disconnect:234 - WebSocket disconnected: 127.0.0.1\n", "record": {"elapsed": {"repr": "0:00:59.924341", "seconds": 59.924341}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "disconnect", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 234, "message": "WebSocket disconnected: 127.0.0.1", "module": "live", "name": "app.ws.live", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:29:35.926316+05:30", "timestamp": 1755781175.926316}}}
{"text": "2025-08-21 18:29:35.926 | INFO     | app.ws.live:disconnect:234 - WebSocket disconnected: 127.0.0.1\n", "record": {"elapsed": {"repr": "0:00:59.924891", "seconds": 59.924891}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "disconnect", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 234, "message": "WebSocket disconnected: 127.0.0.1", "module": "live", "name": "app.ws.live", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:29:35.926866+05:30", "timestamp": 1755781175.926866}}}
{"text": "2025-08-21 18:29:35.927 | INFO     | app.ws.live:disconnect:234 - WebSocket disconnected: 127.0.0.1\n", "record": {"elapsed": {"repr": "0:00:59.925436", "seconds": 59.925436}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "disconnect", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 234, "message": "WebSocket disconnected: 127.0.0.1", "module": "live", "name": "app.ws.live", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:29:35.927411+05:30", "timestamp": 1755781175.927411}}}
{"text": "2025-08-21 18:29:35.927 | INFO     | app.ws.live:disconnect:234 - WebSocket disconnected: 127.0.0.1\n", "record": {"elapsed": {"repr": "0:00:59.925962", "seconds": 59.925962}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "disconnect", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 234, "message": "WebSocket disconnected: 127.0.0.1", "module": "live", "name": "app.ws.live", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:29:35.927937+05:30", "timestamp": 1755781175.927937}}}
{"text": "2025-08-21 18:29:35.928 | INFO     | app.ws.live:disconnect:234 - WebSocket disconnected: 127.0.0.1\n", "record": {"elapsed": {"repr": "0:00:59.926425", "seconds": 59.926425}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "disconnect", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 234, "message": "WebSocket disconnected: 127.0.0.1", "module": "live", "name": "app.ws.live", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:29:35.928400+05:30", "timestamp": 1755781175.9284}}}
{"text": "2025-08-21 18:29:35.929 | INFO     | app.ws.live:disconnect:234 - WebSocket disconnected: 127.0.0.1\n", "record": {"elapsed": {"repr": "0:00:59.927113", "seconds": 59.927113}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "disconnect", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 234, "message": "WebSocket disconnected: 127.0.0.1", "module": "live", "name": "app.ws.live", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:29:35.929088+05:30", "timestamp": 1755781175.929088}}}
{"text": "2025-08-21 18:29:35.930 | INFO     | app.ws.live:disconnect:234 - WebSocket disconnected: 127.0.0.1\n", "record": {"elapsed": {"repr": "0:00:59.928267", "seconds": 59.928267}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "disconnect", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 234, "message": "WebSocket disconnected: 127.0.0.1", "module": "live", "name": "app.ws.live", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:29:35.930242+05:30", "timestamp": 1755781175.930242}}}
{"text": "2025-08-21 18:29:35.930 | INFO     | app.ws.live:disconnect:234 - WebSocket disconnected: 127.0.0.1\n", "record": {"elapsed": {"repr": "0:00:59.929005", "seconds": 59.929005}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "disconnect", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 234, "message": "WebSocket disconnected: 127.0.0.1", "module": "live", "name": "app.ws.live", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:29:35.930980+05:30", "timestamp": 1755781175.93098}}}
{"text": "2025-08-21 18:29:35.932 | DEBUG    | app.ws.live:emit_delta:408 - Emitted pnl delta: seq=83\n", "record": {"elapsed": {"repr": "0:00:59.930547", "seconds": 59.930547}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "emit_delta", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 408, "message": "Emitted pnl delta: seq=83", "module": "live", "name": "app.ws.live", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:29:35.932522+05:30", "timestamp": 1755781175.932522}}}
{"text": "2025-08-21 18:29:35.939 | INFO     | app.ws.live:connect:226 - WebSocket connected: 127.0.0.1\n", "record": {"elapsed": {"repr": "0:00:59.937383", "seconds": 59.937383}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "connect", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 226, "message": "WebSocket connected: 127.0.0.1", "module": "live", "name": "app.ws.live", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:29:35.939358+05:30", "timestamp": 1755781175.939358}}}
{"text": "2025-08-21 18:29:35.955 | INFO     | app.ws.live:connect:226 - WebSocket connected: 127.0.0.1\n", "record": {"elapsed": {"repr": "0:00:59.954001", "seconds": 59.954001}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "connect", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 226, "message": "WebSocket connected: 127.0.0.1", "module": "live", "name": "app.ws.live", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:29:35.955976+05:30", "timestamp": 1755781175.955976}}}
{"text": "2025-08-21 18:29:36.126 | INFO     | app.ws.live:connect:226 - WebSocket connected: 127.0.0.1\n", "record": {"elapsed": {"repr": "0:01:00.124745", "seconds": 60.124745}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "connect", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 226, "message": "WebSocket connected: 127.0.0.1", "module": "live", "name": "app.ws.live", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:29:36.126720+05:30", "timestamp": 1755781176.12672}}}
{"text": "2025-08-21 18:29:36.166 | INFO     | app.ws.live:connect:226 - WebSocket connected: 127.0.0.1\n", "record": {"elapsed": {"repr": "0:01:00.164663", "seconds": 60.164663}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "connect", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 226, "message": "WebSocket connected: 127.0.0.1", "module": "live", "name": "app.ws.live", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:29:36.166638+05:30", "timestamp": 1755781176.166638}}}
{"text": "2025-08-21 18:29:36.209 | INFO     | app.ws.live:connect:226 - WebSocket connected: 127.0.0.1\n", "record": {"elapsed": {"repr": "0:01:00.208024", "seconds": 60.208024}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "connect", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 226, "message": "WebSocket connected: 127.0.0.1", "module": "live", "name": "app.ws.live", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:29:36.209999+05:30", "timestamp": 1755781176.209999}}}
{"text": "2025-08-21 18:29:36.269 | INFO     | app.ws.live:connect:226 - WebSocket connected: 127.0.0.1\n", "record": {"elapsed": {"repr": "0:01:00.267879", "seconds": 60.267879}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "connect", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 226, "message": "WebSocket connected: 127.0.0.1", "module": "live", "name": "app.ws.live", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:29:36.269854+05:30", "timestamp": 1755781176.269854}}}
{"text": "2025-08-21 18:29:36.313 | INFO     | app.ws.live:connect:226 - WebSocket connected: 127.0.0.1\n", "record": {"elapsed": {"repr": "0:01:00.311405", "seconds": 60.311405}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "connect", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 226, "message": "WebSocket connected: 127.0.0.1", "module": "live", "name": "app.ws.live", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:29:36.313380+05:30", "timestamp": 1755781176.31338}}}
{"text": "2025-08-21 18:29:36.348 | INFO     | app.ws.live:connect:226 - WebSocket connected: 127.0.0.1\n", "record": {"elapsed": {"repr": "0:01:00.346598", "seconds": 60.346598}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "connect", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 226, "message": "WebSocket connected: 127.0.0.1", "module": "live", "name": "app.ws.live", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:29:36.348573+05:30", "timestamp": 1755781176.348573}}}
{"text": "2025-08-21 18:29:36.485 | INFO     | app.ws.live:connect:226 - WebSocket connected: 127.0.0.1\n", "record": {"elapsed": {"repr": "0:01:00.483968", "seconds": 60.483968}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "connect", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 226, "message": "WebSocket connected: 127.0.0.1", "module": "live", "name": "app.ws.live", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:29:36.485943+05:30", "timestamp": 1755781176.485943}}}
{"text": "2025-08-21 18:29:36.487 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:01:00.485607", "seconds": 60.485607}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 17632, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 18:29:36.487582+05:30", "timestamp": 1755781176.487582}}}
{"text": "2025-08-21 18:29:36.488 | DEBUG    | app.ws.live:websocket_endpoint:517 - Received WebSocket message: {'type': 'subscribe', 'channels': ['positions', 'orders', 'holdings', 'trades', 'pnl']}\n", "record": {"elapsed": {"repr": "0:01:00.486133", "seconds": 60.486133}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "websocket_endpoint", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 517, "message": "Received WebSocket message: {'type': 'subscribe', 'channels': ['positions', 'orders', 'holdings', 'trades', 'pnl']}", "module": "live", "name": "app.ws.live", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:29:36.488108+05:30", "timestamp": 1755781176.488108}}}
{"text": "2025-08-21 18:29:36.488 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:01:00.486733", "seconds": 60.486733}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 17632, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 18:29:36.488708+05:30", "timestamp": 1755781176.488708}}}
{"text": "2025-08-21 18:29:36.489 | INFO     | app.ws.live:handle_message:281 - Client 127.0.0.1 subscribed to: ['positions', 'orders', 'holdings', 'trades', 'pnl']\n", "record": {"elapsed": {"repr": "0:01:00.487390", "seconds": 60.48739}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "handle_message", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 281, "message": "Client 127.0.0.1 subscribed to: ['positions', 'orders', 'holdings', 'trades', 'pnl']", "module": "live", "name": "app.ws.live", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:29:36.489365+05:30", "timestamp": 1755781176.489365}}}
{"text": "2025-08-21 18:29:36.490 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:01:00.488110", "seconds": 60.48811}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 17632, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 18:29:36.490085+05:30", "timestamp": 1755781176.490085}}}
{"text": "2025-08-21 18:29:36.491 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:01:00.489176", "seconds": 60.489176}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 17632, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 18:29:36.491151+05:30", "timestamp": 1755781176.491151}}}
{"text": "2025-08-21 18:29:36.491 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:01:00.489820", "seconds": 60.48982}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 17632, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 18:29:36.491795+05:30", "timestamp": 1755781176.491795}}}
{"text": "2025-08-21 18:29:36.492 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:01:00.490479", "seconds": 60.490479}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 17632, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 18:29:36.492454+05:30", "timestamp": 1755781176.492454}}}
{"text": "2025-08-21 18:29:36.493 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:01:00.491285", "seconds": 60.491285}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 17632, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 18:29:36.493260+05:30", "timestamp": 1755781176.49326}}}
{"text": "2025-08-21 18:29:36.493 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:01:00.491898", "seconds": 60.491898}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 17632, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 18:29:36.493873+05:30", "timestamp": 1755781176.493873}}}
{"text": "2025-08-21 18:29:36.494 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:01:00.492415", "seconds": 60.492415}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 17632, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 18:29:36.494390+05:30", "timestamp": 1755781176.49439}}}
{"text": "2025-08-21 18:29:36.495 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:01:00.493042", "seconds": 60.493042}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 17632, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 18:29:36.495017+05:30", "timestamp": 1755781176.495017}}}
{"text": "2025-08-21 18:29:36.776 | DEBUG    | app.ws.live:emit_delta:408 - Emitted positions delta: seq=84\n", "record": {"elapsed": {"repr": "0:01:00.774524", "seconds": 60.774524}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "emit_delta", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 408, "message": "Emitted positions delta: seq=84", "module": "live", "name": "app.ws.live", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:29:36.776499+05:30", "timestamp": 1755781176.776499}}}
{"text": "2025-08-21 18:29:36.778 | DEBUG    | app.ws.live:emit_summary:430 - Emitted positions summary: seq=85\n", "record": {"elapsed": {"repr": "0:01:00.776970", "seconds": 60.77697}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "emit_summary", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 430, "message": "Emitted positions summary: seq=85", "module": "live", "name": "app.ws.live", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:29:36.778945+05:30", "timestamp": 1755781176.778945}}}
{"text": "2025-08-21 18:29:37.131 | INFO     | app.ws.live:connect:226 - WebSocket connected: 127.0.0.1\n", "record": {"elapsed": {"repr": "0:01:01.129043", "seconds": 61.129043}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "connect", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 226, "message": "WebSocket connected: 127.0.0.1", "module": "live", "name": "app.ws.live", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:29:37.131018+05:30", "timestamp": 1755781177.131018}}}
{"text": "2025-08-21 18:29:37.166 | INFO     | app.ws.live:connect:226 - WebSocket connected: 127.0.0.1\n", "record": {"elapsed": {"repr": "0:01:01.164556", "seconds": 61.164556}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "connect", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 226, "message": "WebSocket connected: 127.0.0.1", "module": "live", "name": "app.ws.live", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:29:37.166531+05:30", "timestamp": 1755781177.166531}}}
{"text": "2025-08-21 18:29:37.391 | DEBUG    | app.ws.live:emit_summary:430 - Emitted orders summary: seq=86\n", "record": {"elapsed": {"repr": "0:01:01.389326", "seconds": 61.389326}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "emit_summary", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 430, "message": "Emitted orders summary: seq=86", "module": "live", "name": "app.ws.live", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:29:37.391301+05:30", "timestamp": 1755781177.391301}}}
{"text": "2025-08-21 18:29:37.485 | INFO     | app.ws.live:connect:226 - WebSocket connected: 127.0.0.1\n", "record": {"elapsed": {"repr": "0:01:01.483208", "seconds": 61.483208}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "connect", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 226, "message": "WebSocket connected: 127.0.0.1", "module": "live", "name": "app.ws.live", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:29:37.485183+05:30", "timestamp": 1755781177.485183}}}
{"text": "2025-08-21 18:29:37.487 | DEBUG    | app.ws.live:websocket_endpoint:517 - Received WebSocket message: {'type': 'subscribe', 'channels': ['positions', 'orders', 'holdings', 'trades', 'pnl']}\n", "record": {"elapsed": {"repr": "0:01:01.485419", "seconds": 61.485419}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "websocket_endpoint", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 517, "message": "Received WebSocket message: {'type': 'subscribe', 'channels': ['positions', 'orders', 'holdings', 'trades', 'pnl']}", "module": "live", "name": "app.ws.live", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:29:37.487394+05:30", "timestamp": 1755781177.487394}}}
{"text": "2025-08-21 18:29:37.488 | INFO     | app.ws.live:handle_message:281 - Client 127.0.0.1 subscribed to: ['positions', 'orders', 'holdings', 'trades', 'pnl']\n", "record": {"elapsed": {"repr": "0:01:01.486621", "seconds": 61.486621}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "handle_message", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 281, "message": "Client 127.0.0.1 subscribed to: ['positions', 'orders', 'holdings', 'trades', 'pnl']", "module": "live", "name": "app.ws.live", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:29:37.488596+05:30", "timestamp": 1755781177.488596}}}
{"text": "2025-08-21 18:29:37.739 | INFO     | app.services.dhan_client:get_pnl:489 - Starting accurate P&L calculation\n", "record": {"elapsed": {"repr": "0:01:01.737392", "seconds": 61.737392}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 489, "message": "Starting accurate P&L calculation", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:29:37.739367+05:30", "timestamp": 1755781177.739367}}}
{"text": "2025-08-21 18:29:37.740 | INFO     | app.services.dhan_client:get_pnl:491 - Fetched 5 positions\n", "record": {"elapsed": {"repr": "0:01:01.738144", "seconds": 61.738144}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 491, "message": "Fetched 5 positions", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:29:37.740119+05:30", "timestamp": 1755781177.740119}}}
{"text": "2025-08-21 18:29:37.740 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for RELIANCE: unrealized=-1127961.88, today=-1127961.88\n", "record": {"elapsed": {"repr": "0:01:01.738877", "seconds": 61.738877}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for RELIANCE: unrealized=-1127961.88, today=-1127961.88", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:29:37.740852+05:30", "timestamp": 1755781177.740852}}}
{"text": "2025-08-21 18:29:37.741 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for TCS: unrealized=962287.79, today=962287.79\n", "record": {"elapsed": {"repr": "0:01:01.739482", "seconds": 61.739482}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for TCS: unrealized=962287.79, today=962287.79", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:29:37.741457+05:30", "timestamp": 1755781177.741457}}}
{"text": "2025-08-21 18:29:37.742 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for HDFC: unrealized=-2085843.06, today=-2085843.06\n", "record": {"elapsed": {"repr": "0:01:01.740126", "seconds": 61.740126}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for HDFC: unrealized=-2085843.06, today=-2085843.06", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:29:37.742101+05:30", "timestamp": 1755781177.742101}}}
{"text": "2025-08-21 18:29:37.742 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for INFY: unrealized=194461.34, today=194461.34\n", "record": {"elapsed": {"repr": "0:01:01.740793", "seconds": 61.740793}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for INFY: unrealized=194461.34, today=194461.34", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:29:37.742768+05:30", "timestamp": 1755781177.742768}}}
{"text": "2025-08-21 18:29:37.743 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for ICICIBANK: unrealized=384956.07, today=384956.07\n", "record": {"elapsed": {"repr": "0:01:01.741397", "seconds": 61.741397}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for ICICIBANK: unrealized=384956.07, today=384956.07", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:29:37.743372+05:30", "timestamp": 1755781177.743372}}}
{"text": "2025-08-21 18:29:37.743 | INFO     | app.services.dhan_client:get_pnl:545 - Calculated totals - realized: 0.0, unrealized: -1672099.74, day: -1672099.74\n", "record": {"elapsed": {"repr": "0:01:01.741941", "seconds": 61.741941}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 545, "message": "Calculated totals - realized: 0.0, unrealized: -1672099.74, day: -1672099.74", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:29:37.743916+05:30", "timestamp": 1755781177.743916}}}
{"text": "2025-08-21 18:29:37.744 | DEBUG    | app.services.dhan_client:get_pnl:554 - PnL consistency check passed: drift=₹0.00\n", "record": {"elapsed": {"repr": "0:01:01.742749", "seconds": 61.742749}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 554, "message": "PnL consistency check passed: drift=₹0.00", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:29:37.744724+05:30", "timestamp": 1755781177.744724}}}
{"text": "2025-08-21 18:29:37.745 | DEBUG    | app.services.dhan_client:get_pnl:558 - Creating PnLTotals...\n", "record": {"elapsed": {"repr": "0:01:01.743489", "seconds": 61.743489}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 558, "message": "Creating PnLTotals...", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:29:37.745464+05:30", "timestamp": 1755781177.745464}}}
{"text": "2025-08-21 18:29:37.746 | DEBUG    | app.services.dhan_client:get_pnl:565 - PnLTotals created successfully\n", "record": {"elapsed": {"repr": "0:01:01.744094", "seconds": 61.744094}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 565, "message": "PnLTotals created successfully", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:29:37.746069+05:30", "timestamp": 1755781177.746069}}}
{"text": "2025-08-21 18:29:37.746 | DEBUG    | app.services.dhan_client:get_pnl:574 - Creating PnL model...\n", "record": {"elapsed": {"repr": "0:01:01.744760", "seconds": 61.74476}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 574, "message": "Creating PnL model...", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:29:37.746735+05:30", "timestamp": 1755781177.746735}}}
{"text": "2025-08-21 18:29:37.747 | DEBUG    | app.services.dhan_client:get_pnl:575 - Model fields: totals=<class 'app.models.schemas.PnLTotals'>, perSymbol=5, updated_at=2025-08-21 18:29:37.740753+05:30, trading_day=2025-08-21\n", "record": {"elapsed": {"repr": "0:01:01.746001", "seconds": 61.746001}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 575, "message": "Model fields: totals=<class 'app.models.schemas.PnLTotals'>, perSymbol=5, updated_at=2025-08-21 18:29:37.740753+05:30, trading_day=2025-08-21", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:29:37.747976+05:30", "timestamp": 1755781177.747976}}}
{"text": "2025-08-21 18:29:37.748 | DEBUG    | app.services.dhan_client:get_pnl:584 - Created PnL model: totals=PnLTotals(realized=0.0, unrealized=-1672099.74, day=-1672099.74, currency='INR') per_symbol=[PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1543, avg=1999.73, ltp=1268.71, unrealized=-1127961.88, today_pnl=-1127961.88), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=613, avg=1989.23, ltp=419.43, unrealized=962287.79, today_pnl=962287.79), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=1709, avg=1838.62, ltp=618.11, unrealized=-2085843.06, today_pnl=-2085843.06), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=697, avg=852.74, ltp=573.74, unrealized=194461.34, today_pnl=194461.34), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=255, avg=915.17, ltp=2424.8, unrealized=384956.07, today_pnl=384956.07)] updated_at=datetime.datetime(2025, 8, 21, 18, 29, 37, 740753, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))) trading_day='2025-08-21'\n", "record": {"elapsed": {"repr": "0:01:01.746778", "seconds": 61.746778}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 584, "message": "Created PnL model: totals=PnLTotals(realized=0.0, unrealized=-1672099.74, day=-1672099.74, currency='INR') per_symbol=[PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1543, avg=1999.73, ltp=1268.71, unrealized=-1127961.88, today_pnl=-1127961.88), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=613, avg=1989.23, ltp=419.43, unrealized=962287.79, today_pnl=962287.79), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=1709, avg=1838.62, ltp=618.11, unrealized=-2085843.06, today_pnl=-2085843.06), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=697, avg=852.74, ltp=573.74, unrealized=194461.34, today_pnl=194461.34), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=255, avg=915.17, ltp=2424.8, unrealized=384956.07, today_pnl=384956.07)] updated_at=datetime.datetime(2025, 8, 21, 18, 29, 37, 740753, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))) trading_day='2025-08-21'", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:29:37.748753+05:30", "timestamp": 1755781177.748753}}}
{"text": "2025-08-21 18:29:37.749 | DEBUG    | app.services.dhan_client:get_pnl:585 - PnL model fields: {'totals': PnLTotals(realized=0.0, unrealized=-1672099.74, day=-1672099.74, currency='INR'), 'per_symbol': [PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1543, avg=1999.73, ltp=1268.71, unrealized=-1127961.88, today_pnl=-1127961.88), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=613, avg=1989.23, ltp=419.43, unrealized=962287.79, today_pnl=962287.79), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=1709, avg=1838.62, ltp=618.11, unrealized=-2085843.06, today_pnl=-2085843.06), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=697, avg=852.74, ltp=573.74, unrealized=194461.34, today_pnl=194461.34), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=255, avg=915.17, ltp=2424.8, unrealized=384956.07, today_pnl=384956.07)], 'updated_at': datetime.datetime(2025, 8, 21, 18, 29, 37, 740753, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))), 'trading_day': '2025-08-21'}\n", "record": {"elapsed": {"repr": "0:01:01.747984", "seconds": 61.747984}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 585, "message": "PnL model fields: {'totals': PnLTotals(realized=0.0, unrealized=-1672099.74, day=-1672099.74, currency='INR'), 'per_symbol': [PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1543, avg=1999.73, ltp=1268.71, unrealized=-1127961.88, today_pnl=-1127961.88), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=613, avg=1989.23, ltp=419.43, unrealized=962287.79, today_pnl=962287.79), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=1709, avg=1838.62, ltp=618.11, unrealized=-2085843.06, today_pnl=-2085843.06), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=697, avg=852.74, ltp=573.74, unrealized=194461.34, today_pnl=194461.34), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=255, avg=915.17, ltp=2424.8, unrealized=384956.07, today_pnl=384956.07)], 'updated_at': datetime.datetime(2025, 8, 21, 18, 29, 37, 740753, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))), 'trading_day': '2025-08-21'}", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:29:37.749959+05:30", "timestamp": 1755781177.749959}}}
{"text": "2025-08-21 18:29:37.751 | INFO     | app.services.dhan_client:get_pnl:587 - P&L calculation completed successfully: 5 symbols, unrealized=₹-1672099.74\n", "record": {"elapsed": {"repr": "0:01:01.749053", "seconds": 61.749053}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 587, "message": "P&L calculation completed successfully: 5 symbols, unrealized=₹-1672099.74", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:29:37.751028+05:30", "timestamp": 1755781177.751028}}}
{"text": "2025-08-21 18:29:37.752 | ERROR    | app.ws.live:broadcast:253 - Failed to broadcast to client: Object of type PnLTotals is not JSON serializable\n", "record": {"elapsed": {"repr": "0:01:01.750135", "seconds": 61.750135}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "broadcast", "level": {"icon": "❌", "name": "ERROR", "no": 40}, "line": 253, "message": "Failed to broadcast to client: Object of type PnLTotals is not JSON serializable", "module": "live", "name": "app.ws.live", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:29:37.752110+05:30", "timestamp": 1755781177.75211}}}
{"text": "2025-08-21 18:29:37.752 | ERROR    | app.ws.live:broadcast:253 - Failed to broadcast to client: Object of type PnLTotals is not JSON serializable\n", "record": {"elapsed": {"repr": "0:01:01.750910", "seconds": 61.75091}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "broadcast", "level": {"icon": "❌", "name": "ERROR", "no": 40}, "line": 253, "message": "Failed to broadcast to client: Object of type PnLTotals is not JSON serializable", "module": "live", "name": "app.ws.live", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:29:37.752885+05:30", "timestamp": 1755781177.752885}}}
{"text": "2025-08-21 18:29:37.753 | ERROR    | app.ws.live:broadcast:253 - Failed to broadcast to client: Object of type PnLTotals is not JSON serializable\n", "record": {"elapsed": {"repr": "0:01:01.751556", "seconds": 61.751556}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "broadcast", "level": {"icon": "❌", "name": "ERROR", "no": 40}, "line": 253, "message": "Failed to broadcast to client: Object of type PnLTotals is not JSON serializable", "module": "live", "name": "app.ws.live", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:29:37.753531+05:30", "timestamp": 1755781177.753531}}}
{"text": "2025-08-21 18:29:37.754 | ERROR    | app.ws.live:broadcast:253 - Failed to broadcast to client: Object of type PnLTotals is not JSON serializable\n", "record": {"elapsed": {"repr": "0:01:01.752167", "seconds": 61.752167}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "broadcast", "level": {"icon": "❌", "name": "ERROR", "no": 40}, "line": 253, "message": "Failed to broadcast to client: Object of type PnLTotals is not JSON serializable", "module": "live", "name": "app.ws.live", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:29:37.754142+05:30", "timestamp": 1755781177.754142}}}
{"text": "2025-08-21 18:29:37.754 | ERROR    | app.ws.live:broadcast:253 - Failed to broadcast to client: Object of type PnLTotals is not JSON serializable\n", "record": {"elapsed": {"repr": "0:01:01.752654", "seconds": 61.752654}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "broadcast", "level": {"icon": "❌", "name": "ERROR", "no": 40}, "line": 253, "message": "Failed to broadcast to client: Object of type PnLTotals is not JSON serializable", "module": "live", "name": "app.ws.live", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:29:37.754629+05:30", "timestamp": 1755781177.754629}}}
{"text": "2025-08-21 18:29:37.755 | ERROR    | app.ws.live:broadcast:253 - Failed to broadcast to client: Object of type PnLTotals is not JSON serializable\n", "record": {"elapsed": {"repr": "0:01:01.753192", "seconds": 61.753192}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "broadcast", "level": {"icon": "❌", "name": "ERROR", "no": 40}, "line": 253, "message": "Failed to broadcast to client: Object of type PnLTotals is not JSON serializable", "module": "live", "name": "app.ws.live", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:29:37.755167+05:30", "timestamp": 1755781177.755167}}}
{"text": "2025-08-21 18:29:37.755 | ERROR    | app.ws.live:broadcast:253 - Failed to broadcast to client: Object of type PnLTotals is not JSON serializable\n", "record": {"elapsed": {"repr": "0:01:01.753775", "seconds": 61.753775}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "broadcast", "level": {"icon": "❌", "name": "ERROR", "no": 40}, "line": 253, "message": "Failed to broadcast to client: Object of type PnLTotals is not JSON serializable", "module": "live", "name": "app.ws.live", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:29:37.755750+05:30", "timestamp": 1755781177.75575}}}
{"text": "2025-08-21 18:29:37.756 | ERROR    | app.ws.live:broadcast:253 - Failed to broadcast to client: Object of type PnLTotals is not JSON serializable\n", "record": {"elapsed": {"repr": "0:01:01.754258", "seconds": 61.754258}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "broadcast", "level": {"icon": "❌", "name": "ERROR", "no": 40}, "line": 253, "message": "Failed to broadcast to client: Object of type PnLTotals is not JSON serializable", "module": "live", "name": "app.ws.live", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:29:37.756233+05:30", "timestamp": 1755781177.756233}}}
{"text": "2025-08-21 18:29:37.756 | ERROR    | app.ws.live:broadcast:253 - Failed to broadcast to client: Object of type PnLTotals is not JSON serializable\n", "record": {"elapsed": {"repr": "0:01:01.754927", "seconds": 61.754927}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "broadcast", "level": {"icon": "❌", "name": "ERROR", "no": 40}, "line": 253, "message": "Failed to broadcast to client: Object of type PnLTotals is not JSON serializable", "module": "live", "name": "app.ws.live", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:29:37.756902+05:30", "timestamp": 1755781177.756902}}}
{"text": "2025-08-21 18:29:37.757 | ERROR    | app.ws.live:broadcast:253 - Failed to broadcast to client: Object of type PnLTotals is not JSON serializable\n", "record": {"elapsed": {"repr": "0:01:01.755462", "seconds": 61.755462}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "broadcast", "level": {"icon": "❌", "name": "ERROR", "no": 40}, "line": 253, "message": "Failed to broadcast to client: Object of type PnLTotals is not JSON serializable", "module": "live", "name": "app.ws.live", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:29:37.757437+05:30", "timestamp": 1755781177.757437}}}
{"text": "2025-08-21 18:29:37.757 | ERROR    | app.ws.live:broadcast:253 - Failed to broadcast to client: Object of type PnLTotals is not JSON serializable\n", "record": {"elapsed": {"repr": "0:01:01.756013", "seconds": 61.756013}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "broadcast", "level": {"icon": "❌", "name": "ERROR", "no": 40}, "line": 253, "message": "Failed to broadcast to client: Object of type PnLTotals is not JSON serializable", "module": "live", "name": "app.ws.live", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:29:37.757988+05:30", "timestamp": 1755781177.757988}}}
{"text": "2025-08-21 18:29:37.758 | ERROR    | app.ws.live:broadcast:253 - Failed to broadcast to client: Object of type PnLTotals is not JSON serializable\n", "record": {"elapsed": {"repr": "0:01:01.756664", "seconds": 61.756664}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "broadcast", "level": {"icon": "❌", "name": "ERROR", "no": 40}, "line": 253, "message": "Failed to broadcast to client: Object of type PnLTotals is not JSON serializable", "module": "live", "name": "app.ws.live", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:29:37.758639+05:30", "timestamp": 1755781177.758639}}}
{"text": "2025-08-21 18:29:37.759 | INFO     | app.ws.live:disconnect:234 - WebSocket disconnected: 127.0.0.1\n", "record": {"elapsed": {"repr": "0:01:01.757263", "seconds": 61.757263}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "disconnect", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 234, "message": "WebSocket disconnected: 127.0.0.1", "module": "live", "name": "app.ws.live", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:29:37.759238+05:30", "timestamp": 1755781177.759238}}}
{"text": "2025-08-21 18:29:37.759 | INFO     | app.ws.live:disconnect:234 - WebSocket disconnected: 127.0.0.1\n", "record": {"elapsed": {"repr": "0:01:01.757816", "seconds": 61.757816}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "disconnect", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 234, "message": "WebSocket disconnected: 127.0.0.1", "module": "live", "name": "app.ws.live", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:29:37.759791+05:30", "timestamp": 1755781177.759791}}}
{"text": "2025-08-21 18:29:37.760 | INFO     | app.ws.live:disconnect:234 - WebSocket disconnected: 127.0.0.1\n", "record": {"elapsed": {"repr": "0:01:01.758379", "seconds": 61.758379}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "disconnect", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 234, "message": "WebSocket disconnected: 127.0.0.1", "module": "live", "name": "app.ws.live", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:29:37.760354+05:30", "timestamp": 1755781177.760354}}}
{"text": "2025-08-21 18:29:37.760 | INFO     | app.ws.live:disconnect:234 - WebSocket disconnected: 127.0.0.1\n", "record": {"elapsed": {"repr": "0:01:01.758982", "seconds": 61.758982}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "disconnect", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 234, "message": "WebSocket disconnected: 127.0.0.1", "module": "live", "name": "app.ws.live", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:29:37.760957+05:30", "timestamp": 1755781177.760957}}}
{"text": "2025-08-21 18:29:37.761 | INFO     | app.ws.live:disconnect:234 - WebSocket disconnected: 127.0.0.1\n", "record": {"elapsed": {"repr": "0:01:01.759624", "seconds": 61.759624}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "disconnect", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 234, "message": "WebSocket disconnected: 127.0.0.1", "module": "live", "name": "app.ws.live", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:29:37.761599+05:30", "timestamp": 1755781177.761599}}}
{"text": "2025-08-21 18:29:37.762 | INFO     | app.ws.live:disconnect:234 - WebSocket disconnected: 127.0.0.1\n", "record": {"elapsed": {"repr": "0:01:01.760425", "seconds": 61.760425}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "disconnect", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 234, "message": "WebSocket disconnected: 127.0.0.1", "module": "live", "name": "app.ws.live", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:29:37.762400+05:30", "timestamp": 1755781177.7624}}}
{"text": "2025-08-21 18:29:37.763 | INFO     | app.ws.live:disconnect:234 - WebSocket disconnected: 127.0.0.1\n", "record": {"elapsed": {"repr": "0:01:01.761086", "seconds": 61.761086}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "disconnect", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 234, "message": "WebSocket disconnected: 127.0.0.1", "module": "live", "name": "app.ws.live", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:29:37.763061+05:30", "timestamp": 1755781177.763061}}}
{"text": "2025-08-21 18:29:37.763 | INFO     | app.ws.live:disconnect:234 - WebSocket disconnected: 127.0.0.1\n", "record": {"elapsed": {"repr": "0:01:01.761713", "seconds": 61.761713}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "disconnect", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 234, "message": "WebSocket disconnected: 127.0.0.1", "module": "live", "name": "app.ws.live", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:29:37.763688+05:30", "timestamp": 1755781177.763688}}}
{"text": "2025-08-21 18:29:37.764 | INFO     | app.ws.live:disconnect:234 - WebSocket disconnected: 127.0.0.1\n", "record": {"elapsed": {"repr": "0:01:01.762320", "seconds": 61.76232}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "disconnect", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 234, "message": "WebSocket disconnected: 127.0.0.1", "module": "live", "name": "app.ws.live", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:29:37.764295+05:30", "timestamp": 1755781177.764295}}}
{"text": "2025-08-21 18:29:37.764 | INFO     | app.ws.live:disconnect:234 - WebSocket disconnected: 127.0.0.1\n", "record": {"elapsed": {"repr": "0:01:01.762940", "seconds": 61.76294}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "disconnect", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 234, "message": "WebSocket disconnected: 127.0.0.1", "module": "live", "name": "app.ws.live", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:29:37.764915+05:30", "timestamp": 1755781177.764915}}}
{"text": "2025-08-21 18:29:37.765 | INFO     | app.ws.live:disconnect:234 - WebSocket disconnected: 127.0.0.1\n", "record": {"elapsed": {"repr": "0:01:01.763546", "seconds": 61.763546}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "disconnect", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 234, "message": "WebSocket disconnected: 127.0.0.1", "module": "live", "name": "app.ws.live", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:29:37.765521+05:30", "timestamp": 1755781177.765521}}}
{"text": "2025-08-21 18:29:37.766 | INFO     | app.ws.live:disconnect:234 - WebSocket disconnected: 127.0.0.1\n", "record": {"elapsed": {"repr": "0:01:01.764212", "seconds": 61.764212}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "disconnect", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 234, "message": "WebSocket disconnected: 127.0.0.1", "module": "live", "name": "app.ws.live", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:29:37.766187+05:30", "timestamp": 1755781177.766187}}}
{"text": "2025-08-21 18:29:37.766 | DEBUG    | app.ws.live:emit_delta:408 - Emitted pnl delta: seq=87\n", "record": {"elapsed": {"repr": "0:01:01.764806", "seconds": 61.764806}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "emit_delta", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 408, "message": "Emitted pnl delta: seq=87", "module": "live", "name": "app.ws.live", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:29:37.766781+05:30", "timestamp": 1755781177.766781}}}
{"text": "2025-08-21 18:29:38.496 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:01:02.494260", "seconds": 62.49426}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 17632, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 18:29:38.496235+05:30", "timestamp": 1755781178.496235}}}
{"text": "2025-08-21 18:29:38.497 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:01:02.495051", "seconds": 62.495051}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 17632, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 18:29:38.497026+05:30", "timestamp": 1755781178.497026}}}
{"text": "2025-08-21 18:29:38.497 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:01:02.495730", "seconds": 62.49573}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 17632, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 18:29:38.497705+05:30", "timestamp": 1755781178.497705}}}
{"text": "2025-08-21 18:29:38.498 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:01:02.496634", "seconds": 62.496634}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 17632, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 18:29:38.498609+05:30", "timestamp": 1755781178.498609}}}
{"text": "2025-08-21 18:29:38.499 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:01:02.497450", "seconds": 62.49745}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 17632, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 18:29:38.499425+05:30", "timestamp": 1755781178.499425}}}
{"text": "2025-08-21 18:29:38.500 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:01:02.498051", "seconds": 62.498051}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 17632, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 18:29:38.500026+05:30", "timestamp": 1755781178.500026}}}
{"text": "2025-08-21 18:29:38.500 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:01:02.498680", "seconds": 62.49868}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 17632, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 18:29:38.500655+05:30", "timestamp": 1755781178.500655}}}
{"text": "2025-08-21 18:29:38.501 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:01:02.499347", "seconds": 62.499347}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 17632, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 18:29:38.501322+05:30", "timestamp": 1755781178.501322}}}
{"text": "2025-08-21 18:29:38.502 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:01:02.500053", "seconds": 62.500053}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 17632, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 18:29:38.502028+05:30", "timestamp": 1755781178.502028}}}
{"text": "2025-08-21 18:29:38.502 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:01:02.500900", "seconds": 62.5009}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 17632, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 18:29:38.502875+05:30", "timestamp": 1755781178.502875}}}
{"text": "2025-08-21 18:29:38.503 | DEBUG    | app.ws.live:emit_delta:408 - Emitted positions delta: seq=88\n", "record": {"elapsed": {"repr": "0:01:02.501970", "seconds": 62.50197}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "emit_delta", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 408, "message": "Emitted positions delta: seq=88", "module": "live", "name": "app.ws.live", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:29:38.503945+05:30", "timestamp": 1755781178.503945}}}
{"text": "2025-08-21 18:29:39.481 | INFO     | app.services.dhan_client:get_pnl:489 - Starting accurate P&L calculation\n", "record": {"elapsed": {"repr": "0:01:03.479212", "seconds": 63.479212}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 489, "message": "Starting accurate P&L calculation", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:29:39.481187+05:30", "timestamp": 1755781179.481187}}}
{"text": "2025-08-21 18:29:39.481 | INFO     | app.services.dhan_client:get_pnl:491 - Fetched 5 positions\n", "record": {"elapsed": {"repr": "0:01:03.479931", "seconds": 63.479931}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 491, "message": "Fetched 5 positions", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:29:39.481906+05:30", "timestamp": 1755781179.481906}}}
{"text": "2025-08-21 18:29:39.482 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for RELIANCE: unrealized=-1119846.59, today=-1119846.59\n", "record": {"elapsed": {"repr": "0:01:03.480597", "seconds": 63.480597}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for RELIANCE: unrealized=-1119846.59, today=-1119846.59", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:29:39.482572+05:30", "timestamp": 1755781179.482572}}}
{"text": "2025-08-21 18:29:39.483 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for TCS: unrealized=962835.68, today=962835.68\n", "record": {"elapsed": {"repr": "0:01:03.481144", "seconds": 63.481144}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for TCS: unrealized=962835.68, today=962835.68", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:29:39.483119+05:30", "timestamp": 1755781179.483119}}}
{"text": "2025-08-21 18:29:39.483 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for HDFC: unrealized=-2104188.25, today=-2104188.25\n", "record": {"elapsed": {"repr": "0:01:03.481713", "seconds": 63.481713}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for HDFC: unrealized=-2104188.25, today=-2104188.25", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:29:39.483688+05:30", "timestamp": 1755781179.483688}}}
{"text": "2025-08-21 18:29:39.484 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for INFY: unrealized=190986.83, today=190986.83\n", "record": {"elapsed": {"repr": "0:01:03.482273", "seconds": 63.482273}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for INFY: unrealized=190986.83, today=190986.83", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:29:39.484248+05:30", "timestamp": 1755781179.484248}}}
{"text": "2025-08-21 18:29:39.484 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for ICICIBANK: unrealized=380750.35, today=380750.35\n", "record": {"elapsed": {"repr": "0:01:03.482845", "seconds": 63.482845}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for ICICIBANK: unrealized=380750.35, today=380750.35", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:29:39.484820+05:30", "timestamp": 1755781179.48482}}}
{"text": "2025-08-21 18:29:39.485 | INFO     | app.services.dhan_client:get_pnl:545 - Calculated totals - realized: 0.0, unrealized: -1689461.98, day: -1689461.98\n", "record": {"elapsed": {"repr": "0:01:03.483536", "seconds": 63.483536}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 545, "message": "Calculated totals - realized: 0.0, unrealized: -1689461.98, day: -1689461.98", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:29:39.485511+05:30", "timestamp": 1755781179.485511}}}
{"text": "2025-08-21 18:29:39.486 | DEBUG    | app.services.dhan_client:get_pnl:554 - PnL consistency check passed: drift=₹0.00\n", "record": {"elapsed": {"repr": "0:01:03.484085", "seconds": 63.484085}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 554, "message": "PnL consistency check passed: drift=₹0.00", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:29:39.486060+05:30", "timestamp": 1755781179.48606}}}
{"text": "2025-08-21 18:29:39.486 | DEBUG    | app.services.dhan_client:get_pnl:558 - Creating PnLTotals...\n", "record": {"elapsed": {"repr": "0:01:03.484607", "seconds": 63.484607}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 558, "message": "Creating PnLTotals...", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:29:39.486582+05:30", "timestamp": 1755781179.486582}}}
{"text": "2025-08-21 18:29:39.487 | DEBUG    | app.services.dhan_client:get_pnl:565 - PnLTotals created successfully\n", "record": {"elapsed": {"repr": "0:01:03.485250", "seconds": 63.48525}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 565, "message": "PnLTotals created successfully", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:29:39.487225+05:30", "timestamp": 1755781179.487225}}}
{"text": "2025-08-21 18:29:39.487 | DEBUG    | app.services.dhan_client:get_pnl:574 - Creating PnL model...\n", "record": {"elapsed": {"repr": "0:01:03.485775", "seconds": 63.485775}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 574, "message": "Creating PnL model...", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:29:39.487750+05:30", "timestamp": 1755781179.48775}}}
{"text": "2025-08-21 18:29:39.488 | DEBUG    | app.services.dhan_client:get_pnl:575 - Model fields: totals=<class 'app.models.schemas.PnLTotals'>, perSymbol=5, updated_at=2025-08-21 18:29:39.482484+05:30, trading_day=2025-08-21\n", "record": {"elapsed": {"repr": "0:01:03.486303", "seconds": 63.486303}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 575, "message": "Model fields: totals=<class 'app.models.schemas.PnLTotals'>, perSymbol=5, updated_at=2025-08-21 18:29:39.482484+05:30, trading_day=2025-08-21", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:29:39.488278+05:30", "timestamp": 1755781179.488278}}}
{"text": "2025-08-21 18:29:39.489 | DEBUG    | app.services.dhan_client:get_pnl:584 - Created PnL model: totals=PnLTotals(realized=0.0, unrealized=-1689461.98, day=-1689461.98, currency='INR') per_symbol=[PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1543, avg=1999.73, ltp=1273.97, unrealized=-1119846.59, today_pnl=-1119846.59), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=613, avg=1989.23, ltp=418.54, unrealized=962835.68, today_pnl=962835.68), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=1709, avg=1838.62, ltp=607.38, unrealized=-2104188.25, today_pnl=-2104188.25), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=697, avg=852.74, ltp=578.73, unrealized=190986.83, today_pnl=190986.83), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=255, avg=915.17, ltp=2408.31, unrealized=380750.35, today_pnl=380750.35)] updated_at=datetime.datetime(2025, 8, 21, 18, 29, 39, 482484, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))) trading_day='2025-08-21'\n", "record": {"elapsed": {"repr": "0:01:03.487062", "seconds": 63.487062}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 584, "message": "Created PnL model: totals=PnLTotals(realized=0.0, unrealized=-1689461.98, day=-1689461.98, currency='INR') per_symbol=[PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1543, avg=1999.73, ltp=1273.97, unrealized=-1119846.59, today_pnl=-1119846.59), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=613, avg=1989.23, ltp=418.54, unrealized=962835.68, today_pnl=962835.68), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=1709, avg=1838.62, ltp=607.38, unrealized=-2104188.25, today_pnl=-2104188.25), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=697, avg=852.74, ltp=578.73, unrealized=190986.83, today_pnl=190986.83), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=255, avg=915.17, ltp=2408.31, unrealized=380750.35, today_pnl=380750.35)] updated_at=datetime.datetime(2025, 8, 21, 18, 29, 39, 482484, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))) trading_day='2025-08-21'", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:29:39.489037+05:30", "timestamp": 1755781179.489037}}}
{"text": "2025-08-21 18:29:39.490 | DEBUG    | app.services.dhan_client:get_pnl:585 - PnL model fields: {'totals': PnLTotals(realized=0.0, unrealized=-1689461.98, day=-1689461.98, currency='INR'), 'per_symbol': [PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1543, avg=1999.73, ltp=1273.97, unrealized=-1119846.59, today_pnl=-1119846.59), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=613, avg=1989.23, ltp=418.54, unrealized=962835.68, today_pnl=962835.68), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=1709, avg=1838.62, ltp=607.38, unrealized=-2104188.25, today_pnl=-2104188.25), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=697, avg=852.74, ltp=578.73, unrealized=190986.83, today_pnl=190986.83), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=255, avg=915.17, ltp=2408.31, unrealized=380750.35, today_pnl=380750.35)], 'updated_at': datetime.datetime(2025, 8, 21, 18, 29, 39, 482484, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))), 'trading_day': '2025-08-21'}\n", "record": {"elapsed": {"repr": "0:01:03.488176", "seconds": 63.488176}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 585, "message": "PnL model fields: {'totals': PnLTotals(realized=0.0, unrealized=-1689461.98, day=-1689461.98, currency='INR'), 'per_symbol': [PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1543, avg=1999.73, ltp=1273.97, unrealized=-1119846.59, today_pnl=-1119846.59), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=613, avg=1989.23, ltp=418.54, unrealized=962835.68, today_pnl=962835.68), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=1709, avg=1838.62, ltp=607.38, unrealized=-2104188.25, today_pnl=-2104188.25), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=697, avg=852.74, ltp=578.73, unrealized=190986.83, today_pnl=190986.83), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=255, avg=915.17, ltp=2408.31, unrealized=380750.35, today_pnl=380750.35)], 'updated_at': datetime.datetime(2025, 8, 21, 18, 29, 39, 482484, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))), 'trading_day': '2025-08-21'}", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:29:39.490151+05:30", "timestamp": 1755781179.490151}}}
{"text": "2025-08-21 18:29:39.491 | INFO     | app.services.dhan_client:get_pnl:587 - P&L calculation completed successfully: 5 symbols, unrealized=₹-1689461.98\n", "record": {"elapsed": {"repr": "0:01:03.489572", "seconds": 63.489572}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 587, "message": "P&L calculation completed successfully: 5 symbols, unrealized=₹-1689461.98", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:29:39.491547+05:30", "timestamp": 1755781179.491547}}}
{"text": "2025-08-21 18:29:39.492 | DEBUG    | app.ws.live:emit_delta:408 - Emitted pnl delta: seq=89\n", "record": {"elapsed": {"repr": "0:01:03.490740", "seconds": 63.49074}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "emit_delta", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 408, "message": "Emitted pnl delta: seq=89", "module": "live", "name": "app.ws.live", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:29:39.492715+05:30", "timestamp": 1755781179.492715}}}
{"text": "2025-08-21 18:29:40.503 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:01:04.501947", "seconds": 64.501947}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 17632, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 18:29:40.503922+05:30", "timestamp": 1755781180.503922}}}
{"text": "2025-08-21 18:29:40.504 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:01:04.502920", "seconds": 64.50292}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 17632, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 18:29:40.504895+05:30", "timestamp": 1755781180.504895}}}
{"text": "2025-08-21 18:29:40.505 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:01:04.503702", "seconds": 64.503702}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 17632, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 18:29:40.505677+05:30", "timestamp": 1755781180.505677}}}
{"text": "2025-08-21 18:29:40.506 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:01:04.504573", "seconds": 64.504573}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 17632, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 18:29:40.506548+05:30", "timestamp": 1755781180.506548}}}
{"text": "2025-08-21 18:29:40.507 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:01:04.505239", "seconds": 64.505239}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 17632, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 18:29:40.507214+05:30", "timestamp": 1755781180.507214}}}
{"text": "2025-08-21 18:29:40.507 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:01:04.505880", "seconds": 64.50588}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 17632, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 18:29:40.507855+05:30", "timestamp": 1755781180.507855}}}
{"text": "2025-08-21 18:29:40.508 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:01:04.506450", "seconds": 64.50645}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 17632, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 18:29:40.508425+05:30", "timestamp": 1755781180.508425}}}
{"text": "2025-08-21 18:29:40.509 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:01:04.507059", "seconds": 64.507059}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 17632, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 18:29:40.509034+05:30", "timestamp": 1755781180.509034}}}
{"text": "2025-08-21 18:29:40.509 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:01:04.507823", "seconds": 64.507823}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 17632, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 18:29:40.509798+05:30", "timestamp": 1755781180.509798}}}
{"text": "2025-08-21 18:29:40.510 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:01:04.508464", "seconds": 64.508464}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 17632, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 18:29:40.510439+05:30", "timestamp": 1755781180.510439}}}
{"text": "2025-08-21 18:29:41.065 | INFO     | app.services.dhan_client:get_pnl:489 - Starting accurate P&L calculation\n", "record": {"elapsed": {"repr": "0:01:05.063469", "seconds": 65.063469}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 489, "message": "Starting accurate P&L calculation", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:29:41.065444+05:30", "timestamp": 1755781181.065444}}}
{"text": "2025-08-21 18:29:41.066 | INFO     | app.services.dhan_client:get_pnl:491 - Fetched 5 positions\n", "record": {"elapsed": {"repr": "0:01:05.064167", "seconds": 65.064167}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 491, "message": "Fetched 5 positions", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:29:41.066142+05:30", "timestamp": 1755781181.066142}}}
{"text": "2025-08-21 18:29:41.066 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for RELIANCE: unrealized=-1084462.11, today=-1084462.11\n", "record": {"elapsed": {"repr": "0:01:05.064797", "seconds": 65.064797}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for RELIANCE: unrealized=-1084462.11, today=-1084462.11", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:29:41.066772+05:30", "timestamp": 1755781181.066772}}}
{"text": "2025-08-21 18:29:41.067 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for TCS: unrealized=965563.65, today=965563.65\n", "record": {"elapsed": {"repr": "0:01:05.065336", "seconds": 65.065336}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for TCS: unrealized=965563.65, today=965563.65", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:29:41.067311+05:30", "timestamp": 1755781181.067311}}}
{"text": "2025-08-21 18:29:41.068 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for HDFC: unrealized=-2094477.56, today=-2094477.56\n", "record": {"elapsed": {"repr": "0:01:05.066037", "seconds": 65.066037}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for HDFC: unrealized=-2094477.56, today=-2094477.56", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:29:41.068012+05:30", "timestamp": 1755781181.068012}}}
{"text": "2025-08-21 18:29:41.068 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for INFY: unrealized=184230.78, today=184230.78\n", "record": {"elapsed": {"repr": "0:01:05.066548", "seconds": 65.066548}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for INFY: unrealized=184230.78, today=184230.78", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:29:41.068523+05:30", "timestamp": 1755781181.068523}}}
{"text": "2025-08-21 18:29:41.069 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for ICICIBANK: unrealized=379251.29, today=379251.29\n", "record": {"elapsed": {"repr": "0:01:05.067065", "seconds": 65.067065}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for ICICIBANK: unrealized=379251.29, today=379251.29", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:29:41.069040+05:30", "timestamp": 1755781181.06904}}}
{"text": "2025-08-21 18:29:41.069 | INFO     | app.services.dhan_client:get_pnl:545 - Calculated totals - realized: 0.0, unrealized: -1649893.95, day: -1649893.95\n", "record": {"elapsed": {"repr": "0:01:05.067551", "seconds": 65.067551}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 545, "message": "Calculated totals - realized: 0.0, unrealized: -1649893.95, day: -1649893.95", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:29:41.069526+05:30", "timestamp": 1755781181.069526}}}
{"text": "2025-08-21 18:29:41.070 | DEBUG    | app.services.dhan_client:get_pnl:554 - PnL consistency check passed: drift=₹0.00\n", "record": {"elapsed": {"repr": "0:01:05.068049", "seconds": 65.068049}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 554, "message": "PnL consistency check passed: drift=₹0.00", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:29:41.070024+05:30", "timestamp": 1755781181.070024}}}
{"text": "2025-08-21 18:29:41.070 | DEBUG    | app.services.dhan_client:get_pnl:558 - Creating PnLTotals...\n", "record": {"elapsed": {"repr": "0:01:05.068493", "seconds": 65.068493}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 558, "message": "Creating PnLTotals...", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:29:41.070468+05:30", "timestamp": 1755781181.070468}}}
{"text": "2025-08-21 18:29:41.071 | DEBUG    | app.services.dhan_client:get_pnl:565 - PnLTotals created successfully\n", "record": {"elapsed": {"repr": "0:01:05.069140", "seconds": 65.06914}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 565, "message": "PnLTotals created successfully", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:29:41.071115+05:30", "timestamp": 1755781181.071115}}}
{"text": "2025-08-21 18:29:41.071 | DEBUG    | app.services.dhan_client:get_pnl:574 - Creating PnL model...\n", "record": {"elapsed": {"repr": "0:01:05.069716", "seconds": 65.069716}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 574, "message": "Creating PnL model...", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:29:41.071691+05:30", "timestamp": 1755781181.071691}}}
{"text": "2025-08-21 18:29:41.072 | DEBUG    | app.services.dhan_client:get_pnl:575 - Model fields: totals=<class 'app.models.schemas.PnLTotals'>, perSymbol=5, updated_at=2025-08-21 18:29:41.066676+05:30, trading_day=2025-08-21\n", "record": {"elapsed": {"repr": "0:01:05.070354", "seconds": 65.070354}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 575, "message": "Model fields: totals=<class 'app.models.schemas.PnLTotals'>, perSymbol=5, updated_at=2025-08-21 18:29:41.066676+05:30, trading_day=2025-08-21", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:29:41.072329+05:30", "timestamp": 1755781181.072329}}}
{"text": "2025-08-21 18:29:41.073 | DEBUG    | app.services.dhan_client:get_pnl:584 - Created PnL model: totals=PnLTotals(realized=0.0, unrealized=-1649893.95, day=-1649893.95, currency='INR') per_symbol=[PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1543, avg=1999.73, ltp=1296.9, unrealized=-1084462.11, today_pnl=-1084462.11), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=613, avg=1989.23, ltp=414.09, unrealized=965563.65, today_pnl=965563.65), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=1709, avg=1838.62, ltp=613.06, unrealized=-2094477.56, today_pnl=-2094477.56), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=697, avg=852.74, ltp=588.42, unrealized=184230.78, today_pnl=184230.78), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=255, avg=915.17, ltp=2402.43, unrealized=379251.29, today_pnl=379251.29)] updated_at=datetime.datetime(2025, 8, 21, 18, 29, 41, 66676, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))) trading_day='2025-08-21'\n", "record": {"elapsed": {"repr": "0:01:05.071102", "seconds": 65.071102}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 584, "message": "Created PnL model: totals=PnLTotals(realized=0.0, unrealized=-1649893.95, day=-1649893.95, currency='INR') per_symbol=[PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1543, avg=1999.73, ltp=1296.9, unrealized=-1084462.11, today_pnl=-1084462.11), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=613, avg=1989.23, ltp=414.09, unrealized=965563.65, today_pnl=965563.65), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=1709, avg=1838.62, ltp=613.06, unrealized=-2094477.56, today_pnl=-2094477.56), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=697, avg=852.74, ltp=588.42, unrealized=184230.78, today_pnl=184230.78), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=255, avg=915.17, ltp=2402.43, unrealized=379251.29, today_pnl=379251.29)] updated_at=datetime.datetime(2025, 8, 21, 18, 29, 41, 66676, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))) trading_day='2025-08-21'", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:29:41.073077+05:30", "timestamp": 1755781181.073077}}}
{"text": "2025-08-21 18:29:41.074 | DEBUG    | app.services.dhan_client:get_pnl:585 - PnL model fields: {'totals': PnLTotals(realized=0.0, unrealized=-1649893.95, day=-1649893.95, currency='INR'), 'per_symbol': [PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1543, avg=1999.73, ltp=1296.9, unrealized=-1084462.11, today_pnl=-1084462.11), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=613, avg=1989.23, ltp=414.09, unrealized=965563.65, today_pnl=965563.65), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=1709, avg=1838.62, ltp=613.06, unrealized=-2094477.56, today_pnl=-2094477.56), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=697, avg=852.74, ltp=588.42, unrealized=184230.78, today_pnl=184230.78), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=255, avg=915.17, ltp=2402.43, unrealized=379251.29, today_pnl=379251.29)], 'updated_at': datetime.datetime(2025, 8, 21, 18, 29, 41, 66676, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))), 'trading_day': '2025-08-21'}\n", "record": {"elapsed": {"repr": "0:01:05.072088", "seconds": 65.072088}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 585, "message": "PnL model fields: {'totals': PnLTotals(realized=0.0, unrealized=-1649893.95, day=-1649893.95, currency='INR'), 'per_symbol': [PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1543, avg=1999.73, ltp=1296.9, unrealized=-1084462.11, today_pnl=-1084462.11), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=613, avg=1989.23, ltp=414.09, unrealized=965563.65, today_pnl=965563.65), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=1709, avg=1838.62, ltp=613.06, unrealized=-2094477.56, today_pnl=-2094477.56), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=697, avg=852.74, ltp=588.42, unrealized=184230.78, today_pnl=184230.78), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=255, avg=915.17, ltp=2402.43, unrealized=379251.29, today_pnl=379251.29)], 'updated_at': datetime.datetime(2025, 8, 21, 18, 29, 41, 66676, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))), 'trading_day': '2025-08-21'}", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:29:41.074063+05:30", "timestamp": 1755781181.074063}}}
{"text": "2025-08-21 18:29:41.075 | INFO     | app.services.dhan_client:get_pnl:587 - P&L calculation completed successfully: 5 symbols, unrealized=₹-1649893.95\n", "record": {"elapsed": {"repr": "0:01:05.073223", "seconds": 65.073223}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 587, "message": "P&L calculation completed successfully: 5 symbols, unrealized=₹-1649893.95", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:29:41.075198+05:30", "timestamp": 1755781181.075198}}}
{"text": "2025-08-21 18:29:41.076 | DEBUG    | app.ws.live:emit_delta:408 - Emitted pnl delta: seq=90\n", "record": {"elapsed": {"repr": "0:01:05.074166", "seconds": 65.074166}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "emit_delta", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 408, "message": "Emitted pnl delta: seq=90", "module": "live", "name": "app.ws.live", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:29:41.076141+05:30", "timestamp": 1755781181.076141}}}
{"text": "2025-08-21 18:29:41.959 | DEBUG    | app.ws.live:emit_delta:408 - Emitted positions delta: seq=91\n", "record": {"elapsed": {"repr": "0:01:05.957252", "seconds": 65.957252}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "emit_delta", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 408, "message": "Emitted positions delta: seq=91", "module": "live", "name": "app.ws.live", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:29:41.959227+05:30", "timestamp": 1755781181.959227}}}
{"text": "2025-08-21 18:29:42.511 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:01:06.509373", "seconds": 66.509373}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 17632, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 18:29:42.511348+05:30", "timestamp": 1755781182.511348}}}
{"text": "2025-08-21 18:29:42.512 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:01:06.510102", "seconds": 66.510102}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 17632, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 18:29:42.512077+05:30", "timestamp": 1755781182.512077}}}
{"text": "2025-08-21 18:29:42.512 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:01:06.510691", "seconds": 66.510691}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 17632, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 18:29:42.512666+05:30", "timestamp": 1755781182.512666}}}
{"text": "2025-08-21 18:29:42.513 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:01:06.511280", "seconds": 66.51128}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 17632, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 18:29:42.513255+05:30", "timestamp": 1755781182.513255}}}
{"text": "2025-08-21 18:29:42.513 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:01:06.511906", "seconds": 66.511906}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 17632, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 18:29:42.513881+05:30", "timestamp": 1755781182.513881}}}
{"text": "2025-08-21 18:29:42.514 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:01:06.512561", "seconds": 66.512561}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 17632, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 18:29:42.514536+05:30", "timestamp": 1755781182.514536}}}
{"text": "2025-08-21 18:29:42.515 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:01:06.513164", "seconds": 66.513164}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 17632, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 18:29:42.515139+05:30", "timestamp": 1755781182.515139}}}
{"text": "2025-08-21 18:29:42.515 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:01:06.513816", "seconds": 66.513816}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 17632, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 18:29:42.515791+05:30", "timestamp": 1755781182.515791}}}
{"text": "2025-08-21 18:29:42.516 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:01:06.514537", "seconds": 66.514537}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 17632, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 18:29:42.516512+05:30", "timestamp": 1755781182.516512}}}
{"text": "2025-08-21 18:29:42.517 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:01:06.515497", "seconds": 66.515497}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 17632, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 18:29:42.517472+05:30", "timestamp": 1755781182.517472}}}
{"text": "2025-08-21 18:29:42.947 | INFO     | app.services.dhan_client:get_pnl:489 - Starting accurate P&L calculation\n", "record": {"elapsed": {"repr": "0:01:06.945456", "seconds": 66.945456}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 489, "message": "Starting accurate P&L calculation", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:29:42.947431+05:30", "timestamp": 1755781182.947431}}}
{"text": "2025-08-21 18:29:42.948 | INFO     | app.services.dhan_client:get_pnl:491 - Fetched 5 positions\n", "record": {"elapsed": {"repr": "0:01:06.946286", "seconds": 66.946286}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 491, "message": "Fetched 5 positions", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:29:42.948261+05:30", "timestamp": 1755781182.948261}}}
{"text": "2025-08-21 18:29:42.948 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for RELIANCE: unrealized=-1057613.81, today=-1057613.81\n", "record": {"elapsed": {"repr": "0:01:06.947017", "seconds": 66.947017}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for RELIANCE: unrealized=-1057613.81, today=-1057613.81", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:29:42.948992+05:30", "timestamp": 1755781182.948992}}}
{"text": "2025-08-21 18:29:42.949 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for TCS: unrealized=968985.58, today=968985.58\n", "record": {"elapsed": {"repr": "0:01:06.947614", "seconds": 66.947614}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for TCS: unrealized=968985.58, today=968985.58", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:29:42.949589+05:30", "timestamp": 1755781182.949589}}}
{"text": "2025-08-21 18:29:42.950 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for HDFC: unrealized=-2099803.94, today=-2099803.94\n", "record": {"elapsed": {"repr": "0:01:06.948565", "seconds": 66.948565}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for HDFC: unrealized=-2099803.94, today=-2099803.94", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:29:42.950540+05:30", "timestamp": 1755781182.95054}}}
{"text": "2025-08-21 18:29:42.951 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for INFY: unrealized=189444.09, today=189444.09\n", "record": {"elapsed": {"repr": "0:01:06.949442", "seconds": 66.949442}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for INFY: unrealized=189444.09, today=189444.09", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:29:42.951417+05:30", "timestamp": 1755781182.951417}}}
{"text": "2025-08-21 18:29:42.952 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for ICICIBANK: unrealized=379825.76, today=379825.76\n", "record": {"elapsed": {"repr": "0:01:06.950105", "seconds": 66.950105}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for ICICIBANK: unrealized=379825.76, today=379825.76", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:29:42.952080+05:30", "timestamp": 1755781182.95208}}}
{"text": "2025-08-21 18:29:42.952 | INFO     | app.services.dhan_client:get_pnl:545 - Calculated totals - realized: 0.0, unrealized: -1619162.32, day: -1619162.32\n", "record": {"elapsed": {"repr": "0:01:06.950884", "seconds": 66.950884}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 545, "message": "Calculated totals - realized: 0.0, unrealized: -1619162.32, day: -1619162.32", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:29:42.952859+05:30", "timestamp": 1755781182.952859}}}
{"text": "2025-08-21 18:29:42.953 | DEBUG    | app.services.dhan_client:get_pnl:554 - PnL consistency check passed: drift=₹0.00\n", "record": {"elapsed": {"repr": "0:01:06.951593", "seconds": 66.951593}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 554, "message": "PnL consistency check passed: drift=₹0.00", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:29:42.953568+05:30", "timestamp": 1755781182.953568}}}
{"text": "2025-08-21 18:29:42.954 | DEBUG    | app.services.dhan_client:get_pnl:558 - Creating PnLTotals...\n", "record": {"elapsed": {"repr": "0:01:06.952129", "seconds": 66.952129}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 558, "message": "Creating PnLTotals...", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:29:42.954104+05:30", "timestamp": 1755781182.954104}}}
{"text": "2025-08-21 18:29:42.954 | DEBUG    | app.services.dhan_client:get_pnl:565 - PnLTotals created successfully\n", "record": {"elapsed": {"repr": "0:01:06.952621", "seconds": 66.952621}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 565, "message": "PnLTotals created successfully", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:29:42.954596+05:30", "timestamp": 1755781182.954596}}}
{"text": "2025-08-21 18:29:42.955 | DEBUG    | app.services.dhan_client:get_pnl:574 - Creating PnL model...\n", "record": {"elapsed": {"repr": "0:01:06.953182", "seconds": 66.953182}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 574, "message": "Creating PnL model...", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:29:42.955157+05:30", "timestamp": 1755781182.955157}}}
{"text": "2025-08-21 18:29:42.955 | DEBUG    | app.services.dhan_client:get_pnl:575 - Model fields: totals=<class 'app.models.schemas.PnLTotals'>, perSymbol=5, updated_at=2025-08-21 18:29:42.948863+05:30, trading_day=2025-08-21\n", "record": {"elapsed": {"repr": "0:01:06.953750", "seconds": 66.95375}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 575, "message": "Model fields: totals=<class 'app.models.schemas.PnLTotals'>, perSymbol=5, updated_at=2025-08-21 18:29:42.948863+05:30, trading_day=2025-08-21", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:29:42.955725+05:30", "timestamp": 1755781182.955725}}}
{"text": "2025-08-21 18:29:42.956 | DEBUG    | app.services.dhan_client:get_pnl:584 - Created PnL model: totals=PnLTotals(realized=0.0, unrealized=-1619162.32, day=-1619162.32, currency='INR') per_symbol=[PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1543, avg=1999.73, ltp=1314.3, unrealized=-1057613.81, today_pnl=-1057613.81), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=613, avg=1989.23, ltp=408.5, unrealized=968985.58, today_pnl=968985.58), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=1709, avg=1838.62, ltp=609.95, unrealized=-2099803.94, today_pnl=-2099803.94), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=697, avg=852.74, ltp=580.94, unrealized=189444.09, today_pnl=189444.09), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=255, avg=915.17, ltp=2404.68, unrealized=379825.76, today_pnl=379825.76)] updated_at=datetime.datetime(2025, 8, 21, 18, 29, 42, 948863, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))) trading_day='2025-08-21'\n", "record": {"elapsed": {"repr": "0:01:06.954570", "seconds": 66.95457}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 584, "message": "Created PnL model: totals=PnLTotals(realized=0.0, unrealized=-1619162.32, day=-1619162.32, currency='INR') per_symbol=[PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1543, avg=1999.73, ltp=1314.3, unrealized=-1057613.81, today_pnl=-1057613.81), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=613, avg=1989.23, ltp=408.5, unrealized=968985.58, today_pnl=968985.58), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=1709, avg=1838.62, ltp=609.95, unrealized=-2099803.94, today_pnl=-2099803.94), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=697, avg=852.74, ltp=580.94, unrealized=189444.09, today_pnl=189444.09), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=255, avg=915.17, ltp=2404.68, unrealized=379825.76, today_pnl=379825.76)] updated_at=datetime.datetime(2025, 8, 21, 18, 29, 42, 948863, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))) trading_day='2025-08-21'", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:29:42.956545+05:30", "timestamp": 1755781182.956545}}}
{"text": "2025-08-21 18:29:42.957 | DEBUG    | app.services.dhan_client:get_pnl:585 - PnL model fields: {'totals': PnLTotals(realized=0.0, unrealized=-1619162.32, day=-1619162.32, currency='INR'), 'per_symbol': [PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1543, avg=1999.73, ltp=1314.3, unrealized=-1057613.81, today_pnl=-1057613.81), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=613, avg=1989.23, ltp=408.5, unrealized=968985.58, today_pnl=968985.58), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=1709, avg=1838.62, ltp=609.95, unrealized=-2099803.94, today_pnl=-2099803.94), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=697, avg=852.74, ltp=580.94, unrealized=189444.09, today_pnl=189444.09), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=255, avg=915.17, ltp=2404.68, unrealized=379825.76, today_pnl=379825.76)], 'updated_at': datetime.datetime(2025, 8, 21, 18, 29, 42, 948863, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))), 'trading_day': '2025-08-21'}\n", "record": {"elapsed": {"repr": "0:01:06.955343", "seconds": 66.955343}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 585, "message": "PnL model fields: {'totals': PnLTotals(realized=0.0, unrealized=-1619162.32, day=-1619162.32, currency='INR'), 'per_symbol': [PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1543, avg=1999.73, ltp=1314.3, unrealized=-1057613.81, today_pnl=-1057613.81), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=613, avg=1989.23, ltp=408.5, unrealized=968985.58, today_pnl=968985.58), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=1709, avg=1838.62, ltp=609.95, unrealized=-2099803.94, today_pnl=-2099803.94), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=697, avg=852.74, ltp=580.94, unrealized=189444.09, today_pnl=189444.09), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=255, avg=915.17, ltp=2404.68, unrealized=379825.76, today_pnl=379825.76)], 'updated_at': datetime.datetime(2025, 8, 21, 18, 29, 42, 948863, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))), 'trading_day': '2025-08-21'}", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:29:42.957318+05:30", "timestamp": 1755781182.957318}}}
{"text": "2025-08-21 18:29:42.957 | INFO     | app.services.dhan_client:get_pnl:587 - P&L calculation completed successfully: 5 symbols, unrealized=₹-1619162.32\n", "record": {"elapsed": {"repr": "0:01:06.955952", "seconds": 66.955952}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 587, "message": "P&L calculation completed successfully: 5 symbols, unrealized=₹-1619162.32", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:29:42.957927+05:30", "timestamp": 1755781182.957927}}}
{"text": "2025-08-21 18:29:42.958 | DEBUG    | app.ws.live:emit_delta:408 - Emitted pnl delta: seq=92\n", "record": {"elapsed": {"repr": "0:01:06.956834", "seconds": 66.956834}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "emit_delta", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 408, "message": "Emitted pnl delta: seq=92", "module": "live", "name": "app.ws.live", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:29:42.958809+05:30", "timestamp": 1755781182.958809}}}
{"text": "2025-08-21 18:29:43.768 | DEBUG    | app.ws.live:emit_delta:408 - Emitted positions delta: seq=93\n", "record": {"elapsed": {"repr": "0:01:07.766690", "seconds": 67.76669}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "emit_delta", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 408, "message": "Emitted positions delta: seq=93", "module": "live", "name": "app.ws.live", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:29:43.768665+05:30", "timestamp": 1755781183.768665}}}
{"text": "2025-08-21 18:29:44.518 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:01:08.516530", "seconds": 68.51653}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 17632, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 18:29:44.518505+05:30", "timestamp": 1755781184.518505}}}
{"text": "2025-08-21 18:29:44.519 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:01:08.517274", "seconds": 68.517274}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 17632, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 18:29:44.519249+05:30", "timestamp": 1755781184.519249}}}
{"text": "2025-08-21 18:29:44.519 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:01:08.517989", "seconds": 68.517989}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 17632, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 18:29:44.519964+05:30", "timestamp": 1755781184.519964}}}
{"text": "2025-08-21 18:29:44.520 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:01:08.518754", "seconds": 68.518754}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 17632, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 18:29:44.520729+05:30", "timestamp": 1755781184.520729}}}
{"text": "2025-08-21 18:29:44.521 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:01:08.519425", "seconds": 68.519425}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 17632, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 18:29:44.521400+05:30", "timestamp": 1755781184.5214}}}
{"text": "2025-08-21 18:29:44.522 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:01:08.520073", "seconds": 68.520073}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 17632, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 18:29:44.522048+05:30", "timestamp": 1755781184.522048}}}
{"text": "2025-08-21 18:29:44.522 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:01:08.520808", "seconds": 68.520808}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 17632, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 18:29:44.522783+05:30", "timestamp": 1755781184.522783}}}
{"text": "2025-08-21 18:29:44.523 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:01:08.521549", "seconds": 68.521549}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 17632, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 18:29:44.523524+05:30", "timestamp": 1755781184.523524}}}
{"text": "2025-08-21 18:29:44.524 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:01:08.522507", "seconds": 68.522507}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 17632, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 18:29:44.524482+05:30", "timestamp": 1755781184.524482}}}
{"text": "2025-08-21 18:29:44.525 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:01:08.523441", "seconds": 68.523441}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 17632, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 18:29:44.525416+05:30", "timestamp": 1755781184.525416}}}
{"text": "2025-08-21 18:29:44.765 | INFO     | app.services.dhan_client:get_pnl:489 - Starting accurate P&L calculation\n", "record": {"elapsed": {"repr": "0:01:08.763896", "seconds": 68.763896}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 489, "message": "Starting accurate P&L calculation", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:29:44.765871+05:30", "timestamp": 1755781184.765871}}}
{"text": "2025-08-21 18:29:44.766 | INFO     | app.services.dhan_client:get_pnl:491 - Fetched 5 positions\n", "record": {"elapsed": {"repr": "0:01:08.764852", "seconds": 68.764852}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 491, "message": "Fetched 5 positions", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:29:44.766827+05:30", "timestamp": 1755781184.766827}}}
{"text": "2025-08-21 18:29:44.767 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for RELIANCE: unrealized=-1052462.09, today=-1052462.09\n", "record": {"elapsed": {"repr": "0:01:08.765633", "seconds": 68.765633}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for RELIANCE: unrealized=-1052462.09, today=-1052462.09", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:29:44.767608+05:30", "timestamp": 1755781184.767608}}}
{"text": "2025-08-21 18:29:44.768 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for TCS: unrealized=969282.21, today=969282.21\n", "record": {"elapsed": {"repr": "0:01:08.766632", "seconds": 68.766632}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for TCS: unrealized=969282.21, today=969282.21", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:29:44.768607+05:30", "timestamp": 1755781184.768607}}}
{"text": "2025-08-21 18:29:44.769 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for HDFC: unrealized=-2095386.3, today=-2095386.3\n", "record": {"elapsed": {"repr": "0:01:08.767341", "seconds": 68.767341}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for HDFC: unrealized=-2095386.3, today=-2095386.3", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:29:44.769316+05:30", "timestamp": 1755781184.769316}}}
{"text": "2025-08-21 18:29:44.770 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for INFY: unrealized=189470.75, today=189470.75\n", "record": {"elapsed": {"repr": "0:01:08.768036", "seconds": 68.768036}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for INFY: unrealized=189470.75, today=189470.75", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:29:44.770011+05:30", "timestamp": 1755781184.770011}}}
{"text": "2025-08-21 18:29:44.770 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for ICICIBANK: unrealized=389002.24, today=389002.24\n", "record": {"elapsed": {"repr": "0:01:08.768688", "seconds": 68.768688}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for ICICIBANK: unrealized=389002.24, today=389002.24", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:29:44.770663+05:30", "timestamp": 1755781184.770663}}}
{"text": "2025-08-21 18:29:44.771 | INFO     | app.services.dhan_client:get_pnl:545 - Calculated totals - realized: 0.0, unrealized: -1600093.19, day: -1600093.19\n", "record": {"elapsed": {"repr": "0:01:08.769292", "seconds": 68.769292}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 545, "message": "Calculated totals - realized: 0.0, unrealized: -1600093.19, day: -1600093.19", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:29:44.771267+05:30", "timestamp": 1755781184.771267}}}
{"text": "2025-08-21 18:29:44.772 | DEBUG    | app.services.dhan_client:get_pnl:554 - PnL consistency check passed: drift=₹0.00\n", "record": {"elapsed": {"repr": "0:01:08.770037", "seconds": 68.770037}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 554, "message": "PnL consistency check passed: drift=₹0.00", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:29:44.772012+05:30", "timestamp": 1755781184.772012}}}
{"text": "2025-08-21 18:29:44.772 | DEBUG    | app.services.dhan_client:get_pnl:558 - Creating PnLTotals...\n", "record": {"elapsed": {"repr": "0:01:08.770591", "seconds": 68.770591}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 558, "message": "Creating PnLTotals...", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:29:44.772566+05:30", "timestamp": 1755781184.772566}}}
{"text": "2025-08-21 18:29:44.773 | DEBUG    | app.services.dhan_client:get_pnl:565 - PnLTotals created successfully\n", "record": {"elapsed": {"repr": "0:01:08.771117", "seconds": 68.771117}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 565, "message": "PnLTotals created successfully", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:29:44.773092+05:30", "timestamp": 1755781184.773092}}}
{"text": "2025-08-21 18:29:44.773 | DEBUG    | app.services.dhan_client:get_pnl:574 - Creating PnL model...\n", "record": {"elapsed": {"repr": "0:01:08.771530", "seconds": 68.77153}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 574, "message": "Creating PnL model...", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:29:44.773505+05:30", "timestamp": 1755781184.773505}}}
{"text": "2025-08-21 18:29:44.774 | DEBUG    | app.services.dhan_client:get_pnl:575 - Model fields: totals=<class 'app.models.schemas.PnLTotals'>, perSymbol=5, updated_at=2025-08-21 18:29:44.767505+05:30, trading_day=2025-08-21\n", "record": {"elapsed": {"repr": "0:01:08.772115", "seconds": 68.772115}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 575, "message": "Model fields: totals=<class 'app.models.schemas.PnLTotals'>, perSymbol=5, updated_at=2025-08-21 18:29:44.767505+05:30, trading_day=2025-08-21", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:29:44.774090+05:30", "timestamp": 1755781184.77409}}}
{"text": "2025-08-21 18:29:44.774 | DEBUG    | app.services.dhan_client:get_pnl:584 - Created PnL model: totals=PnLTotals(realized=0.0, unrealized=-1600093.19, day=-1600093.19, currency='INR') per_symbol=[PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1543, avg=1999.73, ltp=1317.64, unrealized=-1052462.09, today_pnl=-1052462.09), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=613, avg=1989.23, ltp=408.02, unrealized=969282.21, today_pnl=969282.21), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=1709, avg=1838.62, ltp=612.53, unrealized=-2095386.3, today_pnl=-2095386.3), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=697, avg=852.74, ltp=580.9, unrealized=189470.75, today_pnl=189470.75), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=255, avg=915.17, ltp=2440.67, unrealized=389002.24, today_pnl=389002.24)] updated_at=datetime.datetime(2025, 8, 21, 18, 29, 44, 767505, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))) trading_day='2025-08-21'\n", "record": {"elapsed": {"repr": "0:01:08.773018", "seconds": 68.773018}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 584, "message": "Created PnL model: totals=PnLTotals(realized=0.0, unrealized=-1600093.19, day=-1600093.19, currency='INR') per_symbol=[PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1543, avg=1999.73, ltp=1317.64, unrealized=-1052462.09, today_pnl=-1052462.09), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=613, avg=1989.23, ltp=408.02, unrealized=969282.21, today_pnl=969282.21), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=1709, avg=1838.62, ltp=612.53, unrealized=-2095386.3, today_pnl=-2095386.3), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=697, avg=852.74, ltp=580.9, unrealized=189470.75, today_pnl=189470.75), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=255, avg=915.17, ltp=2440.67, unrealized=389002.24, today_pnl=389002.24)] updated_at=datetime.datetime(2025, 8, 21, 18, 29, 44, 767505, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))) trading_day='2025-08-21'", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:29:44.774993+05:30", "timestamp": 1755781184.774993}}}
{"text": "2025-08-21 18:29:44.776 | DEBUG    | app.services.dhan_client:get_pnl:585 - PnL model fields: {'totals': PnLTotals(realized=0.0, unrealized=-1600093.19, day=-1600093.19, currency='INR'), 'per_symbol': [PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1543, avg=1999.73, ltp=1317.64, unrealized=-1052462.09, today_pnl=-1052462.09), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=613, avg=1989.23, ltp=408.02, unrealized=969282.21, today_pnl=969282.21), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=1709, avg=1838.62, ltp=612.53, unrealized=-2095386.3, today_pnl=-2095386.3), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=697, avg=852.74, ltp=580.9, unrealized=189470.75, today_pnl=189470.75), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=255, avg=915.17, ltp=2440.67, unrealized=389002.24, today_pnl=389002.24)], 'updated_at': datetime.datetime(2025, 8, 21, 18, 29, 44, 767505, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))), 'trading_day': '2025-08-21'}\n", "record": {"elapsed": {"repr": "0:01:08.774270", "seconds": 68.77427}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 585, "message": "PnL model fields: {'totals': PnLTotals(realized=0.0, unrealized=-1600093.19, day=-1600093.19, currency='INR'), 'per_symbol': [PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1543, avg=1999.73, ltp=1317.64, unrealized=-1052462.09, today_pnl=-1052462.09), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=613, avg=1989.23, ltp=408.02, unrealized=969282.21, today_pnl=969282.21), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=1709, avg=1838.62, ltp=612.53, unrealized=-2095386.3, today_pnl=-2095386.3), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=697, avg=852.74, ltp=580.9, unrealized=189470.75, today_pnl=189470.75), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=255, avg=915.17, ltp=2440.67, unrealized=389002.24, today_pnl=389002.24)], 'updated_at': datetime.datetime(2025, 8, 21, 18, 29, 44, 767505, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))), 'trading_day': '2025-08-21'}", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:29:44.776245+05:30", "timestamp": 1755781184.776245}}}
{"text": "2025-08-21 18:29:44.777 | INFO     | app.services.dhan_client:get_pnl:587 - P&L calculation completed successfully: 5 symbols, unrealized=₹-1600093.19\n", "record": {"elapsed": {"repr": "0:01:08.775344", "seconds": 68.775344}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 587, "message": "P&L calculation completed successfully: 5 symbols, unrealized=₹-1600093.19", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:29:44.777319+05:30", "timestamp": 1755781184.777319}}}
{"text": "2025-08-21 18:29:44.778 | DEBUG    | app.ws.live:emit_delta:408 - Emitted pnl delta: seq=94\n", "record": {"elapsed": {"repr": "0:01:08.776415", "seconds": 68.776415}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "emit_delta", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 408, "message": "Emitted pnl delta: seq=94", "module": "live", "name": "app.ws.live", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:29:44.778390+05:30", "timestamp": 1755781184.77839}}}
{"text": "2025-08-21 18:29:44.921 | DEBUG    | app.ws.live:websocket_endpoint:517 - Received WebSocket message: {'type': 'ping', 'clientTime': '2025-08-21T12:59:44.920Z'}\n", "record": {"elapsed": {"repr": "0:01:08.919483", "seconds": 68.919483}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "websocket_endpoint", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 517, "message": "Received WebSocket message: {'type': 'ping', 'clientTime': '2025-08-21T12:59:44.920Z'}", "module": "live", "name": "app.ws.live", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:29:44.921458+05:30", "timestamp": 1755781184.921458}}}
{"text": "2025-08-21 18:29:45.478 | DEBUG    | app.ws.live:emit_delta:408 - Emitted positions delta: seq=95\n", "record": {"elapsed": {"repr": "0:01:09.476085", "seconds": 69.476085}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "emit_delta", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 408, "message": "Emitted positions delta: seq=95", "module": "live", "name": "app.ws.live", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:29:45.478060+05:30", "timestamp": 1755781185.47806}}}
{"text": "2025-08-21 18:29:46.041 | INFO     | app.ws.live:connect:226 - WebSocket connected: 127.0.0.1\n", "record": {"elapsed": {"repr": "0:01:10.039416", "seconds": 70.039416}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "connect", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 226, "message": "WebSocket connected: 127.0.0.1", "module": "live", "name": "app.ws.live", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:29:46.041391+05:30", "timestamp": 1755781186.041391}}}
{"text": "2025-08-21 18:29:46.066 | INFO     | app.ws.live:connect:226 - WebSocket connected: 127.0.0.1\n", "record": {"elapsed": {"repr": "0:01:10.064698", "seconds": 70.064698}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "connect", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 226, "message": "WebSocket connected: 127.0.0.1", "module": "live", "name": "app.ws.live", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:29:46.066673+05:30", "timestamp": 1755781186.066673}}}
{"text": "2025-08-21 18:29:46.111 | INFO     | app.ws.live:connect:226 - WebSocket connected: 127.0.0.1\n", "record": {"elapsed": {"repr": "0:01:10.109139", "seconds": 70.109139}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "connect", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 226, "message": "WebSocket connected: 127.0.0.1", "module": "live", "name": "app.ws.live", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:29:46.111114+05:30", "timestamp": 1755781186.111114}}}
{"text": "2025-08-21 18:29:46.388 | INFO     | app.ws.live:connect:226 - WebSocket connected: 127.0.0.1\n", "record": {"elapsed": {"repr": "0:01:10.386066", "seconds": 70.386066}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "connect", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 226, "message": "WebSocket connected: 127.0.0.1", "module": "live", "name": "app.ws.live", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:29:46.388041+05:30", "timestamp": 1755781186.388041}}}
{"text": "2025-08-21 18:29:46.404 | INFO     | app.ws.live:connect:226 - WebSocket connected: 127.0.0.1\n", "record": {"elapsed": {"repr": "0:01:10.402311", "seconds": 70.402311}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "connect", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 226, "message": "WebSocket connected: 127.0.0.1", "module": "live", "name": "app.ws.live", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:29:46.404286+05:30", "timestamp": 1755781186.404286}}}
{"text": "2025-08-21 18:29:46.420 | INFO     | app.ws.live:connect:226 - WebSocket connected: 127.0.0.1\n", "record": {"elapsed": {"repr": "0:01:10.418720", "seconds": 70.41872}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "connect", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 226, "message": "WebSocket connected: 127.0.0.1", "module": "live", "name": "app.ws.live", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:29:46.420695+05:30", "timestamp": 1755781186.420695}}}
{"text": "2025-08-21 18:29:46.491 | INFO     | app.services.dhan_client:get_pnl:489 - Starting accurate P&L calculation\n", "record": {"elapsed": {"repr": "0:01:10.489885", "seconds": 70.489885}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 489, "message": "Starting accurate P&L calculation", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:29:46.491860+05:30", "timestamp": 1755781186.49186}}}
{"text": "2025-08-21 18:29:46.493 | INFO     | app.services.dhan_client:get_pnl:491 - Fetched 5 positions\n", "record": {"elapsed": {"repr": "0:01:10.491108", "seconds": 70.491108}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 491, "message": "Fetched 5 positions", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:29:46.493083+05:30", "timestamp": 1755781186.493083}}}
{"text": "2025-08-21 18:29:46.493 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for RELIANCE: unrealized=-1052462.09, today=-1052462.09\n", "record": {"elapsed": {"repr": "0:01:10.491985", "seconds": 70.491985}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for RELIANCE: unrealized=-1052462.09, today=-1052462.09", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:29:46.493960+05:30", "timestamp": 1755781186.49396}}}
{"text": "2025-08-21 18:29:46.494 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for TCS: unrealized=969282.21, today=969282.21\n", "record": {"elapsed": {"repr": "0:01:10.492977", "seconds": 70.492977}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for TCS: unrealized=969282.21, today=969282.21", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:29:46.494952+05:30", "timestamp": 1755781186.494952}}}
{"text": "2025-08-21 18:29:46.495 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for HDFC: unrealized=-2095386.3, today=-2095386.3\n", "record": {"elapsed": {"repr": "0:01:10.493632", "seconds": 70.493632}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for HDFC: unrealized=-2095386.3, today=-2095386.3", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:29:46.495607+05:30", "timestamp": 1755781186.495607}}}
{"text": "2025-08-21 18:29:46.496 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for INFY: unrealized=189470.75, today=189470.75\n", "record": {"elapsed": {"repr": "0:01:10.494393", "seconds": 70.494393}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for INFY: unrealized=189470.75, today=189470.75", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:29:46.496368+05:30", "timestamp": 1755781186.496368}}}
{"text": "2025-08-21 18:29:46.497 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for ICICIBANK: unrealized=389002.24, today=389002.24\n", "record": {"elapsed": {"repr": "0:01:10.495077", "seconds": 70.495077}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for ICICIBANK: unrealized=389002.24, today=389002.24", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:29:46.497052+05:30", "timestamp": 1755781186.497052}}}
{"text": "2025-08-21 18:29:46.497 | INFO     | app.services.dhan_client:get_pnl:545 - Calculated totals - realized: 0.0, unrealized: -1600093.19, day: -1600093.19\n", "record": {"elapsed": {"repr": "0:01:10.495948", "seconds": 70.495948}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 545, "message": "Calculated totals - realized: 0.0, unrealized: -1600093.19, day: -1600093.19", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:29:46.497923+05:30", "timestamp": 1755781186.497923}}}
{"text": "2025-08-21 18:29:46.498 | DEBUG    | app.services.dhan_client:get_pnl:554 - PnL consistency check passed: drift=₹0.00\n", "record": {"elapsed": {"repr": "0:01:10.496691", "seconds": 70.496691}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 554, "message": "PnL consistency check passed: drift=₹0.00", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:29:46.498666+05:30", "timestamp": 1755781186.498666}}}
{"text": "2025-08-21 18:29:46.499 | DEBUG    | app.services.dhan_client:get_pnl:558 - Creating PnLTotals...\n", "record": {"elapsed": {"repr": "0:01:10.497359", "seconds": 70.497359}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 558, "message": "Creating PnLTotals...", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:29:46.499334+05:30", "timestamp": 1755781186.499334}}}
{"text": "2025-08-21 18:29:46.500 | DEBUG    | app.services.dhan_client:get_pnl:565 - PnLTotals created successfully\n", "record": {"elapsed": {"repr": "0:01:10.498391", "seconds": 70.498391}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 565, "message": "PnLTotals created successfully", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:29:46.500366+05:30", "timestamp": 1755781186.500366}}}
{"text": "2025-08-21 18:29:46.501 | DEBUG    | app.services.dhan_client:get_pnl:574 - Creating PnL model...\n", "record": {"elapsed": {"repr": "0:01:10.499113", "seconds": 70.499113}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 574, "message": "Creating PnL model...", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:29:46.501088+05:30", "timestamp": 1755781186.501088}}}
{"text": "2025-08-21 18:29:46.501 | DEBUG    | app.services.dhan_client:get_pnl:575 - Model fields: totals=<class 'app.models.schemas.PnLTotals'>, perSymbol=5, updated_at=2025-08-21 18:29:46.493846+05:30, trading_day=2025-08-21\n", "record": {"elapsed": {"repr": "0:01:10.499740", "seconds": 70.49974}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 575, "message": "Model fields: totals=<class 'app.models.schemas.PnLTotals'>, perSymbol=5, updated_at=2025-08-21 18:29:46.493846+05:30, trading_day=2025-08-21", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:29:46.501715+05:30", "timestamp": 1755781186.501715}}}
{"text": "2025-08-21 18:29:46.502 | DEBUG    | app.services.dhan_client:get_pnl:584 - Created PnL model: totals=PnLTotals(realized=0.0, unrealized=-1600093.19, day=-1600093.19, currency='INR') per_symbol=[PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1543, avg=1999.73, ltp=1317.64, unrealized=-1052462.09, today_pnl=-1052462.09), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=613, avg=1989.23, ltp=408.02, unrealized=969282.21, today_pnl=969282.21), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=1709, avg=1838.62, ltp=612.53, unrealized=-2095386.3, today_pnl=-2095386.3), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=697, avg=852.74, ltp=580.9, unrealized=189470.75, today_pnl=189470.75), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=255, avg=915.17, ltp=2440.67, unrealized=389002.24, today_pnl=389002.24)] updated_at=datetime.datetime(2025, 8, 21, 18, 29, 46, 493846, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))) trading_day='2025-08-21'\n", "record": {"elapsed": {"repr": "0:01:10.500660", "seconds": 70.50066}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 584, "message": "Created PnL model: totals=PnLTotals(realized=0.0, unrealized=-1600093.19, day=-1600093.19, currency='INR') per_symbol=[PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1543, avg=1999.73, ltp=1317.64, unrealized=-1052462.09, today_pnl=-1052462.09), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=613, avg=1989.23, ltp=408.02, unrealized=969282.21, today_pnl=969282.21), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=1709, avg=1838.62, ltp=612.53, unrealized=-2095386.3, today_pnl=-2095386.3), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=697, avg=852.74, ltp=580.9, unrealized=189470.75, today_pnl=189470.75), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=255, avg=915.17, ltp=2440.67, unrealized=389002.24, today_pnl=389002.24)] updated_at=datetime.datetime(2025, 8, 21, 18, 29, 46, 493846, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))) trading_day='2025-08-21'", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:29:46.502635+05:30", "timestamp": 1755781186.502635}}}
{"text": "2025-08-21 18:29:46.503 | DEBUG    | app.services.dhan_client:get_pnl:585 - PnL model fields: {'totals': PnLTotals(realized=0.0, unrealized=-1600093.19, day=-1600093.19, currency='INR'), 'per_symbol': [PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1543, avg=1999.73, ltp=1317.64, unrealized=-1052462.09, today_pnl=-1052462.09), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=613, avg=1989.23, ltp=408.02, unrealized=969282.21, today_pnl=969282.21), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=1709, avg=1838.62, ltp=612.53, unrealized=-2095386.3, today_pnl=-2095386.3), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=697, avg=852.74, ltp=580.9, unrealized=189470.75, today_pnl=189470.75), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=255, avg=915.17, ltp=2440.67, unrealized=389002.24, today_pnl=389002.24)], 'updated_at': datetime.datetime(2025, 8, 21, 18, 29, 46, 493846, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))), 'trading_day': '2025-08-21'}\n", "record": {"elapsed": {"repr": "0:01:10.501638", "seconds": 70.501638}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 585, "message": "PnL model fields: {'totals': PnLTotals(realized=0.0, unrealized=-1600093.19, day=-1600093.19, currency='INR'), 'per_symbol': [PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1543, avg=1999.73, ltp=1317.64, unrealized=-1052462.09, today_pnl=-1052462.09), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=613, avg=1989.23, ltp=408.02, unrealized=969282.21, today_pnl=969282.21), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=1709, avg=1838.62, ltp=612.53, unrealized=-2095386.3, today_pnl=-2095386.3), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=697, avg=852.74, ltp=580.9, unrealized=189470.75, today_pnl=189470.75), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=255, avg=915.17, ltp=2440.67, unrealized=389002.24, today_pnl=389002.24)], 'updated_at': datetime.datetime(2025, 8, 21, 18, 29, 46, 493846, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))), 'trading_day': '2025-08-21'}", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:29:46.503613+05:30", "timestamp": 1755781186.503613}}}
{"text": "2025-08-21 18:29:46.504 | INFO     | app.services.dhan_client:get_pnl:587 - P&L calculation completed successfully: 5 symbols, unrealized=₹-1600093.19\n", "record": {"elapsed": {"repr": "0:01:10.502873", "seconds": 70.502873}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 587, "message": "P&L calculation completed successfully: 5 symbols, unrealized=₹-1600093.19", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:29:46.504848+05:30", "timestamp": 1755781186.504848}}}
{"text": "2025-08-21 18:29:46.505 | ERROR    | app.ws.live:broadcast:253 - Failed to broadcast to client: Object of type PnLTotals is not JSON serializable\n", "record": {"elapsed": {"repr": "0:01:10.503864", "seconds": 70.503864}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "broadcast", "level": {"icon": "❌", "name": "ERROR", "no": 40}, "line": 253, "message": "Failed to broadcast to client: Object of type PnLTotals is not JSON serializable", "module": "live", "name": "app.ws.live", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:29:46.505839+05:30", "timestamp": 1755781186.505839}}}
{"text": "2025-08-21 18:29:46.506 | ERROR    | app.ws.live:broadcast:253 - Failed to broadcast to client: Object of type PnLTotals is not JSON serializable\n", "record": {"elapsed": {"repr": "0:01:10.504598", "seconds": 70.504598}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "broadcast", "level": {"icon": "❌", "name": "ERROR", "no": 40}, "line": 253, "message": "Failed to broadcast to client: Object of type PnLTotals is not JSON serializable", "module": "live", "name": "app.ws.live", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:29:46.506573+05:30", "timestamp": 1755781186.506573}}}
{"text": "2025-08-21 18:29:46.507 | ERROR    | app.ws.live:broadcast:253 - Failed to broadcast to client: Object of type PnLTotals is not JSON serializable\n", "record": {"elapsed": {"repr": "0:01:10.505630", "seconds": 70.50563}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "broadcast", "level": {"icon": "❌", "name": "ERROR", "no": 40}, "line": 253, "message": "Failed to broadcast to client: Object of type PnLTotals is not JSON serializable", "module": "live", "name": "app.ws.live", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:29:46.507605+05:30", "timestamp": 1755781186.507605}}}
{"text": "2025-08-21 18:29:46.509 | ERROR    | app.ws.live:broadcast:253 - Failed to broadcast to client: Object of type PnLTotals is not JSON serializable\n", "record": {"elapsed": {"repr": "0:01:10.507108", "seconds": 70.507108}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "broadcast", "level": {"icon": "❌", "name": "ERROR", "no": 40}, "line": 253, "message": "Failed to broadcast to client: Object of type PnLTotals is not JSON serializable", "module": "live", "name": "app.ws.live", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:29:46.509083+05:30", "timestamp": 1755781186.509083}}}
{"text": "2025-08-21 18:29:46.509 | ERROR    | app.ws.live:broadcast:253 - Failed to broadcast to client: Object of type PnLTotals is not JSON serializable\n", "record": {"elapsed": {"repr": "0:01:10.507846", "seconds": 70.507846}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "broadcast", "level": {"icon": "❌", "name": "ERROR", "no": 40}, "line": 253, "message": "Failed to broadcast to client: Object of type PnLTotals is not JSON serializable", "module": "live", "name": "app.ws.live", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:29:46.509821+05:30", "timestamp": 1755781186.509821}}}
{"text": "2025-08-21 18:29:46.510 | ERROR    | app.ws.live:broadcast:253 - Failed to broadcast to client: Object of type PnLTotals is not JSON serializable\n", "record": {"elapsed": {"repr": "0:01:10.508641", "seconds": 70.508641}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "broadcast", "level": {"icon": "❌", "name": "ERROR", "no": 40}, "line": 253, "message": "Failed to broadcast to client: Object of type PnLTotals is not JSON serializable", "module": "live", "name": "app.ws.live", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:29:46.510616+05:30", "timestamp": 1755781186.510616}}}
{"text": "2025-08-21 18:29:46.511 | INFO     | app.ws.live:disconnect:234 - WebSocket disconnected: 127.0.0.1\n", "record": {"elapsed": {"repr": "0:01:10.509333", "seconds": 70.509333}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "disconnect", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 234, "message": "WebSocket disconnected: 127.0.0.1", "module": "live", "name": "app.ws.live", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:29:46.511308+05:30", "timestamp": 1755781186.511308}}}
{"text": "2025-08-21 18:29:46.512 | INFO     | app.ws.live:disconnect:234 - WebSocket disconnected: 127.0.0.1\n", "record": {"elapsed": {"repr": "0:01:10.510186", "seconds": 70.510186}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "disconnect", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 234, "message": "WebSocket disconnected: 127.0.0.1", "module": "live", "name": "app.ws.live", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:29:46.512161+05:30", "timestamp": 1755781186.512161}}}
{"text": "2025-08-21 18:29:46.512 | INFO     | app.ws.live:disconnect:234 - WebSocket disconnected: 127.0.0.1\n", "record": {"elapsed": {"repr": "0:01:10.510879", "seconds": 70.510879}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "disconnect", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 234, "message": "WebSocket disconnected: 127.0.0.1", "module": "live", "name": "app.ws.live", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:29:46.512854+05:30", "timestamp": 1755781186.512854}}}
{"text": "2025-08-21 18:29:46.513 | INFO     | app.ws.live:disconnect:234 - WebSocket disconnected: 127.0.0.1\n", "record": {"elapsed": {"repr": "0:01:10.511617", "seconds": 70.511617}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "disconnect", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 234, "message": "WebSocket disconnected: 127.0.0.1", "module": "live", "name": "app.ws.live", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:29:46.513592+05:30", "timestamp": 1755781186.513592}}}
{"text": "2025-08-21 18:29:46.514 | INFO     | app.ws.live:disconnect:234 - WebSocket disconnected: 127.0.0.1\n", "record": {"elapsed": {"repr": "0:01:10.512527", "seconds": 70.512527}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "disconnect", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 234, "message": "WebSocket disconnected: 127.0.0.1", "module": "live", "name": "app.ws.live", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:29:46.514502+05:30", "timestamp": 1755781186.514502}}}
{"text": "2025-08-21 18:29:46.515 | INFO     | app.ws.live:disconnect:234 - WebSocket disconnected: 127.0.0.1\n", "record": {"elapsed": {"repr": "0:01:10.513252", "seconds": 70.513252}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "disconnect", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 234, "message": "WebSocket disconnected: 127.0.0.1", "module": "live", "name": "app.ws.live", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:29:46.515227+05:30", "timestamp": 1755781186.515227}}}
{"text": "2025-08-21 18:29:46.516 | DEBUG    | app.ws.live:emit_delta:408 - Emitted pnl delta: seq=96\n", "record": {"elapsed": {"repr": "0:01:10.514196", "seconds": 70.514196}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "emit_delta", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 408, "message": "Emitted pnl delta: seq=96", "module": "live", "name": "app.ws.live", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:29:46.516171+05:30", "timestamp": 1755781186.516171}}}
{"text": "2025-08-21 18:29:46.527 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:01:10.525334", "seconds": 70.525334}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 17632, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 18:29:46.527309+05:30", "timestamp": 1755781186.527309}}}
{"text": "2025-08-21 18:29:46.528 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:01:10.526920", "seconds": 70.52692}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 17632, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 18:29:46.528895+05:30", "timestamp": 1755781186.528895}}}
{"text": "2025-08-21 18:29:46.530 | INFO     | app.ws.live:connect:226 - WebSocket connected: 127.0.0.1\n", "record": {"elapsed": {"repr": "0:01:10.528092", "seconds": 70.528092}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "connect", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 226, "message": "WebSocket connected: 127.0.0.1", "module": "live", "name": "app.ws.live", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:29:46.530067+05:30", "timestamp": 1755781186.530067}}}
{"text": "2025-08-21 18:29:46.530 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:01:10.528368", "seconds": 70.528368}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 17632, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 18:29:46.530343+05:30", "timestamp": 1755781186.530343}}}
{"text": "2025-08-21 18:29:46.531 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:01:10.529519", "seconds": 70.529519}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 17632, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 18:29:46.531494+05:30", "timestamp": 1755781186.531494}}}
{"text": "2025-08-21 18:29:46.532 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:01:10.530062", "seconds": 70.530062}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 17632, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 18:29:46.532037+05:30", "timestamp": 1755781186.532037}}}
{"text": "2025-08-21 18:29:46.532 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:01:10.530831", "seconds": 70.530831}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 17632, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 18:29:46.532806+05:30", "timestamp": 1755781186.532806}}}
{"text": "2025-08-21 18:29:46.533 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:01:10.531482", "seconds": 70.531482}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 17632, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 18:29:46.533457+05:30", "timestamp": 1755781186.533457}}}
{"text": "2025-08-21 18:29:46.534 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:01:10.532079", "seconds": 70.532079}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 17632, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 18:29:46.534054+05:30", "timestamp": 1755781186.534054}}}
{"text": "2025-08-21 18:29:46.534 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:01:10.532767", "seconds": 70.532767}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 17632, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 18:29:46.534742+05:30", "timestamp": 1755781186.534742}}}
{"text": "2025-08-21 18:29:46.535 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:01:10.533426", "seconds": 70.533426}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 17632, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 18:29:46.535401+05:30", "timestamp": 1755781186.535401}}}
{"text": "2025-08-21 18:29:46.625 | INFO     | app.ws.live:connect:226 - WebSocket connected: 127.0.0.1\n", "record": {"elapsed": {"repr": "0:01:10.623923", "seconds": 70.623923}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "connect", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 226, "message": "WebSocket connected: 127.0.0.1", "module": "live", "name": "app.ws.live", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:29:46.625898+05:30", "timestamp": 1755781186.625898}}}
{"text": "2025-08-21 18:29:46.640 | INFO     | app.ws.live:connect:226 - WebSocket connected: 127.0.0.1\n", "record": {"elapsed": {"repr": "0:01:10.638522", "seconds": 70.638522}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "connect", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 226, "message": "WebSocket connected: 127.0.0.1", "module": "live", "name": "app.ws.live", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:29:46.640497+05:30", "timestamp": 1755781186.640497}}}
{"text": "2025-08-21 18:29:46.992 | INFO     | app.ws.live:connect:226 - WebSocket connected: 127.0.0.1\n", "record": {"elapsed": {"repr": "0:01:10.990070", "seconds": 70.99007}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "connect", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 226, "message": "WebSocket connected: 127.0.0.1", "module": "live", "name": "app.ws.live", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:29:46.992045+05:30", "timestamp": 1755781186.992045}}}
{"text": "2025-08-21 18:29:47.018 | INFO     | app.ws.live:connect:226 - WebSocket connected: 127.0.0.1\n", "record": {"elapsed": {"repr": "0:01:11.016491", "seconds": 71.016491}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "connect", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 226, "message": "WebSocket connected: 127.0.0.1", "module": "live", "name": "app.ws.live", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:29:47.018466+05:30", "timestamp": 1755781187.018466}}}
{"text": "2025-08-21 18:29:47.035 | INFO     | app.ws.live:connect:226 - WebSocket connected: 127.0.0.1\n", "record": {"elapsed": {"repr": "0:01:11.033393", "seconds": 71.033393}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "connect", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 226, "message": "WebSocket connected: 127.0.0.1", "module": "live", "name": "app.ws.live", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:29:47.035368+05:30", "timestamp": 1755781187.035368}}}
{"text": "2025-08-21 18:29:47.050 | DEBUG    | app.ws.live:emit_delta:408 - Emitted positions delta: seq=97\n", "record": {"elapsed": {"repr": "0:01:11.048104", "seconds": 71.048104}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "emit_delta", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 408, "message": "Emitted positions delta: seq=97", "module": "live", "name": "app.ws.live", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:29:47.050079+05:30", "timestamp": 1755781187.050079}}}
{"text": "2025-08-21 18:29:47.053 | DEBUG    | app.ws.live:emit_summary:430 - Emitted positions summary: seq=98\n", "record": {"elapsed": {"repr": "0:01:11.051034", "seconds": 71.051034}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "emit_summary", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 430, "message": "Emitted positions summary: seq=98", "module": "live", "name": "app.ws.live", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:29:47.053009+05:30", "timestamp": 1755781187.053009}}}
{"text": "2025-08-21 18:29:47.331 | INFO     | app.ws.live:connect:226 - WebSocket connected: 127.0.0.1\n", "record": {"elapsed": {"repr": "0:01:11.329812", "seconds": 71.329812}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "connect", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 226, "message": "WebSocket connected: 127.0.0.1", "module": "live", "name": "app.ws.live", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:29:47.331787+05:30", "timestamp": 1755781187.331787}}}
{"text": "2025-08-21 18:29:47.363 | INFO     | app.ws.live:connect:226 - WebSocket connected: 127.0.0.1\n", "record": {"elapsed": {"repr": "0:01:11.361328", "seconds": 71.361328}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "connect", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 226, "message": "WebSocket connected: 127.0.0.1", "module": "live", "name": "app.ws.live", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:29:47.363303+05:30", "timestamp": 1755781187.363303}}}
{"text": "2025-08-21 18:29:47.386 | INFO     | app.ws.live:connect:226 - WebSocket connected: 127.0.0.1\n", "record": {"elapsed": {"repr": "0:01:11.384929", "seconds": 71.384929}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "connect", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 226, "message": "WebSocket connected: 127.0.0.1", "module": "live", "name": "app.ws.live", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:29:47.386904+05:30", "timestamp": 1755781187.386904}}}
{"text": "2025-08-21 18:29:47.695 | INFO     | app.ws.live:connect:226 - WebSocket connected: 127.0.0.1\n", "record": {"elapsed": {"repr": "0:01:11.693511", "seconds": 71.693511}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "connect", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 226, "message": "WebSocket connected: 127.0.0.1", "module": "live", "name": "app.ws.live", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:29:47.695486+05:30", "timestamp": 1755781187.695486}}}
{"text": "2025-08-21 18:29:47.715 | INFO     | app.ws.live:connect:226 - WebSocket connected: 127.0.0.1\n", "record": {"elapsed": {"repr": "0:01:11.713231", "seconds": 71.713231}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "connect", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 226, "message": "WebSocket connected: 127.0.0.1", "module": "live", "name": "app.ws.live", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:29:47.715206+05:30", "timestamp": 1755781187.715206}}}
{"text": "2025-08-21 18:29:47.732 | INFO     | app.ws.live:connect:226 - WebSocket connected: 127.0.0.1\n", "record": {"elapsed": {"repr": "0:01:11.730922", "seconds": 71.730922}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "connect", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 226, "message": "WebSocket connected: 127.0.0.1", "module": "live", "name": "app.ws.live", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:29:47.732897+05:30", "timestamp": 1755781187.732897}}}
{"text": "2025-08-21 18:29:47.925 | DEBUG    | app.ws.live:emit_summary:430 - Emitted orders summary: seq=99\n", "record": {"elapsed": {"repr": "0:01:11.923431", "seconds": 71.923431}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "emit_summary", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 430, "message": "Emitted orders summary: seq=99", "module": "live", "name": "app.ws.live", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:29:47.925406+05:30", "timestamp": 1755781187.925406}}}
{"text": "2025-08-21 18:29:48.038 | INFO     | app.ws.live:connect:226 - WebSocket connected: 127.0.0.1\n", "record": {"elapsed": {"repr": "0:01:12.036123", "seconds": 72.036123}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "connect", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 226, "message": "WebSocket connected: 127.0.0.1", "module": "live", "name": "app.ws.live", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:29:48.038098+05:30", "timestamp": 1755781188.038098}}}
{"text": "2025-08-21 18:29:48.056 | INFO     | app.ws.live:connect:226 - WebSocket connected: 127.0.0.1\n", "record": {"elapsed": {"repr": "0:01:12.054128", "seconds": 72.054128}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "connect", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 226, "message": "WebSocket connected: 127.0.0.1", "module": "live", "name": "app.ws.live", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:29:48.056103+05:30", "timestamp": 1755781188.056103}}}
{"text": "2025-08-21 18:29:48.071 | INFO     | app.ws.live:connect:226 - WebSocket connected: 127.0.0.1\n", "record": {"elapsed": {"repr": "0:01:12.069213", "seconds": 72.069213}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "connect", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 226, "message": "WebSocket connected: 127.0.0.1", "module": "live", "name": "app.ws.live", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:29:48.071188+05:30", "timestamp": 1755781188.071188}}}
{"text": "2025-08-21 18:29:48.110 | INFO     | app.services.dhan_client:get_pnl:489 - Starting accurate P&L calculation\n", "record": {"elapsed": {"repr": "0:01:12.108883", "seconds": 72.108883}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 489, "message": "Starting accurate P&L calculation", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:29:48.110858+05:30", "timestamp": 1755781188.110858}}}
{"text": "2025-08-21 18:29:48.111 | INFO     | app.services.dhan_client:get_pnl:491 - Fetched 5 positions\n", "record": {"elapsed": {"repr": "0:01:12.109690", "seconds": 72.10969}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 491, "message": "Fetched 5 positions", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:29:48.111665+05:30", "timestamp": 1755781188.111665}}}
{"text": "2025-08-21 18:29:48.112 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for RELIANCE: unrealized=-1062045.32, today=-1062045.32\n", "record": {"elapsed": {"repr": "0:01:12.110524", "seconds": 72.110524}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for RELIANCE: unrealized=-1062045.32, today=-1062045.32", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:29:48.112499+05:30", "timestamp": 1755781188.112499}}}
{"text": "2025-08-21 18:29:48.113 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for TCS: unrealized=968523.13, today=968523.13\n", "record": {"elapsed": {"repr": "0:01:12.111273", "seconds": 72.111273}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for TCS: unrealized=968523.13, today=968523.13", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:29:48.113248+05:30", "timestamp": 1755781188.113248}}}
{"text": "2025-08-21 18:29:48.114 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for HDFC: unrealized=-2104377.96, today=-2104377.96\n", "record": {"elapsed": {"repr": "0:01:12.112282", "seconds": 72.112282}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for HDFC: unrealized=-2104377.96, today=-2104377.96", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:29:48.114257+05:30", "timestamp": 1755781188.114257}}}
{"text": "2025-08-21 18:29:48.114 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for INFY: unrealized=191473.54, today=191473.54\n", "record": {"elapsed": {"repr": "0:01:12.113015", "seconds": 72.113015}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for INFY: unrealized=191473.54, today=191473.54", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:29:48.114990+05:30", "timestamp": 1755781188.11499}}}
{"text": "2025-08-21 18:29:48.115 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for ICICIBANK: unrealized=396200.14, today=396200.14\n", "record": {"elapsed": {"repr": "0:01:12.113855", "seconds": 72.113855}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for ICICIBANK: unrealized=396200.14, today=396200.14", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:29:48.115830+05:30", "timestamp": 1755781188.11583}}}
{"text": "2025-08-21 18:29:48.116 | INFO     | app.services.dhan_client:get_pnl:545 - Calculated totals - realized: 0.0, unrealized: -1610226.47, day: -1610226.47\n", "record": {"elapsed": {"repr": "0:01:12.114575", "seconds": 72.114575}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 545, "message": "Calculated totals - realized: 0.0, unrealized: -1610226.47, day: -1610226.47", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:29:48.116550+05:30", "timestamp": 1755781188.11655}}}
{"text": "2025-08-21 18:29:48.117 | DEBUG    | app.services.dhan_client:get_pnl:554 - PnL consistency check passed: drift=₹0.00\n", "record": {"elapsed": {"repr": "0:01:12.115446", "seconds": 72.115446}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 554, "message": "PnL consistency check passed: drift=₹0.00", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:29:48.117421+05:30", "timestamp": 1755781188.117421}}}
{"text": "2025-08-21 18:29:48.118 | DEBUG    | app.services.dhan_client:get_pnl:558 - Creating PnLTotals...\n", "record": {"elapsed": {"repr": "0:01:12.116145", "seconds": 72.116145}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 558, "message": "Creating PnLTotals...", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:29:48.118120+05:30", "timestamp": 1755781188.11812}}}
{"text": "2025-08-21 18:29:48.118 | DEBUG    | app.services.dhan_client:get_pnl:565 - PnLTotals created successfully\n", "record": {"elapsed": {"repr": "0:01:12.116764", "seconds": 72.116764}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 565, "message": "PnLTotals created successfully", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:29:48.118739+05:30", "timestamp": 1755781188.118739}}}
{"text": "2025-08-21 18:29:48.119 | DEBUG    | app.services.dhan_client:get_pnl:574 - Creating PnL model...\n", "record": {"elapsed": {"repr": "0:01:12.117478", "seconds": 72.117478}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 574, "message": "Creating PnL model...", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:29:48.119453+05:30", "timestamp": 1755781188.119453}}}
{"text": "2025-08-21 18:29:48.120 | DEBUG    | app.services.dhan_client:get_pnl:575 - Model fields: totals=<class 'app.models.schemas.PnLTotals'>, perSymbol=5, updated_at=2025-08-21 18:29:48.112388+05:30, trading_day=2025-08-21\n", "record": {"elapsed": {"repr": "0:01:12.118296", "seconds": 72.118296}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 575, "message": "Model fields: totals=<class 'app.models.schemas.PnLTotals'>, perSymbol=5, updated_at=2025-08-21 18:29:48.112388+05:30, trading_day=2025-08-21", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:29:48.120271+05:30", "timestamp": 1755781188.120271}}}
{"text": "2025-08-21 18:29:48.122 | DEBUG    | app.services.dhan_client:get_pnl:584 - Created PnL model: totals=PnLTotals(realized=0.0, unrealized=-1610226.47, day=-1610226.47, currency='INR') per_symbol=[PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1543, avg=1999.73, ltp=1311.43, unrealized=-1062045.32, today_pnl=-1062045.32), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=613, avg=1989.23, ltp=409.26, unrealized=968523.13, today_pnl=968523.13), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=1709, avg=1838.62, ltp=607.27, unrealized=-2104377.96, today_pnl=-2104377.96), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=697, avg=852.74, ltp=578.03, unrealized=191473.54, today_pnl=191473.54), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=255, avg=915.17, ltp=2468.9, unrealized=396200.14, today_pnl=396200.14)] updated_at=datetime.datetime(2025, 8, 21, 18, 29, 48, 112388, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))) trading_day='2025-08-21'\n", "record": {"elapsed": {"repr": "0:01:12.120104", "seconds": 72.120104}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 584, "message": "Created PnL model: totals=PnLTotals(realized=0.0, unrealized=-1610226.47, day=-1610226.47, currency='INR') per_symbol=[PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1543, avg=1999.73, ltp=1311.43, unrealized=-1062045.32, today_pnl=-1062045.32), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=613, avg=1989.23, ltp=409.26, unrealized=968523.13, today_pnl=968523.13), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=1709, avg=1838.62, ltp=607.27, unrealized=-2104377.96, today_pnl=-2104377.96), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=697, avg=852.74, ltp=578.03, unrealized=191473.54, today_pnl=191473.54), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=255, avg=915.17, ltp=2468.9, unrealized=396200.14, today_pnl=396200.14)] updated_at=datetime.datetime(2025, 8, 21, 18, 29, 48, 112388, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))) trading_day='2025-08-21'", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:29:48.122079+05:30", "timestamp": 1755781188.122079}}}
{"text": "2025-08-21 18:29:48.123 | DEBUG    | app.services.dhan_client:get_pnl:585 - PnL model fields: {'totals': PnLTotals(realized=0.0, unrealized=-1610226.47, day=-1610226.47, currency='INR'), 'per_symbol': [PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1543, avg=1999.73, ltp=1311.43, unrealized=-1062045.32, today_pnl=-1062045.32), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=613, avg=1989.23, ltp=409.26, unrealized=968523.13, today_pnl=968523.13), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=1709, avg=1838.62, ltp=607.27, unrealized=-2104377.96, today_pnl=-2104377.96), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=697, avg=852.74, ltp=578.03, unrealized=191473.54, today_pnl=191473.54), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=255, avg=915.17, ltp=2468.9, unrealized=396200.14, today_pnl=396200.14)], 'updated_at': datetime.datetime(2025, 8, 21, 18, 29, 48, 112388, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))), 'trading_day': '2025-08-21'}\n", "record": {"elapsed": {"repr": "0:01:12.121489", "seconds": 72.121489}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 585, "message": "PnL model fields: {'totals': PnLTotals(realized=0.0, unrealized=-1610226.47, day=-1610226.47, currency='INR'), 'per_symbol': [PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1543, avg=1999.73, ltp=1311.43, unrealized=-1062045.32, today_pnl=-1062045.32), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=613, avg=1989.23, ltp=409.26, unrealized=968523.13, today_pnl=968523.13), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=1709, avg=1838.62, ltp=607.27, unrealized=-2104377.96, today_pnl=-2104377.96), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=697, avg=852.74, ltp=578.03, unrealized=191473.54, today_pnl=191473.54), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=255, avg=915.17, ltp=2468.9, unrealized=396200.14, today_pnl=396200.14)], 'updated_at': datetime.datetime(2025, 8, 21, 18, 29, 48, 112388, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))), 'trading_day': '2025-08-21'}", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:29:48.123464+05:30", "timestamp": 1755781188.123464}}}
{"text": "2025-08-21 18:29:48.124 | INFO     | app.services.dhan_client:get_pnl:587 - P&L calculation completed successfully: 5 symbols, unrealized=₹-1610226.47\n", "record": {"elapsed": {"repr": "0:01:12.122659", "seconds": 72.122659}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 587, "message": "P&L calculation completed successfully: 5 symbols, unrealized=₹-1610226.47", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:29:48.124634+05:30", "timestamp": 1755781188.124634}}}
{"text": "2025-08-21 18:29:48.125 | ERROR    | app.ws.live:broadcast:253 - Failed to broadcast to client: Object of type PnLTotals is not JSON serializable\n", "record": {"elapsed": {"repr": "0:01:12.123734", "seconds": 72.123734}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "broadcast", "level": {"icon": "❌", "name": "ERROR", "no": 40}, "line": 253, "message": "Failed to broadcast to client: Object of type PnLTotals is not JSON serializable", "module": "live", "name": "app.ws.live", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:29:48.125709+05:30", "timestamp": 1755781188.125709}}}
{"text": "2025-08-21 18:29:48.127 | ERROR    | app.ws.live:broadcast:253 - Failed to broadcast to client: Object of type PnLTotals is not JSON serializable\n", "record": {"elapsed": {"repr": "0:01:12.125469", "seconds": 72.125469}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "broadcast", "level": {"icon": "❌", "name": "ERROR", "no": 40}, "line": 253, "message": "Failed to broadcast to client: Object of type PnLTotals is not JSON serializable", "module": "live", "name": "app.ws.live", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:29:48.127444+05:30", "timestamp": 1755781188.127444}}}
{"text": "2025-08-21 18:29:48.128 | ERROR    | app.ws.live:broadcast:253 - Failed to broadcast to client: Object of type PnLTotals is not JSON serializable\n", "record": {"elapsed": {"repr": "0:01:12.126801", "seconds": 72.126801}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "broadcast", "level": {"icon": "❌", "name": "ERROR", "no": 40}, "line": 253, "message": "Failed to broadcast to client: Object of type PnLTotals is not JSON serializable", "module": "live", "name": "app.ws.live", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:29:48.128776+05:30", "timestamp": 1755781188.128776}}}
{"text": "2025-08-21 18:29:48.130 | ERROR    | app.ws.live:broadcast:253 - Failed to broadcast to client: Object of type PnLTotals is not JSON serializable\n", "record": {"elapsed": {"repr": "0:01:12.128269", "seconds": 72.128269}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "broadcast", "level": {"icon": "❌", "name": "ERROR", "no": 40}, "line": 253, "message": "Failed to broadcast to client: Object of type PnLTotals is not JSON serializable", "module": "live", "name": "app.ws.live", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:29:48.130244+05:30", "timestamp": 1755781188.130244}}}
{"text": "2025-08-21 18:29:48.131 | ERROR    | app.ws.live:broadcast:253 - Failed to broadcast to client: Object of type PnLTotals is not JSON serializable\n", "record": {"elapsed": {"repr": "0:01:12.129701", "seconds": 72.129701}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "broadcast", "level": {"icon": "❌", "name": "ERROR", "no": 40}, "line": 253, "message": "Failed to broadcast to client: Object of type PnLTotals is not JSON serializable", "module": "live", "name": "app.ws.live", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:29:48.131676+05:30", "timestamp": 1755781188.131676}}}
{"text": "2025-08-21 18:29:48.132 | ERROR    | app.ws.live:broadcast:253 - Failed to broadcast to client: Object of type PnLTotals is not JSON serializable\n", "record": {"elapsed": {"repr": "0:01:12.130511", "seconds": 72.130511}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "broadcast", "level": {"icon": "❌", "name": "ERROR", "no": 40}, "line": 253, "message": "Failed to broadcast to client: Object of type PnLTotals is not JSON serializable", "module": "live", "name": "app.ws.live", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:29:48.132486+05:30", "timestamp": 1755781188.132486}}}
{"text": "2025-08-21 18:29:48.133 | ERROR    | app.ws.live:broadcast:253 - Failed to broadcast to client: Object of type PnLTotals is not JSON serializable\n", "record": {"elapsed": {"repr": "0:01:12.131486", "seconds": 72.131486}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "broadcast", "level": {"icon": "❌", "name": "ERROR", "no": 40}, "line": 253, "message": "Failed to broadcast to client: Object of type PnLTotals is not JSON serializable", "module": "live", "name": "app.ws.live", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:29:48.133461+05:30", "timestamp": 1755781188.133461}}}
{"text": "2025-08-21 18:29:48.134 | ERROR    | app.ws.live:broadcast:253 - Failed to broadcast to client: Object of type PnLTotals is not JSON serializable\n", "record": {"elapsed": {"repr": "0:01:12.132316", "seconds": 72.132316}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "broadcast", "level": {"icon": "❌", "name": "ERROR", "no": 40}, "line": 253, "message": "Failed to broadcast to client: Object of type PnLTotals is not JSON serializable", "module": "live", "name": "app.ws.live", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:29:48.134291+05:30", "timestamp": 1755781188.134291}}}
{"text": "2025-08-21 18:29:48.134 | ERROR    | app.ws.live:broadcast:253 - Failed to broadcast to client: Object of type PnLTotals is not JSON serializable\n", "record": {"elapsed": {"repr": "0:01:12.133015", "seconds": 72.133015}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "broadcast", "level": {"icon": "❌", "name": "ERROR", "no": 40}, "line": 253, "message": "Failed to broadcast to client: Object of type PnLTotals is not JSON serializable", "module": "live", "name": "app.ws.live", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:29:48.134990+05:30", "timestamp": 1755781188.13499}}}
{"text": "2025-08-21 18:29:48.135 | ERROR    | app.ws.live:broadcast:253 - Failed to broadcast to client: Object of type PnLTotals is not JSON serializable\n", "record": {"elapsed": {"repr": "0:01:12.133676", "seconds": 72.133676}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "broadcast", "level": {"icon": "❌", "name": "ERROR", "no": 40}, "line": 253, "message": "Failed to broadcast to client: Object of type PnLTotals is not JSON serializable", "module": "live", "name": "app.ws.live", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:29:48.135651+05:30", "timestamp": 1755781188.135651}}}
{"text": "2025-08-21 18:29:48.136 | ERROR    | app.ws.live:broadcast:253 - Failed to broadcast to client: Object of type PnLTotals is not JSON serializable\n", "record": {"elapsed": {"repr": "0:01:12.134444", "seconds": 72.134444}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "broadcast", "level": {"icon": "❌", "name": "ERROR", "no": 40}, "line": 253, "message": "Failed to broadcast to client: Object of type PnLTotals is not JSON serializable", "module": "live", "name": "app.ws.live", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:29:48.136419+05:30", "timestamp": 1755781188.136419}}}
{"text": "2025-08-21 18:29:48.137 | ERROR    | app.ws.live:broadcast:253 - Failed to broadcast to client: Object of type PnLTotals is not JSON serializable\n", "record": {"elapsed": {"repr": "0:01:12.135441", "seconds": 72.135441}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "broadcast", "level": {"icon": "❌", "name": "ERROR", "no": 40}, "line": 253, "message": "Failed to broadcast to client: Object of type PnLTotals is not JSON serializable", "module": "live", "name": "app.ws.live", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:29:48.137416+05:30", "timestamp": 1755781188.137416}}}
{"text": "2025-08-21 18:29:48.138 | ERROR    | app.ws.live:broadcast:253 - Failed to broadcast to client: Object of type PnLTotals is not JSON serializable\n", "record": {"elapsed": {"repr": "0:01:12.136170", "seconds": 72.13617}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "broadcast", "level": {"icon": "❌", "name": "ERROR", "no": 40}, "line": 253, "message": "Failed to broadcast to client: Object of type PnLTotals is not JSON serializable", "module": "live", "name": "app.ws.live", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:29:48.138145+05:30", "timestamp": 1755781188.138145}}}
{"text": "2025-08-21 18:29:48.139 | ERROR    | app.ws.live:broadcast:253 - Failed to broadcast to client: Object of type PnLTotals is not JSON serializable\n", "record": {"elapsed": {"repr": "0:01:12.137081", "seconds": 72.137081}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "broadcast", "level": {"icon": "❌", "name": "ERROR", "no": 40}, "line": 253, "message": "Failed to broadcast to client: Object of type PnLTotals is not JSON serializable", "module": "live", "name": "app.ws.live", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:29:48.139056+05:30", "timestamp": 1755781188.139056}}}
{"text": "2025-08-21 18:29:48.139 | ERROR    | app.ws.live:broadcast:253 - Failed to broadcast to client: Object of type PnLTotals is not JSON serializable\n", "record": {"elapsed": {"repr": "0:01:12.137782", "seconds": 72.137782}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "broadcast", "level": {"icon": "❌", "name": "ERROR", "no": 40}, "line": 253, "message": "Failed to broadcast to client: Object of type PnLTotals is not JSON serializable", "module": "live", "name": "app.ws.live", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:29:48.139757+05:30", "timestamp": 1755781188.139757}}}
{"text": "2025-08-21 18:29:48.140 | INFO     | app.ws.live:disconnect:234 - WebSocket disconnected: 127.0.0.1\n", "record": {"elapsed": {"repr": "0:01:12.138410", "seconds": 72.13841}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "disconnect", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 234, "message": "WebSocket disconnected: 127.0.0.1", "module": "live", "name": "app.ws.live", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:29:48.140385+05:30", "timestamp": 1755781188.140385}}}
{"text": "2025-08-21 18:29:48.141 | INFO     | app.ws.live:disconnect:234 - WebSocket disconnected: 127.0.0.1\n", "record": {"elapsed": {"repr": "0:01:12.139253", "seconds": 72.139253}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "disconnect", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 234, "message": "WebSocket disconnected: 127.0.0.1", "module": "live", "name": "app.ws.live", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:29:48.141228+05:30", "timestamp": 1755781188.141228}}}
{"text": "2025-08-21 18:29:48.142 | INFO     | app.ws.live:disconnect:234 - WebSocket disconnected: 127.0.0.1\n", "record": {"elapsed": {"repr": "0:01:12.140052", "seconds": 72.140052}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "disconnect", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 234, "message": "WebSocket disconnected: 127.0.0.1", "module": "live", "name": "app.ws.live", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:29:48.142027+05:30", "timestamp": 1755781188.142027}}}
{"text": "2025-08-21 18:29:48.142 | INFO     | app.ws.live:disconnect:234 - WebSocket disconnected: 127.0.0.1\n", "record": {"elapsed": {"repr": "0:01:12.140773", "seconds": 72.140773}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "disconnect", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 234, "message": "WebSocket disconnected: 127.0.0.1", "module": "live", "name": "app.ws.live", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:29:48.142748+05:30", "timestamp": 1755781188.142748}}}
{"text": "2025-08-21 18:29:48.143 | INFO     | app.ws.live:disconnect:234 - WebSocket disconnected: 127.0.0.1\n", "record": {"elapsed": {"repr": "0:01:12.141494", "seconds": 72.141494}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "disconnect", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 234, "message": "WebSocket disconnected: 127.0.0.1", "module": "live", "name": "app.ws.live", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:29:48.143469+05:30", "timestamp": 1755781188.143469}}}
{"text": "2025-08-21 18:29:48.144 | INFO     | app.ws.live:disconnect:234 - WebSocket disconnected: 127.0.0.1\n", "record": {"elapsed": {"repr": "0:01:12.142105", "seconds": 72.142105}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "disconnect", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 234, "message": "WebSocket disconnected: 127.0.0.1", "module": "live", "name": "app.ws.live", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:29:48.144080+05:30", "timestamp": 1755781188.14408}}}
{"text": "2025-08-21 18:29:48.144 | INFO     | app.ws.live:disconnect:234 - WebSocket disconnected: 127.0.0.1\n", "record": {"elapsed": {"repr": "0:01:12.142992", "seconds": 72.142992}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "disconnect", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 234, "message": "WebSocket disconnected: 127.0.0.1", "module": "live", "name": "app.ws.live", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:29:48.144967+05:30", "timestamp": 1755781188.144967}}}
{"text": "2025-08-21 18:29:48.145 | INFO     | app.ws.live:disconnect:234 - WebSocket disconnected: 127.0.0.1\n", "record": {"elapsed": {"repr": "0:01:12.143772", "seconds": 72.143772}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "disconnect", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 234, "message": "WebSocket disconnected: 127.0.0.1", "module": "live", "name": "app.ws.live", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:29:48.145747+05:30", "timestamp": 1755781188.145747}}}
{"text": "2025-08-21 18:29:48.147 | INFO     | app.ws.live:disconnect:234 - WebSocket disconnected: 127.0.0.1\n", "record": {"elapsed": {"repr": "0:01:12.145218", "seconds": 72.145218}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "disconnect", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 234, "message": "WebSocket disconnected: 127.0.0.1", "module": "live", "name": "app.ws.live", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:29:48.147193+05:30", "timestamp": 1755781188.147193}}}
{"text": "2025-08-21 18:29:48.148 | INFO     | app.ws.live:disconnect:234 - WebSocket disconnected: 127.0.0.1\n", "record": {"elapsed": {"repr": "0:01:12.146370", "seconds": 72.14637}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "disconnect", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 234, "message": "WebSocket disconnected: 127.0.0.1", "module": "live", "name": "app.ws.live", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:29:48.148345+05:30", "timestamp": 1755781188.148345}}}
{"text": "2025-08-21 18:29:48.149 | INFO     | app.ws.live:disconnect:234 - WebSocket disconnected: 127.0.0.1\n", "record": {"elapsed": {"repr": "0:01:12.147092", "seconds": 72.147092}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "disconnect", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 234, "message": "WebSocket disconnected: 127.0.0.1", "module": "live", "name": "app.ws.live", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:29:48.149067+05:30", "timestamp": 1755781188.149067}}}
{"text": "2025-08-21 18:29:48.150 | INFO     | app.ws.live:disconnect:234 - WebSocket disconnected: 127.0.0.1\n", "record": {"elapsed": {"repr": "0:01:12.148027", "seconds": 72.148027}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "disconnect", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 234, "message": "WebSocket disconnected: 127.0.0.1", "module": "live", "name": "app.ws.live", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:29:48.150002+05:30", "timestamp": 1755781188.150002}}}
{"text": "2025-08-21 18:29:48.150 | INFO     | app.ws.live:disconnect:234 - WebSocket disconnected: 127.0.0.1\n", "record": {"elapsed": {"repr": "0:01:12.148949", "seconds": 72.148949}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "disconnect", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 234, "message": "WebSocket disconnected: 127.0.0.1", "module": "live", "name": "app.ws.live", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:29:48.150924+05:30", "timestamp": 1755781188.150924}}}
{"text": "2025-08-21 18:29:48.152 | INFO     | app.ws.live:disconnect:234 - WebSocket disconnected: 127.0.0.1\n", "record": {"elapsed": {"repr": "0:01:12.150037", "seconds": 72.150037}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "disconnect", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 234, "message": "WebSocket disconnected: 127.0.0.1", "module": "live", "name": "app.ws.live", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:29:48.152012+05:30", "timestamp": 1755781188.152012}}}
{"text": "2025-08-21 18:29:48.153 | INFO     | app.ws.live:disconnect:234 - WebSocket disconnected: 127.0.0.1\n", "record": {"elapsed": {"repr": "0:01:12.151304", "seconds": 72.151304}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "disconnect", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 234, "message": "WebSocket disconnected: 127.0.0.1", "module": "live", "name": "app.ws.live", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:29:48.153279+05:30", "timestamp": 1755781188.153279}}}
{"text": "2025-08-21 18:29:48.153 | DEBUG    | app.ws.live:emit_delta:408 - Emitted pnl delta: seq=100\n", "record": {"elapsed": {"repr": "0:01:12.151966", "seconds": 72.151966}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "emit_delta", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 408, "message": "Emitted pnl delta: seq=100", "module": "live", "name": "app.ws.live", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:29:48.153941+05:30", "timestamp": 1755781188.153941}}}
{"text": "2025-08-21 18:29:48.378 | INFO     | app.ws.live:connect:226 - WebSocket connected: 127.0.0.1\n", "record": {"elapsed": {"repr": "0:01:12.377015", "seconds": 72.377015}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "connect", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 226, "message": "WebSocket connected: 127.0.0.1", "module": "live", "name": "app.ws.live", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:29:48.378990+05:30", "timestamp": 1755781188.37899}}}
{"text": "2025-08-21 18:29:48.401 | INFO     | app.ws.live:connect:226 - WebSocket connected: 127.0.0.1\n", "record": {"elapsed": {"repr": "0:01:12.399979", "seconds": 72.399979}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "connect", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 226, "message": "WebSocket connected: 127.0.0.1", "module": "live", "name": "app.ws.live", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:29:48.401954+05:30", "timestamp": 1755781188.401954}}}
{"text": "2025-08-21 18:29:48.423 | INFO     | app.ws.live:connect:226 - WebSocket connected: 127.0.0.1\n", "record": {"elapsed": {"repr": "0:01:12.421026", "seconds": 72.421026}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "connect", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 226, "message": "WebSocket connected: 127.0.0.1", "module": "live", "name": "app.ws.live", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:29:48.423001+05:30", "timestamp": 1755781188.423001}}}
{"text": "2025-08-21 18:29:48.536 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:01:12.534626", "seconds": 72.534626}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 17632, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 18:29:48.536601+05:30", "timestamp": 1755781188.536601}}}
{"text": "2025-08-21 18:29:48.537 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:01:12.535515", "seconds": 72.535515}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 17632, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 18:29:48.537490+05:30", "timestamp": 1755781188.53749}}}
{"text": "2025-08-21 18:29:48.538 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:01:12.536106", "seconds": 72.536106}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 17632, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 18:29:48.538081+05:30", "timestamp": 1755781188.538081}}}
{"text": "2025-08-21 18:29:48.538 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:01:12.536943", "seconds": 72.536943}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 17632, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 18:29:48.538918+05:30", "timestamp": 1755781188.538918}}}
{"text": "2025-08-21 18:29:48.539 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:01:12.537675", "seconds": 72.537675}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 17632, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 18:29:48.539650+05:30", "timestamp": 1755781188.53965}}}
{"text": "2025-08-21 18:29:48.540 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:01:12.538696", "seconds": 72.538696}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 17632, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 18:29:48.540671+05:30", "timestamp": 1755781188.540671}}}
{"text": "2025-08-21 18:29:48.541 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:01:12.539453", "seconds": 72.539453}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 17632, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 18:29:48.541428+05:30", "timestamp": 1755781188.541428}}}
{"text": "2025-08-21 18:29:48.542 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:01:12.540167", "seconds": 72.540167}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 17632, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 18:29:48.542142+05:30", "timestamp": 1755781188.542142}}}
{"text": "2025-08-21 18:29:48.542 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:01:12.540796", "seconds": 72.540796}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 17632, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 18:29:48.542771+05:30", "timestamp": 1755781188.542771}}}
{"text": "2025-08-21 18:29:48.543 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:01:12.541792", "seconds": 72.541792}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 17632, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 18:29:48.543767+05:30", "timestamp": 1755781188.543767}}}
{"text": "2025-08-21 18:29:48.818 | INFO     | app.ws.live:connect:226 - WebSocket connected: 127.0.0.1\n", "record": {"elapsed": {"repr": "0:01:12.816205", "seconds": 72.816205}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "connect", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 226, "message": "WebSocket connected: 127.0.0.1", "module": "live", "name": "app.ws.live", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:29:48.818180+05:30", "timestamp": 1755781188.81818}}}
{"text": "2025-08-21 18:29:48.820 | DEBUG    | app.ws.live:websocket_endpoint:517 - Received WebSocket message: {'type': 'subscribe', 'channels': ['positions', 'orders', 'holdings', 'trades', 'pnl']}\n", "record": {"elapsed": {"repr": "0:01:12.818371", "seconds": 72.818371}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "websocket_endpoint", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 517, "message": "Received WebSocket message: {'type': 'subscribe', 'channels': ['positions', 'orders', 'holdings', 'trades', 'pnl']}", "module": "live", "name": "app.ws.live", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:29:48.820346+05:30", "timestamp": 1755781188.820346}}}
{"text": "2025-08-21 18:29:48.821 | INFO     | app.ws.live:handle_message:281 - Client 127.0.0.1 subscribed to: ['positions', 'orders', 'holdings', 'trades', 'pnl']\n", "record": {"elapsed": {"repr": "0:01:12.819237", "seconds": 72.819237}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "handle_message", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 281, "message": "Client 127.0.0.1 subscribed to: ['positions', 'orders', 'holdings', 'trades', 'pnl']", "module": "live", "name": "app.ws.live", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:29:48.821212+05:30", "timestamp": 1755781188.821212}}}
{"text": "2025-08-21 18:29:48.839 | INFO     | app.ws.live:connect:226 - WebSocket connected: 127.0.0.1\n", "record": {"elapsed": {"repr": "0:01:12.837452", "seconds": 72.837452}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "connect", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 226, "message": "WebSocket connected: 127.0.0.1", "module": "live", "name": "app.ws.live", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:29:48.839427+05:30", "timestamp": 1755781188.839427}}}
{"text": "2025-08-21 18:29:48.841 | DEBUG    | app.ws.live:websocket_endpoint:517 - Received WebSocket message: {'type': 'subscribe', 'channels': ['positions', 'orders', 'holdings', 'trades', 'pnl']}\n", "record": {"elapsed": {"repr": "0:01:12.839756", "seconds": 72.839756}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "websocket_endpoint", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 517, "message": "Received WebSocket message: {'type': 'subscribe', 'channels': ['positions', 'orders', 'holdings', 'trades', 'pnl']}", "module": "live", "name": "app.ws.live", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:29:48.841731+05:30", "timestamp": 1755781188.841731}}}
{"text": "2025-08-21 18:29:48.842 | INFO     | app.ws.live:handle_message:281 - Client 127.0.0.1 subscribed to: ['positions', 'orders', 'holdings', 'trades', 'pnl']\n", "record": {"elapsed": {"repr": "0:01:12.840583", "seconds": 72.840583}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "handle_message", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 281, "message": "Client 127.0.0.1 subscribed to: ['positions', 'orders', 'holdings', 'trades', 'pnl']", "module": "live", "name": "app.ws.live", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:29:48.842558+05:30", "timestamp": 1755781188.842558}}}
{"text": "2025-08-21 18:29:48.855 | INFO     | app.ws.live:connect:226 - WebSocket connected: 127.0.0.1\n", "record": {"elapsed": {"repr": "0:01:12.853994", "seconds": 72.853994}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "connect", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 226, "message": "WebSocket connected: 127.0.0.1", "module": "live", "name": "app.ws.live", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:29:48.855969+05:30", "timestamp": 1755781188.855969}}}
{"text": "2025-08-21 18:29:48.858 | DEBUG    | app.ws.live:websocket_endpoint:517 - Received WebSocket message: {'type': 'subscribe', 'channels': ['positions', 'orders', 'holdings', 'trades', 'pnl']}\n", "record": {"elapsed": {"repr": "0:01:12.856067", "seconds": 72.856067}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "websocket_endpoint", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 517, "message": "Received WebSocket message: {'type': 'subscribe', 'channels': ['positions', 'orders', 'holdings', 'trades', 'pnl']}", "module": "live", "name": "app.ws.live", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:29:48.858042+05:30", "timestamp": 1755781188.858042}}}
{"text": "2025-08-21 18:29:48.858 | INFO     | app.ws.live:handle_message:281 - Client 127.0.0.1 subscribed to: ['positions', 'orders', 'holdings', 'trades', 'pnl']\n", "record": {"elapsed": {"repr": "0:01:12.856980", "seconds": 72.85698}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "handle_message", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 281, "message": "Client 127.0.0.1 subscribed to: ['positions', 'orders', 'holdings', 'trades', 'pnl']", "module": "live", "name": "app.ws.live", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:29:48.858955+05:30", "timestamp": 1755781188.858955}}}
{"text": "2025-08-21 18:29:48.913 | DEBUG    | app.ws.live:emit_delta:408 - Emitted positions delta: seq=101\n", "record": {"elapsed": {"repr": "0:01:12.911568", "seconds": 72.911568}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "emit_delta", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 408, "message": "Emitted positions delta: seq=101", "module": "live", "name": "app.ws.live", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:29:48.913543+05:30", "timestamp": 1755781188.913543}}}
{"text": "2025-08-21 18:29:48.915 | DEBUG    | app.ws.live:emit_summary:430 - Emitted positions summary: seq=102\n", "record": {"elapsed": {"repr": "0:01:12.913614", "seconds": 72.913614}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "emit_summary", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 430, "message": "Emitted positions summary: seq=102", "module": "live", "name": "app.ws.live", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:29:48.915589+05:30", "timestamp": 1755781188.915589}}}
{"text": "2025-08-21 18:29:49.259 | INFO     | app.ws.live:connect:226 - WebSocket connected: 127.0.0.1\n", "record": {"elapsed": {"repr": "0:01:13.257125", "seconds": 73.257125}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "connect", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 226, "message": "WebSocket connected: 127.0.0.1", "module": "live", "name": "app.ws.live", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:29:49.259100+05:30", "timestamp": 1755781189.2591}}}
{"text": "2025-08-21 18:29:49.309 | INFO     | app.ws.live:connect:226 - WebSocket connected: 127.0.0.1\n", "record": {"elapsed": {"repr": "0:01:13.307485", "seconds": 73.307485}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "connect", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 226, "message": "WebSocket connected: 127.0.0.1", "module": "live", "name": "app.ws.live", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:29:49.309460+05:30", "timestamp": 1755781189.30946}}}
{"text": "2025-08-21 18:29:49.621 | INFO     | app.ws.live:connect:226 - WebSocket connected: 127.0.0.1\n", "record": {"elapsed": {"repr": "0:01:13.619283", "seconds": 73.619283}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "connect", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 226, "message": "WebSocket connected: 127.0.0.1", "module": "live", "name": "app.ws.live", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:29:49.621258+05:30", "timestamp": 1755781189.621258}}}
{"text": "2025-08-21 18:29:49.655 | INFO     | app.ws.live:connect:226 - WebSocket connected: 127.0.0.1\n", "record": {"elapsed": {"repr": "0:01:13.653501", "seconds": 73.653501}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "connect", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 226, "message": "WebSocket connected: 127.0.0.1", "module": "live", "name": "app.ws.live", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:29:49.655476+05:30", "timestamp": 1755781189.655476}}}
{"text": "2025-08-21 18:29:49.700 | INFO     | app.ws.live:connect:226 - WebSocket connected: 127.0.0.1\n", "record": {"elapsed": {"repr": "0:01:13.698835", "seconds": 73.698835}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "connect", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 226, "message": "WebSocket connected: 127.0.0.1", "module": "live", "name": "app.ws.live", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:29:49.700810+05:30", "timestamp": 1755781189.70081}}}
{"text": "2025-08-21 18:29:49.744 | INFO     | app.ws.live:connect:226 - WebSocket connected: 127.0.0.1\n", "record": {"elapsed": {"repr": "0:01:13.742662", "seconds": 73.742662}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "connect", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 226, "message": "WebSocket connected: 127.0.0.1", "module": "live", "name": "app.ws.live", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:29:49.744637+05:30", "timestamp": 1755781189.744637}}}
{"text": "2025-08-21 18:29:49.970 | INFO     | app.ws.live:connect:226 - WebSocket connected: 127.0.0.1\n", "record": {"elapsed": {"repr": "0:01:13.968277", "seconds": 73.968277}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "connect", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 226, "message": "WebSocket connected: 127.0.0.1", "module": "live", "name": "app.ws.live", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:29:49.970252+05:30", "timestamp": 1755781189.970252}}}
{"text": "2025-08-21 18:29:49.972 | DEBUG    | app.ws.live:websocket_endpoint:517 - Received WebSocket message: {'type': 'subscribe', 'channels': ['positions', 'orders', 'holdings', 'trades', 'pnl']}\n", "record": {"elapsed": {"repr": "0:01:13.970990", "seconds": 73.97099}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "websocket_endpoint", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 517, "message": "Received WebSocket message: {'type': 'subscribe', 'channels': ['positions', 'orders', 'holdings', 'trades', 'pnl']}", "module": "live", "name": "app.ws.live", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:29:49.972965+05:30", "timestamp": 1755781189.972965}}}
{"text": "2025-08-21 18:29:49.973 | INFO     | app.ws.live:handle_message:281 - Client 127.0.0.1 subscribed to: ['positions', 'orders', 'holdings', 'trades', 'pnl']\n", "record": {"elapsed": {"repr": "0:01:13.972002", "seconds": 73.972002}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "handle_message", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 281, "message": "Client 127.0.0.1 subscribed to: ['positions', 'orders', 'holdings', 'trades', 'pnl']", "module": "live", "name": "app.ws.live", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:29:49.973977+05:30", "timestamp": 1755781189.973977}}}
{"text": "2025-08-21 18:29:50.066 | INFO     | app.services.dhan_client:get_pnl:489 - Starting accurate P&L calculation\n", "record": {"elapsed": {"repr": "0:01:14.064180", "seconds": 74.06418}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 489, "message": "Starting accurate P&L calculation", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:29:50.066155+05:30", "timestamp": 1755781190.066155}}}
{"text": "2025-08-21 18:29:50.066 | INFO     | app.services.dhan_client:get_pnl:491 - Fetched 5 positions\n", "record": {"elapsed": {"repr": "0:01:14.064917", "seconds": 74.064917}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 491, "message": "Fetched 5 positions", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:29:50.066892+05:30", "timestamp": 1755781190.066892}}}
{"text": "2025-08-21 18:29:50.067 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for RELIANCE: unrealized=-1064325.87, today=-1064325.87\n", "record": {"elapsed": {"repr": "0:01:14.065559", "seconds": 74.065559}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for RELIANCE: unrealized=-1064325.87, today=-1064325.87", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:29:50.067534+05:30", "timestamp": 1755781190.067534}}}
{"text": "2025-08-21 18:29:50.068 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for TCS: unrealized=969137.04, today=969137.04\n", "record": {"elapsed": {"repr": "0:01:14.066197", "seconds": 74.066197}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for TCS: unrealized=969137.04, today=969137.04", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:29:50.068172+05:30", "timestamp": 1755781190.068172}}}
{"text": "2025-08-21 18:29:50.068 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for HDFC: unrealized=-2114718.99, today=-2114718.99\n", "record": {"elapsed": {"repr": "0:01:14.066747", "seconds": 74.066747}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for HDFC: unrealized=-2114718.99, today=-2114718.99", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:29:50.068722+05:30", "timestamp": 1755781190.068722}}}
{"text": "2025-08-21 18:29:50.069 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for INFY: unrealized=185078.9, today=185078.9\n", "record": {"elapsed": {"repr": "0:01:14.067224", "seconds": 74.067224}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for INFY: unrealized=185078.9, today=185078.9", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:29:50.069199+05:30", "timestamp": 1755781190.069199}}}
{"text": "2025-08-21 18:29:50.069 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for ICICIBANK: unrealized=392082.63, today=392082.63\n", "record": {"elapsed": {"repr": "0:01:14.067741", "seconds": 74.067741}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for ICICIBANK: unrealized=392082.63, today=392082.63", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:29:50.069716+05:30", "timestamp": 1755781190.069716}}}
{"text": "2025-08-21 18:29:50.070 | INFO     | app.services.dhan_client:get_pnl:545 - Calculated totals - realized: 0.0, unrealized: -1632746.29, day: -1632746.29\n", "record": {"elapsed": {"repr": "0:01:14.068287", "seconds": 74.068287}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 545, "message": "Calculated totals - realized: 0.0, unrealized: -1632746.29, day: -1632746.29", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:29:50.070262+05:30", "timestamp": 1755781190.070262}}}
{"text": "2025-08-21 18:29:50.070 | DEBUG    | app.services.dhan_client:get_pnl:554 - PnL consistency check passed: drift=₹0.00\n", "record": {"elapsed": {"repr": "0:01:14.069014", "seconds": 74.069014}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 554, "message": "PnL consistency check passed: drift=₹0.00", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:29:50.070989+05:30", "timestamp": 1755781190.070989}}}
{"text": "2025-08-21 18:29:50.071 | DEBUG    | app.services.dhan_client:get_pnl:558 - Creating PnLTotals...\n", "record": {"elapsed": {"repr": "0:01:14.069651", "seconds": 74.069651}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 558, "message": "Creating PnLTotals...", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:29:50.071626+05:30", "timestamp": 1755781190.071626}}}
{"text": "2025-08-21 18:29:50.072 | DEBUG    | app.services.dhan_client:get_pnl:565 - PnLTotals created successfully\n", "record": {"elapsed": {"repr": "0:01:14.070272", "seconds": 74.070272}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 565, "message": "PnLTotals created successfully", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:29:50.072247+05:30", "timestamp": 1755781190.072247}}}
{"text": "2025-08-21 18:29:50.072 | DEBUG    | app.services.dhan_client:get_pnl:574 - Creating PnL model...\n", "record": {"elapsed": {"repr": "0:01:14.070958", "seconds": 74.070958}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 574, "message": "Creating PnL model...", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:29:50.072933+05:30", "timestamp": 1755781190.072933}}}
{"text": "2025-08-21 18:29:50.073 | DEBUG    | app.services.dhan_client:get_pnl:575 - Model fields: totals=<class 'app.models.schemas.PnLTotals'>, perSymbol=5, updated_at=2025-08-21 18:29:50.067443+05:30, trading_day=2025-08-21\n", "record": {"elapsed": {"repr": "0:01:14.071620", "seconds": 74.07162}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 575, "message": "Model fields: totals=<class 'app.models.schemas.PnLTotals'>, perSymbol=5, updated_at=2025-08-21 18:29:50.067443+05:30, trading_day=2025-08-21", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:29:50.073595+05:30", "timestamp": 1755781190.073595}}}
{"text": "2025-08-21 18:29:50.074 | DEBUG    | app.services.dhan_client:get_pnl:584 - Created PnL model: totals=PnLTotals(realized=0.0, unrealized=-1632746.29, day=-1632746.29, currency='INR') per_symbol=[PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1543, avg=1999.73, ltp=1309.95, unrealized=-1064325.87, today_pnl=-1064325.87), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=613, avg=1989.23, ltp=408.26, unrealized=969137.04, today_pnl=969137.04), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=1709, avg=1838.62, ltp=601.22, unrealized=-2114718.99, today_pnl=-2114718.99), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=697, avg=852.74, ltp=587.2, unrealized=185078.9, today_pnl=185078.9), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=255, avg=915.17, ltp=2452.75, unrealized=392082.63, today_pnl=392082.63)] updated_at=datetime.datetime(2025, 8, 21, 18, 29, 50, 67443, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))) trading_day='2025-08-21'\n", "record": {"elapsed": {"repr": "0:01:14.072700", "seconds": 74.0727}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 584, "message": "Created PnL model: totals=PnLTotals(realized=0.0, unrealized=-1632746.29, day=-1632746.29, currency='INR') per_symbol=[PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1543, avg=1999.73, ltp=1309.95, unrealized=-1064325.87, today_pnl=-1064325.87), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=613, avg=1989.23, ltp=408.26, unrealized=969137.04, today_pnl=969137.04), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=1709, avg=1838.62, ltp=601.22, unrealized=-2114718.99, today_pnl=-2114718.99), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=697, avg=852.74, ltp=587.2, unrealized=185078.9, today_pnl=185078.9), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=255, avg=915.17, ltp=2452.75, unrealized=392082.63, today_pnl=392082.63)] updated_at=datetime.datetime(2025, 8, 21, 18, 29, 50, 67443, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))) trading_day='2025-08-21'", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:29:50.074675+05:30", "timestamp": 1755781190.074675}}}
{"text": "2025-08-21 18:29:50.075 | DEBUG    | app.services.dhan_client:get_pnl:585 - PnL model fields: {'totals': PnLTotals(realized=0.0, unrealized=-1632746.29, day=-1632746.29, currency='INR'), 'per_symbol': [PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1543, avg=1999.73, ltp=1309.95, unrealized=-1064325.87, today_pnl=-1064325.87), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=613, avg=1989.23, ltp=408.26, unrealized=969137.04, today_pnl=969137.04), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=1709, avg=1838.62, ltp=601.22, unrealized=-2114718.99, today_pnl=-2114718.99), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=697, avg=852.74, ltp=587.2, unrealized=185078.9, today_pnl=185078.9), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=255, avg=915.17, ltp=2452.75, unrealized=392082.63, today_pnl=392082.63)], 'updated_at': datetime.datetime(2025, 8, 21, 18, 29, 50, 67443, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))), 'trading_day': '2025-08-21'}\n", "record": {"elapsed": {"repr": "0:01:14.073897", "seconds": 74.073897}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 585, "message": "PnL model fields: {'totals': PnLTotals(realized=0.0, unrealized=-1632746.29, day=-1632746.29, currency='INR'), 'per_symbol': [PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1543, avg=1999.73, ltp=1309.95, unrealized=-1064325.87, today_pnl=-1064325.87), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=613, avg=1989.23, ltp=408.26, unrealized=969137.04, today_pnl=969137.04), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=1709, avg=1838.62, ltp=601.22, unrealized=-2114718.99, today_pnl=-2114718.99), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=697, avg=852.74, ltp=587.2, unrealized=185078.9, today_pnl=185078.9), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=255, avg=915.17, ltp=2452.75, unrealized=392082.63, today_pnl=392082.63)], 'updated_at': datetime.datetime(2025, 8, 21, 18, 29, 50, 67443, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))), 'trading_day': '2025-08-21'}", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:29:50.075872+05:30", "timestamp": 1755781190.075872}}}
{"text": "2025-08-21 18:29:50.077 | INFO     | app.services.dhan_client:get_pnl:587 - P&L calculation completed successfully: 5 symbols, unrealized=₹-1632746.29\n", "record": {"elapsed": {"repr": "0:01:14.075154", "seconds": 74.075154}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 587, "message": "P&L calculation completed successfully: 5 symbols, unrealized=₹-1632746.29", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:29:50.077129+05:30", "timestamp": 1755781190.077129}}}
{"text": "2025-08-21 18:29:50.078 | ERROR    | app.ws.live:broadcast:253 - Failed to broadcast to client: Object of type PnLTotals is not JSON serializable\n", "record": {"elapsed": {"repr": "0:01:14.076307", "seconds": 74.076307}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "broadcast", "level": {"icon": "❌", "name": "ERROR", "no": 40}, "line": 253, "message": "Failed to broadcast to client: Object of type PnLTotals is not JSON serializable", "module": "live", "name": "app.ws.live", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:29:50.078282+05:30", "timestamp": 1755781190.078282}}}
{"text": "2025-08-21 18:29:50.078 | ERROR    | app.ws.live:broadcast:253 - Failed to broadcast to client: Object of type PnLTotals is not JSON serializable\n", "record": {"elapsed": {"repr": "0:01:14.076978", "seconds": 74.076978}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "broadcast", "level": {"icon": "❌", "name": "ERROR", "no": 40}, "line": 253, "message": "Failed to broadcast to client: Object of type PnLTotals is not JSON serializable", "module": "live", "name": "app.ws.live", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:29:50.078953+05:30", "timestamp": 1755781190.078953}}}
{"text": "2025-08-21 18:29:50.079 | ERROR    | app.ws.live:broadcast:253 - Failed to broadcast to client: Object of type PnLTotals is not JSON serializable\n", "record": {"elapsed": {"repr": "0:01:14.077706", "seconds": 74.077706}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "broadcast", "level": {"icon": "❌", "name": "ERROR", "no": 40}, "line": 253, "message": "Failed to broadcast to client: Object of type PnLTotals is not JSON serializable", "module": "live", "name": "app.ws.live", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:29:50.079681+05:30", "timestamp": 1755781190.079681}}}
{"text": "2025-08-21 18:29:50.080 | ERROR    | app.ws.live:broadcast:253 - Failed to broadcast to client: Object of type PnLTotals is not JSON serializable\n", "record": {"elapsed": {"repr": "0:01:14.078404", "seconds": 74.078404}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "broadcast", "level": {"icon": "❌", "name": "ERROR", "no": 40}, "line": 253, "message": "Failed to broadcast to client: Object of type PnLTotals is not JSON serializable", "module": "live", "name": "app.ws.live", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:29:50.080379+05:30", "timestamp": 1755781190.080379}}}
{"text": "2025-08-21 18:29:50.081 | ERROR    | app.ws.live:broadcast:253 - Failed to broadcast to client: Object of type PnLTotals is not JSON serializable\n", "record": {"elapsed": {"repr": "0:01:14.079229", "seconds": 74.079229}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "broadcast", "level": {"icon": "❌", "name": "ERROR", "no": 40}, "line": 253, "message": "Failed to broadcast to client: Object of type PnLTotals is not JSON serializable", "module": "live", "name": "app.ws.live", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:29:50.081204+05:30", "timestamp": 1755781190.081204}}}
{"text": "2025-08-21 18:29:50.081 | ERROR    | app.ws.live:broadcast:253 - Failed to broadcast to client: Object of type PnLTotals is not JSON serializable\n", "record": {"elapsed": {"repr": "0:01:14.079695", "seconds": 74.079695}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "broadcast", "level": {"icon": "❌", "name": "ERROR", "no": 40}, "line": 253, "message": "Failed to broadcast to client: Object of type PnLTotals is not JSON serializable", "module": "live", "name": "app.ws.live", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:29:50.081670+05:30", "timestamp": 1755781190.08167}}}
{"text": "2025-08-21 18:29:50.082 | ERROR    | app.ws.live:broadcast:253 - Failed to broadcast to client: Object of type PnLTotals is not JSON serializable\n", "record": {"elapsed": {"repr": "0:01:14.080171", "seconds": 74.080171}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "broadcast", "level": {"icon": "❌", "name": "ERROR", "no": 40}, "line": 253, "message": "Failed to broadcast to client: Object of type PnLTotals is not JSON serializable", "module": "live", "name": "app.ws.live", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:29:50.082146+05:30", "timestamp": 1755781190.082146}}}
{"text": "2025-08-21 18:29:50.082 | ERROR    | app.ws.live:broadcast:253 - Failed to broadcast to client: Object of type PnLTotals is not JSON serializable\n", "record": {"elapsed": {"repr": "0:01:14.080877", "seconds": 74.080877}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "broadcast", "level": {"icon": "❌", "name": "ERROR", "no": 40}, "line": 253, "message": "Failed to broadcast to client: Object of type PnLTotals is not JSON serializable", "module": "live", "name": "app.ws.live", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:29:50.082852+05:30", "timestamp": 1755781190.082852}}}
{"text": "2025-08-21 18:29:50.083 | ERROR    | app.ws.live:broadcast:253 - Failed to broadcast to client: Object of type PnLTotals is not JSON serializable\n", "record": {"elapsed": {"repr": "0:01:14.081860", "seconds": 74.08186}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "broadcast", "level": {"icon": "❌", "name": "ERROR", "no": 40}, "line": 253, "message": "Failed to broadcast to client: Object of type PnLTotals is not JSON serializable", "module": "live", "name": "app.ws.live", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:29:50.083835+05:30", "timestamp": 1755781190.083835}}}
{"text": "2025-08-21 18:29:50.084 | ERROR    | app.ws.live:broadcast:253 - Failed to broadcast to client: Object of type PnLTotals is not JSON serializable\n", "record": {"elapsed": {"repr": "0:01:14.082471", "seconds": 74.082471}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "broadcast", "level": {"icon": "❌", "name": "ERROR", "no": 40}, "line": 253, "message": "Failed to broadcast to client: Object of type PnLTotals is not JSON serializable", "module": "live", "name": "app.ws.live", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:29:50.084446+05:30", "timestamp": 1755781190.084446}}}
{"text": "2025-08-21 18:29:50.085 | ERROR    | app.ws.live:broadcast:253 - Failed to broadcast to client: Object of type PnLTotals is not JSON serializable\n", "record": {"elapsed": {"repr": "0:01:14.083031", "seconds": 74.083031}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "broadcast", "level": {"icon": "❌", "name": "ERROR", "no": 40}, "line": 253, "message": "Failed to broadcast to client: Object of type PnLTotals is not JSON serializable", "module": "live", "name": "app.ws.live", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:29:50.085006+05:30", "timestamp": 1755781190.085006}}}
{"text": "2025-08-21 18:29:50.085 | ERROR    | app.ws.live:broadcast:253 - Failed to broadcast to client: Object of type PnLTotals is not JSON serializable\n", "record": {"elapsed": {"repr": "0:01:14.083627", "seconds": 74.083627}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "broadcast", "level": {"icon": "❌", "name": "ERROR", "no": 40}, "line": 253, "message": "Failed to broadcast to client: Object of type PnLTotals is not JSON serializable", "module": "live", "name": "app.ws.live", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:29:50.085602+05:30", "timestamp": 1755781190.085602}}}
{"text": "2025-08-21 18:29:50.086 | ERROR    | app.ws.live:broadcast:253 - Failed to broadcast to client: Object of type PnLTotals is not JSON serializable\n", "record": {"elapsed": {"repr": "0:01:14.084207", "seconds": 74.084207}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "broadcast", "level": {"icon": "❌", "name": "ERROR", "no": 40}, "line": 253, "message": "Failed to broadcast to client: Object of type PnLTotals is not JSON serializable", "module": "live", "name": "app.ws.live", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:29:50.086182+05:30", "timestamp": 1755781190.086182}}}
{"text": "2025-08-21 18:29:50.086 | INFO     | app.ws.live:disconnect:234 - WebSocket disconnected: 127.0.0.1\n", "record": {"elapsed": {"repr": "0:01:14.084785", "seconds": 74.084785}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "disconnect", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 234, "message": "WebSocket disconnected: 127.0.0.1", "module": "live", "name": "app.ws.live", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:29:50.086760+05:30", "timestamp": 1755781190.08676}}}
{"text": "2025-08-21 18:29:50.087 | INFO     | app.ws.live:disconnect:234 - WebSocket disconnected: 127.0.0.1\n", "record": {"elapsed": {"repr": "0:01:14.085342", "seconds": 74.085342}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "disconnect", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 234, "message": "WebSocket disconnected: 127.0.0.1", "module": "live", "name": "app.ws.live", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:29:50.087317+05:30", "timestamp": 1755781190.087317}}}
{"text": "2025-08-21 18:29:50.088 | INFO     | app.ws.live:disconnect:234 - WebSocket disconnected: 127.0.0.1\n", "record": {"elapsed": {"repr": "0:01:14.086280", "seconds": 74.08628}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "disconnect", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 234, "message": "WebSocket disconnected: 127.0.0.1", "module": "live", "name": "app.ws.live", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:29:50.088255+05:30", "timestamp": 1755781190.088255}}}
{"text": "2025-08-21 18:29:50.088 | INFO     | app.ws.live:disconnect:234 - WebSocket disconnected: 127.0.0.1\n", "record": {"elapsed": {"repr": "0:01:14.086948", "seconds": 74.086948}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "disconnect", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 234, "message": "WebSocket disconnected: 127.0.0.1", "module": "live", "name": "app.ws.live", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:29:50.088923+05:30", "timestamp": 1755781190.088923}}}
{"text": "2025-08-21 18:29:50.090 | INFO     | app.ws.live:disconnect:234 - WebSocket disconnected: 127.0.0.1\n", "record": {"elapsed": {"repr": "0:01:14.088040", "seconds": 74.08804}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "disconnect", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 234, "message": "WebSocket disconnected: 127.0.0.1", "module": "live", "name": "app.ws.live", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:29:50.090015+05:30", "timestamp": 1755781190.090015}}}
{"text": "2025-08-21 18:29:50.090 | INFO     | app.ws.live:disconnect:234 - WebSocket disconnected: 127.0.0.1\n", "record": {"elapsed": {"repr": "0:01:14.088677", "seconds": 74.088677}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "disconnect", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 234, "message": "WebSocket disconnected: 127.0.0.1", "module": "live", "name": "app.ws.live", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:29:50.090652+05:30", "timestamp": 1755781190.090652}}}
{"text": "2025-08-21 18:29:50.091 | INFO     | app.ws.live:disconnect:234 - WebSocket disconnected: 127.0.0.1\n", "record": {"elapsed": {"repr": "0:01:14.089275", "seconds": 74.089275}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "disconnect", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 234, "message": "WebSocket disconnected: 127.0.0.1", "module": "live", "name": "app.ws.live", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:29:50.091250+05:30", "timestamp": 1755781190.09125}}}
{"text": "2025-08-21 18:29:50.091 | INFO     | app.ws.live:disconnect:234 - WebSocket disconnected: 127.0.0.1\n", "record": {"elapsed": {"repr": "0:01:14.089771", "seconds": 74.089771}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "disconnect", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 234, "message": "WebSocket disconnected: 127.0.0.1", "module": "live", "name": "app.ws.live", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:29:50.091746+05:30", "timestamp": 1755781190.091746}}}
{"text": "2025-08-21 18:29:50.092 | INFO     | app.ws.live:disconnect:234 - WebSocket disconnected: 127.0.0.1\n", "record": {"elapsed": {"repr": "0:01:14.090380", "seconds": 74.09038}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "disconnect", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 234, "message": "WebSocket disconnected: 127.0.0.1", "module": "live", "name": "app.ws.live", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:29:50.092355+05:30", "timestamp": 1755781190.092355}}}
{"text": "2025-08-21 18:29:50.092 | INFO     | app.ws.live:disconnect:234 - WebSocket disconnected: 127.0.0.1\n", "record": {"elapsed": {"repr": "0:01:14.090916", "seconds": 74.090916}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "disconnect", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 234, "message": "WebSocket disconnected: 127.0.0.1", "module": "live", "name": "app.ws.live", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:29:50.092891+05:30", "timestamp": 1755781190.092891}}}
{"text": "2025-08-21 18:29:50.093 | INFO     | app.ws.live:disconnect:234 - WebSocket disconnected: 127.0.0.1\n", "record": {"elapsed": {"repr": "0:01:14.091537", "seconds": 74.091537}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "disconnect", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 234, "message": "WebSocket disconnected: 127.0.0.1", "module": "live", "name": "app.ws.live", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:29:50.093512+05:30", "timestamp": 1755781190.093512}}}
{"text": "2025-08-21 18:29:50.094 | INFO     | app.ws.live:disconnect:234 - WebSocket disconnected: 127.0.0.1\n", "record": {"elapsed": {"repr": "0:01:14.092148", "seconds": 74.092148}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "disconnect", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 234, "message": "WebSocket disconnected: 127.0.0.1", "module": "live", "name": "app.ws.live", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:29:50.094123+05:30", "timestamp": 1755781190.094123}}}
{"text": "2025-08-21 18:29:50.094 | INFO     | app.ws.live:disconnect:234 - WebSocket disconnected: 127.0.0.1\n", "record": {"elapsed": {"repr": "0:01:14.092654", "seconds": 74.092654}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "disconnect", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 234, "message": "WebSocket disconnected: 127.0.0.1", "module": "live", "name": "app.ws.live", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:29:50.094629+05:30", "timestamp": 1755781190.094629}}}
{"text": "2025-08-21 18:29:50.095 | DEBUG    | app.ws.live:emit_delta:408 - Emitted pnl delta: seq=103\n", "record": {"elapsed": {"repr": "0:01:14.093273", "seconds": 74.093273}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "emit_delta", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 408, "message": "Emitted pnl delta: seq=103", "module": "live", "name": "app.ws.live", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:29:50.095248+05:30", "timestamp": 1755781190.095248}}}
{"text": "2025-08-21 18:29:50.544 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:01:14.542831", "seconds": 74.542831}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 17632, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 18:29:50.544806+05:30", "timestamp": 1755781190.544806}}}
{"text": "2025-08-21 18:29:50.545 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:01:14.543692", "seconds": 74.543692}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 17632, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 18:29:50.545667+05:30", "timestamp": 1755781190.545667}}}
{"text": "2025-08-21 18:29:50.546 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:01:14.544273", "seconds": 74.544273}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 17632, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 18:29:50.546248+05:30", "timestamp": 1755781190.546248}}}
{"text": "2025-08-21 18:29:50.546 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:01:14.544860", "seconds": 74.54486}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 17632, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 18:29:50.546835+05:30", "timestamp": 1755781190.546835}}}
{"text": "2025-08-21 18:29:50.547 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:01:14.545537", "seconds": 74.545537}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 17632, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 18:29:50.547512+05:30", "timestamp": 1755781190.547512}}}
{"text": "2025-08-21 18:29:50.548 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:01:14.546037", "seconds": 74.546037}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 17632, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 18:29:50.548012+05:30", "timestamp": 1755781190.548012}}}
{"text": "2025-08-21 18:29:50.548 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:01:14.546616", "seconds": 74.546616}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 17632, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 18:29:50.548591+05:30", "timestamp": 1755781190.548591}}}
{"text": "2025-08-21 18:29:50.549 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:01:14.547204", "seconds": 74.547204}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 17632, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 18:29:50.549179+05:30", "timestamp": 1755781190.549179}}}
{"text": "2025-08-21 18:29:50.549 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:01:14.547960", "seconds": 74.54796}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 17632, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 18:29:50.549935+05:30", "timestamp": 1755781190.549935}}}
{"text": "2025-08-21 18:29:50.550 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:01:14.548754", "seconds": 74.548754}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 17632, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 18:29:50.550729+05:30", "timestamp": 1755781190.550729}}}
{"text": "2025-08-21 18:29:50.699 | DEBUG    | app.ws.live:emit_delta:408 - Emitted positions delta: seq=104\n", "record": {"elapsed": {"repr": "0:01:14.697630", "seconds": 74.69763}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "emit_delta", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 408, "message": "Emitted positions delta: seq=104", "module": "live", "name": "app.ws.live", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:29:50.699605+05:30", "timestamp": 1755781190.699605}}}
{"text": "2025-08-21 18:29:51.573 | DEBUG    | app.ws.live:emit_delta:408 - Emitted holdings delta: seq=105\n", "record": {"elapsed": {"repr": "0:01:15.571667", "seconds": 75.571667}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "emit_delta", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 408, "message": "Emitted holdings delta: seq=105", "module": "live", "name": "app.ws.live", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:29:51.573642+05:30", "timestamp": 1755781191.573642}}}
{"text": "2025-08-21 18:29:51.974 | INFO     | app.services.dhan_client:get_pnl:489 - Starting accurate P&L calculation\n", "record": {"elapsed": {"repr": "0:01:15.972185", "seconds": 75.972185}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 489, "message": "Starting accurate P&L calculation", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:29:51.974160+05:30", "timestamp": 1755781191.97416}}}
{"text": "2025-08-21 18:29:51.974 | INFO     | app.services.dhan_client:get_pnl:491 - Fetched 5 positions\n", "record": {"elapsed": {"repr": "0:01:15.972988", "seconds": 75.972988}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 491, "message": "Fetched 5 positions", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:29:51.974963+05:30", "timestamp": 1755781191.974963}}}
{"text": "2025-08-21 18:29:51.975 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for RELIANCE: unrealized=-1030654.28, today=-1030654.28\n", "record": {"elapsed": {"repr": "0:01:15.973594", "seconds": 75.973594}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for RELIANCE: unrealized=-1030654.28, today=-1030654.28", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:29:51.975569+05:30", "timestamp": 1755781191.975569}}}
{"text": "2025-08-21 18:29:51.976 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for TCS: unrealized=973349.99, today=973349.99\n", "record": {"elapsed": {"repr": "0:01:15.974114", "seconds": 75.974114}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for TCS: unrealized=973349.99, today=973349.99", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:29:51.976089+05:30", "timestamp": 1755781191.976089}}}
{"text": "2025-08-21 18:29:51.976 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for HDFC: unrealized=-2098076.2, today=-2098076.2\n", "record": {"elapsed": {"repr": "0:01:15.974767", "seconds": 75.974767}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for HDFC: unrealized=-2098076.2, today=-2098076.2", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:29:51.976742+05:30", "timestamp": 1755781191.976742}}}
{"text": "2025-08-21 18:29:51.977 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for INFY: unrealized=191962.25, today=191962.25\n", "record": {"elapsed": {"repr": "0:01:15.975460", "seconds": 75.97546}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for INFY: unrealized=191962.25, today=191962.25", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:29:51.977435+05:30", "timestamp": 1755781191.977435}}}
{"text": "2025-08-21 18:29:51.978 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for ICICIBANK: unrealized=385012.46, today=385012.46\n", "record": {"elapsed": {"repr": "0:01:15.976255", "seconds": 75.976255}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for ICICIBANK: unrealized=385012.46, today=385012.46", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:29:51.978230+05:30", "timestamp": 1755781191.97823}}}
{"text": "2025-08-21 18:29:51.978 | INFO     | app.services.dhan_client:get_pnl:545 - Calculated totals - realized: 0.0, unrealized: -1578405.78, day: -1578405.78\n", "record": {"elapsed": {"repr": "0:01:15.976939", "seconds": 75.976939}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 545, "message": "Calculated totals - realized: 0.0, unrealized: -1578405.78, day: -1578405.78", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:29:51.978914+05:30", "timestamp": 1755781191.978914}}}
{"text": "2025-08-21 18:29:51.979 | DEBUG    | app.services.dhan_client:get_pnl:554 - PnL consistency check passed: drift=₹0.00\n", "record": {"elapsed": {"repr": "0:01:15.977540", "seconds": 75.97754}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 554, "message": "PnL consistency check passed: drift=₹0.00", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:29:51.979515+05:30", "timestamp": 1755781191.979515}}}
{"text": "2025-08-21 18:29:51.980 | DEBUG    | app.services.dhan_client:get_pnl:558 - Creating PnLTotals...\n", "record": {"elapsed": {"repr": "0:01:15.978104", "seconds": 75.978104}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 558, "message": "Creating PnLTotals...", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:29:51.980079+05:30", "timestamp": 1755781191.980079}}}
{"text": "2025-08-21 18:29:51.980 | DEBUG    | app.services.dhan_client:get_pnl:565 - PnLTotals created successfully\n", "record": {"elapsed": {"repr": "0:01:15.978688", "seconds": 75.978688}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 565, "message": "PnLTotals created successfully", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:29:51.980663+05:30", "timestamp": 1755781191.980663}}}
{"text": "2025-08-21 18:29:51.981 | DEBUG    | app.services.dhan_client:get_pnl:574 - Creating PnL model...\n", "record": {"elapsed": {"repr": "0:01:15.979230", "seconds": 75.97923}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 574, "message": "Creating PnL model...", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:29:51.981205+05:30", "timestamp": 1755781191.981205}}}
{"text": "2025-08-21 18:29:51.981 | DEBUG    | app.services.dhan_client:get_pnl:575 - Model fields: totals=<class 'app.models.schemas.PnLTotals'>, perSymbol=5, updated_at=2025-08-21 18:29:51.975477+05:30, trading_day=2025-08-21\n", "record": {"elapsed": {"repr": "0:01:15.979734", "seconds": 75.979734}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 575, "message": "Model fields: totals=<class 'app.models.schemas.PnLTotals'>, perSymbol=5, updated_at=2025-08-21 18:29:51.975477+05:30, trading_day=2025-08-21", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:29:51.981709+05:30", "timestamp": 1755781191.981709}}}
{"text": "2025-08-21 18:29:51.982 | DEBUG    | app.services.dhan_client:get_pnl:584 - Created PnL model: totals=PnLTotals(realized=0.0, unrealized=-1578405.78, day=-1578405.78, currency='INR') per_symbol=[PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1543, avg=1999.73, ltp=1331.78, unrealized=-1030654.28, today_pnl=-1030654.28), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=613, avg=1989.23, ltp=401.38, unrealized=973349.99, today_pnl=973349.99), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=1709, avg=1838.62, ltp=610.96, unrealized=-2098076.2, today_pnl=-2098076.2), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=697, avg=852.74, ltp=577.33, unrealized=191962.25, today_pnl=191962.25), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=255, avg=915.17, ltp=2425.02, unrealized=385012.46, today_pnl=385012.46)] updated_at=datetime.datetime(2025, 8, 21, 18, 29, 51, 975477, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))) trading_day='2025-08-21'\n", "record": {"elapsed": {"repr": "0:01:15.980642", "seconds": 75.980642}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 584, "message": "Created PnL model: totals=PnLTotals(realized=0.0, unrealized=-1578405.78, day=-1578405.78, currency='INR') per_symbol=[PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1543, avg=1999.73, ltp=1331.78, unrealized=-1030654.28, today_pnl=-1030654.28), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=613, avg=1989.23, ltp=401.38, unrealized=973349.99, today_pnl=973349.99), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=1709, avg=1838.62, ltp=610.96, unrealized=-2098076.2, today_pnl=-2098076.2), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=697, avg=852.74, ltp=577.33, unrealized=191962.25, today_pnl=191962.25), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=255, avg=915.17, ltp=2425.02, unrealized=385012.46, today_pnl=385012.46)] updated_at=datetime.datetime(2025, 8, 21, 18, 29, 51, 975477, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))) trading_day='2025-08-21'", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:29:51.982617+05:30", "timestamp": 1755781191.982617}}}
{"text": "2025-08-21 18:29:51.983 | DEBUG    | app.services.dhan_client:get_pnl:585 - PnL model fields: {'totals': PnLTotals(realized=0.0, unrealized=-1578405.78, day=-1578405.78, currency='INR'), 'per_symbol': [PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1543, avg=1999.73, ltp=1331.78, unrealized=-1030654.28, today_pnl=-1030654.28), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=613, avg=1989.23, ltp=401.38, unrealized=973349.99, today_pnl=973349.99), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=1709, avg=1838.62, ltp=610.96, unrealized=-2098076.2, today_pnl=-2098076.2), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=697, avg=852.74, ltp=577.33, unrealized=191962.25, today_pnl=191962.25), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=255, avg=915.17, ltp=2425.02, unrealized=385012.46, today_pnl=385012.46)], 'updated_at': datetime.datetime(2025, 8, 21, 18, 29, 51, 975477, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))), 'trading_day': '2025-08-21'}\n", "record": {"elapsed": {"repr": "0:01:15.981791", "seconds": 75.981791}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 585, "message": "PnL model fields: {'totals': PnLTotals(realized=0.0, unrealized=-1578405.78, day=-1578405.78, currency='INR'), 'per_symbol': [PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1543, avg=1999.73, ltp=1331.78, unrealized=-1030654.28, today_pnl=-1030654.28), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=613, avg=1989.23, ltp=401.38, unrealized=973349.99, today_pnl=973349.99), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=1709, avg=1838.62, ltp=610.96, unrealized=-2098076.2, today_pnl=-2098076.2), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=697, avg=852.74, ltp=577.33, unrealized=191962.25, today_pnl=191962.25), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=255, avg=915.17, ltp=2425.02, unrealized=385012.46, today_pnl=385012.46)], 'updated_at': datetime.datetime(2025, 8, 21, 18, 29, 51, 975477, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))), 'trading_day': '2025-08-21'}", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:29:51.983766+05:30", "timestamp": 1755781191.983766}}}
{"text": "2025-08-21 18:29:51.984 | INFO     | app.services.dhan_client:get_pnl:587 - P&L calculation completed successfully: 5 symbols, unrealized=₹-1578405.78\n", "record": {"elapsed": {"repr": "0:01:15.982537", "seconds": 75.982537}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 587, "message": "P&L calculation completed successfully: 5 symbols, unrealized=₹-1578405.78", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:29:51.984512+05:30", "timestamp": 1755781191.984512}}}
{"text": "2025-08-21 18:29:51.985 | DEBUG    | app.ws.live:emit_delta:408 - Emitted pnl delta: seq=106\n", "record": {"elapsed": {"repr": "0:01:15.983542", "seconds": 75.983542}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "emit_delta", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 408, "message": "Emitted pnl delta: seq=106", "module": "live", "name": "app.ws.live", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:29:51.985517+05:30", "timestamp": 1755781191.985517}}}
{"text": "2025-08-21 18:29:52.552 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:01:16.550225", "seconds": 76.550225}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 17632, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 18:29:52.552200+05:30", "timestamp": 1755781192.5522}}}
{"text": "2025-08-21 18:29:52.553 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:01:16.551273", "seconds": 76.551273}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 17632, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 18:29:52.553248+05:30", "timestamp": 1755781192.553248}}}
{"text": "2025-08-21 18:29:52.554 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:01:16.552201", "seconds": 76.552201}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 17632, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 18:29:52.554176+05:30", "timestamp": 1755781192.554176}}}
{"text": "2025-08-21 18:29:52.554 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:01:16.552915", "seconds": 76.552915}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 17632, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 18:29:52.554890+05:30", "timestamp": 1755781192.55489}}}
{"text": "2025-08-21 18:29:52.555 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:01:16.553801", "seconds": 76.553801}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 17632, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 18:29:52.555776+05:30", "timestamp": 1755781192.555776}}}
{"text": "2025-08-21 18:29:52.556 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:01:16.554467", "seconds": 76.554467}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 17632, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 18:29:52.556442+05:30", "timestamp": 1755781192.556442}}}
{"text": "2025-08-21 18:29:52.557 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:01:16.555122", "seconds": 76.555122}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 17632, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 18:29:52.557097+05:30", "timestamp": 1755781192.557097}}}
{"text": "2025-08-21 18:29:52.557 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:01:16.555807", "seconds": 76.555807}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 17632, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 18:29:52.557782+05:30", "timestamp": 1755781192.557782}}}
{"text": "2025-08-21 18:29:52.558 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:01:16.556540", "seconds": 76.55654}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 17632, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 18:29:52.558515+05:30", "timestamp": 1755781192.558515}}}
{"text": "2025-08-21 18:29:52.559 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:01:16.557142", "seconds": 76.557142}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 17632, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 18:29:52.559117+05:30", "timestamp": 1755781192.559117}}}
{"text": "2025-08-21 18:29:53.817 | INFO     | app.services.dhan_client:get_pnl:489 - Starting accurate P&L calculation\n", "record": {"elapsed": {"repr": "0:01:17.815854", "seconds": 77.815854}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 489, "message": "Starting accurate P&L calculation", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:29:53.817829+05:30", "timestamp": 1755781193.817829}}}
{"text": "2025-08-21 18:29:53.824 | INFO     | app.services.dhan_client:get_pnl:491 - Fetched 5 positions\n", "record": {"elapsed": {"repr": "0:01:17.822353", "seconds": 77.822353}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 491, "message": "Fetched 5 positions", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:29:53.824328+05:30", "timestamp": 1755781193.824328}}}
{"text": "2025-08-21 18:29:53.831 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for RELIANCE: unrealized=-993498.57, today=-993498.57\n", "record": {"elapsed": {"repr": "0:01:17.829519", "seconds": 77.829519}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for RELIANCE: unrealized=-993498.57, today=-993498.57", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:29:53.831494+05:30", "timestamp": 1755781193.831494}}}
{"text": "2025-08-21 18:29:53.841 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for TCS: unrealized=968488.86, today=968488.86\n", "record": {"elapsed": {"repr": "0:01:17.839269", "seconds": 77.839269}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for TCS: unrealized=968488.86, today=968488.86", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:29:53.841244+05:30", "timestamp": 1755781193.841244}}}
{"text": "2025-08-21 18:29:53.849 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for HDFC: unrealized=-2082651.23, today=-2082651.23\n", "record": {"elapsed": {"repr": "0:01:17.847471", "seconds": 77.847471}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for HDFC: unrealized=-2082651.23, today=-2082651.23", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:29:53.849446+05:30", "timestamp": 1755781193.849446}}}
{"text": "2025-08-21 18:29:53.856 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for INFY: unrealized=190022.69, today=190022.69\n", "record": {"elapsed": {"repr": "0:01:17.854744", "seconds": 77.854744}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for INFY: unrealized=190022.69, today=190022.69", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:29:53.856719+05:30", "timestamp": 1755781193.856719}}}
{"text": "2025-08-21 18:29:53.865 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for ICICIBANK: unrealized=389085.31, today=389085.31\n", "record": {"elapsed": {"repr": "0:01:17.863222", "seconds": 77.863222}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for ICICIBANK: unrealized=389085.31, today=389085.31", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:29:53.865197+05:30", "timestamp": 1755781193.865197}}}
{"text": "2025-08-21 18:29:53.874 | INFO     | app.services.dhan_client:get_pnl:545 - Calculated totals - realized: 0.0, unrealized: -1528552.94, day: -1528552.94\n", "record": {"elapsed": {"repr": "0:01:17.872973", "seconds": 77.872973}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 545, "message": "Calculated totals - realized: 0.0, unrealized: -1528552.94, day: -1528552.94", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:29:53.874948+05:30", "timestamp": 1755781193.874948}}}
{"text": "2025-08-21 18:29:53.887 | DEBUG    | app.services.dhan_client:get_pnl:554 - PnL consistency check passed: drift=₹0.00\n", "record": {"elapsed": {"repr": "0:01:17.885356", "seconds": 77.885356}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 554, "message": "PnL consistency check passed: drift=₹0.00", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:29:53.887331+05:30", "timestamp": 1755781193.887331}}}
{"text": "2025-08-21 18:29:53.894 | DEBUG    | app.services.dhan_client:get_pnl:558 - Creating PnLTotals...\n", "record": {"elapsed": {"repr": "0:01:17.892953", "seconds": 77.892953}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 558, "message": "Creating PnLTotals...", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:29:53.894928+05:30", "timestamp": 1755781193.894928}}}
{"text": "2025-08-21 18:29:53.897 | DEBUG    | app.services.dhan_client:get_pnl:565 - PnLTotals created successfully\n", "record": {"elapsed": {"repr": "0:01:17.895533", "seconds": 77.895533}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 565, "message": "PnLTotals created successfully", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:29:53.897508+05:30", "timestamp": 1755781193.897508}}}
{"text": "2025-08-21 18:29:53.898 | DEBUG    | app.services.dhan_client:get_pnl:574 - Creating PnL model...\n", "record": {"elapsed": {"repr": "0:01:17.896310", "seconds": 77.89631}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 574, "message": "Creating PnL model...", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:29:53.898285+05:30", "timestamp": 1755781193.898285}}}
{"text": "2025-08-21 18:29:53.899 | DEBUG    | app.services.dhan_client:get_pnl:575 - Model fields: totals=<class 'app.models.schemas.PnLTotals'>, perSymbol=5, updated_at=2025-08-21 18:29:53.831363+05:30, trading_day=2025-08-21\n", "record": {"elapsed": {"repr": "0:01:17.897646", "seconds": 77.897646}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 575, "message": "Model fields: totals=<class 'app.models.schemas.PnLTotals'>, perSymbol=5, updated_at=2025-08-21 18:29:53.831363+05:30, trading_day=2025-08-21", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:29:53.899621+05:30", "timestamp": 1755781193.899621}}}
{"text": "2025-08-21 18:29:53.900 | DEBUG    | app.services.dhan_client:get_pnl:584 - Created PnL model: totals=PnLTotals(realized=0.0, unrealized=-1528552.94, day=-1528552.94, currency='INR') per_symbol=[PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1543, avg=1999.73, ltp=1355.86, unrealized=-993498.57, today_pnl=-993498.57), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=613, avg=1989.23, ltp=409.31, unrealized=968488.86, today_pnl=968488.86), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=1709, avg=1838.62, ltp=619.98, unrealized=-2082651.23, today_pnl=-2082651.23), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=697, avg=852.74, ltp=580.11, unrealized=190022.69, today_pnl=190022.69), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=255, avg=915.17, ltp=2440.99, unrealized=389085.31, today_pnl=389085.31)] updated_at=datetime.datetime(2025, 8, 21, 18, 29, 53, 831363, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))) trading_day='2025-08-21'\n", "record": {"elapsed": {"repr": "0:01:17.898957", "seconds": 77.898957}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 584, "message": "Created PnL model: totals=PnLTotals(realized=0.0, unrealized=-1528552.94, day=-1528552.94, currency='INR') per_symbol=[PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1543, avg=1999.73, ltp=1355.86, unrealized=-993498.57, today_pnl=-993498.57), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=613, avg=1989.23, ltp=409.31, unrealized=968488.86, today_pnl=968488.86), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=1709, avg=1838.62, ltp=619.98, unrealized=-2082651.23, today_pnl=-2082651.23), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=697, avg=852.74, ltp=580.11, unrealized=190022.69, today_pnl=190022.69), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=255, avg=915.17, ltp=2440.99, unrealized=389085.31, today_pnl=389085.31)] updated_at=datetime.datetime(2025, 8, 21, 18, 29, 53, 831363, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))) trading_day='2025-08-21'", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:29:53.900932+05:30", "timestamp": 1755781193.900932}}}
{"text": "2025-08-21 18:29:53.903 | DEBUG    | app.services.dhan_client:get_pnl:585 - PnL model fields: {'totals': PnLTotals(realized=0.0, unrealized=-1528552.94, day=-1528552.94, currency='INR'), 'per_symbol': [PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1543, avg=1999.73, ltp=1355.86, unrealized=-993498.57, today_pnl=-993498.57), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=613, avg=1989.23, ltp=409.31, unrealized=968488.86, today_pnl=968488.86), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=1709, avg=1838.62, ltp=619.98, unrealized=-2082651.23, today_pnl=-2082651.23), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=697, avg=852.74, ltp=580.11, unrealized=190022.69, today_pnl=190022.69), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=255, avg=915.17, ltp=2440.99, unrealized=389085.31, today_pnl=389085.31)], 'updated_at': datetime.datetime(2025, 8, 21, 18, 29, 53, 831363, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))), 'trading_day': '2025-08-21'}\n", "record": {"elapsed": {"repr": "0:01:17.901063", "seconds": 77.901063}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 585, "message": "PnL model fields: {'totals': PnLTotals(realized=0.0, unrealized=-1528552.94, day=-1528552.94, currency='INR'), 'per_symbol': [PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1543, avg=1999.73, ltp=1355.86, unrealized=-993498.57, today_pnl=-993498.57), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=613, avg=1989.23, ltp=409.31, unrealized=968488.86, today_pnl=968488.86), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=1709, avg=1838.62, ltp=619.98, unrealized=-2082651.23, today_pnl=-2082651.23), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=697, avg=852.74, ltp=580.11, unrealized=190022.69, today_pnl=190022.69), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=255, avg=915.17, ltp=2440.99, unrealized=389085.31, today_pnl=389085.31)], 'updated_at': datetime.datetime(2025, 8, 21, 18, 29, 53, 831363, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))), 'trading_day': '2025-08-21'}", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:29:53.903038+05:30", "timestamp": 1755781193.903038}}}
{"text": "2025-08-21 18:29:53.904 | INFO     | app.services.dhan_client:get_pnl:587 - P&L calculation completed successfully: 5 symbols, unrealized=₹-1528552.94\n", "record": {"elapsed": {"repr": "0:01:17.902378", "seconds": 77.902378}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 587, "message": "P&L calculation completed successfully: 5 symbols, unrealized=₹-1528552.94", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:29:53.904353+05:30", "timestamp": 1755781193.904353}}}
{"text": "2025-08-21 18:29:53.905 | DEBUG    | app.ws.live:emit_delta:408 - Emitted pnl delta: seq=107\n", "record": {"elapsed": {"repr": "0:01:17.903304", "seconds": 77.903304}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "emit_delta", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 408, "message": "Emitted pnl delta: seq=107", "module": "live", "name": "app.ws.live", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:29:53.905279+05:30", "timestamp": 1755781193.905279}}}
{"text": "2025-08-21 18:29:53.909 | DEBUG    | app.ws.live:emit_delta:408 - Emitted positions delta: seq=108\n", "record": {"elapsed": {"repr": "0:01:17.907989", "seconds": 77.907989}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "emit_delta", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 408, "message": "Emitted positions delta: seq=108", "module": "live", "name": "app.ws.live", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:29:53.909964+05:30", "timestamp": 1755781193.909964}}}
{"text": "2025-08-21 18:29:54.560 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:01:18.558142", "seconds": 78.558142}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 17632, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 18:29:54.560117+05:30", "timestamp": 1755781194.560117}}}
{"text": "2025-08-21 18:29:54.561 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:01:18.559407", "seconds": 78.559407}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 17632, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 18:29:54.561382+05:30", "timestamp": 1755781194.561382}}}
{"text": "2025-08-21 18:29:54.562 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:01:18.560258", "seconds": 78.560258}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 17632, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 18:29:54.562233+05:30", "timestamp": 1755781194.562233}}}
{"text": "2025-08-21 18:29:54.563 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:01:18.561256", "seconds": 78.561256}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 17632, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 18:29:54.563231+05:30", "timestamp": 1755781194.563231}}}
{"text": "2025-08-21 18:29:54.564 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:01:18.562523", "seconds": 78.562523}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 17632, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 18:29:54.564498+05:30", "timestamp": 1755781194.564498}}}
{"text": "2025-08-21 18:29:54.566 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:01:18.564095", "seconds": 78.564095}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 17632, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 18:29:54.566070+05:30", "timestamp": 1755781194.56607}}}
{"text": "2025-08-21 18:29:54.567 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:01:18.565855", "seconds": 78.565855}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 17632, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 18:29:54.567830+05:30", "timestamp": 1755781194.56783}}}
{"text": "2025-08-21 18:29:54.569 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:01:18.567421", "seconds": 78.567421}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 17632, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 18:29:54.569396+05:30", "timestamp": 1755781194.569396}}}
{"text": "2025-08-21 18:29:54.571 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:01:18.569191", "seconds": 78.569191}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 17632, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 18:29:54.571166+05:30", "timestamp": 1755781194.571166}}}
{"text": "2025-08-21 18:29:54.573 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:01:18.571939", "seconds": 78.571939}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 17632, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 18:29:54.573914+05:30", "timestamp": 1755781194.573914}}}
{"text": "2025-08-21 18:29:55.691 | INFO     | app.services.dhan_client:get_pnl:489 - Starting accurate P&L calculation\n", "record": {"elapsed": {"repr": "0:01:19.689799", "seconds": 79.689799}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 489, "message": "Starting accurate P&L calculation", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:29:55.691774+05:30", "timestamp": 1755781195.691774}}}
{"text": "2025-08-21 18:29:55.692 | INFO     | app.services.dhan_client:get_pnl:491 - Fetched 5 positions\n", "record": {"elapsed": {"repr": "0:01:19.691009", "seconds": 79.691009}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 491, "message": "Fetched 5 positions", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:29:55.692984+05:30", "timestamp": 1755781195.692984}}}
{"text": "2025-08-21 18:29:55.694 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for RELIANCE: unrealized=-1027738.82, today=-1027738.82\n", "record": {"elapsed": {"repr": "0:01:19.692224", "seconds": 79.692224}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for RELIANCE: unrealized=-1027738.82, today=-1027738.82", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:29:55.694199+05:30", "timestamp": 1755781195.694199}}}
{"text": "2025-08-21 18:29:55.695 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for TCS: unrealized=964395.52, today=964395.52\n", "record": {"elapsed": {"repr": "0:01:19.693119", "seconds": 79.693119}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for TCS: unrealized=964395.52, today=964395.52", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:29:55.695094+05:30", "timestamp": 1755781195.695094}}}
{"text": "2025-08-21 18:29:55.695 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for HDFC: unrealized=-2082100.57, today=-2082100.57\n", "record": {"elapsed": {"repr": "0:01:19.693880", "seconds": 79.69388}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for HDFC: unrealized=-2082100.57, today=-2082100.57", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:29:55.695855+05:30", "timestamp": 1755781195.695855}}}
{"text": "2025-08-21 18:29:55.697 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for INFY: unrealized=197034.12, today=197034.12\n", "record": {"elapsed": {"repr": "0:01:19.695243", "seconds": 79.695243}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for INFY: unrealized=197034.12, today=197034.12", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:29:55.697218+05:30", "timestamp": 1755781195.697218}}}
{"text": "2025-08-21 18:29:55.698 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for ICICIBANK: unrealized=387566.72, today=387566.72\n", "record": {"elapsed": {"repr": "0:01:19.696388", "seconds": 79.696388}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for ICICIBANK: unrealized=387566.72, today=387566.72", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:29:55.698363+05:30", "timestamp": 1755781195.698363}}}
{"text": "2025-08-21 18:29:55.699 | INFO     | app.services.dhan_client:get_pnl:545 - Calculated totals - realized: 0.0, unrealized: -1560843.03, day: -1560843.03\n", "record": {"elapsed": {"repr": "0:01:19.697431", "seconds": 79.697431}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 545, "message": "Calculated totals - realized: 0.0, unrealized: -1560843.03, day: -1560843.03", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:29:55.699406+05:30", "timestamp": 1755781195.699406}}}
{"text": "2025-08-21 18:29:55.700 | DEBUG    | app.services.dhan_client:get_pnl:554 - PnL consistency check passed: drift=₹0.00\n", "record": {"elapsed": {"repr": "0:01:19.698156", "seconds": 79.698156}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 554, "message": "PnL consistency check passed: drift=₹0.00", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:29:55.700131+05:30", "timestamp": 1755781195.700131}}}
{"text": "2025-08-21 18:29:55.701 | DEBUG    | app.services.dhan_client:get_pnl:558 - Creating PnLTotals...\n", "record": {"elapsed": {"repr": "0:01:19.699517", "seconds": 79.699517}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 558, "message": "Creating PnLTotals...", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:29:55.701492+05:30", "timestamp": 1755781195.701492}}}
{"text": "2025-08-21 18:29:55.702 | DEBUG    | app.services.dhan_client:get_pnl:565 - PnLTotals created successfully\n", "record": {"elapsed": {"repr": "0:01:19.700211", "seconds": 79.700211}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 565, "message": "PnLTotals created successfully", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:29:55.702186+05:30", "timestamp": 1755781195.702186}}}
{"text": "2025-08-21 18:29:55.703 | DEBUG    | app.services.dhan_client:get_pnl:574 - Creating PnL model...\n", "record": {"elapsed": {"repr": "0:01:19.701579", "seconds": 79.701579}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 574, "message": "Creating PnL model...", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:29:55.703554+05:30", "timestamp": 1755781195.703554}}}
{"text": "2025-08-21 18:29:55.704 | DEBUG    | app.services.dhan_client:get_pnl:575 - Model fields: totals=<class 'app.models.schemas.PnLTotals'>, perSymbol=5, updated_at=2025-08-21 18:29:55.693959+05:30, trading_day=2025-08-21\n", "record": {"elapsed": {"repr": "0:01:19.702430", "seconds": 79.70243}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 575, "message": "Model fields: totals=<class 'app.models.schemas.PnLTotals'>, perSymbol=5, updated_at=2025-08-21 18:29:55.693959+05:30, trading_day=2025-08-21", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:29:55.704405+05:30", "timestamp": 1755781195.704405}}}
{"text": "2025-08-21 18:29:55.705 | DEBUG    | app.services.dhan_client:get_pnl:584 - Created PnL model: totals=PnLTotals(realized=0.0, unrealized=-1560843.03, day=-1560843.03, currency='INR') per_symbol=[PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1543, avg=1999.73, ltp=1333.66, unrealized=-1027738.82, today_pnl=-1027738.82), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=613, avg=1989.23, ltp=415.99, unrealized=964395.52, today_pnl=964395.52), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=1709, avg=1838.62, ltp=620.3, unrealized=-2082100.57, today_pnl=-2082100.57), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=697, avg=852.74, ltp=570.05, unrealized=197034.12, today_pnl=197034.12), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=255, avg=915.17, ltp=2435.04, unrealized=387566.72, today_pnl=387566.72)] updated_at=datetime.datetime(2025, 8, 21, 18, 29, 55, 693959, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))) trading_day='2025-08-21'\n", "record": {"elapsed": {"repr": "0:01:19.703901", "seconds": 79.703901}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 584, "message": "Created PnL model: totals=PnLTotals(realized=0.0, unrealized=-1560843.03, day=-1560843.03, currency='INR') per_symbol=[PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1543, avg=1999.73, ltp=1333.66, unrealized=-1027738.82, today_pnl=-1027738.82), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=613, avg=1989.23, ltp=415.99, unrealized=964395.52, today_pnl=964395.52), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=1709, avg=1838.62, ltp=620.3, unrealized=-2082100.57, today_pnl=-2082100.57), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=697, avg=852.74, ltp=570.05, unrealized=197034.12, today_pnl=197034.12), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=255, avg=915.17, ltp=2435.04, unrealized=387566.72, today_pnl=387566.72)] updated_at=datetime.datetime(2025, 8, 21, 18, 29, 55, 693959, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))) trading_day='2025-08-21'", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:29:55.705876+05:30", "timestamp": 1755781195.705876}}}
{"text": "2025-08-21 18:29:55.707 | DEBUG    | app.services.dhan_client:get_pnl:585 - PnL model fields: {'totals': PnLTotals(realized=0.0, unrealized=-1560843.03, day=-1560843.03, currency='INR'), 'per_symbol': [PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1543, avg=1999.73, ltp=1333.66, unrealized=-1027738.82, today_pnl=-1027738.82), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=613, avg=1989.23, ltp=415.99, unrealized=964395.52, today_pnl=964395.52), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=1709, avg=1838.62, ltp=620.3, unrealized=-2082100.57, today_pnl=-2082100.57), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=697, avg=852.74, ltp=570.05, unrealized=197034.12, today_pnl=197034.12), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=255, avg=915.17, ltp=2435.04, unrealized=387566.72, today_pnl=387566.72)], 'updated_at': datetime.datetime(2025, 8, 21, 18, 29, 55, 693959, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))), 'trading_day': '2025-08-21'}\n", "record": {"elapsed": {"repr": "0:01:19.705633", "seconds": 79.705633}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 585, "message": "PnL model fields: {'totals': PnLTotals(realized=0.0, unrealized=-1560843.03, day=-1560843.03, currency='INR'), 'per_symbol': [PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1543, avg=1999.73, ltp=1333.66, unrealized=-1027738.82, today_pnl=-1027738.82), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=613, avg=1989.23, ltp=415.99, unrealized=964395.52, today_pnl=964395.52), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=1709, avg=1838.62, ltp=620.3, unrealized=-2082100.57, today_pnl=-2082100.57), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=697, avg=852.74, ltp=570.05, unrealized=197034.12, today_pnl=197034.12), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=255, avg=915.17, ltp=2435.04, unrealized=387566.72, today_pnl=387566.72)], 'updated_at': datetime.datetime(2025, 8, 21, 18, 29, 55, 693959, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))), 'trading_day': '2025-08-21'}", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:29:55.707608+05:30", "timestamp": 1755781195.707608}}}
{"text": "2025-08-21 18:29:55.708 | INFO     | app.services.dhan_client:get_pnl:587 - P&L calculation completed successfully: 5 symbols, unrealized=₹-1560843.03\n", "record": {"elapsed": {"repr": "0:01:19.707019", "seconds": 79.707019}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 587, "message": "P&L calculation completed successfully: 5 symbols, unrealized=₹-1560843.03", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:29:55.708994+05:30", "timestamp": 1755781195.708994}}}
{"text": "2025-08-21 18:29:55.710 | DEBUG    | app.ws.live:emit_delta:408 - Emitted pnl delta: seq=109\n", "record": {"elapsed": {"repr": "0:01:19.708984", "seconds": 79.708984}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "emit_delta", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 408, "message": "Emitted pnl delta: seq=109", "module": "live", "name": "app.ws.live", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:29:55.710959+05:30", "timestamp": 1755781195.710959}}}
{"text": "2025-08-21 18:29:55.712 | DEBUG    | app.ws.live:emit_delta:408 - Emitted positions delta: seq=110\n", "record": {"elapsed": {"repr": "0:01:19.710136", "seconds": 79.710136}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "emit_delta", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 408, "message": "Emitted positions delta: seq=110", "module": "live", "name": "app.ws.live", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:29:55.712111+05:30", "timestamp": 1755781195.712111}}}
{"text": "2025-08-21 18:29:56.575 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:01:20.573355", "seconds": 80.573355}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 17632, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 18:29:56.575330+05:30", "timestamp": 1755781196.57533}}}
{"text": "2025-08-21 18:29:56.576 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:01:20.574376", "seconds": 80.574376}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 17632, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 18:29:56.576351+05:30", "timestamp": 1755781196.576351}}}
{"text": "2025-08-21 18:29:56.577 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:01:20.575173", "seconds": 80.575173}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 17632, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 18:29:56.577148+05:30", "timestamp": 1755781196.577148}}}
{"text": "2025-08-21 18:29:56.578 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:01:20.576061", "seconds": 80.576061}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 17632, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 18:29:56.578036+05:30", "timestamp": 1755781196.578036}}}
{"text": "2025-08-21 18:29:56.579 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:01:20.577091", "seconds": 80.577091}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 17632, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 18:29:56.579066+05:30", "timestamp": 1755781196.579066}}}
{"text": "2025-08-21 18:29:56.579 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:01:20.577825", "seconds": 80.577825}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 17632, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 18:29:56.579800+05:30", "timestamp": 1755781196.5798}}}
{"text": "2025-08-21 18:29:56.581 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:01:20.579305", "seconds": 80.579305}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 17632, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 18:29:56.581280+05:30", "timestamp": 1755781196.58128}}}
{"text": "2025-08-21 18:29:56.582 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:01:20.580446", "seconds": 80.580446}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 17632, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 18:29:56.582421+05:30", "timestamp": 1755781196.582421}}}
{"text": "2025-08-21 18:29:56.583 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:01:20.581459", "seconds": 80.581459}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 17632, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 18:29:56.583434+05:30", "timestamp": 1755781196.583434}}}
{"text": "2025-08-21 18:29:56.584 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:01:20.582650", "seconds": 80.58265}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 17632, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 18:29:56.584625+05:30", "timestamp": 1755781196.584625}}}
{"text": "2025-08-21 18:29:57.391 | INFO     | app.services.dhan_client:get_pnl:489 - Starting accurate P&L calculation\n", "record": {"elapsed": {"repr": "0:01:21.389919", "seconds": 81.389919}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 489, "message": "Starting accurate P&L calculation", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:29:57.391894+05:30", "timestamp": 1755781197.391894}}}
{"text": "2025-08-21 18:29:57.392 | INFO     | app.services.dhan_client:get_pnl:491 - Fetched 5 positions\n", "record": {"elapsed": {"repr": "0:01:21.390962", "seconds": 81.390962}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 491, "message": "Fetched 5 positions", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:29:57.392937+05:30", "timestamp": 1755781197.392937}}}
{"text": "2025-08-21 18:29:57.394 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for RELIANCE: unrealized=-1062779.26, today=-1062779.26\n", "record": {"elapsed": {"repr": "0:01:21.392562", "seconds": 81.392562}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for RELIANCE: unrealized=-1062779.26, today=-1062779.26", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:29:57.394537+05:30", "timestamp": 1755781197.394537}}}
{"text": "2025-08-21 18:29:57.395 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for TCS: unrealized=965514.03, today=965514.03\n", "record": {"elapsed": {"repr": "0:01:21.393900", "seconds": 81.3939}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for TCS: unrealized=965514.03, today=965514.03", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:29:57.395875+05:30", "timestamp": 1755781197.395875}}}
{"text": "2025-08-21 18:29:57.396 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for HDFC: unrealized=-2060963.44, today=-2060963.44\n", "record": {"elapsed": {"repr": "0:01:21.394990", "seconds": 81.39499}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for HDFC: unrealized=-2060963.44, today=-2060963.44", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:29:57.396965+05:30", "timestamp": 1755781197.396965}}}
{"text": "2025-08-21 18:29:57.397 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for INFY: unrealized=191784.9, today=191784.9\n", "record": {"elapsed": {"repr": "0:01:21.395693", "seconds": 81.395693}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for INFY: unrealized=191784.9, today=191784.9", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:29:57.397668+05:30", "timestamp": 1755781197.397668}}}
{"text": "2025-08-21 18:29:57.398 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for ICICIBANK: unrealized=380633.74, today=380633.74\n", "record": {"elapsed": {"repr": "0:01:21.396707", "seconds": 81.396707}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for ICICIBANK: unrealized=380633.74, today=380633.74", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:29:57.398682+05:30", "timestamp": 1755781197.398682}}}
{"text": "2025-08-21 18:29:57.400 | INFO     | app.services.dhan_client:get_pnl:545 - Calculated totals - realized: 0.0, unrealized: -1585810.03, day: -1585810.03\n", "record": {"elapsed": {"repr": "0:01:21.398110", "seconds": 81.39811}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 545, "message": "Calculated totals - realized: 0.0, unrealized: -1585810.03, day: -1585810.03", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:29:57.400085+05:30", "timestamp": 1755781197.400085}}}
{"text": "2025-08-21 18:29:57.401 | DEBUG    | app.services.dhan_client:get_pnl:554 - PnL consistency check passed: drift=₹0.00\n", "record": {"elapsed": {"repr": "0:01:21.399053", "seconds": 81.399053}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 554, "message": "PnL consistency check passed: drift=₹0.00", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:29:57.401028+05:30", "timestamp": 1755781197.401028}}}
{"text": "2025-08-21 18:29:57.402 | DEBUG    | app.services.dhan_client:get_pnl:558 - Creating PnLTotals...\n", "record": {"elapsed": {"repr": "0:01:21.400118", "seconds": 81.400118}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 558, "message": "Creating PnLTotals...", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:29:57.402093+05:30", "timestamp": 1755781197.402093}}}
{"text": "2025-08-21 18:29:57.403 | DEBUG    | app.services.dhan_client:get_pnl:565 - PnLTotals created successfully\n", "record": {"elapsed": {"repr": "0:01:21.401282", "seconds": 81.401282}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 565, "message": "PnLTotals created successfully", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:29:57.403257+05:30", "timestamp": 1755781197.403257}}}
{"text": "2025-08-21 18:29:57.404 | DEBUG    | app.services.dhan_client:get_pnl:574 - Creating PnL model...\n", "record": {"elapsed": {"repr": "0:01:21.402392", "seconds": 81.402392}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 574, "message": "Creating PnL model...", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:29:57.404367+05:30", "timestamp": 1755781197.404367}}}
{"text": "2025-08-21 18:29:57.405 | DEBUG    | app.services.dhan_client:get_pnl:575 - Model fields: totals=<class 'app.models.schemas.PnLTotals'>, perSymbol=5, updated_at=2025-08-21 18:29:57.394323+05:30, trading_day=2025-08-21\n", "record": {"elapsed": {"repr": "0:01:21.403469", "seconds": 81.403469}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 575, "message": "Model fields: totals=<class 'app.models.schemas.PnLTotals'>, perSymbol=5, updated_at=2025-08-21 18:29:57.394323+05:30, trading_day=2025-08-21", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:29:57.405444+05:30", "timestamp": 1755781197.405444}}}
{"text": "2025-08-21 18:29:57.406 | DEBUG    | app.services.dhan_client:get_pnl:584 - Created PnL model: totals=PnLTotals(realized=0.0, unrealized=-1585810.03, day=-1585810.03, currency='INR') per_symbol=[PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1543, avg=1999.73, ltp=1310.96, unrealized=-1062779.26, today_pnl=-1062779.26), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=613, avg=1989.23, ltp=414.17, unrealized=965514.03, today_pnl=965514.03), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=1709, avg=1838.62, ltp=632.67, unrealized=-2060963.44, today_pnl=-2060963.44), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=697, avg=852.74, ltp=577.58, unrealized=191784.9, today_pnl=191784.9), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=255, avg=915.17, ltp=2407.85, unrealized=380633.74, today_pnl=380633.74)] updated_at=datetime.datetime(2025, 8, 21, 18, 29, 57, 394323, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))) trading_day='2025-08-21'\n", "record": {"elapsed": {"repr": "0:01:21.404357", "seconds": 81.404357}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 584, "message": "Created PnL model: totals=PnLTotals(realized=0.0, unrealized=-1585810.03, day=-1585810.03, currency='INR') per_symbol=[PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1543, avg=1999.73, ltp=1310.96, unrealized=-1062779.26, today_pnl=-1062779.26), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=613, avg=1989.23, ltp=414.17, unrealized=965514.03, today_pnl=965514.03), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=1709, avg=1838.62, ltp=632.67, unrealized=-2060963.44, today_pnl=-2060963.44), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=697, avg=852.74, ltp=577.58, unrealized=191784.9, today_pnl=191784.9), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=255, avg=915.17, ltp=2407.85, unrealized=380633.74, today_pnl=380633.74)] updated_at=datetime.datetime(2025, 8, 21, 18, 29, 57, 394323, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))) trading_day='2025-08-21'", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:29:57.406332+05:30", "timestamp": 1755781197.406332}}}
{"text": "2025-08-21 18:29:57.408 | DEBUG    | app.services.dhan_client:get_pnl:585 - PnL model fields: {'totals': PnLTotals(realized=0.0, unrealized=-1585810.03, day=-1585810.03, currency='INR'), 'per_symbol': [PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1543, avg=1999.73, ltp=1310.96, unrealized=-1062779.26, today_pnl=-1062779.26), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=613, avg=1989.23, ltp=414.17, unrealized=965514.03, today_pnl=965514.03), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=1709, avg=1838.62, ltp=632.67, unrealized=-2060963.44, today_pnl=-2060963.44), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=697, avg=852.74, ltp=577.58, unrealized=191784.9, today_pnl=191784.9), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=255, avg=915.17, ltp=2407.85, unrealized=380633.74, today_pnl=380633.74)], 'updated_at': datetime.datetime(2025, 8, 21, 18, 29, 57, 394323, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))), 'trading_day': '2025-08-21'}\n", "record": {"elapsed": {"repr": "0:01:21.406076", "seconds": 81.406076}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 585, "message": "PnL model fields: {'totals': PnLTotals(realized=0.0, unrealized=-1585810.03, day=-1585810.03, currency='INR'), 'per_symbol': [PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1543, avg=1999.73, ltp=1310.96, unrealized=-1062779.26, today_pnl=-1062779.26), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=613, avg=1989.23, ltp=414.17, unrealized=965514.03, today_pnl=965514.03), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=1709, avg=1838.62, ltp=632.67, unrealized=-2060963.44, today_pnl=-2060963.44), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=697, avg=852.74, ltp=577.58, unrealized=191784.9, today_pnl=191784.9), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=255, avg=915.17, ltp=2407.85, unrealized=380633.74, today_pnl=380633.74)], 'updated_at': datetime.datetime(2025, 8, 21, 18, 29, 57, 394323, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))), 'trading_day': '2025-08-21'}", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:29:57.408051+05:30", "timestamp": 1755781197.408051}}}
{"text": "2025-08-21 18:29:57.409 | INFO     | app.services.dhan_client:get_pnl:587 - P&L calculation completed successfully: 5 symbols, unrealized=₹-1585810.03\n", "record": {"elapsed": {"repr": "0:01:21.407391", "seconds": 81.407391}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 587, "message": "P&L calculation completed successfully: 5 symbols, unrealized=₹-1585810.03", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:29:57.409366+05:30", "timestamp": 1755781197.409366}}}
{"text": "2025-08-21 18:29:57.410 | DEBUG    | app.ws.live:emit_delta:408 - Emitted pnl delta: seq=111\n", "record": {"elapsed": {"repr": "0:01:21.408788", "seconds": 81.408788}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "emit_delta", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 408, "message": "Emitted pnl delta: seq=111", "module": "live", "name": "app.ws.live", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:29:57.410763+05:30", "timestamp": 1755781197.410763}}}
{"text": "2025-08-21 18:29:57.412 | DEBUG    | app.ws.live:emit_delta:408 - Emitted positions delta: seq=112\n", "record": {"elapsed": {"repr": "0:01:21.410093", "seconds": 81.410093}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "emit_delta", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 408, "message": "Emitted positions delta: seq=112", "module": "live", "name": "app.ws.live", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:29:57.412068+05:30", "timestamp": 1755781197.412068}}}
{"text": "2025-08-21 18:29:58.585 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:01:22.583831", "seconds": 82.583831}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 17632, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 18:29:58.585806+05:30", "timestamp": 1755781198.585806}}}
{"text": "2025-08-21 18:29:58.586 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:01:22.584677", "seconds": 82.584677}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 17632, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 18:29:58.586652+05:30", "timestamp": 1755781198.586652}}}
{"text": "2025-08-21 18:29:58.587 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:01:22.585392", "seconds": 82.585392}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 17632, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 18:29:58.587367+05:30", "timestamp": 1755781198.587367}}}
{"text": "2025-08-21 18:29:58.588 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:01:22.586136", "seconds": 82.586136}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 17632, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 18:29:58.588111+05:30", "timestamp": 1755781198.588111}}}
{"text": "2025-08-21 18:29:58.588 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:01:22.586922", "seconds": 82.586922}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 17632, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 18:29:58.588897+05:30", "timestamp": 1755781198.588897}}}
{"text": "2025-08-21 18:29:58.589 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:01:22.587568", "seconds": 82.587568}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 17632, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 18:29:58.589543+05:30", "timestamp": 1755781198.589543}}}
{"text": "2025-08-21 18:29:58.590 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:01:22.588522", "seconds": 82.588522}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 17632, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 18:29:58.590497+05:30", "timestamp": 1755781198.590497}}}
{"text": "2025-08-21 18:29:58.591 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:01:22.589491", "seconds": 82.589491}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 17632, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 18:29:58.591466+05:30", "timestamp": 1755781198.591466}}}
{"text": "2025-08-21 18:29:58.592 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:01:22.590615", "seconds": 82.590615}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 17632, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 18:29:58.592590+05:30", "timestamp": 1755781198.59259}}}
{"text": "2025-08-21 18:29:58.594 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:01:22.592031", "seconds": 82.592031}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 17632, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 18:29:58.594006+05:30", "timestamp": 1755781198.594006}}}
{"text": "2025-08-21 18:29:58.821 | DEBUG    | app.ws.live:websocket_endpoint:517 - Received WebSocket message: {'type': 'ping', 'clientTime': '2025-08-21T12:59:58.820Z'}\n", "record": {"elapsed": {"repr": "0:01:22.819032", "seconds": 82.819032}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "websocket_endpoint", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 517, "message": "Received WebSocket message: {'type': 'ping', 'clientTime': '2025-08-21T12:59:58.820Z'}", "module": "live", "name": "app.ws.live", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:29:58.821007+05:30", "timestamp": 1755781198.821007}}}
{"text": "2025-08-21 18:29:58.858 | DEBUG    | app.ws.live:websocket_endpoint:517 - Received WebSocket message: {'type': 'ping', 'clientTime': '2025-08-21T12:59:58.857Z'}\n", "record": {"elapsed": {"repr": "0:01:22.856514", "seconds": 82.856514}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "websocket_endpoint", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 517, "message": "Received WebSocket message: {'type': 'ping', 'clientTime': '2025-08-21T12:59:58.857Z'}", "module": "live", "name": "app.ws.live", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:29:58.858489+05:30", "timestamp": 1755781198.858489}}}
{"text": "2025-08-21 18:29:58.940 | INFO     | app.services.dhan_client:get_pnl:489 - Starting accurate P&L calculation\n", "record": {"elapsed": {"repr": "0:01:22.938902", "seconds": 82.938902}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 489, "message": "Starting accurate P&L calculation", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:29:58.940877+05:30", "timestamp": 1755781198.940877}}}
{"text": "2025-08-21 18:29:58.942 | INFO     | app.services.dhan_client:get_pnl:491 - Fetched 5 positions\n", "record": {"elapsed": {"repr": "0:01:22.940136", "seconds": 82.940136}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 491, "message": "Fetched 5 positions", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:29:58.942111+05:30", "timestamp": 1755781198.942111}}}
{"text": "2025-08-21 18:29:58.943 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for RELIANCE: unrealized=-1078686.25, today=-1078686.25\n", "record": {"elapsed": {"repr": "0:01:22.941389", "seconds": 82.941389}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for RELIANCE: unrealized=-1078686.25, today=-1078686.25", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:29:58.943364+05:30", "timestamp": 1755781198.943364}}}
{"text": "2025-08-21 18:29:58.944 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for TCS: unrealized=969940.96, today=969940.96\n", "record": {"elapsed": {"repr": "0:01:22.942386", "seconds": 82.942386}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for TCS: unrealized=969940.96, today=969940.96", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:29:58.944361+05:30", "timestamp": 1755781198.944361}}}
{"text": "2025-08-21 18:29:58.945 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for HDFC: unrealized=-2064870.15, today=-2064870.15\n", "record": {"elapsed": {"repr": "0:01:22.943653", "seconds": 82.943653}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for HDFC: unrealized=-2064870.15, today=-2064870.15", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:29:58.945628+05:30", "timestamp": 1755781198.945628}}}
{"text": "2025-08-21 18:29:58.946 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for INFY: unrealized=195481.3, today=195481.3\n", "record": {"elapsed": {"repr": "0:01:22.944562", "seconds": 82.944562}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for INFY: unrealized=195481.3, today=195481.3", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:29:58.946537+05:30", "timestamp": 1755781198.946537}}}
{"text": "2025-08-21 18:29:58.947 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for ICICIBANK: unrealized=378194.92, today=378194.92\n", "record": {"elapsed": {"repr": "0:01:22.945846", "seconds": 82.945846}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for ICICIBANK: unrealized=378194.92, today=378194.92", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:29:58.947821+05:30", "timestamp": 1755781198.947821}}}
{"text": "2025-08-21 18:29:58.948 | INFO     | app.services.dhan_client:get_pnl:545 - Calculated totals - realized: 0.0, unrealized: -1599939.22, day: -1599939.22\n", "record": {"elapsed": {"repr": "0:01:22.946573", "seconds": 82.946573}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 545, "message": "Calculated totals - realized: 0.0, unrealized: -1599939.22, day: -1599939.22", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:29:58.948548+05:30", "timestamp": 1755781198.948548}}}
{"text": "2025-08-21 18:29:58.949 | DEBUG    | app.services.dhan_client:get_pnl:554 - PnL consistency check passed: drift=₹0.00\n", "record": {"elapsed": {"repr": "0:01:22.947500", "seconds": 82.9475}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 554, "message": "PnL consistency check passed: drift=₹0.00", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:29:58.949475+05:30", "timestamp": 1755781198.949475}}}
{"text": "2025-08-21 18:29:58.950 | DEBUG    | app.services.dhan_client:get_pnl:558 - Creating PnLTotals...\n", "record": {"elapsed": {"repr": "0:01:22.948331", "seconds": 82.948331}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 558, "message": "Creating PnLTotals...", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:29:58.950306+05:30", "timestamp": 1755781198.950306}}}
{"text": "2025-08-21 18:29:58.951 | DEBUG    | app.services.dhan_client:get_pnl:565 - PnLTotals created successfully\n", "record": {"elapsed": {"repr": "0:01:22.949093", "seconds": 82.949093}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 565, "message": "PnLTotals created successfully", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:29:58.951068+05:30", "timestamp": 1755781198.951068}}}
{"text": "2025-08-21 18:29:58.951 | DEBUG    | app.services.dhan_client:get_pnl:574 - Creating PnL model...\n", "record": {"elapsed": {"repr": "0:01:22.949979", "seconds": 82.949979}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 574, "message": "Creating PnL model...", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:29:58.951954+05:30", "timestamp": 1755781198.951954}}}
{"text": "2025-08-21 18:29:58.952 | DEBUG    | app.services.dhan_client:get_pnl:575 - Model fields: totals=<class 'app.models.schemas.PnLTotals'>, perSymbol=5, updated_at=2025-08-21 18:29:58.943240+05:30, trading_day=2025-08-21\n", "record": {"elapsed": {"repr": "0:01:22.950922", "seconds": 82.950922}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 575, "message": "Model fields: totals=<class 'app.models.schemas.PnLTotals'>, perSymbol=5, updated_at=2025-08-21 18:29:58.943240+05:30, trading_day=2025-08-21", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:29:58.952897+05:30", "timestamp": 1755781198.952897}}}
{"text": "2025-08-21 18:29:58.954 | DEBUG    | app.services.dhan_client:get_pnl:584 - Created PnL model: totals=PnLTotals(realized=0.0, unrealized=-1599939.22, day=-1599939.22, currency='INR') per_symbol=[PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1543, avg=1999.73, ltp=1300.65, unrealized=-1078686.25, today_pnl=-1078686.25), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=613, avg=1989.23, ltp=406.94, unrealized=969940.96, today_pnl=969940.96), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=1709, avg=1838.62, ltp=630.39, unrealized=-2064870.15, today_pnl=-2064870.15), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=697, avg=852.74, ltp=572.28, unrealized=195481.3, today_pnl=195481.3), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=255, avg=915.17, ltp=2398.29, unrealized=378194.92, today_pnl=378194.92)] updated_at=datetime.datetime(2025, 8, 21, 18, 29, 58, 943240, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))) trading_day='2025-08-21'\n", "record": {"elapsed": {"repr": "0:01:22.952101", "seconds": 82.952101}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 584, "message": "Created PnL model: totals=PnLTotals(realized=0.0, unrealized=-1599939.22, day=-1599939.22, currency='INR') per_symbol=[PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1543, avg=1999.73, ltp=1300.65, unrealized=-1078686.25, today_pnl=-1078686.25), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=613, avg=1989.23, ltp=406.94, unrealized=969940.96, today_pnl=969940.96), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=1709, avg=1838.62, ltp=630.39, unrealized=-2064870.15, today_pnl=-2064870.15), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=697, avg=852.74, ltp=572.28, unrealized=195481.3, today_pnl=195481.3), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=255, avg=915.17, ltp=2398.29, unrealized=378194.92, today_pnl=378194.92)] updated_at=datetime.datetime(2025, 8, 21, 18, 29, 58, 943240, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))) trading_day='2025-08-21'", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:29:58.954076+05:30", "timestamp": 1755781198.954076}}}
{"text": "2025-08-21 18:29:58.955 | DEBUG    | app.services.dhan_client:get_pnl:585 - PnL model fields: {'totals': PnLTotals(realized=0.0, unrealized=-1599939.22, day=-1599939.22, currency='INR'), 'per_symbol': [PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1543, avg=1999.73, ltp=1300.65, unrealized=-1078686.25, today_pnl=-1078686.25), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=613, avg=1989.23, ltp=406.94, unrealized=969940.96, today_pnl=969940.96), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=1709, avg=1838.62, ltp=630.39, unrealized=-2064870.15, today_pnl=-2064870.15), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=697, avg=852.74, ltp=572.28, unrealized=195481.3, today_pnl=195481.3), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=255, avg=915.17, ltp=2398.29, unrealized=378194.92, today_pnl=378194.92)], 'updated_at': datetime.datetime(2025, 8, 21, 18, 29, 58, 943240, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))), 'trading_day': '2025-08-21'}\n", "record": {"elapsed": {"repr": "0:01:22.953515", "seconds": 82.953515}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 585, "message": "PnL model fields: {'totals': PnLTotals(realized=0.0, unrealized=-1599939.22, day=-1599939.22, currency='INR'), 'per_symbol': [PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1543, avg=1999.73, ltp=1300.65, unrealized=-1078686.25, today_pnl=-1078686.25), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=613, avg=1989.23, ltp=406.94, unrealized=969940.96, today_pnl=969940.96), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=1709, avg=1838.62, ltp=630.39, unrealized=-2064870.15, today_pnl=-2064870.15), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=697, avg=852.74, ltp=572.28, unrealized=195481.3, today_pnl=195481.3), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=255, avg=915.17, ltp=2398.29, unrealized=378194.92, today_pnl=378194.92)], 'updated_at': datetime.datetime(2025, 8, 21, 18, 29, 58, 943240, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))), 'trading_day': '2025-08-21'}", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:29:58.955490+05:30", "timestamp": 1755781198.95549}}}
{"text": "2025-08-21 18:29:58.957 | INFO     | app.services.dhan_client:get_pnl:587 - P&L calculation completed successfully: 5 symbols, unrealized=₹-1599939.22\n", "record": {"elapsed": {"repr": "0:01:22.955931", "seconds": 82.955931}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 587, "message": "P&L calculation completed successfully: 5 symbols, unrealized=₹-1599939.22", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:29:58.957906+05:30", "timestamp": 1755781198.957906}}}
{"text": "2025-08-21 18:29:58.958 | DEBUG    | app.ws.live:emit_delta:408 - Emitted pnl delta: seq=113\n", "record": {"elapsed": {"repr": "0:01:22.956754", "seconds": 82.956754}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "emit_delta", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 408, "message": "Emitted pnl delta: seq=113", "module": "live", "name": "app.ws.live", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:29:58.958729+05:30", "timestamp": 1755781198.958729}}}
{"text": "2025-08-21 18:29:58.960 | DEBUG    | app.ws.live:emit_delta:408 - Emitted positions delta: seq=114\n", "record": {"elapsed": {"repr": "0:01:22.958067", "seconds": 82.958067}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "emit_delta", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 408, "message": "Emitted positions delta: seq=114", "module": "live", "name": "app.ws.live", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:29:58.960042+05:30", "timestamp": 1755781198.960042}}}
{"text": "2025-08-21 18:29:59.788 | INFO     | app.ws.live:connect:226 - WebSocket connected: 127.0.0.1\n", "record": {"elapsed": {"repr": "0:01:23.786619", "seconds": 83.786619}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "connect", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 226, "message": "WebSocket connected: 127.0.0.1", "module": "live", "name": "app.ws.live", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:29:59.788594+05:30", "timestamp": 1755781199.788594}}}
{"text": "2025-08-21 18:29:59.954 | INFO     | app.ws.live:connect:226 - WebSocket connected: 127.0.0.1\n", "record": {"elapsed": {"repr": "0:01:23.952640", "seconds": 83.95264}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "connect", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 226, "message": "WebSocket connected: 127.0.0.1", "module": "live", "name": "app.ws.live", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:29:59.954615+05:30", "timestamp": 1755781199.954615}}}
{"text": "2025-08-21 18:29:59.980 | INFO     | app.ws.live:connect:226 - WebSocket connected: 127.0.0.1\n", "record": {"elapsed": {"repr": "0:01:23.978478", "seconds": 83.978478}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "connect", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 226, "message": "WebSocket connected: 127.0.0.1", "module": "live", "name": "app.ws.live", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:29:59.980453+05:30", "timestamp": 1755781199.980453}}}
{"text": "2025-08-21 18:30:00.002 | INFO     | app.ws.live:connect:226 - WebSocket connected: 127.0.0.1\n", "record": {"elapsed": {"repr": "0:01:24.000517", "seconds": 84.000517}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "connect", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 226, "message": "WebSocket connected: 127.0.0.1", "module": "live", "name": "app.ws.live", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:30:00.002492+05:30", "timestamp": 1755781200.002492}}}
{"text": "2025-08-21 18:30:00.163 | INFO     | app.ws.live:connect:226 - WebSocket connected: 127.0.0.1\n", "record": {"elapsed": {"repr": "0:01:24.161130", "seconds": 84.16113}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "connect", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 226, "message": "WebSocket connected: 127.0.0.1", "module": "live", "name": "app.ws.live", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:30:00.163105+05:30", "timestamp": 1755781200.163105}}}
{"text": "2025-08-21 18:30:00.190 | INFO     | app.ws.live:connect:226 - WebSocket connected: 127.0.0.1\n", "record": {"elapsed": {"repr": "0:01:24.188359", "seconds": 84.188359}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "connect", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 226, "message": "WebSocket connected: 127.0.0.1", "module": "live", "name": "app.ws.live", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:30:00.190334+05:30", "timestamp": 1755781200.190334}}}
{"text": "2025-08-21 18:30:00.212 | INFO     | app.ws.live:connect:226 - WebSocket connected: 127.0.0.1\n", "record": {"elapsed": {"repr": "0:01:24.210822", "seconds": 84.210822}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "connect", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 226, "message": "WebSocket connected: 127.0.0.1", "module": "live", "name": "app.ws.live", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:30:00.212797+05:30", "timestamp": 1755781200.212797}}}
{"text": "2025-08-21 18:30:00.233 | INFO     | app.ws.live:connect:226 - WebSocket connected: 127.0.0.1\n", "record": {"elapsed": {"repr": "0:01:24.231053", "seconds": 84.231053}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "connect", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 226, "message": "WebSocket connected: 127.0.0.1", "module": "live", "name": "app.ws.live", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:30:00.233028+05:30", "timestamp": 1755781200.233028}}}
{"text": "2025-08-21 18:30:00.276 | INFO     | app.ws.live:connect:226 - WebSocket connected: 127.0.0.1\n", "record": {"elapsed": {"repr": "0:01:24.274626", "seconds": 84.274626}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "connect", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 226, "message": "WebSocket connected: 127.0.0.1", "module": "live", "name": "app.ws.live", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:30:00.276601+05:30", "timestamp": 1755781200.276601}}}
{"text": "2025-08-21 18:30:00.311 | INFO     | app.ws.live:connect:226 - WebSocket connected: 127.0.0.1\n", "record": {"elapsed": {"repr": "0:01:24.309968", "seconds": 84.309968}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "connect", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 226, "message": "WebSocket connected: 127.0.0.1", "module": "live", "name": "app.ws.live", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:30:00.311943+05:30", "timestamp": 1755781200.311943}}}
{"text": "2025-08-21 18:30:00.369 | INFO     | app.ws.live:connect:226 - WebSocket connected: 127.0.0.1\n", "record": {"elapsed": {"repr": "0:01:24.367653", "seconds": 84.367653}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "connect", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 226, "message": "WebSocket connected: 127.0.0.1", "module": "live", "name": "app.ws.live", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:30:00.369628+05:30", "timestamp": 1755781200.369628}}}
{"text": "2025-08-21 18:30:00.396 | INFO     | app.ws.live:connect:226 - WebSocket connected: 127.0.0.1\n", "record": {"elapsed": {"repr": "0:01:24.394134", "seconds": 84.394134}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "connect", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 226, "message": "WebSocket connected: 127.0.0.1", "module": "live", "name": "app.ws.live", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:30:00.396109+05:30", "timestamp": 1755781200.396109}}}
{"text": "2025-08-21 18:30:00.596 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:01:24.594484", "seconds": 84.594484}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 17632, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 18:30:00.596459+05:30", "timestamp": 1755781200.596459}}}
{"text": "2025-08-21 18:30:00.597 | INFO     | app.ws.live:connect:226 - WebSocket connected: 127.0.0.1\n", "record": {"elapsed": {"repr": "0:01:24.595591", "seconds": 84.595591}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "connect", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 226, "message": "WebSocket connected: 127.0.0.1", "module": "live", "name": "app.ws.live", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:30:00.597566+05:30", "timestamp": 1755781200.597566}}}
{"text": "2025-08-21 18:30:00.598 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:01:24.596233", "seconds": 84.596233}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 17632, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 18:30:00.598208+05:30", "timestamp": 1755781200.598208}}}
{"text": "2025-08-21 18:30:00.599 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:01:24.597966", "seconds": 84.597966}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 17632, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 18:30:00.599941+05:30", "timestamp": 1755781200.599941}}}
{"text": "2025-08-21 18:30:00.601 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:01:24.599466", "seconds": 84.599466}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 17632, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 18:30:00.601441+05:30", "timestamp": 1755781200.601441}}}
{"text": "2025-08-21 18:30:00.602 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:01:24.600505", "seconds": 84.600505}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 17632, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 18:30:00.602480+05:30", "timestamp": 1755781200.60248}}}
{"text": "2025-08-21 18:30:00.604 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:01:24.602280", "seconds": 84.60228}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 17632, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 18:30:00.604255+05:30", "timestamp": 1755781200.604255}}}
{"text": "2025-08-21 18:30:00.605 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:01:24.603670", "seconds": 84.60367}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 17632, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 18:30:00.605645+05:30", "timestamp": 1755781200.605645}}}
{"text": "2025-08-21 18:30:00.608 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:01:24.606791", "seconds": 84.606791}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 17632, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 18:30:00.608766+05:30", "timestamp": 1755781200.608766}}}
{"text": "2025-08-21 18:30:00.609 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:01:24.607563", "seconds": 84.607563}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 17632, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 18:30:00.609538+05:30", "timestamp": 1755781200.609538}}}
{"text": "2025-08-21 18:30:00.611 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:01:24.609106", "seconds": 84.609106}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 17632, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 18:30:00.611081+05:30", "timestamp": 1755781200.611081}}}
{"text": "2025-08-21 18:30:00.624 | INFO     | app.ws.live:connect:226 - WebSocket connected: 127.0.0.1\n", "record": {"elapsed": {"repr": "0:01:24.622533", "seconds": 84.622533}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "connect", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 226, "message": "WebSocket connected: 127.0.0.1", "module": "live", "name": "app.ws.live", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:30:00.624508+05:30", "timestamp": 1755781200.624508}}}
{"text": "2025-08-21 18:30:00.645 | INFO     | app.ws.live:connect:226 - WebSocket connected: 127.0.0.1\n", "record": {"elapsed": {"repr": "0:01:24.643454", "seconds": 84.643454}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "connect", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 226, "message": "WebSocket connected: 127.0.0.1", "module": "live", "name": "app.ws.live", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:30:00.645429+05:30", "timestamp": 1755781200.645429}}}
{"text": "2025-08-21 18:30:00.669 | INFO     | app.ws.live:connect:226 - WebSocket connected: 127.0.0.1\n", "record": {"elapsed": {"repr": "0:01:24.667292", "seconds": 84.667292}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "connect", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 226, "message": "WebSocket connected: 127.0.0.1", "module": "live", "name": "app.ws.live", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:30:00.669267+05:30", "timestamp": 1755781200.669267}}}
{"text": "2025-08-21 18:30:00.691 | INFO     | app.ws.live:connect:226 - WebSocket connected: 127.0.0.1\n", "record": {"elapsed": {"repr": "0:01:24.689691", "seconds": 84.689691}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "connect", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 226, "message": "WebSocket connected: 127.0.0.1", "module": "live", "name": "app.ws.live", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:30:00.691666+05:30", "timestamp": 1755781200.691666}}}
{"text": "2025-08-21 18:30:00.712 | INFO     | app.ws.live:connect:226 - WebSocket connected: 127.0.0.1\n", "record": {"elapsed": {"repr": "0:01:24.710966", "seconds": 84.710966}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "connect", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 226, "message": "WebSocket connected: 127.0.0.1", "module": "live", "name": "app.ws.live", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:30:00.712941+05:30", "timestamp": 1755781200.712941}}}
{"text": "2025-08-21 18:30:00.730 | INFO     | app.ws.live:connect:226 - WebSocket connected: 127.0.0.1\n", "record": {"elapsed": {"repr": "0:01:24.728857", "seconds": 84.728857}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "connect", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 226, "message": "WebSocket connected: 127.0.0.1", "module": "live", "name": "app.ws.live", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:30:00.730832+05:30", "timestamp": 1755781200.730832}}}
{"text": "2025-08-21 18:30:00.764 | INFO     | app.services.dhan_client:get_pnl:489 - Starting accurate P&L calculation\n", "record": {"elapsed": {"repr": "0:01:24.763019", "seconds": 84.763019}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 489, "message": "Starting accurate P&L calculation", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:30:00.764994+05:30", "timestamp": 1755781200.764994}}}
{"text": "2025-08-21 18:30:00.766 | INFO     | app.services.dhan_client:get_pnl:491 - Fetched 5 positions\n", "record": {"elapsed": {"repr": "0:01:24.764085", "seconds": 84.764085}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 491, "message": "Fetched 5 positions", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:30:00.766060+05:30", "timestamp": 1755781200.76606}}}
{"text": "2025-08-21 18:30:00.766 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for RELIANCE: unrealized=-1053238.38, today=-1053238.38\n", "record": {"elapsed": {"repr": "0:01:24.764920", "seconds": 84.76492}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for RELIANCE: unrealized=-1053238.38, today=-1053238.38", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:30:00.766895+05:30", "timestamp": 1755781200.766895}}}
{"text": "2025-08-21 18:30:00.767 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for TCS: unrealized=965457.27, today=965457.27\n", "record": {"elapsed": {"repr": "0:01:24.765751", "seconds": 84.765751}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for TCS: unrealized=965457.27, today=965457.27", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:30:00.767726+05:30", "timestamp": 1755781200.767726}}}
{"text": "2025-08-21 18:30:00.768 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for HDFC: unrealized=-2050375.8, today=-2050375.8\n", "record": {"elapsed": {"repr": "0:01:24.767012", "seconds": 84.767012}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for HDFC: unrealized=-2050375.8, today=-2050375.8", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:30:00.768987+05:30", "timestamp": 1755781200.768987}}}
{"text": "2025-08-21 18:30:00.770 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for INFY: unrealized=202029.02, today=202029.02\n", "record": {"elapsed": {"repr": "0:01:24.768564", "seconds": 84.768564}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for INFY: unrealized=202029.02, today=202029.02", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:30:00.770539+05:30", "timestamp": 1755781200.770539}}}
{"text": "2025-08-21 18:30:00.771 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for ICICIBANK: unrealized=389194.48, today=389194.48\n", "record": {"elapsed": {"repr": "0:01:24.769851", "seconds": 84.769851}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for ICICIBANK: unrealized=389194.48, today=389194.48", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:30:00.771826+05:30", "timestamp": 1755781200.771826}}}
{"text": "2025-08-21 18:30:00.773 | INFO     | app.services.dhan_client:get_pnl:545 - Calculated totals - realized: 0.0, unrealized: -1546933.41, day: -1546933.41\n", "record": {"elapsed": {"repr": "0:01:24.771931", "seconds": 84.771931}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 545, "message": "Calculated totals - realized: 0.0, unrealized: -1546933.41, day: -1546933.41", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:30:00.773906+05:30", "timestamp": 1755781200.773906}}}
{"text": "2025-08-21 18:30:00.776 | DEBUG    | app.services.dhan_client:get_pnl:554 - PnL consistency check passed: drift=₹0.00\n", "record": {"elapsed": {"repr": "0:01:24.774396", "seconds": 84.774396}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 554, "message": "PnL consistency check passed: drift=₹0.00", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:30:00.776371+05:30", "timestamp": 1755781200.776371}}}
{"text": "2025-08-21 18:30:00.777 | DEBUG    | app.services.dhan_client:get_pnl:558 - Creating PnLTotals...\n", "record": {"elapsed": {"repr": "0:01:24.775643", "seconds": 84.775643}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 558, "message": "Creating PnLTotals...", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:30:00.777618+05:30", "timestamp": 1755781200.777618}}}
{"text": "2025-08-21 18:30:00.778 | DEBUG    | app.services.dhan_client:get_pnl:565 - PnLTotals created successfully\n", "record": {"elapsed": {"repr": "0:01:24.776449", "seconds": 84.776449}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 565, "message": "PnLTotals created successfully", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:30:00.778424+05:30", "timestamp": 1755781200.778424}}}
{"text": "2025-08-21 18:30:00.781 | DEBUG    | app.services.dhan_client:get_pnl:574 - Creating PnL model...\n", "record": {"elapsed": {"repr": "0:01:24.779399", "seconds": 84.779399}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 574, "message": "Creating PnL model...", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:30:00.781374+05:30", "timestamp": 1755781200.781374}}}
{"text": "2025-08-21 18:30:00.783 | DEBUG    | app.services.dhan_client:get_pnl:575 - Model fields: totals=<class 'app.models.schemas.PnLTotals'>, perSymbol=5, updated_at=2025-08-21 18:30:00.766776+05:30, trading_day=2025-08-21\n", "record": {"elapsed": {"repr": "0:01:24.781319", "seconds": 84.781319}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 575, "message": "Model fields: totals=<class 'app.models.schemas.PnLTotals'>, perSymbol=5, updated_at=2025-08-21 18:30:00.766776+05:30, trading_day=2025-08-21", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:30:00.783294+05:30", "timestamp": 1755781200.783294}}}
{"text": "2025-08-21 18:30:00.784 | DEBUG    | app.services.dhan_client:get_pnl:584 - Created PnL model: totals=PnLTotals(realized=0.0, unrealized=-1546933.41, day=-1546933.41, currency='INR') per_symbol=[PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1543, avg=1999.73, ltp=1317.14, unrealized=-1053238.38, today_pnl=-1053238.38), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=613, avg=1989.23, ltp=414.26, unrealized=965457.27, today_pnl=965457.27), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=1709, avg=1838.62, ltp=638.87, unrealized=-2050375.8, today_pnl=-2050375.8), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=697, avg=852.74, ltp=562.88, unrealized=202029.02, today_pnl=202029.02), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=255, avg=915.17, ltp=2441.42, unrealized=389194.48, today_pnl=389194.48)] updated_at=datetime.datetime(2025, 8, 21, 18, 30, 0, 766776, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))) trading_day='2025-08-21'\n", "record": {"elapsed": {"repr": "0:01:24.782714", "seconds": 84.782714}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 584, "message": "Created PnL model: totals=PnLTotals(realized=0.0, unrealized=-1546933.41, day=-1546933.41, currency='INR') per_symbol=[PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1543, avg=1999.73, ltp=1317.14, unrealized=-1053238.38, today_pnl=-1053238.38), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=613, avg=1989.23, ltp=414.26, unrealized=965457.27, today_pnl=965457.27), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=1709, avg=1838.62, ltp=638.87, unrealized=-2050375.8, today_pnl=-2050375.8), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=697, avg=852.74, ltp=562.88, unrealized=202029.02, today_pnl=202029.02), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=255, avg=915.17, ltp=2441.42, unrealized=389194.48, today_pnl=389194.48)] updated_at=datetime.datetime(2025, 8, 21, 18, 30, 0, 766776, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))) trading_day='2025-08-21'", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:30:00.784689+05:30", "timestamp": 1755781200.784689}}}
{"text": "2025-08-21 18:30:00.786 | DEBUG    | app.services.dhan_client:get_pnl:585 - PnL model fields: {'totals': PnLTotals(realized=0.0, unrealized=-1546933.41, day=-1546933.41, currency='INR'), 'per_symbol': [PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1543, avg=1999.73, ltp=1317.14, unrealized=-1053238.38, today_pnl=-1053238.38), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=613, avg=1989.23, ltp=414.26, unrealized=965457.27, today_pnl=965457.27), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=1709, avg=1838.62, ltp=638.87, unrealized=-2050375.8, today_pnl=-2050375.8), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=697, avg=852.74, ltp=562.88, unrealized=202029.02, today_pnl=202029.02), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=255, avg=915.17, ltp=2441.42, unrealized=389194.48, today_pnl=389194.48)], 'updated_at': datetime.datetime(2025, 8, 21, 18, 30, 0, 766776, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))), 'trading_day': '2025-08-21'}\n", "record": {"elapsed": {"repr": "0:01:24.784291", "seconds": 84.784291}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 585, "message": "PnL model fields: {'totals': PnLTotals(realized=0.0, unrealized=-1546933.41, day=-1546933.41, currency='INR'), 'per_symbol': [PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1543, avg=1999.73, ltp=1317.14, unrealized=-1053238.38, today_pnl=-1053238.38), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=613, avg=1989.23, ltp=414.26, unrealized=965457.27, today_pnl=965457.27), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=1709, avg=1838.62, ltp=638.87, unrealized=-2050375.8, today_pnl=-2050375.8), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=697, avg=852.74, ltp=562.88, unrealized=202029.02, today_pnl=202029.02), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=255, avg=915.17, ltp=2441.42, unrealized=389194.48, today_pnl=389194.48)], 'updated_at': datetime.datetime(2025, 8, 21, 18, 30, 0, 766776, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))), 'trading_day': '2025-08-21'}", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:30:00.786266+05:30", "timestamp": 1755781200.786266}}}
{"text": "2025-08-21 18:30:00.787 | INFO     | app.services.dhan_client:get_pnl:587 - P&L calculation completed successfully: 5 symbols, unrealized=₹-1546933.41\n", "record": {"elapsed": {"repr": "0:01:24.785315", "seconds": 84.785315}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 587, "message": "P&L calculation completed successfully: 5 symbols, unrealized=₹-1546933.41", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:30:00.787290+05:30", "timestamp": 1755781200.78729}}}
{"text": "2025-08-21 18:30:00.788 | ERROR    | app.ws.live:broadcast:253 - Failed to broadcast to client: Object of type PnLTotals is not JSON serializable\n", "record": {"elapsed": {"repr": "0:01:24.786488", "seconds": 84.786488}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "broadcast", "level": {"icon": "❌", "name": "ERROR", "no": 40}, "line": 253, "message": "Failed to broadcast to client: Object of type PnLTotals is not JSON serializable", "module": "live", "name": "app.ws.live", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:30:00.788463+05:30", "timestamp": 1755781200.788463}}}
{"text": "2025-08-21 18:30:00.789 | ERROR    | app.ws.live:broadcast:253 - Failed to broadcast to client: Object of type PnLTotals is not JSON serializable\n", "record": {"elapsed": {"repr": "0:01:24.787313", "seconds": 84.787313}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "broadcast", "level": {"icon": "❌", "name": "ERROR", "no": 40}, "line": 253, "message": "Failed to broadcast to client: Object of type PnLTotals is not JSON serializable", "module": "live", "name": "app.ws.live", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:30:00.789288+05:30", "timestamp": 1755781200.789288}}}
{"text": "2025-08-21 18:30:00.790 | ERROR    | app.ws.live:broadcast:253 - Failed to broadcast to client: Object of type PnLTotals is not JSON serializable\n", "record": {"elapsed": {"repr": "0:01:24.788542", "seconds": 84.788542}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "broadcast", "level": {"icon": "❌", "name": "ERROR", "no": 40}, "line": 253, "message": "Failed to broadcast to client: Object of type PnLTotals is not JSON serializable", "module": "live", "name": "app.ws.live", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:30:00.790517+05:30", "timestamp": 1755781200.790517}}}
{"text": "2025-08-21 18:30:00.791 | ERROR    | app.ws.live:broadcast:253 - Failed to broadcast to client: Object of type PnLTotals is not JSON serializable\n", "record": {"elapsed": {"repr": "0:01:24.789351", "seconds": 84.789351}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "broadcast", "level": {"icon": "❌", "name": "ERROR", "no": 40}, "line": 253, "message": "Failed to broadcast to client: Object of type PnLTotals is not JSON serializable", "module": "live", "name": "app.ws.live", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:30:00.791326+05:30", "timestamp": 1755781200.791326}}}
{"text": "2025-08-21 18:30:00.792 | ERROR    | app.ws.live:broadcast:253 - Failed to broadcast to client: Object of type PnLTotals is not JSON serializable\n", "record": {"elapsed": {"repr": "0:01:24.790262", "seconds": 84.790262}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "broadcast", "level": {"icon": "❌", "name": "ERROR", "no": 40}, "line": 253, "message": "Failed to broadcast to client: Object of type PnLTotals is not JSON serializable", "module": "live", "name": "app.ws.live", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:30:00.792237+05:30", "timestamp": 1755781200.792237}}}
{"text": "2025-08-21 18:30:00.793 | ERROR    | app.ws.live:broadcast:253 - Failed to broadcast to client: Object of type PnLTotals is not JSON serializable\n", "record": {"elapsed": {"repr": "0:01:24.791230", "seconds": 84.79123}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "broadcast", "level": {"icon": "❌", "name": "ERROR", "no": 40}, "line": 253, "message": "Failed to broadcast to client: Object of type PnLTotals is not JSON serializable", "module": "live", "name": "app.ws.live", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:30:00.793205+05:30", "timestamp": 1755781200.793205}}}
{"text": "2025-08-21 18:30:00.794 | ERROR    | app.ws.live:broadcast:253 - Failed to broadcast to client: Object of type PnLTotals is not JSON serializable\n", "record": {"elapsed": {"repr": "0:01:24.792028", "seconds": 84.792028}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "broadcast", "level": {"icon": "❌", "name": "ERROR", "no": 40}, "line": 253, "message": "Failed to broadcast to client: Object of type PnLTotals is not JSON serializable", "module": "live", "name": "app.ws.live", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:30:00.794003+05:30", "timestamp": 1755781200.794003}}}
{"text": "2025-08-21 18:30:00.794 | ERROR    | app.ws.live:broadcast:253 - Failed to broadcast to client: Object of type PnLTotals is not JSON serializable\n", "record": {"elapsed": {"repr": "0:01:24.792865", "seconds": 84.792865}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "broadcast", "level": {"icon": "❌", "name": "ERROR", "no": 40}, "line": 253, "message": "Failed to broadcast to client: Object of type PnLTotals is not JSON serializable", "module": "live", "name": "app.ws.live", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:30:00.794840+05:30", "timestamp": 1755781200.79484}}}
{"text": "2025-08-21 18:30:00.795 | ERROR    | app.ws.live:broadcast:253 - Failed to broadcast to client: Object of type PnLTotals is not JSON serializable\n", "record": {"elapsed": {"repr": "0:01:24.793621", "seconds": 84.793621}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "broadcast", "level": {"icon": "❌", "name": "ERROR", "no": 40}, "line": 253, "message": "Failed to broadcast to client: Object of type PnLTotals is not JSON serializable", "module": "live", "name": "app.ws.live", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:30:00.795596+05:30", "timestamp": 1755781200.795596}}}
{"text": "2025-08-21 18:30:00.796 | ERROR    | app.ws.live:broadcast:253 - Failed to broadcast to client: Object of type PnLTotals is not JSON serializable\n", "record": {"elapsed": {"repr": "0:01:24.794623", "seconds": 84.794623}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "broadcast", "level": {"icon": "❌", "name": "ERROR", "no": 40}, "line": 253, "message": "Failed to broadcast to client: Object of type PnLTotals is not JSON serializable", "module": "live", "name": "app.ws.live", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:30:00.796598+05:30", "timestamp": 1755781200.796598}}}
{"text": "2025-08-21 18:30:00.798 | ERROR    | app.ws.live:broadcast:253 - Failed to broadcast to client: Object of type PnLTotals is not JSON serializable\n", "record": {"elapsed": {"repr": "0:01:24.796926", "seconds": 84.796926}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "broadcast", "level": {"icon": "❌", "name": "ERROR", "no": 40}, "line": 253, "message": "Failed to broadcast to client: Object of type PnLTotals is not JSON serializable", "module": "live", "name": "app.ws.live", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:30:00.798901+05:30", "timestamp": 1755781200.798901}}}
{"text": "2025-08-21 18:30:00.800 | ERROR    | app.ws.live:broadcast:253 - Failed to broadcast to client: Object of type PnLTotals is not JSON serializable\n", "record": {"elapsed": {"repr": "0:01:24.798139", "seconds": 84.798139}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "broadcast", "level": {"icon": "❌", "name": "ERROR", "no": 40}, "line": 253, "message": "Failed to broadcast to client: Object of type PnLTotals is not JSON serializable", "module": "live", "name": "app.ws.live", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:30:00.800114+05:30", "timestamp": 1755781200.800114}}}
{"text": "2025-08-21 18:30:00.802 | ERROR    | app.ws.live:broadcast:253 - Failed to broadcast to client: Object of type PnLTotals is not JSON serializable\n", "record": {"elapsed": {"repr": "0:01:24.800234", "seconds": 84.800234}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "broadcast", "level": {"icon": "❌", "name": "ERROR", "no": 40}, "line": 253, "message": "Failed to broadcast to client: Object of type PnLTotals is not JSON serializable", "module": "live", "name": "app.ws.live", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:30:00.802209+05:30", "timestamp": 1755781200.802209}}}
{"text": "2025-08-21 18:30:00.803 | ERROR    | app.ws.live:broadcast:253 - Failed to broadcast to client: Object of type PnLTotals is not JSON serializable\n", "record": {"elapsed": {"repr": "0:01:24.801069", "seconds": 84.801069}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "broadcast", "level": {"icon": "❌", "name": "ERROR", "no": 40}, "line": 253, "message": "Failed to broadcast to client: Object of type PnLTotals is not JSON serializable", "module": "live", "name": "app.ws.live", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:30:00.803044+05:30", "timestamp": 1755781200.803044}}}
{"text": "2025-08-21 18:30:00.803 | ERROR    | app.ws.live:broadcast:253 - Failed to broadcast to client: Object of type PnLTotals is not JSON serializable\n", "record": {"elapsed": {"repr": "0:01:24.801912", "seconds": 84.801912}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "broadcast", "level": {"icon": "❌", "name": "ERROR", "no": 40}, "line": 253, "message": "Failed to broadcast to client: Object of type PnLTotals is not JSON serializable", "module": "live", "name": "app.ws.live", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:30:00.803887+05:30", "timestamp": 1755781200.803887}}}
{"text": "2025-08-21 18:30:00.805 | ERROR    | app.ws.live:broadcast:253 - Failed to broadcast to client: Object of type PnLTotals is not JSON serializable\n", "record": {"elapsed": {"repr": "0:01:24.803363", "seconds": 84.803363}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "broadcast", "level": {"icon": "❌", "name": "ERROR", "no": 40}, "line": 253, "message": "Failed to broadcast to client: Object of type PnLTotals is not JSON serializable", "module": "live", "name": "app.ws.live", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:30:00.805338+05:30", "timestamp": 1755781200.805338}}}
{"text": "2025-08-21 18:30:00.807 | ERROR    | app.ws.live:broadcast:253 - Failed to broadcast to client: Object of type PnLTotals is not JSON serializable\n", "record": {"elapsed": {"repr": "0:01:24.805154", "seconds": 84.805154}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "broadcast", "level": {"icon": "❌", "name": "ERROR", "no": 40}, "line": 253, "message": "Failed to broadcast to client: Object of type PnLTotals is not JSON serializable", "module": "live", "name": "app.ws.live", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:30:00.807129+05:30", "timestamp": 1755781200.807129}}}
{"text": "2025-08-21 18:30:00.808 | ERROR    | app.ws.live:broadcast:253 - Failed to broadcast to client: Object of type PnLTotals is not JSON serializable\n", "record": {"elapsed": {"repr": "0:01:24.806774", "seconds": 84.806774}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "broadcast", "level": {"icon": "❌", "name": "ERROR", "no": 40}, "line": 253, "message": "Failed to broadcast to client: Object of type PnLTotals is not JSON serializable", "module": "live", "name": "app.ws.live", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:30:00.808749+05:30", "timestamp": 1755781200.808749}}}
{"text": "2025-08-21 18:30:00.809 | ERROR    | app.ws.live:broadcast:253 - Failed to broadcast to client: Object of type PnLTotals is not JSON serializable\n", "record": {"elapsed": {"repr": "0:01:24.807565", "seconds": 84.807565}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "broadcast", "level": {"icon": "❌", "name": "ERROR", "no": 40}, "line": 253, "message": "Failed to broadcast to client: Object of type PnLTotals is not JSON serializable", "module": "live", "name": "app.ws.live", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:30:00.809540+05:30", "timestamp": 1755781200.80954}}}
{"text": "2025-08-21 18:30:00.810 | INFO     | app.ws.live:disconnect:234 - WebSocket disconnected: 127.0.0.1\n", "record": {"elapsed": {"repr": "0:01:24.808565", "seconds": 84.808565}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "disconnect", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 234, "message": "WebSocket disconnected: 127.0.0.1", "module": "live", "name": "app.ws.live", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:30:00.810540+05:30", "timestamp": 1755781200.81054}}}
{"text": "2025-08-21 18:30:00.811 | INFO     | app.ws.live:disconnect:234 - WebSocket disconnected: 127.0.0.1\n", "record": {"elapsed": {"repr": "0:01:24.809307", "seconds": 84.809307}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "disconnect", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 234, "message": "WebSocket disconnected: 127.0.0.1", "module": "live", "name": "app.ws.live", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:30:00.811282+05:30", "timestamp": 1755781200.811282}}}
{"text": "2025-08-21 18:30:00.812 | INFO     | app.ws.live:disconnect:234 - WebSocket disconnected: 127.0.0.1\n", "record": {"elapsed": {"repr": "0:01:24.810160", "seconds": 84.81016}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "disconnect", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 234, "message": "WebSocket disconnected: 127.0.0.1", "module": "live", "name": "app.ws.live", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:30:00.812135+05:30", "timestamp": 1755781200.812135}}}
{"text": "2025-08-21 18:30:00.812 | INFO     | app.ws.live:disconnect:234 - WebSocket disconnected: 127.0.0.1\n", "record": {"elapsed": {"repr": "0:01:24.810847", "seconds": 84.810847}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "disconnect", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 234, "message": "WebSocket disconnected: 127.0.0.1", "module": "live", "name": "app.ws.live", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:30:00.812822+05:30", "timestamp": 1755781200.812822}}}
{"text": "2025-08-21 18:30:00.813 | INFO     | app.ws.live:disconnect:234 - WebSocket disconnected: 127.0.0.1\n", "record": {"elapsed": {"repr": "0:01:24.811422", "seconds": 84.811422}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "disconnect", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 234, "message": "WebSocket disconnected: 127.0.0.1", "module": "live", "name": "app.ws.live", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:30:00.813397+05:30", "timestamp": 1755781200.813397}}}
{"text": "2025-08-21 18:30:00.813 | INFO     | app.ws.live:disconnect:234 - WebSocket disconnected: 127.0.0.1\n", "record": {"elapsed": {"repr": "0:01:24.812024", "seconds": 84.812024}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "disconnect", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 234, "message": "WebSocket disconnected: 127.0.0.1", "module": "live", "name": "app.ws.live", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:30:00.813999+05:30", "timestamp": 1755781200.813999}}}
{"text": "2025-08-21 18:30:00.814 | INFO     | app.ws.live:disconnect:234 - WebSocket disconnected: 127.0.0.1\n", "record": {"elapsed": {"repr": "0:01:24.812968", "seconds": 84.812968}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "disconnect", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 234, "message": "WebSocket disconnected: 127.0.0.1", "module": "live", "name": "app.ws.live", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:30:00.814943+05:30", "timestamp": 1755781200.814943}}}
{"text": "2025-08-21 18:30:00.815 | INFO     | app.ws.live:disconnect:234 - WebSocket disconnected: 127.0.0.1\n", "record": {"elapsed": {"repr": "0:01:24.813653", "seconds": 84.813653}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "disconnect", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 234, "message": "WebSocket disconnected: 127.0.0.1", "module": "live", "name": "app.ws.live", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:30:00.815628+05:30", "timestamp": 1755781200.815628}}}
{"text": "2025-08-21 18:30:00.816 | INFO     | app.ws.live:disconnect:234 - WebSocket disconnected: 127.0.0.1\n", "record": {"elapsed": {"repr": "0:01:24.814417", "seconds": 84.814417}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "disconnect", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 234, "message": "WebSocket disconnected: 127.0.0.1", "module": "live", "name": "app.ws.live", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:30:00.816392+05:30", "timestamp": 1755781200.816392}}}
{"text": "2025-08-21 18:30:00.817 | INFO     | app.ws.live:disconnect:234 - WebSocket disconnected: 127.0.0.1\n", "record": {"elapsed": {"repr": "0:01:24.815237", "seconds": 84.815237}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "disconnect", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 234, "message": "WebSocket disconnected: 127.0.0.1", "module": "live", "name": "app.ws.live", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:30:00.817212+05:30", "timestamp": 1755781200.817212}}}
{"text": "2025-08-21 18:30:00.817 | INFO     | app.ws.live:disconnect:234 - WebSocket disconnected: 127.0.0.1\n", "record": {"elapsed": {"repr": "0:01:24.816020", "seconds": 84.81602}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "disconnect", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 234, "message": "WebSocket disconnected: 127.0.0.1", "module": "live", "name": "app.ws.live", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:30:00.817995+05:30", "timestamp": 1755781200.817995}}}
{"text": "2025-08-21 18:30:00.818 | INFO     | app.ws.live:disconnect:234 - WebSocket disconnected: 127.0.0.1\n", "record": {"elapsed": {"repr": "0:01:24.816764", "seconds": 84.816764}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "disconnect", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 234, "message": "WebSocket disconnected: 127.0.0.1", "module": "live", "name": "app.ws.live", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:30:00.818739+05:30", "timestamp": 1755781200.818739}}}
{"text": "2025-08-21 18:30:00.819 | INFO     | app.ws.live:disconnect:234 - WebSocket disconnected: 127.0.0.1\n", "record": {"elapsed": {"repr": "0:01:24.817529", "seconds": 84.817529}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "disconnect", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 234, "message": "WebSocket disconnected: 127.0.0.1", "module": "live", "name": "app.ws.live", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:30:00.819504+05:30", "timestamp": 1755781200.819504}}}
{"text": "2025-08-21 18:30:00.820 | INFO     | app.ws.live:disconnect:234 - WebSocket disconnected: 127.0.0.1\n", "record": {"elapsed": {"repr": "0:01:24.818468", "seconds": 84.818468}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "disconnect", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 234, "message": "WebSocket disconnected: 127.0.0.1", "module": "live", "name": "app.ws.live", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:30:00.820443+05:30", "timestamp": 1755781200.820443}}}
{"text": "2025-08-21 18:30:00.821 | INFO     | app.ws.live:disconnect:234 - WebSocket disconnected: 127.0.0.1\n", "record": {"elapsed": {"repr": "0:01:24.819499", "seconds": 84.819499}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "disconnect", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 234, "message": "WebSocket disconnected: 127.0.0.1", "module": "live", "name": "app.ws.live", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:30:00.821474+05:30", "timestamp": 1755781200.821474}}}
{"text": "2025-08-21 18:30:00.822 | INFO     | app.ws.live:disconnect:234 - WebSocket disconnected: 127.0.0.1\n", "record": {"elapsed": {"repr": "0:01:24.820470", "seconds": 84.82047}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "disconnect", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 234, "message": "WebSocket disconnected: 127.0.0.1", "module": "live", "name": "app.ws.live", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:30:00.822445+05:30", "timestamp": 1755781200.822445}}}
{"text": "2025-08-21 18:30:00.823 | INFO     | app.ws.live:disconnect:234 - WebSocket disconnected: 127.0.0.1\n", "record": {"elapsed": {"repr": "0:01:24.821456", "seconds": 84.821456}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "disconnect", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 234, "message": "WebSocket disconnected: 127.0.0.1", "module": "live", "name": "app.ws.live", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:30:00.823431+05:30", "timestamp": 1755781200.823431}}}
{"text": "2025-08-21 18:30:00.824 | INFO     | app.ws.live:disconnect:234 - WebSocket disconnected: 127.0.0.1\n", "record": {"elapsed": {"repr": "0:01:24.822467", "seconds": 84.822467}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "disconnect", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 234, "message": "WebSocket disconnected: 127.0.0.1", "module": "live", "name": "app.ws.live", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:30:00.824442+05:30", "timestamp": 1755781200.824442}}}
{"text": "2025-08-21 18:30:00.825 | INFO     | app.ws.live:disconnect:234 - WebSocket disconnected: 127.0.0.1\n", "record": {"elapsed": {"repr": "0:01:24.823991", "seconds": 84.823991}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "disconnect", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 234, "message": "WebSocket disconnected: 127.0.0.1", "module": "live", "name": "app.ws.live", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:30:00.825966+05:30", "timestamp": 1755781200.825966}}}
{"text": "2025-08-21 18:30:00.827 | DEBUG    | app.ws.live:emit_delta:408 - Emitted pnl delta: seq=115\n", "record": {"elapsed": {"repr": "0:01:24.825767", "seconds": 84.825767}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "emit_delta", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 408, "message": "Emitted pnl delta: seq=115", "module": "live", "name": "app.ws.live", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:30:00.827742+05:30", "timestamp": 1755781200.827742}}}
{"text": "2025-08-21 18:30:00.829 | DEBUG    | app.ws.live:emit_delta:408 - Emitted positions delta: seq=116\n", "record": {"elapsed": {"repr": "0:01:24.827665", "seconds": 84.827665}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "emit_delta", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 408, "message": "Emitted positions delta: seq=116", "module": "live", "name": "app.ws.live", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:30:00.829640+05:30", "timestamp": 1755781200.82964}}}
{"text": "2025-08-21 18:30:00.837 | INFO     | app.ws.live:connect:226 - WebSocket connected: 127.0.0.1\n", "record": {"elapsed": {"repr": "0:01:24.835403", "seconds": 84.835403}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "connect", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 226, "message": "WebSocket connected: 127.0.0.1", "module": "live", "name": "app.ws.live", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:30:00.837378+05:30", "timestamp": 1755781200.837378}}}
{"text": "2025-08-21 18:30:00.854 | INFO     | app.ws.live:connect:226 - WebSocket connected: 127.0.0.1\n", "record": {"elapsed": {"repr": "0:01:24.852942", "seconds": 84.852942}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "connect", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 226, "message": "WebSocket connected: 127.0.0.1", "module": "live", "name": "app.ws.live", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:30:00.854917+05:30", "timestamp": 1755781200.854917}}}
{"text": "2025-08-21 18:30:00.977 | INFO     | app.ws.live:connect:226 - WebSocket connected: 127.0.0.1\n", "record": {"elapsed": {"repr": "0:01:24.975952", "seconds": 84.975952}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "connect", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 226, "message": "WebSocket connected: 127.0.0.1", "module": "live", "name": "app.ws.live", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:30:00.977927+05:30", "timestamp": 1755781200.977927}}}
{"text": "2025-08-21 18:30:00.999 | INFO     | app.ws.live:connect:226 - WebSocket connected: 127.0.0.1\n", "record": {"elapsed": {"repr": "0:01:24.997518", "seconds": 84.997518}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "connect", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 226, "message": "WebSocket connected: 127.0.0.1", "module": "live", "name": "app.ws.live", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:30:00.999493+05:30", "timestamp": 1755781200.999493}}}
{"text": "2025-08-21 18:30:01.022 | INFO     | app.ws.live:connect:226 - WebSocket connected: 127.0.0.1\n", "record": {"elapsed": {"repr": "0:01:25.020152", "seconds": 85.020152}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "connect", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 226, "message": "WebSocket connected: 127.0.0.1", "module": "live", "name": "app.ws.live", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:30:01.022127+05:30", "timestamp": 1755781201.022127}}}
{"text": "2025-08-21 18:30:01.036 | INFO     | app.ws.live:connect:226 - WebSocket connected: 127.0.0.1\n", "record": {"elapsed": {"repr": "0:01:25.034809", "seconds": 85.034809}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "connect", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 226, "message": "WebSocket connected: 127.0.0.1", "module": "live", "name": "app.ws.live", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:30:01.036784+05:30", "timestamp": 1755781201.036784}}}
{"text": "2025-08-21 18:30:01.054 | INFO     | app.ws.live:connect:226 - WebSocket connected: 127.0.0.1\n", "record": {"elapsed": {"repr": "0:01:25.052687", "seconds": 85.052687}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "connect", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 226, "message": "WebSocket connected: 127.0.0.1", "module": "live", "name": "app.ws.live", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:30:01.054662+05:30", "timestamp": 1755781201.054662}}}
{"text": "2025-08-21 18:30:01.068 | DEBUG    | app.ws.live:websocket_endpoint:517 - Received WebSocket message: {'type': 'subscribe', 'channels': ['positions', 'orders', 'holdings', 'trades', 'pnl']}\n", "record": {"elapsed": {"repr": "0:01:25.066935", "seconds": 85.066935}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "websocket_endpoint", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 517, "message": "Received WebSocket message: {'type': 'subscribe', 'channels': ['positions', 'orders', 'holdings', 'trades', 'pnl']}", "module": "live", "name": "app.ws.live", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:30:01.068910+05:30", "timestamp": 1755781201.06891}}}
{"text": "2025-08-21 18:30:01.071 | INFO     | app.ws.live:handle_message:281 - Client 127.0.0.1 subscribed to: ['positions', 'orders', 'holdings', 'trades', 'pnl']\n", "record": {"elapsed": {"repr": "0:01:25.069658", "seconds": 85.069658}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "handle_message", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 281, "message": "Client 127.0.0.1 subscribed to: ['positions', 'orders', 'holdings', 'trades', 'pnl']", "module": "live", "name": "app.ws.live", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:30:01.071633+05:30", "timestamp": 1755781201.071633}}}
{"text": "2025-08-21 18:30:01.103 | INFO     | app.ws.live:connect:226 - WebSocket connected: 127.0.0.1\n", "record": {"elapsed": {"repr": "0:01:25.101415", "seconds": 85.101415}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "connect", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 226, "message": "WebSocket connected: 127.0.0.1", "module": "live", "name": "app.ws.live", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:30:01.103390+05:30", "timestamp": 1755781201.10339}}}
{"text": "2025-08-21 18:30:01.451 | DEBUG    | app.ws.live:emit_summary:430 - Emitted orders summary: seq=117\n", "record": {"elapsed": {"repr": "0:01:25.449437", "seconds": 85.449437}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "emit_summary", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 430, "message": "Emitted orders summary: seq=117", "module": "live", "name": "app.ws.live", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:30:01.451412+05:30", "timestamp": 1755781201.451412}}}
{"text": "2025-08-21 18:30:02.567 | INFO     | app.services.dhan_client:get_pnl:489 - Starting accurate P&L calculation\n", "record": {"elapsed": {"repr": "0:01:26.565576", "seconds": 86.565576}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 489, "message": "Starting accurate P&L calculation", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:30:02.567551+05:30", "timestamp": 1755781202.567551}}}
{"text": "2025-08-21 18:30:02.569 | INFO     | app.services.dhan_client:get_pnl:491 - Fetched 5 positions\n", "record": {"elapsed": {"repr": "0:01:26.567946", "seconds": 86.567946}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 491, "message": "Fetched 5 positions", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:30:02.569921+05:30", "timestamp": 1755781202.569921}}}
{"text": "2025-08-21 18:30:02.571 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for RELIANCE: unrealized=-1053238.38, today=-1053238.38\n", "record": {"elapsed": {"repr": "0:01:26.569121", "seconds": 86.569121}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for RELIANCE: unrealized=-1053238.38, today=-1053238.38", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:30:02.571096+05:30", "timestamp": 1755781202.571096}}}
{"text": "2025-08-21 18:30:02.571 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for TCS: unrealized=965457.27, today=965457.27\n", "record": {"elapsed": {"repr": "0:01:26.569765", "seconds": 86.569765}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for TCS: unrealized=965457.27, today=965457.27", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:30:02.571740+05:30", "timestamp": 1755781202.57174}}}
{"text": "2025-08-21 18:30:02.572 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for HDFC: unrealized=-2050375.8, today=-2050375.8\n", "record": {"elapsed": {"repr": "0:01:26.570484", "seconds": 86.570484}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for HDFC: unrealized=-2050375.8, today=-2050375.8", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:30:02.572459+05:30", "timestamp": 1755781202.572459}}}
{"text": "2025-08-21 18:30:02.573 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for INFY: unrealized=202029.02, today=202029.02\n", "record": {"elapsed": {"repr": "0:01:26.571652", "seconds": 86.571652}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for INFY: unrealized=202029.02, today=202029.02", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:30:02.573627+05:30", "timestamp": 1755781202.573627}}}
{"text": "2025-08-21 18:30:02.575 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for ICICIBANK: unrealized=389194.48, today=389194.48\n", "record": {"elapsed": {"repr": "0:01:26.573189", "seconds": 86.573189}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for ICICIBANK: unrealized=389194.48, today=389194.48", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:30:02.575164+05:30", "timestamp": 1755781202.575164}}}
{"text": "2025-08-21 18:30:02.576 | INFO     | app.services.dhan_client:get_pnl:545 - Calculated totals - realized: 0.0, unrealized: -1546933.41, day: -1546933.41\n", "record": {"elapsed": {"repr": "0:01:26.574342", "seconds": 86.574342}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 545, "message": "Calculated totals - realized: 0.0, unrealized: -1546933.41, day: -1546933.41", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:30:02.576317+05:30", "timestamp": 1755781202.576317}}}
{"text": "2025-08-21 18:30:02.577 | DEBUG    | app.services.dhan_client:get_pnl:554 - PnL consistency check passed: drift=₹0.00\n", "record": {"elapsed": {"repr": "0:01:26.575488", "seconds": 86.575488}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 554, "message": "PnL consistency check passed: drift=₹0.00", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:30:02.577463+05:30", "timestamp": 1755781202.577463}}}
{"text": "2025-08-21 18:30:02.578 | DEBUG    | app.services.dhan_client:get_pnl:558 - Creating PnLTotals...\n", "record": {"elapsed": {"repr": "0:01:26.576591", "seconds": 86.576591}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 558, "message": "Creating PnLTotals...", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:30:02.578566+05:30", "timestamp": 1755781202.578566}}}
{"text": "2025-08-21 18:30:02.579 | DEBUG    | app.services.dhan_client:get_pnl:565 - PnLTotals created successfully\n", "record": {"elapsed": {"repr": "0:01:26.577661", "seconds": 86.577661}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 565, "message": "PnLTotals created successfully", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:30:02.579636+05:30", "timestamp": 1755781202.579636}}}
{"text": "2025-08-21 18:30:02.580 | DEBUG    | app.services.dhan_client:get_pnl:574 - Creating PnL model...\n", "record": {"elapsed": {"repr": "0:01:26.578545", "seconds": 86.578545}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 574, "message": "Creating PnL model...", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:30:02.580520+05:30", "timestamp": 1755781202.58052}}}
{"text": "2025-08-21 18:30:02.581 | DEBUG    | app.services.dhan_client:get_pnl:575 - Model fields: totals=<class 'app.models.schemas.PnLTotals'>, perSymbol=5, updated_at=2025-08-21 18:30:02.570989+05:30, trading_day=2025-08-21\n", "record": {"elapsed": {"repr": "0:01:26.579306", "seconds": 86.579306}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 575, "message": "Model fields: totals=<class 'app.models.schemas.PnLTotals'>, perSymbol=5, updated_at=2025-08-21 18:30:02.570989+05:30, trading_day=2025-08-21", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:30:02.581281+05:30", "timestamp": 1755781202.581281}}}
{"text": "2025-08-21 18:30:02.582 | DEBUG    | app.services.dhan_client:get_pnl:584 - Created PnL model: totals=PnLTotals(realized=0.0, unrealized=-1546933.41, day=-1546933.41, currency='INR') per_symbol=[PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1543, avg=1999.73, ltp=1317.14, unrealized=-1053238.38, today_pnl=-1053238.38), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=613, avg=1989.23, ltp=414.26, unrealized=965457.27, today_pnl=965457.27), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=1709, avg=1838.62, ltp=638.87, unrealized=-2050375.8, today_pnl=-2050375.8), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=697, avg=852.74, ltp=562.88, unrealized=202029.02, today_pnl=202029.02), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=255, avg=915.17, ltp=2441.42, unrealized=389194.48, today_pnl=389194.48)] updated_at=datetime.datetime(2025, 8, 21, 18, 30, 2, 570989, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))) trading_day='2025-08-21'\n", "record": {"elapsed": {"repr": "0:01:26.580303", "seconds": 86.580303}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 584, "message": "Created PnL model: totals=PnLTotals(realized=0.0, unrealized=-1546933.41, day=-1546933.41, currency='INR') per_symbol=[PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1543, avg=1999.73, ltp=1317.14, unrealized=-1053238.38, today_pnl=-1053238.38), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=613, avg=1989.23, ltp=414.26, unrealized=965457.27, today_pnl=965457.27), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=1709, avg=1838.62, ltp=638.87, unrealized=-2050375.8, today_pnl=-2050375.8), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=697, avg=852.74, ltp=562.88, unrealized=202029.02, today_pnl=202029.02), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=255, avg=915.17, ltp=2441.42, unrealized=389194.48, today_pnl=389194.48)] updated_at=datetime.datetime(2025, 8, 21, 18, 30, 2, 570989, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))) trading_day='2025-08-21'", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:30:02.582278+05:30", "timestamp": 1755781202.582278}}}
{"text": "2025-08-21 18:30:02.583 | DEBUG    | app.services.dhan_client:get_pnl:585 - PnL model fields: {'totals': PnLTotals(realized=0.0, unrealized=-1546933.41, day=-1546933.41, currency='INR'), 'per_symbol': [PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1543, avg=1999.73, ltp=1317.14, unrealized=-1053238.38, today_pnl=-1053238.38), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=613, avg=1989.23, ltp=414.26, unrealized=965457.27, today_pnl=965457.27), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=1709, avg=1838.62, ltp=638.87, unrealized=-2050375.8, today_pnl=-2050375.8), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=697, avg=852.74, ltp=562.88, unrealized=202029.02, today_pnl=202029.02), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=255, avg=915.17, ltp=2441.42, unrealized=389194.48, today_pnl=389194.48)], 'updated_at': datetime.datetime(2025, 8, 21, 18, 30, 2, 570989, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))), 'trading_day': '2025-08-21'}\n", "record": {"elapsed": {"repr": "0:01:26.581656", "seconds": 86.581656}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 585, "message": "PnL model fields: {'totals': PnLTotals(realized=0.0, unrealized=-1546933.41, day=-1546933.41, currency='INR'), 'per_symbol': [PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1543, avg=1999.73, ltp=1317.14, unrealized=-1053238.38, today_pnl=-1053238.38), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=613, avg=1989.23, ltp=414.26, unrealized=965457.27, today_pnl=965457.27), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=1709, avg=1838.62, ltp=638.87, unrealized=-2050375.8, today_pnl=-2050375.8), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=697, avg=852.74, ltp=562.88, unrealized=202029.02, today_pnl=202029.02), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=255, avg=915.17, ltp=2441.42, unrealized=389194.48, today_pnl=389194.48)], 'updated_at': datetime.datetime(2025, 8, 21, 18, 30, 2, 570989, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))), 'trading_day': '2025-08-21'}", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:30:02.583631+05:30", "timestamp": 1755781202.583631}}}
{"text": "2025-08-21 18:30:02.584 | INFO     | app.services.dhan_client:get_pnl:587 - P&L calculation completed successfully: 5 symbols, unrealized=₹-1546933.41\n", "record": {"elapsed": {"repr": "0:01:26.582877", "seconds": 86.582877}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 587, "message": "P&L calculation completed successfully: 5 symbols, unrealized=₹-1546933.41", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:30:02.584852+05:30", "timestamp": 1755781202.584852}}}
{"text": "2025-08-21 18:30:02.585 | ERROR    | app.ws.live:broadcast:253 - Failed to broadcast to client: Object of type PnLTotals is not JSON serializable\n", "record": {"elapsed": {"repr": "0:01:26.583864", "seconds": 86.583864}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "broadcast", "level": {"icon": "❌", "name": "ERROR", "no": 40}, "line": 253, "message": "Failed to broadcast to client: Object of type PnLTotals is not JSON serializable", "module": "live", "name": "app.ws.live", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:30:02.585839+05:30", "timestamp": 1755781202.585839}}}
{"text": "2025-08-21 18:30:02.586 | ERROR    | app.ws.live:broadcast:253 - Failed to broadcast to client: Object of type PnLTotals is not JSON serializable\n", "record": {"elapsed": {"repr": "0:01:26.584864", "seconds": 86.584864}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "broadcast", "level": {"icon": "❌", "name": "ERROR", "no": 40}, "line": 253, "message": "Failed to broadcast to client: Object of type PnLTotals is not JSON serializable", "module": "live", "name": "app.ws.live", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:30:02.586839+05:30", "timestamp": 1755781202.586839}}}
{"text": "2025-08-21 18:30:02.587 | ERROR    | app.ws.live:broadcast:253 - Failed to broadcast to client: Object of type PnLTotals is not JSON serializable\n", "record": {"elapsed": {"repr": "0:01:26.585603", "seconds": 86.585603}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "broadcast", "level": {"icon": "❌", "name": "ERROR", "no": 40}, "line": 253, "message": "Failed to broadcast to client: Object of type PnLTotals is not JSON serializable", "module": "live", "name": "app.ws.live", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:30:02.587578+05:30", "timestamp": 1755781202.587578}}}
{"text": "2025-08-21 18:30:02.588 | ERROR    | app.ws.live:broadcast:253 - Failed to broadcast to client: Object of type PnLTotals is not JSON serializable\n", "record": {"elapsed": {"repr": "0:01:26.586825", "seconds": 86.586825}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "broadcast", "level": {"icon": "❌", "name": "ERROR", "no": 40}, "line": 253, "message": "Failed to broadcast to client: Object of type PnLTotals is not JSON serializable", "module": "live", "name": "app.ws.live", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:30:02.588800+05:30", "timestamp": 1755781202.5888}}}
{"text": "2025-08-21 18:30:02.589 | ERROR    | app.ws.live:broadcast:253 - Failed to broadcast to client: Object of type PnLTotals is not JSON serializable\n", "record": {"elapsed": {"repr": "0:01:26.587803", "seconds": 86.587803}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "broadcast", "level": {"icon": "❌", "name": "ERROR", "no": 40}, "line": 253, "message": "Failed to broadcast to client: Object of type PnLTotals is not JSON serializable", "module": "live", "name": "app.ws.live", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:30:02.589778+05:30", "timestamp": 1755781202.589778}}}
{"text": "2025-08-21 18:30:02.590 | ERROR    | app.ws.live:broadcast:253 - Failed to broadcast to client: Object of type PnLTotals is not JSON serializable\n", "record": {"elapsed": {"repr": "0:01:26.588688", "seconds": 86.588688}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "broadcast", "level": {"icon": "❌", "name": "ERROR", "no": 40}, "line": 253, "message": "Failed to broadcast to client: Object of type PnLTotals is not JSON serializable", "module": "live", "name": "app.ws.live", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:30:02.590663+05:30", "timestamp": 1755781202.590663}}}
{"text": "2025-08-21 18:30:02.591 | ERROR    | app.ws.live:broadcast:253 - Failed to broadcast to client: Object of type PnLTotals is not JSON serializable\n", "record": {"elapsed": {"repr": "0:01:26.589758", "seconds": 86.589758}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "broadcast", "level": {"icon": "❌", "name": "ERROR", "no": 40}, "line": 253, "message": "Failed to broadcast to client: Object of type PnLTotals is not JSON serializable", "module": "live", "name": "app.ws.live", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:30:02.591733+05:30", "timestamp": 1755781202.591733}}}
{"text": "2025-08-21 18:30:02.592 | ERROR    | app.ws.live:broadcast:253 - Failed to broadcast to client: Object of type PnLTotals is not JSON serializable\n", "record": {"elapsed": {"repr": "0:01:26.590821", "seconds": 86.590821}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "broadcast", "level": {"icon": "❌", "name": "ERROR", "no": 40}, "line": 253, "message": "Failed to broadcast to client: Object of type PnLTotals is not JSON serializable", "module": "live", "name": "app.ws.live", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:30:02.592796+05:30", "timestamp": 1755781202.592796}}}
{"text": "2025-08-21 18:30:02.594 | INFO     | app.ws.live:disconnect:234 - WebSocket disconnected: 127.0.0.1\n", "record": {"elapsed": {"repr": "0:01:26.592168", "seconds": 86.592168}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "disconnect", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 234, "message": "WebSocket disconnected: 127.0.0.1", "module": "live", "name": "app.ws.live", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:30:02.594143+05:30", "timestamp": 1755781202.594143}}}
{"text": "2025-08-21 18:30:02.595 | INFO     | app.ws.live:disconnect:234 - WebSocket disconnected: 127.0.0.1\n", "record": {"elapsed": {"repr": "0:01:26.593135", "seconds": 86.593135}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "disconnect", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 234, "message": "WebSocket disconnected: 127.0.0.1", "module": "live", "name": "app.ws.live", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:30:02.595110+05:30", "timestamp": 1755781202.59511}}}
{"text": "2025-08-21 18:30:02.596 | INFO     | app.ws.live:disconnect:234 - WebSocket disconnected: 127.0.0.1\n", "record": {"elapsed": {"repr": "0:01:26.594465", "seconds": 86.594465}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "disconnect", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 234, "message": "WebSocket disconnected: 127.0.0.1", "module": "live", "name": "app.ws.live", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:30:02.596440+05:30", "timestamp": 1755781202.59644}}}
{"text": "2025-08-21 18:30:02.597 | INFO     | app.ws.live:disconnect:234 - WebSocket disconnected: 127.0.0.1\n", "record": {"elapsed": {"repr": "0:01:26.595727", "seconds": 86.595727}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "disconnect", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 234, "message": "WebSocket disconnected: 127.0.0.1", "module": "live", "name": "app.ws.live", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:30:02.597702+05:30", "timestamp": 1755781202.597702}}}
{"text": "2025-08-21 18:30:02.598 | INFO     | app.ws.live:disconnect:234 - WebSocket disconnected: 127.0.0.1\n", "record": {"elapsed": {"repr": "0:01:26.596942", "seconds": 86.596942}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "disconnect", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 234, "message": "WebSocket disconnected: 127.0.0.1", "module": "live", "name": "app.ws.live", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:30:02.598917+05:30", "timestamp": 1755781202.598917}}}
{"text": "2025-08-21 18:30:02.599 | INFO     | app.ws.live:disconnect:234 - WebSocket disconnected: 127.0.0.1\n", "record": {"elapsed": {"repr": "0:01:26.598014", "seconds": 86.598014}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "disconnect", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 234, "message": "WebSocket disconnected: 127.0.0.1", "module": "live", "name": "app.ws.live", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:30:02.599989+05:30", "timestamp": 1755781202.599989}}}
{"text": "2025-08-21 18:30:02.600 | INFO     | app.ws.live:disconnect:234 - WebSocket disconnected: 127.0.0.1\n", "record": {"elapsed": {"repr": "0:01:26.598929", "seconds": 86.598929}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "disconnect", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 234, "message": "WebSocket disconnected: 127.0.0.1", "module": "live", "name": "app.ws.live", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:30:02.600904+05:30", "timestamp": 1755781202.600904}}}
{"text": "2025-08-21 18:30:02.601 | INFO     | app.ws.live:disconnect:234 - WebSocket disconnected: 127.0.0.1\n", "record": {"elapsed": {"repr": "0:01:26.599778", "seconds": 86.599778}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "disconnect", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 234, "message": "WebSocket disconnected: 127.0.0.1", "module": "live", "name": "app.ws.live", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:30:02.601753+05:30", "timestamp": 1755781202.601753}}}
{"text": "2025-08-21 18:30:02.602 | DEBUG    | app.ws.live:emit_delta:408 - Emitted pnl delta: seq=118\n", "record": {"elapsed": {"repr": "0:01:26.600429", "seconds": 86.600429}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "emit_delta", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 408, "message": "Emitted pnl delta: seq=118", "module": "live", "name": "app.ws.live", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:30:02.602404+05:30", "timestamp": 1755781202.602404}}}
{"text": "2025-08-21 18:30:02.612 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:01:26.610684", "seconds": 86.610684}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 17632, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 18:30:02.612659+05:30", "timestamp": 1755781202.612659}}}
{"text": "2025-08-21 18:30:02.614 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:01:26.612991", "seconds": 86.612991}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 17632, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 18:30:02.614966+05:30", "timestamp": 1755781202.614966}}}
{"text": "2025-08-21 18:30:02.616 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:01:26.614284", "seconds": 86.614284}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 17632, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 18:30:02.616259+05:30", "timestamp": 1755781202.616259}}}
{"text": "2025-08-21 18:30:02.616 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:01:26.614962", "seconds": 86.614962}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 17632, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 18:30:02.616937+05:30", "timestamp": 1755781202.616937}}}
{"text": "2025-08-21 18:30:02.617 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:01:26.615772", "seconds": 86.615772}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 17632, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 18:30:02.617747+05:30", "timestamp": 1755781202.617747}}}
{"text": "2025-08-21 18:30:02.618 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:01:26.616726", "seconds": 86.616726}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 17632, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 18:30:02.618701+05:30", "timestamp": 1755781202.618701}}}
{"text": "2025-08-21 18:30:02.620 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:01:26.618336", "seconds": 86.618336}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 17632, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 18:30:02.620311+05:30", "timestamp": 1755781202.620311}}}
{"text": "2025-08-21 18:30:02.621 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:01:26.619275", "seconds": 86.619275}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 17632, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 18:30:02.621250+05:30", "timestamp": 1755781202.62125}}}
{"text": "2025-08-21 18:30:02.624 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:01:26.622093", "seconds": 86.622093}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 17632, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 18:30:02.624068+05:30", "timestamp": 1755781202.624068}}}
{"text": "2025-08-21 18:30:02.624 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:01:26.622960", "seconds": 86.62296}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 17632, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 18:30:02.624935+05:30", "timestamp": 1755781202.624935}}}
{"text": "2025-08-21 18:30:02.803 | INFO     | app.main:add_trace_id:43 - Request started - Method: GET, Path: /positions, Trace ID: d88b75bb-0828-4c9f-a6dc-bb55ea529e4a\n", "record": {"elapsed": {"repr": "0:01:26.801488", "seconds": 86.801488}, "exception": null, "extra": {}, "file": {"name": "main.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\main.py"}, "function": "add_trace_id", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 43, "message": "Request started - Method: GET, Path: /positions, Trace ID: d88b75bb-0828-4c9f-a6dc-bb55ea529e4a", "module": "main", "name": "app.main", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:30:02.803463+05:30", "timestamp": 1755781202.803463}}}
{"text": "2025-08-21 18:30:02.808 | INFO     | app.main:add_trace_id:47 - Request completed - Method: GET, Path: /positions, Status: 200, Trace ID: d88b75bb-0828-4c9f-a6dc-bb55ea529e4a\n", "record": {"elapsed": {"repr": "0:01:26.806574", "seconds": 86.806574}, "exception": null, "extra": {}, "file": {"name": "main.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\main.py"}, "function": "add_trace_id", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 47, "message": "Request completed - Method: GET, Path: /positions, Status: 200, Trace ID: d88b75bb-0828-4c9f-a6dc-bb55ea529e4a", "module": "main", "name": "app.main", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:30:02.808549+05:30", "timestamp": 1755781202.808549}}}
{"text": "2025-08-21 18:30:03.372 | INFO     | app.main:add_trace_id:43 - Request started - Method: GET, Path: /pnl, Trace ID: bc0cb5cb-7cc1-4763-98ea-2c49b0374797\n", "record": {"elapsed": {"repr": "0:01:27.370482", "seconds": 87.370482}, "exception": null, "extra": {}, "file": {"name": "main.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\main.py"}, "function": "add_trace_id", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 43, "message": "Request started - Method: GET, Path: /pnl, Trace ID: bc0cb5cb-7cc1-4763-98ea-2c49b0374797", "module": "main", "name": "app.main", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:30:03.372457+05:30", "timestamp": 1755781203.372457}}}
{"text": "2025-08-21 18:30:03.376 | INFO     | app.routes.data:pnl:69 - PnL endpoint called\n", "record": {"elapsed": {"repr": "0:01:27.374592", "seconds": 87.374592}, "exception": null, "extra": {}, "file": {"name": "data.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\routes\\data.py"}, "function": "pnl", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 69, "message": "PnL endpoint called", "module": "data", "name": "app.routes.data", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 23196, "name": "AnyIO worker thread"}, "time": {"repr": "2025-08-21 18:30:03.376567+05:30", "timestamp": 1755781203.376567}}}
{"text": "2025-08-21 18:30:03.378 | INFO     | app.services.dhan_client:get_pnl:489 - Starting accurate P&L calculation\n", "record": {"elapsed": {"repr": "0:01:27.376633", "seconds": 87.376633}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 489, "message": "Starting accurate P&L calculation", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 23196, "name": "AnyIO worker thread"}, "time": {"repr": "2025-08-21 18:30:03.378608+05:30", "timestamp": 1755781203.378608}}}
{"text": "2025-08-21 18:30:03.381 | INFO     | app.services.dhan_client:get_pnl:491 - Fetched 5 positions\n", "record": {"elapsed": {"repr": "0:01:27.379989", "seconds": 87.379989}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 491, "message": "Fetched 5 positions", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 23196, "name": "AnyIO worker thread"}, "time": {"repr": "2025-08-21 18:30:03.381964+05:30", "timestamp": 1755781203.381964}}}
{"text": "2025-08-21 18:30:03.383 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for RELIANCE: unrealized=-1018720.63, today=-1018720.63\n", "record": {"elapsed": {"repr": "0:01:27.381825", "seconds": 87.381825}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for RELIANCE: unrealized=-1018720.63, today=-1018720.63", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 23196, "name": "AnyIO worker thread"}, "time": {"repr": "2025-08-21 18:30:03.383800+05:30", "timestamp": 1755781203.3838}}}
{"text": "2025-08-21 18:30:03.385 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for TCS: unrealized=967205.77, today=967205.77\n", "record": {"elapsed": {"repr": "0:01:27.383370", "seconds": 87.38337}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for TCS: unrealized=967205.77, today=967205.77", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 23196, "name": "AnyIO worker thread"}, "time": {"repr": "2025-08-21 18:30:03.385345+05:30", "timestamp": 1755781203.385345}}}
{"text": "2025-08-21 18:30:03.386 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for HDFC: unrealized=-2028971.7, today=-2028971.7\n", "record": {"elapsed": {"repr": "0:01:27.384705", "seconds": 87.384705}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for HDFC: unrealized=-2028971.7, today=-2028971.7", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 23196, "name": "AnyIO worker thread"}, "time": {"repr": "2025-08-21 18:30:03.386680+05:30", "timestamp": 1755781203.38668}}}
{"text": "2025-08-21 18:30:03.388 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for INFY: unrealized=199008.67, today=199008.67\n", "record": {"elapsed": {"repr": "0:01:27.386921", "seconds": 87.386921}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for INFY: unrealized=199008.67, today=199008.67", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 23196, "name": "AnyIO worker thread"}, "time": {"repr": "2025-08-21 18:30:03.388896+05:30", "timestamp": 1755781203.388896}}}
{"text": "2025-08-21 18:30:03.389 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for ICICIBANK: unrealized=388161.54, today=388161.54\n", "record": {"elapsed": {"repr": "0:01:27.387794", "seconds": 87.387794}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for ICICIBANK: unrealized=388161.54, today=388161.54", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 23196, "name": "AnyIO worker thread"}, "time": {"repr": "2025-08-21 18:30:03.389769+05:30", "timestamp": 1755781203.389769}}}
{"text": "2025-08-21 18:30:03.390 | INFO     | app.services.dhan_client:get_pnl:545 - Calculated totals - realized: 0.0, unrealized: -1493316.35, day: -1493316.35\n", "record": {"elapsed": {"repr": "0:01:27.388798", "seconds": 87.388798}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 545, "message": "Calculated totals - realized: 0.0, unrealized: -1493316.35, day: -1493316.35", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 23196, "name": "AnyIO worker thread"}, "time": {"repr": "2025-08-21 18:30:03.390773+05:30", "timestamp": 1755781203.390773}}}
{"text": "2025-08-21 18:30:03.392 | DEBUG    | app.services.dhan_client:get_pnl:554 - PnL consistency check passed: drift=₹0.00\n", "record": {"elapsed": {"repr": "0:01:27.390450", "seconds": 87.39045}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 554, "message": "PnL consistency check passed: drift=₹0.00", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 23196, "name": "AnyIO worker thread"}, "time": {"repr": "2025-08-21 18:30:03.392425+05:30", "timestamp": 1755781203.392425}}}
{"text": "2025-08-21 18:30:03.394 | DEBUG    | app.services.dhan_client:get_pnl:558 - Creating PnLTotals...\n", "record": {"elapsed": {"repr": "0:01:27.392791", "seconds": 87.392791}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 558, "message": "Creating PnLTotals...", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 23196, "name": "AnyIO worker thread"}, "time": {"repr": "2025-08-21 18:30:03.394766+05:30", "timestamp": 1755781203.394766}}}
{"text": "2025-08-21 18:30:03.396 | DEBUG    | app.services.dhan_client:get_pnl:565 - PnLTotals created successfully\n", "record": {"elapsed": {"repr": "0:01:27.394483", "seconds": 87.394483}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 565, "message": "PnLTotals created successfully", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 23196, "name": "AnyIO worker thread"}, "time": {"repr": "2025-08-21 18:30:03.396458+05:30", "timestamp": 1755781203.396458}}}
{"text": "2025-08-21 18:30:03.398 | DEBUG    | app.services.dhan_client:get_pnl:574 - Creating PnL model...\n", "record": {"elapsed": {"repr": "0:01:27.396678", "seconds": 87.396678}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 574, "message": "Creating PnL model...", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 23196, "name": "AnyIO worker thread"}, "time": {"repr": "2025-08-21 18:30:03.398653+05:30", "timestamp": 1755781203.398653}}}
{"text": "2025-08-21 18:30:03.400 | DEBUG    | app.services.dhan_client:get_pnl:575 - Model fields: totals=<class 'app.models.schemas.PnLTotals'>, perSymbol=5, updated_at=2025-08-21 18:30:03.383578+05:30, trading_day=2025-08-21\n", "record": {"elapsed": {"repr": "0:01:27.398319", "seconds": 87.398319}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 575, "message": "Model fields: totals=<class 'app.models.schemas.PnLTotals'>, perSymbol=5, updated_at=2025-08-21 18:30:03.383578+05:30, trading_day=2025-08-21", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 23196, "name": "AnyIO worker thread"}, "time": {"repr": "2025-08-21 18:30:03.400294+05:30", "timestamp": 1755781203.400294}}}
{"text": "2025-08-21 18:30:03.401 | DEBUG    | app.services.dhan_client:get_pnl:584 - Created PnL model: totals=PnLTotals(realized=0.0, unrealized=-1493316.35, day=-1493316.35, currency='INR') per_symbol=[PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1543, avg=1999.73, ltp=1339.51, unrealized=-1018720.63, today_pnl=-1018720.63), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=613, avg=1989.23, ltp=411.41, unrealized=967205.77, today_pnl=967205.77), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=1709, avg=1838.62, ltp=651.39, unrealized=-2028971.7, today_pnl=-2028971.7), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=697, avg=852.74, ltp=567.22, unrealized=199008.67, today_pnl=199008.67), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=255, avg=915.17, ltp=2437.37, unrealized=388161.54, today_pnl=388161.54)] updated_at=datetime.datetime(2025, 8, 21, 18, 30, 3, 383578, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))) trading_day='2025-08-21'\n", "record": {"elapsed": {"repr": "0:01:27.399612", "seconds": 87.399612}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 584, "message": "Created PnL model: totals=PnLTotals(realized=0.0, unrealized=-1493316.35, day=-1493316.35, currency='INR') per_symbol=[PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1543, avg=1999.73, ltp=1339.51, unrealized=-1018720.63, today_pnl=-1018720.63), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=613, avg=1989.23, ltp=411.41, unrealized=967205.77, today_pnl=967205.77), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=1709, avg=1838.62, ltp=651.39, unrealized=-2028971.7, today_pnl=-2028971.7), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=697, avg=852.74, ltp=567.22, unrealized=199008.67, today_pnl=199008.67), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=255, avg=915.17, ltp=2437.37, unrealized=388161.54, today_pnl=388161.54)] updated_at=datetime.datetime(2025, 8, 21, 18, 30, 3, 383578, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))) trading_day='2025-08-21'", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 23196, "name": "AnyIO worker thread"}, "time": {"repr": "2025-08-21 18:30:03.401587+05:30", "timestamp": 1755781203.401587}}}
{"text": "2025-08-21 18:30:03.404 | DEBUG    | app.services.dhan_client:get_pnl:585 - PnL model fields: {'totals': PnLTotals(realized=0.0, unrealized=-1493316.35, day=-1493316.35, currency='INR'), 'per_symbol': [PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1543, avg=1999.73, ltp=1339.51, unrealized=-1018720.63, today_pnl=-1018720.63), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=613, avg=1989.23, ltp=411.41, unrealized=967205.77, today_pnl=967205.77), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=1709, avg=1838.62, ltp=651.39, unrealized=-2028971.7, today_pnl=-2028971.7), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=697, avg=852.74, ltp=567.22, unrealized=199008.67, today_pnl=199008.67), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=255, avg=915.17, ltp=2437.37, unrealized=388161.54, today_pnl=388161.54)], 'updated_at': datetime.datetime(2025, 8, 21, 18, 30, 3, 383578, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))), 'trading_day': '2025-08-21'}\n", "record": {"elapsed": {"repr": "0:01:27.402678", "seconds": 87.402678}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 585, "message": "PnL model fields: {'totals': PnLTotals(realized=0.0, unrealized=-1493316.35, day=-1493316.35, currency='INR'), 'per_symbol': [PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1543, avg=1999.73, ltp=1339.51, unrealized=-1018720.63, today_pnl=-1018720.63), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=613, avg=1989.23, ltp=411.41, unrealized=967205.77, today_pnl=967205.77), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=1709, avg=1838.62, ltp=651.39, unrealized=-2028971.7, today_pnl=-2028971.7), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=697, avg=852.74, ltp=567.22, unrealized=199008.67, today_pnl=199008.67), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=255, avg=915.17, ltp=2437.37, unrealized=388161.54, today_pnl=388161.54)], 'updated_at': datetime.datetime(2025, 8, 21, 18, 30, 3, 383578, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))), 'trading_day': '2025-08-21'}", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 23196, "name": "AnyIO worker thread"}, "time": {"repr": "2025-08-21 18:30:03.404653+05:30", "timestamp": 1755781203.404653}}}
{"text": "2025-08-21 18:30:03.406 | INFO     | app.services.dhan_client:get_pnl:587 - P&L calculation completed successfully: 5 symbols, unrealized=₹-1493316.35\n", "record": {"elapsed": {"repr": "0:01:27.404640", "seconds": 87.40464}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 587, "message": "P&L calculation completed successfully: 5 symbols, unrealized=₹-1493316.35", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 23196, "name": "AnyIO worker thread"}, "time": {"repr": "2025-08-21 18:30:03.406615+05:30", "timestamp": 1755781203.406615}}}
{"text": "2025-08-21 18:30:03.407 | INFO     | app.routes.data:pnl:71 - PnL data returned: True\n", "record": {"elapsed": {"repr": "0:01:27.405935", "seconds": 87.405935}, "exception": null, "extra": {}, "file": {"name": "data.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\routes\\data.py"}, "function": "pnl", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 71, "message": "PnL data returned: True", "module": "data", "name": "app.routes.data", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 23196, "name": "AnyIO worker thread"}, "time": {"repr": "2025-08-21 18:30:03.407910+05:30", "timestamp": 1755781203.40791}}}
{"text": "2025-08-21 18:30:03.410 | INFO     | app.main:add_trace_id:47 - Request completed - Method: GET, Path: /pnl, Status: 200, Trace ID: bc0cb5cb-7cc1-4763-98ea-2c49b0374797\n", "record": {"elapsed": {"repr": "0:01:27.408749", "seconds": 87.408749}, "exception": null, "extra": {}, "file": {"name": "main.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\main.py"}, "function": "add_trace_id", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 47, "message": "Request completed - Method: GET, Path: /pnl, Status: 200, Trace ID: bc0cb5cb-7cc1-4763-98ea-2c49b0374797", "module": "main", "name": "app.main", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:30:03.410724+05:30", "timestamp": 1755781203.410724}}}
{"text": "2025-08-21 18:30:04.229 | INFO     | app.services.dhan_client:get_pnl:489 - Starting accurate P&L calculation\n", "record": {"elapsed": {"repr": "0:01:28.227611", "seconds": 88.227611}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 489, "message": "Starting accurate P&L calculation", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:30:04.229586+05:30", "timestamp": 1755781204.229586}}}
{"text": "2025-08-21 18:30:04.231 | INFO     | app.services.dhan_client:get_pnl:491 - Fetched 5 positions\n", "record": {"elapsed": {"repr": "0:01:28.229119", "seconds": 88.229119}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 491, "message": "Fetched 5 positions", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:30:04.231094+05:30", "timestamp": 1755781204.231094}}}
{"text": "2025-08-21 18:30:04.232 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for RELIANCE: unrealized=-1018720.63, today=-1018720.63\n", "record": {"elapsed": {"repr": "0:01:28.230447", "seconds": 88.230447}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for RELIANCE: unrealized=-1018720.63, today=-1018720.63", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:30:04.232422+05:30", "timestamp": 1755781204.232422}}}
{"text": "2025-08-21 18:30:04.233 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for TCS: unrealized=967205.77, today=967205.77\n", "record": {"elapsed": {"repr": "0:01:28.231713", "seconds": 88.231713}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for TCS: unrealized=967205.77, today=967205.77", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:30:04.233688+05:30", "timestamp": 1755781204.233688}}}
{"text": "2025-08-21 18:30:04.234 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for HDFC: unrealized=-2028971.7, today=-2028971.7\n", "record": {"elapsed": {"repr": "0:01:28.232350", "seconds": 88.23235}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for HDFC: unrealized=-2028971.7, today=-2028971.7", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:30:04.234325+05:30", "timestamp": 1755781204.234325}}}
{"text": "2025-08-21 18:30:04.236 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for INFY: unrealized=199008.67, today=199008.67\n", "record": {"elapsed": {"repr": "0:01:28.234288", "seconds": 88.234288}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for INFY: unrealized=199008.67, today=199008.67", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:30:04.236263+05:30", "timestamp": 1755781204.236263}}}
{"text": "2025-08-21 18:30:04.237 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for ICICIBANK: unrealized=388161.54, today=388161.54\n", "record": {"elapsed": {"repr": "0:01:28.235756", "seconds": 88.235756}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for ICICIBANK: unrealized=388161.54, today=388161.54", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:30:04.237731+05:30", "timestamp": 1755781204.237731}}}
{"text": "2025-08-21 18:30:04.239 | INFO     | app.services.dhan_client:get_pnl:545 - Calculated totals - realized: 0.0, unrealized: -1493316.35, day: -1493316.35\n", "record": {"elapsed": {"repr": "0:01:28.237056", "seconds": 88.237056}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 545, "message": "Calculated totals - realized: 0.0, unrealized: -1493316.35, day: -1493316.35", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:30:04.239031+05:30", "timestamp": 1755781204.239031}}}
{"text": "2025-08-21 18:30:04.240 | DEBUG    | app.services.dhan_client:get_pnl:554 - PnL consistency check passed: drift=₹0.00\n", "record": {"elapsed": {"repr": "0:01:28.238106", "seconds": 88.238106}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 554, "message": "PnL consistency check passed: drift=₹0.00", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:30:04.240081+05:30", "timestamp": 1755781204.240081}}}
{"text": "2025-08-21 18:30:04.241 | DEBUG    | app.services.dhan_client:get_pnl:558 - Creating PnLTotals...\n", "record": {"elapsed": {"repr": "0:01:28.239794", "seconds": 88.239794}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 558, "message": "Creating PnLTotals...", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:30:04.241769+05:30", "timestamp": 1755781204.241769}}}
{"text": "2025-08-21 18:30:04.242 | DEBUG    | app.services.dhan_client:get_pnl:565 - PnLTotals created successfully\n", "record": {"elapsed": {"repr": "0:01:28.241019", "seconds": 88.241019}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 565, "message": "PnLTotals created successfully", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:30:04.242994+05:30", "timestamp": 1755781204.242994}}}
{"text": "2025-08-21 18:30:04.244 | DEBUG    | app.services.dhan_client:get_pnl:574 - Creating PnL model...\n", "record": {"elapsed": {"repr": "0:01:28.242736", "seconds": 88.242736}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 574, "message": "Creating PnL model...", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:30:04.244711+05:30", "timestamp": 1755781204.244711}}}
{"text": "2025-08-21 18:30:04.247 | DEBUG    | app.services.dhan_client:get_pnl:575 - Model fields: totals=<class 'app.models.schemas.PnLTotals'>, perSymbol=5, updated_at=2025-08-21 18:30:04.232240+05:30, trading_day=2025-08-21\n", "record": {"elapsed": {"repr": "0:01:28.245132", "seconds": 88.245132}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 575, "message": "Model fields: totals=<class 'app.models.schemas.PnLTotals'>, perSymbol=5, updated_at=2025-08-21 18:30:04.232240+05:30, trading_day=2025-08-21", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:30:04.247107+05:30", "timestamp": 1755781204.247107}}}
{"text": "2025-08-21 18:30:04.249 | DEBUG    | app.services.dhan_client:get_pnl:584 - Created PnL model: totals=PnLTotals(realized=0.0, unrealized=-1493316.35, day=-1493316.35, currency='INR') per_symbol=[PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1543, avg=1999.73, ltp=1339.51, unrealized=-1018720.63, today_pnl=-1018720.63), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=613, avg=1989.23, ltp=411.41, unrealized=967205.77, today_pnl=967205.77), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=1709, avg=1838.62, ltp=651.39, unrealized=-2028971.7, today_pnl=-2028971.7), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=697, avg=852.74, ltp=567.22, unrealized=199008.67, today_pnl=199008.67), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=255, avg=915.17, ltp=2437.37, unrealized=388161.54, today_pnl=388161.54)] updated_at=datetime.datetime(2025, 8, 21, 18, 30, 4, 232240, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))) trading_day='2025-08-21'\n", "record": {"elapsed": {"repr": "0:01:28.247360", "seconds": 88.24736}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 584, "message": "Created PnL model: totals=PnLTotals(realized=0.0, unrealized=-1493316.35, day=-1493316.35, currency='INR') per_symbol=[PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1543, avg=1999.73, ltp=1339.51, unrealized=-1018720.63, today_pnl=-1018720.63), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=613, avg=1989.23, ltp=411.41, unrealized=967205.77, today_pnl=967205.77), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=1709, avg=1838.62, ltp=651.39, unrealized=-2028971.7, today_pnl=-2028971.7), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=697, avg=852.74, ltp=567.22, unrealized=199008.67, today_pnl=199008.67), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=255, avg=915.17, ltp=2437.37, unrealized=388161.54, today_pnl=388161.54)] updated_at=datetime.datetime(2025, 8, 21, 18, 30, 4, 232240, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))) trading_day='2025-08-21'", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:30:04.249335+05:30", "timestamp": 1755781204.249335}}}
{"text": "2025-08-21 18:30:04.250 | DEBUG    | app.services.dhan_client:get_pnl:585 - PnL model fields: {'totals': PnLTotals(realized=0.0, unrealized=-1493316.35, day=-1493316.35, currency='INR'), 'per_symbol': [PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1543, avg=1999.73, ltp=1339.51, unrealized=-1018720.63, today_pnl=-1018720.63), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=613, avg=1989.23, ltp=411.41, unrealized=967205.77, today_pnl=967205.77), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=1709, avg=1838.62, ltp=651.39, unrealized=-2028971.7, today_pnl=-2028971.7), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=697, avg=852.74, ltp=567.22, unrealized=199008.67, today_pnl=199008.67), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=255, avg=915.17, ltp=2437.37, unrealized=388161.54, today_pnl=388161.54)], 'updated_at': datetime.datetime(2025, 8, 21, 18, 30, 4, 232240, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))), 'trading_day': '2025-08-21'}\n", "record": {"elapsed": {"repr": "0:01:28.248840", "seconds": 88.24884}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 585, "message": "PnL model fields: {'totals': PnLTotals(realized=0.0, unrealized=-1493316.35, day=-1493316.35, currency='INR'), 'per_symbol': [PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1543, avg=1999.73, ltp=1339.51, unrealized=-1018720.63, today_pnl=-1018720.63), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=613, avg=1989.23, ltp=411.41, unrealized=967205.77, today_pnl=967205.77), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=1709, avg=1838.62, ltp=651.39, unrealized=-2028971.7, today_pnl=-2028971.7), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=697, avg=852.74, ltp=567.22, unrealized=199008.67, today_pnl=199008.67), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=255, avg=915.17, ltp=2437.37, unrealized=388161.54, today_pnl=388161.54)], 'updated_at': datetime.datetime(2025, 8, 21, 18, 30, 4, 232240, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))), 'trading_day': '2025-08-21'}", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:30:04.250815+05:30", "timestamp": 1755781204.250815}}}
{"text": "2025-08-21 18:30:04.252 | INFO     | app.services.dhan_client:get_pnl:587 - P&L calculation completed successfully: 5 symbols, unrealized=₹-1493316.35\n", "record": {"elapsed": {"repr": "0:01:28.250099", "seconds": 88.250099}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 587, "message": "P&L calculation completed successfully: 5 symbols, unrealized=₹-1493316.35", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:30:04.252074+05:30", "timestamp": 1755781204.252074}}}
{"text": "2025-08-21 18:30:04.253 | DEBUG    | app.ws.live:emit_delta:408 - Emitted pnl delta: seq=119\n", "record": {"elapsed": {"repr": "0:01:28.251604", "seconds": 88.251604}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "emit_delta", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 408, "message": "Emitted pnl delta: seq=119", "module": "live", "name": "app.ws.live", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:30:04.253579+05:30", "timestamp": 1755781204.253579}}}
{"text": "2025-08-21 18:30:04.255 | DEBUG    | app.ws.live:emit_delta:408 - Emitted positions delta: seq=120\n", "record": {"elapsed": {"repr": "0:01:28.253339", "seconds": 88.253339}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "emit_delta", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 408, "message": "Emitted positions delta: seq=120", "module": "live", "name": "app.ws.live", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:30:04.255314+05:30", "timestamp": 1755781204.255314}}}
{"text": "2025-08-21 18:30:04.625 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:01:28.623957", "seconds": 88.623957}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 17632, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 18:30:04.625932+05:30", "timestamp": 1755781204.625932}}}
{"text": "2025-08-21 18:30:04.627 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:01:28.625111", "seconds": 88.625111}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 17632, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 18:30:04.627086+05:30", "timestamp": 1755781204.627086}}}
{"text": "2025-08-21 18:30:04.628 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:01:28.626765", "seconds": 88.626765}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 17632, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 18:30:04.628740+05:30", "timestamp": 1755781204.62874}}}
{"text": "2025-08-21 18:30:04.630 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:01:28.628633", "seconds": 88.628633}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 17632, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 18:30:04.630608+05:30", "timestamp": 1755781204.630608}}}
{"text": "2025-08-21 18:30:04.631 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:01:28.629369", "seconds": 88.629369}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 17632, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 18:30:04.631344+05:30", "timestamp": 1755781204.631344}}}
{"text": "2025-08-21 18:30:04.632 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:01:28.630937", "seconds": 88.630937}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 17632, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 18:30:04.632912+05:30", "timestamp": 1755781204.632912}}}
{"text": "2025-08-21 18:30:04.634 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:01:28.632485", "seconds": 88.632485}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 17632, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 18:30:04.634460+05:30", "timestamp": 1755781204.63446}}}
{"text": "2025-08-21 18:30:04.635 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:01:28.633901", "seconds": 88.633901}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 17632, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 18:30:04.635876+05:30", "timestamp": 1755781204.635876}}}
{"text": "2025-08-21 18:30:04.638 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:01:28.636932", "seconds": 88.636932}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 17632, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 18:30:04.638907+05:30", "timestamp": 1755781204.638907}}}
{"text": "2025-08-21 18:30:04.639 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:01:28.637932", "seconds": 88.637932}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 17632, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 18:30:04.639907+05:30", "timestamp": 1755781204.639907}}}
{"text": "2025-08-21 18:30:06.209 | INFO     | app.services.dhan_client:get_pnl:489 - Starting accurate P&L calculation\n", "record": {"elapsed": {"repr": "0:01:30.207520", "seconds": 90.20752}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 489, "message": "Starting accurate P&L calculation", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:30:06.209495+05:30", "timestamp": 1755781206.209495}}}
{"text": "2025-08-21 18:30:06.211 | INFO     | app.services.dhan_client:get_pnl:491 - Fetched 5 positions\n", "record": {"elapsed": {"repr": "0:01:30.209336", "seconds": 90.209336}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 491, "message": "Fetched 5 positions", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:30:06.211311+05:30", "timestamp": 1755781206.211311}}}
{"text": "2025-08-21 18:30:06.212 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for RELIANCE: unrealized=-989680.36, today=-989680.36\n", "record": {"elapsed": {"repr": "0:01:30.210863", "seconds": 90.210863}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for RELIANCE: unrealized=-989680.36, today=-989680.36", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:30:06.212838+05:30", "timestamp": 1755781206.212838}}}
{"text": "2025-08-21 18:30:06.213 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for TCS: unrealized=962184.69, today=962184.69\n", "record": {"elapsed": {"repr": "0:01:30.211631", "seconds": 90.211631}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for TCS: unrealized=962184.69, today=962184.69", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:30:06.213606+05:30", "timestamp": 1755781206.213606}}}
{"text": "2025-08-21 18:30:06.215 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for HDFC: unrealized=-2036654.84, today=-2036654.84\n", "record": {"elapsed": {"repr": "0:01:30.213132", "seconds": 90.213132}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for HDFC: unrealized=-2036654.84, today=-2036654.84", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:30:06.215107+05:30", "timestamp": 1755781206.215107}}}
{"text": "2025-08-21 18:30:06.216 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for INFY: unrealized=192455.0, today=192455.0\n", "record": {"elapsed": {"repr": "0:01:30.214267", "seconds": 90.214267}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for INFY: unrealized=192455.0, today=192455.0", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:30:06.216242+05:30", "timestamp": 1755781206.216242}}}
{"text": "2025-08-21 18:30:06.217 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for ICICIBANK: unrealized=388360.02, today=388360.02\n", "record": {"elapsed": {"repr": "0:01:30.215702", "seconds": 90.215702}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for ICICIBANK: unrealized=388360.02, today=388360.02", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:30:06.217677+05:30", "timestamp": 1755781206.217677}}}
{"text": "2025-08-21 18:30:06.220 | INFO     | app.services.dhan_client:get_pnl:545 - Calculated totals - realized: 0.0, unrealized: -1483335.49, day: -1483335.49\n", "record": {"elapsed": {"repr": "0:01:30.218605", "seconds": 90.218605}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 545, "message": "Calculated totals - realized: 0.0, unrealized: -1483335.49, day: -1483335.49", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:30:06.220580+05:30", "timestamp": 1755781206.22058}}}
{"text": "2025-08-21 18:30:06.221 | DEBUG    | app.services.dhan_client:get_pnl:554 - PnL consistency check passed: drift=₹0.00\n", "record": {"elapsed": {"repr": "0:01:30.219515", "seconds": 90.219515}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 554, "message": "PnL consistency check passed: drift=₹0.00", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:30:06.221490+05:30", "timestamp": 1755781206.22149}}}
{"text": "2025-08-21 18:30:06.222 | DEBUG    | app.services.dhan_client:get_pnl:558 - Creating PnLTotals...\n", "record": {"elapsed": {"repr": "0:01:30.220316", "seconds": 90.220316}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 558, "message": "Creating PnLTotals...", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:30:06.222291+05:30", "timestamp": 1755781206.222291}}}
{"text": "2025-08-21 18:30:06.223 | DEBUG    | app.services.dhan_client:get_pnl:565 - PnLTotals created successfully\n", "record": {"elapsed": {"repr": "0:01:30.221141", "seconds": 90.221141}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 565, "message": "PnLTotals created successfully", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:30:06.223116+05:30", "timestamp": 1755781206.223116}}}
{"text": "2025-08-21 18:30:06.223 | DEBUG    | app.services.dhan_client:get_pnl:574 - Creating PnL model...\n", "record": {"elapsed": {"repr": "0:01:30.221808", "seconds": 90.221808}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 574, "message": "Creating PnL model...", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:30:06.223783+05:30", "timestamp": 1755781206.223783}}}
{"text": "2025-08-21 18:30:06.224 | DEBUG    | app.services.dhan_client:get_pnl:575 - Model fields: totals=<class 'app.models.schemas.PnLTotals'>, perSymbol=5, updated_at=2025-08-21 18:30:06.212712+05:30, trading_day=2025-08-21\n", "record": {"elapsed": {"repr": "0:01:30.222912", "seconds": 90.222912}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 575, "message": "Model fields: totals=<class 'app.models.schemas.PnLTotals'>, perSymbol=5, updated_at=2025-08-21 18:30:06.212712+05:30, trading_day=2025-08-21", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:30:06.224887+05:30", "timestamp": 1755781206.224887}}}
{"text": "2025-08-21 18:30:06.226 | DEBUG    | app.services.dhan_client:get_pnl:584 - Created PnL model: totals=PnLTotals(realized=0.0, unrealized=-1483335.49, day=-1483335.49, currency='INR') per_symbol=[PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1543, avg=1999.73, ltp=1358.33, unrealized=-989680.36, today_pnl=-989680.36), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=613, avg=1989.23, ltp=419.6, unrealized=962184.69, today_pnl=962184.69), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=1709, avg=1838.62, ltp=646.9, unrealized=-2036654.84, today_pnl=-2036654.84), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=697, avg=852.74, ltp=576.62, unrealized=192455.0, today_pnl=192455.0), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=255, avg=915.17, ltp=2438.15, unrealized=388360.02, today_pnl=388360.02)] updated_at=datetime.datetime(2025, 8, 21, 18, 30, 6, 212712, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))) trading_day='2025-08-21'\n", "record": {"elapsed": {"repr": "0:01:30.224332", "seconds": 90.224332}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 584, "message": "Created PnL model: totals=PnLTotals(realized=0.0, unrealized=-1483335.49, day=-1483335.49, currency='INR') per_symbol=[PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1543, avg=1999.73, ltp=1358.33, unrealized=-989680.36, today_pnl=-989680.36), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=613, avg=1989.23, ltp=419.6, unrealized=962184.69, today_pnl=962184.69), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=1709, avg=1838.62, ltp=646.9, unrealized=-2036654.84, today_pnl=-2036654.84), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=697, avg=852.74, ltp=576.62, unrealized=192455.0, today_pnl=192455.0), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=255, avg=915.17, ltp=2438.15, unrealized=388360.02, today_pnl=388360.02)] updated_at=datetime.datetime(2025, 8, 21, 18, 30, 6, 212712, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))) trading_day='2025-08-21'", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:30:06.226307+05:30", "timestamp": 1755781206.226307}}}
{"text": "2025-08-21 18:30:06.227 | DEBUG    | app.services.dhan_client:get_pnl:585 - PnL model fields: {'totals': PnLTotals(realized=0.0, unrealized=-1483335.49, day=-1483335.49, currency='INR'), 'per_symbol': [PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1543, avg=1999.73, ltp=1358.33, unrealized=-989680.36, today_pnl=-989680.36), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=613, avg=1989.23, ltp=419.6, unrealized=962184.69, today_pnl=962184.69), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=1709, avg=1838.62, ltp=646.9, unrealized=-2036654.84, today_pnl=-2036654.84), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=697, avg=852.74, ltp=576.62, unrealized=192455.0, today_pnl=192455.0), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=255, avg=915.17, ltp=2438.15, unrealized=388360.02, today_pnl=388360.02)], 'updated_at': datetime.datetime(2025, 8, 21, 18, 30, 6, 212712, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))), 'trading_day': '2025-08-21'}\n", "record": {"elapsed": {"repr": "0:01:30.225830", "seconds": 90.22583}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 585, "message": "PnL model fields: {'totals': PnLTotals(realized=0.0, unrealized=-1483335.49, day=-1483335.49, currency='INR'), 'per_symbol': [PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1543, avg=1999.73, ltp=1358.33, unrealized=-989680.36, today_pnl=-989680.36), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=613, avg=1989.23, ltp=419.6, unrealized=962184.69, today_pnl=962184.69), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=1709, avg=1838.62, ltp=646.9, unrealized=-2036654.84, today_pnl=-2036654.84), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=697, avg=852.74, ltp=576.62, unrealized=192455.0, today_pnl=192455.0), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=255, avg=915.17, ltp=2438.15, unrealized=388360.02, today_pnl=388360.02)], 'updated_at': datetime.datetime(2025, 8, 21, 18, 30, 6, 212712, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))), 'trading_day': '2025-08-21'}", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:30:06.227805+05:30", "timestamp": 1755781206.227805}}}
{"text": "2025-08-21 18:30:06.229 | INFO     | app.services.dhan_client:get_pnl:587 - P&L calculation completed successfully: 5 symbols, unrealized=₹-1483335.49\n", "record": {"elapsed": {"repr": "0:01:30.227367", "seconds": 90.227367}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 587, "message": "P&L calculation completed successfully: 5 symbols, unrealized=₹-1483335.49", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:30:06.229342+05:30", "timestamp": 1755781206.229342}}}
{"text": "2025-08-21 18:30:06.230 | DEBUG    | app.ws.live:emit_delta:408 - Emitted pnl delta: seq=121\n", "record": {"elapsed": {"repr": "0:01:30.228975", "seconds": 90.228975}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "emit_delta", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 408, "message": "Emitted pnl delta: seq=121", "module": "live", "name": "app.ws.live", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:30:06.230950+05:30", "timestamp": 1755781206.23095}}}
{"text": "2025-08-21 18:30:06.233 | DEBUG    | app.ws.live:emit_delta:408 - Emitted positions delta: seq=122\n", "record": {"elapsed": {"repr": "0:01:30.231262", "seconds": 90.231262}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "emit_delta", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 408, "message": "Emitted positions delta: seq=122", "module": "live", "name": "app.ws.live", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:30:06.233237+05:30", "timestamp": 1755781206.233237}}}
{"text": "2025-08-21 18:30:06.640 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:01:30.638916", "seconds": 90.638916}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 17632, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 18:30:06.640891+05:30", "timestamp": 1755781206.640891}}}
{"text": "2025-08-21 18:30:06.641 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:01:30.639874", "seconds": 90.639874}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 17632, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 18:30:06.641849+05:30", "timestamp": 1755781206.641849}}}
{"text": "2025-08-21 18:30:06.642 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:01:30.640593", "seconds": 90.640593}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 17632, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 18:30:06.642568+05:30", "timestamp": 1755781206.642568}}}
{"text": "2025-08-21 18:30:06.643 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:01:30.641602", "seconds": 90.641602}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 17632, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 18:30:06.643577+05:30", "timestamp": 1755781206.643577}}}
{"text": "2025-08-21 18:30:06.644 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:01:30.642332", "seconds": 90.642332}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 17632, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 18:30:06.644307+05:30", "timestamp": 1755781206.644307}}}
{"text": "2025-08-21 18:30:06.645 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:01:30.643835", "seconds": 90.643835}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 17632, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 18:30:06.645810+05:30", "timestamp": 1755781206.64581}}}
{"text": "2025-08-21 18:30:06.646 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:01:30.644674", "seconds": 90.644674}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 17632, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 18:30:06.646649+05:30", "timestamp": 1755781206.646649}}}
{"text": "2025-08-21 18:30:06.647 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:01:30.645524", "seconds": 90.645524}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 17632, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 18:30:06.647499+05:30", "timestamp": 1755781206.647499}}}
{"text": "2025-08-21 18:30:06.648 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:01:30.646216", "seconds": 90.646216}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 17632, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 18:30:06.648191+05:30", "timestamp": 1755781206.648191}}}
{"text": "2025-08-21 18:30:06.648 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:01:30.646969", "seconds": 90.646969}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 17632, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 18:30:06.648944+05:30", "timestamp": 1755781206.648944}}}
{"text": "2025-08-21 18:30:08.174 | INFO     | app.services.dhan_client:get_pnl:489 - Starting accurate P&L calculation\n", "record": {"elapsed": {"repr": "0:01:32.172186", "seconds": 92.172186}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 489, "message": "Starting accurate P&L calculation", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:30:08.174161+05:30", "timestamp": 1755781208.174161}}}
{"text": "2025-08-21 18:30:08.175 | INFO     | app.services.dhan_client:get_pnl:491 - Fetched 5 positions\n", "record": {"elapsed": {"repr": "0:01:32.173686", "seconds": 92.173686}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 491, "message": "Fetched 5 positions", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:30:08.175661+05:30", "timestamp": 1755781208.175661}}}
{"text": "2025-08-21 18:30:08.176 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for RELIANCE: unrealized=-992022.25, today=-992022.25\n", "record": {"elapsed": {"repr": "0:01:32.174498", "seconds": 92.174498}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for RELIANCE: unrealized=-992022.25, today=-992022.25", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:30:08.176473+05:30", "timestamp": 1755781208.176473}}}
{"text": "2025-08-21 18:30:08.177 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for TCS: unrealized=962362.77, today=962362.77\n", "record": {"elapsed": {"repr": "0:01:32.175774", "seconds": 92.175774}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for TCS: unrealized=962362.77, today=962362.77", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:30:08.177749+05:30", "timestamp": 1755781208.177749}}}
{"text": "2025-08-21 18:30:08.178 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for HDFC: unrealized=-2019945.89, today=-2019945.89\n", "record": {"elapsed": {"repr": "0:01:32.176377", "seconds": 92.176377}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for HDFC: unrealized=-2019945.89, today=-2019945.89", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:30:08.178352+05:30", "timestamp": 1755781208.178352}}}
{"text": "2025-08-21 18:30:08.178 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for INFY: unrealized=198354.18, today=198354.18\n", "record": {"elapsed": {"repr": "0:01:32.176945", "seconds": 92.176945}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for INFY: unrealized=198354.18, today=198354.18", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:30:08.178920+05:30", "timestamp": 1755781208.17892}}}
{"text": "2025-08-21 18:30:08.179 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for ICICIBANK: unrealized=382747.41, today=382747.41\n", "record": {"elapsed": {"repr": "0:01:32.177545", "seconds": 92.177545}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for ICICIBANK: unrealized=382747.41, today=382747.41", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:30:08.179520+05:30", "timestamp": 1755781208.17952}}}
{"text": "2025-08-21 18:30:08.180 | INFO     | app.services.dhan_client:get_pnl:545 - Calculated totals - realized: 0.0, unrealized: -1468503.78, day: -1468503.78\n", "record": {"elapsed": {"repr": "0:01:32.178116", "seconds": 92.178116}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 545, "message": "Calculated totals - realized: 0.0, unrealized: -1468503.78, day: -1468503.78", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:30:08.180091+05:30", "timestamp": 1755781208.180091}}}
{"text": "2025-08-21 18:30:08.180 | DEBUG    | app.services.dhan_client:get_pnl:554 - PnL consistency check passed: drift=₹0.00\n", "record": {"elapsed": {"repr": "0:01:32.178830", "seconds": 92.17883}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 554, "message": "PnL consistency check passed: drift=₹0.00", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:30:08.180805+05:30", "timestamp": 1755781208.180805}}}
{"text": "2025-08-21 18:30:08.181 | DEBUG    | app.services.dhan_client:get_pnl:558 - Creating PnLTotals...\n", "record": {"elapsed": {"repr": "0:01:32.179700", "seconds": 92.1797}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 558, "message": "Creating PnLTotals...", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:30:08.181675+05:30", "timestamp": 1755781208.181675}}}
{"text": "2025-08-21 18:30:08.182 | DEBUG    | app.services.dhan_client:get_pnl:565 - PnLTotals created successfully\n", "record": {"elapsed": {"repr": "0:01:32.180682", "seconds": 92.180682}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 565, "message": "PnLTotals created successfully", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:30:08.182657+05:30", "timestamp": 1755781208.182657}}}
{"text": "2025-08-21 18:30:08.183 | DEBUG    | app.services.dhan_client:get_pnl:574 - Creating PnL model...\n", "record": {"elapsed": {"repr": "0:01:32.181593", "seconds": 92.181593}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 574, "message": "Creating PnL model...", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:30:08.183568+05:30", "timestamp": 1755781208.183568}}}
{"text": "2025-08-21 18:30:08.184 | DEBUG    | app.services.dhan_client:get_pnl:575 - Model fields: totals=<class 'app.models.schemas.PnLTotals'>, perSymbol=5, updated_at=2025-08-21 18:30:08.176368+05:30, trading_day=2025-08-21\n", "record": {"elapsed": {"repr": "0:01:32.182350", "seconds": 92.18235}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 575, "message": "Model fields: totals=<class 'app.models.schemas.PnLTotals'>, perSymbol=5, updated_at=2025-08-21 18:30:08.176368+05:30, trading_day=2025-08-21", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:30:08.184325+05:30", "timestamp": 1755781208.184325}}}
{"text": "2025-08-21 18:30:08.185 | DEBUG    | app.services.dhan_client:get_pnl:584 - Created PnL model: totals=PnLTotals(realized=0.0, unrealized=-1468503.78, day=-1468503.78, currency='INR') per_symbol=[PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1543, avg=1999.73, ltp=1356.81, unrealized=-992022.25, today_pnl=-992022.25), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=613, avg=1989.23, ltp=419.31, unrealized=962362.77, today_pnl=962362.77), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=1709, avg=1838.62, ltp=656.67, unrealized=-2019945.89, today_pnl=-2019945.89), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=697, avg=852.74, ltp=568.16, unrealized=198354.18, today_pnl=198354.18), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=255, avg=915.17, ltp=2416.14, unrealized=382747.41, today_pnl=382747.41)] updated_at=datetime.datetime(2025, 8, 21, 18, 30, 8, 176368, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))) trading_day='2025-08-21'\n", "record": {"elapsed": {"repr": "0:01:32.183300", "seconds": 92.1833}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 584, "message": "Created PnL model: totals=PnLTotals(realized=0.0, unrealized=-1468503.78, day=-1468503.78, currency='INR') per_symbol=[PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1543, avg=1999.73, ltp=1356.81, unrealized=-992022.25, today_pnl=-992022.25), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=613, avg=1989.23, ltp=419.31, unrealized=962362.77, today_pnl=962362.77), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=1709, avg=1838.62, ltp=656.67, unrealized=-2019945.89, today_pnl=-2019945.89), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=697, avg=852.74, ltp=568.16, unrealized=198354.18, today_pnl=198354.18), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=255, avg=915.17, ltp=2416.14, unrealized=382747.41, today_pnl=382747.41)] updated_at=datetime.datetime(2025, 8, 21, 18, 30, 8, 176368, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))) trading_day='2025-08-21'", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:30:08.185275+05:30", "timestamp": 1755781208.185275}}}
{"text": "2025-08-21 18:30:08.187 | DEBUG    | app.services.dhan_client:get_pnl:585 - PnL model fields: {'totals': PnLTotals(realized=0.0, unrealized=-1468503.78, day=-1468503.78, currency='INR'), 'per_symbol': [PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1543, avg=1999.73, ltp=1356.81, unrealized=-992022.25, today_pnl=-992022.25), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=613, avg=1989.23, ltp=419.31, unrealized=962362.77, today_pnl=962362.77), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=1709, avg=1838.62, ltp=656.67, unrealized=-2019945.89, today_pnl=-2019945.89), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=697, avg=852.74, ltp=568.16, unrealized=198354.18, today_pnl=198354.18), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=255, avg=915.17, ltp=2416.14, unrealized=382747.41, today_pnl=382747.41)], 'updated_at': datetime.datetime(2025, 8, 21, 18, 30, 8, 176368, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))), 'trading_day': '2025-08-21'}\n", "record": {"elapsed": {"repr": "0:01:32.185308", "seconds": 92.185308}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 585, "message": "PnL model fields: {'totals': PnLTotals(realized=0.0, unrealized=-1468503.78, day=-1468503.78, currency='INR'), 'per_symbol': [PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1543, avg=1999.73, ltp=1356.81, unrealized=-992022.25, today_pnl=-992022.25), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=613, avg=1989.23, ltp=419.31, unrealized=962362.77, today_pnl=962362.77), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=1709, avg=1838.62, ltp=656.67, unrealized=-2019945.89, today_pnl=-2019945.89), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=697, avg=852.74, ltp=568.16, unrealized=198354.18, today_pnl=198354.18), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=255, avg=915.17, ltp=2416.14, unrealized=382747.41, today_pnl=382747.41)], 'updated_at': datetime.datetime(2025, 8, 21, 18, 30, 8, 176368, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))), 'trading_day': '2025-08-21'}", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:30:08.187283+05:30", "timestamp": 1755781208.187283}}}
{"text": "2025-08-21 18:30:08.188 | INFO     | app.services.dhan_client:get_pnl:587 - P&L calculation completed successfully: 5 symbols, unrealized=₹-1468503.78\n", "record": {"elapsed": {"repr": "0:01:32.186875", "seconds": 92.186875}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 587, "message": "P&L calculation completed successfully: 5 symbols, unrealized=₹-1468503.78", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:30:08.188850+05:30", "timestamp": 1755781208.18885}}}
{"text": "2025-08-21 18:30:08.190 | DEBUG    | app.ws.live:emit_delta:408 - Emitted pnl delta: seq=123\n", "record": {"elapsed": {"repr": "0:01:32.188549", "seconds": 92.188549}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "emit_delta", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 408, "message": "Emitted pnl delta: seq=123", "module": "live", "name": "app.ws.live", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:30:08.190524+05:30", "timestamp": 1755781208.190524}}}
{"text": "2025-08-21 18:30:08.191 | DEBUG    | app.ws.live:emit_delta:408 - Emitted positions delta: seq=124\n", "record": {"elapsed": {"repr": "0:01:32.189677", "seconds": 92.189677}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "emit_delta", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 408, "message": "Emitted positions delta: seq=124", "module": "live", "name": "app.ws.live", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:30:08.191652+05:30", "timestamp": 1755781208.191652}}}
{"text": "2025-08-21 18:30:08.650 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:01:32.648689", "seconds": 92.648689}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 17632, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 18:30:08.650664+05:30", "timestamp": 1755781208.650664}}}
{"text": "2025-08-21 18:30:08.651 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:01:32.649900", "seconds": 92.6499}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 17632, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 18:30:08.651875+05:30", "timestamp": 1755781208.651875}}}
{"text": "2025-08-21 18:30:08.653 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:01:32.651107", "seconds": 92.651107}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 17632, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 18:30:08.653082+05:30", "timestamp": 1755781208.653082}}}
{"text": "2025-08-21 18:30:08.654 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:01:32.652091", "seconds": 92.652091}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 17632, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 18:30:08.654066+05:30", "timestamp": 1755781208.654066}}}
{"text": "2025-08-21 18:30:08.655 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:01:32.653201", "seconds": 92.653201}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 17632, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 18:30:08.655176+05:30", "timestamp": 1755781208.655176}}}
{"text": "2025-08-21 18:30:08.656 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:01:32.654079", "seconds": 92.654079}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 17632, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 18:30:08.656054+05:30", "timestamp": 1755781208.656054}}}
{"text": "2025-08-21 18:30:08.656 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:01:32.654834", "seconds": 92.654834}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 17632, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 18:30:08.656809+05:30", "timestamp": 1755781208.656809}}}
{"text": "2025-08-21 18:30:08.657 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:01:32.655978", "seconds": 92.655978}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 17632, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 18:30:08.657953+05:30", "timestamp": 1755781208.657953}}}
{"text": "2025-08-21 18:30:08.659 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:01:32.657223", "seconds": 92.657223}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 17632, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 18:30:08.659198+05:30", "timestamp": 1755781208.659198}}}
{"text": "2025-08-21 18:30:08.660 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:01:32.658636", "seconds": 92.658636}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 17632, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 18:30:08.660611+05:30", "timestamp": 1755781208.660611}}}
{"text": "2025-08-21 18:30:10.123 | INFO     | app.services.dhan_client:get_pnl:489 - Starting accurate P&L calculation\n", "record": {"elapsed": {"repr": "0:01:34.121120", "seconds": 94.12112}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 489, "message": "Starting accurate P&L calculation", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:30:10.123095+05:30", "timestamp": 1755781210.123095}}}
{"text": "2025-08-21 18:30:10.125 | INFO     | app.services.dhan_client:get_pnl:491 - Fetched 5 positions\n", "record": {"elapsed": {"repr": "0:01:34.123741", "seconds": 94.123741}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 491, "message": "Fetched 5 positions", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:30:10.125716+05:30", "timestamp": 1755781210.125716}}}
{"text": "2025-08-21 18:30:10.127 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for RELIANCE: unrealized=-1016615.79, today=-1016615.79\n", "record": {"elapsed": {"repr": "0:01:34.125465", "seconds": 94.125465}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for RELIANCE: unrealized=-1016615.79, today=-1016615.79", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:30:10.127440+05:30", "timestamp": 1755781210.12744}}}
{"text": "2025-08-21 18:30:10.128 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for TCS: unrealized=963142.09, today=963142.09\n", "record": {"elapsed": {"repr": "0:01:34.126260", "seconds": 94.12626}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for TCS: unrealized=963142.09, today=963142.09", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:30:10.128235+05:30", "timestamp": 1755781210.128235}}}
{"text": "2025-08-21 18:30:10.128 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for HDFC: unrealized=-1997774.1, today=-1997774.1\n", "record": {"elapsed": {"repr": "0:01:34.126998", "seconds": 94.126998}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for HDFC: unrealized=-1997774.1, today=-1997774.1", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:30:10.128973+05:30", "timestamp": 1755781210.128973}}}
{"text": "2025-08-21 18:30:10.130 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for INFY: unrealized=191327.36, today=191327.36\n", "record": {"elapsed": {"repr": "0:01:34.128435", "seconds": 94.128435}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for INFY: unrealized=191327.36, today=191327.36", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:30:10.130410+05:30", "timestamp": 1755781210.13041}}}
{"text": "2025-08-21 18:30:10.131 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for ICICIBANK: unrealized=373586.69, today=373586.69\n", "record": {"elapsed": {"repr": "0:01:34.129447", "seconds": 94.129447}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for ICICIBANK: unrealized=373586.69, today=373586.69", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:30:10.131422+05:30", "timestamp": 1755781210.131422}}}
{"text": "2025-08-21 18:30:10.132 | INFO     | app.services.dhan_client:get_pnl:545 - Calculated totals - realized: 0.0, unrealized: -1486333.75, day: -1486333.75\n", "record": {"elapsed": {"repr": "0:01:34.130643", "seconds": 94.130643}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 545, "message": "Calculated totals - realized: 0.0, unrealized: -1486333.75, day: -1486333.75", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:30:10.132618+05:30", "timestamp": 1755781210.132618}}}
{"text": "2025-08-21 18:30:10.133 | DEBUG    | app.services.dhan_client:get_pnl:554 - PnL consistency check passed: drift=₹0.00\n", "record": {"elapsed": {"repr": "0:01:34.131537", "seconds": 94.131537}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 554, "message": "PnL consistency check passed: drift=₹0.00", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:30:10.133512+05:30", "timestamp": 1755781210.133512}}}
{"text": "2025-08-21 18:30:10.134 | DEBUG    | app.services.dhan_client:get_pnl:558 - Creating PnLTotals...\n", "record": {"elapsed": {"repr": "0:01:34.132798", "seconds": 94.132798}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 558, "message": "Creating PnLTotals...", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:30:10.134773+05:30", "timestamp": 1755781210.134773}}}
{"text": "2025-08-21 18:30:10.135 | DEBUG    | app.services.dhan_client:get_pnl:565 - PnLTotals created successfully\n", "record": {"elapsed": {"repr": "0:01:34.133516", "seconds": 94.133516}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 565, "message": "PnLTotals created successfully", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:30:10.135491+05:30", "timestamp": 1755781210.135491}}}
{"text": "2025-08-21 18:30:10.136 | DEBUG    | app.services.dhan_client:get_pnl:574 - Creating PnL model...\n", "record": {"elapsed": {"repr": "0:01:34.134190", "seconds": 94.13419}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 574, "message": "Creating PnL model...", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:30:10.136165+05:30", "timestamp": 1755781210.136165}}}
{"text": "2025-08-21 18:30:10.136 | DEBUG    | app.services.dhan_client:get_pnl:575 - Model fields: totals=<class 'app.models.schemas.PnLTotals'>, perSymbol=5, updated_at=2025-08-21 18:30:10.127327+05:30, trading_day=2025-08-21\n", "record": {"elapsed": {"repr": "0:01:34.134950", "seconds": 94.13495}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 575, "message": "Model fields: totals=<class 'app.models.schemas.PnLTotals'>, perSymbol=5, updated_at=2025-08-21 18:30:10.127327+05:30, trading_day=2025-08-21", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:30:10.136925+05:30", "timestamp": 1755781210.136925}}}
{"text": "2025-08-21 18:30:10.138 | DEBUG    | app.services.dhan_client:get_pnl:584 - Created PnL model: totals=PnLTotals(realized=0.0, unrealized=-1486333.75, day=-1486333.75, currency='INR') per_symbol=[PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1543, avg=1999.73, ltp=1340.87, unrealized=-1016615.79, today_pnl=-1016615.79), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=613, avg=1989.23, ltp=418.04, unrealized=963142.09, today_pnl=963142.09), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=1709, avg=1838.62, ltp=669.65, unrealized=-1997774.1, today_pnl=-1997774.1), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=697, avg=852.74, ltp=578.24, unrealized=191327.36, today_pnl=191327.36), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=255, avg=915.17, ltp=2380.22, unrealized=373586.69, today_pnl=373586.69)] updated_at=datetime.datetime(2025, 8, 21, 18, 30, 10, 127327, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))) trading_day='2025-08-21'\n", "record": {"elapsed": {"repr": "0:01:34.136048", "seconds": 94.136048}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 584, "message": "Created PnL model: totals=PnLTotals(realized=0.0, unrealized=-1486333.75, day=-1486333.75, currency='INR') per_symbol=[PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1543, avg=1999.73, ltp=1340.87, unrealized=-1016615.79, today_pnl=-1016615.79), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=613, avg=1989.23, ltp=418.04, unrealized=963142.09, today_pnl=963142.09), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=1709, avg=1838.62, ltp=669.65, unrealized=-1997774.1, today_pnl=-1997774.1), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=697, avg=852.74, ltp=578.24, unrealized=191327.36, today_pnl=191327.36), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=255, avg=915.17, ltp=2380.22, unrealized=373586.69, today_pnl=373586.69)] updated_at=datetime.datetime(2025, 8, 21, 18, 30, 10, 127327, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))) trading_day='2025-08-21'", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:30:10.138023+05:30", "timestamp": 1755781210.138023}}}
{"text": "2025-08-21 18:30:10.139 | DEBUG    | app.services.dhan_client:get_pnl:585 - PnL model fields: {'totals': PnLTotals(realized=0.0, unrealized=-1486333.75, day=-1486333.75, currency='INR'), 'per_symbol': [PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1543, avg=1999.73, ltp=1340.87, unrealized=-1016615.79, today_pnl=-1016615.79), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=613, avg=1989.23, ltp=418.04, unrealized=963142.09, today_pnl=963142.09), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=1709, avg=1838.62, ltp=669.65, unrealized=-1997774.1, today_pnl=-1997774.1), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=697, avg=852.74, ltp=578.24, unrealized=191327.36, today_pnl=191327.36), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=255, avg=915.17, ltp=2380.22, unrealized=373586.69, today_pnl=373586.69)], 'updated_at': datetime.datetime(2025, 8, 21, 18, 30, 10, 127327, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))), 'trading_day': '2025-08-21'}\n", "record": {"elapsed": {"repr": "0:01:34.137066", "seconds": 94.137066}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 585, "message": "PnL model fields: {'totals': PnLTotals(realized=0.0, unrealized=-1486333.75, day=-1486333.75, currency='INR'), 'per_symbol': [PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1543, avg=1999.73, ltp=1340.87, unrealized=-1016615.79, today_pnl=-1016615.79), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=613, avg=1989.23, ltp=418.04, unrealized=963142.09, today_pnl=963142.09), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=1709, avg=1838.62, ltp=669.65, unrealized=-1997774.1, today_pnl=-1997774.1), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=697, avg=852.74, ltp=578.24, unrealized=191327.36, today_pnl=191327.36), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=255, avg=915.17, ltp=2380.22, unrealized=373586.69, today_pnl=373586.69)], 'updated_at': datetime.datetime(2025, 8, 21, 18, 30, 10, 127327, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))), 'trading_day': '2025-08-21'}", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:30:10.139041+05:30", "timestamp": 1755781210.139041}}}
{"text": "2025-08-21 18:30:10.140 | INFO     | app.services.dhan_client:get_pnl:587 - P&L calculation completed successfully: 5 symbols, unrealized=₹-1486333.75\n", "record": {"elapsed": {"repr": "0:01:34.138232", "seconds": 94.138232}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 587, "message": "P&L calculation completed successfully: 5 symbols, unrealized=₹-1486333.75", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:30:10.140207+05:30", "timestamp": 1755781210.140207}}}
{"text": "2025-08-21 18:30:10.143 | DEBUG    | app.ws.live:emit_delta:408 - Emitted pnl delta: seq=125\n", "record": {"elapsed": {"repr": "0:01:34.141066", "seconds": 94.141066}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "emit_delta", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 408, "message": "Emitted pnl delta: seq=125", "module": "live", "name": "app.ws.live", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:30:10.143041+05:30", "timestamp": 1755781210.143041}}}
{"text": "2025-08-21 18:30:10.144 | DEBUG    | app.ws.live:emit_delta:408 - Emitted positions delta: seq=126\n", "record": {"elapsed": {"repr": "0:01:34.142901", "seconds": 94.142901}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "emit_delta", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 408, "message": "Emitted positions delta: seq=126", "module": "live", "name": "app.ws.live", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:30:10.144876+05:30", "timestamp": 1755781210.144876}}}
{"text": "2025-08-21 18:30:10.661 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:01:34.659907", "seconds": 94.659907}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 17632, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 18:30:10.661882+05:30", "timestamp": 1755781210.661882}}}
{"text": "2025-08-21 18:30:10.663 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:01:34.661256", "seconds": 94.661256}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 17632, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 18:30:10.663231+05:30", "timestamp": 1755781210.663231}}}
{"text": "2025-08-21 18:30:10.664 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:01:34.662166", "seconds": 94.662166}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 17632, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 18:30:10.664141+05:30", "timestamp": 1755781210.664141}}}
{"text": "2025-08-21 18:30:10.665 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:01:34.663050", "seconds": 94.66305}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 17632, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 18:30:10.665025+05:30", "timestamp": 1755781210.665025}}}
{"text": "2025-08-21 18:30:10.665 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:01:34.663792", "seconds": 94.663792}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 17632, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 18:30:10.665767+05:30", "timestamp": 1755781210.665767}}}
{"text": "2025-08-21 18:30:10.666 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:01:34.664596", "seconds": 94.664596}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 17632, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 18:30:10.666571+05:30", "timestamp": 1755781210.666571}}}
{"text": "2025-08-21 18:30:10.667 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:01:34.665368", "seconds": 94.665368}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 17632, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 18:30:10.667343+05:30", "timestamp": 1755781210.667343}}}
{"text": "2025-08-21 18:30:10.668 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:01:34.666568", "seconds": 94.666568}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 17632, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 18:30:10.668543+05:30", "timestamp": 1755781210.668543}}}
{"text": "2025-08-21 18:30:10.669 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:01:34.667940", "seconds": 94.66794}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 17632, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 18:30:10.669915+05:30", "timestamp": 1755781210.669915}}}
{"text": "2025-08-21 18:30:10.672 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:01:34.670192", "seconds": 94.670192}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 17632, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 18:30:10.672167+05:30", "timestamp": 1755781210.672167}}}
{"text": "2025-08-21 18:30:11.067 | DEBUG    | app.ws.live:websocket_endpoint:517 - Received WebSocket message: {'type': 'ping', 'clientTime': '2025-08-21T13:00:11.067Z'}\n", "record": {"elapsed": {"repr": "0:01:35.065903", "seconds": 95.065903}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "websocket_endpoint", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 517, "message": "Received WebSocket message: {'type': 'ping', 'clientTime': '2025-08-21T13:00:11.067Z'}", "module": "live", "name": "app.ws.live", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:30:11.067878+05:30", "timestamp": 1755781211.067878}}}
{"text": "2025-08-21 18:30:12.041 | INFO     | app.services.dhan_client:get_pnl:489 - Starting accurate P&L calculation\n", "record": {"elapsed": {"repr": "0:01:36.039720", "seconds": 96.03972}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 489, "message": "Starting accurate P&L calculation", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:30:12.041695+05:30", "timestamp": 1755781212.041695}}}
{"text": "2025-08-21 18:30:12.042 | INFO     | app.services.dhan_client:get_pnl:491 - Fetched 5 positions\n", "record": {"elapsed": {"repr": "0:01:36.040493", "seconds": 96.040493}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 491, "message": "Fetched 5 positions", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:30:12.042468+05:30", "timestamp": 1755781212.042468}}}
{"text": "2025-08-21 18:30:12.043 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for RELIANCE: unrealized=-989481.96, today=-989481.96\n", "record": {"elapsed": {"repr": "0:01:36.041276", "seconds": 96.041276}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for RELIANCE: unrealized=-989481.96, today=-989481.96", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:30:12.043251+05:30", "timestamp": 1755781212.043251}}}
{"text": "2025-08-21 18:30:12.044 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for TCS: unrealized=958478.01, today=958478.01\n", "record": {"elapsed": {"repr": "0:01:36.042163", "seconds": 96.042163}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for TCS: unrealized=958478.01, today=958478.01", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:30:12.044138+05:30", "timestamp": 1755781212.044138}}}
{"text": "2025-08-21 18:30:12.045 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for HDFC: unrealized=-2004096.15, today=-2004096.15\n", "record": {"elapsed": {"repr": "0:01:36.043612", "seconds": 96.043612}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for HDFC: unrealized=-2004096.15, today=-2004096.15", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:30:12.045587+05:30", "timestamp": 1755781212.045587}}}
{"text": "2025-08-21 18:30:12.047 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for INFY: unrealized=198939.73, today=198939.73\n", "record": {"elapsed": {"repr": "0:01:36.045208", "seconds": 96.045208}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for INFY: unrealized=198939.73, today=198939.73", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:30:12.047183+05:30", "timestamp": 1755781212.047183}}}
{"text": "2025-08-21 18:30:12.048 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for ICICIBANK: unrealized=384363.22, today=384363.22\n", "record": {"elapsed": {"repr": "0:01:36.046457", "seconds": 96.046457}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for ICICIBANK: unrealized=384363.22, today=384363.22", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:30:12.048432+05:30", "timestamp": 1755781212.048432}}}
{"text": "2025-08-21 18:30:12.049 | INFO     | app.services.dhan_client:get_pnl:545 - Calculated totals - realized: 0.0, unrealized: -1451797.15, day: -1451797.15\n", "record": {"elapsed": {"repr": "0:01:36.047573", "seconds": 96.047573}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 545, "message": "Calculated totals - realized: 0.0, unrealized: -1451797.15, day: -1451797.15", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:30:12.049548+05:30", "timestamp": 1755781212.049548}}}
{"text": "2025-08-21 18:30:12.050 | DEBUG    | app.services.dhan_client:get_pnl:554 - PnL consistency check passed: drift=₹0.00\n", "record": {"elapsed": {"repr": "0:01:36.048813", "seconds": 96.048813}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 554, "message": "PnL consistency check passed: drift=₹0.00", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:30:12.050788+05:30", "timestamp": 1755781212.050788}}}
{"text": "2025-08-21 18:30:12.051 | DEBUG    | app.services.dhan_client:get_pnl:558 - Creating PnLTotals...\n", "record": {"elapsed": {"repr": "0:01:36.049887", "seconds": 96.049887}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 558, "message": "Creating PnLTotals...", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:30:12.051862+05:30", "timestamp": 1755781212.051862}}}
{"text": "2025-08-21 18:30:12.052 | DEBUG    | app.services.dhan_client:get_pnl:565 - PnLTotals created successfully\n", "record": {"elapsed": {"repr": "0:01:36.050848", "seconds": 96.050848}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 565, "message": "PnLTotals created successfully", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:30:12.052823+05:30", "timestamp": 1755781212.052823}}}
{"text": "2025-08-21 18:30:12.053 | DEBUG    | app.services.dhan_client:get_pnl:574 - Creating PnL model...\n", "record": {"elapsed": {"repr": "0:01:36.051522", "seconds": 96.051522}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 574, "message": "Creating PnL model...", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:30:12.053497+05:30", "timestamp": 1755781212.053497}}}
{"text": "2025-08-21 18:30:12.054 | DEBUG    | app.services.dhan_client:get_pnl:575 - Model fields: totals=<class 'app.models.schemas.PnLTotals'>, perSymbol=5, updated_at=2025-08-21 18:30:12.043139+05:30, trading_day=2025-08-21\n", "record": {"elapsed": {"repr": "0:01:36.052265", "seconds": 96.052265}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 575, "message": "Model fields: totals=<class 'app.models.schemas.PnLTotals'>, perSymbol=5, updated_at=2025-08-21 18:30:12.043139+05:30, trading_day=2025-08-21", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:30:12.054240+05:30", "timestamp": 1755781212.05424}}}
{"text": "2025-08-21 18:30:12.055 | DEBUG    | app.services.dhan_client:get_pnl:584 - Created PnL model: totals=PnLTotals(realized=0.0, unrealized=-1451797.15, day=-1451797.15, currency='INR') per_symbol=[PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1543, avg=1999.73, ltp=1358.46, unrealized=-989481.96, today_pnl=-989481.96), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=613, avg=1989.23, ltp=425.64, unrealized=958478.01, today_pnl=958478.01), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=1709, avg=1838.62, ltp=665.95, unrealized=-2004096.15, today_pnl=-2004096.15), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=697, avg=852.74, ltp=567.32, unrealized=198939.73, today_pnl=198939.73), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=255, avg=915.17, ltp=2422.48, unrealized=384363.22, today_pnl=384363.22)] updated_at=datetime.datetime(2025, 8, 21, 18, 30, 12, 43139, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))) trading_day='2025-08-21'\n", "record": {"elapsed": {"repr": "0:01:36.053436", "seconds": 96.053436}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 584, "message": "Created PnL model: totals=PnLTotals(realized=0.0, unrealized=-1451797.15, day=-1451797.15, currency='INR') per_symbol=[PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1543, avg=1999.73, ltp=1358.46, unrealized=-989481.96, today_pnl=-989481.96), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=613, avg=1989.23, ltp=425.64, unrealized=958478.01, today_pnl=958478.01), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=1709, avg=1838.62, ltp=665.95, unrealized=-2004096.15, today_pnl=-2004096.15), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=697, avg=852.74, ltp=567.32, unrealized=198939.73, today_pnl=198939.73), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=255, avg=915.17, ltp=2422.48, unrealized=384363.22, today_pnl=384363.22)] updated_at=datetime.datetime(2025, 8, 21, 18, 30, 12, 43139, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))) trading_day='2025-08-21'", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:30:12.055411+05:30", "timestamp": 1755781212.055411}}}
{"text": "2025-08-21 18:30:12.056 | DEBUG    | app.services.dhan_client:get_pnl:585 - PnL model fields: {'totals': PnLTotals(realized=0.0, unrealized=-1451797.15, day=-1451797.15, currency='INR'), 'per_symbol': [PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1543, avg=1999.73, ltp=1358.46, unrealized=-989481.96, today_pnl=-989481.96), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=613, avg=1989.23, ltp=425.64, unrealized=958478.01, today_pnl=958478.01), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=1709, avg=1838.62, ltp=665.95, unrealized=-2004096.15, today_pnl=-2004096.15), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=697, avg=852.74, ltp=567.32, unrealized=198939.73, today_pnl=198939.73), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=255, avg=915.17, ltp=2422.48, unrealized=384363.22, today_pnl=384363.22)], 'updated_at': datetime.datetime(2025, 8, 21, 18, 30, 12, 43139, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))), 'trading_day': '2025-08-21'}\n", "record": {"elapsed": {"repr": "0:01:36.054813", "seconds": 96.054813}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 585, "message": "PnL model fields: {'totals': PnLTotals(realized=0.0, unrealized=-1451797.15, day=-1451797.15, currency='INR'), 'per_symbol': [PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1543, avg=1999.73, ltp=1358.46, unrealized=-989481.96, today_pnl=-989481.96), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=613, avg=1989.23, ltp=425.64, unrealized=958478.01, today_pnl=958478.01), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=1709, avg=1838.62, ltp=665.95, unrealized=-2004096.15, today_pnl=-2004096.15), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=697, avg=852.74, ltp=567.32, unrealized=198939.73, today_pnl=198939.73), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=255, avg=915.17, ltp=2422.48, unrealized=384363.22, today_pnl=384363.22)], 'updated_at': datetime.datetime(2025, 8, 21, 18, 30, 12, 43139, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))), 'trading_day': '2025-08-21'}", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:30:12.056788+05:30", "timestamp": 1755781212.056788}}}
{"text": "2025-08-21 18:30:12.057 | INFO     | app.services.dhan_client:get_pnl:587 - P&L calculation completed successfully: 5 symbols, unrealized=₹-1451797.15\n", "record": {"elapsed": {"repr": "0:01:36.055852", "seconds": 96.055852}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 587, "message": "P&L calculation completed successfully: 5 symbols, unrealized=₹-1451797.15", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:30:12.057827+05:30", "timestamp": 1755781212.057827}}}
{"text": "2025-08-21 18:30:12.058 | DEBUG    | app.ws.live:emit_delta:408 - Emitted pnl delta: seq=127\n", "record": {"elapsed": {"repr": "0:01:36.056918", "seconds": 96.056918}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "emit_delta", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 408, "message": "Emitted pnl delta: seq=127", "module": "live", "name": "app.ws.live", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:30:12.058893+05:30", "timestamp": 1755781212.058893}}}
{"text": "2025-08-21 18:30:12.059 | DEBUG    | app.ws.live:emit_delta:408 - Emitted positions delta: seq=128\n", "record": {"elapsed": {"repr": "0:01:36.057920", "seconds": 96.05792}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "emit_delta", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 408, "message": "Emitted positions delta: seq=128", "module": "live", "name": "app.ws.live", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:30:12.059895+05:30", "timestamp": 1755781212.059895}}}
{"text": "2025-08-21 18:30:12.673 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:01:36.671361", "seconds": 96.671361}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 17632, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 18:30:12.673336+05:30", "timestamp": 1755781212.673336}}}
{"text": "2025-08-21 18:30:12.674 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:01:36.672402", "seconds": 96.672402}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 17632, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 18:30:12.674377+05:30", "timestamp": 1755781212.674377}}}
{"text": "2025-08-21 18:30:12.675 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:01:36.673464", "seconds": 96.673464}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 17632, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 18:30:12.675439+05:30", "timestamp": 1755781212.675439}}}
{"text": "2025-08-21 18:30:12.676 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:01:36.674235", "seconds": 96.674235}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 17632, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 18:30:12.676210+05:30", "timestamp": 1755781212.67621}}}
{"text": "2025-08-21 18:30:12.677 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:01:36.675050", "seconds": 96.67505}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 17632, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 18:30:12.677025+05:30", "timestamp": 1755781212.677025}}}
{"text": "2025-08-21 18:30:12.677 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:01:36.675744", "seconds": 96.675744}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 17632, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 18:30:12.677719+05:30", "timestamp": 1755781212.677719}}}
{"text": "2025-08-21 18:30:12.678 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:01:36.676743", "seconds": 96.676743}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 17632, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 18:30:12.678718+05:30", "timestamp": 1755781212.678718}}}
{"text": "2025-08-21 18:30:12.679 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:01:36.677517", "seconds": 96.677517}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 17632, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 18:30:12.679492+05:30", "timestamp": 1755781212.679492}}}
{"text": "2025-08-21 18:30:12.680 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:01:36.678250", "seconds": 96.67825}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 17632, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 18:30:12.680225+05:30", "timestamp": 1755781212.680225}}}
{"text": "2025-08-21 18:30:12.680 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:01:36.678930", "seconds": 96.67893}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 17632, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 18:30:12.680905+05:30", "timestamp": 1755781212.680905}}}
{"text": "2025-08-21 18:30:13.924 | INFO     | app.services.dhan_client:get_pnl:489 - Starting accurate P&L calculation\n", "record": {"elapsed": {"repr": "0:01:37.922789", "seconds": 97.922789}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 489, "message": "Starting accurate P&L calculation", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:30:13.924764+05:30", "timestamp": 1755781213.924764}}}
{"text": "2025-08-21 18:30:13.926 | INFO     | app.services.dhan_client:get_pnl:491 - Fetched 5 positions\n", "record": {"elapsed": {"repr": "0:01:37.924407", "seconds": 97.924407}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 491, "message": "Fetched 5 positions", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:30:13.926382+05:30", "timestamp": 1755781213.926382}}}
{"text": "2025-08-21 18:30:13.927 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for RELIANCE: unrealized=-966219.49, today=-966219.49\n", "record": {"elapsed": {"repr": "0:01:37.925582", "seconds": 97.925582}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for RELIANCE: unrealized=-966219.49, today=-966219.49", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:30:13.927557+05:30", "timestamp": 1755781213.927557}}}
{"text": "2025-08-21 18:30:13.928 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for TCS: unrealized=956305.34, today=956305.34\n", "record": {"elapsed": {"repr": "0:01:37.926951", "seconds": 97.926951}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for TCS: unrealized=956305.34, today=956305.34", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:30:13.928926+05:30", "timestamp": 1755781213.928926}}}
{"text": "2025-08-21 18:30:13.930 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for HDFC: unrealized=-1984528.78, today=-1984528.78\n", "record": {"elapsed": {"repr": "0:01:37.928262", "seconds": 97.928262}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for HDFC: unrealized=-1984528.78, today=-1984528.78", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:30:13.930237+05:30", "timestamp": 1755781213.930237}}}
{"text": "2025-08-21 18:30:13.931 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for INFY: unrealized=191465.39, today=191465.39\n", "record": {"elapsed": {"repr": "0:01:37.929365", "seconds": 97.929365}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for INFY: unrealized=191465.39, today=191465.39", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:30:13.931340+05:30", "timestamp": 1755781213.93134}}}
{"text": "2025-08-21 18:30:13.932 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for ICICIBANK: unrealized=374165.06, today=374165.06\n", "record": {"elapsed": {"repr": "0:01:37.930241", "seconds": 97.930241}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for ICICIBANK: unrealized=374165.06, today=374165.06", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:30:13.932216+05:30", "timestamp": 1755781213.932216}}}
{"text": "2025-08-21 18:30:13.932 | INFO     | app.services.dhan_client:get_pnl:545 - Calculated totals - realized: 0.0, unrealized: -1428812.48, day: -1428812.48\n", "record": {"elapsed": {"repr": "0:01:37.930883", "seconds": 97.930883}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 545, "message": "Calculated totals - realized: 0.0, unrealized: -1428812.48, day: -1428812.48", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:30:13.932858+05:30", "timestamp": 1755781213.932858}}}
{"text": "2025-08-21 18:30:13.933 | DEBUG    | app.services.dhan_client:get_pnl:554 - PnL consistency check passed: drift=₹0.00\n", "record": {"elapsed": {"repr": "0:01:37.931620", "seconds": 97.93162}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 554, "message": "PnL consistency check passed: drift=₹0.00", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:30:13.933595+05:30", "timestamp": 1755781213.933595}}}
{"text": "2025-08-21 18:30:13.934 | DEBUG    | app.services.dhan_client:get_pnl:558 - Creating PnLTotals...\n", "record": {"elapsed": {"repr": "0:01:37.932346", "seconds": 97.932346}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 558, "message": "Creating PnLTotals...", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:30:13.934321+05:30", "timestamp": 1755781213.934321}}}
{"text": "2025-08-21 18:30:13.935 | DEBUG    | app.services.dhan_client:get_pnl:565 - PnLTotals created successfully\n", "record": {"elapsed": {"repr": "0:01:37.933155", "seconds": 97.933155}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 565, "message": "PnLTotals created successfully", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:30:13.935130+05:30", "timestamp": 1755781213.93513}}}
{"text": "2025-08-21 18:30:13.935 | DEBUG    | app.services.dhan_client:get_pnl:574 - Creating PnL model...\n", "record": {"elapsed": {"repr": "0:01:37.933812", "seconds": 97.933812}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 574, "message": "Creating PnL model...", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:30:13.935787+05:30", "timestamp": 1755781213.935787}}}
{"text": "2025-08-21 18:30:13.936 | DEBUG    | app.services.dhan_client:get_pnl:575 - Model fields: totals=<class 'app.models.schemas.PnLTotals'>, perSymbol=5, updated_at=2025-08-21 18:30:13.927444+05:30, trading_day=2025-08-21\n", "record": {"elapsed": {"repr": "0:01:37.934506", "seconds": 97.934506}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 575, "message": "Model fields: totals=<class 'app.models.schemas.PnLTotals'>, perSymbol=5, updated_at=2025-08-21 18:30:13.927444+05:30, trading_day=2025-08-21", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:30:13.936481+05:30", "timestamp": 1755781213.936481}}}
{"text": "2025-08-21 18:30:13.937 | DEBUG    | app.services.dhan_client:get_pnl:584 - Created PnL model: totals=PnLTotals(realized=0.0, unrealized=-1428812.48, day=-1428812.48, currency='INR') per_symbol=[PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1543, avg=1999.73, ltp=1373.53, unrealized=-966219.49, today_pnl=-966219.49), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=613, avg=1989.23, ltp=429.19, unrealized=956305.34, today_pnl=956305.34), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=1709, avg=1838.62, ltp=677.4, unrealized=-1984528.78, today_pnl=-1984528.78), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=697, avg=852.74, ltp=578.04, unrealized=191465.39, today_pnl=191465.39), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=255, avg=915.17, ltp=2382.48, unrealized=374165.06, today_pnl=374165.06)] updated_at=datetime.datetime(2025, 8, 21, 18, 30, 13, 927444, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))) trading_day='2025-08-21'\n", "record": {"elapsed": {"repr": "0:01:37.935551", "seconds": 97.935551}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 584, "message": "Created PnL model: totals=PnLTotals(realized=0.0, unrealized=-1428812.48, day=-1428812.48, currency='INR') per_symbol=[PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1543, avg=1999.73, ltp=1373.53, unrealized=-966219.49, today_pnl=-966219.49), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=613, avg=1989.23, ltp=429.19, unrealized=956305.34, today_pnl=956305.34), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=1709, avg=1838.62, ltp=677.4, unrealized=-1984528.78, today_pnl=-1984528.78), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=697, avg=852.74, ltp=578.04, unrealized=191465.39, today_pnl=191465.39), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=255, avg=915.17, ltp=2382.48, unrealized=374165.06, today_pnl=374165.06)] updated_at=datetime.datetime(2025, 8, 21, 18, 30, 13, 927444, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))) trading_day='2025-08-21'", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:30:13.937526+05:30", "timestamp": 1755781213.937526}}}
{"text": "2025-08-21 18:30:13.938 | DEBUG    | app.services.dhan_client:get_pnl:585 - PnL model fields: {'totals': PnLTotals(realized=0.0, unrealized=-1428812.48, day=-1428812.48, currency='INR'), 'per_symbol': [PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1543, avg=1999.73, ltp=1373.53, unrealized=-966219.49, today_pnl=-966219.49), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=613, avg=1989.23, ltp=429.19, unrealized=956305.34, today_pnl=956305.34), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=1709, avg=1838.62, ltp=677.4, unrealized=-1984528.78, today_pnl=-1984528.78), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=697, avg=852.74, ltp=578.04, unrealized=191465.39, today_pnl=191465.39), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=255, avg=915.17, ltp=2382.48, unrealized=374165.06, today_pnl=374165.06)], 'updated_at': datetime.datetime(2025, 8, 21, 18, 30, 13, 927444, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))), 'trading_day': '2025-08-21'}\n", "record": {"elapsed": {"repr": "0:01:37.936766", "seconds": 97.936766}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 585, "message": "PnL model fields: {'totals': PnLTotals(realized=0.0, unrealized=-1428812.48, day=-1428812.48, currency='INR'), 'per_symbol': [PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1543, avg=1999.73, ltp=1373.53, unrealized=-966219.49, today_pnl=-966219.49), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=613, avg=1989.23, ltp=429.19, unrealized=956305.34, today_pnl=956305.34), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=1709, avg=1838.62, ltp=677.4, unrealized=-1984528.78, today_pnl=-1984528.78), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=697, avg=852.74, ltp=578.04, unrealized=191465.39, today_pnl=191465.39), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=255, avg=915.17, ltp=2382.48, unrealized=374165.06, today_pnl=374165.06)], 'updated_at': datetime.datetime(2025, 8, 21, 18, 30, 13, 927444, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))), 'trading_day': '2025-08-21'}", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:30:13.938741+05:30", "timestamp": 1755781213.938741}}}
{"text": "2025-08-21 18:30:13.939 | INFO     | app.services.dhan_client:get_pnl:587 - P&L calculation completed successfully: 5 symbols, unrealized=₹-1428812.48\n", "record": {"elapsed": {"repr": "0:01:37.937999", "seconds": 97.937999}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 587, "message": "P&L calculation completed successfully: 5 symbols, unrealized=₹-1428812.48", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:30:13.939974+05:30", "timestamp": 1755781213.939974}}}
{"text": "2025-08-21 18:30:13.942 | DEBUG    | app.ws.live:emit_delta:408 - Emitted pnl delta: seq=129\n", "record": {"elapsed": {"repr": "0:01:37.940629", "seconds": 97.940629}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "emit_delta", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 408, "message": "Emitted pnl delta: seq=129", "module": "live", "name": "app.ws.live", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:30:13.942604+05:30", "timestamp": 1755781213.942604}}}
{"text": "2025-08-21 18:30:13.944 | DEBUG    | app.ws.live:emit_delta:408 - Emitted positions delta: seq=130\n", "record": {"elapsed": {"repr": "0:01:37.942202", "seconds": 97.942202}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "emit_delta", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 408, "message": "Emitted positions delta: seq=130", "module": "live", "name": "app.ws.live", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:30:13.944177+05:30", "timestamp": 1755781213.944177}}}
{"text": "2025-08-21 18:30:14.681 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:01:38.679980", "seconds": 98.67998}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 17632, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 18:30:14.681955+05:30", "timestamp": 1755781214.681955}}}
{"text": "2025-08-21 18:30:14.682 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:01:38.680939", "seconds": 98.680939}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 17632, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 18:30:14.682914+05:30", "timestamp": 1755781214.682914}}}
{"text": "2025-08-21 18:30:14.683 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:01:38.682006", "seconds": 98.682006}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 17632, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 18:30:14.683981+05:30", "timestamp": 1755781214.683981}}}
{"text": "2025-08-21 18:30:14.684 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:01:38.682976", "seconds": 98.682976}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 17632, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 18:30:14.684951+05:30", "timestamp": 1755781214.684951}}}
{"text": "2025-08-21 18:30:14.686 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:01:38.684099", "seconds": 98.684099}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 17632, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 18:30:14.686074+05:30", "timestamp": 1755781214.686074}}}
{"text": "2025-08-21 18:30:14.687 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:01:38.685441", "seconds": 98.685441}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 17632, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 18:30:14.687416+05:30", "timestamp": 1755781214.687416}}}
{"text": "2025-08-21 18:30:14.689 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:01:38.687513", "seconds": 98.687513}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 17632, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 18:30:14.689488+05:30", "timestamp": 1755781214.689488}}}
{"text": "2025-08-21 18:30:14.690 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:01:38.688962", "seconds": 98.688962}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 17632, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 18:30:14.690937+05:30", "timestamp": 1755781214.690937}}}
{"text": "2025-08-21 18:30:14.692 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:01:38.690736", "seconds": 98.690736}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 17632, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 18:30:14.692711+05:30", "timestamp": 1755781214.692711}}}
{"text": "2025-08-21 18:30:14.693 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:01:38.691726", "seconds": 98.691726}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 17632, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 18:30:14.693701+05:30", "timestamp": 1755781214.693701}}}
{"text": "2025-08-21 18:30:15.746 | INFO     | app.services.dhan_client:get_pnl:489 - Starting accurate P&L calculation\n", "record": {"elapsed": {"repr": "0:01:39.744748", "seconds": 99.744748}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 489, "message": "Starting accurate P&L calculation", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:30:15.746723+05:30", "timestamp": 1755781215.746723}}}
{"text": "2025-08-21 18:30:15.747 | INFO     | app.services.dhan_client:get_pnl:491 - Fetched 5 positions\n", "record": {"elapsed": {"repr": "0:01:39.745528", "seconds": 99.745528}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 491, "message": "Fetched 5 positions", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:30:15.747503+05:30", "timestamp": 1755781215.747503}}}
{"text": "2025-08-21 18:30:15.748 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for RELIANCE: unrealized=-963591.46, today=-963591.46\n", "record": {"elapsed": {"repr": "0:01:39.746441", "seconds": 99.746441}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for RELIANCE: unrealized=-963591.46, today=-963591.46", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:30:15.748416+05:30", "timestamp": 1755781215.748416}}}
{"text": "2025-08-21 18:30:15.749 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for TCS: unrealized=954169.45, today=954169.45\n", "record": {"elapsed": {"repr": "0:01:39.747189", "seconds": 99.747189}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for TCS: unrealized=954169.45, today=954169.45", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:30:15.749164+05:30", "timestamp": 1755781215.749164}}}
{"text": "2025-08-21 18:30:15.750 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for HDFC: unrealized=-1979934.51, today=-1979934.51\n", "record": {"elapsed": {"repr": "0:01:39.748475", "seconds": 99.748475}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for HDFC: unrealized=-1979934.51, today=-1979934.51", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:30:15.750450+05:30", "timestamp": 1755781215.75045}}}
{"text": "2025-08-21 18:30:15.751 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for INFY: unrealized=198119.95, today=198119.95\n", "record": {"elapsed": {"repr": "0:01:39.749943", "seconds": 99.749943}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for INFY: unrealized=198119.95, today=198119.95", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:30:15.751918+05:30", "timestamp": 1755781215.751918}}}
{"text": "2025-08-21 18:30:15.752 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for ICICIBANK: unrealized=380097.59, today=380097.59\n", "record": {"elapsed": {"repr": "0:01:39.750865", "seconds": 99.750865}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for ICICIBANK: unrealized=380097.59, today=380097.59", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:30:15.752840+05:30", "timestamp": 1755781215.75284}}}
{"text": "2025-08-21 18:30:15.753 | INFO     | app.services.dhan_client:get_pnl:545 - Calculated totals - realized: 0.0, unrealized: -1411138.98, day: -1411138.98\n", "record": {"elapsed": {"repr": "0:01:39.751879", "seconds": 99.751879}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 545, "message": "Calculated totals - realized: 0.0, unrealized: -1411138.98, day: -1411138.98", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:30:15.753854+05:30", "timestamp": 1755781215.753854}}}
{"text": "2025-08-21 18:30:15.754 | DEBUG    | app.services.dhan_client:get_pnl:554 - PnL consistency check passed: drift=₹0.00\n", "record": {"elapsed": {"repr": "0:01:39.752847", "seconds": 99.752847}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 554, "message": "PnL consistency check passed: drift=₹0.00", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:30:15.754822+05:30", "timestamp": 1755781215.754822}}}
{"text": "2025-08-21 18:30:15.755 | DEBUG    | app.services.dhan_client:get_pnl:558 - Creating PnLTotals...\n", "record": {"elapsed": {"repr": "0:01:39.753865", "seconds": 99.753865}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 558, "message": "Creating PnLTotals...", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:30:15.755840+05:30", "timestamp": 1755781215.75584}}}
{"text": "2025-08-21 18:30:15.757 | DEBUG    | app.services.dhan_client:get_pnl:565 - PnLTotals created successfully\n", "record": {"elapsed": {"repr": "0:01:39.755093", "seconds": 99.755093}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 565, "message": "PnLTotals created successfully", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:30:15.757068+05:30", "timestamp": 1755781215.757068}}}
{"text": "2025-08-21 18:30:15.758 | DEBUG    | app.services.dhan_client:get_pnl:574 - Creating PnL model...\n", "record": {"elapsed": {"repr": "0:01:39.756209", "seconds": 99.756209}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 574, "message": "Creating PnL model...", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:30:15.758184+05:30", "timestamp": 1755781215.758184}}}
{"text": "2025-08-21 18:30:15.759 | DEBUG    | app.services.dhan_client:get_pnl:575 - Model fields: totals=<class 'app.models.schemas.PnLTotals'>, perSymbol=5, updated_at=2025-08-21 18:30:15.748311+05:30, trading_day=2025-08-21\n", "record": {"elapsed": {"repr": "0:01:39.757252", "seconds": 99.757252}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 575, "message": "Model fields: totals=<class 'app.models.schemas.PnLTotals'>, perSymbol=5, updated_at=2025-08-21 18:30:15.748311+05:30, trading_day=2025-08-21", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:30:15.759227+05:30", "timestamp": 1755781215.759227}}}
{"text": "2025-08-21 18:30:15.760 | DEBUG    | app.services.dhan_client:get_pnl:584 - Created PnL model: totals=PnLTotals(realized=0.0, unrealized=-1411138.98, day=-1411138.98, currency='INR') per_symbol=[PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1543, avg=1999.73, ltp=1375.24, unrealized=-963591.46, today_pnl=-963591.46), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=613, avg=1989.23, ltp=432.67, unrealized=954169.45, today_pnl=954169.45), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=1709, avg=1838.62, ltp=680.09, unrealized=-1979934.51, today_pnl=-1979934.51), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=697, avg=852.74, ltp=568.49, unrealized=198119.95, today_pnl=198119.95), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=255, avg=915.17, ltp=2405.75, unrealized=380097.59, today_pnl=380097.59)] updated_at=datetime.datetime(2025, 8, 21, 18, 30, 15, 748311, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))) trading_day='2025-08-21'\n", "record": {"elapsed": {"repr": "0:01:39.758247", "seconds": 99.758247}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 584, "message": "Created PnL model: totals=PnLTotals(realized=0.0, unrealized=-1411138.98, day=-1411138.98, currency='INR') per_symbol=[PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1543, avg=1999.73, ltp=1375.24, unrealized=-963591.46, today_pnl=-963591.46), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=613, avg=1989.23, ltp=432.67, unrealized=954169.45, today_pnl=954169.45), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=1709, avg=1838.62, ltp=680.09, unrealized=-1979934.51, today_pnl=-1979934.51), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=697, avg=852.74, ltp=568.49, unrealized=198119.95, today_pnl=198119.95), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=255, avg=915.17, ltp=2405.75, unrealized=380097.59, today_pnl=380097.59)] updated_at=datetime.datetime(2025, 8, 21, 18, 30, 15, 748311, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))) trading_day='2025-08-21'", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:30:15.760222+05:30", "timestamp": 1755781215.760222}}}
{"text": "2025-08-21 18:30:15.761 | DEBUG    | app.services.dhan_client:get_pnl:585 - PnL model fields: {'totals': PnLTotals(realized=0.0, unrealized=-1411138.98, day=-1411138.98, currency='INR'), 'per_symbol': [PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1543, avg=1999.73, ltp=1375.24, unrealized=-963591.46, today_pnl=-963591.46), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=613, avg=1989.23, ltp=432.67, unrealized=954169.45, today_pnl=954169.45), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=1709, avg=1838.62, ltp=680.09, unrealized=-1979934.51, today_pnl=-1979934.51), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=697, avg=852.74, ltp=568.49, unrealized=198119.95, today_pnl=198119.95), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=255, avg=915.17, ltp=2405.75, unrealized=380097.59, today_pnl=380097.59)], 'updated_at': datetime.datetime(2025, 8, 21, 18, 30, 15, 748311, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))), 'trading_day': '2025-08-21'}\n", "record": {"elapsed": {"repr": "0:01:39.759374", "seconds": 99.759374}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 585, "message": "PnL model fields: {'totals': PnLTotals(realized=0.0, unrealized=-1411138.98, day=-1411138.98, currency='INR'), 'per_symbol': [PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1543, avg=1999.73, ltp=1375.24, unrealized=-963591.46, today_pnl=-963591.46), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=613, avg=1989.23, ltp=432.67, unrealized=954169.45, today_pnl=954169.45), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=1709, avg=1838.62, ltp=680.09, unrealized=-1979934.51, today_pnl=-1979934.51), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=697, avg=852.74, ltp=568.49, unrealized=198119.95, today_pnl=198119.95), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=255, avg=915.17, ltp=2405.75, unrealized=380097.59, today_pnl=380097.59)], 'updated_at': datetime.datetime(2025, 8, 21, 18, 30, 15, 748311, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))), 'trading_day': '2025-08-21'}", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:30:15.761349+05:30", "timestamp": 1755781215.761349}}}
{"text": "2025-08-21 18:30:15.762 | INFO     | app.services.dhan_client:get_pnl:587 - P&L calculation completed successfully: 5 symbols, unrealized=₹-1411138.98\n", "record": {"elapsed": {"repr": "0:01:39.760266", "seconds": 99.760266}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 587, "message": "P&L calculation completed successfully: 5 symbols, unrealized=₹-1411138.98", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:30:15.762241+05:30", "timestamp": 1755781215.762241}}}
{"text": "2025-08-21 18:30:15.763 | DEBUG    | app.ws.live:emit_delta:408 - Emitted pnl delta: seq=131\n", "record": {"elapsed": {"repr": "0:01:39.761245", "seconds": 99.761245}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "emit_delta", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 408, "message": "Emitted pnl delta: seq=131", "module": "live", "name": "app.ws.live", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:30:15.763220+05:30", "timestamp": 1755781215.76322}}}
{"text": "2025-08-21 18:30:15.764 | DEBUG    | app.ws.live:emit_delta:408 - Emitted positions delta: seq=132\n", "record": {"elapsed": {"repr": "0:01:39.762875", "seconds": 99.762875}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "emit_delta", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 408, "message": "Emitted positions delta: seq=132", "module": "live", "name": "app.ws.live", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 27316, "name": "MainThread"}, "time": {"repr": "2025-08-21 18:30:15.764850+05:30", "timestamp": 1755781215.76485}}}
{"text": "2025-08-21 18:30:16.694 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:01:40.692794", "seconds": 100.692794}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 17632, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 18:30:16.694769+05:30", "timestamp": 1755781216.694769}}}
{"text": "2025-08-21 18:30:16.695 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:01:40.693755", "seconds": 100.693755}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 17632, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 18:30:16.695730+05:30", "timestamp": 1755781216.69573}}}
{"text": "2025-08-21 18:30:16.696 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:01:40.694682", "seconds": 100.694682}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 17632, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 18:30:16.696657+05:30", "timestamp": 1755781216.696657}}}
{"text": "2025-08-21 18:30:16.698 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:01:40.696246", "seconds": 100.696246}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 17632, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 18:30:16.698221+05:30", "timestamp": 1755781216.698221}}}
{"text": "2025-08-21 18:30:16.699 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:01:40.697427", "seconds": 100.697427}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 17632, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 18:30:16.699402+05:30", "timestamp": 1755781216.699402}}}
{"text": "2025-08-21 18:30:16.700 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:01:40.698197", "seconds": 100.698197}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 17632, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 18:30:16.700172+05:30", "timestamp": 1755781216.700172}}}
{"text": "2025-08-21 18:30:16.701 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:01:40.699403", "seconds": 100.699403}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 17632, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 18:30:16.701378+05:30", "timestamp": 1755781216.701378}}}
{"text": "2025-08-21 18:30:16.702 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:01:40.700213", "seconds": 100.700213}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27596, "name": "MainProcess"}, "thread": {"id": 17632, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 18:30:16.702188+05:30", "timestamp": 1755781216.702188}}}
