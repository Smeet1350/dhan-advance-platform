{"text": "2025-08-21 19:01:41.735 | DEBUG    | app.services.dhan_client:get_pnl:585 - PnL model fields: {'totals': PnLTotals(realized=0.0, unrealized=460764.61, day=460764.61, currency='INR'), 'per_symbol': [PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1727, avg=618.93, ltp=320.08, unrealized=-516108.0, today_pnl=-516108.0), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=167, avg=948.57, ltp=1153.18, unrealized=-34169.25, today_pnl=-34169.25), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=1347, avg=801.44, ltp=1893.02, unrealized=1470363.46, today_pnl=1470363.46), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=143, avg=1427.62, ltp=1223.33, unrealized=29214.03, today_pnl=29214.03), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=438, avg=1994.48, ltp=879.1, unrealized=-488535.63, today_pnl=-488535.63)], 'updated_at': datetime.datetime(2025, 8, 21, 19, 1, 41, 727723, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))), 'trading_day': '2025-08-21'}\n", "record": {"elapsed": {"repr": "0:00:23.442937", "seconds": 23.442937}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 585, "message": "PnL model fields: {'totals': PnLTotals(realized=0.0, unrealized=460764.61, day=460764.61, currency='INR'), 'per_symbol': [PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1727, avg=618.93, ltp=320.08, unrealized=-516108.0, today_pnl=-516108.0), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=167, avg=948.57, ltp=1153.18, unrealized=-34169.25, today_pnl=-34169.25), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=1347, avg=801.44, ltp=1893.02, unrealized=1470363.46, today_pnl=1470363.46), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=143, avg=1427.62, ltp=1223.33, unrealized=29214.03, today_pnl=29214.03), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=438, avg=1994.48, ltp=879.1, unrealized=-488535.63, today_pnl=-488535.63)], 'updated_at': datetime.datetime(2025, 8, 21, 19, 1, 41, 727723, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))), 'trading_day': '2025-08-21'}", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:01:41.735479+05:30", "timestamp": 1755783101.735479}}}
{"text": "2025-08-21 19:01:41.740 | INFO     | app.services.dhan_client:get_pnl:587 - P&L calculation completed successfully: 5 symbols, unrealized=‚Çπ460764.61\n", "record": {"elapsed": {"repr": "0:00:23.447998", "seconds": 23.447998}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 587, "message": "P&L calculation completed successfully: 5 symbols, unrealized=‚Çπ460764.61", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:01:41.740540+05:30", "timestamp": 1755783101.74054}}}
{"text": "2025-08-21 19:01:41.741 | DEBUG    | app.ws.live:emit_delta:408 - Emitted pnl delta: seq=25\n", "record": {"elapsed": {"repr": "0:00:23.449181", "seconds": 23.449181}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "emit_delta", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 408, "message": "Emitted pnl delta: seq=25", "module": "live", "name": "app.ws.live", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:01:41.741723+05:30", "timestamp": 1755783101.741723}}}
{"text": "2025-08-21 19:01:42.083 | DEBUG    | app.ws.live:emit_delta:408 - Emitted positions delta: seq=26\n", "record": {"elapsed": {"repr": "0:00:23.790706", "seconds": 23.790706}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "emit_delta", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 408, "message": "Emitted positions delta: seq=26", "module": "live", "name": "app.ws.live", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:01:42.083248+05:30", "timestamp": 1755783102.083248}}}
{"text": "2025-08-21 19:01:42.427 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:24.134964", "seconds": 24.134964}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:01:42.427506+05:30", "timestamp": 1755783102.427506}}}
{"text": "2025-08-21 19:01:42.428 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:24.135677", "seconds": 24.135677}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:01:42.428219+05:30", "timestamp": 1755783102.428219}}}
{"text": "2025-08-21 19:01:42.429 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:24.136736", "seconds": 24.136736}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:01:42.429278+05:30", "timestamp": 1755783102.429278}}}
{"text": "2025-08-21 19:01:42.429 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:24.137299", "seconds": 24.137299}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:01:42.429841+05:30", "timestamp": 1755783102.429841}}}
{"text": "2025-08-21 19:01:42.430 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:24.137868", "seconds": 24.137868}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:01:42.430410+05:30", "timestamp": 1755783102.43041}}}
{"text": "2025-08-21 19:01:42.431 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:24.138591", "seconds": 24.138591}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:01:42.431133+05:30", "timestamp": 1755783102.431133}}}
{"text": "2025-08-21 19:01:42.432 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:24.139510", "seconds": 24.13951}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:01:42.432052+05:30", "timestamp": 1755783102.432052}}}
{"text": "2025-08-21 19:01:42.433 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:24.140763", "seconds": 24.140763}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:01:42.433305+05:30", "timestamp": 1755783102.433305}}}
{"text": "2025-08-21 19:01:42.433 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:24.141445", "seconds": 24.141445}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:01:42.433987+05:30", "timestamp": 1755783102.433987}}}
{"text": "2025-08-21 19:01:42.434 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:24.141954", "seconds": 24.141954}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:01:42.434496+05:30", "timestamp": 1755783102.434496}}}
{"text": "2025-08-21 19:01:43.417 | DEBUG    | app.ws.live:emit_delta:408 - Emitted holdings delta: seq=27\n", "record": {"elapsed": {"repr": "0:00:25.125166", "seconds": 25.125166}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "emit_delta", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 408, "message": "Emitted holdings delta: seq=27", "module": "live", "name": "app.ws.live", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:01:43.417708+05:30", "timestamp": 1755783103.417708}}}
{"text": "2025-08-21 19:01:43.436 | INFO     | app.services.dhan_client:get_pnl:489 - Starting accurate P&L calculation\n", "record": {"elapsed": {"repr": "0:00:25.144353", "seconds": 25.144353}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 489, "message": "Starting accurate P&L calculation", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:01:43.436895+05:30", "timestamp": 1755783103.436895}}}
{"text": "2025-08-21 19:01:43.437 | INFO     | app.services.dhan_client:get_pnl:491 - Fetched 5 positions\n", "record": {"elapsed": {"repr": "0:00:25.145411", "seconds": 25.145411}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 491, "message": "Fetched 5 positions", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:01:43.437953+05:30", "timestamp": 1755783103.437953}}}
{"text": "2025-08-21 19:01:43.438 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for RELIANCE: unrealized=-517988.19, today=-517988.19\n", "record": {"elapsed": {"repr": "0:00:25.146196", "seconds": 25.146196}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for RELIANCE: unrealized=-517988.19, today=-517988.19", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:01:43.438738+05:30", "timestamp": 1755783103.438738}}}
{"text": "2025-08-21 19:01:43.439 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for TCS: unrealized=-37689.36, today=-37689.36\n", "record": {"elapsed": {"repr": "0:00:25.147079", "seconds": 25.147079}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for TCS: unrealized=-37689.36, today=-37689.36", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:01:43.439621+05:30", "timestamp": 1755783103.439621}}}
{"text": "2025-08-21 19:01:43.441 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for HDFC: unrealized=1432944.15, today=1432944.15\n", "record": {"elapsed": {"repr": "0:00:25.148475", "seconds": 25.148475}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for HDFC: unrealized=1432944.15, today=1432944.15", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:01:43.441017+05:30", "timestamp": 1755783103.441017}}}
{"text": "2025-08-21 19:01:43.441 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for INFY: unrealized=30195.0, today=30195.0\n", "record": {"elapsed": {"repr": "0:00:25.149296", "seconds": 25.149296}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for INFY: unrealized=30195.0, today=30195.0", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:01:43.441838+05:30", "timestamp": 1755783103.441838}}}
{"text": "2025-08-21 19:01:43.442 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for ICICIBANK: unrealized=-495518.2, today=-495518.2\n", "record": {"elapsed": {"repr": "0:00:25.149990", "seconds": 25.14999}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for ICICIBANK: unrealized=-495518.2, today=-495518.2", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:01:43.442532+05:30", "timestamp": 1755783103.442532}}}
{"text": "2025-08-21 19:01:43.443 | INFO     | app.services.dhan_client:get_pnl:545 - Calculated totals - realized: 0.0, unrealized: 411943.4, day: 411943.4\n", "record": {"elapsed": {"repr": "0:00:25.150725", "seconds": 25.150725}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 545, "message": "Calculated totals - realized: 0.0, unrealized: 411943.4, day: 411943.4", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:01:43.443267+05:30", "timestamp": 1755783103.443267}}}
{"text": "2025-08-21 19:01:43.443 | DEBUG    | app.services.dhan_client:get_pnl:554 - PnL consistency check passed: drift=‚Çπ0.00\n", "record": {"elapsed": {"repr": "0:00:25.151379", "seconds": 25.151379}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 554, "message": "PnL consistency check passed: drift=‚Çπ0.00", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:01:43.443921+05:30", "timestamp": 1755783103.443921}}}
{"text": "2025-08-21 19:01:43.444 | DEBUG    | app.services.dhan_client:get_pnl:558 - Creating PnLTotals...\n", "record": {"elapsed": {"repr": "0:00:25.152304", "seconds": 25.152304}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 558, "message": "Creating PnLTotals...", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:01:43.444846+05:30", "timestamp": 1755783103.444846}}}
{"text": "2025-08-21 19:01:43.445 | DEBUG    | app.services.dhan_client:get_pnl:565 - PnLTotals created successfully\n", "record": {"elapsed": {"repr": "0:00:25.153098", "seconds": 25.153098}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 565, "message": "PnLTotals created successfully", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:01:43.445640+05:30", "timestamp": 1755783103.44564}}}
{"text": "2025-08-21 19:01:43.446 | DEBUG    | app.services.dhan_client:get_pnl:574 - Creating PnL model...\n", "record": {"elapsed": {"repr": "0:00:25.153648", "seconds": 25.153648}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 574, "message": "Creating PnL model...", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:01:43.446190+05:30", "timestamp": 1755783103.44619}}}
{"text": "2025-08-21 19:01:43.446 | DEBUG    | app.services.dhan_client:get_pnl:575 - Model fields: totals=<class 'app.models.schemas.PnLTotals'>, perSymbol=5, updated_at=2025-08-21 19:01:43.438633+05:30, trading_day=2025-08-21\n", "record": {"elapsed": {"repr": "0:00:25.154198", "seconds": 25.154198}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 575, "message": "Model fields: totals=<class 'app.models.schemas.PnLTotals'>, perSymbol=5, updated_at=2025-08-21 19:01:43.438633+05:30, trading_day=2025-08-21", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:01:43.446740+05:30", "timestamp": 1755783103.44674}}}
{"text": "2025-08-21 19:01:43.447 | DEBUG    | app.services.dhan_client:get_pnl:584 - Created PnL model: totals=PnLTotals(realized=0.0, unrealized=411943.4, day=411943.4, currency='INR') per_symbol=[PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1727, avg=618.93, ltp=318.99, unrealized=-517988.19, today_pnl=-517988.19), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=167, avg=948.57, ltp=1174.25, unrealized=-37689.36, today_pnl=-37689.36), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=1347, avg=801.44, ltp=1865.24, unrealized=1432944.15, today_pnl=1432944.15), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=143, avg=1427.62, ltp=1216.47, unrealized=30195.0, today_pnl=30195.0), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=438, avg=1994.48, ltp=863.16, unrealized=-495518.2, today_pnl=-495518.2)] updated_at=datetime.datetime(2025, 8, 21, 19, 1, 43, 438633, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))) trading_day='2025-08-21'\n", "record": {"elapsed": {"repr": "0:00:25.155057", "seconds": 25.155057}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 584, "message": "Created PnL model: totals=PnLTotals(realized=0.0, unrealized=411943.4, day=411943.4, currency='INR') per_symbol=[PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1727, avg=618.93, ltp=318.99, unrealized=-517988.19, today_pnl=-517988.19), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=167, avg=948.57, ltp=1174.25, unrealized=-37689.36, today_pnl=-37689.36), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=1347, avg=801.44, ltp=1865.24, unrealized=1432944.15, today_pnl=1432944.15), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=143, avg=1427.62, ltp=1216.47, unrealized=30195.0, today_pnl=30195.0), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=438, avg=1994.48, ltp=863.16, unrealized=-495518.2, today_pnl=-495518.2)] updated_at=datetime.datetime(2025, 8, 21, 19, 1, 43, 438633, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))) trading_day='2025-08-21'", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:01:43.447599+05:30", "timestamp": 1755783103.447599}}}
{"text": "2025-08-21 19:01:43.449 | DEBUG    | app.services.dhan_client:get_pnl:585 - PnL model fields: {'totals': PnLTotals(realized=0.0, unrealized=411943.4, day=411943.4, currency='INR'), 'per_symbol': [PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1727, avg=618.93, ltp=318.99, unrealized=-517988.19, today_pnl=-517988.19), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=167, avg=948.57, ltp=1174.25, unrealized=-37689.36, today_pnl=-37689.36), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=1347, avg=801.44, ltp=1865.24, unrealized=1432944.15, today_pnl=1432944.15), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=143, avg=1427.62, ltp=1216.47, unrealized=30195.0, today_pnl=30195.0), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=438, avg=1994.48, ltp=863.16, unrealized=-495518.2, today_pnl=-495518.2)], 'updated_at': datetime.datetime(2025, 8, 21, 19, 1, 43, 438633, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))), 'trading_day': '2025-08-21'}\n", "record": {"elapsed": {"repr": "0:00:25.156844", "seconds": 25.156844}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 585, "message": "PnL model fields: {'totals': PnLTotals(realized=0.0, unrealized=411943.4, day=411943.4, currency='INR'), 'per_symbol': [PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1727, avg=618.93, ltp=318.99, unrealized=-517988.19, today_pnl=-517988.19), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=167, avg=948.57, ltp=1174.25, unrealized=-37689.36, today_pnl=-37689.36), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=1347, avg=801.44, ltp=1865.24, unrealized=1432944.15, today_pnl=1432944.15), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=143, avg=1427.62, ltp=1216.47, unrealized=30195.0, today_pnl=30195.0), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=438, avg=1994.48, ltp=863.16, unrealized=-495518.2, today_pnl=-495518.2)], 'updated_at': datetime.datetime(2025, 8, 21, 19, 1, 43, 438633, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))), 'trading_day': '2025-08-21'}", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:01:43.449386+05:30", "timestamp": 1755783103.449386}}}
{"text": "2025-08-21 19:01:43.450 | INFO     | app.services.dhan_client:get_pnl:587 - P&L calculation completed successfully: 5 symbols, unrealized=‚Çπ411943.40\n", "record": {"elapsed": {"repr": "0:00:25.157693", "seconds": 25.157693}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 587, "message": "P&L calculation completed successfully: 5 symbols, unrealized=‚Çπ411943.40", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:01:43.450235+05:30", "timestamp": 1755783103.450235}}}
{"text": "2025-08-21 19:01:43.451 | DEBUG    | app.ws.live:emit_delta:408 - Emitted pnl delta: seq=28\n", "record": {"elapsed": {"repr": "0:00:25.158543", "seconds": 25.158543}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "emit_delta", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 408, "message": "Emitted pnl delta: seq=28", "module": "live", "name": "app.ws.live", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:01:43.451085+05:30", "timestamp": 1755783103.451085}}}
{"text": "2025-08-21 19:01:43.959 | DEBUG    | app.ws.live:emit_delta:408 - Emitted positions delta: seq=29\n", "record": {"elapsed": {"repr": "0:00:25.666676", "seconds": 25.666676}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "emit_delta", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 408, "message": "Emitted positions delta: seq=29", "module": "live", "name": "app.ws.live", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:01:43.959218+05:30", "timestamp": 1755783103.959218}}}
{"text": "2025-08-21 19:01:44.436 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:26.143621", "seconds": 26.143621}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:01:44.436163+05:30", "timestamp": 1755783104.436163}}}
{"text": "2025-08-21 19:01:44.436 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:26.144402", "seconds": 26.144402}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:01:44.436944+05:30", "timestamp": 1755783104.436944}}}
{"text": "2025-08-21 19:01:44.437 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:26.144836", "seconds": 26.144836}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:01:44.437378+05:30", "timestamp": 1755783104.437378}}}
{"text": "2025-08-21 19:01:44.437 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:26.145446", "seconds": 26.145446}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:01:44.437988+05:30", "timestamp": 1755783104.437988}}}
{"text": "2025-08-21 19:01:44.438 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:26.146100", "seconds": 26.1461}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:01:44.438642+05:30", "timestamp": 1755783104.438642}}}
{"text": "2025-08-21 19:01:44.439 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:26.146945", "seconds": 26.146945}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:01:44.439487+05:30", "timestamp": 1755783104.439487}}}
{"text": "2025-08-21 19:01:44.440 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:26.147696", "seconds": 26.147696}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:01:44.440238+05:30", "timestamp": 1755783104.440238}}}
{"text": "2025-08-21 19:01:44.440 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:26.148198", "seconds": 26.148198}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:01:44.440740+05:30", "timestamp": 1755783104.44074}}}
{"text": "2025-08-21 19:01:44.441 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:26.148722", "seconds": 26.148722}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:01:44.441264+05:30", "timestamp": 1755783104.441264}}}
{"text": "2025-08-21 19:01:44.441 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:26.149209", "seconds": 26.149209}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:01:44.441751+05:30", "timestamp": 1755783104.441751}}}
{"text": "2025-08-21 19:01:45.005 | INFO     | app.services.dhan_client:get_pnl:489 - Starting accurate P&L calculation\n", "record": {"elapsed": {"repr": "0:00:26.712977", "seconds": 26.712977}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 489, "message": "Starting accurate P&L calculation", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:01:45.005519+05:30", "timestamp": 1755783105.005519}}}
{"text": "2025-08-21 19:01:45.006 | INFO     | app.services.dhan_client:get_pnl:491 - Fetched 5 positions\n", "record": {"elapsed": {"repr": "0:00:26.713628", "seconds": 26.713628}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 491, "message": "Fetched 5 positions", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:01:45.006170+05:30", "timestamp": 1755783105.00617}}}
{"text": "2025-08-21 19:01:45.006 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for RELIANCE: unrealized=-514221.93, today=-514221.93\n", "record": {"elapsed": {"repr": "0:00:26.714047", "seconds": 26.714047}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for RELIANCE: unrealized=-514221.93, today=-514221.93", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:01:45.006589+05:30", "timestamp": 1755783105.006589}}}
{"text": "2025-08-21 19:01:45.007 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for TCS: unrealized=-41200.66, today=-41200.66\n", "record": {"elapsed": {"repr": "0:00:26.714591", "seconds": 26.714591}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for TCS: unrealized=-41200.66, today=-41200.66", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:01:45.007133+05:30", "timestamp": 1755783105.007133}}}
{"text": "2025-08-21 19:01:45.007 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for HDFC: unrealized=1409616.96, today=1409616.96\n", "record": {"elapsed": {"repr": "0:00:26.715100", "seconds": 26.7151}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for HDFC: unrealized=1409616.96, today=1409616.96", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:01:45.007642+05:30", "timestamp": 1755783105.007642}}}
{"text": "2025-08-21 19:01:45.008 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for INFY: unrealized=27503.89, today=27503.89\n", "record": {"elapsed": {"repr": "0:00:26.715497", "seconds": 26.715497}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for INFY: unrealized=27503.89, today=27503.89", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:01:45.008039+05:30", "timestamp": 1755783105.008039}}}
{"text": "2025-08-21 19:01:45.008 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for ICICIBANK: unrealized=-493319.23, today=-493319.23\n", "record": {"elapsed": {"repr": "0:00:26.715913", "seconds": 26.715913}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for ICICIBANK: unrealized=-493319.23, today=-493319.23", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:01:45.008455+05:30", "timestamp": 1755783105.008455}}}
{"text": "2025-08-21 19:01:45.008 | INFO     | app.services.dhan_client:get_pnl:545 - Calculated totals - realized: 0.0, unrealized: 388379.03, day: 388379.03\n", "record": {"elapsed": {"repr": "0:00:26.716281", "seconds": 26.716281}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 545, "message": "Calculated totals - realized: 0.0, unrealized: 388379.03, day: 388379.03", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:01:45.008823+05:30", "timestamp": 1755783105.008823}}}
{"text": "2025-08-21 19:01:45.009 | DEBUG    | app.services.dhan_client:get_pnl:554 - PnL consistency check passed: drift=‚Çπ0.00\n", "record": {"elapsed": {"repr": "0:00:26.716678", "seconds": 26.716678}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 554, "message": "PnL consistency check passed: drift=‚Çπ0.00", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:01:45.009220+05:30", "timestamp": 1755783105.00922}}}
{"text": "2025-08-21 19:01:45.009 | DEBUG    | app.services.dhan_client:get_pnl:558 - Creating PnLTotals...\n", "record": {"elapsed": {"repr": "0:00:26.717305", "seconds": 26.717305}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 558, "message": "Creating PnLTotals...", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:01:45.009847+05:30", "timestamp": 1755783105.009847}}}
{"text": "2025-08-21 19:01:45.010 | DEBUG    | app.services.dhan_client:get_pnl:565 - PnLTotals created successfully\n", "record": {"elapsed": {"repr": "0:00:26.718048", "seconds": 26.718048}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 565, "message": "PnLTotals created successfully", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:01:45.010590+05:30", "timestamp": 1755783105.01059}}}
{"text": "2025-08-21 19:01:45.011 | DEBUG    | app.services.dhan_client:get_pnl:574 - Creating PnL model...\n", "record": {"elapsed": {"repr": "0:00:26.718824", "seconds": 26.718824}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 574, "message": "Creating PnL model...", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:01:45.011366+05:30", "timestamp": 1755783105.011366}}}
{"text": "2025-08-21 19:01:45.011 | DEBUG    | app.services.dhan_client:get_pnl:575 - Model fields: totals=<class 'app.models.schemas.PnLTotals'>, perSymbol=5, updated_at=2025-08-21 19:01:45.006533+05:30, trading_day=2025-08-21\n", "record": {"elapsed": {"repr": "0:00:26.719312", "seconds": 26.719312}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 575, "message": "Model fields: totals=<class 'app.models.schemas.PnLTotals'>, perSymbol=5, updated_at=2025-08-21 19:01:45.006533+05:30, trading_day=2025-08-21", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:01:45.011854+05:30", "timestamp": 1755783105.011854}}}
{"text": "2025-08-21 19:01:45.012 | DEBUG    | app.services.dhan_client:get_pnl:584 - Created PnL model: totals=PnLTotals(realized=0.0, unrealized=388379.03, day=388379.03, currency='INR') per_symbol=[PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1727, avg=618.93, ltp=321.18, unrealized=-514221.93, today_pnl=-514221.93), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=167, avg=948.57, ltp=1195.28, unrealized=-41200.66, today_pnl=-41200.66), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=1347, avg=801.44, ltp=1847.93, unrealized=1409616.96, today_pnl=1409616.96), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=143, avg=1427.62, ltp=1235.29, unrealized=27503.89, today_pnl=27503.89), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=438, avg=1994.48, ltp=868.18, unrealized=-493319.23, today_pnl=-493319.23)] updated_at=datetime.datetime(2025, 8, 21, 19, 1, 45, 6533, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))) trading_day='2025-08-21'\n", "record": {"elapsed": {"repr": "0:00:26.719935", "seconds": 26.719935}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 584, "message": "Created PnL model: totals=PnLTotals(realized=0.0, unrealized=388379.03, day=388379.03, currency='INR') per_symbol=[PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1727, avg=618.93, ltp=321.18, unrealized=-514221.93, today_pnl=-514221.93), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=167, avg=948.57, ltp=1195.28, unrealized=-41200.66, today_pnl=-41200.66), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=1347, avg=801.44, ltp=1847.93, unrealized=1409616.96, today_pnl=1409616.96), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=143, avg=1427.62, ltp=1235.29, unrealized=27503.89, today_pnl=27503.89), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=438, avg=1994.48, ltp=868.18, unrealized=-493319.23, today_pnl=-493319.23)] updated_at=datetime.datetime(2025, 8, 21, 19, 1, 45, 6533, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))) trading_day='2025-08-21'", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:01:45.012477+05:30", "timestamp": 1755783105.012477}}}
{"text": "2025-08-21 19:01:45.013 | DEBUG    | app.services.dhan_client:get_pnl:585 - PnL model fields: {'totals': PnLTotals(realized=0.0, unrealized=388379.03, day=388379.03, currency='INR'), 'per_symbol': [PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1727, avg=618.93, ltp=321.18, unrealized=-514221.93, today_pnl=-514221.93), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=167, avg=948.57, ltp=1195.28, unrealized=-41200.66, today_pnl=-41200.66), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=1347, avg=801.44, ltp=1847.93, unrealized=1409616.96, today_pnl=1409616.96), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=143, avg=1427.62, ltp=1235.29, unrealized=27503.89, today_pnl=27503.89), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=438, avg=1994.48, ltp=868.18, unrealized=-493319.23, today_pnl=-493319.23)], 'updated_at': datetime.datetime(2025, 8, 21, 19, 1, 45, 6533, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))), 'trading_day': '2025-08-21'}\n", "record": {"elapsed": {"repr": "0:00:26.720813", "seconds": 26.720813}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 585, "message": "PnL model fields: {'totals': PnLTotals(realized=0.0, unrealized=388379.03, day=388379.03, currency='INR'), 'per_symbol': [PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1727, avg=618.93, ltp=321.18, unrealized=-514221.93, today_pnl=-514221.93), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=167, avg=948.57, ltp=1195.28, unrealized=-41200.66, today_pnl=-41200.66), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=1347, avg=801.44, ltp=1847.93, unrealized=1409616.96, today_pnl=1409616.96), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=143, avg=1427.62, ltp=1235.29, unrealized=27503.89, today_pnl=27503.89), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=438, avg=1994.48, ltp=868.18, unrealized=-493319.23, today_pnl=-493319.23)], 'updated_at': datetime.datetime(2025, 8, 21, 19, 1, 45, 6533, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))), 'trading_day': '2025-08-21'}", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:01:45.013355+05:30", "timestamp": 1755783105.013355}}}
{"text": "2025-08-21 19:01:45.014 | INFO     | app.services.dhan_client:get_pnl:587 - P&L calculation completed successfully: 5 symbols, unrealized=‚Çπ388379.03\n", "record": {"elapsed": {"repr": "0:00:26.721813", "seconds": 26.721813}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 587, "message": "P&L calculation completed successfully: 5 symbols, unrealized=‚Çπ388379.03", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:01:45.014355+05:30", "timestamp": 1755783105.014355}}}
{"text": "2025-08-21 19:01:45.015 | DEBUG    | app.ws.live:emit_delta:408 - Emitted pnl delta: seq=30\n", "record": {"elapsed": {"repr": "0:00:26.722578", "seconds": 26.722578}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "emit_delta", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 408, "message": "Emitted pnl delta: seq=30", "module": "live", "name": "app.ws.live", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:01:45.015120+05:30", "timestamp": 1755783105.01512}}}
{"text": "2025-08-21 19:01:45.764 | DEBUG    | app.ws.live:emit_delta:408 - Emitted positions delta: seq=31\n", "record": {"elapsed": {"repr": "0:00:27.472038", "seconds": 27.472038}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "emit_delta", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 408, "message": "Emitted positions delta: seq=31", "module": "live", "name": "app.ws.live", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:01:45.764580+05:30", "timestamp": 1755783105.76458}}}
{"text": "2025-08-21 19:01:46.442 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:28.150322", "seconds": 28.150322}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:01:46.442864+05:30", "timestamp": 1755783106.442864}}}
{"text": "2025-08-21 19:01:46.444 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:28.151833", "seconds": 28.151833}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:01:46.444375+05:30", "timestamp": 1755783106.444375}}}
{"text": "2025-08-21 19:01:46.445 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:28.152602", "seconds": 28.152602}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:01:46.445144+05:30", "timestamp": 1755783106.445144}}}
{"text": "2025-08-21 19:01:46.445 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:28.153315", "seconds": 28.153315}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:01:46.445857+05:30", "timestamp": 1755783106.445857}}}
{"text": "2025-08-21 19:01:46.446 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:28.154334", "seconds": 28.154334}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:01:46.446876+05:30", "timestamp": 1755783106.446876}}}
{"text": "2025-08-21 19:01:46.447 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:28.155134", "seconds": 28.155134}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:01:46.447676+05:30", "timestamp": 1755783106.447676}}}
{"text": "2025-08-21 19:01:46.449 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:28.156654", "seconds": 28.156654}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:01:46.449196+05:30", "timestamp": 1755783106.449196}}}
{"text": "2025-08-21 19:01:46.450 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:28.157977", "seconds": 28.157977}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:01:46.450519+05:30", "timestamp": 1755783106.450519}}}
{"text": "2025-08-21 19:01:46.451 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:28.159047", "seconds": 28.159047}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:01:46.451589+05:30", "timestamp": 1755783106.451589}}}
{"text": "2025-08-21 19:01:46.452 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:28.160388", "seconds": 28.160388}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:01:46.452930+05:30", "timestamp": 1755783106.45293}}}
{"text": "2025-08-21 19:01:46.850 | INFO     | app.services.dhan_client:get_pnl:489 - Starting accurate P&L calculation\n", "record": {"elapsed": {"repr": "0:00:28.557743", "seconds": 28.557743}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 489, "message": "Starting accurate P&L calculation", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:01:46.850285+05:30", "timestamp": 1755783106.850285}}}
{"text": "2025-08-21 19:01:46.851 | INFO     | app.services.dhan_client:get_pnl:491 - Fetched 5 positions\n", "record": {"elapsed": {"repr": "0:00:28.559315", "seconds": 28.559315}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 491, "message": "Fetched 5 positions", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:01:46.851857+05:30", "timestamp": 1755783106.851857}}}
{"text": "2025-08-21 19:01:46.852 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for RELIANCE: unrealized=-516259.23, today=-516259.23\n", "record": {"elapsed": {"repr": "0:00:28.560234", "seconds": 28.560234}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for RELIANCE: unrealized=-516259.23, today=-516259.23", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:01:46.852776+05:30", "timestamp": 1755783106.852776}}}
{"text": "2025-08-21 19:01:46.853 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for TCS: unrealized=-39583.23, today=-39583.23\n", "record": {"elapsed": {"repr": "0:00:28.561015", "seconds": 28.561015}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for TCS: unrealized=-39583.23, today=-39583.23", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:01:46.853557+05:30", "timestamp": 1755783106.853557}}}
{"text": "2025-08-21 19:01:46.854 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for HDFC: unrealized=1379687.6, today=1379687.6\n", "record": {"elapsed": {"repr": "0:00:28.562048", "seconds": 28.562048}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for HDFC: unrealized=1379687.6, today=1379687.6", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:01:46.854590+05:30", "timestamp": 1755783106.85459}}}
{"text": "2025-08-21 19:01:46.855 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for INFY: unrealized=26844.73, today=26844.73\n", "record": {"elapsed": {"repr": "0:00:28.562896", "seconds": 28.562896}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for INFY: unrealized=26844.73, today=26844.73", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:01:46.855438+05:30", "timestamp": 1755783106.855438}}}
{"text": "2025-08-21 19:01:46.856 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for ICICIBANK: unrealized=-488236.41, today=-488236.41\n", "record": {"elapsed": {"repr": "0:00:28.564345", "seconds": 28.564345}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for ICICIBANK: unrealized=-488236.41, today=-488236.41", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:01:46.856887+05:30", "timestamp": 1755783106.856887}}}
{"text": "2025-08-21 19:01:46.858 | INFO     | app.services.dhan_client:get_pnl:545 - Calculated totals - realized: 0.0, unrealized: 362453.46, day: 362453.46\n", "record": {"elapsed": {"repr": "0:00:28.565886", "seconds": 28.565886}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 545, "message": "Calculated totals - realized: 0.0, unrealized: 362453.46, day: 362453.46", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:01:46.858428+05:30", "timestamp": 1755783106.858428}}}
{"text": "2025-08-21 19:01:46.859 | DEBUG    | app.services.dhan_client:get_pnl:554 - PnL consistency check passed: drift=‚Çπ0.00\n", "record": {"elapsed": {"repr": "0:00:28.567084", "seconds": 28.567084}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 554, "message": "PnL consistency check passed: drift=‚Çπ0.00", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:01:46.859626+05:30", "timestamp": 1755783106.859626}}}
{"text": "2025-08-21 19:01:46.860 | DEBUG    | app.services.dhan_client:get_pnl:558 - Creating PnLTotals...\n", "record": {"elapsed": {"repr": "0:00:28.568337", "seconds": 28.568337}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 558, "message": "Creating PnLTotals...", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:01:46.860879+05:30", "timestamp": 1755783106.860879}}}
{"text": "2025-08-21 19:01:46.861 | DEBUG    | app.services.dhan_client:get_pnl:565 - PnLTotals created successfully\n", "record": {"elapsed": {"repr": "0:00:28.569122", "seconds": 28.569122}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 565, "message": "PnLTotals created successfully", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:01:46.861664+05:30", "timestamp": 1755783106.861664}}}
{"text": "2025-08-21 19:01:46.862 | DEBUG    | app.services.dhan_client:get_pnl:574 - Creating PnL model...\n", "record": {"elapsed": {"repr": "0:00:28.570026", "seconds": 28.570026}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 574, "message": "Creating PnL model...", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:01:46.862568+05:30", "timestamp": 1755783106.862568}}}
{"text": "2025-08-21 19:01:46.863 | DEBUG    | app.services.dhan_client:get_pnl:575 - Model fields: totals=<class 'app.models.schemas.PnLTotals'>, perSymbol=5, updated_at=2025-08-21 19:01:46.852631+05:30, trading_day=2025-08-21\n", "record": {"elapsed": {"repr": "0:00:28.570930", "seconds": 28.57093}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 575, "message": "Model fields: totals=<class 'app.models.schemas.PnLTotals'>, perSymbol=5, updated_at=2025-08-21 19:01:46.852631+05:30, trading_day=2025-08-21", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:01:46.863472+05:30", "timestamp": 1755783106.863472}}}
{"text": "2025-08-21 19:01:46.865 | DEBUG    | app.services.dhan_client:get_pnl:584 - Created PnL model: totals=PnLTotals(realized=0.0, unrealized=362453.46, day=362453.46, currency='INR') per_symbol=[PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1727, avg=618.93, ltp=320.0, unrealized=-516259.23, today_pnl=-516259.23), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=167, avg=948.57, ltp=1185.6, unrealized=-39583.23, today_pnl=-39583.23), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=1347, avg=801.44, ltp=1825.71, unrealized=1379687.6, today_pnl=1379687.6), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=143, avg=1427.62, ltp=1239.89, unrealized=26844.73, today_pnl=26844.73), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=438, avg=1994.48, ltp=879.79, unrealized=-488236.41, today_pnl=-488236.41)] updated_at=datetime.datetime(2025, 8, 21, 19, 1, 46, 852631, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))) trading_day='2025-08-21'\n", "record": {"elapsed": {"repr": "0:00:28.572587", "seconds": 28.572587}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 584, "message": "Created PnL model: totals=PnLTotals(realized=0.0, unrealized=362453.46, day=362453.46, currency='INR') per_symbol=[PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1727, avg=618.93, ltp=320.0, unrealized=-516259.23, today_pnl=-516259.23), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=167, avg=948.57, ltp=1185.6, unrealized=-39583.23, today_pnl=-39583.23), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=1347, avg=801.44, ltp=1825.71, unrealized=1379687.6, today_pnl=1379687.6), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=143, avg=1427.62, ltp=1239.89, unrealized=26844.73, today_pnl=26844.73), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=438, avg=1994.48, ltp=879.79, unrealized=-488236.41, today_pnl=-488236.41)] updated_at=datetime.datetime(2025, 8, 21, 19, 1, 46, 852631, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))) trading_day='2025-08-21'", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:01:46.865129+05:30", "timestamp": 1755783106.865129}}}
{"text": "2025-08-21 19:01:46.866 | DEBUG    | app.services.dhan_client:get_pnl:585 - PnL model fields: {'totals': PnLTotals(realized=0.0, unrealized=362453.46, day=362453.46, currency='INR'), 'per_symbol': [PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1727, avg=618.93, ltp=320.0, unrealized=-516259.23, today_pnl=-516259.23), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=167, avg=948.57, ltp=1185.6, unrealized=-39583.23, today_pnl=-39583.23), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=1347, avg=801.44, ltp=1825.71, unrealized=1379687.6, today_pnl=1379687.6), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=143, avg=1427.62, ltp=1239.89, unrealized=26844.73, today_pnl=26844.73), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=438, avg=1994.48, ltp=879.79, unrealized=-488236.41, today_pnl=-488236.41)], 'updated_at': datetime.datetime(2025, 8, 21, 19, 1, 46, 852631, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))), 'trading_day': '2025-08-21'}\n", "record": {"elapsed": {"repr": "0:00:28.574361", "seconds": 28.574361}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 585, "message": "PnL model fields: {'totals': PnLTotals(realized=0.0, unrealized=362453.46, day=362453.46, currency='INR'), 'per_symbol': [PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1727, avg=618.93, ltp=320.0, unrealized=-516259.23, today_pnl=-516259.23), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=167, avg=948.57, ltp=1185.6, unrealized=-39583.23, today_pnl=-39583.23), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=1347, avg=801.44, ltp=1825.71, unrealized=1379687.6, today_pnl=1379687.6), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=143, avg=1427.62, ltp=1239.89, unrealized=26844.73, today_pnl=26844.73), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=438, avg=1994.48, ltp=879.79, unrealized=-488236.41, today_pnl=-488236.41)], 'updated_at': datetime.datetime(2025, 8, 21, 19, 1, 46, 852631, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))), 'trading_day': '2025-08-21'}", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:01:46.866903+05:30", "timestamp": 1755783106.866903}}}
{"text": "2025-08-21 19:01:46.869 | INFO     | app.services.dhan_client:get_pnl:587 - P&L calculation completed successfully: 5 symbols, unrealized=‚Çπ362453.46\n", "record": {"elapsed": {"repr": "0:00:28.576537", "seconds": 28.576537}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 587, "message": "P&L calculation completed successfully: 5 symbols, unrealized=‚Çπ362453.46", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:01:46.869079+05:30", "timestamp": 1755783106.869079}}}
{"text": "2025-08-21 19:01:46.870 | DEBUG    | app.ws.live:emit_delta:408 - Emitted pnl delta: seq=32\n", "record": {"elapsed": {"repr": "0:00:28.577911", "seconds": 28.577911}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "emit_delta", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 408, "message": "Emitted pnl delta: seq=32", "module": "live", "name": "app.ws.live", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:01:46.870453+05:30", "timestamp": 1755783106.870453}}}
{"text": "2025-08-21 19:01:47.493 | DEBUG    | app.ws.live:emit_delta:408 - Emitted positions delta: seq=33\n", "record": {"elapsed": {"repr": "0:00:29.201076", "seconds": 29.201076}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "emit_delta", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 408, "message": "Emitted positions delta: seq=33", "module": "live", "name": "app.ws.live", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:01:47.493618+05:30", "timestamp": 1755783107.493618}}}
{"text": "2025-08-21 19:01:48.453 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:30.161306", "seconds": 30.161306}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:01:48.453848+05:30", "timestamp": 1755783108.453848}}}
{"text": "2025-08-21 19:01:48.455 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:30.162928", "seconds": 30.162928}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:01:48.455470+05:30", "timestamp": 1755783108.45547}}}
{"text": "2025-08-21 19:01:48.456 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:30.163846", "seconds": 30.163846}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:01:48.456388+05:30", "timestamp": 1755783108.456388}}}
{"text": "2025-08-21 19:01:48.457 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:30.165242", "seconds": 30.165242}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:01:48.457784+05:30", "timestamp": 1755783108.457784}}}
{"text": "2025-08-21 19:01:48.460 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:30.167477", "seconds": 30.167477}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:01:48.460019+05:30", "timestamp": 1755783108.460019}}}
{"text": "2025-08-21 19:01:48.462 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:30.169744", "seconds": 30.169744}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:01:48.462286+05:30", "timestamp": 1755783108.462286}}}
{"text": "2025-08-21 19:01:48.466 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:30.173920", "seconds": 30.17392}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:01:48.466462+05:30", "timestamp": 1755783108.466462}}}
{"text": "2025-08-21 19:01:48.468 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:30.176392", "seconds": 30.176392}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:01:48.468934+05:30", "timestamp": 1755783108.468934}}}
{"text": "2025-08-21 19:01:48.469 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:30.177372", "seconds": 30.177372}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:01:48.469914+05:30", "timestamp": 1755783108.469914}}}
{"text": "2025-08-21 19:01:48.471 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:30.178592", "seconds": 30.178592}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:01:48.471134+05:30", "timestamp": 1755783108.471134}}}
{"text": "2025-08-21 19:01:48.636 | INFO     | app.services.dhan_client:get_pnl:489 - Starting accurate P&L calculation\n", "record": {"elapsed": {"repr": "0:00:30.343766", "seconds": 30.343766}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 489, "message": "Starting accurate P&L calculation", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:01:48.636308+05:30", "timestamp": 1755783108.636308}}}
{"text": "2025-08-21 19:01:48.637 | INFO     | app.services.dhan_client:get_pnl:491 - Fetched 5 positions\n", "record": {"elapsed": {"repr": "0:00:30.344837", "seconds": 30.344837}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 491, "message": "Fetched 5 positions", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:01:48.637379+05:30", "timestamp": 1755783108.637379}}}
{"text": "2025-08-21 19:01:48.638 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for RELIANCE: unrealized=-526872.01, today=-526872.01\n", "record": {"elapsed": {"repr": "0:00:30.345509", "seconds": 30.345509}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for RELIANCE: unrealized=-526872.01, today=-526872.01", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:01:48.638051+05:30", "timestamp": 1755783108.638051}}}
{"text": "2025-08-21 19:01:48.638 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for TCS: unrealized=-36366.61, today=-36366.61\n", "record": {"elapsed": {"repr": "0:00:30.346064", "seconds": 30.346064}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for TCS: unrealized=-36366.61, today=-36366.61", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:01:48.638606+05:30", "timestamp": 1755783108.638606}}}
{"text": "2025-08-21 19:01:48.639 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for HDFC: unrealized=1423904.45, today=1423904.45\n", "record": {"elapsed": {"repr": "0:00:30.346513", "seconds": 30.346513}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for HDFC: unrealized=1423904.45, today=1423904.45", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:01:48.639055+05:30", "timestamp": 1755783108.639055}}}
{"text": "2025-08-21 19:01:48.639 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for INFY: unrealized=26998.11, today=26998.11\n", "record": {"elapsed": {"repr": "0:00:30.346977", "seconds": 30.346977}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for INFY: unrealized=26998.11, today=26998.11", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:01:48.639519+05:30", "timestamp": 1755783108.639519}}}
{"text": "2025-08-21 19:01:48.640 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for ICICIBANK: unrealized=-487821.96, today=-487821.96\n", "record": {"elapsed": {"repr": "0:00:30.347463", "seconds": 30.347463}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for ICICIBANK: unrealized=-487821.96, today=-487821.96", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:01:48.640005+05:30", "timestamp": 1755783108.640005}}}
{"text": "2025-08-21 19:01:48.640 | INFO     | app.services.dhan_client:get_pnl:545 - Calculated totals - realized: 0.0, unrealized: 399841.98, day: 399841.98\n", "record": {"elapsed": {"repr": "0:00:30.348111", "seconds": 30.348111}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 545, "message": "Calculated totals - realized: 0.0, unrealized: 399841.98, day: 399841.98", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:01:48.640653+05:30", "timestamp": 1755783108.640653}}}
{"text": "2025-08-21 19:01:48.641 | DEBUG    | app.services.dhan_client:get_pnl:554 - PnL consistency check passed: drift=‚Çπ0.00\n", "record": {"elapsed": {"repr": "0:00:30.348986", "seconds": 30.348986}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 554, "message": "PnL consistency check passed: drift=‚Çπ0.00", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:01:48.641528+05:30", "timestamp": 1755783108.641528}}}
{"text": "2025-08-21 19:01:48.642 | DEBUG    | app.services.dhan_client:get_pnl:558 - Creating PnLTotals...\n", "record": {"elapsed": {"repr": "0:00:30.350087", "seconds": 30.350087}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 558, "message": "Creating PnLTotals...", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:01:48.642629+05:30", "timestamp": 1755783108.642629}}}
{"text": "2025-08-21 19:01:48.643 | DEBUG    | app.services.dhan_client:get_pnl:565 - PnLTotals created successfully\n", "record": {"elapsed": {"repr": "0:00:30.350587", "seconds": 30.350587}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 565, "message": "PnLTotals created successfully", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:01:48.643129+05:30", "timestamp": 1755783108.643129}}}
{"text": "2025-08-21 19:01:48.643 | DEBUG    | app.services.dhan_client:get_pnl:574 - Creating PnL model...\n", "record": {"elapsed": {"repr": "0:00:30.351158", "seconds": 30.351158}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 574, "message": "Creating PnL model...", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:01:48.643700+05:30", "timestamp": 1755783108.6437}}}
{"text": "2025-08-21 19:01:48.644 | DEBUG    | app.services.dhan_client:get_pnl:575 - Model fields: totals=<class 'app.models.schemas.PnLTotals'>, perSymbol=5, updated_at=2025-08-21 19:01:48.637952+05:30, trading_day=2025-08-21\n", "record": {"elapsed": {"repr": "0:00:30.352189", "seconds": 30.352189}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 575, "message": "Model fields: totals=<class 'app.models.schemas.PnLTotals'>, perSymbol=5, updated_at=2025-08-21 19:01:48.637952+05:30, trading_day=2025-08-21", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:01:48.644731+05:30", "timestamp": 1755783108.644731}}}
{"text": "2025-08-21 19:01:48.645 | DEBUG    | app.services.dhan_client:get_pnl:584 - Created PnL model: totals=PnLTotals(realized=0.0, unrealized=399841.98, day=399841.98, currency='INR') per_symbol=[PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1727, avg=618.93, ltp=313.85, unrealized=-526872.01, today_pnl=-526872.01), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=167, avg=948.57, ltp=1166.33, unrealized=-36366.61, today_pnl=-36366.61), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=1347, avg=801.44, ltp=1858.53, unrealized=1423904.45, today_pnl=1423904.45), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=143, avg=1427.62, ltp=1238.82, unrealized=26998.11, today_pnl=26998.11), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=438, avg=1994.48, ltp=880.73, unrealized=-487821.96, today_pnl=-487821.96)] updated_at=datetime.datetime(2025, 8, 21, 19, 1, 48, 637952, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))) trading_day='2025-08-21'\n", "record": {"elapsed": {"repr": "0:00:30.353328", "seconds": 30.353328}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 584, "message": "Created PnL model: totals=PnLTotals(realized=0.0, unrealized=399841.98, day=399841.98, currency='INR') per_symbol=[PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1727, avg=618.93, ltp=313.85, unrealized=-526872.01, today_pnl=-526872.01), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=167, avg=948.57, ltp=1166.33, unrealized=-36366.61, today_pnl=-36366.61), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=1347, avg=801.44, ltp=1858.53, unrealized=1423904.45, today_pnl=1423904.45), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=143, avg=1427.62, ltp=1238.82, unrealized=26998.11, today_pnl=26998.11), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=438, avg=1994.48, ltp=880.73, unrealized=-487821.96, today_pnl=-487821.96)] updated_at=datetime.datetime(2025, 8, 21, 19, 1, 48, 637952, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))) trading_day='2025-08-21'", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:01:48.645870+05:30", "timestamp": 1755783108.64587}}}
{"text": "2025-08-21 19:01:48.647 | DEBUG    | app.services.dhan_client:get_pnl:585 - PnL model fields: {'totals': PnLTotals(realized=0.0, unrealized=399841.98, day=399841.98, currency='INR'), 'per_symbol': [PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1727, avg=618.93, ltp=313.85, unrealized=-526872.01, today_pnl=-526872.01), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=167, avg=948.57, ltp=1166.33, unrealized=-36366.61, today_pnl=-36366.61), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=1347, avg=801.44, ltp=1858.53, unrealized=1423904.45, today_pnl=1423904.45), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=143, avg=1427.62, ltp=1238.82, unrealized=26998.11, today_pnl=26998.11), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=438, avg=1994.48, ltp=880.73, unrealized=-487821.96, today_pnl=-487821.96)], 'updated_at': datetime.datetime(2025, 8, 21, 19, 1, 48, 637952, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))), 'trading_day': '2025-08-21'}\n", "record": {"elapsed": {"repr": "0:00:30.354982", "seconds": 30.354982}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 585, "message": "PnL model fields: {'totals': PnLTotals(realized=0.0, unrealized=399841.98, day=399841.98, currency='INR'), 'per_symbol': [PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1727, avg=618.93, ltp=313.85, unrealized=-526872.01, today_pnl=-526872.01), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=167, avg=948.57, ltp=1166.33, unrealized=-36366.61, today_pnl=-36366.61), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=1347, avg=801.44, ltp=1858.53, unrealized=1423904.45, today_pnl=1423904.45), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=143, avg=1427.62, ltp=1238.82, unrealized=26998.11, today_pnl=26998.11), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=438, avg=1994.48, ltp=880.73, unrealized=-487821.96, today_pnl=-487821.96)], 'updated_at': datetime.datetime(2025, 8, 21, 19, 1, 48, 637952, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))), 'trading_day': '2025-08-21'}", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:01:48.647524+05:30", "timestamp": 1755783108.647524}}}
{"text": "2025-08-21 19:01:48.648 | INFO     | app.services.dhan_client:get_pnl:587 - P&L calculation completed successfully: 5 symbols, unrealized=‚Çπ399841.98\n", "record": {"elapsed": {"repr": "0:00:30.355894", "seconds": 30.355894}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 587, "message": "P&L calculation completed successfully: 5 symbols, unrealized=‚Çπ399841.98", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:01:48.648436+05:30", "timestamp": 1755783108.648436}}}
{"text": "2025-08-21 19:01:48.649 | DEBUG    | app.ws.live:emit_delta:408 - Emitted pnl delta: seq=34\n", "record": {"elapsed": {"repr": "0:00:30.356860", "seconds": 30.35686}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "emit_delta", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 408, "message": "Emitted pnl delta: seq=34", "module": "live", "name": "app.ws.live", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:01:48.649402+05:30", "timestamp": 1755783108.649402}}}
{"text": "2025-08-21 19:01:49.096 | DEBUG    | app.ws.live:emit_delta:408 - Emitted positions delta: seq=35\n", "record": {"elapsed": {"repr": "0:00:30.804393", "seconds": 30.804393}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "emit_delta", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 408, "message": "Emitted positions delta: seq=35", "module": "live", "name": "app.ws.live", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:01:49.096935+05:30", "timestamp": 1755783109.096935}}}
{"text": "2025-08-21 19:01:50.302 | INFO     | app.services.dhan_client:get_pnl:489 - Starting accurate P&L calculation\n", "record": {"elapsed": {"repr": "0:00:32.010052", "seconds": 32.010052}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 489, "message": "Starting accurate P&L calculation", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:01:50.302594+05:30", "timestamp": 1755783110.302594}}}
{"text": "2025-08-21 19:01:50.303 | INFO     | app.services.dhan_client:get_pnl:491 - Fetched 5 positions\n", "record": {"elapsed": {"repr": "0:00:32.011179", "seconds": 32.011179}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 491, "message": "Fetched 5 positions", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:01:50.303721+05:30", "timestamp": 1755783110.303721}}}
{"text": "2025-08-21 19:01:50.304 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for RELIANCE: unrealized=-526872.01, today=-526872.01\n", "record": {"elapsed": {"repr": "0:00:32.011883", "seconds": 32.011883}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for RELIANCE: unrealized=-526872.01, today=-526872.01", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:01:50.304425+05:30", "timestamp": 1755783110.304425}}}
{"text": "2025-08-21 19:01:50.305 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for TCS: unrealized=-36366.61, today=-36366.61\n", "record": {"elapsed": {"repr": "0:00:32.012486", "seconds": 32.012486}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for TCS: unrealized=-36366.61, today=-36366.61", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:01:50.305028+05:30", "timestamp": 1755783110.305028}}}
{"text": "2025-08-21 19:01:50.305 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for HDFC: unrealized=1423904.45, today=1423904.45\n", "record": {"elapsed": {"repr": "0:00:32.013039", "seconds": 32.013039}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for HDFC: unrealized=1423904.45, today=1423904.45", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:01:50.305581+05:30", "timestamp": 1755783110.305581}}}
{"text": "2025-08-21 19:01:50.306 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for INFY: unrealized=26998.11, today=26998.11\n", "record": {"elapsed": {"repr": "0:00:32.013702", "seconds": 32.013702}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for INFY: unrealized=26998.11, today=26998.11", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:01:50.306244+05:30", "timestamp": 1755783110.306244}}}
{"text": "2025-08-21 19:01:50.306 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for ICICIBANK: unrealized=-487821.96, today=-487821.96\n", "record": {"elapsed": {"repr": "0:00:32.014369", "seconds": 32.014369}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for ICICIBANK: unrealized=-487821.96, today=-487821.96", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:01:50.306911+05:30", "timestamp": 1755783110.306911}}}
{"text": "2025-08-21 19:01:50.307 | INFO     | app.services.dhan_client:get_pnl:545 - Calculated totals - realized: 0.0, unrealized: 399841.98, day: 399841.98\n", "record": {"elapsed": {"repr": "0:00:32.015082", "seconds": 32.015082}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 545, "message": "Calculated totals - realized: 0.0, unrealized: 399841.98, day: 399841.98", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:01:50.307624+05:30", "timestamp": 1755783110.307624}}}
{"text": "2025-08-21 19:01:50.308 | DEBUG    | app.services.dhan_client:get_pnl:554 - PnL consistency check passed: drift=‚Çπ0.00\n", "record": {"elapsed": {"repr": "0:00:32.016226", "seconds": 32.016226}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 554, "message": "PnL consistency check passed: drift=‚Çπ0.00", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:01:50.308768+05:30", "timestamp": 1755783110.308768}}}
{"text": "2025-08-21 19:01:50.309 | DEBUG    | app.services.dhan_client:get_pnl:558 - Creating PnLTotals...\n", "record": {"elapsed": {"repr": "0:00:32.017017", "seconds": 32.017017}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 558, "message": "Creating PnLTotals...", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:01:50.309559+05:30", "timestamp": 1755783110.309559}}}
{"text": "2025-08-21 19:01:50.310 | DEBUG    | app.services.dhan_client:get_pnl:565 - PnLTotals created successfully\n", "record": {"elapsed": {"repr": "0:00:32.017870", "seconds": 32.01787}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 565, "message": "PnLTotals created successfully", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:01:50.310412+05:30", "timestamp": 1755783110.310412}}}
{"text": "2025-08-21 19:01:50.311 | DEBUG    | app.services.dhan_client:get_pnl:574 - Creating PnL model...\n", "record": {"elapsed": {"repr": "0:00:32.019197", "seconds": 32.019197}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 574, "message": "Creating PnL model...", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:01:50.311739+05:30", "timestamp": 1755783110.311739}}}
{"text": "2025-08-21 19:01:50.312 | DEBUG    | app.services.dhan_client:get_pnl:575 - Model fields: totals=<class 'app.models.schemas.PnLTotals'>, perSymbol=5, updated_at=2025-08-21 19:01:50.304353+05:30, trading_day=2025-08-21\n", "record": {"elapsed": {"repr": "0:00:32.019843", "seconds": 32.019843}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 575, "message": "Model fields: totals=<class 'app.models.schemas.PnLTotals'>, perSymbol=5, updated_at=2025-08-21 19:01:50.304353+05:30, trading_day=2025-08-21", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:01:50.312385+05:30", "timestamp": 1755783110.312385}}}
{"text": "2025-08-21 19:01:50.313 | DEBUG    | app.services.dhan_client:get_pnl:584 - Created PnL model: totals=PnLTotals(realized=0.0, unrealized=399841.98, day=399841.98, currency='INR') per_symbol=[PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1727, avg=618.93, ltp=313.85, unrealized=-526872.01, today_pnl=-526872.01), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=167, avg=948.57, ltp=1166.33, unrealized=-36366.61, today_pnl=-36366.61), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=1347, avg=801.44, ltp=1858.53, unrealized=1423904.45, today_pnl=1423904.45), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=143, avg=1427.62, ltp=1238.82, unrealized=26998.11, today_pnl=26998.11), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=438, avg=1994.48, ltp=880.73, unrealized=-487821.96, today_pnl=-487821.96)] updated_at=datetime.datetime(2025, 8, 21, 19, 1, 50, 304353, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))) trading_day='2025-08-21'\n", "record": {"elapsed": {"repr": "0:00:32.020688", "seconds": 32.020688}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 584, "message": "Created PnL model: totals=PnLTotals(realized=0.0, unrealized=399841.98, day=399841.98, currency='INR') per_symbol=[PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1727, avg=618.93, ltp=313.85, unrealized=-526872.01, today_pnl=-526872.01), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=167, avg=948.57, ltp=1166.33, unrealized=-36366.61, today_pnl=-36366.61), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=1347, avg=801.44, ltp=1858.53, unrealized=1423904.45, today_pnl=1423904.45), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=143, avg=1427.62, ltp=1238.82, unrealized=26998.11, today_pnl=26998.11), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=438, avg=1994.48, ltp=880.73, unrealized=-487821.96, today_pnl=-487821.96)] updated_at=datetime.datetime(2025, 8, 21, 19, 1, 50, 304353, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))) trading_day='2025-08-21'", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:01:50.313230+05:30", "timestamp": 1755783110.31323}}}
{"text": "2025-08-21 19:01:50.314 | DEBUG    | app.services.dhan_client:get_pnl:585 - PnL model fields: {'totals': PnLTotals(realized=0.0, unrealized=399841.98, day=399841.98, currency='INR'), 'per_symbol': [PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1727, avg=618.93, ltp=313.85, unrealized=-526872.01, today_pnl=-526872.01), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=167, avg=948.57, ltp=1166.33, unrealized=-36366.61, today_pnl=-36366.61), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=1347, avg=801.44, ltp=1858.53, unrealized=1423904.45, today_pnl=1423904.45), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=143, avg=1427.62, ltp=1238.82, unrealized=26998.11, today_pnl=26998.11), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=438, avg=1994.48, ltp=880.73, unrealized=-487821.96, today_pnl=-487821.96)], 'updated_at': datetime.datetime(2025, 8, 21, 19, 1, 50, 304353, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))), 'trading_day': '2025-08-21'}\n", "record": {"elapsed": {"repr": "0:00:32.021659", "seconds": 32.021659}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 585, "message": "PnL model fields: {'totals': PnLTotals(realized=0.0, unrealized=399841.98, day=399841.98, currency='INR'), 'per_symbol': [PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1727, avg=618.93, ltp=313.85, unrealized=-526872.01, today_pnl=-526872.01), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=167, avg=948.57, ltp=1166.33, unrealized=-36366.61, today_pnl=-36366.61), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=1347, avg=801.44, ltp=1858.53, unrealized=1423904.45, today_pnl=1423904.45), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=143, avg=1427.62, ltp=1238.82, unrealized=26998.11, today_pnl=26998.11), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=438, avg=1994.48, ltp=880.73, unrealized=-487821.96, today_pnl=-487821.96)], 'updated_at': datetime.datetime(2025, 8, 21, 19, 1, 50, 304353, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))), 'trading_day': '2025-08-21'}", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:01:50.314201+05:30", "timestamp": 1755783110.314201}}}
{"text": "2025-08-21 19:01:50.314 | INFO     | app.services.dhan_client:get_pnl:587 - P&L calculation completed successfully: 5 symbols, unrealized=‚Çπ399841.98\n", "record": {"elapsed": {"repr": "0:00:32.022393", "seconds": 32.022393}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 587, "message": "P&L calculation completed successfully: 5 symbols, unrealized=‚Çπ399841.98", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:01:50.314935+05:30", "timestamp": 1755783110.314935}}}
{"text": "2025-08-21 19:01:50.316 | DEBUG    | app.ws.live:emit_delta:408 - Emitted pnl delta: seq=36\n", "record": {"elapsed": {"repr": "0:00:32.023689", "seconds": 32.023689}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "emit_delta", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 408, "message": "Emitted pnl delta: seq=36", "module": "live", "name": "app.ws.live", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:01:50.316231+05:30", "timestamp": 1755783110.316231}}}
{"text": "2025-08-21 19:01:50.472 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:32.180291", "seconds": 32.180291}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:01:50.472833+05:30", "timestamp": 1755783110.472833}}}
{"text": "2025-08-21 19:01:50.473 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:32.181294", "seconds": 32.181294}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:01:50.473836+05:30", "timestamp": 1755783110.473836}}}
{"text": "2025-08-21 19:01:50.475 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:32.182468", "seconds": 32.182468}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:01:50.475010+05:30", "timestamp": 1755783110.47501}}}
{"text": "2025-08-21 19:01:50.475 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:32.183197", "seconds": 32.183197}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:01:50.475739+05:30", "timestamp": 1755783110.475739}}}
{"text": "2025-08-21 19:01:50.476 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:32.183815", "seconds": 32.183815}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:01:50.476357+05:30", "timestamp": 1755783110.476357}}}
{"text": "2025-08-21 19:01:50.477 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:32.184622", "seconds": 32.184622}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:01:50.477164+05:30", "timestamp": 1755783110.477164}}}
{"text": "2025-08-21 19:01:50.478 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:32.185837", "seconds": 32.185837}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:01:50.478379+05:30", "timestamp": 1755783110.478379}}}
{"text": "2025-08-21 19:01:50.479 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:32.186608", "seconds": 32.186608}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:01:50.479150+05:30", "timestamp": 1755783110.47915}}}
{"text": "2025-08-21 19:01:50.479 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:32.187281", "seconds": 32.187281}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:01:50.479823+05:30", "timestamp": 1755783110.479823}}}
{"text": "2025-08-21 19:01:50.480 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:32.187889", "seconds": 32.187889}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:01:50.480431+05:30", "timestamp": 1755783110.480431}}}
{"text": "2025-08-21 19:01:50.970 | DEBUG    | app.ws.live:emit_delta:408 - Emitted positions delta: seq=37\n", "record": {"elapsed": {"repr": "0:00:32.678078", "seconds": 32.678078}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "emit_delta", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 408, "message": "Emitted positions delta: seq=37", "module": "live", "name": "app.ws.live", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:01:50.970620+05:30", "timestamp": 1755783110.97062}}}
{"text": "2025-08-21 19:01:52.301 | INFO     | app.services.dhan_client:get_pnl:489 - Starting accurate P&L calculation\n", "record": {"elapsed": {"repr": "0:00:34.008616", "seconds": 34.008616}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 489, "message": "Starting accurate P&L calculation", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:01:52.301158+05:30", "timestamp": 1755783112.301158}}}
{"text": "2025-08-21 19:01:52.301 | INFO     | app.services.dhan_client:get_pnl:491 - Fetched 5 positions\n", "record": {"elapsed": {"repr": "0:00:34.009417", "seconds": 34.009417}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 491, "message": "Fetched 5 positions", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:01:52.301959+05:30", "timestamp": 1755783112.301959}}}
{"text": "2025-08-21 19:01:52.302 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for RELIANCE: unrealized=-517207.67, today=-517207.67\n", "record": {"elapsed": {"repr": "0:00:34.010070", "seconds": 34.01007}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for RELIANCE: unrealized=-517207.67, today=-517207.67", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:01:52.302612+05:30", "timestamp": 1755783112.302612}}}
{"text": "2025-08-21 19:01:52.303 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for TCS: unrealized=-36327.5, today=-36327.5\n", "record": {"elapsed": {"repr": "0:00:34.010968", "seconds": 34.010968}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for TCS: unrealized=-36327.5, today=-36327.5", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:01:52.303510+05:30", "timestamp": 1755783112.30351}}}
{"text": "2025-08-21 19:01:52.304 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for HDFC: unrealized=1388610.67, today=1388610.67\n", "record": {"elapsed": {"repr": "0:00:34.011483", "seconds": 34.011483}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for HDFC: unrealized=1388610.67, today=1388610.67", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:01:52.304025+05:30", "timestamp": 1755783112.304025}}}
{"text": "2025-08-21 19:01:52.304 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for INFY: unrealized=27768.1, today=27768.1\n", "record": {"elapsed": {"repr": "0:00:34.012016", "seconds": 34.012016}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for INFY: unrealized=27768.1, today=27768.1", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:01:52.304558+05:30", "timestamp": 1755783112.304558}}}
{"text": "2025-08-21 19:01:52.305 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for ICICIBANK: unrealized=-491732.47, today=-491732.47\n", "record": {"elapsed": {"repr": "0:00:34.012563", "seconds": 34.012563}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for ICICIBANK: unrealized=-491732.47, today=-491732.47", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:01:52.305105+05:30", "timestamp": 1755783112.305105}}}
{"text": "2025-08-21 19:01:52.305 | INFO     | app.services.dhan_client:get_pnl:545 - Calculated totals - realized: 0.0, unrealized: 371111.13, day: 371111.13\n", "record": {"elapsed": {"repr": "0:00:34.013074", "seconds": 34.013074}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 545, "message": "Calculated totals - realized: 0.0, unrealized: 371111.13, day: 371111.13", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:01:52.305616+05:30", "timestamp": 1755783112.305616}}}
{"text": "2025-08-21 19:01:52.306 | DEBUG    | app.services.dhan_client:get_pnl:554 - PnL consistency check passed: drift=‚Çπ0.00\n", "record": {"elapsed": {"repr": "0:00:34.013659", "seconds": 34.013659}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 554, "message": "PnL consistency check passed: drift=‚Çπ0.00", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:01:52.306201+05:30", "timestamp": 1755783112.306201}}}
{"text": "2025-08-21 19:01:52.306 | DEBUG    | app.services.dhan_client:get_pnl:558 - Creating PnLTotals...\n", "record": {"elapsed": {"repr": "0:00:34.014258", "seconds": 34.014258}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 558, "message": "Creating PnLTotals...", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:01:52.306800+05:30", "timestamp": 1755783112.3068}}}
{"text": "2025-08-21 19:01:52.307 | DEBUG    | app.services.dhan_client:get_pnl:565 - PnLTotals created successfully\n", "record": {"elapsed": {"repr": "0:00:34.014828", "seconds": 34.014828}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 565, "message": "PnLTotals created successfully", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:01:52.307370+05:30", "timestamp": 1755783112.30737}}}
{"text": "2025-08-21 19:01:52.307 | DEBUG    | app.services.dhan_client:get_pnl:574 - Creating PnL model...\n", "record": {"elapsed": {"repr": "0:00:34.015321", "seconds": 34.015321}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 574, "message": "Creating PnL model...", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:01:52.307863+05:30", "timestamp": 1755783112.307863}}}
{"text": "2025-08-21 19:01:52.308 | DEBUG    | app.services.dhan_client:get_pnl:575 - Model fields: totals=<class 'app.models.schemas.PnLTotals'>, perSymbol=5, updated_at=2025-08-21 19:01:52.302480+05:30, trading_day=2025-08-21\n", "record": {"elapsed": {"repr": "0:00:34.016114", "seconds": 34.016114}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 575, "message": "Model fields: totals=<class 'app.models.schemas.PnLTotals'>, perSymbol=5, updated_at=2025-08-21 19:01:52.302480+05:30, trading_day=2025-08-21", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:01:52.308656+05:30", "timestamp": 1755783112.308656}}}
{"text": "2025-08-21 19:01:52.310 | DEBUG    | app.services.dhan_client:get_pnl:584 - Created PnL model: totals=PnLTotals(realized=0.0, unrealized=371111.13, day=371111.13, currency='INR') per_symbol=[PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1727, avg=618.93, ltp=319.45, unrealized=-517207.67, today_pnl=-517207.67), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=167, avg=948.57, ltp=1166.1, unrealized=-36327.5, today_pnl=-36327.5), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=1347, avg=801.44, ltp=1832.33, unrealized=1388610.67, today_pnl=1388610.67), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=143, avg=1427.62, ltp=1233.44, unrealized=27768.1, today_pnl=27768.1), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=438, avg=1994.48, ltp=871.8, unrealized=-491732.47, today_pnl=-491732.47)] updated_at=datetime.datetime(2025, 8, 21, 19, 1, 52, 302480, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))) trading_day='2025-08-21'\n", "record": {"elapsed": {"repr": "0:00:34.017755", "seconds": 34.017755}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 584, "message": "Created PnL model: totals=PnLTotals(realized=0.0, unrealized=371111.13, day=371111.13, currency='INR') per_symbol=[PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1727, avg=618.93, ltp=319.45, unrealized=-517207.67, today_pnl=-517207.67), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=167, avg=948.57, ltp=1166.1, unrealized=-36327.5, today_pnl=-36327.5), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=1347, avg=801.44, ltp=1832.33, unrealized=1388610.67, today_pnl=1388610.67), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=143, avg=1427.62, ltp=1233.44, unrealized=27768.1, today_pnl=27768.1), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=438, avg=1994.48, ltp=871.8, unrealized=-491732.47, today_pnl=-491732.47)] updated_at=datetime.datetime(2025, 8, 21, 19, 1, 52, 302480, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))) trading_day='2025-08-21'", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:01:52.310297+05:30", "timestamp": 1755783112.310297}}}
{"text": "2025-08-21 19:01:52.311 | DEBUG    | app.services.dhan_client:get_pnl:585 - PnL model fields: {'totals': PnLTotals(realized=0.0, unrealized=371111.13, day=371111.13, currency='INR'), 'per_symbol': [PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1727, avg=618.93, ltp=319.45, unrealized=-517207.67, today_pnl=-517207.67), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=167, avg=948.57, ltp=1166.1, unrealized=-36327.5, today_pnl=-36327.5), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=1347, avg=801.44, ltp=1832.33, unrealized=1388610.67, today_pnl=1388610.67), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=143, avg=1427.62, ltp=1233.44, unrealized=27768.1, today_pnl=27768.1), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=438, avg=1994.48, ltp=871.8, unrealized=-491732.47, today_pnl=-491732.47)], 'updated_at': datetime.datetime(2025, 8, 21, 19, 1, 52, 302480, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))), 'trading_day': '2025-08-21'}\n", "record": {"elapsed": {"repr": "0:00:34.018758", "seconds": 34.018758}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 585, "message": "PnL model fields: {'totals': PnLTotals(realized=0.0, unrealized=371111.13, day=371111.13, currency='INR'), 'per_symbol': [PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1727, avg=618.93, ltp=319.45, unrealized=-517207.67, today_pnl=-517207.67), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=167, avg=948.57, ltp=1166.1, unrealized=-36327.5, today_pnl=-36327.5), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=1347, avg=801.44, ltp=1832.33, unrealized=1388610.67, today_pnl=1388610.67), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=143, avg=1427.62, ltp=1233.44, unrealized=27768.1, today_pnl=27768.1), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=438, avg=1994.48, ltp=871.8, unrealized=-491732.47, today_pnl=-491732.47)], 'updated_at': datetime.datetime(2025, 8, 21, 19, 1, 52, 302480, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))), 'trading_day': '2025-08-21'}", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:01:52.311300+05:30", "timestamp": 1755783112.3113}}}
{"text": "2025-08-21 19:01:52.312 | INFO     | app.services.dhan_client:get_pnl:587 - P&L calculation completed successfully: 5 symbols, unrealized=‚Çπ371111.13\n", "record": {"elapsed": {"repr": "0:00:34.019565", "seconds": 34.019565}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 587, "message": "P&L calculation completed successfully: 5 symbols, unrealized=‚Çπ371111.13", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:01:52.312107+05:30", "timestamp": 1755783112.312107}}}
{"text": "2025-08-21 19:01:52.313 | DEBUG    | app.ws.live:emit_delta:408 - Emitted pnl delta: seq=38\n", "record": {"elapsed": {"repr": "0:00:34.021128", "seconds": 34.021128}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "emit_delta", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 408, "message": "Emitted pnl delta: seq=38", "module": "live", "name": "app.ws.live", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:01:52.313670+05:30", "timestamp": 1755783112.31367}}}
{"text": "2025-08-21 19:01:52.481 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:34.188834", "seconds": 34.188834}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:01:52.481376+05:30", "timestamp": 1755783112.481376}}}
{"text": "2025-08-21 19:01:52.482 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:34.190065", "seconds": 34.190065}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:01:52.482607+05:30", "timestamp": 1755783112.482607}}}
{"text": "2025-08-21 19:01:52.483 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:34.190734", "seconds": 34.190734}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:01:52.483276+05:30", "timestamp": 1755783112.483276}}}
{"text": "2025-08-21 19:01:52.483 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:34.191194", "seconds": 34.191194}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:01:52.483736+05:30", "timestamp": 1755783112.483736}}}
{"text": "2025-08-21 19:01:52.484 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:34.192387", "seconds": 34.192387}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:01:52.484929+05:30", "timestamp": 1755783112.484929}}}
{"text": "2025-08-21 19:01:52.485 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:34.193013", "seconds": 34.193013}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:01:52.485555+05:30", "timestamp": 1755783112.485555}}}
{"text": "2025-08-21 19:01:52.485 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:34.193410", "seconds": 34.19341}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:01:52.485952+05:30", "timestamp": 1755783112.485952}}}
{"text": "2025-08-21 19:01:52.486 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:34.193853", "seconds": 34.193853}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:01:52.486395+05:30", "timestamp": 1755783112.486395}}}
{"text": "2025-08-21 19:01:52.486 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:34.194274", "seconds": 34.194274}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:01:52.486816+05:30", "timestamp": 1755783112.486816}}}
{"text": "2025-08-21 19:01:52.487 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:34.194729", "seconds": 34.194729}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:01:52.487271+05:30", "timestamp": 1755783112.487271}}}
{"text": "2025-08-21 19:01:52.780 | DEBUG    | app.ws.live:emit_delta:408 - Emitted positions delta: seq=39\n", "record": {"elapsed": {"repr": "0:00:34.487816", "seconds": 34.487816}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "emit_delta", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 408, "message": "Emitted positions delta: seq=39", "module": "live", "name": "app.ws.live", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:01:52.780358+05:30", "timestamp": 1755783112.780358}}}
{"text": "2025-08-21 19:01:54.296 | INFO     | app.services.dhan_client:get_pnl:489 - Starting accurate P&L calculation\n", "record": {"elapsed": {"repr": "0:00:36.003673", "seconds": 36.003673}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 489, "message": "Starting accurate P&L calculation", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:01:54.296215+05:30", "timestamp": 1755783114.296215}}}
{"text": "2025-08-21 19:01:54.297 | INFO     | app.services.dhan_client:get_pnl:491 - Fetched 5 positions\n", "record": {"elapsed": {"repr": "0:00:36.004863", "seconds": 36.004863}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 491, "message": "Fetched 5 positions", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:01:54.297405+05:30", "timestamp": 1755783114.297405}}}
{"text": "2025-08-21 19:01:54.297 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for RELIANCE: unrealized=-519648.75, today=-519648.75\n", "record": {"elapsed": {"repr": "0:00:36.005427", "seconds": 36.005427}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for RELIANCE: unrealized=-519648.75, today=-519648.75", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:01:54.297969+05:30", "timestamp": 1755783114.297969}}}
{"text": "2025-08-21 19:01:54.298 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for TCS: unrealized=-39490.01, today=-39490.01\n", "record": {"elapsed": {"repr": "0:00:36.006159", "seconds": 36.006159}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for TCS: unrealized=-39490.01, today=-39490.01", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:01:54.298701+05:30", "timestamp": 1755783114.298701}}}
{"text": "2025-08-21 19:01:54.300 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for HDFC: unrealized=1359534.82, today=1359534.82\n", "record": {"elapsed": {"repr": "0:00:36.007527", "seconds": 36.007527}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for HDFC: unrealized=1359534.82, today=1359534.82", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:01:54.300069+05:30", "timestamp": 1755783114.300069}}}
{"text": "2025-08-21 19:01:54.300 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for INFY: unrealized=26367.95, today=26367.95\n", "record": {"elapsed": {"repr": "0:00:36.008184", "seconds": 36.008184}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for INFY: unrealized=26367.95, today=26367.95", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:01:54.300726+05:30", "timestamp": 1755783114.300726}}}
{"text": "2025-08-21 19:01:54.301 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for ICICIBANK: unrealized=-495667.61, today=-495667.61\n", "record": {"elapsed": {"repr": "0:00:36.008650", "seconds": 36.00865}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for ICICIBANK: unrealized=-495667.61, today=-495667.61", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:01:54.301192+05:30", "timestamp": 1755783114.301192}}}
{"text": "2025-08-21 19:01:54.301 | INFO     | app.services.dhan_client:get_pnl:545 - Calculated totals - realized: 0.0, unrealized: 331096.4, day: 331096.4\n", "record": {"elapsed": {"repr": "0:00:36.009036", "seconds": 36.009036}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 545, "message": "Calculated totals - realized: 0.0, unrealized: 331096.4, day: 331096.4", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:01:54.301578+05:30", "timestamp": 1755783114.301578}}}
{"text": "2025-08-21 19:01:54.302 | DEBUG    | app.services.dhan_client:get_pnl:554 - PnL consistency check passed: drift=‚Çπ0.00\n", "record": {"elapsed": {"repr": "0:00:36.009496", "seconds": 36.009496}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 554, "message": "PnL consistency check passed: drift=‚Çπ0.00", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:01:54.302038+05:30", "timestamp": 1755783114.302038}}}
{"text": "2025-08-21 19:01:54.302 | DEBUG    | app.services.dhan_client:get_pnl:558 - Creating PnLTotals...\n", "record": {"elapsed": {"repr": "0:00:36.009870", "seconds": 36.00987}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 558, "message": "Creating PnLTotals...", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:01:54.302412+05:30", "timestamp": 1755783114.302412}}}
{"text": "2025-08-21 19:01:54.302 | DEBUG    | app.services.dhan_client:get_pnl:565 - PnLTotals created successfully\n", "record": {"elapsed": {"repr": "0:00:36.010342", "seconds": 36.010342}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 565, "message": "PnLTotals created successfully", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:01:54.302884+05:30", "timestamp": 1755783114.302884}}}
{"text": "2025-08-21 19:01:54.303 | DEBUG    | app.services.dhan_client:get_pnl:574 - Creating PnL model...\n", "record": {"elapsed": {"repr": "0:00:36.010803", "seconds": 36.010803}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 574, "message": "Creating PnL model...", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:01:54.303345+05:30", "timestamp": 1755783114.303345}}}
{"text": "2025-08-21 19:01:54.303 | DEBUG    | app.services.dhan_client:get_pnl:575 - Model fields: totals=<class 'app.models.schemas.PnLTotals'>, perSymbol=5, updated_at=2025-08-21 19:01:54.297895+05:30, trading_day=2025-08-21\n", "record": {"elapsed": {"repr": "0:00:36.011252", "seconds": 36.011252}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 575, "message": "Model fields: totals=<class 'app.models.schemas.PnLTotals'>, perSymbol=5, updated_at=2025-08-21 19:01:54.297895+05:30, trading_day=2025-08-21", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:01:54.303794+05:30", "timestamp": 1755783114.303794}}}
{"text": "2025-08-21 19:01:54.304 | DEBUG    | app.services.dhan_client:get_pnl:584 - Created PnL model: totals=PnLTotals(realized=0.0, unrealized=331096.4, day=331096.4, currency='INR') per_symbol=[PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1727, avg=618.93, ltp=318.03, unrealized=-519648.75, today_pnl=-519648.75), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=167, avg=948.57, ltp=1185.04, unrealized=-39490.01, today_pnl=-39490.01), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=1347, avg=801.44, ltp=1810.75, unrealized=1359534.82, today_pnl=1359534.82), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=143, avg=1427.62, ltp=1243.23, unrealized=26367.95, today_pnl=26367.95), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=438, avg=1994.48, ltp=862.82, unrealized=-495667.61, today_pnl=-495667.61)] updated_at=datetime.datetime(2025, 8, 21, 19, 1, 54, 297895, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))) trading_day='2025-08-21'\n", "record": {"elapsed": {"repr": "0:00:36.011877", "seconds": 36.011877}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 584, "message": "Created PnL model: totals=PnLTotals(realized=0.0, unrealized=331096.4, day=331096.4, currency='INR') per_symbol=[PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1727, avg=618.93, ltp=318.03, unrealized=-519648.75, today_pnl=-519648.75), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=167, avg=948.57, ltp=1185.04, unrealized=-39490.01, today_pnl=-39490.01), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=1347, avg=801.44, ltp=1810.75, unrealized=1359534.82, today_pnl=1359534.82), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=143, avg=1427.62, ltp=1243.23, unrealized=26367.95, today_pnl=26367.95), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=438, avg=1994.48, ltp=862.82, unrealized=-495667.61, today_pnl=-495667.61)] updated_at=datetime.datetime(2025, 8, 21, 19, 1, 54, 297895, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))) trading_day='2025-08-21'", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:01:54.304419+05:30", "timestamp": 1755783114.304419}}}
{"text": "2025-08-21 19:01:54.305 | DEBUG    | app.services.dhan_client:get_pnl:585 - PnL model fields: {'totals': PnLTotals(realized=0.0, unrealized=331096.4, day=331096.4, currency='INR'), 'per_symbol': [PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1727, avg=618.93, ltp=318.03, unrealized=-519648.75, today_pnl=-519648.75), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=167, avg=948.57, ltp=1185.04, unrealized=-39490.01, today_pnl=-39490.01), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=1347, avg=801.44, ltp=1810.75, unrealized=1359534.82, today_pnl=1359534.82), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=143, avg=1427.62, ltp=1243.23, unrealized=26367.95, today_pnl=26367.95), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=438, avg=1994.48, ltp=862.82, unrealized=-495667.61, today_pnl=-495667.61)], 'updated_at': datetime.datetime(2025, 8, 21, 19, 1, 54, 297895, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))), 'trading_day': '2025-08-21'}\n", "record": {"elapsed": {"repr": "0:00:36.013014", "seconds": 36.013014}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 585, "message": "PnL model fields: {'totals': PnLTotals(realized=0.0, unrealized=331096.4, day=331096.4, currency='INR'), 'per_symbol': [PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1727, avg=618.93, ltp=318.03, unrealized=-519648.75, today_pnl=-519648.75), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=167, avg=948.57, ltp=1185.04, unrealized=-39490.01, today_pnl=-39490.01), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=1347, avg=801.44, ltp=1810.75, unrealized=1359534.82, today_pnl=1359534.82), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=143, avg=1427.62, ltp=1243.23, unrealized=26367.95, today_pnl=26367.95), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=438, avg=1994.48, ltp=862.82, unrealized=-495667.61, today_pnl=-495667.61)], 'updated_at': datetime.datetime(2025, 8, 21, 19, 1, 54, 297895, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))), 'trading_day': '2025-08-21'}", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:01:54.305556+05:30", "timestamp": 1755783114.305556}}}
{"text": "2025-08-21 19:01:54.306 | INFO     | app.services.dhan_client:get_pnl:587 - P&L calculation completed successfully: 5 symbols, unrealized=‚Çπ331096.40\n", "record": {"elapsed": {"repr": "0:00:36.013997", "seconds": 36.013997}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 587, "message": "P&L calculation completed successfully: 5 symbols, unrealized=‚Çπ331096.40", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:01:54.306539+05:30", "timestamp": 1755783114.306539}}}
{"text": "2025-08-21 19:01:54.307 | DEBUG    | app.ws.live:emit_delta:408 - Emitted pnl delta: seq=40\n", "record": {"elapsed": {"repr": "0:00:36.014902", "seconds": 36.014902}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "emit_delta", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 408, "message": "Emitted pnl delta: seq=40", "module": "live", "name": "app.ws.live", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:01:54.307444+05:30", "timestamp": 1755783114.307444}}}
{"text": "2025-08-21 19:01:54.487 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:36.195426", "seconds": 36.195426}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:01:54.487968+05:30", "timestamp": 1755783114.487968}}}
{"text": "2025-08-21 19:01:54.489 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:36.196523", "seconds": 36.196523}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:01:54.489065+05:30", "timestamp": 1755783114.489065}}}
{"text": "2025-08-21 19:01:54.489 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:36.197197", "seconds": 36.197197}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:01:54.489739+05:30", "timestamp": 1755783114.489739}}}
{"text": "2025-08-21 19:01:54.490 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:36.197907", "seconds": 36.197907}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:01:54.490449+05:30", "timestamp": 1755783114.490449}}}
{"text": "2025-08-21 19:01:54.491 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:36.198862", "seconds": 36.198862}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:01:54.491404+05:30", "timestamp": 1755783114.491404}}}
{"text": "2025-08-21 19:01:54.492 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:36.199763", "seconds": 36.199763}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:01:54.492305+05:30", "timestamp": 1755783114.492305}}}
{"text": "2025-08-21 19:01:54.492 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:36.200331", "seconds": 36.200331}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:01:54.492873+05:30", "timestamp": 1755783114.492873}}}
{"text": "2025-08-21 19:01:54.493 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:36.200840", "seconds": 36.20084}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:01:54.493382+05:30", "timestamp": 1755783114.493382}}}
{"text": "2025-08-21 19:01:54.493 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:36.201346", "seconds": 36.201346}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:01:54.493888+05:30", "timestamp": 1755783114.493888}}}
{"text": "2025-08-21 19:01:54.494 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:36.201845", "seconds": 36.201845}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:01:54.494387+05:30", "timestamp": 1755783114.494387}}}
{"text": "2025-08-21 19:01:54.497 | DEBUG    | app.ws.live:emit_delta:408 - Emitted positions delta: seq=41\n", "record": {"elapsed": {"repr": "0:00:36.204747", "seconds": 36.204747}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "emit_delta", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 408, "message": "Emitted positions delta: seq=41", "module": "live", "name": "app.ws.live", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:01:54.497289+05:30", "timestamp": 1755783114.497289}}}
{"text": "2025-08-21 19:01:56.290 | INFO     | app.services.dhan_client:get_pnl:489 - Starting accurate P&L calculation\n", "record": {"elapsed": {"repr": "0:00:37.997954", "seconds": 37.997954}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 489, "message": "Starting accurate P&L calculation", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:01:56.290496+05:30", "timestamp": 1755783116.290496}}}
{"text": "2025-08-21 19:01:56.291 | INFO     | app.services.dhan_client:get_pnl:491 - Fetched 5 positions\n", "record": {"elapsed": {"repr": "0:00:37.998581", "seconds": 37.998581}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 491, "message": "Fetched 5 positions", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:01:56.291123+05:30", "timestamp": 1755783116.291123}}}
{"text": "2025-08-21 19:01:56.291 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for RELIANCE: unrealized=-517627.73, today=-517627.73\n", "record": {"elapsed": {"repr": "0:00:37.999012", "seconds": 37.999012}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for RELIANCE: unrealized=-517627.73, today=-517627.73", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:01:56.291554+05:30", "timestamp": 1755783116.291554}}}
{"text": "2025-08-21 19:01:56.291 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for TCS: unrealized=-40416.35, today=-40416.35\n", "record": {"elapsed": {"repr": "0:00:37.999452", "seconds": 37.999452}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for TCS: unrealized=-40416.35, today=-40416.35", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:01:56.291994+05:30", "timestamp": 1755783116.291994}}}
{"text": "2025-08-21 19:01:56.292 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for HDFC: unrealized=1357743.74, today=1357743.74\n", "record": {"elapsed": {"repr": "0:00:37.999808", "seconds": 37.999808}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for HDFC: unrealized=1357743.74, today=1357743.74", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:01:56.292350+05:30", "timestamp": 1755783116.29235}}}
{"text": "2025-08-21 19:01:56.292 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for INFY: unrealized=26874.9, today=26874.9\n", "record": {"elapsed": {"repr": "0:00:38.000221", "seconds": 38.000221}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for INFY: unrealized=26874.9, today=26874.9", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:01:56.292763+05:30", "timestamp": 1755783116.292763}}}
{"text": "2025-08-21 19:01:56.293 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for ICICIBANK: unrealized=-492445.48, today=-492445.48\n", "record": {"elapsed": {"repr": "0:00:38.000605", "seconds": 38.000605}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for ICICIBANK: unrealized=-492445.48, today=-492445.48", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:01:56.293147+05:30", "timestamp": 1755783116.293147}}}
{"text": "2025-08-21 19:01:56.293 | INFO     | app.services.dhan_client:get_pnl:545 - Calculated totals - realized: 0.0, unrealized: 334129.08, day: 334129.08\n", "record": {"elapsed": {"repr": "0:00:38.001040", "seconds": 38.00104}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 545, "message": "Calculated totals - realized: 0.0, unrealized: 334129.08, day: 334129.08", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:01:56.293582+05:30", "timestamp": 1755783116.293582}}}
{"text": "2025-08-21 19:01:56.293 | DEBUG    | app.services.dhan_client:get_pnl:554 - PnL consistency check passed: drift=‚Çπ0.00\n", "record": {"elapsed": {"repr": "0:00:38.001443", "seconds": 38.001443}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 554, "message": "PnL consistency check passed: drift=‚Çπ0.00", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:01:56.293985+05:30", "timestamp": 1755783116.293985}}}
{"text": "2025-08-21 19:01:56.294 | DEBUG    | app.services.dhan_client:get_pnl:558 - Creating PnLTotals...\n", "record": {"elapsed": {"repr": "0:00:38.001880", "seconds": 38.00188}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 558, "message": "Creating PnLTotals...", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:01:56.294422+05:30", "timestamp": 1755783116.294422}}}
{"text": "2025-08-21 19:01:56.294 | DEBUG    | app.services.dhan_client:get_pnl:565 - PnLTotals created successfully\n", "record": {"elapsed": {"repr": "0:00:38.002442", "seconds": 38.002442}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 565, "message": "PnLTotals created successfully", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:01:56.294984+05:30", "timestamp": 1755783116.294984}}}
{"text": "2025-08-21 19:01:56.295 | DEBUG    | app.services.dhan_client:get_pnl:574 - Creating PnL model...\n", "record": {"elapsed": {"repr": "0:00:38.003094", "seconds": 38.003094}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 574, "message": "Creating PnL model...", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:01:56.295636+05:30", "timestamp": 1755783116.295636}}}
{"text": "2025-08-21 19:01:56.296 | DEBUG    | app.services.dhan_client:get_pnl:575 - Model fields: totals=<class 'app.models.schemas.PnLTotals'>, perSymbol=5, updated_at=2025-08-21 19:01:56.291500+05:30, trading_day=2025-08-21\n", "record": {"elapsed": {"repr": "0:00:38.003989", "seconds": 38.003989}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 575, "message": "Model fields: totals=<class 'app.models.schemas.PnLTotals'>, perSymbol=5, updated_at=2025-08-21 19:01:56.291500+05:30, trading_day=2025-08-21", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:01:56.296531+05:30", "timestamp": 1755783116.296531}}}
{"text": "2025-08-21 19:01:56.297 | DEBUG    | app.services.dhan_client:get_pnl:584 - Created PnL model: totals=PnLTotals(realized=0.0, unrealized=334129.08, day=334129.08, currency='INR') per_symbol=[PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1727, avg=618.93, ltp=319.2, unrealized=-517627.73, today_pnl=-517627.73), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=167, avg=948.57, ltp=1190.58, unrealized=-40416.35, today_pnl=-40416.35), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=1347, avg=801.44, ltp=1809.42, unrealized=1357743.74, today_pnl=1357743.74), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=143, avg=1427.62, ltp=1239.68, unrealized=26874.9, today_pnl=26874.9), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=438, avg=1994.48, ltp=870.18, unrealized=-492445.48, today_pnl=-492445.48)] updated_at=datetime.datetime(2025, 8, 21, 19, 1, 56, 291500, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))) trading_day='2025-08-21'\n", "record": {"elapsed": {"repr": "0:00:38.004475", "seconds": 38.004475}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 584, "message": "Created PnL model: totals=PnLTotals(realized=0.0, unrealized=334129.08, day=334129.08, currency='INR') per_symbol=[PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1727, avg=618.93, ltp=319.2, unrealized=-517627.73, today_pnl=-517627.73), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=167, avg=948.57, ltp=1190.58, unrealized=-40416.35, today_pnl=-40416.35), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=1347, avg=801.44, ltp=1809.42, unrealized=1357743.74, today_pnl=1357743.74), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=143, avg=1427.62, ltp=1239.68, unrealized=26874.9, today_pnl=26874.9), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=438, avg=1994.48, ltp=870.18, unrealized=-492445.48, today_pnl=-492445.48)] updated_at=datetime.datetime(2025, 8, 21, 19, 1, 56, 291500, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))) trading_day='2025-08-21'", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:01:56.297017+05:30", "timestamp": 1755783116.297017}}}
{"text": "2025-08-21 19:01:56.297 | DEBUG    | app.services.dhan_client:get_pnl:585 - PnL model fields: {'totals': PnLTotals(realized=0.0, unrealized=334129.08, day=334129.08, currency='INR'), 'per_symbol': [PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1727, avg=618.93, ltp=319.2, unrealized=-517627.73, today_pnl=-517627.73), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=167, avg=948.57, ltp=1190.58, unrealized=-40416.35, today_pnl=-40416.35), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=1347, avg=801.44, ltp=1809.42, unrealized=1357743.74, today_pnl=1357743.74), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=143, avg=1427.62, ltp=1239.68, unrealized=26874.9, today_pnl=26874.9), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=438, avg=1994.48, ltp=870.18, unrealized=-492445.48, today_pnl=-492445.48)], 'updated_at': datetime.datetime(2025, 8, 21, 19, 1, 56, 291500, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))), 'trading_day': '2025-08-21'}\n", "record": {"elapsed": {"repr": "0:00:38.005125", "seconds": 38.005125}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 585, "message": "PnL model fields: {'totals': PnLTotals(realized=0.0, unrealized=334129.08, day=334129.08, currency='INR'), 'per_symbol': [PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1727, avg=618.93, ltp=319.2, unrealized=-517627.73, today_pnl=-517627.73), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=167, avg=948.57, ltp=1190.58, unrealized=-40416.35, today_pnl=-40416.35), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=1347, avg=801.44, ltp=1809.42, unrealized=1357743.74, today_pnl=1357743.74), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=143, avg=1427.62, ltp=1239.68, unrealized=26874.9, today_pnl=26874.9), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=438, avg=1994.48, ltp=870.18, unrealized=-492445.48, today_pnl=-492445.48)], 'updated_at': datetime.datetime(2025, 8, 21, 19, 1, 56, 291500, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))), 'trading_day': '2025-08-21'}", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:01:56.297667+05:30", "timestamp": 1755783116.297667}}}
{"text": "2025-08-21 19:01:56.298 | INFO     | app.services.dhan_client:get_pnl:587 - P&L calculation completed successfully: 5 symbols, unrealized=‚Çπ334129.08\n", "record": {"elapsed": {"repr": "0:00:38.006299", "seconds": 38.006299}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 587, "message": "P&L calculation completed successfully: 5 symbols, unrealized=‚Çπ334129.08", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:01:56.298841+05:30", "timestamp": 1755783116.298841}}}
{"text": "2025-08-21 19:01:56.299 | DEBUG    | app.ws.live:emit_delta:408 - Emitted pnl delta: seq=42\n", "record": {"elapsed": {"repr": "0:00:38.007124", "seconds": 38.007124}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "emit_delta", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 408, "message": "Emitted pnl delta: seq=42", "module": "live", "name": "app.ws.live", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:01:56.299666+05:30", "timestamp": 1755783116.299666}}}
{"text": "2025-08-21 19:01:56.495 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:38.202696", "seconds": 38.202696}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:01:56.495238+05:30", "timestamp": 1755783116.495238}}}
{"text": "2025-08-21 19:01:56.496 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:38.203781", "seconds": 38.203781}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:01:56.496323+05:30", "timestamp": 1755783116.496323}}}
{"text": "2025-08-21 19:01:56.496 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:38.204441", "seconds": 38.204441}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:01:56.496983+05:30", "timestamp": 1755783116.496983}}}
{"text": "2025-08-21 19:01:56.498 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:38.205692", "seconds": 38.205692}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:01:56.498234+05:30", "timestamp": 1755783116.498234}}}
{"text": "2025-08-21 19:01:56.498 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:38.206439", "seconds": 38.206439}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:01:56.498981+05:30", "timestamp": 1755783116.498981}}}
{"text": "2025-08-21 19:01:56.499 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:38.206865", "seconds": 38.206865}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:01:56.499407+05:30", "timestamp": 1755783116.499407}}}
{"text": "2025-08-21 19:01:56.499 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:38.207406", "seconds": 38.207406}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:01:56.499948+05:30", "timestamp": 1755783116.499948}}}
{"text": "2025-08-21 19:01:56.500 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:38.207797", "seconds": 38.207797}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:01:56.500339+05:30", "timestamp": 1755783116.500339}}}
{"text": "2025-08-21 19:01:56.500 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:38.208253", "seconds": 38.208253}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:01:56.500795+05:30", "timestamp": 1755783116.500795}}}
{"text": "2025-08-21 19:01:56.501 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:38.208621", "seconds": 38.208621}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:01:56.501163+05:30", "timestamp": 1755783116.501163}}}
{"text": "2025-08-21 19:01:57.942 | DEBUG    | app.ws.live:emit_delta:408 - Emitted positions delta: seq=43\n", "record": {"elapsed": {"repr": "0:00:39.650168", "seconds": 39.650168}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "emit_delta", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 408, "message": "Emitted positions delta: seq=43", "module": "live", "name": "app.ws.live", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:01:57.942710+05:30", "timestamp": 1755783117.94271}}}
{"text": "2025-08-21 19:01:58.275 | INFO     | app.services.dhan_client:get_pnl:489 - Starting accurate P&L calculation\n", "record": {"elapsed": {"repr": "0:00:39.983109", "seconds": 39.983109}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 489, "message": "Starting accurate P&L calculation", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:01:58.275651+05:30", "timestamp": 1755783118.275651}}}
{"text": "2025-08-21 19:01:58.276 | INFO     | app.services.dhan_client:get_pnl:491 - Fetched 5 positions\n", "record": {"elapsed": {"repr": "0:00:39.983655", "seconds": 39.983655}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 491, "message": "Fetched 5 positions", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:01:58.276197+05:30", "timestamp": 1755783118.276197}}}
{"text": "2025-08-21 19:01:58.276 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for RELIANCE: unrealized=-508402.18, today=-508402.18\n", "record": {"elapsed": {"repr": "0:00:39.984143", "seconds": 39.984143}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for RELIANCE: unrealized=-508402.18, today=-508402.18", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:01:58.276685+05:30", "timestamp": 1755783118.276685}}}
{"text": "2025-08-21 19:01:58.277 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for TCS: unrealized=-39676.13, today=-39676.13\n", "record": {"elapsed": {"repr": "0:00:39.984630", "seconds": 39.98463}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for TCS: unrealized=-39676.13, today=-39676.13", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:01:58.277172+05:30", "timestamp": 1755783118.277172}}}
{"text": "2025-08-21 19:01:58.277 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for HDFC: unrealized=1337121.77, today=1337121.77\n", "record": {"elapsed": {"repr": "0:00:39.985122", "seconds": 39.985122}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for HDFC: unrealized=1337121.77, today=1337121.77", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:01:58.277664+05:30", "timestamp": 1755783118.277664}}}
{"text": "2025-08-21 19:01:58.278 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for INFY: unrealized=23384.75, today=23384.75\n", "record": {"elapsed": {"repr": "0:00:39.985896", "seconds": 39.985896}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for INFY: unrealized=23384.75, today=23384.75", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:01:58.278438+05:30", "timestamp": 1755783118.278438}}}
{"text": "2025-08-21 19:01:58.278 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for ICICIBANK: unrealized=-494235.01, today=-494235.01\n", "record": {"elapsed": {"repr": "0:00:39.986314", "seconds": 39.986314}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for ICICIBANK: unrealized=-494235.01, today=-494235.01", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:01:58.278856+05:30", "timestamp": 1755783118.278856}}}
{"text": "2025-08-21 19:01:58.279 | INFO     | app.services.dhan_client:get_pnl:545 - Calculated totals - realized: 0.0, unrealized: 318193.2, day: 318193.2\n", "record": {"elapsed": {"repr": "0:00:39.986775", "seconds": 39.986775}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 545, "message": "Calculated totals - realized: 0.0, unrealized: 318193.2, day: 318193.2", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:01:58.279317+05:30", "timestamp": 1755783118.279317}}}
{"text": "2025-08-21 19:01:58.279 | DEBUG    | app.services.dhan_client:get_pnl:554 - PnL consistency check passed: drift=‚Çπ0.00\n", "record": {"elapsed": {"repr": "0:00:39.987228", "seconds": 39.987228}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 554, "message": "PnL consistency check passed: drift=‚Çπ0.00", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:01:58.279770+05:30", "timestamp": 1755783118.27977}}}
{"text": "2025-08-21 19:01:58.280 | DEBUG    | app.services.dhan_client:get_pnl:558 - Creating PnLTotals...\n", "record": {"elapsed": {"repr": "0:00:39.987649", "seconds": 39.987649}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 558, "message": "Creating PnLTotals...", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:01:58.280191+05:30", "timestamp": 1755783118.280191}}}
{"text": "2025-08-21 19:01:58.281 | DEBUG    | app.services.dhan_client:get_pnl:565 - PnLTotals created successfully\n", "record": {"elapsed": {"repr": "0:00:39.988691", "seconds": 39.988691}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 565, "message": "PnLTotals created successfully", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:01:58.281233+05:30", "timestamp": 1755783118.281233}}}
{"text": "2025-08-21 19:01:58.281 | DEBUG    | app.services.dhan_client:get_pnl:574 - Creating PnL model...\n", "record": {"elapsed": {"repr": "0:00:39.989285", "seconds": 39.989285}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 574, "message": "Creating PnL model...", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:01:58.281827+05:30", "timestamp": 1755783118.281827}}}
{"text": "2025-08-21 19:01:58.282 | DEBUG    | app.services.dhan_client:get_pnl:575 - Model fields: totals=<class 'app.models.schemas.PnLTotals'>, perSymbol=5, updated_at=2025-08-21 19:01:58.276614+05:30, trading_day=2025-08-21\n", "record": {"elapsed": {"repr": "0:00:39.989666", "seconds": 39.989666}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 575, "message": "Model fields: totals=<class 'app.models.schemas.PnLTotals'>, perSymbol=5, updated_at=2025-08-21 19:01:58.276614+05:30, trading_day=2025-08-21", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:01:58.282208+05:30", "timestamp": 1755783118.282208}}}
{"text": "2025-08-21 19:01:58.282 | DEBUG    | app.services.dhan_client:get_pnl:584 - Created PnL model: totals=PnLTotals(realized=0.0, unrealized=318193.2, day=318193.2, currency='INR') per_symbol=[PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1727, avg=618.93, ltp=324.55, unrealized=-508402.18, today_pnl=-508402.18), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=167, avg=948.57, ltp=1186.15, unrealized=-39676.13, today_pnl=-39676.13), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=1347, avg=801.44, ltp=1794.11, unrealized=1337121.77, today_pnl=1337121.77), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=143, avg=1427.62, ltp=1264.09, unrealized=23384.75, today_pnl=23384.75), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=438, avg=1994.48, ltp=866.09, unrealized=-494235.01, today_pnl=-494235.01)] updated_at=datetime.datetime(2025, 8, 21, 19, 1, 58, 276614, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))) trading_day='2025-08-21'\n", "record": {"elapsed": {"repr": "0:00:39.990152", "seconds": 39.990152}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 584, "message": "Created PnL model: totals=PnLTotals(realized=0.0, unrealized=318193.2, day=318193.2, currency='INR') per_symbol=[PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1727, avg=618.93, ltp=324.55, unrealized=-508402.18, today_pnl=-508402.18), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=167, avg=948.57, ltp=1186.15, unrealized=-39676.13, today_pnl=-39676.13), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=1347, avg=801.44, ltp=1794.11, unrealized=1337121.77, today_pnl=1337121.77), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=143, avg=1427.62, ltp=1264.09, unrealized=23384.75, today_pnl=23384.75), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=438, avg=1994.48, ltp=866.09, unrealized=-494235.01, today_pnl=-494235.01)] updated_at=datetime.datetime(2025, 8, 21, 19, 1, 58, 276614, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))) trading_day='2025-08-21'", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:01:58.282694+05:30", "timestamp": 1755783118.282694}}}
{"text": "2025-08-21 19:01:58.283 | DEBUG    | app.services.dhan_client:get_pnl:585 - PnL model fields: {'totals': PnLTotals(realized=0.0, unrealized=318193.2, day=318193.2, currency='INR'), 'per_symbol': [PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1727, avg=618.93, ltp=324.55, unrealized=-508402.18, today_pnl=-508402.18), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=167, avg=948.57, ltp=1186.15, unrealized=-39676.13, today_pnl=-39676.13), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=1347, avg=801.44, ltp=1794.11, unrealized=1337121.77, today_pnl=1337121.77), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=143, avg=1427.62, ltp=1264.09, unrealized=23384.75, today_pnl=23384.75), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=438, avg=1994.48, ltp=866.09, unrealized=-494235.01, today_pnl=-494235.01)], 'updated_at': datetime.datetime(2025, 8, 21, 19, 1, 58, 276614, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))), 'trading_day': '2025-08-21'}\n", "record": {"elapsed": {"repr": "0:00:39.990644", "seconds": 39.990644}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 585, "message": "PnL model fields: {'totals': PnLTotals(realized=0.0, unrealized=318193.2, day=318193.2, currency='INR'), 'per_symbol': [PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1727, avg=618.93, ltp=324.55, unrealized=-508402.18, today_pnl=-508402.18), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=167, avg=948.57, ltp=1186.15, unrealized=-39676.13, today_pnl=-39676.13), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=1347, avg=801.44, ltp=1794.11, unrealized=1337121.77, today_pnl=1337121.77), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=143, avg=1427.62, ltp=1264.09, unrealized=23384.75, today_pnl=23384.75), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=438, avg=1994.48, ltp=866.09, unrealized=-494235.01, today_pnl=-494235.01)], 'updated_at': datetime.datetime(2025, 8, 21, 19, 1, 58, 276614, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))), 'trading_day': '2025-08-21'}", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:01:58.283186+05:30", "timestamp": 1755783118.283186}}}
{"text": "2025-08-21 19:01:58.283 | INFO     | app.services.dhan_client:get_pnl:587 - P&L calculation completed successfully: 5 symbols, unrealized=‚Çπ318193.20\n", "record": {"elapsed": {"repr": "0:00:39.991044", "seconds": 39.991044}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 587, "message": "P&L calculation completed successfully: 5 symbols, unrealized=‚Çπ318193.20", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:01:58.283586+05:30", "timestamp": 1755783118.283586}}}
{"text": "2025-08-21 19:01:58.284 | DEBUG    | app.ws.live:emit_delta:408 - Emitted pnl delta: seq=44\n", "record": {"elapsed": {"repr": "0:00:39.991590", "seconds": 39.99159}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "emit_delta", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 408, "message": "Emitted pnl delta: seq=44", "module": "live", "name": "app.ws.live", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:01:58.284132+05:30", "timestamp": 1755783118.284132}}}
{"text": "2025-08-21 19:01:58.501 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:40.209335", "seconds": 40.209335}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:01:58.501877+05:30", "timestamp": 1755783118.501877}}}
{"text": "2025-08-21 19:01:58.502 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:40.210175", "seconds": 40.210175}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:01:58.502717+05:30", "timestamp": 1755783118.502717}}}
{"text": "2025-08-21 19:01:58.503 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:40.211052", "seconds": 40.211052}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:01:58.503594+05:30", "timestamp": 1755783118.503594}}}
{"text": "2025-08-21 19:01:58.503 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:40.211442", "seconds": 40.211442}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:01:58.503984+05:30", "timestamp": 1755783118.503984}}}
{"text": "2025-08-21 19:01:58.504 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:40.211919", "seconds": 40.211919}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:01:58.504461+05:30", "timestamp": 1755783118.504461}}}
{"text": "2025-08-21 19:01:58.504 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:40.212429", "seconds": 40.212429}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:01:58.504971+05:30", "timestamp": 1755783118.504971}}}
{"text": "2025-08-21 19:01:58.505 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:40.213035", "seconds": 40.213035}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:01:58.505577+05:30", "timestamp": 1755783118.505577}}}
{"text": "2025-08-21 19:01:58.506 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:40.213922", "seconds": 40.213922}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:01:58.506464+05:30", "timestamp": 1755783118.506464}}}
{"text": "2025-08-21 19:01:58.507 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:40.214589", "seconds": 40.214589}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:01:58.507131+05:30", "timestamp": 1755783118.507131}}}
{"text": "2025-08-21 19:01:58.507 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:40.215059", "seconds": 40.215059}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:01:58.507601+05:30", "timestamp": 1755783118.507601}}}
{"text": "2025-08-21 19:01:59.741 | DEBUG    | app.ws.live:emit_delta:408 - Emitted positions delta: seq=45\n", "record": {"elapsed": {"repr": "0:00:41.449246", "seconds": 41.449246}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "emit_delta", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 408, "message": "Emitted positions delta: seq=45", "module": "live", "name": "app.ws.live", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:01:59.741788+05:30", "timestamp": 1755783119.741788}}}
{"text": "2025-08-21 19:02:00.265 | INFO     | app.services.dhan_client:get_pnl:489 - Starting accurate P&L calculation\n", "record": {"elapsed": {"repr": "0:00:41.972651", "seconds": 41.972651}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 489, "message": "Starting accurate P&L calculation", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:02:00.265193+05:30", "timestamp": 1755783120.265193}}}
{"text": "2025-08-21 19:02:00.265 | INFO     | app.services.dhan_client:get_pnl:491 - Fetched 5 positions\n", "record": {"elapsed": {"repr": "0:00:41.973273", "seconds": 41.973273}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 491, "message": "Fetched 5 positions", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:02:00.265815+05:30", "timestamp": 1755783120.265815}}}
{"text": "2025-08-21 19:02:00.266 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for RELIANCE: unrealized=-506547.29, today=-506547.29\n", "record": {"elapsed": {"repr": "0:00:41.973666", "seconds": 41.973666}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for RELIANCE: unrealized=-506547.29, today=-506547.29", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:02:00.266208+05:30", "timestamp": 1755783120.266208}}}
{"text": "2025-08-21 19:02:00.266 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for TCS: unrealized=-42277.24, today=-42277.24\n", "record": {"elapsed": {"repr": "0:00:41.974076", "seconds": 41.974076}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for TCS: unrealized=-42277.24, today=-42277.24", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:02:00.266618+05:30", "timestamp": 1755783120.266618}}}
{"text": "2025-08-21 19:02:00.267 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for HDFC: unrealized=1329397.0, today=1329397.0\n", "record": {"elapsed": {"repr": "0:00:41.974483", "seconds": 41.974483}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for HDFC: unrealized=1329397.0, today=1329397.0", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:02:00.267025+05:30", "timestamp": 1755783120.267025}}}
{"text": "2025-08-21 19:02:00.267 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for INFY: unrealized=25224.24, today=25224.24\n", "record": {"elapsed": {"repr": "0:00:41.974982", "seconds": 41.974982}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for INFY: unrealized=25224.24, today=25224.24", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:02:00.267524+05:30", "timestamp": 1755783120.267524}}}
{"text": "2025-08-21 19:02:00.268 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for ICICIBANK: unrealized=-488400.71, today=-488400.71\n", "record": {"elapsed": {"repr": "0:00:41.975641", "seconds": 41.975641}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for ICICIBANK: unrealized=-488400.71, today=-488400.71", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:02:00.268183+05:30", "timestamp": 1755783120.268183}}}
{"text": "2025-08-21 19:02:00.269 | INFO     | app.services.dhan_client:get_pnl:545 - Calculated totals - realized: 0.0, unrealized: 317396.0, day: 317396.0\n", "record": {"elapsed": {"repr": "0:00:41.976551", "seconds": 41.976551}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 545, "message": "Calculated totals - realized: 0.0, unrealized: 317396.0, day: 317396.0", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:02:00.269093+05:30", "timestamp": 1755783120.269093}}}
{"text": "2025-08-21 19:02:00.269 | DEBUG    | app.services.dhan_client:get_pnl:554 - PnL consistency check passed: drift=‚Çπ0.00\n", "record": {"elapsed": {"repr": "0:00:41.977079", "seconds": 41.977079}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 554, "message": "PnL consistency check passed: drift=‚Çπ0.00", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:02:00.269621+05:30", "timestamp": 1755783120.269621}}}
{"text": "2025-08-21 19:02:00.270 | DEBUG    | app.services.dhan_client:get_pnl:558 - Creating PnLTotals...\n", "record": {"elapsed": {"repr": "0:00:41.977592", "seconds": 41.977592}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 558, "message": "Creating PnLTotals...", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:02:00.270134+05:30", "timestamp": 1755783120.270134}}}
{"text": "2025-08-21 19:02:00.270 | DEBUG    | app.services.dhan_client:get_pnl:565 - PnLTotals created successfully\n", "record": {"elapsed": {"repr": "0:00:41.978093", "seconds": 41.978093}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 565, "message": "PnLTotals created successfully", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:02:00.270635+05:30", "timestamp": 1755783120.270635}}}
{"text": "2025-08-21 19:02:00.271 | DEBUG    | app.services.dhan_client:get_pnl:574 - Creating PnL model...\n", "record": {"elapsed": {"repr": "0:00:41.978845", "seconds": 41.978845}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 574, "message": "Creating PnL model...", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:02:00.271387+05:30", "timestamp": 1755783120.271387}}}
{"text": "2025-08-21 19:02:00.272 | DEBUG    | app.services.dhan_client:get_pnl:575 - Model fields: totals=<class 'app.models.schemas.PnLTotals'>, perSymbol=5, updated_at=2025-08-21 19:02:00.266155+05:30, trading_day=2025-08-21\n", "record": {"elapsed": {"repr": "0:00:41.979779", "seconds": 41.979779}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 575, "message": "Model fields: totals=<class 'app.models.schemas.PnLTotals'>, perSymbol=5, updated_at=2025-08-21 19:02:00.266155+05:30, trading_day=2025-08-21", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:02:00.272321+05:30", "timestamp": 1755783120.272321}}}
{"text": "2025-08-21 19:02:00.273 | DEBUG    | app.services.dhan_client:get_pnl:584 - Created PnL model: totals=PnLTotals(realized=0.0, unrealized=317396.0, day=317396.0, currency='INR') per_symbol=[PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1727, avg=618.93, ltp=325.62, unrealized=-506547.29, today_pnl=-506547.29), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=167, avg=948.57, ltp=1201.73, unrealized=-42277.24, today_pnl=-42277.24), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=1347, avg=801.44, ltp=1788.37, unrealized=1329397.0, today_pnl=1329397.0), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=143, avg=1427.62, ltp=1251.23, unrealized=25224.24, today_pnl=25224.24), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=438, avg=1994.48, ltp=879.41, unrealized=-488400.71, today_pnl=-488400.71)] updated_at=datetime.datetime(2025, 8, 21, 19, 2, 0, 266155, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))) trading_day='2025-08-21'\n", "record": {"elapsed": {"repr": "0:00:41.980575", "seconds": 41.980575}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 584, "message": "Created PnL model: totals=PnLTotals(realized=0.0, unrealized=317396.0, day=317396.0, currency='INR') per_symbol=[PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1727, avg=618.93, ltp=325.62, unrealized=-506547.29, today_pnl=-506547.29), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=167, avg=948.57, ltp=1201.73, unrealized=-42277.24, today_pnl=-42277.24), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=1347, avg=801.44, ltp=1788.37, unrealized=1329397.0, today_pnl=1329397.0), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=143, avg=1427.62, ltp=1251.23, unrealized=25224.24, today_pnl=25224.24), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=438, avg=1994.48, ltp=879.41, unrealized=-488400.71, today_pnl=-488400.71)] updated_at=datetime.datetime(2025, 8, 21, 19, 2, 0, 266155, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))) trading_day='2025-08-21'", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:02:00.273117+05:30", "timestamp": 1755783120.273117}}}
{"text": "2025-08-21 19:02:00.273 | DEBUG    | app.services.dhan_client:get_pnl:585 - PnL model fields: {'totals': PnLTotals(realized=0.0, unrealized=317396.0, day=317396.0, currency='INR'), 'per_symbol': [PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1727, avg=618.93, ltp=325.62, unrealized=-506547.29, today_pnl=-506547.29), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=167, avg=948.57, ltp=1201.73, unrealized=-42277.24, today_pnl=-42277.24), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=1347, avg=801.44, ltp=1788.37, unrealized=1329397.0, today_pnl=1329397.0), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=143, avg=1427.62, ltp=1251.23, unrealized=25224.24, today_pnl=25224.24), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=438, avg=1994.48, ltp=879.41, unrealized=-488400.71, today_pnl=-488400.71)], 'updated_at': datetime.datetime(2025, 8, 21, 19, 2, 0, 266155, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))), 'trading_day': '2025-08-21'}\n", "record": {"elapsed": {"repr": "0:00:41.981166", "seconds": 41.981166}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 585, "message": "PnL model fields: {'totals': PnLTotals(realized=0.0, unrealized=317396.0, day=317396.0, currency='INR'), 'per_symbol': [PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1727, avg=618.93, ltp=325.62, unrealized=-506547.29, today_pnl=-506547.29), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=167, avg=948.57, ltp=1201.73, unrealized=-42277.24, today_pnl=-42277.24), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=1347, avg=801.44, ltp=1788.37, unrealized=1329397.0, today_pnl=1329397.0), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=143, avg=1427.62, ltp=1251.23, unrealized=25224.24, today_pnl=25224.24), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=438, avg=1994.48, ltp=879.41, unrealized=-488400.71, today_pnl=-488400.71)], 'updated_at': datetime.datetime(2025, 8, 21, 19, 2, 0, 266155, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))), 'trading_day': '2025-08-21'}", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:02:00.273708+05:30", "timestamp": 1755783120.273708}}}
{"text": "2025-08-21 19:02:00.274 | INFO     | app.services.dhan_client:get_pnl:587 - P&L calculation completed successfully: 5 symbols, unrealized=‚Çπ317396.00\n", "record": {"elapsed": {"repr": "0:00:41.981769", "seconds": 41.981769}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 587, "message": "P&L calculation completed successfully: 5 symbols, unrealized=‚Çπ317396.00", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:02:00.274311+05:30", "timestamp": 1755783120.274311}}}
{"text": "2025-08-21 19:02:00.275 | DEBUG    | app.ws.live:emit_delta:408 - Emitted pnl delta: seq=46\n", "record": {"elapsed": {"repr": "0:00:41.982491", "seconds": 41.982491}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "emit_delta", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 408, "message": "Emitted pnl delta: seq=46", "module": "live", "name": "app.ws.live", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:02:00.275033+05:30", "timestamp": 1755783120.275033}}}
{"text": "2025-08-21 19:02:00.508 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:42.215595", "seconds": 42.215595}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:02:00.508137+05:30", "timestamp": 1755783120.508137}}}
{"text": "2025-08-21 19:02:00.508 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:42.216207", "seconds": 42.216207}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:02:00.508749+05:30", "timestamp": 1755783120.508749}}}
{"text": "2025-08-21 19:02:00.509 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:42.216657", "seconds": 42.216657}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:02:00.509199+05:30", "timestamp": 1755783120.509199}}}
{"text": "2025-08-21 19:02:00.509 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:42.217256", "seconds": 42.217256}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:02:00.509798+05:30", "timestamp": 1755783120.509798}}}
{"text": "2025-08-21 19:02:00.510 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:42.218062", "seconds": 42.218062}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:02:00.510604+05:30", "timestamp": 1755783120.510604}}}
{"text": "2025-08-21 19:02:00.510 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:42.218445", "seconds": 42.218445}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:02:00.510987+05:30", "timestamp": 1755783120.510987}}}
{"text": "2025-08-21 19:02:00.511 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:42.218796", "seconds": 42.218796}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:02:00.511338+05:30", "timestamp": 1755783120.511338}}}
{"text": "2025-08-21 19:02:00.511 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:42.219151", "seconds": 42.219151}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:02:00.511693+05:30", "timestamp": 1755783120.511693}}}
{"text": "2025-08-21 19:02:00.512 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:42.219512", "seconds": 42.219512}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:02:00.512054+05:30", "timestamp": 1755783120.512054}}}
{"text": "2025-08-21 19:02:00.512 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:42.219969", "seconds": 42.219969}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:02:00.512511+05:30", "timestamp": 1755783120.512511}}}
{"text": "2025-08-21 19:02:01.440 | DEBUG    | app.ws.live:emit_delta:408 - Emitted positions delta: seq=47\n", "record": {"elapsed": {"repr": "0:00:43.148130", "seconds": 43.14813}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "emit_delta", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 408, "message": "Emitted positions delta: seq=47", "module": "live", "name": "app.ws.live", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:02:01.440672+05:30", "timestamp": 1755783121.440672}}}
{"text": "2025-08-21 19:02:02.240 | INFO     | app.services.dhan_client:get_pnl:489 - Starting accurate P&L calculation\n", "record": {"elapsed": {"repr": "0:00:43.947668", "seconds": 43.947668}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 489, "message": "Starting accurate P&L calculation", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:02:02.240210+05:30", "timestamp": 1755783122.24021}}}
{"text": "2025-08-21 19:02:02.240 | INFO     | app.services.dhan_client:get_pnl:491 - Fetched 5 positions\n", "record": {"elapsed": {"repr": "0:00:43.948248", "seconds": 43.948248}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 491, "message": "Fetched 5 positions", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:02:02.240790+05:30", "timestamp": 1755783122.24079}}}
{"text": "2025-08-21 19:02:02.241 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for RELIANCE: unrealized=-508774.43, today=-508774.43\n", "record": {"elapsed": {"repr": "0:00:43.948885", "seconds": 43.948885}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for RELIANCE: unrealized=-508774.43, today=-508774.43", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:02:02.241427+05:30", "timestamp": 1755783122.241427}}}
{"text": "2025-08-21 19:02:02.241 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for TCS: unrealized=-45182.32, today=-45182.32\n", "record": {"elapsed": {"repr": "0:00:43.949376", "seconds": 43.949376}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for TCS: unrealized=-45182.32, today=-45182.32", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:02:02.241918+05:30", "timestamp": 1755783122.241918}}}
{"text": "2025-08-21 19:02:02.242 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for HDFC: unrealized=1313568.83, today=1313568.83\n", "record": {"elapsed": {"repr": "0:00:43.950134", "seconds": 43.950134}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for HDFC: unrealized=1313568.83, today=1313568.83", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:02:02.242676+05:30", "timestamp": 1755783122.242676}}}
{"text": "2025-08-21 19:02:02.243 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for INFY: unrealized=25263.15, today=25263.15\n", "record": {"elapsed": {"repr": "0:00:43.950839", "seconds": 43.950839}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for INFY: unrealized=25263.15, today=25263.15", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:02:02.243381+05:30", "timestamp": 1755783122.243381}}}
{"text": "2025-08-21 19:02:02.243 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for ICICIBANK: unrealized=-484071.17, today=-484071.17\n", "record": {"elapsed": {"repr": "0:00:43.951399", "seconds": 43.951399}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for ICICIBANK: unrealized=-484071.17, today=-484071.17", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:02:02.243941+05:30", "timestamp": 1755783122.243941}}}
{"text": "2025-08-21 19:02:02.244 | INFO     | app.services.dhan_client:get_pnl:545 - Calculated totals - realized: 0.0, unrealized: 300804.06, day: 300804.06\n", "record": {"elapsed": {"repr": "0:00:43.951886", "seconds": 43.951886}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 545, "message": "Calculated totals - realized: 0.0, unrealized: 300804.06, day: 300804.06", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:02:02.244428+05:30", "timestamp": 1755783122.244428}}}
{"text": "2025-08-21 19:02:02.245 | DEBUG    | app.services.dhan_client:get_pnl:554 - PnL consistency check passed: drift=‚Çπ0.00\n", "record": {"elapsed": {"repr": "0:00:43.952503", "seconds": 43.952503}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 554, "message": "PnL consistency check passed: drift=‚Çπ0.00", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:02:02.245045+05:30", "timestamp": 1755783122.245045}}}
{"text": "2025-08-21 19:02:02.245 | DEBUG    | app.services.dhan_client:get_pnl:558 - Creating PnLTotals...\n", "record": {"elapsed": {"repr": "0:00:43.953317", "seconds": 43.953317}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 558, "message": "Creating PnLTotals...", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:02:02.245859+05:30", "timestamp": 1755783122.245859}}}
{"text": "2025-08-21 19:02:02.246 | DEBUG    | app.services.dhan_client:get_pnl:565 - PnLTotals created successfully\n", "record": {"elapsed": {"repr": "0:00:43.954057", "seconds": 43.954057}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 565, "message": "PnLTotals created successfully", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:02:02.246599+05:30", "timestamp": 1755783122.246599}}}
{"text": "2025-08-21 19:02:02.247 | DEBUG    | app.services.dhan_client:get_pnl:574 - Creating PnL model...\n", "record": {"elapsed": {"repr": "0:00:43.954466", "seconds": 43.954466}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 574, "message": "Creating PnL model...", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:02:02.247008+05:30", "timestamp": 1755783122.247008}}}
{"text": "2025-08-21 19:02:02.247 | DEBUG    | app.services.dhan_client:get_pnl:575 - Model fields: totals=<class 'app.models.schemas.PnLTotals'>, perSymbol=5, updated_at=2025-08-21 19:02:02.241359+05:30, trading_day=2025-08-21\n", "record": {"elapsed": {"repr": "0:00:43.954858", "seconds": 43.954858}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 575, "message": "Model fields: totals=<class 'app.models.schemas.PnLTotals'>, perSymbol=5, updated_at=2025-08-21 19:02:02.241359+05:30, trading_day=2025-08-21", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:02:02.247400+05:30", "timestamp": 1755783122.2474}}}
{"text": "2025-08-21 19:02:02.247 | DEBUG    | app.services.dhan_client:get_pnl:584 - Created PnL model: totals=PnLTotals(realized=0.0, unrealized=300804.06, day=300804.06, currency='INR') per_symbol=[PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1727, avg=618.93, ltp=324.33, unrealized=-508774.43, today_pnl=-508774.43), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=167, avg=948.57, ltp=1219.12, unrealized=-45182.32, today_pnl=-45182.32), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=1347, avg=801.44, ltp=1776.62, unrealized=1313568.83, today_pnl=1313568.83), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=143, avg=1427.62, ltp=1250.95, unrealized=25263.15, today_pnl=25263.15), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=438, avg=1994.48, ltp=889.29, unrealized=-484071.17, today_pnl=-484071.17)] updated_at=datetime.datetime(2025, 8, 21, 19, 2, 2, 241359, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))) trading_day='2025-08-21'\n", "record": {"elapsed": {"repr": "0:00:43.955373", "seconds": 43.955373}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 584, "message": "Created PnL model: totals=PnLTotals(realized=0.0, unrealized=300804.06, day=300804.06, currency='INR') per_symbol=[PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1727, avg=618.93, ltp=324.33, unrealized=-508774.43, today_pnl=-508774.43), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=167, avg=948.57, ltp=1219.12, unrealized=-45182.32, today_pnl=-45182.32), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=1347, avg=801.44, ltp=1776.62, unrealized=1313568.83, today_pnl=1313568.83), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=143, avg=1427.62, ltp=1250.95, unrealized=25263.15, today_pnl=25263.15), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=438, avg=1994.48, ltp=889.29, unrealized=-484071.17, today_pnl=-484071.17)] updated_at=datetime.datetime(2025, 8, 21, 19, 2, 2, 241359, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))) trading_day='2025-08-21'", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:02:02.247915+05:30", "timestamp": 1755783122.247915}}}
{"text": "2025-08-21 19:02:02.248 | DEBUG    | app.services.dhan_client:get_pnl:585 - PnL model fields: {'totals': PnLTotals(realized=0.0, unrealized=300804.06, day=300804.06, currency='INR'), 'per_symbol': [PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1727, avg=618.93, ltp=324.33, unrealized=-508774.43, today_pnl=-508774.43), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=167, avg=948.57, ltp=1219.12, unrealized=-45182.32, today_pnl=-45182.32), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=1347, avg=801.44, ltp=1776.62, unrealized=1313568.83, today_pnl=1313568.83), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=143, avg=1427.62, ltp=1250.95, unrealized=25263.15, today_pnl=25263.15), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=438, avg=1994.48, ltp=889.29, unrealized=-484071.17, today_pnl=-484071.17)], 'updated_at': datetime.datetime(2025, 8, 21, 19, 2, 2, 241359, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))), 'trading_day': '2025-08-21'}\n", "record": {"elapsed": {"repr": "0:00:43.955911", "seconds": 43.955911}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 585, "message": "PnL model fields: {'totals': PnLTotals(realized=0.0, unrealized=300804.06, day=300804.06, currency='INR'), 'per_symbol': [PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1727, avg=618.93, ltp=324.33, unrealized=-508774.43, today_pnl=-508774.43), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=167, avg=948.57, ltp=1219.12, unrealized=-45182.32, today_pnl=-45182.32), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=1347, avg=801.44, ltp=1776.62, unrealized=1313568.83, today_pnl=1313568.83), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=143, avg=1427.62, ltp=1250.95, unrealized=25263.15, today_pnl=25263.15), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=438, avg=1994.48, ltp=889.29, unrealized=-484071.17, today_pnl=-484071.17)], 'updated_at': datetime.datetime(2025, 8, 21, 19, 2, 2, 241359, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))), 'trading_day': '2025-08-21'}", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:02:02.248453+05:30", "timestamp": 1755783122.248453}}}
{"text": "2025-08-21 19:02:02.249 | INFO     | app.services.dhan_client:get_pnl:587 - P&L calculation completed successfully: 5 symbols, unrealized=‚Çπ300804.06\n", "record": {"elapsed": {"repr": "0:00:43.956566", "seconds": 43.956566}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 587, "message": "P&L calculation completed successfully: 5 symbols, unrealized=‚Çπ300804.06", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:02:02.249108+05:30", "timestamp": 1755783122.249108}}}
{"text": "2025-08-21 19:02:02.249 | DEBUG    | app.ws.live:emit_delta:408 - Emitted pnl delta: seq=48\n", "record": {"elapsed": {"repr": "0:00:43.957300", "seconds": 43.9573}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "emit_delta", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 408, "message": "Emitted pnl delta: seq=48", "module": "live", "name": "app.ws.live", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:02:02.249842+05:30", "timestamp": 1755783122.249842}}}
{"text": "2025-08-21 19:02:02.513 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:44.221000", "seconds": 44.221}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:02:02.513542+05:30", "timestamp": 1755783122.513542}}}
{"text": "2025-08-21 19:02:02.514 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:44.221579", "seconds": 44.221579}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:02:02.514121+05:30", "timestamp": 1755783122.514121}}}
{"text": "2025-08-21 19:02:02.514 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:44.221943", "seconds": 44.221943}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:02:02.514485+05:30", "timestamp": 1755783122.514485}}}
{"text": "2025-08-21 19:02:02.514 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:44.222293", "seconds": 44.222293}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:02:02.514835+05:30", "timestamp": 1755783122.514835}}}
{"text": "2025-08-21 19:02:02.515 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:44.222679", "seconds": 44.222679}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:02:02.515221+05:30", "timestamp": 1755783122.515221}}}
{"text": "2025-08-21 19:02:02.515 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:44.223012", "seconds": 44.223012}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:02:02.515554+05:30", "timestamp": 1755783122.515554}}}
{"text": "2025-08-21 19:02:02.515 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:44.223423", "seconds": 44.223423}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:02:02.515965+05:30", "timestamp": 1755783122.515965}}}
{"text": "2025-08-21 19:02:02.516 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:44.223897", "seconds": 44.223897}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:02:02.516439+05:30", "timestamp": 1755783122.516439}}}
{"text": "2025-08-21 19:02:02.517 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:44.224477", "seconds": 44.224477}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:02:02.517019+05:30", "timestamp": 1755783122.517019}}}
{"text": "2025-08-21 19:02:02.517 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:44.225234", "seconds": 44.225234}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:02:02.517776+05:30", "timestamp": 1755783122.517776}}}
{"text": "2025-08-21 19:02:02.993 | DEBUG    | app.ws.live:emit_delta:408 - Emitted positions delta: seq=49\n", "record": {"elapsed": {"repr": "0:00:44.700867", "seconds": 44.700867}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "emit_delta", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 408, "message": "Emitted positions delta: seq=49", "module": "live", "name": "app.ws.live", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:02:02.993409+05:30", "timestamp": 1755783122.993409}}}
{"text": "2025-08-21 19:02:03.423 | DEBUG    | app.ws.live:emit_delta:408 - Emitted trades delta: seq=50\n", "record": {"elapsed": {"repr": "0:00:45.130778", "seconds": 45.130778}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "emit_delta", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 408, "message": "Emitted trades delta: seq=50", "module": "live", "name": "app.ws.live", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:02:03.423320+05:30", "timestamp": 1755783123.42332}}}
{"text": "2025-08-21 19:02:04.205 | INFO     | app.services.dhan_client:get_pnl:489 - Starting accurate P&L calculation\n", "record": {"elapsed": {"repr": "0:00:45.913113", "seconds": 45.913113}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 489, "message": "Starting accurate P&L calculation", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:02:04.205655+05:30", "timestamp": 1755783124.205655}}}
{"text": "2025-08-21 19:02:04.206 | INFO     | app.services.dhan_client:get_pnl:491 - Fetched 5 positions\n", "record": {"elapsed": {"repr": "0:00:45.913697", "seconds": 45.913697}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 491, "message": "Fetched 5 positions", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:02:04.206239+05:30", "timestamp": 1755783124.206239}}}
{"text": "2025-08-21 19:02:04.206 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for RELIANCE: unrealized=-499173.24, today=-499173.24\n", "record": {"elapsed": {"repr": "0:00:45.914147", "seconds": 45.914147}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for RELIANCE: unrealized=-499173.24, today=-499173.24", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:02:04.206689+05:30", "timestamp": 1755783124.206689}}}
{"text": "2025-08-21 19:02:04.207 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for TCS: unrealized=-43992.67, today=-43992.67\n", "record": {"elapsed": {"repr": "0:00:45.914711", "seconds": 45.914711}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for TCS: unrealized=-43992.67, today=-43992.67", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:02:04.207253+05:30", "timestamp": 1755783124.207253}}}
{"text": "2025-08-21 19:02:04.208 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for HDFC: unrealized=1326690.6, today=1326690.6\n", "record": {"elapsed": {"repr": "0:00:45.915610", "seconds": 45.91561}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for HDFC: unrealized=1326690.6, today=1326690.6", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:02:04.208152+05:30", "timestamp": 1755783124.208152}}}
{"text": "2025-08-21 19:02:04.208 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for INFY: unrealized=25617.28, today=25617.28\n", "record": {"elapsed": {"repr": "0:00:45.916322", "seconds": 45.916322}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for INFY: unrealized=25617.28, today=25617.28", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:02:04.208864+05:30", "timestamp": 1755783124.208864}}}
{"text": "2025-08-21 19:02:04.209 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for ICICIBANK: unrealized=-476835.36, today=-476835.36\n", "record": {"elapsed": {"repr": "0:00:45.916810", "seconds": 45.91681}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for ICICIBANK: unrealized=-476835.36, today=-476835.36", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:02:04.209352+05:30", "timestamp": 1755783124.209352}}}
{"text": "2025-08-21 19:02:04.209 | INFO     | app.services.dhan_client:get_pnl:545 - Calculated totals - realized: 0.0, unrealized: 332306.61, day: 332306.61\n", "record": {"elapsed": {"repr": "0:00:45.917272", "seconds": 45.917272}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 545, "message": "Calculated totals - realized: 0.0, unrealized: 332306.61, day: 332306.61", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:02:04.209814+05:30", "timestamp": 1755783124.209814}}}
{"text": "2025-08-21 19:02:04.210 | DEBUG    | app.services.dhan_client:get_pnl:554 - PnL consistency check passed: drift=‚Çπ0.00\n", "record": {"elapsed": {"repr": "0:00:45.917837", "seconds": 45.917837}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 554, "message": "PnL consistency check passed: drift=‚Çπ0.00", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:02:04.210379+05:30", "timestamp": 1755783124.210379}}}
{"text": "2025-08-21 19:02:04.211 | DEBUG    | app.services.dhan_client:get_pnl:558 - Creating PnLTotals...\n", "record": {"elapsed": {"repr": "0:00:45.918583", "seconds": 45.918583}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 558, "message": "Creating PnLTotals...", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:02:04.211125+05:30", "timestamp": 1755783124.211125}}}
{"text": "2025-08-21 19:02:04.211 | DEBUG    | app.services.dhan_client:get_pnl:565 - PnLTotals created successfully\n", "record": {"elapsed": {"repr": "0:00:45.919412", "seconds": 45.919412}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 565, "message": "PnLTotals created successfully", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:02:04.211954+05:30", "timestamp": 1755783124.211954}}}
{"text": "2025-08-21 19:02:04.212 | DEBUG    | app.services.dhan_client:get_pnl:574 - Creating PnL model...\n", "record": {"elapsed": {"repr": "0:00:45.919892", "seconds": 45.919892}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 574, "message": "Creating PnL model...", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:02:04.212434+05:30", "timestamp": 1755783124.212434}}}
{"text": "2025-08-21 19:02:04.212 | DEBUG    | app.services.dhan_client:get_pnl:575 - Model fields: totals=<class 'app.models.schemas.PnLTotals'>, perSymbol=5, updated_at=2025-08-21 19:02:04.206617+05:30, trading_day=2025-08-21\n", "record": {"elapsed": {"repr": "0:00:45.920368", "seconds": 45.920368}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 575, "message": "Model fields: totals=<class 'app.models.schemas.PnLTotals'>, perSymbol=5, updated_at=2025-08-21 19:02:04.206617+05:30, trading_day=2025-08-21", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:02:04.212910+05:30", "timestamp": 1755783124.21291}}}
{"text": "2025-08-21 19:02:04.213 | DEBUG    | app.services.dhan_client:get_pnl:584 - Created PnL model: totals=PnLTotals(realized=0.0, unrealized=332306.61, day=332306.61, currency='INR') per_symbol=[PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1727, avg=618.93, ltp=329.89, unrealized=-499173.24, today_pnl=-499173.24), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=167, avg=948.57, ltp=1212.0, unrealized=-43992.67, today_pnl=-43992.67), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=1347, avg=801.44, ltp=1786.36, unrealized=1326690.6, today_pnl=1326690.6), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=143, avg=1427.62, ltp=1248.48, unrealized=25617.28, today_pnl=25617.28), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=438, avg=1994.48, ltp=905.81, unrealized=-476835.36, today_pnl=-476835.36)] updated_at=datetime.datetime(2025, 8, 21, 19, 2, 4, 206617, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))) trading_day='2025-08-21'\n", "record": {"elapsed": {"repr": "0:00:45.921001", "seconds": 45.921001}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 584, "message": "Created PnL model: totals=PnLTotals(realized=0.0, unrealized=332306.61, day=332306.61, currency='INR') per_symbol=[PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1727, avg=618.93, ltp=329.89, unrealized=-499173.24, today_pnl=-499173.24), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=167, avg=948.57, ltp=1212.0, unrealized=-43992.67, today_pnl=-43992.67), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=1347, avg=801.44, ltp=1786.36, unrealized=1326690.6, today_pnl=1326690.6), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=143, avg=1427.62, ltp=1248.48, unrealized=25617.28, today_pnl=25617.28), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=438, avg=1994.48, ltp=905.81, unrealized=-476835.36, today_pnl=-476835.36)] updated_at=datetime.datetime(2025, 8, 21, 19, 2, 4, 206617, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))) trading_day='2025-08-21'", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:02:04.213543+05:30", "timestamp": 1755783124.213543}}}
{"text": "2025-08-21 19:02:04.214 | DEBUG    | app.services.dhan_client:get_pnl:585 - PnL model fields: {'totals': PnLTotals(realized=0.0, unrealized=332306.61, day=332306.61, currency='INR'), 'per_symbol': [PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1727, avg=618.93, ltp=329.89, unrealized=-499173.24, today_pnl=-499173.24), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=167, avg=948.57, ltp=1212.0, unrealized=-43992.67, today_pnl=-43992.67), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=1347, avg=801.44, ltp=1786.36, unrealized=1326690.6, today_pnl=1326690.6), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=143, avg=1427.62, ltp=1248.48, unrealized=25617.28, today_pnl=25617.28), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=438, avg=1994.48, ltp=905.81, unrealized=-476835.36, today_pnl=-476835.36)], 'updated_at': datetime.datetime(2025, 8, 21, 19, 2, 4, 206617, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))), 'trading_day': '2025-08-21'}\n", "record": {"elapsed": {"repr": "0:00:45.921663", "seconds": 45.921663}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 585, "message": "PnL model fields: {'totals': PnLTotals(realized=0.0, unrealized=332306.61, day=332306.61, currency='INR'), 'per_symbol': [PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1727, avg=618.93, ltp=329.89, unrealized=-499173.24, today_pnl=-499173.24), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=167, avg=948.57, ltp=1212.0, unrealized=-43992.67, today_pnl=-43992.67), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=1347, avg=801.44, ltp=1786.36, unrealized=1326690.6, today_pnl=1326690.6), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=143, avg=1427.62, ltp=1248.48, unrealized=25617.28, today_pnl=25617.28), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=438, avg=1994.48, ltp=905.81, unrealized=-476835.36, today_pnl=-476835.36)], 'updated_at': datetime.datetime(2025, 8, 21, 19, 2, 4, 206617, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))), 'trading_day': '2025-08-21'}", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:02:04.214205+05:30", "timestamp": 1755783124.214205}}}
{"text": "2025-08-21 19:02:04.214 | INFO     | app.services.dhan_client:get_pnl:587 - P&L calculation completed successfully: 5 symbols, unrealized=‚Çπ332306.61\n", "record": {"elapsed": {"repr": "0:00:45.922316", "seconds": 45.922316}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 587, "message": "P&L calculation completed successfully: 5 symbols, unrealized=‚Çπ332306.61", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:02:04.214858+05:30", "timestamp": 1755783124.214858}}}
{"text": "2025-08-21 19:02:04.215 | DEBUG    | app.ws.live:emit_delta:408 - Emitted pnl delta: seq=51\n", "record": {"elapsed": {"repr": "0:00:45.923130", "seconds": 45.92313}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "emit_delta", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 408, "message": "Emitted pnl delta: seq=51", "module": "live", "name": "app.ws.live", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:02:04.215672+05:30", "timestamp": 1755783124.215672}}}
{"text": "2025-08-21 19:02:04.518 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:46.226186", "seconds": 46.226186}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:02:04.518728+05:30", "timestamp": 1755783124.518728}}}
{"text": "2025-08-21 19:02:04.519 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:46.227111", "seconds": 46.227111}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:02:04.519653+05:30", "timestamp": 1755783124.519653}}}
{"text": "2025-08-21 19:02:04.520 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:46.227632", "seconds": 46.227632}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:02:04.520174+05:30", "timestamp": 1755783124.520174}}}
{"text": "2025-08-21 19:02:04.520 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:46.228080", "seconds": 46.22808}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:02:04.520622+05:30", "timestamp": 1755783124.520622}}}
{"text": "2025-08-21 19:02:04.521 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:46.228598", "seconds": 46.228598}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:02:04.521140+05:30", "timestamp": 1755783124.52114}}}
{"text": "2025-08-21 19:02:04.521 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:46.228954", "seconds": 46.228954}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:02:04.521496+05:30", "timestamp": 1755783124.521496}}}
{"text": "2025-08-21 19:02:04.521 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:46.229344", "seconds": 46.229344}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:02:04.521886+05:30", "timestamp": 1755783124.521886}}}
{"text": "2025-08-21 19:02:04.522 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:46.229805", "seconds": 46.229805}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:02:04.522347+05:30", "timestamp": 1755783124.522347}}}
{"text": "2025-08-21 19:02:04.522 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:46.230155", "seconds": 46.230155}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:02:04.522697+05:30", "timestamp": 1755783124.522697}}}
{"text": "2025-08-21 19:02:04.523 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:46.230591", "seconds": 46.230591}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:02:04.523133+05:30", "timestamp": 1755783124.523133}}}
{"text": "2025-08-21 19:02:04.829 | DEBUG    | app.ws.live:emit_delta:408 - Emitted positions delta: seq=52\n", "record": {"elapsed": {"repr": "0:00:46.536959", "seconds": 46.536959}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "emit_delta", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 408, "message": "Emitted positions delta: seq=52", "module": "live", "name": "app.ws.live", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:02:04.829501+05:30", "timestamp": 1755783124.829501}}}
{"text": "2025-08-21 19:02:06.154 | INFO     | app.services.dhan_client:get_pnl:489 - Starting accurate P&L calculation\n", "record": {"elapsed": {"repr": "0:00:47.862060", "seconds": 47.86206}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 489, "message": "Starting accurate P&L calculation", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:02:06.154602+05:30", "timestamp": 1755783126.154602}}}
{"text": "2025-08-21 19:02:06.155 | INFO     | app.services.dhan_client:get_pnl:491 - Fetched 5 positions\n", "record": {"elapsed": {"repr": "0:00:47.862600", "seconds": 47.8626}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 491, "message": "Fetched 5 positions", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:02:06.155142+05:30", "timestamp": 1755783126.155142}}}
{"text": "2025-08-21 19:02:06.155 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for RELIANCE: unrealized=-493751.76, today=-493751.76\n", "record": {"elapsed": {"repr": "0:00:47.863081", "seconds": 47.863081}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for RELIANCE: unrealized=-493751.76, today=-493751.76", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:02:06.155623+05:30", "timestamp": 1755783126.155623}}}
{"text": "2025-08-21 19:02:06.156 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for TCS: unrealized=-41559.6, today=-41559.6\n", "record": {"elapsed": {"repr": "0:00:47.863558", "seconds": 47.863558}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for TCS: unrealized=-41559.6, today=-41559.6", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:02:06.156100+05:30", "timestamp": 1755783126.1561}}}
{"text": "2025-08-21 19:02:06.156 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for HDFC: unrealized=1289381.49, today=1289381.49\n", "record": {"elapsed": {"repr": "0:00:47.864229", "seconds": 47.864229}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for HDFC: unrealized=1289381.49, today=1289381.49", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:02:06.156771+05:30", "timestamp": 1755783126.156771}}}
{"text": "2025-08-21 19:02:06.157 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for INFY: unrealized=28602.19, today=28602.19\n", "record": {"elapsed": {"repr": "0:00:47.865073", "seconds": 47.865073}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for INFY: unrealized=28602.19, today=28602.19", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:02:06.157615+05:30", "timestamp": 1755783126.157615}}}
{"text": "2025-08-21 19:02:06.158 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for ICICIBANK: unrealized=-480185.71, today=-480185.71\n", "record": {"elapsed": {"repr": "0:00:47.865579", "seconds": 47.865579}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for ICICIBANK: unrealized=-480185.71, today=-480185.71", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:02:06.158121+05:30", "timestamp": 1755783126.158121}}}
{"text": "2025-08-21 19:02:06.158 | INFO     | app.services.dhan_client:get_pnl:545 - Calculated totals - realized: 0.0, unrealized: 302486.61, day: 302486.61\n", "record": {"elapsed": {"repr": "0:00:47.866030", "seconds": 47.86603}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 545, "message": "Calculated totals - realized: 0.0, unrealized: 302486.61, day: 302486.61", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:02:06.158572+05:30", "timestamp": 1755783126.158572}}}
{"text": "2025-08-21 19:02:06.159 | DEBUG    | app.services.dhan_client:get_pnl:554 - PnL consistency check passed: drift=‚Çπ0.00\n", "record": {"elapsed": {"repr": "0:00:47.866535", "seconds": 47.866535}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 554, "message": "PnL consistency check passed: drift=‚Çπ0.00", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:02:06.159077+05:30", "timestamp": 1755783126.159077}}}
{"text": "2025-08-21 19:02:06.159 | DEBUG    | app.services.dhan_client:get_pnl:558 - Creating PnLTotals...\n", "record": {"elapsed": {"repr": "0:00:47.867084", "seconds": 47.867084}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 558, "message": "Creating PnLTotals...", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:02:06.159626+05:30", "timestamp": 1755783126.159626}}}
{"text": "2025-08-21 19:02:06.160 | DEBUG    | app.services.dhan_client:get_pnl:565 - PnLTotals created successfully\n", "record": {"elapsed": {"repr": "0:00:47.867995", "seconds": 47.867995}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 565, "message": "PnLTotals created successfully", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:02:06.160537+05:30", "timestamp": 1755783126.160537}}}
{"text": "2025-08-21 19:02:06.161 | DEBUG    | app.services.dhan_client:get_pnl:574 - Creating PnL model...\n", "record": {"elapsed": {"repr": "0:00:47.868786", "seconds": 47.868786}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 574, "message": "Creating PnL model...", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:02:06.161328+05:30", "timestamp": 1755783126.161328}}}
{"text": "2025-08-21 19:02:06.161 | DEBUG    | app.services.dhan_client:get_pnl:575 - Model fields: totals=<class 'app.models.schemas.PnLTotals'>, perSymbol=5, updated_at=2025-08-21 19:02:06.155561+05:30, trading_day=2025-08-21\n", "record": {"elapsed": {"repr": "0:00:47.869330", "seconds": 47.86933}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 575, "message": "Model fields: totals=<class 'app.models.schemas.PnLTotals'>, perSymbol=5, updated_at=2025-08-21 19:02:06.155561+05:30, trading_day=2025-08-21", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:02:06.161872+05:30", "timestamp": 1755783126.161872}}}
{"text": "2025-08-21 19:02:06.162 | DEBUG    | app.services.dhan_client:get_pnl:584 - Created PnL model: totals=PnLTotals(realized=0.0, unrealized=302486.61, day=302486.61, currency='INR') per_symbol=[PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1727, avg=618.93, ltp=333.03, unrealized=-493751.76, today_pnl=-493751.76), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=167, avg=948.57, ltp=1197.43, unrealized=-41559.6, today_pnl=-41559.6), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=1347, avg=801.44, ltp=1758.66, unrealized=1289381.49, today_pnl=1289381.49), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=143, avg=1427.62, ltp=1227.6, unrealized=28602.19, today_pnl=28602.19), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=438, avg=1994.48, ltp=898.17, unrealized=-480185.71, today_pnl=-480185.71)] updated_at=datetime.datetime(2025, 8, 21, 19, 2, 6, 155561, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))) trading_day='2025-08-21'\n", "record": {"elapsed": {"repr": "0:00:47.869991", "seconds": 47.869991}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 584, "message": "Created PnL model: totals=PnLTotals(realized=0.0, unrealized=302486.61, day=302486.61, currency='INR') per_symbol=[PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1727, avg=618.93, ltp=333.03, unrealized=-493751.76, today_pnl=-493751.76), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=167, avg=948.57, ltp=1197.43, unrealized=-41559.6, today_pnl=-41559.6), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=1347, avg=801.44, ltp=1758.66, unrealized=1289381.49, today_pnl=1289381.49), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=143, avg=1427.62, ltp=1227.6, unrealized=28602.19, today_pnl=28602.19), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=438, avg=1994.48, ltp=898.17, unrealized=-480185.71, today_pnl=-480185.71)] updated_at=datetime.datetime(2025, 8, 21, 19, 2, 6, 155561, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))) trading_day='2025-08-21'", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:02:06.162533+05:30", "timestamp": 1755783126.162533}}}
{"text": "2025-08-21 19:02:06.163 | DEBUG    | app.services.dhan_client:get_pnl:585 - PnL model fields: {'totals': PnLTotals(realized=0.0, unrealized=302486.61, day=302486.61, currency='INR'), 'per_symbol': [PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1727, avg=618.93, ltp=333.03, unrealized=-493751.76, today_pnl=-493751.76), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=167, avg=948.57, ltp=1197.43, unrealized=-41559.6, today_pnl=-41559.6), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=1347, avg=801.44, ltp=1758.66, unrealized=1289381.49, today_pnl=1289381.49), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=143, avg=1427.62, ltp=1227.6, unrealized=28602.19, today_pnl=28602.19), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=438, avg=1994.48, ltp=898.17, unrealized=-480185.71, today_pnl=-480185.71)], 'updated_at': datetime.datetime(2025, 8, 21, 19, 2, 6, 155561, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))), 'trading_day': '2025-08-21'}\n", "record": {"elapsed": {"repr": "0:00:47.870673", "seconds": 47.870673}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 585, "message": "PnL model fields: {'totals': PnLTotals(realized=0.0, unrealized=302486.61, day=302486.61, currency='INR'), 'per_symbol': [PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1727, avg=618.93, ltp=333.03, unrealized=-493751.76, today_pnl=-493751.76), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=167, avg=948.57, ltp=1197.43, unrealized=-41559.6, today_pnl=-41559.6), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=1347, avg=801.44, ltp=1758.66, unrealized=1289381.49, today_pnl=1289381.49), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=143, avg=1427.62, ltp=1227.6, unrealized=28602.19, today_pnl=28602.19), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=438, avg=1994.48, ltp=898.17, unrealized=-480185.71, today_pnl=-480185.71)], 'updated_at': datetime.datetime(2025, 8, 21, 19, 2, 6, 155561, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))), 'trading_day': '2025-08-21'}", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:02:06.163215+05:30", "timestamp": 1755783126.163215}}}
{"text": "2025-08-21 19:02:06.163 | INFO     | app.services.dhan_client:get_pnl:587 - P&L calculation completed successfully: 5 symbols, unrealized=‚Çπ302486.61\n", "record": {"elapsed": {"repr": "0:00:47.871431", "seconds": 47.871431}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 587, "message": "P&L calculation completed successfully: 5 symbols, unrealized=‚Çπ302486.61", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:02:06.163973+05:30", "timestamp": 1755783126.163973}}}
{"text": "2025-08-21 19:02:06.164 | DEBUG    | app.ws.live:emit_delta:408 - Emitted pnl delta: seq=53\n", "record": {"elapsed": {"repr": "0:00:47.872307", "seconds": 47.872307}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "emit_delta", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 408, "message": "Emitted pnl delta: seq=53", "module": "live", "name": "app.ws.live", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:02:06.164849+05:30", "timestamp": 1755783126.164849}}}
{"text": "2025-08-21 19:02:06.523 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:48.231336", "seconds": 48.231336}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:02:06.523878+05:30", "timestamp": 1755783126.523878}}}
{"text": "2025-08-21 19:02:06.524 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:48.231963", "seconds": 48.231963}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:02:06.524505+05:30", "timestamp": 1755783126.524505}}}
{"text": "2025-08-21 19:02:06.524 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:48.232443", "seconds": 48.232443}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:02:06.524985+05:30", "timestamp": 1755783126.524985}}}
{"text": "2025-08-21 19:02:06.525 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:48.233117", "seconds": 48.233117}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:02:06.525659+05:30", "timestamp": 1755783126.525659}}}
{"text": "2025-08-21 19:02:06.526 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:48.233944", "seconds": 48.233944}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:02:06.526486+05:30", "timestamp": 1755783126.526486}}}
{"text": "2025-08-21 19:02:06.527 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:48.234570", "seconds": 48.23457}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:02:06.527112+05:30", "timestamp": 1755783126.527112}}}
{"text": "2025-08-21 19:02:06.527 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:48.234982", "seconds": 48.234982}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:02:06.527524+05:30", "timestamp": 1755783126.527524}}}
{"text": "2025-08-21 19:02:06.527 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:48.235356", "seconds": 48.235356}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:02:06.527898+05:30", "timestamp": 1755783126.527898}}}
{"text": "2025-08-21 19:02:06.528 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:48.235751", "seconds": 48.235751}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:02:06.528293+05:30", "timestamp": 1755783126.528293}}}
{"text": "2025-08-21 19:02:06.528 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:48.236101", "seconds": 48.236101}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:02:06.528643+05:30", "timestamp": 1755783126.528643}}}
{"text": "2025-08-21 19:02:06.579 | DEBUG    | app.ws.live:emit_delta:408 - Emitted positions delta: seq=54\n", "record": {"elapsed": {"repr": "0:00:48.286848", "seconds": 48.286848}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "emit_delta", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 408, "message": "Emitted positions delta: seq=54", "module": "live", "name": "app.ws.live", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:02:06.579390+05:30", "timestamp": 1755783126.57939}}}
{"text": "2025-08-21 19:02:08.078 | INFO     | app.services.dhan_client:get_pnl:489 - Starting accurate P&L calculation\n", "record": {"elapsed": {"repr": "0:00:49.785747", "seconds": 49.785747}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 489, "message": "Starting accurate P&L calculation", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:02:08.078289+05:30", "timestamp": 1755783128.078289}}}
{"text": "2025-08-21 19:02:08.078 | INFO     | app.services.dhan_client:get_pnl:491 - Fetched 5 positions\n", "record": {"elapsed": {"repr": "0:00:49.786257", "seconds": 49.786257}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 491, "message": "Fetched 5 positions", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:02:08.078799+05:30", "timestamp": 1755783128.078799}}}
{"text": "2025-08-21 19:02:08.079 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for RELIANCE: unrealized=-496175.47, today=-496175.47\n", "record": {"elapsed": {"repr": "0:00:49.786645", "seconds": 49.786645}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for RELIANCE: unrealized=-496175.47, today=-496175.47", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:02:08.079187+05:30", "timestamp": 1755783128.079187}}}
{"text": "2025-08-21 19:02:08.079 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for TCS: unrealized=-38470.23, today=-38470.23\n", "record": {"elapsed": {"repr": "0:00:49.787062", "seconds": 49.787062}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for TCS: unrealized=-38470.23, today=-38470.23", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:02:08.079604+05:30", "timestamp": 1755783128.079604}}}
{"text": "2025-08-21 19:02:08.080 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for HDFC: unrealized=1290557.69, today=1290557.69\n", "record": {"elapsed": {"repr": "0:00:49.787545", "seconds": 49.787545}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for HDFC: unrealized=1290557.69, today=1290557.69", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:02:08.080087+05:30", "timestamp": 1755783128.080087}}}
{"text": "2025-08-21 19:02:08.080 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for INFY: unrealized=31318.23, today=31318.23\n", "record": {"elapsed": {"repr": "0:00:49.788374", "seconds": 49.788374}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for INFY: unrealized=31318.23, today=31318.23", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:02:08.080916+05:30", "timestamp": 1755783128.080916}}}
{"text": "2025-08-21 19:02:08.081 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for ICICIBANK: unrealized=-484096.2, today=-484096.2\n", "record": {"elapsed": {"repr": "0:00:49.789061", "seconds": 49.789061}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for ICICIBANK: unrealized=-484096.2, today=-484096.2", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:02:08.081603+05:30", "timestamp": 1755783128.081603}}}
{"text": "2025-08-21 19:02:08.082 | INFO     | app.services.dhan_client:get_pnl:545 - Calculated totals - realized: 0.0, unrealized: 303134.02, day: 303134.02\n", "record": {"elapsed": {"repr": "0:00:49.789550", "seconds": 49.78955}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 545, "message": "Calculated totals - realized: 0.0, unrealized: 303134.02, day: 303134.02", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:02:08.082092+05:30", "timestamp": 1755783128.082092}}}
{"text": "2025-08-21 19:02:08.082 | DEBUG    | app.services.dhan_client:get_pnl:554 - PnL consistency check passed: drift=‚Çπ0.00\n", "record": {"elapsed": {"repr": "0:00:49.790052", "seconds": 49.790052}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 554, "message": "PnL consistency check passed: drift=‚Çπ0.00", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:02:08.082594+05:30", "timestamp": 1755783128.082594}}}
{"text": "2025-08-21 19:02:08.083 | DEBUG    | app.services.dhan_client:get_pnl:558 - Creating PnLTotals...\n", "record": {"elapsed": {"repr": "0:00:49.790584", "seconds": 49.790584}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 558, "message": "Creating PnLTotals...", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:02:08.083126+05:30", "timestamp": 1755783128.083126}}}
{"text": "2025-08-21 19:02:08.083 | DEBUG    | app.services.dhan_client:get_pnl:565 - PnLTotals created successfully\n", "record": {"elapsed": {"repr": "0:00:49.791201", "seconds": 49.791201}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 565, "message": "PnLTotals created successfully", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:02:08.083743+05:30", "timestamp": 1755783128.083743}}}
{"text": "2025-08-21 19:02:08.084 | DEBUG    | app.services.dhan_client:get_pnl:574 - Creating PnL model...\n", "record": {"elapsed": {"repr": "0:00:49.792208", "seconds": 49.792208}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 574, "message": "Creating PnL model...", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:02:08.084750+05:30", "timestamp": 1755783128.08475}}}
{"text": "2025-08-21 19:02:08.085 | DEBUG    | app.services.dhan_client:get_pnl:575 - Model fields: totals=<class 'app.models.schemas.PnLTotals'>, perSymbol=5, updated_at=2025-08-21 19:02:08.079134+05:30, trading_day=2025-08-21\n", "record": {"elapsed": {"repr": "0:00:49.792812", "seconds": 49.792812}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 575, "message": "Model fields: totals=<class 'app.models.schemas.PnLTotals'>, perSymbol=5, updated_at=2025-08-21 19:02:08.079134+05:30, trading_day=2025-08-21", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:02:08.085354+05:30", "timestamp": 1755783128.085354}}}
{"text": "2025-08-21 19:02:08.085 | DEBUG    | app.services.dhan_client:get_pnl:584 - Created PnL model: totals=PnLTotals(realized=0.0, unrealized=303134.02, day=303134.02, currency='INR') per_symbol=[PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1727, avg=618.93, ltp=331.63, unrealized=-496175.47, today_pnl=-496175.47), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=167, avg=948.57, ltp=1178.93, unrealized=-38470.23, today_pnl=-38470.23), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=1347, avg=801.44, ltp=1759.54, unrealized=1290557.69, today_pnl=1290557.69), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=143, avg=1427.62, ltp=1208.61, unrealized=31318.23, today_pnl=31318.23), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=438, avg=1994.48, ltp=889.24, unrealized=-484096.2, today_pnl=-484096.2)] updated_at=datetime.datetime(2025, 8, 21, 19, 2, 8, 79134, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))) trading_day='2025-08-21'\n", "record": {"elapsed": {"repr": "0:00:49.793387", "seconds": 49.793387}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 584, "message": "Created PnL model: totals=PnLTotals(realized=0.0, unrealized=303134.02, day=303134.02, currency='INR') per_symbol=[PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1727, avg=618.93, ltp=331.63, unrealized=-496175.47, today_pnl=-496175.47), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=167, avg=948.57, ltp=1178.93, unrealized=-38470.23, today_pnl=-38470.23), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=1347, avg=801.44, ltp=1759.54, unrealized=1290557.69, today_pnl=1290557.69), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=143, avg=1427.62, ltp=1208.61, unrealized=31318.23, today_pnl=31318.23), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=438, avg=1994.48, ltp=889.24, unrealized=-484096.2, today_pnl=-484096.2)] updated_at=datetime.datetime(2025, 8, 21, 19, 2, 8, 79134, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))) trading_day='2025-08-21'", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:02:08.085929+05:30", "timestamp": 1755783128.085929}}}
{"text": "2025-08-21 19:02:08.086 | DEBUG    | app.services.dhan_client:get_pnl:585 - PnL model fields: {'totals': PnLTotals(realized=0.0, unrealized=303134.02, day=303134.02, currency='INR'), 'per_symbol': [PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1727, avg=618.93, ltp=331.63, unrealized=-496175.47, today_pnl=-496175.47), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=167, avg=948.57, ltp=1178.93, unrealized=-38470.23, today_pnl=-38470.23), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=1347, avg=801.44, ltp=1759.54, unrealized=1290557.69, today_pnl=1290557.69), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=143, avg=1427.62, ltp=1208.61, unrealized=31318.23, today_pnl=31318.23), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=438, avg=1994.48, ltp=889.24, unrealized=-484096.2, today_pnl=-484096.2)], 'updated_at': datetime.datetime(2025, 8, 21, 19, 2, 8, 79134, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))), 'trading_day': '2025-08-21'}\n", "record": {"elapsed": {"repr": "0:00:49.794005", "seconds": 49.794005}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 585, "message": "PnL model fields: {'totals': PnLTotals(realized=0.0, unrealized=303134.02, day=303134.02, currency='INR'), 'per_symbol': [PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1727, avg=618.93, ltp=331.63, unrealized=-496175.47, today_pnl=-496175.47), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=167, avg=948.57, ltp=1178.93, unrealized=-38470.23, today_pnl=-38470.23), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=1347, avg=801.44, ltp=1759.54, unrealized=1290557.69, today_pnl=1290557.69), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=143, avg=1427.62, ltp=1208.61, unrealized=31318.23, today_pnl=31318.23), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=438, avg=1994.48, ltp=889.24, unrealized=-484096.2, today_pnl=-484096.2)], 'updated_at': datetime.datetime(2025, 8, 21, 19, 2, 8, 79134, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))), 'trading_day': '2025-08-21'}", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:02:08.086547+05:30", "timestamp": 1755783128.086547}}}
{"text": "2025-08-21 19:02:08.087 | INFO     | app.services.dhan_client:get_pnl:587 - P&L calculation completed successfully: 5 symbols, unrealized=‚Çπ303134.02\n", "record": {"elapsed": {"repr": "0:00:49.794533", "seconds": 49.794533}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 587, "message": "P&L calculation completed successfully: 5 symbols, unrealized=‚Çπ303134.02", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:02:08.087075+05:30", "timestamp": 1755783128.087075}}}
{"text": "2025-08-21 19:02:08.087 | DEBUG    | app.ws.live:emit_delta:408 - Emitted pnl delta: seq=55\n", "record": {"elapsed": {"repr": "0:00:49.795172", "seconds": 49.795172}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "emit_delta", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 408, "message": "Emitted pnl delta: seq=55", "module": "live", "name": "app.ws.live", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:02:08.087714+05:30", "timestamp": 1755783128.087714}}}
{"text": "2025-08-21 19:02:08.455 | DEBUG    | app.ws.live:emit_delta:408 - Emitted holdings delta: seq=56\n", "record": {"elapsed": {"repr": "0:00:50.163006", "seconds": 50.163006}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "emit_delta", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 408, "message": "Emitted holdings delta: seq=56", "module": "live", "name": "app.ws.live", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:02:08.455548+05:30", "timestamp": 1755783128.455548}}}
{"text": "2025-08-21 19:02:08.529 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:50.236618", "seconds": 50.236618}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:02:08.529160+05:30", "timestamp": 1755783128.52916}}}
{"text": "2025-08-21 19:02:08.530 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:50.237512", "seconds": 50.237512}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:02:08.530054+05:30", "timestamp": 1755783128.530054}}}
{"text": "2025-08-21 19:02:08.531 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:50.238596", "seconds": 50.238596}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:02:08.531138+05:30", "timestamp": 1755783128.531138}}}
{"text": "2025-08-21 19:02:08.531 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:50.239116", "seconds": 50.239116}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:02:08.531658+05:30", "timestamp": 1755783128.531658}}}
{"text": "2025-08-21 19:02:08.532 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:50.239632", "seconds": 50.239632}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:02:08.532174+05:30", "timestamp": 1755783128.532174}}}
{"text": "2025-08-21 19:02:08.532 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:50.240163", "seconds": 50.240163}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:02:08.532705+05:30", "timestamp": 1755783128.532705}}}
{"text": "2025-08-21 19:02:08.533 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:50.240893", "seconds": 50.240893}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:02:08.533435+05:30", "timestamp": 1755783128.533435}}}
{"text": "2025-08-21 19:02:08.534 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:50.241877", "seconds": 50.241877}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:02:08.534419+05:30", "timestamp": 1755783128.534419}}}
{"text": "2025-08-21 19:02:08.535 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:50.242761", "seconds": 50.242761}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:02:08.535303+05:30", "timestamp": 1755783128.535303}}}
{"text": "2025-08-21 19:02:08.535 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:50.243281", "seconds": 50.243281}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:02:08.535823+05:30", "timestamp": 1755783128.535823}}}
{"text": "2025-08-21 19:02:09.961 | INFO     | app.services.dhan_client:get_pnl:489 - Starting accurate P&L calculation\n", "record": {"elapsed": {"repr": "0:00:51.669404", "seconds": 51.669404}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 489, "message": "Starting accurate P&L calculation", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:02:09.961946+05:30", "timestamp": 1755783129.961946}}}
{"text": "2025-08-21 19:02:09.963 | INFO     | app.services.dhan_client:get_pnl:491 - Fetched 5 positions\n", "record": {"elapsed": {"repr": "0:00:51.670653", "seconds": 51.670653}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 491, "message": "Fetched 5 positions", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:02:09.963195+05:30", "timestamp": 1755783129.963195}}}
{"text": "2025-08-21 19:02:09.963 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for RELIANCE: unrealized=-490364.62, today=-490364.62\n", "record": {"elapsed": {"repr": "0:00:51.671388", "seconds": 51.671388}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for RELIANCE: unrealized=-490364.62, today=-490364.62", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:02:09.963930+05:30", "timestamp": 1755783129.96393}}}
{"text": "2025-08-21 19:02:09.964 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for TCS: unrealized=-41065.01, today=-41065.01\n", "record": {"elapsed": {"repr": "0:00:51.671952", "seconds": 51.671952}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for TCS: unrealized=-41065.01, today=-41065.01", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:02:09.964494+05:30", "timestamp": 1755783129.964494}}}
{"text": "2025-08-21 19:02:09.965 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for HDFC: unrealized=1337521.67, today=1337521.67\n", "record": {"elapsed": {"repr": "0:00:51.672532", "seconds": 51.672532}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for HDFC: unrealized=1337521.67, today=1337521.67", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:02:09.965074+05:30", "timestamp": 1755783129.965074}}}
{"text": "2025-08-21 19:02:09.965 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for INFY: unrealized=33197.36, today=33197.36\n", "record": {"elapsed": {"repr": "0:00:51.673143", "seconds": 51.673143}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for INFY: unrealized=33197.36, today=33197.36", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:02:09.965685+05:30", "timestamp": 1755783129.965685}}}
{"text": "2025-08-21 19:02:09.966 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for ICICIBANK: unrealized=-478797.3, today=-478797.3\n", "record": {"elapsed": {"repr": "0:00:51.674026", "seconds": 51.674026}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for ICICIBANK: unrealized=-478797.3, today=-478797.3", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:02:09.966568+05:30", "timestamp": 1755783129.966568}}}
{"text": "2025-08-21 19:02:09.967 | INFO     | app.services.dhan_client:get_pnl:545 - Calculated totals - realized: 0.0, unrealized: 360492.1, day: 360492.1\n", "record": {"elapsed": {"repr": "0:00:51.675372", "seconds": 51.675372}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 545, "message": "Calculated totals - realized: 0.0, unrealized: 360492.1, day: 360492.1", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:02:09.967914+05:30", "timestamp": 1755783129.967914}}}
{"text": "2025-08-21 19:02:09.968 | DEBUG    | app.services.dhan_client:get_pnl:554 - PnL consistency check passed: drift=‚Çπ0.00\n", "record": {"elapsed": {"repr": "0:00:51.675973", "seconds": 51.675973}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 554, "message": "PnL consistency check passed: drift=‚Çπ0.00", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:02:09.968515+05:30", "timestamp": 1755783129.968515}}}
{"text": "2025-08-21 19:02:09.969 | DEBUG    | app.services.dhan_client:get_pnl:558 - Creating PnLTotals...\n", "record": {"elapsed": {"repr": "0:00:51.676546", "seconds": 51.676546}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 558, "message": "Creating PnLTotals...", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:02:09.969088+05:30", "timestamp": 1755783129.969088}}}
{"text": "2025-08-21 19:02:09.969 | DEBUG    | app.services.dhan_client:get_pnl:565 - PnLTotals created successfully\n", "record": {"elapsed": {"repr": "0:00:51.677097", "seconds": 51.677097}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 565, "message": "PnLTotals created successfully", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:02:09.969639+05:30", "timestamp": 1755783129.969639}}}
{"text": "2025-08-21 19:02:09.970 | DEBUG    | app.services.dhan_client:get_pnl:574 - Creating PnL model...\n", "record": {"elapsed": {"repr": "0:00:51.677671", "seconds": 51.677671}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 574, "message": "Creating PnL model...", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:02:09.970213+05:30", "timestamp": 1755783129.970213}}}
{"text": "2025-08-21 19:02:09.970 | DEBUG    | app.services.dhan_client:get_pnl:575 - Model fields: totals=<class 'app.models.schemas.PnLTotals'>, perSymbol=5, updated_at=2025-08-21 19:02:09.963841+05:30, trading_day=2025-08-21\n", "record": {"elapsed": {"repr": "0:00:51.678214", "seconds": 51.678214}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 575, "message": "Model fields: totals=<class 'app.models.schemas.PnLTotals'>, perSymbol=5, updated_at=2025-08-21 19:02:09.963841+05:30, trading_day=2025-08-21", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:02:09.970756+05:30", "timestamp": 1755783129.970756}}}
{"text": "2025-08-21 19:02:09.972 | DEBUG    | app.services.dhan_client:get_pnl:584 - Created PnL model: totals=PnLTotals(realized=0.0, unrealized=360492.1, day=360492.1, currency='INR') per_symbol=[PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1727, avg=618.93, ltp=334.99, unrealized=-490364.62, today_pnl=-490364.62), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=167, avg=948.57, ltp=1194.47, unrealized=-41065.01, today_pnl=-41065.01), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=1347, avg=801.44, ltp=1794.4, unrealized=1337521.67, today_pnl=1337521.67), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=143, avg=1427.62, ltp=1195.47, unrealized=33197.36, today_pnl=33197.36), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=438, avg=1994.48, ltp=901.34, unrealized=-478797.3, today_pnl=-478797.3)] updated_at=datetime.datetime(2025, 8, 21, 19, 2, 9, 963841, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))) trading_day='2025-08-21'\n", "record": {"elapsed": {"repr": "0:00:51.679560", "seconds": 51.67956}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 584, "message": "Created PnL model: totals=PnLTotals(realized=0.0, unrealized=360492.1, day=360492.1, currency='INR') per_symbol=[PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1727, avg=618.93, ltp=334.99, unrealized=-490364.62, today_pnl=-490364.62), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=167, avg=948.57, ltp=1194.47, unrealized=-41065.01, today_pnl=-41065.01), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=1347, avg=801.44, ltp=1794.4, unrealized=1337521.67, today_pnl=1337521.67), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=143, avg=1427.62, ltp=1195.47, unrealized=33197.36, today_pnl=33197.36), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=438, avg=1994.48, ltp=901.34, unrealized=-478797.3, today_pnl=-478797.3)] updated_at=datetime.datetime(2025, 8, 21, 19, 2, 9, 963841, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))) trading_day='2025-08-21'", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:02:09.972102+05:30", "timestamp": 1755783129.972102}}}
{"text": "2025-08-21 19:02:09.973 | DEBUG    | app.services.dhan_client:get_pnl:585 - PnL model fields: {'totals': PnLTotals(realized=0.0, unrealized=360492.1, day=360492.1, currency='INR'), 'per_symbol': [PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1727, avg=618.93, ltp=334.99, unrealized=-490364.62, today_pnl=-490364.62), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=167, avg=948.57, ltp=1194.47, unrealized=-41065.01, today_pnl=-41065.01), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=1347, avg=801.44, ltp=1794.4, unrealized=1337521.67, today_pnl=1337521.67), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=143, avg=1427.62, ltp=1195.47, unrealized=33197.36, today_pnl=33197.36), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=438, avg=1994.48, ltp=901.34, unrealized=-478797.3, today_pnl=-478797.3)], 'updated_at': datetime.datetime(2025, 8, 21, 19, 2, 9, 963841, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))), 'trading_day': '2025-08-21'}\n", "record": {"elapsed": {"repr": "0:00:51.680506", "seconds": 51.680506}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 585, "message": "PnL model fields: {'totals': PnLTotals(realized=0.0, unrealized=360492.1, day=360492.1, currency='INR'), 'per_symbol': [PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1727, avg=618.93, ltp=334.99, unrealized=-490364.62, today_pnl=-490364.62), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=167, avg=948.57, ltp=1194.47, unrealized=-41065.01, today_pnl=-41065.01), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=1347, avg=801.44, ltp=1794.4, unrealized=1337521.67, today_pnl=1337521.67), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=143, avg=1427.62, ltp=1195.47, unrealized=33197.36, today_pnl=33197.36), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=438, avg=1994.48, ltp=901.34, unrealized=-478797.3, today_pnl=-478797.3)], 'updated_at': datetime.datetime(2025, 8, 21, 19, 2, 9, 963841, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))), 'trading_day': '2025-08-21'}", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:02:09.973048+05:30", "timestamp": 1755783129.973048}}}
{"text": "2025-08-21 19:02:09.974 | INFO     | app.services.dhan_client:get_pnl:587 - P&L calculation completed successfully: 5 symbols, unrealized=‚Çπ360492.10\n", "record": {"elapsed": {"repr": "0:00:51.681637", "seconds": 51.681637}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 587, "message": "P&L calculation completed successfully: 5 symbols, unrealized=‚Çπ360492.10", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:02:09.974179+05:30", "timestamp": 1755783129.974179}}}
{"text": "2025-08-21 19:02:09.975 | DEBUG    | app.ws.live:emit_delta:408 - Emitted pnl delta: seq=57\n", "record": {"elapsed": {"repr": "0:00:51.683158", "seconds": 51.683158}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "emit_delta", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 408, "message": "Emitted pnl delta: seq=57", "module": "live", "name": "app.ws.live", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:02:09.975700+05:30", "timestamp": 1755783129.9757}}}
{"text": "2025-08-21 19:02:10.126 | DEBUG    | app.ws.live:emit_delta:408 - Emitted positions delta: seq=58\n", "record": {"elapsed": {"repr": "0:00:51.833891", "seconds": 51.833891}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "emit_delta", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 408, "message": "Emitted positions delta: seq=58", "module": "live", "name": "app.ws.live", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:02:10.126433+05:30", "timestamp": 1755783130.126433}}}
{"text": "2025-08-21 19:02:10.536 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:52.244312", "seconds": 52.244312}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:02:10.536854+05:30", "timestamp": 1755783130.536854}}}
{"text": "2025-08-21 19:02:10.538 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:52.245538", "seconds": 52.245538}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:02:10.538080+05:30", "timestamp": 1755783130.53808}}}
{"text": "2025-08-21 19:02:10.538 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:52.246161", "seconds": 52.246161}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:02:10.538703+05:30", "timestamp": 1755783130.538703}}}
{"text": "2025-08-21 19:02:10.539 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:52.246672", "seconds": 52.246672}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:02:10.539214+05:30", "timestamp": 1755783130.539214}}}
{"text": "2025-08-21 19:02:10.539 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:52.247106", "seconds": 52.247106}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:02:10.539648+05:30", "timestamp": 1755783130.539648}}}
{"text": "2025-08-21 19:02:10.540 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:52.247687", "seconds": 52.247687}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:02:10.540229+05:30", "timestamp": 1755783130.540229}}}
{"text": "2025-08-21 19:02:10.540 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:52.248443", "seconds": 52.248443}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:02:10.540985+05:30", "timestamp": 1755783130.540985}}}
{"text": "2025-08-21 19:02:10.542 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:52.249567", "seconds": 52.249567}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:02:10.542109+05:30", "timestamp": 1755783130.542109}}}
{"text": "2025-08-21 19:02:10.542 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:52.250353", "seconds": 52.250353}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:02:10.542895+05:30", "timestamp": 1755783130.542895}}}
{"text": "2025-08-21 19:02:10.543 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:52.251080", "seconds": 52.25108}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:02:10.543622+05:30", "timestamp": 1755783130.543622}}}
{"text": "2025-08-21 19:02:11.789 | INFO     | app.services.dhan_client:get_pnl:489 - Starting accurate P&L calculation\n", "record": {"elapsed": {"repr": "0:00:53.497053", "seconds": 53.497053}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 489, "message": "Starting accurate P&L calculation", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:02:11.789595+05:30", "timestamp": 1755783131.789595}}}
{"text": "2025-08-21 19:02:11.790 | INFO     | app.services.dhan_client:get_pnl:491 - Fetched 5 positions\n", "record": {"elapsed": {"repr": "0:00:53.498081", "seconds": 53.498081}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 491, "message": "Fetched 5 positions", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:02:11.790623+05:30", "timestamp": 1755783131.790623}}}
{"text": "2025-08-21 19:02:11.791 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for RELIANCE: unrealized=-485950.21, today=-485950.21\n", "record": {"elapsed": {"repr": "0:00:53.498786", "seconds": 53.498786}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for RELIANCE: unrealized=-485950.21, today=-485950.21", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:02:11.791328+05:30", "timestamp": 1755783131.791328}}}
{"text": "2025-08-21 19:02:11.791 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for TCS: unrealized=-41344.82, today=-41344.82\n", "record": {"elapsed": {"repr": "0:00:53.499288", "seconds": 53.499288}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for TCS: unrealized=-41344.82, today=-41344.82", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:02:11.791830+05:30", "timestamp": 1755783131.79183}}}
{"text": "2025-08-21 19:02:11.792 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for HDFC: unrealized=1349803.62, today=1349803.62\n", "record": {"elapsed": {"repr": "0:00:53.499805", "seconds": 53.499805}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for HDFC: unrealized=1349803.62, today=1349803.62", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:02:11.792347+05:30", "timestamp": 1755783131.792347}}}
{"text": "2025-08-21 19:02:11.792 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for INFY: unrealized=30664.06, today=30664.06\n", "record": {"elapsed": {"repr": "0:00:53.500408", "seconds": 53.500408}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for INFY: unrealized=30664.06, today=30664.06", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:02:11.792950+05:30", "timestamp": 1755783131.79295}}}
{"text": "2025-08-21 19:02:11.793 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for ICICIBANK: unrealized=-480636.27, today=-480636.27\n", "record": {"elapsed": {"repr": "0:00:53.500903", "seconds": 53.500903}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for ICICIBANK: unrealized=-480636.27, today=-480636.27", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:02:11.793445+05:30", "timestamp": 1755783131.793445}}}
{"text": "2025-08-21 19:02:11.794 | INFO     | app.services.dhan_client:get_pnl:545 - Calculated totals - realized: 0.0, unrealized: 372536.38, day: 372536.38\n", "record": {"elapsed": {"repr": "0:00:53.501461", "seconds": 53.501461}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 545, "message": "Calculated totals - realized: 0.0, unrealized: 372536.38, day: 372536.38", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:02:11.794003+05:30", "timestamp": 1755783131.794003}}}
{"text": "2025-08-21 19:02:11.794 | DEBUG    | app.services.dhan_client:get_pnl:554 - PnL consistency check passed: drift=‚Çπ0.00\n", "record": {"elapsed": {"repr": "0:00:53.502025", "seconds": 53.502025}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 554, "message": "PnL consistency check passed: drift=‚Çπ0.00", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:02:11.794567+05:30", "timestamp": 1755783131.794567}}}
{"text": "2025-08-21 19:02:11.795 | DEBUG    | app.services.dhan_client:get_pnl:558 - Creating PnLTotals...\n", "record": {"elapsed": {"repr": "0:00:53.502953", "seconds": 53.502953}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 558, "message": "Creating PnLTotals...", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:02:11.795495+05:30", "timestamp": 1755783131.795495}}}
{"text": "2025-08-21 19:02:11.796 | DEBUG    | app.services.dhan_client:get_pnl:565 - PnLTotals created successfully\n", "record": {"elapsed": {"repr": "0:00:53.503691", "seconds": 53.503691}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 565, "message": "PnLTotals created successfully", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:02:11.796233+05:30", "timestamp": 1755783131.796233}}}
{"text": "2025-08-21 19:02:11.796 | DEBUG    | app.services.dhan_client:get_pnl:574 - Creating PnL model...\n", "record": {"elapsed": {"repr": "0:00:53.504260", "seconds": 53.50426}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 574, "message": "Creating PnL model...", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:02:11.796802+05:30", "timestamp": 1755783131.796802}}}
{"text": "2025-08-21 19:02:11.797 | DEBUG    | app.services.dhan_client:get_pnl:575 - Model fields: totals=<class 'app.models.schemas.PnLTotals'>, perSymbol=5, updated_at=2025-08-21 19:02:11.791262+05:30, trading_day=2025-08-21\n", "record": {"elapsed": {"repr": "0:00:53.504727", "seconds": 53.504727}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 575, "message": "Model fields: totals=<class 'app.models.schemas.PnLTotals'>, perSymbol=5, updated_at=2025-08-21 19:02:11.791262+05:30, trading_day=2025-08-21", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:02:11.797269+05:30", "timestamp": 1755783131.797269}}}
{"text": "2025-08-21 19:02:11.797 | DEBUG    | app.services.dhan_client:get_pnl:584 - Created PnL model: totals=PnLTotals(realized=0.0, unrealized=372536.38, day=372536.38, currency='INR') per_symbol=[PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1727, avg=618.93, ltp=337.55, unrealized=-485950.21, today_pnl=-485950.21), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=167, avg=948.57, ltp=1196.14, unrealized=-41344.82, today_pnl=-41344.82), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=1347, avg=801.44, ltp=1803.52, unrealized=1349803.62, today_pnl=1349803.62), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=143, avg=1427.62, ltp=1213.19, unrealized=30664.06, today_pnl=30664.06), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=438, avg=1994.48, ltp=897.14, unrealized=-480636.27, today_pnl=-480636.27)] updated_at=datetime.datetime(2025, 8, 21, 19, 2, 11, 791262, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))) trading_day='2025-08-21'\n", "record": {"elapsed": {"repr": "0:00:53.505453", "seconds": 53.505453}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 584, "message": "Created PnL model: totals=PnLTotals(realized=0.0, unrealized=372536.38, day=372536.38, currency='INR') per_symbol=[PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1727, avg=618.93, ltp=337.55, unrealized=-485950.21, today_pnl=-485950.21), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=167, avg=948.57, ltp=1196.14, unrealized=-41344.82, today_pnl=-41344.82), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=1347, avg=801.44, ltp=1803.52, unrealized=1349803.62, today_pnl=1349803.62), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=143, avg=1427.62, ltp=1213.19, unrealized=30664.06, today_pnl=30664.06), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=438, avg=1994.48, ltp=897.14, unrealized=-480636.27, today_pnl=-480636.27)] updated_at=datetime.datetime(2025, 8, 21, 19, 2, 11, 791262, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))) trading_day='2025-08-21'", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:02:11.797995+05:30", "timestamp": 1755783131.797995}}}
{"text": "2025-08-21 19:02:11.798 | DEBUG    | app.services.dhan_client:get_pnl:585 - PnL model fields: {'totals': PnLTotals(realized=0.0, unrealized=372536.38, day=372536.38, currency='INR'), 'per_symbol': [PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1727, avg=618.93, ltp=337.55, unrealized=-485950.21, today_pnl=-485950.21), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=167, avg=948.57, ltp=1196.14, unrealized=-41344.82, today_pnl=-41344.82), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=1347, avg=801.44, ltp=1803.52, unrealized=1349803.62, today_pnl=1349803.62), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=143, avg=1427.62, ltp=1213.19, unrealized=30664.06, today_pnl=30664.06), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=438, avg=1994.48, ltp=897.14, unrealized=-480636.27, today_pnl=-480636.27)], 'updated_at': datetime.datetime(2025, 8, 21, 19, 2, 11, 791262, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))), 'trading_day': '2025-08-21'}\n", "record": {"elapsed": {"repr": "0:00:53.506421", "seconds": 53.506421}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 585, "message": "PnL model fields: {'totals': PnLTotals(realized=0.0, unrealized=372536.38, day=372536.38, currency='INR'), 'per_symbol': [PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1727, avg=618.93, ltp=337.55, unrealized=-485950.21, today_pnl=-485950.21), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=167, avg=948.57, ltp=1196.14, unrealized=-41344.82, today_pnl=-41344.82), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=1347, avg=801.44, ltp=1803.52, unrealized=1349803.62, today_pnl=1349803.62), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=143, avg=1427.62, ltp=1213.19, unrealized=30664.06, today_pnl=30664.06), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=438, avg=1994.48, ltp=897.14, unrealized=-480636.27, today_pnl=-480636.27)], 'updated_at': datetime.datetime(2025, 8, 21, 19, 2, 11, 791262, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))), 'trading_day': '2025-08-21'}", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:02:11.798963+05:30", "timestamp": 1755783131.798963}}}
{"text": "2025-08-21 19:02:11.800 | INFO     | app.services.dhan_client:get_pnl:587 - P&L calculation completed successfully: 5 symbols, unrealized=‚Çπ372536.38\n", "record": {"elapsed": {"repr": "0:00:53.507606", "seconds": 53.507606}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 587, "message": "P&L calculation completed successfully: 5 symbols, unrealized=‚Çπ372536.38", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:02:11.800148+05:30", "timestamp": 1755783131.800148}}}
{"text": "2025-08-21 19:02:11.800 | DEBUG    | app.ws.live:emit_delta:408 - Emitted pnl delta: seq=59\n", "record": {"elapsed": {"repr": "0:00:53.508315", "seconds": 53.508315}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "emit_delta", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 408, "message": "Emitted pnl delta: seq=59", "module": "live", "name": "app.ws.live", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:02:11.800857+05:30", "timestamp": 1755783131.800857}}}
{"text": "2025-08-21 19:02:12.026 | DEBUG    | app.ws.live:emit_delta:408 - Emitted positions delta: seq=60\n", "record": {"elapsed": {"repr": "0:00:53.733860", "seconds": 53.73386}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "emit_delta", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 408, "message": "Emitted positions delta: seq=60", "module": "live", "name": "app.ws.live", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:02:12.026402+05:30", "timestamp": 1755783132.026402}}}
{"text": "2025-08-21 19:02:12.544 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:54.252364", "seconds": 54.252364}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:02:12.544906+05:30", "timestamp": 1755783132.544906}}}
{"text": "2025-08-21 19:02:12.545 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:54.253091", "seconds": 54.253091}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:02:12.545633+05:30", "timestamp": 1755783132.545633}}}
{"text": "2025-08-21 19:02:12.546 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:54.253562", "seconds": 54.253562}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:02:12.546104+05:30", "timestamp": 1755783132.546104}}}
{"text": "2025-08-21 19:02:12.546 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:54.254021", "seconds": 54.254021}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:02:12.546563+05:30", "timestamp": 1755783132.546563}}}
{"text": "2025-08-21 19:02:12.547 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:54.254655", "seconds": 54.254655}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:02:12.547197+05:30", "timestamp": 1755783132.547197}}}
{"text": "2025-08-21 19:02:12.548 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:54.255500", "seconds": 54.2555}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:02:12.548042+05:30", "timestamp": 1755783132.548042}}}
{"text": "2025-08-21 19:02:12.548 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:54.256188", "seconds": 54.256188}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:02:12.548730+05:30", "timestamp": 1755783132.54873}}}
{"text": "2025-08-21 19:02:12.549 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:54.256668", "seconds": 54.256668}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:02:12.549210+05:30", "timestamp": 1755783132.54921}}}
{"text": "2025-08-21 19:02:12.549 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:54.257119", "seconds": 54.257119}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:02:12.549661+05:30", "timestamp": 1755783132.549661}}}
{"text": "2025-08-21 19:02:12.550 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:54.257645", "seconds": 54.257645}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:02:12.550187+05:30", "timestamp": 1755783132.550187}}}
{"text": "2025-08-21 19:02:13.533 | INFO     | app.services.dhan_client:get_pnl:489 - Starting accurate P&L calculation\n", "record": {"elapsed": {"repr": "0:00:55.241098", "seconds": 55.241098}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 489, "message": "Starting accurate P&L calculation", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:02:13.533640+05:30", "timestamp": 1755783133.53364}}}
{"text": "2025-08-21 19:02:13.534 | INFO     | app.services.dhan_client:get_pnl:491 - Fetched 5 positions\n", "record": {"elapsed": {"repr": "0:00:55.241637", "seconds": 55.241637}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 491, "message": "Fetched 5 positions", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:02:13.534179+05:30", "timestamp": 1755783133.534179}}}
{"text": "2025-08-21 19:02:13.534 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for RELIANCE: unrealized=-476973.98, today=-476973.98\n", "record": {"elapsed": {"repr": "0:00:55.242225", "seconds": 55.242225}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for RELIANCE: unrealized=-476973.98, today=-476973.98", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:02:13.534767+05:30", "timestamp": 1755783133.534767}}}
{"text": "2025-08-21 19:02:13.535 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for TCS: unrealized=-41388.44, today=-41388.44\n", "record": {"elapsed": {"repr": "0:00:55.242748", "seconds": 55.242748}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for TCS: unrealized=-41388.44, today=-41388.44", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:02:13.535290+05:30", "timestamp": 1755783133.53529}}}
{"text": "2025-08-21 19:02:13.535 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for HDFC: unrealized=1334160.47, today=1334160.47\n", "record": {"elapsed": {"repr": "0:00:55.243400", "seconds": 55.2434}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for HDFC: unrealized=1334160.47, today=1334160.47", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:02:13.535942+05:30", "timestamp": 1755783133.535942}}}
{"text": "2025-08-21 19:02:13.536 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for INFY: unrealized=31393.99, today=31393.99\n", "record": {"elapsed": {"repr": "0:00:55.244133", "seconds": 55.244133}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for INFY: unrealized=31393.99, today=31393.99", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:02:13.536675+05:30", "timestamp": 1755783133.536675}}}
{"text": "2025-08-21 19:02:13.537 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for ICICIBANK: unrealized=-478385.59, today=-478385.59\n", "record": {"elapsed": {"repr": "0:00:55.244695", "seconds": 55.244695}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for ICICIBANK: unrealized=-478385.59, today=-478385.59", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:02:13.537237+05:30", "timestamp": 1755783133.537237}}}
{"text": "2025-08-21 19:02:13.537 | INFO     | app.services.dhan_client:get_pnl:545 - Calculated totals - realized: 0.0, unrealized: 368806.45, day: 368806.45\n", "record": {"elapsed": {"repr": "0:00:55.245221", "seconds": 55.245221}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 545, "message": "Calculated totals - realized: 0.0, unrealized: 368806.45, day: 368806.45", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:02:13.537763+05:30", "timestamp": 1755783133.537763}}}
{"text": "2025-08-21 19:02:13.538 | DEBUG    | app.services.dhan_client:get_pnl:554 - PnL consistency check passed: drift=‚Çπ0.00\n", "record": {"elapsed": {"repr": "0:00:55.245814", "seconds": 55.245814}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 554, "message": "PnL consistency check passed: drift=‚Çπ0.00", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:02:13.538356+05:30", "timestamp": 1755783133.538356}}}
{"text": "2025-08-21 19:02:13.539 | DEBUG    | app.services.dhan_client:get_pnl:558 - Creating PnLTotals...\n", "record": {"elapsed": {"repr": "0:00:55.246717", "seconds": 55.246717}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 558, "message": "Creating PnLTotals...", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:02:13.539259+05:30", "timestamp": 1755783133.539259}}}
{"text": "2025-08-21 19:02:13.540 | DEBUG    | app.services.dhan_client:get_pnl:565 - PnLTotals created successfully\n", "record": {"elapsed": {"repr": "0:00:55.247554", "seconds": 55.247554}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 565, "message": "PnLTotals created successfully", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:02:13.540096+05:30", "timestamp": 1755783133.540096}}}
{"text": "2025-08-21 19:02:13.540 | DEBUG    | app.services.dhan_client:get_pnl:574 - Creating PnL model...\n", "record": {"elapsed": {"repr": "0:00:55.247941", "seconds": 55.247941}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 574, "message": "Creating PnL model...", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:02:13.540483+05:30", "timestamp": 1755783133.540483}}}
{"text": "2025-08-21 19:02:13.540 | DEBUG    | app.services.dhan_client:get_pnl:575 - Model fields: totals=<class 'app.models.schemas.PnLTotals'>, perSymbol=5, updated_at=2025-08-21 19:02:13.534689+05:30, trading_day=2025-08-21\n", "record": {"elapsed": {"repr": "0:00:55.248382", "seconds": 55.248382}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 575, "message": "Model fields: totals=<class 'app.models.schemas.PnLTotals'>, perSymbol=5, updated_at=2025-08-21 19:02:13.534689+05:30, trading_day=2025-08-21", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:02:13.540924+05:30", "timestamp": 1755783133.540924}}}
{"text": "2025-08-21 19:02:13.541 | DEBUG    | app.services.dhan_client:get_pnl:584 - Created PnL model: totals=PnLTotals(realized=0.0, unrealized=368806.45, day=368806.45, currency='INR') per_symbol=[PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1727, avg=618.93, ltp=342.74, unrealized=-476973.98, today_pnl=-476973.98), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=167, avg=948.57, ltp=1196.4, unrealized=-41388.44, today_pnl=-41388.44), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=1347, avg=801.44, ltp=1791.91, unrealized=1334160.47, today_pnl=1334160.47), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=143, avg=1427.62, ltp=1208.08, unrealized=31393.99, today_pnl=31393.99), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=438, avg=1994.48, ltp=902.28, unrealized=-478385.59, today_pnl=-478385.59)] updated_at=datetime.datetime(2025, 8, 21, 19, 2, 13, 534689, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))) trading_day='2025-08-21'\n", "record": {"elapsed": {"repr": "0:00:55.248927", "seconds": 55.248927}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 584, "message": "Created PnL model: totals=PnLTotals(realized=0.0, unrealized=368806.45, day=368806.45, currency='INR') per_symbol=[PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1727, avg=618.93, ltp=342.74, unrealized=-476973.98, today_pnl=-476973.98), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=167, avg=948.57, ltp=1196.4, unrealized=-41388.44, today_pnl=-41388.44), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=1347, avg=801.44, ltp=1791.91, unrealized=1334160.47, today_pnl=1334160.47), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=143, avg=1427.62, ltp=1208.08, unrealized=31393.99, today_pnl=31393.99), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=438, avg=1994.48, ltp=902.28, unrealized=-478385.59, today_pnl=-478385.59)] updated_at=datetime.datetime(2025, 8, 21, 19, 2, 13, 534689, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))) trading_day='2025-08-21'", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:02:13.541469+05:30", "timestamp": 1755783133.541469}}}
{"text": "2025-08-21 19:02:13.542 | DEBUG    | app.services.dhan_client:get_pnl:585 - PnL model fields: {'totals': PnLTotals(realized=0.0, unrealized=368806.45, day=368806.45, currency='INR'), 'per_symbol': [PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1727, avg=618.93, ltp=342.74, unrealized=-476973.98, today_pnl=-476973.98), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=167, avg=948.57, ltp=1196.4, unrealized=-41388.44, today_pnl=-41388.44), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=1347, avg=801.44, ltp=1791.91, unrealized=1334160.47, today_pnl=1334160.47), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=143, avg=1427.62, ltp=1208.08, unrealized=31393.99, today_pnl=31393.99), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=438, avg=1994.48, ltp=902.28, unrealized=-478385.59, today_pnl=-478385.59)], 'updated_at': datetime.datetime(2025, 8, 21, 19, 2, 13, 534689, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))), 'trading_day': '2025-08-21'}\n", "record": {"elapsed": {"repr": "0:00:55.249666", "seconds": 55.249666}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 585, "message": "PnL model fields: {'totals': PnLTotals(realized=0.0, unrealized=368806.45, day=368806.45, currency='INR'), 'per_symbol': [PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1727, avg=618.93, ltp=342.74, unrealized=-476973.98, today_pnl=-476973.98), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=167, avg=948.57, ltp=1196.4, unrealized=-41388.44, today_pnl=-41388.44), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=1347, avg=801.44, ltp=1791.91, unrealized=1334160.47, today_pnl=1334160.47), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=143, avg=1427.62, ltp=1208.08, unrealized=31393.99, today_pnl=31393.99), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=438, avg=1994.48, ltp=902.28, unrealized=-478385.59, today_pnl=-478385.59)], 'updated_at': datetime.datetime(2025, 8, 21, 19, 2, 13, 534689, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))), 'trading_day': '2025-08-21'}", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:02:13.542208+05:30", "timestamp": 1755783133.542208}}}
{"text": "2025-08-21 19:02:13.542 | INFO     | app.services.dhan_client:get_pnl:587 - P&L calculation completed successfully: 5 symbols, unrealized=‚Çπ368806.45\n", "record": {"elapsed": {"repr": "0:00:55.250231", "seconds": 55.250231}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 587, "message": "P&L calculation completed successfully: 5 symbols, unrealized=‚Çπ368806.45", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:02:13.542773+05:30", "timestamp": 1755783133.542773}}}
{"text": "2025-08-21 19:02:13.543 | DEBUG    | app.ws.live:emit_delta:408 - Emitted pnl delta: seq=61\n", "record": {"elapsed": {"repr": "0:00:55.250998", "seconds": 55.250998}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "emit_delta", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 408, "message": "Emitted pnl delta: seq=61", "module": "live", "name": "app.ws.live", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:02:13.543540+05:30", "timestamp": 1755783133.54354}}}
{"text": "2025-08-21 19:02:13.874 | DEBUG    | app.ws.live:emit_delta:408 - Emitted positions delta: seq=62\n", "record": {"elapsed": {"repr": "0:00:55.581950", "seconds": 55.58195}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "emit_delta", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 408, "message": "Emitted positions delta: seq=62", "module": "live", "name": "app.ws.live", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:02:13.874492+05:30", "timestamp": 1755783133.874492}}}
{"text": "2025-08-21 19:02:14.550 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:56.258392", "seconds": 56.258392}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:02:14.550934+05:30", "timestamp": 1755783134.550934}}}
{"text": "2025-08-21 19:02:14.551 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:56.259176", "seconds": 56.259176}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:02:14.551718+05:30", "timestamp": 1755783134.551718}}}
{"text": "2025-08-21 19:02:14.552 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:56.260062", "seconds": 56.260062}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:02:14.552604+05:30", "timestamp": 1755783134.552604}}}
{"text": "2025-08-21 19:02:14.553 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:56.260515", "seconds": 56.260515}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:02:14.553057+05:30", "timestamp": 1755783134.553057}}}
{"text": "2025-08-21 19:02:14.553 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:56.260924", "seconds": 56.260924}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:02:14.553466+05:30", "timestamp": 1755783134.553466}}}
{"text": "2025-08-21 19:02:14.553 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:56.261405", "seconds": 56.261405}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:02:14.553947+05:30", "timestamp": 1755783134.553947}}}
{"text": "2025-08-21 19:02:14.554 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:56.261918", "seconds": 56.261918}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:02:14.554460+05:30", "timestamp": 1755783134.55446}}}
{"text": "2025-08-21 19:02:14.555 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:56.262521", "seconds": 56.262521}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:02:14.555063+05:30", "timestamp": 1755783134.555063}}}
{"text": "2025-08-21 19:02:14.555 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:56.263359", "seconds": 56.263359}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:02:14.555901+05:30", "timestamp": 1755783134.555901}}}
{"text": "2025-08-21 19:02:14.556 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:56.263911", "seconds": 56.263911}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:02:14.556453+05:30", "timestamp": 1755783134.556453}}}
{"text": "2025-08-21 19:02:15.142 | INFO     | app.services.dhan_client:get_pnl:489 - Starting accurate P&L calculation\n", "record": {"elapsed": {"repr": "0:00:56.850375", "seconds": 56.850375}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 489, "message": "Starting accurate P&L calculation", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:02:15.142917+05:30", "timestamp": 1755783135.142917}}}
{"text": "2025-08-21 19:02:15.144 | INFO     | app.services.dhan_client:get_pnl:491 - Fetched 5 positions\n", "record": {"elapsed": {"repr": "0:00:56.851461", "seconds": 56.851461}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 491, "message": "Fetched 5 positions", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:02:15.144003+05:30", "timestamp": 1755783135.144003}}}
{"text": "2025-08-21 19:02:15.144 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for RELIANCE: unrealized=-467477.8, today=-467477.8\n", "record": {"elapsed": {"repr": "0:00:56.852079", "seconds": 56.852079}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for RELIANCE: unrealized=-467477.8, today=-467477.8", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:02:15.144621+05:30", "timestamp": 1755783135.144621}}}
{"text": "2025-08-21 19:02:15.145 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for TCS: unrealized=-42895.93, today=-42895.93\n", "record": {"elapsed": {"repr": "0:00:56.852773", "seconds": 56.852773}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for TCS: unrealized=-42895.93, today=-42895.93", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:02:15.145315+05:30", "timestamp": 1755783135.145315}}}
{"text": "2025-08-21 19:02:15.146 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for HDFC: unrealized=1375904.09, today=1375904.09\n", "record": {"elapsed": {"repr": "0:00:56.853479", "seconds": 56.853479}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for HDFC: unrealized=1375904.09, today=1375904.09", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:02:15.146021+05:30", "timestamp": 1755783135.146021}}}
{"text": "2025-08-21 19:02:15.146 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for INFY: unrealized=31973.45, today=31973.45\n", "record": {"elapsed": {"repr": "0:00:56.854308", "seconds": 56.854308}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for INFY: unrealized=31973.45, today=31973.45", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:02:15.146850+05:30", "timestamp": 1755783135.14685}}}
{"text": "2025-08-21 19:02:15.147 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for ICICIBANK: unrealized=-484710.83, today=-484710.83\n", "record": {"elapsed": {"repr": "0:00:56.854911", "seconds": 56.854911}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for ICICIBANK: unrealized=-484710.83, today=-484710.83", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:02:15.147453+05:30", "timestamp": 1755783135.147453}}}
{"text": "2025-08-21 19:02:15.147 | INFO     | app.services.dhan_client:get_pnl:545 - Calculated totals - realized: 0.0, unrealized: 412792.98, day: 412792.98\n", "record": {"elapsed": {"repr": "0:00:56.855378", "seconds": 56.855378}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 545, "message": "Calculated totals - realized: 0.0, unrealized: 412792.98, day: 412792.98", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:02:15.147920+05:30", "timestamp": 1755783135.14792}}}
{"text": "2025-08-21 19:02:15.148 | DEBUG    | app.services.dhan_client:get_pnl:554 - PnL consistency check passed: drift=‚Çπ0.00\n", "record": {"elapsed": {"repr": "0:00:56.855804", "seconds": 56.855804}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 554, "message": "PnL consistency check passed: drift=‚Çπ0.00", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:02:15.148346+05:30", "timestamp": 1755783135.148346}}}
{"text": "2025-08-21 19:02:15.148 | DEBUG    | app.services.dhan_client:get_pnl:558 - Creating PnLTotals...\n", "record": {"elapsed": {"repr": "0:00:56.856328", "seconds": 56.856328}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 558, "message": "Creating PnLTotals...", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:02:15.148870+05:30", "timestamp": 1755783135.14887}}}
{"text": "2025-08-21 19:02:15.149 | DEBUG    | app.services.dhan_client:get_pnl:565 - PnLTotals created successfully\n", "record": {"elapsed": {"repr": "0:00:56.856686", "seconds": 56.856686}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 565, "message": "PnLTotals created successfully", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:02:15.149228+05:30", "timestamp": 1755783135.149228}}}
{"text": "2025-08-21 19:02:15.149 | DEBUG    | app.services.dhan_client:get_pnl:574 - Creating PnL model...\n", "record": {"elapsed": {"repr": "0:00:56.857069", "seconds": 56.857069}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 574, "message": "Creating PnL model...", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:02:15.149611+05:30", "timestamp": 1755783135.149611}}}
{"text": "2025-08-21 19:02:15.149 | DEBUG    | app.services.dhan_client:get_pnl:575 - Model fields: totals=<class 'app.models.schemas.PnLTotals'>, perSymbol=5, updated_at=2025-08-21 19:02:15.144529+05:30, trading_day=2025-08-21\n", "record": {"elapsed": {"repr": "0:00:56.857416", "seconds": 56.857416}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 575, "message": "Model fields: totals=<class 'app.models.schemas.PnLTotals'>, perSymbol=5, updated_at=2025-08-21 19:02:15.144529+05:30, trading_day=2025-08-21", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:02:15.149958+05:30", "timestamp": 1755783135.149958}}}
{"text": "2025-08-21 19:02:15.150 | DEBUG    | app.services.dhan_client:get_pnl:584 - Created PnL model: totals=PnLTotals(realized=0.0, unrealized=412792.98, day=412792.98, currency='INR') per_symbol=[PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1727, avg=618.93, ltp=348.24, unrealized=-467477.8, today_pnl=-467477.8), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=167, avg=948.57, ltp=1205.43, unrealized=-42895.93, today_pnl=-42895.93), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=1347, avg=801.44, ltp=1822.9, unrealized=1375904.09, today_pnl=1375904.09), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=143, avg=1427.62, ltp=1204.03, unrealized=31973.45, today_pnl=31973.45), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=438, avg=1994.48, ltp=887.83, unrealized=-484710.83, today_pnl=-484710.83)] updated_at=datetime.datetime(2025, 8, 21, 19, 2, 15, 144529, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))) trading_day='2025-08-21'\n", "record": {"elapsed": {"repr": "0:00:56.858062", "seconds": 56.858062}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 584, "message": "Created PnL model: totals=PnLTotals(realized=0.0, unrealized=412792.98, day=412792.98, currency='INR') per_symbol=[PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1727, avg=618.93, ltp=348.24, unrealized=-467477.8, today_pnl=-467477.8), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=167, avg=948.57, ltp=1205.43, unrealized=-42895.93, today_pnl=-42895.93), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=1347, avg=801.44, ltp=1822.9, unrealized=1375904.09, today_pnl=1375904.09), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=143, avg=1427.62, ltp=1204.03, unrealized=31973.45, today_pnl=31973.45), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=438, avg=1994.48, ltp=887.83, unrealized=-484710.83, today_pnl=-484710.83)] updated_at=datetime.datetime(2025, 8, 21, 19, 2, 15, 144529, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))) trading_day='2025-08-21'", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:02:15.150604+05:30", "timestamp": 1755783135.150604}}}
{"text": "2025-08-21 19:02:15.151 | DEBUG    | app.services.dhan_client:get_pnl:585 - PnL model fields: {'totals': PnLTotals(realized=0.0, unrealized=412792.98, day=412792.98, currency='INR'), 'per_symbol': [PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1727, avg=618.93, ltp=348.24, unrealized=-467477.8, today_pnl=-467477.8), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=167, avg=948.57, ltp=1205.43, unrealized=-42895.93, today_pnl=-42895.93), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=1347, avg=801.44, ltp=1822.9, unrealized=1375904.09, today_pnl=1375904.09), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=143, avg=1427.62, ltp=1204.03, unrealized=31973.45, today_pnl=31973.45), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=438, avg=1994.48, ltp=887.83, unrealized=-484710.83, today_pnl=-484710.83)], 'updated_at': datetime.datetime(2025, 8, 21, 19, 2, 15, 144529, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))), 'trading_day': '2025-08-21'}\n", "record": {"elapsed": {"repr": "0:00:56.859038", "seconds": 56.859038}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 585, "message": "PnL model fields: {'totals': PnLTotals(realized=0.0, unrealized=412792.98, day=412792.98, currency='INR'), 'per_symbol': [PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1727, avg=618.93, ltp=348.24, unrealized=-467477.8, today_pnl=-467477.8), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=167, avg=948.57, ltp=1205.43, unrealized=-42895.93, today_pnl=-42895.93), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=1347, avg=801.44, ltp=1822.9, unrealized=1375904.09, today_pnl=1375904.09), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=143, avg=1427.62, ltp=1204.03, unrealized=31973.45, today_pnl=31973.45), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=438, avg=1994.48, ltp=887.83, unrealized=-484710.83, today_pnl=-484710.83)], 'updated_at': datetime.datetime(2025, 8, 21, 19, 2, 15, 144529, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))), 'trading_day': '2025-08-21'}", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:02:15.151580+05:30", "timestamp": 1755783135.15158}}}
{"text": "2025-08-21 19:02:15.152 | INFO     | app.services.dhan_client:get_pnl:587 - P&L calculation completed successfully: 5 symbols, unrealized=‚Çπ412792.98\n", "record": {"elapsed": {"repr": "0:00:56.860011", "seconds": 56.860011}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 587, "message": "P&L calculation completed successfully: 5 symbols, unrealized=‚Çπ412792.98", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:02:15.152553+05:30", "timestamp": 1755783135.152553}}}
{"text": "2025-08-21 19:02:15.153 | DEBUG    | app.ws.live:emit_delta:408 - Emitted pnl delta: seq=63\n", "record": {"elapsed": {"repr": "0:00:56.860842", "seconds": 56.860842}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "emit_delta", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 408, "message": "Emitted pnl delta: seq=63", "module": "live", "name": "app.ws.live", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:02:15.153384+05:30", "timestamp": 1755783135.153384}}}
{"text": "2025-08-21 19:02:15.648 | DEBUG    | app.ws.live:emit_delta:408 - Emitted positions delta: seq=64\n", "record": {"elapsed": {"repr": "0:00:57.355708", "seconds": 57.355708}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "emit_delta", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 408, "message": "Emitted positions delta: seq=64", "module": "live", "name": "app.ws.live", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:02:15.648250+05:30", "timestamp": 1755783135.64825}}}
{"text": "2025-08-21 19:02:16.557 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:58.264768", "seconds": 58.264768}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:02:16.557310+05:30", "timestamp": 1755783136.55731}}}
{"text": "2025-08-21 19:02:16.558 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:58.265553", "seconds": 58.265553}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:02:16.558095+05:30", "timestamp": 1755783136.558095}}}
{"text": "2025-08-21 19:02:16.558 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:58.265996", "seconds": 58.265996}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:02:16.558538+05:30", "timestamp": 1755783136.558538}}}
{"text": "2025-08-21 19:02:16.559 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:58.266605", "seconds": 58.266605}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:02:16.559147+05:30", "timestamp": 1755783136.559147}}}
{"text": "2025-08-21 19:02:16.559 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:58.267280", "seconds": 58.26728}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:02:16.559822+05:30", "timestamp": 1755783136.559822}}}
{"text": "2025-08-21 19:02:16.560 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:58.267713", "seconds": 58.267713}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:02:16.560255+05:30", "timestamp": 1755783136.560255}}}
{"text": "2025-08-21 19:02:16.560 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:58.268073", "seconds": 58.268073}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:02:16.560615+05:30", "timestamp": 1755783136.560615}}}
{"text": "2025-08-21 19:02:16.560 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:58.268422", "seconds": 58.268422}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:02:16.560964+05:30", "timestamp": 1755783136.560964}}}
{"text": "2025-08-21 19:02:16.561 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:58.268863", "seconds": 58.268863}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:02:16.561405+05:30", "timestamp": 1755783136.561405}}}
{"text": "2025-08-21 19:02:16.562 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:58.269525", "seconds": 58.269525}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:02:16.562067+05:30", "timestamp": 1755783136.562067}}}
{"text": "2025-08-21 19:02:17.056 | INFO     | app.services.dhan_client:get_pnl:489 - Starting accurate P&L calculation\n", "record": {"elapsed": {"repr": "0:00:58.763978", "seconds": 58.763978}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 489, "message": "Starting accurate P&L calculation", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:02:17.056520+05:30", "timestamp": 1755783137.05652}}}
{"text": "2025-08-21 19:02:17.057 | INFO     | app.services.dhan_client:get_pnl:491 - Fetched 5 positions\n", "record": {"elapsed": {"repr": "0:00:58.764496", "seconds": 58.764496}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 491, "message": "Fetched 5 positions", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:02:17.057038+05:30", "timestamp": 1755783137.057038}}}
{"text": "2025-08-21 19:02:17.057 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for RELIANCE: unrealized=-458723.05, today=-458723.05\n", "record": {"elapsed": {"repr": "0:00:58.764889", "seconds": 58.764889}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for RELIANCE: unrealized=-458723.05, today=-458723.05", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:02:17.057431+05:30", "timestamp": 1755783137.057431}}}
{"text": "2025-08-21 19:02:17.057 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for TCS: unrealized=-45100.52, today=-45100.52\n", "record": {"elapsed": {"repr": "0:00:58.765388", "seconds": 58.765388}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for TCS: unrealized=-45100.52, today=-45100.52", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:02:17.057930+05:30", "timestamp": 1755783137.05793}}}
{"text": "2025-08-21 19:02:17.058 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for HDFC: unrealized=1420589.63, today=1420589.63\n", "record": {"elapsed": {"repr": "0:00:58.765928", "seconds": 58.765928}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for HDFC: unrealized=1420589.63, today=1420589.63", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:02:17.058470+05:30", "timestamp": 1755783137.05847}}}
{"text": "2025-08-21 19:02:17.059 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for INFY: unrealized=29490.48, today=29490.48\n", "record": {"elapsed": {"repr": "0:00:58.766859", "seconds": 58.766859}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for INFY: unrealized=29490.48, today=29490.48", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:02:17.059401+05:30", "timestamp": 1755783137.059401}}}
{"text": "2025-08-21 19:02:17.059 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for ICICIBANK: unrealized=-491945.84, today=-491945.84\n", "record": {"elapsed": {"repr": "0:00:58.767301", "seconds": 58.767301}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for ICICIBANK: unrealized=-491945.84, today=-491945.84", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:02:17.059843+05:30", "timestamp": 1755783137.059843}}}
{"text": "2025-08-21 19:02:17.060 | INFO     | app.services.dhan_client:get_pnl:545 - Calculated totals - realized: 0.0, unrealized: 454310.7, day: 454310.7\n", "record": {"elapsed": {"repr": "0:00:58.767676", "seconds": 58.767676}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 545, "message": "Calculated totals - realized: 0.0, unrealized: 454310.7, day: 454310.7", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:02:17.060218+05:30", "timestamp": 1755783137.060218}}}
{"text": "2025-08-21 19:02:17.060 | DEBUG    | app.services.dhan_client:get_pnl:554 - PnL consistency check passed: drift=‚Çπ0.00\n", "record": {"elapsed": {"repr": "0:00:58.768075", "seconds": 58.768075}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 554, "message": "PnL consistency check passed: drift=‚Çπ0.00", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:02:17.060617+05:30", "timestamp": 1755783137.060617}}}
{"text": "2025-08-21 19:02:17.061 | DEBUG    | app.services.dhan_client:get_pnl:558 - Creating PnLTotals...\n", "record": {"elapsed": {"repr": "0:00:58.768537", "seconds": 58.768537}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 558, "message": "Creating PnLTotals...", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:02:17.061079+05:30", "timestamp": 1755783137.061079}}}
{"text": "2025-08-21 19:02:17.061 | DEBUG    | app.services.dhan_client:get_pnl:565 - PnLTotals created successfully\n", "record": {"elapsed": {"repr": "0:00:58.768980", "seconds": 58.76898}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 565, "message": "PnLTotals created successfully", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:02:17.061522+05:30", "timestamp": 1755783137.061522}}}
{"text": "2025-08-21 19:02:17.062 | DEBUG    | app.services.dhan_client:get_pnl:574 - Creating PnL model...\n", "record": {"elapsed": {"repr": "0:00:58.769668", "seconds": 58.769668}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 574, "message": "Creating PnL model...", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:02:17.062210+05:30", "timestamp": 1755783137.06221}}}
{"text": "2025-08-21 19:02:17.063 | DEBUG    | app.services.dhan_client:get_pnl:575 - Model fields: totals=<class 'app.models.schemas.PnLTotals'>, perSymbol=5, updated_at=2025-08-21 19:02:17.057378+05:30, trading_day=2025-08-21\n", "record": {"elapsed": {"repr": "0:00:58.770572", "seconds": 58.770572}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 575, "message": "Model fields: totals=<class 'app.models.schemas.PnLTotals'>, perSymbol=5, updated_at=2025-08-21 19:02:17.057378+05:30, trading_day=2025-08-21", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:02:17.063114+05:30", "timestamp": 1755783137.063114}}}
{"text": "2025-08-21 19:02:17.063 | DEBUG    | app.services.dhan_client:get_pnl:584 - Created PnL model: totals=PnLTotals(realized=0.0, unrealized=454310.7, day=454310.7, currency='INR') per_symbol=[PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1727, avg=618.93, ltp=353.31, unrealized=-458723.05, today_pnl=-458723.05), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=167, avg=948.57, ltp=1218.63, unrealized=-45100.52, today_pnl=-45100.52), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=1347, avg=801.44, ltp=1856.07, unrealized=1420589.63, today_pnl=1420589.63), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=143, avg=1427.62, ltp=1221.39, unrealized=29490.48, today_pnl=29490.48), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=438, avg=1994.48, ltp=871.32, unrealized=-491945.84, today_pnl=-491945.84)] updated_at=datetime.datetime(2025, 8, 21, 19, 2, 17, 57378, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))) trading_day='2025-08-21'\n", "record": {"elapsed": {"repr": "0:00:58.771108", "seconds": 58.771108}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 584, "message": "Created PnL model: totals=PnLTotals(realized=0.0, unrealized=454310.7, day=454310.7, currency='INR') per_symbol=[PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1727, avg=618.93, ltp=353.31, unrealized=-458723.05, today_pnl=-458723.05), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=167, avg=948.57, ltp=1218.63, unrealized=-45100.52, today_pnl=-45100.52), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=1347, avg=801.44, ltp=1856.07, unrealized=1420589.63, today_pnl=1420589.63), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=143, avg=1427.62, ltp=1221.39, unrealized=29490.48, today_pnl=29490.48), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=438, avg=1994.48, ltp=871.32, unrealized=-491945.84, today_pnl=-491945.84)] updated_at=datetime.datetime(2025, 8, 21, 19, 2, 17, 57378, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))) trading_day='2025-08-21'", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:02:17.063650+05:30", "timestamp": 1755783137.06365}}}
{"text": "2025-08-21 19:02:17.064 | DEBUG    | app.services.dhan_client:get_pnl:585 - PnL model fields: {'totals': PnLTotals(realized=0.0, unrealized=454310.7, day=454310.7, currency='INR'), 'per_symbol': [PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1727, avg=618.93, ltp=353.31, unrealized=-458723.05, today_pnl=-458723.05), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=167, avg=948.57, ltp=1218.63, unrealized=-45100.52, today_pnl=-45100.52), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=1347, avg=801.44, ltp=1856.07, unrealized=1420589.63, today_pnl=1420589.63), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=143, avg=1427.62, ltp=1221.39, unrealized=29490.48, today_pnl=29490.48), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=438, avg=1994.48, ltp=871.32, unrealized=-491945.84, today_pnl=-491945.84)], 'updated_at': datetime.datetime(2025, 8, 21, 19, 2, 17, 57378, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))), 'trading_day': '2025-08-21'}\n", "record": {"elapsed": {"repr": "0:00:58.771658", "seconds": 58.771658}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 585, "message": "PnL model fields: {'totals': PnLTotals(realized=0.0, unrealized=454310.7, day=454310.7, currency='INR'), 'per_symbol': [PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1727, avg=618.93, ltp=353.31, unrealized=-458723.05, today_pnl=-458723.05), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=167, avg=948.57, ltp=1218.63, unrealized=-45100.52, today_pnl=-45100.52), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=1347, avg=801.44, ltp=1856.07, unrealized=1420589.63, today_pnl=1420589.63), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=143, avg=1427.62, ltp=1221.39, unrealized=29490.48, today_pnl=29490.48), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=438, avg=1994.48, ltp=871.32, unrealized=-491945.84, today_pnl=-491945.84)], 'updated_at': datetime.datetime(2025, 8, 21, 19, 2, 17, 57378, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))), 'trading_day': '2025-08-21'}", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:02:17.064200+05:30", "timestamp": 1755783137.0642}}}
{"text": "2025-08-21 19:02:17.064 | INFO     | app.services.dhan_client:get_pnl:587 - P&L calculation completed successfully: 5 symbols, unrealized=‚Çπ454310.70\n", "record": {"elapsed": {"repr": "0:00:58.772048", "seconds": 58.772048}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 587, "message": "P&L calculation completed successfully: 5 symbols, unrealized=‚Çπ454310.70", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:02:17.064590+05:30", "timestamp": 1755783137.06459}}}
{"text": "2025-08-21 19:02:17.065 | DEBUG    | app.ws.live:emit_delta:408 - Emitted pnl delta: seq=65\n", "record": {"elapsed": {"repr": "0:00:58.772564", "seconds": 58.772564}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "emit_delta", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 408, "message": "Emitted pnl delta: seq=65", "module": "live", "name": "app.ws.live", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:02:17.065106+05:30", "timestamp": 1755783137.065106}}}
{"text": "2025-08-21 19:02:17.305 | DEBUG    | app.ws.live:emit_delta:408 - Emitted positions delta: seq=66\n", "record": {"elapsed": {"repr": "0:00:59.013102", "seconds": 59.013102}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "emit_delta", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 408, "message": "Emitted positions delta: seq=66", "module": "live", "name": "app.ws.live", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:02:17.305644+05:30", "timestamp": 1755783137.305644}}}
{"text": "2025-08-21 19:02:18.563 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:01:00.270540", "seconds": 60.27054}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:02:18.563082+05:30", "timestamp": 1755783138.563082}}}
{"text": "2025-08-21 19:02:18.563 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:01:00.271150", "seconds": 60.27115}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:02:18.563692+05:30", "timestamp": 1755783138.563692}}}
{"text": "2025-08-21 19:02:18.564 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:01:00.271557", "seconds": 60.271557}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:02:18.564099+05:30", "timestamp": 1755783138.564099}}}
{"text": "2025-08-21 19:02:18.564 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:01:00.271922", "seconds": 60.271922}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:02:18.564464+05:30", "timestamp": 1755783138.564464}}}
{"text": "2025-08-21 19:02:18.564 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:01:00.272378", "seconds": 60.272378}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:02:18.564920+05:30", "timestamp": 1755783138.56492}}}
{"text": "2025-08-21 19:02:18.565 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:01:00.272792", "seconds": 60.272792}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:02:18.565334+05:30", "timestamp": 1755783138.565334}}}
{"text": "2025-08-21 19:02:18.565 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:01:00.273281", "seconds": 60.273281}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:02:18.565823+05:30", "timestamp": 1755783138.565823}}}
{"text": "2025-08-21 19:02:18.566 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:01:00.274123", "seconds": 60.274123}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:02:18.566665+05:30", "timestamp": 1755783138.566665}}}
{"text": "2025-08-21 19:02:18.567 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:01:00.274670", "seconds": 60.27467}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:02:18.567212+05:30", "timestamp": 1755783138.567212}}}
{"text": "2025-08-21 19:02:18.567 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:01:00.275022", "seconds": 60.275022}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:02:18.567564+05:30", "timestamp": 1755783138.567564}}}
{"text": "2025-08-21 19:02:18.922 | INFO     | app.services.dhan_client:get_pnl:489 - Starting accurate P&L calculation\n", "record": {"elapsed": {"repr": "0:01:00.629563", "seconds": 60.629563}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 489, "message": "Starting accurate P&L calculation", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:02:18.922105+05:30", "timestamp": 1755783138.922105}}}
{"text": "2025-08-21 19:02:18.922 | INFO     | app.services.dhan_client:get_pnl:491 - Fetched 5 positions\n", "record": {"elapsed": {"repr": "0:01:00.630134", "seconds": 60.630134}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 491, "message": "Fetched 5 positions", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:02:18.922676+05:30", "timestamp": 1755783138.922676}}}
{"text": "2025-08-21 19:02:18.923 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for RELIANCE: unrealized=-456572.8, today=-456572.8\n", "record": {"elapsed": {"repr": "0:01:00.630546", "seconds": 60.630546}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for RELIANCE: unrealized=-456572.8, today=-456572.8", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:02:18.923088+05:30", "timestamp": 1755783138.923088}}}
{"text": "2025-08-21 19:02:18.923 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for TCS: unrealized=-46521.89, today=-46521.89\n", "record": {"elapsed": {"repr": "0:01:00.631013", "seconds": 60.631013}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for TCS: unrealized=-46521.89, today=-46521.89", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:02:18.923555+05:30", "timestamp": 1755783138.923555}}}
{"text": "2025-08-21 19:02:18.924 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for HDFC: unrealized=1465720.6, today=1465720.6\n", "record": {"elapsed": {"repr": "0:01:00.631587", "seconds": 60.631587}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for HDFC: unrealized=1465720.6, today=1465720.6", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:02:18.924129+05:30", "timestamp": 1755783138.924129}}}
{"text": "2025-08-21 19:02:18.925 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for INFY: unrealized=28644.43, today=28644.43\n", "record": {"elapsed": {"repr": "0:01:00.632519", "seconds": 60.632519}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for INFY: unrealized=28644.43, today=28644.43", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:02:18.925061+05:30", "timestamp": 1755783138.925061}}}
{"text": "2025-08-21 19:02:18.925 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for ICICIBANK: unrealized=-490977.2, today=-490977.2\n", "record": {"elapsed": {"repr": "0:01:00.633089", "seconds": 60.633089}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for ICICIBANK: unrealized=-490977.2, today=-490977.2", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:02:18.925631+05:30", "timestamp": 1755783138.925631}}}
{"text": "2025-08-21 19:02:18.926 | INFO     | app.services.dhan_client:get_pnl:545 - Calculated totals - realized: 0.0, unrealized: 500293.14, day: 500293.14\n", "record": {"elapsed": {"repr": "0:01:00.633549", "seconds": 60.633549}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 545, "message": "Calculated totals - realized: 0.0, unrealized: 500293.14, day: 500293.14", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:02:18.926091+05:30", "timestamp": 1755783138.926091}}}
{"text": "2025-08-21 19:02:18.926 | DEBUG    | app.services.dhan_client:get_pnl:554 - PnL consistency check passed: drift=‚Çπ0.00\n", "record": {"elapsed": {"repr": "0:01:00.634040", "seconds": 60.63404}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 554, "message": "PnL consistency check passed: drift=‚Çπ0.00", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:02:18.926582+05:30", "timestamp": 1755783138.926582}}}
{"text": "2025-08-21 19:02:18.927 | DEBUG    | app.services.dhan_client:get_pnl:558 - Creating PnLTotals...\n", "record": {"elapsed": {"repr": "0:01:00.634690", "seconds": 60.63469}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 558, "message": "Creating PnLTotals...", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:02:18.927232+05:30", "timestamp": 1755783138.927232}}}
{"text": "2025-08-21 19:02:18.928 | DEBUG    | app.services.dhan_client:get_pnl:565 - PnLTotals created successfully\n", "record": {"elapsed": {"repr": "0:01:00.635680", "seconds": 60.63568}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 565, "message": "PnLTotals created successfully", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:02:18.928222+05:30", "timestamp": 1755783138.928222}}}
{"text": "2025-08-21 19:02:18.928 | DEBUG    | app.services.dhan_client:get_pnl:574 - Creating PnL model...\n", "record": {"elapsed": {"repr": "0:01:00.636252", "seconds": 60.636252}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 574, "message": "Creating PnL model...", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:02:18.928794+05:30", "timestamp": 1755783138.928794}}}
{"text": "2025-08-21 19:02:18.929 | DEBUG    | app.services.dhan_client:get_pnl:575 - Model fields: totals=<class 'app.models.schemas.PnLTotals'>, perSymbol=5, updated_at=2025-08-21 19:02:18.923029+05:30, trading_day=2025-08-21\n", "record": {"elapsed": {"repr": "0:01:00.636671", "seconds": 60.636671}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 575, "message": "Model fields: totals=<class 'app.models.schemas.PnLTotals'>, perSymbol=5, updated_at=2025-08-21 19:02:18.923029+05:30, trading_day=2025-08-21", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:02:18.929213+05:30", "timestamp": 1755783138.929213}}}
{"text": "2025-08-21 19:02:18.929 | DEBUG    | app.services.dhan_client:get_pnl:584 - Created PnL model: totals=PnLTotals(realized=0.0, unrealized=500293.14, day=500293.14, currency='INR') per_symbol=[PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1727, avg=618.93, ltp=354.56, unrealized=-456572.8, today_pnl=-456572.8), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=167, avg=948.57, ltp=1227.14, unrealized=-46521.89, today_pnl=-46521.89), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=1347, avg=801.44, ltp=1889.58, unrealized=1465720.6, today_pnl=1465720.6), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=143, avg=1427.62, ltp=1227.31, unrealized=28644.43, today_pnl=28644.43), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=438, avg=1994.48, ltp=873.53, unrealized=-490977.2, today_pnl=-490977.2)] updated_at=datetime.datetime(2025, 8, 21, 19, 2, 18, 923029, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))) trading_day='2025-08-21'\n", "record": {"elapsed": {"repr": "0:01:00.637184", "seconds": 60.637184}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 584, "message": "Created PnL model: totals=PnLTotals(realized=0.0, unrealized=500293.14, day=500293.14, currency='INR') per_symbol=[PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1727, avg=618.93, ltp=354.56, unrealized=-456572.8, today_pnl=-456572.8), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=167, avg=948.57, ltp=1227.14, unrealized=-46521.89, today_pnl=-46521.89), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=1347, avg=801.44, ltp=1889.58, unrealized=1465720.6, today_pnl=1465720.6), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=143, avg=1427.62, ltp=1227.31, unrealized=28644.43, today_pnl=28644.43), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=438, avg=1994.48, ltp=873.53, unrealized=-490977.2, today_pnl=-490977.2)] updated_at=datetime.datetime(2025, 8, 21, 19, 2, 18, 923029, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))) trading_day='2025-08-21'", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:02:18.929726+05:30", "timestamp": 1755783138.929726}}}
{"text": "2025-08-21 19:02:18.930 | DEBUG    | app.services.dhan_client:get_pnl:585 - PnL model fields: {'totals': PnLTotals(realized=0.0, unrealized=500293.14, day=500293.14, currency='INR'), 'per_symbol': [PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1727, avg=618.93, ltp=354.56, unrealized=-456572.8, today_pnl=-456572.8), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=167, avg=948.57, ltp=1227.14, unrealized=-46521.89, today_pnl=-46521.89), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=1347, avg=801.44, ltp=1889.58, unrealized=1465720.6, today_pnl=1465720.6), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=143, avg=1427.62, ltp=1227.31, unrealized=28644.43, today_pnl=28644.43), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=438, avg=1994.48, ltp=873.53, unrealized=-490977.2, today_pnl=-490977.2)], 'updated_at': datetime.datetime(2025, 8, 21, 19, 2, 18, 923029, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))), 'trading_day': '2025-08-21'}\n", "record": {"elapsed": {"repr": "0:01:00.637857", "seconds": 60.637857}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 585, "message": "PnL model fields: {'totals': PnLTotals(realized=0.0, unrealized=500293.14, day=500293.14, currency='INR'), 'per_symbol': [PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1727, avg=618.93, ltp=354.56, unrealized=-456572.8, today_pnl=-456572.8), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=167, avg=948.57, ltp=1227.14, unrealized=-46521.89, today_pnl=-46521.89), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=1347, avg=801.44, ltp=1889.58, unrealized=1465720.6, today_pnl=1465720.6), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=143, avg=1427.62, ltp=1227.31, unrealized=28644.43, today_pnl=28644.43), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=438, avg=1994.48, ltp=873.53, unrealized=-490977.2, today_pnl=-490977.2)], 'updated_at': datetime.datetime(2025, 8, 21, 19, 2, 18, 923029, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))), 'trading_day': '2025-08-21'}", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:02:18.930399+05:30", "timestamp": 1755783138.930399}}}
{"text": "2025-08-21 19:02:18.930 | INFO     | app.services.dhan_client:get_pnl:587 - P&L calculation completed successfully: 5 symbols, unrealized=‚Çπ500293.14\n", "record": {"elapsed": {"repr": "0:01:00.638347", "seconds": 60.638347}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 587, "message": "P&L calculation completed successfully: 5 symbols, unrealized=‚Çπ500293.14", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:02:18.930889+05:30", "timestamp": 1755783138.930889}}}
{"text": "2025-08-21 19:02:18.931 | DEBUG    | app.ws.live:emit_delta:408 - Emitted pnl delta: seq=67\n", "record": {"elapsed": {"repr": "0:01:00.638994", "seconds": 60.638994}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "emit_delta", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 408, "message": "Emitted pnl delta: seq=67", "module": "live", "name": "app.ws.live", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:02:18.931536+05:30", "timestamp": 1755783138.931536}}}
{"text": "2025-08-21 19:02:19.288 | DEBUG    | app.ws.live:emit_delta:408 - Emitted positions delta: seq=68\n", "record": {"elapsed": {"repr": "0:01:00.996254", "seconds": 60.996254}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "emit_delta", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 408, "message": "Emitted positions delta: seq=68", "module": "live", "name": "app.ws.live", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:02:19.288796+05:30", "timestamp": 1755783139.288796}}}
{"text": "2025-08-21 19:02:20.568 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:01:02.275852", "seconds": 62.275852}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:02:20.568394+05:30", "timestamp": 1755783140.568394}}}
{"text": "2025-08-21 19:02:20.569 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:01:02.276566", "seconds": 62.276566}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:02:20.569108+05:30", "timestamp": 1755783140.569108}}}
{"text": "2025-08-21 19:02:20.569 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:01:02.276960", "seconds": 62.27696}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:02:20.569502+05:30", "timestamp": 1755783140.569502}}}
{"text": "2025-08-21 19:02:20.569 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:01:02.277312", "seconds": 62.277312}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:02:20.569854+05:30", "timestamp": 1755783140.569854}}}
{"text": "2025-08-21 19:02:20.570 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:01:02.277695", "seconds": 62.277695}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:02:20.570237+05:30", "timestamp": 1755783140.570237}}}
{"text": "2025-08-21 19:02:20.570 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:01:02.278123", "seconds": 62.278123}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:02:20.570665+05:30", "timestamp": 1755783140.570665}}}
{"text": "2025-08-21 19:02:20.571 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:01:02.278581", "seconds": 62.278581}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:02:20.571123+05:30", "timestamp": 1755783140.571123}}}
{"text": "2025-08-21 19:02:20.571 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:01:02.278992", "seconds": 62.278992}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:02:20.571534+05:30", "timestamp": 1755783140.571534}}}
{"text": "2025-08-21 19:02:20.571 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:01:02.279447", "seconds": 62.279447}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:02:20.571989+05:30", "timestamp": 1755783140.571989}}}
{"text": "2025-08-21 19:02:20.572 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:01:02.279834", "seconds": 62.279834}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:02:20.572376+05:30", "timestamp": 1755783140.572376}}}
{"text": "2025-08-21 19:02:20.729 | INFO     | app.services.dhan_client:get_pnl:489 - Starting accurate P&L calculation\n", "record": {"elapsed": {"repr": "0:01:02.436983", "seconds": 62.436983}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 489, "message": "Starting accurate P&L calculation", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:02:20.729525+05:30", "timestamp": 1755783140.729525}}}
{"text": "2025-08-21 19:02:20.730 | INFO     | app.services.dhan_client:get_pnl:491 - Fetched 5 positions\n", "record": {"elapsed": {"repr": "0:01:02.437513", "seconds": 62.437513}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 491, "message": "Fetched 5 positions", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:02:20.730055+05:30", "timestamp": 1755783140.730055}}}
{"text": "2025-08-21 19:02:20.730 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for RELIANCE: unrealized=-447068.58, today=-447068.58\n", "record": {"elapsed": {"repr": "0:01:02.437974", "seconds": 62.437974}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for RELIANCE: unrealized=-447068.58, today=-447068.58", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:02:20.730516+05:30", "timestamp": 1755783140.730516}}}
{"text": "2025-08-21 19:02:20.731 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for TCS: unrealized=-50289.32, today=-50289.32\n", "record": {"elapsed": {"repr": "0:01:02.438464", "seconds": 62.438464}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for TCS: unrealized=-50289.32, today=-50289.32", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:02:20.731006+05:30", "timestamp": 1755783140.731006}}}
{"text": "2025-08-21 19:02:20.731 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for HDFC: unrealized=1487098.89, today=1487098.89\n", "record": {"elapsed": {"repr": "0:01:02.439233", "seconds": 62.439233}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for HDFC: unrealized=1487098.89, today=1487098.89", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:02:20.731775+05:30", "timestamp": 1755783140.731775}}}
{"text": "2025-08-21 19:02:20.732 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for INFY: unrealized=29807.83, today=29807.83\n", "record": {"elapsed": {"repr": "0:01:02.440015", "seconds": 62.440015}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for INFY: unrealized=29807.83, today=29807.83", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:02:20.732557+05:30", "timestamp": 1755783140.732557}}}
{"text": "2025-08-21 19:02:20.733 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for ICICIBANK: unrealized=-484349.71, today=-484349.71\n", "record": {"elapsed": {"repr": "0:01:02.440548", "seconds": 62.440548}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for ICICIBANK: unrealized=-484349.71, today=-484349.71", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:02:20.733090+05:30", "timestamp": 1755783140.73309}}}
{"text": "2025-08-21 19:02:20.733 | INFO     | app.services.dhan_client:get_pnl:545 - Calculated totals - realized: 0.0, unrealized: 535199.11, day: 535199.11\n", "record": {"elapsed": {"repr": "0:01:02.441080", "seconds": 62.44108}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 545, "message": "Calculated totals - realized: 0.0, unrealized: 535199.11, day: 535199.11", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:02:20.733622+05:30", "timestamp": 1755783140.733622}}}
{"text": "2025-08-21 19:02:20.734 | DEBUG    | app.services.dhan_client:get_pnl:554 - PnL consistency check passed: drift=‚Çπ0.00\n", "record": {"elapsed": {"repr": "0:01:02.441642", "seconds": 62.441642}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 554, "message": "PnL consistency check passed: drift=‚Çπ0.00", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:02:20.734184+05:30", "timestamp": 1755783140.734184}}}
{"text": "2025-08-21 19:02:20.735 | DEBUG    | app.services.dhan_client:get_pnl:558 - Creating PnLTotals...\n", "record": {"elapsed": {"repr": "0:01:02.442748", "seconds": 62.442748}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 558, "message": "Creating PnLTotals...", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:02:20.735290+05:30", "timestamp": 1755783140.73529}}}
{"text": "2025-08-21 19:02:20.736 | DEBUG    | app.services.dhan_client:get_pnl:565 - PnLTotals created successfully\n", "record": {"elapsed": {"repr": "0:01:02.443475", "seconds": 62.443475}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 565, "message": "PnLTotals created successfully", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:02:20.736017+05:30", "timestamp": 1755783140.736017}}}
{"text": "2025-08-21 19:02:20.736 | DEBUG    | app.services.dhan_client:get_pnl:574 - Creating PnL model...\n", "record": {"elapsed": {"repr": "0:01:02.443865", "seconds": 62.443865}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 574, "message": "Creating PnL model...", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:02:20.736407+05:30", "timestamp": 1755783140.736407}}}
{"text": "2025-08-21 19:02:20.736 | DEBUG    | app.services.dhan_client:get_pnl:575 - Model fields: totals=<class 'app.models.schemas.PnLTotals'>, perSymbol=5, updated_at=2025-08-21 19:02:20.730446+05:30, trading_day=2025-08-21\n", "record": {"elapsed": {"repr": "0:01:02.444233", "seconds": 62.444233}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 575, "message": "Model fields: totals=<class 'app.models.schemas.PnLTotals'>, perSymbol=5, updated_at=2025-08-21 19:02:20.730446+05:30, trading_day=2025-08-21", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:02:20.736775+05:30", "timestamp": 1755783140.736775}}}
{"text": "2025-08-21 19:02:20.737 | DEBUG    | app.services.dhan_client:get_pnl:584 - Created PnL model: totals=PnLTotals(realized=0.0, unrealized=535199.11, day=535199.11, currency='INR') per_symbol=[PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1727, avg=618.93, ltp=360.06, unrealized=-447068.58, today_pnl=-447068.58), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=167, avg=948.57, ltp=1249.7, unrealized=-50289.32, today_pnl=-50289.32), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=1347, avg=801.44, ltp=1905.45, unrealized=1487098.89, today_pnl=1487098.89), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=143, avg=1427.62, ltp=1219.17, unrealized=29807.83, today_pnl=29807.83), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=438, avg=1994.48, ltp=888.66, unrealized=-484349.71, today_pnl=-484349.71)] updated_at=datetime.datetime(2025, 8, 21, 19, 2, 20, 730446, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))) trading_day='2025-08-21'\n", "record": {"elapsed": {"repr": "0:01:02.444767", "seconds": 62.444767}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 584, "message": "Created PnL model: totals=PnLTotals(realized=0.0, unrealized=535199.11, day=535199.11, currency='INR') per_symbol=[PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1727, avg=618.93, ltp=360.06, unrealized=-447068.58, today_pnl=-447068.58), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=167, avg=948.57, ltp=1249.7, unrealized=-50289.32, today_pnl=-50289.32), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=1347, avg=801.44, ltp=1905.45, unrealized=1487098.89, today_pnl=1487098.89), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=143, avg=1427.62, ltp=1219.17, unrealized=29807.83, today_pnl=29807.83), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=438, avg=1994.48, ltp=888.66, unrealized=-484349.71, today_pnl=-484349.71)] updated_at=datetime.datetime(2025, 8, 21, 19, 2, 20, 730446, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))) trading_day='2025-08-21'", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:02:20.737309+05:30", "timestamp": 1755783140.737309}}}
{"text": "2025-08-21 19:02:20.737 | DEBUG    | app.services.dhan_client:get_pnl:585 - PnL model fields: {'totals': PnLTotals(realized=0.0, unrealized=535199.11, day=535199.11, currency='INR'), 'per_symbol': [PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1727, avg=618.93, ltp=360.06, unrealized=-447068.58, today_pnl=-447068.58), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=167, avg=948.57, ltp=1249.7, unrealized=-50289.32, today_pnl=-50289.32), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=1347, avg=801.44, ltp=1905.45, unrealized=1487098.89, today_pnl=1487098.89), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=143, avg=1427.62, ltp=1219.17, unrealized=29807.83, today_pnl=29807.83), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=438, avg=1994.48, ltp=888.66, unrealized=-484349.71, today_pnl=-484349.71)], 'updated_at': datetime.datetime(2025, 8, 21, 19, 2, 20, 730446, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))), 'trading_day': '2025-08-21'}\n", "record": {"elapsed": {"repr": "0:01:02.445368", "seconds": 62.445368}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 585, "message": "PnL model fields: {'totals': PnLTotals(realized=0.0, unrealized=535199.11, day=535199.11, currency='INR'), 'per_symbol': [PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1727, avg=618.93, ltp=360.06, unrealized=-447068.58, today_pnl=-447068.58), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=167, avg=948.57, ltp=1249.7, unrealized=-50289.32, today_pnl=-50289.32), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=1347, avg=801.44, ltp=1905.45, unrealized=1487098.89, today_pnl=1487098.89), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=143, avg=1427.62, ltp=1219.17, unrealized=29807.83, today_pnl=29807.83), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=438, avg=1994.48, ltp=888.66, unrealized=-484349.71, today_pnl=-484349.71)], 'updated_at': datetime.datetime(2025, 8, 21, 19, 2, 20, 730446, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))), 'trading_day': '2025-08-21'}", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:02:20.737910+05:30", "timestamp": 1755783140.73791}}}
{"text": "2025-08-21 19:02:20.738 | INFO     | app.services.dhan_client:get_pnl:587 - P&L calculation completed successfully: 5 symbols, unrealized=‚Çπ535199.11\n", "record": {"elapsed": {"repr": "0:01:02.445909", "seconds": 62.445909}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 587, "message": "P&L calculation completed successfully: 5 symbols, unrealized=‚Çπ535199.11", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:02:20.738451+05:30", "timestamp": 1755783140.738451}}}
{"text": "2025-08-21 19:02:20.739 | DEBUG    | app.ws.live:emit_delta:408 - Emitted pnl delta: seq=69\n", "record": {"elapsed": {"repr": "0:01:02.446634", "seconds": 62.446634}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "emit_delta", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 408, "message": "Emitted pnl delta: seq=69", "module": "live", "name": "app.ws.live", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:02:20.739176+05:30", "timestamp": 1755783140.739176}}}
{"text": "2025-08-21 19:02:21.262 | DEBUG    | app.ws.live:emit_delta:408 - Emitted positions delta: seq=70\n", "record": {"elapsed": {"repr": "0:01:02.970014", "seconds": 62.970014}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "emit_delta", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 408, "message": "Emitted positions delta: seq=70", "module": "live", "name": "app.ws.live", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:02:21.262556+05:30", "timestamp": 1755783141.262556}}}
{"text": "2025-08-21 19:02:22.436 | INFO     | app.services.dhan_client:get_pnl:489 - Starting accurate P&L calculation\n", "record": {"elapsed": {"repr": "0:01:04.144261", "seconds": 64.144261}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 489, "message": "Starting accurate P&L calculation", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:02:22.436803+05:30", "timestamp": 1755783142.436803}}}
{"text": "2025-08-21 19:02:22.437 | INFO     | app.services.dhan_client:get_pnl:491 - Fetched 5 positions\n", "record": {"elapsed": {"repr": "0:01:04.144811", "seconds": 64.144811}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 491, "message": "Fetched 5 positions", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:02:22.437353+05:30", "timestamp": 1755783142.437353}}}
{"text": "2025-08-21 19:02:22.437 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for RELIANCE: unrealized=-447068.58, today=-447068.58\n", "record": {"elapsed": {"repr": "0:01:04.145333", "seconds": 64.145333}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for RELIANCE: unrealized=-447068.58, today=-447068.58", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:02:22.437875+05:30", "timestamp": 1755783142.437875}}}
{"text": "2025-08-21 19:02:22.438 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for TCS: unrealized=-50289.32, today=-50289.32\n", "record": {"elapsed": {"repr": "0:01:04.145820", "seconds": 64.14582}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for TCS: unrealized=-50289.32, today=-50289.32", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:02:22.438362+05:30", "timestamp": 1755783142.438362}}}
{"text": "2025-08-21 19:02:22.438 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for HDFC: unrealized=1487098.89, today=1487098.89\n", "record": {"elapsed": {"repr": "0:01:04.146446", "seconds": 64.146446}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for HDFC: unrealized=1487098.89, today=1487098.89", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:02:22.438988+05:30", "timestamp": 1755783142.438988}}}
{"text": "2025-08-21 19:02:22.439 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for INFY: unrealized=29807.83, today=29807.83\n", "record": {"elapsed": {"repr": "0:01:04.147307", "seconds": 64.147307}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for INFY: unrealized=29807.83, today=29807.83", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:02:22.439849+05:30", "timestamp": 1755783142.439849}}}
{"text": "2025-08-21 19:02:22.440 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for ICICIBANK: unrealized=-484349.71, today=-484349.71\n", "record": {"elapsed": {"repr": "0:01:04.147868", "seconds": 64.147868}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for ICICIBANK: unrealized=-484349.71, today=-484349.71", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:02:22.440410+05:30", "timestamp": 1755783142.44041}}}
{"text": "2025-08-21 19:02:22.440 | INFO     | app.services.dhan_client:get_pnl:545 - Calculated totals - realized: 0.0, unrealized: 535199.11, day: 535199.11\n", "record": {"elapsed": {"repr": "0:01:04.148369", "seconds": 64.148369}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 545, "message": "Calculated totals - realized: 0.0, unrealized: 535199.11, day: 535199.11", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:02:22.440911+05:30", "timestamp": 1755783142.440911}}}
{"text": "2025-08-21 19:02:22.441 | DEBUG    | app.services.dhan_client:get_pnl:554 - PnL consistency check passed: drift=‚Çπ0.00\n", "record": {"elapsed": {"repr": "0:01:04.148801", "seconds": 64.148801}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 554, "message": "PnL consistency check passed: drift=‚Çπ0.00", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:02:22.441343+05:30", "timestamp": 1755783142.441343}}}
{"text": "2025-08-21 19:02:22.441 | DEBUG    | app.services.dhan_client:get_pnl:558 - Creating PnLTotals...\n", "record": {"elapsed": {"repr": "0:01:04.149302", "seconds": 64.149302}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 558, "message": "Creating PnLTotals...", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:02:22.441844+05:30", "timestamp": 1755783142.441844}}}
{"text": "2025-08-21 19:02:22.442 | DEBUG    | app.services.dhan_client:get_pnl:565 - PnLTotals created successfully\n", "record": {"elapsed": {"repr": "0:01:04.149988", "seconds": 64.149988}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 565, "message": "PnLTotals created successfully", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:02:22.442530+05:30", "timestamp": 1755783142.44253}}}
{"text": "2025-08-21 19:02:22.443 | DEBUG    | app.services.dhan_client:get_pnl:574 - Creating PnL model...\n", "record": {"elapsed": {"repr": "0:01:04.150832", "seconds": 64.150832}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 574, "message": "Creating PnL model...", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:02:22.443374+05:30", "timestamp": 1755783142.443374}}}
{"text": "2025-08-21 19:02:22.443 | DEBUG    | app.services.dhan_client:get_pnl:575 - Model fields: totals=<class 'app.models.schemas.PnLTotals'>, perSymbol=5, updated_at=2025-08-21 19:02:22.437802+05:30, trading_day=2025-08-21\n", "record": {"elapsed": {"repr": "0:01:04.151293", "seconds": 64.151293}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 575, "message": "Model fields: totals=<class 'app.models.schemas.PnLTotals'>, perSymbol=5, updated_at=2025-08-21 19:02:22.437802+05:30, trading_day=2025-08-21", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:02:22.443835+05:30", "timestamp": 1755783142.443835}}}
{"text": "2025-08-21 19:02:22.444 | DEBUG    | app.services.dhan_client:get_pnl:584 - Created PnL model: totals=PnLTotals(realized=0.0, unrealized=535199.11, day=535199.11, currency='INR') per_symbol=[PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1727, avg=618.93, ltp=360.06, unrealized=-447068.58, today_pnl=-447068.58), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=167, avg=948.57, ltp=1249.7, unrealized=-50289.32, today_pnl=-50289.32), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=1347, avg=801.44, ltp=1905.45, unrealized=1487098.89, today_pnl=1487098.89), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=143, avg=1427.62, ltp=1219.17, unrealized=29807.83, today_pnl=29807.83), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=438, avg=1994.48, ltp=888.66, unrealized=-484349.71, today_pnl=-484349.71)] updated_at=datetime.datetime(2025, 8, 21, 19, 2, 22, 437802, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))) trading_day='2025-08-21'\n", "record": {"elapsed": {"repr": "0:01:04.151825", "seconds": 64.151825}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 584, "message": "Created PnL model: totals=PnLTotals(realized=0.0, unrealized=535199.11, day=535199.11, currency='INR') per_symbol=[PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1727, avg=618.93, ltp=360.06, unrealized=-447068.58, today_pnl=-447068.58), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=167, avg=948.57, ltp=1249.7, unrealized=-50289.32, today_pnl=-50289.32), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=1347, avg=801.44, ltp=1905.45, unrealized=1487098.89, today_pnl=1487098.89), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=143, avg=1427.62, ltp=1219.17, unrealized=29807.83, today_pnl=29807.83), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=438, avg=1994.48, ltp=888.66, unrealized=-484349.71, today_pnl=-484349.71)] updated_at=datetime.datetime(2025, 8, 21, 19, 2, 22, 437802, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))) trading_day='2025-08-21'", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:02:22.444367+05:30", "timestamp": 1755783142.444367}}}
{"text": "2025-08-21 19:02:22.445 | DEBUG    | app.services.dhan_client:get_pnl:585 - PnL model fields: {'totals': PnLTotals(realized=0.0, unrealized=535199.11, day=535199.11, currency='INR'), 'per_symbol': [PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1727, avg=618.93, ltp=360.06, unrealized=-447068.58, today_pnl=-447068.58), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=167, avg=948.57, ltp=1249.7, unrealized=-50289.32, today_pnl=-50289.32), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=1347, avg=801.44, ltp=1905.45, unrealized=1487098.89, today_pnl=1487098.89), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=143, avg=1427.62, ltp=1219.17, unrealized=29807.83, today_pnl=29807.83), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=438, avg=1994.48, ltp=888.66, unrealized=-484349.71, today_pnl=-484349.71)], 'updated_at': datetime.datetime(2025, 8, 21, 19, 2, 22, 437802, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))), 'trading_day': '2025-08-21'}\n", "record": {"elapsed": {"repr": "0:01:04.152510", "seconds": 64.15251}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 585, "message": "PnL model fields: {'totals': PnLTotals(realized=0.0, unrealized=535199.11, day=535199.11, currency='INR'), 'per_symbol': [PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1727, avg=618.93, ltp=360.06, unrealized=-447068.58, today_pnl=-447068.58), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=167, avg=948.57, ltp=1249.7, unrealized=-50289.32, today_pnl=-50289.32), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=1347, avg=801.44, ltp=1905.45, unrealized=1487098.89, today_pnl=1487098.89), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=143, avg=1427.62, ltp=1219.17, unrealized=29807.83, today_pnl=29807.83), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=438, avg=1994.48, ltp=888.66, unrealized=-484349.71, today_pnl=-484349.71)], 'updated_at': datetime.datetime(2025, 8, 21, 19, 2, 22, 437802, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))), 'trading_day': '2025-08-21'}", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:02:22.445052+05:30", "timestamp": 1755783142.445052}}}
{"text": "2025-08-21 19:02:22.445 | INFO     | app.services.dhan_client:get_pnl:587 - P&L calculation completed successfully: 5 symbols, unrealized=‚Çπ535199.11\n", "record": {"elapsed": {"repr": "0:01:04.153027", "seconds": 64.153027}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 587, "message": "P&L calculation completed successfully: 5 symbols, unrealized=‚Çπ535199.11", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:02:22.445569+05:30", "timestamp": 1755783142.445569}}}
{"text": "2025-08-21 19:02:22.446 | DEBUG    | app.ws.live:emit_delta:408 - Emitted pnl delta: seq=71\n", "record": {"elapsed": {"repr": "0:01:04.153651", "seconds": 64.153651}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "emit_delta", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 408, "message": "Emitted pnl delta: seq=71", "module": "live", "name": "app.ws.live", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:02:22.446193+05:30", "timestamp": 1755783142.446193}}}
{"text": "2025-08-21 19:02:22.573 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:01:04.280499", "seconds": 64.280499}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:02:22.573041+05:30", "timestamp": 1755783142.573041}}}
{"text": "2025-08-21 19:02:22.573 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:01:04.281144", "seconds": 64.281144}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:02:22.573686+05:30", "timestamp": 1755783142.573686}}}
{"text": "2025-08-21 19:02:22.574 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:01:04.281666", "seconds": 64.281666}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:02:22.574208+05:30", "timestamp": 1755783142.574208}}}
{"text": "2025-08-21 19:02:22.574 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:01:04.282246", "seconds": 64.282246}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:02:22.574788+05:30", "timestamp": 1755783142.574788}}}
{"text": "2025-08-21 19:02:22.575 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:01:04.282988", "seconds": 64.282988}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:02:22.575530+05:30", "timestamp": 1755783142.57553}}}
{"text": "2025-08-21 19:02:22.576 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:01:04.283618", "seconds": 64.283618}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:02:22.576160+05:30", "timestamp": 1755783142.57616}}}
{"text": "2025-08-21 19:02:22.576 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:01:04.284154", "seconds": 64.284154}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:02:22.576696+05:30", "timestamp": 1755783142.576696}}}
{"text": "2025-08-21 19:02:22.577 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:01:04.284582", "seconds": 64.284582}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:02:22.577124+05:30", "timestamp": 1755783142.577124}}}
{"text": "2025-08-21 19:02:22.577 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:01:04.285032", "seconds": 64.285032}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:02:22.577574+05:30", "timestamp": 1755783142.577574}}}
{"text": "2025-08-21 19:02:22.577 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:01:04.285411", "seconds": 64.285411}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:02:22.577953+05:30", "timestamp": 1755783142.577953}}}
{"text": "2025-08-21 19:02:23.219 | DEBUG    | app.ws.live:emit_delta:408 - Emitted positions delta: seq=72\n", "record": {"elapsed": {"repr": "0:01:04.927352", "seconds": 64.927352}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "emit_delta", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 408, "message": "Emitted positions delta: seq=72", "module": "live", "name": "app.ws.live", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:02:23.219894+05:30", "timestamp": 1755783143.219894}}}
{"text": "2025-08-21 19:02:23.994 | INFO     | app.services.dhan_client:get_pnl:489 - Starting accurate P&L calculation\n", "record": {"elapsed": {"repr": "0:01:05.701765", "seconds": 65.701765}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 489, "message": "Starting accurate P&L calculation", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:02:23.994307+05:30", "timestamp": 1755783143.994307}}}
{"text": "2025-08-21 19:02:23.994 | INFO     | app.services.dhan_client:get_pnl:491 - Fetched 5 positions\n", "record": {"elapsed": {"repr": "0:01:05.702348", "seconds": 65.702348}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 491, "message": "Fetched 5 positions", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:02:23.994890+05:30", "timestamp": 1755783143.99489}}}
{"text": "2025-08-21 19:02:23.995 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for RELIANCE: unrealized=-446083.04, today=-446083.04\n", "record": {"elapsed": {"repr": "0:01:05.702834", "seconds": 65.702834}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for RELIANCE: unrealized=-446083.04, today=-446083.04", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:02:23.995376+05:30", "timestamp": 1755783143.995376}}}
{"text": "2025-08-21 19:02:23.995 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for TCS: unrealized=-46116.12, today=-46116.12\n", "record": {"elapsed": {"repr": "0:01:05.703342", "seconds": 65.703342}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for TCS: unrealized=-46116.12, today=-46116.12", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:02:23.995884+05:30", "timestamp": 1755783143.995884}}}
{"text": "2025-08-21 19:02:23.996 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for HDFC: unrealized=1520346.53, today=1520346.53\n", "record": {"elapsed": {"repr": "0:01:05.704068", "seconds": 65.704068}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for HDFC: unrealized=1520346.53, today=1520346.53", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:02:23.996610+05:30", "timestamp": 1755783143.99661}}}
{"text": "2025-08-21 19:02:23.997 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for INFY: unrealized=30588.35, today=30588.35\n", "record": {"elapsed": {"repr": "0:01:05.704765", "seconds": 65.704765}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for INFY: unrealized=30588.35, today=30588.35", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:02:23.997307+05:30", "timestamp": 1755783143.997307}}}
{"text": "2025-08-21 19:02:23.997 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for ICICIBANK: unrealized=-484054.01, today=-484054.01\n", "record": {"elapsed": {"repr": "0:01:05.705322", "seconds": 65.705322}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for ICICIBANK: unrealized=-484054.01, today=-484054.01", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:02:23.997864+05:30", "timestamp": 1755783143.997864}}}
{"text": "2025-08-21 19:02:23.998 | INFO     | app.services.dhan_client:get_pnl:545 - Calculated totals - realized: 0.0, unrealized: 574681.71, day: 574681.71\n", "record": {"elapsed": {"repr": "0:01:05.705733", "seconds": 65.705733}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 545, "message": "Calculated totals - realized: 0.0, unrealized: 574681.71, day: 574681.71", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:02:23.998275+05:30", "timestamp": 1755783143.998275}}}
{"text": "2025-08-21 19:02:23.998 | DEBUG    | app.services.dhan_client:get_pnl:554 - PnL consistency check passed: drift=‚Çπ0.00\n", "record": {"elapsed": {"repr": "0:01:05.706229", "seconds": 65.706229}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 554, "message": "PnL consistency check passed: drift=‚Çπ0.00", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:02:23.998771+05:30", "timestamp": 1755783143.998771}}}
{"text": "2025-08-21 19:02:23.999 | DEBUG    | app.services.dhan_client:get_pnl:558 - Creating PnLTotals...\n", "record": {"elapsed": {"repr": "0:01:05.706774", "seconds": 65.706774}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 558, "message": "Creating PnLTotals...", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:02:23.999316+05:30", "timestamp": 1755783143.999316}}}
{"text": "2025-08-21 19:02:24.000 | DEBUG    | app.services.dhan_client:get_pnl:565 - PnLTotals created successfully\n", "record": {"elapsed": {"repr": "0:01:05.707645", "seconds": 65.707645}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 565, "message": "PnLTotals created successfully", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:02:24.000187+05:30", "timestamp": 1755783144.000187}}}
{"text": "2025-08-21 19:02:24.000 | DEBUG    | app.services.dhan_client:get_pnl:574 - Creating PnL model...\n", "record": {"elapsed": {"repr": "0:01:05.708166", "seconds": 65.708166}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 574, "message": "Creating PnL model...", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:02:24.000708+05:30", "timestamp": 1755783144.000708}}}
{"text": "2025-08-21 19:02:24.001 | DEBUG    | app.services.dhan_client:get_pnl:575 - Model fields: totals=<class 'app.models.schemas.PnLTotals'>, perSymbol=5, updated_at=2025-08-21 19:02:23.995315+05:30, trading_day=2025-08-21\n", "record": {"elapsed": {"repr": "0:01:05.708566", "seconds": 65.708566}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 575, "message": "Model fields: totals=<class 'app.models.schemas.PnLTotals'>, perSymbol=5, updated_at=2025-08-21 19:02:23.995315+05:30, trading_day=2025-08-21", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:02:24.001108+05:30", "timestamp": 1755783144.001108}}}
{"text": "2025-08-21 19:02:24.001 | DEBUG    | app.services.dhan_client:get_pnl:584 - Created PnL model: totals=PnLTotals(realized=0.0, unrealized=574681.71, day=574681.71, currency='INR') per_symbol=[PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1727, avg=618.93, ltp=360.63, unrealized=-446083.04, today_pnl=-446083.04), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=167, avg=948.57, ltp=1224.71, unrealized=-46116.12, today_pnl=-46116.12), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=1347, avg=801.44, ltp=1930.13, unrealized=1520346.53, today_pnl=1520346.53), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=143, avg=1427.62, ltp=1213.72, unrealized=30588.35, today_pnl=30588.35), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=438, avg=1994.48, ltp=889.33, unrealized=-484054.01, today_pnl=-484054.01)] updated_at=datetime.datetime(2025, 8, 21, 19, 2, 23, 995315, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))) trading_day='2025-08-21'\n", "record": {"elapsed": {"repr": "0:01:05.709063", "seconds": 65.709063}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 584, "message": "Created PnL model: totals=PnLTotals(realized=0.0, unrealized=574681.71, day=574681.71, currency='INR') per_symbol=[PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1727, avg=618.93, ltp=360.63, unrealized=-446083.04, today_pnl=-446083.04), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=167, avg=948.57, ltp=1224.71, unrealized=-46116.12, today_pnl=-46116.12), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=1347, avg=801.44, ltp=1930.13, unrealized=1520346.53, today_pnl=1520346.53), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=143, avg=1427.62, ltp=1213.72, unrealized=30588.35, today_pnl=30588.35), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=438, avg=1994.48, ltp=889.33, unrealized=-484054.01, today_pnl=-484054.01)] updated_at=datetime.datetime(2025, 8, 21, 19, 2, 23, 995315, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))) trading_day='2025-08-21'", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:02:24.001605+05:30", "timestamp": 1755783144.001605}}}
{"text": "2025-08-21 19:02:24.002 | DEBUG    | app.services.dhan_client:get_pnl:585 - PnL model fields: {'totals': PnLTotals(realized=0.0, unrealized=574681.71, day=574681.71, currency='INR'), 'per_symbol': [PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1727, avg=618.93, ltp=360.63, unrealized=-446083.04, today_pnl=-446083.04), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=167, avg=948.57, ltp=1224.71, unrealized=-46116.12, today_pnl=-46116.12), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=1347, avg=801.44, ltp=1930.13, unrealized=1520346.53, today_pnl=1520346.53), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=143, avg=1427.62, ltp=1213.72, unrealized=30588.35, today_pnl=30588.35), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=438, avg=1994.48, ltp=889.33, unrealized=-484054.01, today_pnl=-484054.01)], 'updated_at': datetime.datetime(2025, 8, 21, 19, 2, 23, 995315, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))), 'trading_day': '2025-08-21'}\n", "record": {"elapsed": {"repr": "0:01:05.709671", "seconds": 65.709671}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 585, "message": "PnL model fields: {'totals': PnLTotals(realized=0.0, unrealized=574681.71, day=574681.71, currency='INR'), 'per_symbol': [PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1727, avg=618.93, ltp=360.63, unrealized=-446083.04, today_pnl=-446083.04), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=167, avg=948.57, ltp=1224.71, unrealized=-46116.12, today_pnl=-46116.12), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=1347, avg=801.44, ltp=1930.13, unrealized=1520346.53, today_pnl=1520346.53), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=143, avg=1427.62, ltp=1213.72, unrealized=30588.35, today_pnl=30588.35), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=438, avg=1994.48, ltp=889.33, unrealized=-484054.01, today_pnl=-484054.01)], 'updated_at': datetime.datetime(2025, 8, 21, 19, 2, 23, 995315, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))), 'trading_day': '2025-08-21'}", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:02:24.002213+05:30", "timestamp": 1755783144.002213}}}
{"text": "2025-08-21 19:02:24.002 | INFO     | app.services.dhan_client:get_pnl:587 - P&L calculation completed successfully: 5 symbols, unrealized=‚Çπ574681.71\n", "record": {"elapsed": {"repr": "0:01:05.710158", "seconds": 65.710158}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 587, "message": "P&L calculation completed successfully: 5 symbols, unrealized=‚Çπ574681.71", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:02:24.002700+05:30", "timestamp": 1755783144.0027}}}
{"text": "2025-08-21 19:02:24.003 | DEBUG    | app.ws.live:emit_delta:408 - Emitted pnl delta: seq=73\n", "record": {"elapsed": {"repr": "0:01:05.710630", "seconds": 65.71063}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "emit_delta", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 408, "message": "Emitted pnl delta: seq=73", "module": "live", "name": "app.ws.live", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:02:24.003172+05:30", "timestamp": 1755783144.003172}}}
{"text": "2025-08-21 19:02:24.578 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:01:06.286011", "seconds": 66.286011}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:02:24.578553+05:30", "timestamp": 1755783144.578553}}}
{"text": "2025-08-21 19:02:24.579 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:01:06.286812", "seconds": 66.286812}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:02:24.579354+05:30", "timestamp": 1755783144.579354}}}
{"text": "2025-08-21 19:02:24.580 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:01:06.287742", "seconds": 66.287742}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:02:24.580284+05:30", "timestamp": 1755783144.580284}}}
{"text": "2025-08-21 19:02:24.580 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:01:06.288276", "seconds": 66.288276}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:02:24.580818+05:30", "timestamp": 1755783144.580818}}}
{"text": "2025-08-21 19:02:24.581 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:01:06.288653", "seconds": 66.288653}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:02:24.581195+05:30", "timestamp": 1755783144.581195}}}
{"text": "2025-08-21 19:02:24.581 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:01:06.289071", "seconds": 66.289071}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:02:24.581613+05:30", "timestamp": 1755783144.581613}}}
{"text": "2025-08-21 19:02:24.582 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:01:06.289601", "seconds": 66.289601}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:02:24.582143+05:30", "timestamp": 1755783144.582143}}}
{"text": "2025-08-21 19:02:24.582 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:01:06.290129", "seconds": 66.290129}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:02:24.582671+05:30", "timestamp": 1755783144.582671}}}
{"text": "2025-08-21 19:02:24.583 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:01:06.290848", "seconds": 66.290848}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:02:24.583390+05:30", "timestamp": 1755783144.58339}}}
{"text": "2025-08-21 19:02:24.584 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:01:06.291768", "seconds": 66.291768}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:02:24.584310+05:30", "timestamp": 1755783144.58431}}}
{"text": "2025-08-21 19:02:25.160 | DEBUG    | app.ws.live:emit_delta:408 - Emitted positions delta: seq=74\n", "record": {"elapsed": {"repr": "0:01:06.867906", "seconds": 66.867906}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "emit_delta", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 408, "message": "Emitted positions delta: seq=74", "module": "live", "name": "app.ws.live", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:02:25.160448+05:30", "timestamp": 1755783145.160448}}}
{"text": "2025-08-21 19:02:25.834 | INFO     | app.services.dhan_client:get_pnl:489 - Starting accurate P&L calculation\n", "record": {"elapsed": {"repr": "0:01:07.542430", "seconds": 67.54243}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 489, "message": "Starting accurate P&L calculation", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:02:25.834972+05:30", "timestamp": 1755783145.834972}}}
{"text": "2025-08-21 19:02:25.835 | INFO     | app.services.dhan_client:get_pnl:491 - Fetched 5 positions\n", "record": {"elapsed": {"repr": "0:01:07.542971", "seconds": 67.542971}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 491, "message": "Fetched 5 positions", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:02:25.835513+05:30", "timestamp": 1755783145.835513}}}
{"text": "2025-08-21 19:02:25.835 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for RELIANCE: unrealized=-446164.05, today=-446164.05\n", "record": {"elapsed": {"repr": "0:01:07.543453", "seconds": 67.543453}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for RELIANCE: unrealized=-446164.05, today=-446164.05", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:02:25.835995+05:30", "timestamp": 1755783145.835995}}}
{"text": "2025-08-21 19:02:25.836 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for TCS: unrealized=-43548.2, today=-43548.2\n", "record": {"elapsed": {"repr": "0:01:07.544036", "seconds": 67.544036}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for TCS: unrealized=-43548.2, today=-43548.2", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:02:25.836578+05:30", "timestamp": 1755783145.836578}}}
{"text": "2025-08-21 19:02:25.837 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for HDFC: unrealized=1473993.89, today=1473993.89\n", "record": {"elapsed": {"repr": "0:01:07.544786", "seconds": 67.544786}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for HDFC: unrealized=1473993.89, today=1473993.89", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:02:25.837328+05:30", "timestamp": 1755783145.837328}}}
{"text": "2025-08-21 19:02:25.838 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for INFY: unrealized=27790.84, today=27790.84\n", "record": {"elapsed": {"repr": "0:01:07.545635", "seconds": 67.545635}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for INFY: unrealized=27790.84, today=27790.84", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:02:25.838177+05:30", "timestamp": 1755783145.838177}}}
{"text": "2025-08-21 19:02:25.838 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for ICICIBANK: unrealized=-487264.34, today=-487264.34\n", "record": {"elapsed": {"repr": "0:01:07.546196", "seconds": 67.546196}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for ICICIBANK: unrealized=-487264.34, today=-487264.34", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:02:25.838738+05:30", "timestamp": 1755783145.838738}}}
{"text": "2025-08-21 19:02:25.839 | INFO     | app.services.dhan_client:get_pnl:545 - Calculated totals - realized: 0.0, unrealized: 524808.14, day: 524808.14\n", "record": {"elapsed": {"repr": "0:01:07.546684", "seconds": 67.546684}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 545, "message": "Calculated totals - realized: 0.0, unrealized: 524808.14, day: 524808.14", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:02:25.839226+05:30", "timestamp": 1755783145.839226}}}
{"text": "2025-08-21 19:02:25.839 | DEBUG    | app.services.dhan_client:get_pnl:554 - PnL consistency check passed: drift=‚Çπ0.00\n", "record": {"elapsed": {"repr": "0:01:07.547216", "seconds": 67.547216}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 554, "message": "PnL consistency check passed: drift=‚Çπ0.00", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:02:25.839758+05:30", "timestamp": 1755783145.839758}}}
{"text": "2025-08-21 19:02:25.840 | DEBUG    | app.services.dhan_client:get_pnl:558 - Creating PnLTotals...\n", "record": {"elapsed": {"repr": "0:01:07.547798", "seconds": 67.547798}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 558, "message": "Creating PnLTotals...", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:02:25.840340+05:30", "timestamp": 1755783145.84034}}}
{"text": "2025-08-21 19:02:25.841 | DEBUG    | app.services.dhan_client:get_pnl:565 - PnLTotals created successfully\n", "record": {"elapsed": {"repr": "0:01:07.548764", "seconds": 67.548764}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 565, "message": "PnLTotals created successfully", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:02:25.841306+05:30", "timestamp": 1755783145.841306}}}
{"text": "2025-08-21 19:02:25.841 | DEBUG    | app.services.dhan_client:get_pnl:574 - Creating PnL model...\n", "record": {"elapsed": {"repr": "0:01:07.549286", "seconds": 67.549286}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 574, "message": "Creating PnL model...", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:02:25.841828+05:30", "timestamp": 1755783145.841828}}}
{"text": "2025-08-21 19:02:25.842 | DEBUG    | app.services.dhan_client:get_pnl:575 - Model fields: totals=<class 'app.models.schemas.PnLTotals'>, perSymbol=5, updated_at=2025-08-21 19:02:25.835936+05:30, trading_day=2025-08-21\n", "record": {"elapsed": {"repr": "0:01:07.549668", "seconds": 67.549668}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 575, "message": "Model fields: totals=<class 'app.models.schemas.PnLTotals'>, perSymbol=5, updated_at=2025-08-21 19:02:25.835936+05:30, trading_day=2025-08-21", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:02:25.842210+05:30", "timestamp": 1755783145.84221}}}
{"text": "2025-08-21 19:02:25.842 | DEBUG    | app.services.dhan_client:get_pnl:584 - Created PnL model: totals=PnLTotals(realized=0.0, unrealized=524808.14, day=524808.14, currency='INR') per_symbol=[PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1727, avg=618.93, ltp=360.58, unrealized=-446164.05, today_pnl=-446164.05), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=167, avg=948.57, ltp=1209.34, unrealized=-43548.2, today_pnl=-43548.2), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=1347, avg=801.44, ltp=1895.72, unrealized=1473993.89, today_pnl=1473993.89), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=143, avg=1427.62, ltp=1233.28, unrealized=27790.84, today_pnl=27790.84), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=438, avg=1994.48, ltp=882.0, unrealized=-487264.34, today_pnl=-487264.34)] updated_at=datetime.datetime(2025, 8, 21, 19, 2, 25, 835936, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))) trading_day='2025-08-21'\n", "record": {"elapsed": {"repr": "0:01:07.550185", "seconds": 67.550185}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 584, "message": "Created PnL model: totals=PnLTotals(realized=0.0, unrealized=524808.14, day=524808.14, currency='INR') per_symbol=[PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1727, avg=618.93, ltp=360.58, unrealized=-446164.05, today_pnl=-446164.05), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=167, avg=948.57, ltp=1209.34, unrealized=-43548.2, today_pnl=-43548.2), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=1347, avg=801.44, ltp=1895.72, unrealized=1473993.89, today_pnl=1473993.89), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=143, avg=1427.62, ltp=1233.28, unrealized=27790.84, today_pnl=27790.84), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=438, avg=1994.48, ltp=882.0, unrealized=-487264.34, today_pnl=-487264.34)] updated_at=datetime.datetime(2025, 8, 21, 19, 2, 25, 835936, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))) trading_day='2025-08-21'", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:02:25.842727+05:30", "timestamp": 1755783145.842727}}}
{"text": "2025-08-21 19:02:25.843 | DEBUG    | app.services.dhan_client:get_pnl:585 - PnL model fields: {'totals': PnLTotals(realized=0.0, unrealized=524808.14, day=524808.14, currency='INR'), 'per_symbol': [PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1727, avg=618.93, ltp=360.58, unrealized=-446164.05, today_pnl=-446164.05), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=167, avg=948.57, ltp=1209.34, unrealized=-43548.2, today_pnl=-43548.2), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=1347, avg=801.44, ltp=1895.72, unrealized=1473993.89, today_pnl=1473993.89), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=143, avg=1427.62, ltp=1233.28, unrealized=27790.84, today_pnl=27790.84), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=438, avg=1994.48, ltp=882.0, unrealized=-487264.34, today_pnl=-487264.34)], 'updated_at': datetime.datetime(2025, 8, 21, 19, 2, 25, 835936, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))), 'trading_day': '2025-08-21'}\n", "record": {"elapsed": {"repr": "0:01:07.550832", "seconds": 67.550832}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 585, "message": "PnL model fields: {'totals': PnLTotals(realized=0.0, unrealized=524808.14, day=524808.14, currency='INR'), 'per_symbol': [PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1727, avg=618.93, ltp=360.58, unrealized=-446164.05, today_pnl=-446164.05), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=167, avg=948.57, ltp=1209.34, unrealized=-43548.2, today_pnl=-43548.2), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=1347, avg=801.44, ltp=1895.72, unrealized=1473993.89, today_pnl=1473993.89), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=143, avg=1427.62, ltp=1233.28, unrealized=27790.84, today_pnl=27790.84), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=438, avg=1994.48, ltp=882.0, unrealized=-487264.34, today_pnl=-487264.34)], 'updated_at': datetime.datetime(2025, 8, 21, 19, 2, 25, 835936, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))), 'trading_day': '2025-08-21'}", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:02:25.843374+05:30", "timestamp": 1755783145.843374}}}
{"text": "2025-08-21 19:02:25.843 | INFO     | app.services.dhan_client:get_pnl:587 - P&L calculation completed successfully: 5 symbols, unrealized=‚Çπ524808.14\n", "record": {"elapsed": {"repr": "0:01:07.551332", "seconds": 67.551332}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 587, "message": "P&L calculation completed successfully: 5 symbols, unrealized=‚Çπ524808.14", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:02:25.843874+05:30", "timestamp": 1755783145.843874}}}
{"text": "2025-08-21 19:02:25.844 | DEBUG    | app.ws.live:emit_delta:408 - Emitted pnl delta: seq=75\n", "record": {"elapsed": {"repr": "0:01:07.552001", "seconds": 67.552001}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "emit_delta", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 408, "message": "Emitted pnl delta: seq=75", "module": "live", "name": "app.ws.live", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:02:25.844543+05:30", "timestamp": 1755783145.844543}}}
{"text": "2025-08-21 19:02:26.585 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:01:08.292498", "seconds": 68.292498}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:02:26.585040+05:30", "timestamp": 1755783146.58504}}}
{"text": "2025-08-21 19:02:26.585 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:01:08.293129", "seconds": 68.293129}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:02:26.585671+05:30", "timestamp": 1755783146.585671}}}
{"text": "2025-08-21 19:02:26.586 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:01:08.293620", "seconds": 68.29362}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:02:26.586162+05:30", "timestamp": 1755783146.586162}}}
{"text": "2025-08-21 19:02:26.586 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:01:08.294265", "seconds": 68.294265}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:02:26.586807+05:30", "timestamp": 1755783146.586807}}}
{"text": "2025-08-21 19:02:26.587 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:01:08.294914", "seconds": 68.294914}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:02:26.587456+05:30", "timestamp": 1755783146.587456}}}
{"text": "2025-08-21 19:02:26.587 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:01:08.295278", "seconds": 68.295278}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:02:26.587820+05:30", "timestamp": 1755783146.58782}}}
{"text": "2025-08-21 19:02:26.588 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:01:08.295686", "seconds": 68.295686}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:02:26.588228+05:30", "timestamp": 1755783146.588228}}}
{"text": "2025-08-21 19:02:26.588 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:01:08.296110", "seconds": 68.29611}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:02:26.588652+05:30", "timestamp": 1755783146.588652}}}
{"text": "2025-08-21 19:02:26.589 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:01:08.296544", "seconds": 68.296544}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:02:26.589086+05:30", "timestamp": 1755783146.589086}}}
{"text": "2025-08-21 19:02:26.589 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:01:08.297131", "seconds": 68.297131}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:02:26.589673+05:30", "timestamp": 1755783146.589673}}}
{"text": "2025-08-21 19:02:27.067 | DEBUG    | app.ws.live:emit_delta:408 - Emitted positions delta: seq=76\n", "record": {"elapsed": {"repr": "0:01:08.775068", "seconds": 68.775068}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "emit_delta", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 408, "message": "Emitted positions delta: seq=76", "module": "live", "name": "app.ws.live", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:02:27.067610+05:30", "timestamp": 1755783147.06761}}}
{"text": "2025-08-21 19:02:27.600 | INFO     | app.services.dhan_client:get_pnl:489 - Starting accurate P&L calculation\n", "record": {"elapsed": {"repr": "0:01:09.308279", "seconds": 69.308279}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 489, "message": "Starting accurate P&L calculation", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:02:27.600821+05:30", "timestamp": 1755783147.600821}}}
{"text": "2025-08-21 19:02:27.601 | INFO     | app.services.dhan_client:get_pnl:491 - Fetched 5 positions\n", "record": {"elapsed": {"repr": "0:01:09.308859", "seconds": 69.308859}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 491, "message": "Fetched 5 positions", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:02:27.601401+05:30", "timestamp": 1755783147.601401}}}
{"text": "2025-08-21 19:02:27.601 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for RELIANCE: unrealized=-436928.42, today=-436928.42\n", "record": {"elapsed": {"repr": "0:01:09.309330", "seconds": 69.30933}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for RELIANCE: unrealized=-436928.42, today=-436928.42", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:02:27.601872+05:30", "timestamp": 1755783147.601872}}}
{"text": "2025-08-21 19:02:27.602 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for TCS: unrealized=-42683.78, today=-42683.78\n", "record": {"elapsed": {"repr": "0:01:09.309970", "seconds": 69.30997}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for TCS: unrealized=-42683.78, today=-42683.78", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:02:27.602512+05:30", "timestamp": 1755783147.602512}}}
{"text": "2025-08-21 19:02:27.603 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for HDFC: unrealized=1496314.91, today=1496314.91\n", "record": {"elapsed": {"repr": "0:01:09.310940", "seconds": 69.31094}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for HDFC: unrealized=1496314.91, today=1496314.91", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:02:27.603482+05:30", "timestamp": 1755783147.603482}}}
{"text": "2025-08-21 19:02:27.604 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for INFY: unrealized=24777.79, today=24777.79\n", "record": {"elapsed": {"repr": "0:01:09.311476", "seconds": 69.311476}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for INFY: unrealized=24777.79, today=24777.79", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:02:27.604018+05:30", "timestamp": 1755783147.604018}}}
{"text": "2025-08-21 19:02:27.604 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for ICICIBANK: unrealized=-487428.12, today=-487428.12\n", "record": {"elapsed": {"repr": "0:01:09.312028", "seconds": 69.312028}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for ICICIBANK: unrealized=-487428.12, today=-487428.12", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:02:27.604570+05:30", "timestamp": 1755783147.60457}}}
{"text": "2025-08-21 19:02:27.605 | INFO     | app.services.dhan_client:get_pnl:545 - Calculated totals - realized: 0.0, unrealized: 554052.38, day: 554052.38\n", "record": {"elapsed": {"repr": "0:01:09.312610", "seconds": 69.31261}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 545, "message": "Calculated totals - realized: 0.0, unrealized: 554052.38, day: 554052.38", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:02:27.605152+05:30", "timestamp": 1755783147.605152}}}
{"text": "2025-08-21 19:02:27.605 | DEBUG    | app.services.dhan_client:get_pnl:554 - PnL consistency check passed: drift=‚Çπ0.00\n", "record": {"elapsed": {"repr": "0:01:09.313414", "seconds": 69.313414}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 554, "message": "PnL consistency check passed: drift=‚Çπ0.00", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:02:27.605956+05:30", "timestamp": 1755783147.605956}}}
{"text": "2025-08-21 19:02:27.606 | DEBUG    | app.services.dhan_client:get_pnl:558 - Creating PnLTotals...\n", "record": {"elapsed": {"repr": "0:01:09.314152", "seconds": 69.314152}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 558, "message": "Creating PnLTotals...", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:02:27.606694+05:30", "timestamp": 1755783147.606694}}}
{"text": "2025-08-21 19:02:27.607 | DEBUG    | app.services.dhan_client:get_pnl:565 - PnLTotals created successfully\n", "record": {"elapsed": {"repr": "0:01:09.314645", "seconds": 69.314645}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 565, "message": "PnLTotals created successfully", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:02:27.607187+05:30", "timestamp": 1755783147.607187}}}
{"text": "2025-08-21 19:02:27.607 | DEBUG    | app.services.dhan_client:get_pnl:574 - Creating PnL model...\n", "record": {"elapsed": {"repr": "0:01:09.315066", "seconds": 69.315066}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 574, "message": "Creating PnL model...", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:02:27.607608+05:30", "timestamp": 1755783147.607608}}}
{"text": "2025-08-21 19:02:27.607 | DEBUG    | app.services.dhan_client:get_pnl:575 - Model fields: totals=<class 'app.models.schemas.PnLTotals'>, perSymbol=5, updated_at=2025-08-21 19:02:27.601800+05:30, trading_day=2025-08-21\n", "record": {"elapsed": {"repr": "0:01:09.315434", "seconds": 69.315434}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 575, "message": "Model fields: totals=<class 'app.models.schemas.PnLTotals'>, perSymbol=5, updated_at=2025-08-21 19:02:27.601800+05:30, trading_day=2025-08-21", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:02:27.607976+05:30", "timestamp": 1755783147.607976}}}
{"text": "2025-08-21 19:02:27.608 | DEBUG    | app.services.dhan_client:get_pnl:584 - Created PnL model: totals=PnLTotals(realized=0.0, unrealized=554052.38, day=554052.38, currency='INR') per_symbol=[PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1727, avg=618.93, ltp=365.93, unrealized=-436928.42, today_pnl=-436928.42), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=167, avg=948.57, ltp=1204.16, unrealized=-42683.78, today_pnl=-42683.78), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=1347, avg=801.44, ltp=1912.29, unrealized=1496314.91, today_pnl=1496314.91), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=143, avg=1427.62, ltp=1254.35, unrealized=24777.79, today_pnl=24777.79), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=438, avg=1994.48, ltp=881.63, unrealized=-487428.12, today_pnl=-487428.12)] updated_at=datetime.datetime(2025, 8, 21, 19, 2, 27, 601800, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))) trading_day='2025-08-21'\n", "record": {"elapsed": {"repr": "0:01:09.315983", "seconds": 69.315983}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 584, "message": "Created PnL model: totals=PnLTotals(realized=0.0, unrealized=554052.38, day=554052.38, currency='INR') per_symbol=[PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1727, avg=618.93, ltp=365.93, unrealized=-436928.42, today_pnl=-436928.42), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=167, avg=948.57, ltp=1204.16, unrealized=-42683.78, today_pnl=-42683.78), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=1347, avg=801.44, ltp=1912.29, unrealized=1496314.91, today_pnl=1496314.91), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=143, avg=1427.62, ltp=1254.35, unrealized=24777.79, today_pnl=24777.79), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=438, avg=1994.48, ltp=881.63, unrealized=-487428.12, today_pnl=-487428.12)] updated_at=datetime.datetime(2025, 8, 21, 19, 2, 27, 601800, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))) trading_day='2025-08-21'", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:02:27.608525+05:30", "timestamp": 1755783147.608525}}}
{"text": "2025-08-21 19:02:27.609 | DEBUG    | app.services.dhan_client:get_pnl:585 - PnL model fields: {'totals': PnLTotals(realized=0.0, unrealized=554052.38, day=554052.38, currency='INR'), 'per_symbol': [PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1727, avg=618.93, ltp=365.93, unrealized=-436928.42, today_pnl=-436928.42), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=167, avg=948.57, ltp=1204.16, unrealized=-42683.78, today_pnl=-42683.78), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=1347, avg=801.44, ltp=1912.29, unrealized=1496314.91, today_pnl=1496314.91), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=143, avg=1427.62, ltp=1254.35, unrealized=24777.79, today_pnl=24777.79), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=438, avg=1994.48, ltp=881.63, unrealized=-487428.12, today_pnl=-487428.12)], 'updated_at': datetime.datetime(2025, 8, 21, 19, 2, 27, 601800, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))), 'trading_day': '2025-08-21'}\n", "record": {"elapsed": {"repr": "0:01:09.316658", "seconds": 69.316658}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 585, "message": "PnL model fields: {'totals': PnLTotals(realized=0.0, unrealized=554052.38, day=554052.38, currency='INR'), 'per_symbol': [PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1727, avg=618.93, ltp=365.93, unrealized=-436928.42, today_pnl=-436928.42), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=167, avg=948.57, ltp=1204.16, unrealized=-42683.78, today_pnl=-42683.78), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=1347, avg=801.44, ltp=1912.29, unrealized=1496314.91, today_pnl=1496314.91), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=143, avg=1427.62, ltp=1254.35, unrealized=24777.79, today_pnl=24777.79), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=438, avg=1994.48, ltp=881.63, unrealized=-487428.12, today_pnl=-487428.12)], 'updated_at': datetime.datetime(2025, 8, 21, 19, 2, 27, 601800, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))), 'trading_day': '2025-08-21'}", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:02:27.609200+05:30", "timestamp": 1755783147.6092}}}
{"text": "2025-08-21 19:02:27.609 | INFO     | app.services.dhan_client:get_pnl:587 - P&L calculation completed successfully: 5 symbols, unrealized=‚Çπ554052.38\n", "record": {"elapsed": {"repr": "0:01:09.317144", "seconds": 69.317144}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 587, "message": "P&L calculation completed successfully: 5 symbols, unrealized=‚Çπ554052.38", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:02:27.609686+05:30", "timestamp": 1755783147.609686}}}
{"text": "2025-08-21 19:02:27.610 | DEBUG    | app.ws.live:emit_delta:408 - Emitted pnl delta: seq=77\n", "record": {"elapsed": {"repr": "0:01:09.317839", "seconds": 69.317839}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "emit_delta", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 408, "message": "Emitted pnl delta: seq=77", "module": "live", "name": "app.ws.live", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:02:27.610381+05:30", "timestamp": 1755783147.610381}}}
{"text": "2025-08-21 19:02:28.590 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:01:10.298274", "seconds": 70.298274}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:02:28.590816+05:30", "timestamp": 1755783148.590816}}}
{"text": "2025-08-21 19:02:28.591 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:01:10.298891", "seconds": 70.298891}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:02:28.591433+05:30", "timestamp": 1755783148.591433}}}
{"text": "2025-08-21 19:02:28.591 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:01:10.299268", "seconds": 70.299268}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:02:28.591810+05:30", "timestamp": 1755783148.59181}}}
{"text": "2025-08-21 19:02:28.592 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:01:10.299734", "seconds": 70.299734}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:02:28.592276+05:30", "timestamp": 1755783148.592276}}}
{"text": "2025-08-21 19:02:28.592 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:01:10.300204", "seconds": 70.300204}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:02:28.592746+05:30", "timestamp": 1755783148.592746}}}
{"text": "2025-08-21 19:02:28.593 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:01:10.300679", "seconds": 70.300679}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:02:28.593221+05:30", "timestamp": 1755783148.593221}}}
{"text": "2025-08-21 19:02:28.593 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:01:10.301288", "seconds": 70.301288}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:02:28.593830+05:30", "timestamp": 1755783148.59383}}}
{"text": "2025-08-21 19:02:28.594 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:01:10.302131", "seconds": 70.302131}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:02:28.594673+05:30", "timestamp": 1755783148.594673}}}
{"text": "2025-08-21 19:02:28.595 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:01:10.302631", "seconds": 70.302631}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:02:28.595173+05:30", "timestamp": 1755783148.595173}}}
{"text": "2025-08-21 19:02:28.595 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:01:10.303149", "seconds": 70.303149}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:02:28.595691+05:30", "timestamp": 1755783148.595691}}}
{"text": "2025-08-21 19:02:28.933 | DEBUG    | app.ws.live:emit_delta:408 - Emitted positions delta: seq=78\n", "record": {"elapsed": {"repr": "0:01:10.640626", "seconds": 70.640626}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "emit_delta", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 408, "message": "Emitted positions delta: seq=78", "module": "live", "name": "app.ws.live", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:02:28.933168+05:30", "timestamp": 1755783148.933168}}}
{"text": "2025-08-21 19:02:29.241 | INFO     | app.services.dhan_client:get_pnl:489 - Starting accurate P&L calculation\n", "record": {"elapsed": {"repr": "0:01:10.948785", "seconds": 70.948785}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 489, "message": "Starting accurate P&L calculation", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:02:29.241327+05:30", "timestamp": 1755783149.241327}}}
{"text": "2025-08-21 19:02:29.241 | INFO     | app.services.dhan_client:get_pnl:491 - Fetched 5 positions\n", "record": {"elapsed": {"repr": "0:01:10.949302", "seconds": 70.949302}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 491, "message": "Fetched 5 positions", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:02:29.241844+05:30", "timestamp": 1755783149.241844}}}
{"text": "2025-08-21 19:02:29.242 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for RELIANCE: unrealized=-427554.15, today=-427554.15\n", "record": {"elapsed": {"repr": "0:01:10.949786", "seconds": 70.949786}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for RELIANCE: unrealized=-427554.15, today=-427554.15", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:02:29.242328+05:30", "timestamp": 1755783149.242328}}}
{"text": "2025-08-21 19:02:29.242 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for TCS: unrealized=-46589.15, today=-46589.15\n", "record": {"elapsed": {"repr": "0:01:10.950266", "seconds": 70.950266}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for TCS: unrealized=-46589.15, today=-46589.15", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:02:29.242808+05:30", "timestamp": 1755783149.242808}}}
{"text": "2025-08-21 19:02:29.243 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for HDFC: unrealized=1494699.39, today=1494699.39\n", "record": {"elapsed": {"repr": "0:01:10.950848", "seconds": 70.950848}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for HDFC: unrealized=1494699.39, today=1494699.39", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:02:29.243390+05:30", "timestamp": 1755783149.24339}}}
{"text": "2025-08-21 19:02:29.244 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for INFY: unrealized=22640.97, today=22640.97\n", "record": {"elapsed": {"repr": "0:01:10.951723", "seconds": 70.951723}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for INFY: unrealized=22640.97, today=22640.97", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:02:29.244265+05:30", "timestamp": 1755783149.244265}}}
{"text": "2025-08-21 19:02:29.244 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for ICICIBANK: unrealized=-492097.71, today=-492097.71\n", "record": {"elapsed": {"repr": "0:01:10.952212", "seconds": 70.952212}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for ICICIBANK: unrealized=-492097.71, today=-492097.71", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:02:29.244754+05:30", "timestamp": 1755783149.244754}}}
{"text": "2025-08-21 19:02:29.245 | INFO     | app.services.dhan_client:get_pnl:545 - Calculated totals - realized: 0.0, unrealized: 551099.35, day: 551099.35\n", "record": {"elapsed": {"repr": "0:01:10.952699", "seconds": 70.952699}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 545, "message": "Calculated totals - realized: 0.0, unrealized: 551099.35, day: 551099.35", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:02:29.245241+05:30", "timestamp": 1755783149.245241}}}
{"text": "2025-08-21 19:02:29.245 | DEBUG    | app.services.dhan_client:get_pnl:554 - PnL consistency check passed: drift=‚Çπ0.00\n", "record": {"elapsed": {"repr": "0:01:10.953149", "seconds": 70.953149}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 554, "message": "PnL consistency check passed: drift=‚Çπ0.00", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:02:29.245691+05:30", "timestamp": 1755783149.245691}}}
{"text": "2025-08-21 19:02:29.246 | DEBUG    | app.services.dhan_client:get_pnl:558 - Creating PnLTotals...\n", "record": {"elapsed": {"repr": "0:01:10.953648", "seconds": 70.953648}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 558, "message": "Creating PnLTotals...", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:02:29.246190+05:30", "timestamp": 1755783149.24619}}}
{"text": "2025-08-21 19:02:29.246 | DEBUG    | app.services.dhan_client:get_pnl:565 - PnLTotals created successfully\n", "record": {"elapsed": {"repr": "0:01:10.954232", "seconds": 70.954232}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 565, "message": "PnLTotals created successfully", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:02:29.246774+05:30", "timestamp": 1755783149.246774}}}
{"text": "2025-08-21 19:02:29.247 | DEBUG    | app.services.dhan_client:get_pnl:574 - Creating PnL model...\n", "record": {"elapsed": {"repr": "0:01:10.955085", "seconds": 70.955085}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 574, "message": "Creating PnL model...", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:02:29.247627+05:30", "timestamp": 1755783149.247627}}}
{"text": "2025-08-21 19:02:29.248 | DEBUG    | app.services.dhan_client:get_pnl:575 - Model fields: totals=<class 'app.models.schemas.PnLTotals'>, perSymbol=5, updated_at=2025-08-21 19:02:29.242259+05:30, trading_day=2025-08-21\n", "record": {"elapsed": {"repr": "0:01:10.955564", "seconds": 70.955564}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 575, "message": "Model fields: totals=<class 'app.models.schemas.PnLTotals'>, perSymbol=5, updated_at=2025-08-21 19:02:29.242259+05:30, trading_day=2025-08-21", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:02:29.248106+05:30", "timestamp": 1755783149.248106}}}
{"text": "2025-08-21 19:02:29.248 | DEBUG    | app.services.dhan_client:get_pnl:584 - Created PnL model: totals=PnLTotals(realized=0.0, unrealized=551099.35, day=551099.35, currency='INR') per_symbol=[PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1727, avg=618.93, ltp=371.36, unrealized=-427554.15, today_pnl=-427554.15), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=167, avg=948.57, ltp=1227.55, unrealized=-46589.15, today_pnl=-46589.15), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=1347, avg=801.44, ltp=1911.09, unrealized=1494699.39, today_pnl=1494699.39), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=143, avg=1427.62, ltp=1269.29, unrealized=22640.97, today_pnl=22640.97), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=438, avg=1994.48, ltp=870.97, unrealized=-492097.71, today_pnl=-492097.71)] updated_at=datetime.datetime(2025, 8, 21, 19, 2, 29, 242259, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))) trading_day='2025-08-21'\n", "record": {"elapsed": {"repr": "0:01:10.956070", "seconds": 70.95607}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 584, "message": "Created PnL model: totals=PnLTotals(realized=0.0, unrealized=551099.35, day=551099.35, currency='INR') per_symbol=[PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1727, avg=618.93, ltp=371.36, unrealized=-427554.15, today_pnl=-427554.15), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=167, avg=948.57, ltp=1227.55, unrealized=-46589.15, today_pnl=-46589.15), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=1347, avg=801.44, ltp=1911.09, unrealized=1494699.39, today_pnl=1494699.39), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=143, avg=1427.62, ltp=1269.29, unrealized=22640.97, today_pnl=22640.97), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=438, avg=1994.48, ltp=870.97, unrealized=-492097.71, today_pnl=-492097.71)] updated_at=datetime.datetime(2025, 8, 21, 19, 2, 29, 242259, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))) trading_day='2025-08-21'", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:02:29.248612+05:30", "timestamp": 1755783149.248612}}}
{"text": "2025-08-21 19:02:29.249 | DEBUG    | app.services.dhan_client:get_pnl:585 - PnL model fields: {'totals': PnLTotals(realized=0.0, unrealized=551099.35, day=551099.35, currency='INR'), 'per_symbol': [PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1727, avg=618.93, ltp=371.36, unrealized=-427554.15, today_pnl=-427554.15), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=167, avg=948.57, ltp=1227.55, unrealized=-46589.15, today_pnl=-46589.15), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=1347, avg=801.44, ltp=1911.09, unrealized=1494699.39, today_pnl=1494699.39), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=143, avg=1427.62, ltp=1269.29, unrealized=22640.97, today_pnl=22640.97), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=438, avg=1994.48, ltp=870.97, unrealized=-492097.71, today_pnl=-492097.71)], 'updated_at': datetime.datetime(2025, 8, 21, 19, 2, 29, 242259, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))), 'trading_day': '2025-08-21'}\n", "record": {"elapsed": {"repr": "0:01:10.956647", "seconds": 70.956647}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 585, "message": "PnL model fields: {'totals': PnLTotals(realized=0.0, unrealized=551099.35, day=551099.35, currency='INR'), 'per_symbol': [PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1727, avg=618.93, ltp=371.36, unrealized=-427554.15, today_pnl=-427554.15), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=167, avg=948.57, ltp=1227.55, unrealized=-46589.15, today_pnl=-46589.15), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=1347, avg=801.44, ltp=1911.09, unrealized=1494699.39, today_pnl=1494699.39), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=143, avg=1427.62, ltp=1269.29, unrealized=22640.97, today_pnl=22640.97), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=438, avg=1994.48, ltp=870.97, unrealized=-492097.71, today_pnl=-492097.71)], 'updated_at': datetime.datetime(2025, 8, 21, 19, 2, 29, 242259, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))), 'trading_day': '2025-08-21'}", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:02:29.249189+05:30", "timestamp": 1755783149.249189}}}
{"text": "2025-08-21 19:02:29.249 | INFO     | app.services.dhan_client:get_pnl:587 - P&L calculation completed successfully: 5 symbols, unrealized=‚Çπ551099.35\n", "record": {"elapsed": {"repr": "0:01:10.957076", "seconds": 70.957076}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 587, "message": "P&L calculation completed successfully: 5 symbols, unrealized=‚Çπ551099.35", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:02:29.249618+05:30", "timestamp": 1755783149.249618}}}
{"text": "2025-08-21 19:02:29.250 | DEBUG    | app.ws.live:emit_delta:408 - Emitted pnl delta: seq=79\n", "record": {"elapsed": {"repr": "0:01:10.957687", "seconds": 70.957687}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "emit_delta", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 408, "message": "Emitted pnl delta: seq=79", "module": "live", "name": "app.ws.live", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:02:29.250229+05:30", "timestamp": 1755783149.250229}}}
{"text": "2025-08-21 19:02:30.596 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:01:12.304337", "seconds": 72.304337}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:02:30.596879+05:30", "timestamp": 1755783150.596879}}}
{"text": "2025-08-21 19:02:30.597 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:01:12.304968", "seconds": 72.304968}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:02:30.597510+05:30", "timestamp": 1755783150.59751}}}
{"text": "2025-08-21 19:02:30.598 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:01:12.305540", "seconds": 72.30554}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:02:30.598082+05:30", "timestamp": 1755783150.598082}}}
{"text": "2025-08-21 19:02:30.598 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:01:12.305971", "seconds": 72.305971}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:02:30.598513+05:30", "timestamp": 1755783150.598513}}}
{"text": "2025-08-21 19:02:30.598 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:01:12.306401", "seconds": 72.306401}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:02:30.598943+05:30", "timestamp": 1755783150.598943}}}
{"text": "2025-08-21 19:02:30.599 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:01:12.306812", "seconds": 72.306812}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:02:30.599354+05:30", "timestamp": 1755783150.599354}}}
{"text": "2025-08-21 19:02:30.599 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:01:12.307297", "seconds": 72.307297}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:02:30.599839+05:30", "timestamp": 1755783150.599839}}}
{"text": "2025-08-21 19:02:30.600 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:01:12.307782", "seconds": 72.307782}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:02:30.600324+05:30", "timestamp": 1755783150.600324}}}
{"text": "2025-08-21 19:02:30.600 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:01:12.308302", "seconds": 72.308302}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:02:30.600844+05:30", "timestamp": 1755783150.600844}}}
{"text": "2025-08-21 19:02:30.601 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:01:12.309290", "seconds": 72.30929}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:02:30.601832+05:30", "timestamp": 1755783150.601832}}}
{"text": "2025-08-21 19:02:30.736 | DEBUG    | app.ws.live:emit_delta:408 - Emitted positions delta: seq=80\n", "record": {"elapsed": {"repr": "0:01:12.444253", "seconds": 72.444253}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "emit_delta", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 408, "message": "Emitted positions delta: seq=80", "module": "live", "name": "app.ws.live", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:02:30.736795+05:30", "timestamp": 1755783150.736795}}}
{"text": "2025-08-21 19:02:31.201 | INFO     | app.services.dhan_client:get_pnl:489 - Starting accurate P&L calculation\n", "record": {"elapsed": {"repr": "0:01:12.908641", "seconds": 72.908641}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 489, "message": "Starting accurate P&L calculation", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:02:31.201183+05:30", "timestamp": 1755783151.201183}}}
{"text": "2025-08-21 19:02:31.201 | INFO     | app.services.dhan_client:get_pnl:491 - Fetched 5 positions\n", "record": {"elapsed": {"repr": "0:01:12.909296", "seconds": 72.909296}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 491, "message": "Fetched 5 positions", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:02:31.201838+05:30", "timestamp": 1755783151.201838}}}
{"text": "2025-08-21 19:02:31.202 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for RELIANCE: unrealized=-439641.26, today=-439641.26\n", "record": {"elapsed": {"repr": "0:01:12.909887", "seconds": 72.909887}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for RELIANCE: unrealized=-439641.26, today=-439641.26", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:02:31.202429+05:30", "timestamp": 1755783151.202429}}}
{"text": "2025-08-21 19:02:31.203 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for TCS: unrealized=-45792.74, today=-45792.74\n", "record": {"elapsed": {"repr": "0:01:12.910591", "seconds": 72.910591}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for TCS: unrealized=-45792.74, today=-45792.74", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:02:31.203133+05:30", "timestamp": 1755783151.203133}}}
{"text": "2025-08-21 19:02:31.204 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for HDFC: unrealized=1527389.67, today=1527389.67\n", "record": {"elapsed": {"repr": "0:01:12.911539", "seconds": 72.911539}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for HDFC: unrealized=1527389.67, today=1527389.67", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:02:31.204081+05:30", "timestamp": 1755783151.204081}}}
{"text": "2025-08-21 19:02:31.204 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for INFY: unrealized=24294.04, today=24294.04\n", "record": {"elapsed": {"repr": "0:01:12.912165", "seconds": 72.912165}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for INFY: unrealized=24294.04, today=24294.04", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:02:31.204707+05:30", "timestamp": 1755783151.204707}}}
{"text": "2025-08-21 19:02:31.205 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for ICICIBANK: unrealized=-489830.66, today=-489830.66\n", "record": {"elapsed": {"repr": "0:01:12.912677", "seconds": 72.912677}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for ICICIBANK: unrealized=-489830.66, today=-489830.66", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:02:31.205219+05:30", "timestamp": 1755783151.205219}}}
{"text": "2025-08-21 19:02:31.205 | INFO     | app.services.dhan_client:get_pnl:545 - Calculated totals - realized: 0.0, unrealized: 576419.05, day: 576419.05\n", "record": {"elapsed": {"repr": "0:01:12.913079", "seconds": 72.913079}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 545, "message": "Calculated totals - realized: 0.0, unrealized: 576419.05, day: 576419.05", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:02:31.205621+05:30", "timestamp": 1755783151.205621}}}
{"text": "2025-08-21 19:02:31.206 | DEBUG    | app.services.dhan_client:get_pnl:554 - PnL consistency check passed: drift=‚Çπ0.00\n", "record": {"elapsed": {"repr": "0:01:12.913496", "seconds": 72.913496}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 554, "message": "PnL consistency check passed: drift=‚Çπ0.00", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:02:31.206038+05:30", "timestamp": 1755783151.206038}}}
{"text": "2025-08-21 19:02:31.206 | DEBUG    | app.services.dhan_client:get_pnl:558 - Creating PnLTotals...\n", "record": {"elapsed": {"repr": "0:01:12.913956", "seconds": 72.913956}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 558, "message": "Creating PnLTotals...", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:02:31.206498+05:30", "timestamp": 1755783151.206498}}}
{"text": "2025-08-21 19:02:31.206 | DEBUG    | app.services.dhan_client:get_pnl:565 - PnLTotals created successfully\n", "record": {"elapsed": {"repr": "0:01:12.914409", "seconds": 72.914409}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 565, "message": "PnLTotals created successfully", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:02:31.206951+05:30", "timestamp": 1755783151.206951}}}
{"text": "2025-08-21 19:02:31.207 | DEBUG    | app.services.dhan_client:get_pnl:574 - Creating PnL model...\n", "record": {"elapsed": {"repr": "0:01:12.914816", "seconds": 72.914816}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 574, "message": "Creating PnL model...", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:02:31.207358+05:30", "timestamp": 1755783151.207358}}}
{"text": "2025-08-21 19:02:31.207 | DEBUG    | app.services.dhan_client:get_pnl:575 - Model fields: totals=<class 'app.models.schemas.PnLTotals'>, perSymbol=5, updated_at=2025-08-21 19:02:31.202348+05:30, trading_day=2025-08-21\n", "record": {"elapsed": {"repr": "0:01:12.915252", "seconds": 72.915252}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 575, "message": "Model fields: totals=<class 'app.models.schemas.PnLTotals'>, perSymbol=5, updated_at=2025-08-21 19:02:31.202348+05:30, trading_day=2025-08-21", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:02:31.207794+05:30", "timestamp": 1755783151.207794}}}
{"text": "2025-08-21 19:02:31.208 | DEBUG    | app.services.dhan_client:get_pnl:584 - Created PnL model: totals=PnLTotals(realized=0.0, unrealized=576419.05, day=576419.05, currency='INR') per_symbol=[PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1727, avg=618.93, ltp=364.36, unrealized=-439641.26, today_pnl=-439641.26), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=167, avg=948.57, ltp=1222.78, unrealized=-45792.74, today_pnl=-45792.74), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=1347, avg=801.44, ltp=1935.36, unrealized=1527389.67, today_pnl=1527389.67), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=143, avg=1427.62, ltp=1257.73, unrealized=24294.04, today_pnl=24294.04), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=438, avg=1994.48, ltp=876.15, unrealized=-489830.66, today_pnl=-489830.66)] updated_at=datetime.datetime(2025, 8, 21, 19, 2, 31, 202348, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))) trading_day='2025-08-21'\n", "record": {"elapsed": {"repr": "0:01:12.915918", "seconds": 72.915918}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 584, "message": "Created PnL model: totals=PnLTotals(realized=0.0, unrealized=576419.05, day=576419.05, currency='INR') per_symbol=[PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1727, avg=618.93, ltp=364.36, unrealized=-439641.26, today_pnl=-439641.26), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=167, avg=948.57, ltp=1222.78, unrealized=-45792.74, today_pnl=-45792.74), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=1347, avg=801.44, ltp=1935.36, unrealized=1527389.67, today_pnl=1527389.67), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=143, avg=1427.62, ltp=1257.73, unrealized=24294.04, today_pnl=24294.04), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=438, avg=1994.48, ltp=876.15, unrealized=-489830.66, today_pnl=-489830.66)] updated_at=datetime.datetime(2025, 8, 21, 19, 2, 31, 202348, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))) trading_day='2025-08-21'", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:02:31.208460+05:30", "timestamp": 1755783151.20846}}}
{"text": "2025-08-21 19:02:31.209 | DEBUG    | app.services.dhan_client:get_pnl:585 - PnL model fields: {'totals': PnLTotals(realized=0.0, unrealized=576419.05, day=576419.05, currency='INR'), 'per_symbol': [PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1727, avg=618.93, ltp=364.36, unrealized=-439641.26, today_pnl=-439641.26), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=167, avg=948.57, ltp=1222.78, unrealized=-45792.74, today_pnl=-45792.74), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=1347, avg=801.44, ltp=1935.36, unrealized=1527389.67, today_pnl=1527389.67), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=143, avg=1427.62, ltp=1257.73, unrealized=24294.04, today_pnl=24294.04), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=438, avg=1994.48, ltp=876.15, unrealized=-489830.66, today_pnl=-489830.66)], 'updated_at': datetime.datetime(2025, 8, 21, 19, 2, 31, 202348, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))), 'trading_day': '2025-08-21'}\n", "record": {"elapsed": {"repr": "0:01:12.917044", "seconds": 72.917044}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 585, "message": "PnL model fields: {'totals': PnLTotals(realized=0.0, unrealized=576419.05, day=576419.05, currency='INR'), 'per_symbol': [PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1727, avg=618.93, ltp=364.36, unrealized=-439641.26, today_pnl=-439641.26), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=167, avg=948.57, ltp=1222.78, unrealized=-45792.74, today_pnl=-45792.74), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=1347, avg=801.44, ltp=1935.36, unrealized=1527389.67, today_pnl=1527389.67), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=143, avg=1427.62, ltp=1257.73, unrealized=24294.04, today_pnl=24294.04), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=438, avg=1994.48, ltp=876.15, unrealized=-489830.66, today_pnl=-489830.66)], 'updated_at': datetime.datetime(2025, 8, 21, 19, 2, 31, 202348, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))), 'trading_day': '2025-08-21'}", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:02:31.209586+05:30", "timestamp": 1755783151.209586}}}
{"text": "2025-08-21 19:02:31.210 | INFO     | app.services.dhan_client:get_pnl:587 - P&L calculation completed successfully: 5 symbols, unrealized=‚Çπ576419.05\n", "record": {"elapsed": {"repr": "0:01:12.917610", "seconds": 72.91761}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 587, "message": "P&L calculation completed successfully: 5 symbols, unrealized=‚Çπ576419.05", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:02:31.210152+05:30", "timestamp": 1755783151.210152}}}
{"text": "2025-08-21 19:02:31.210 | DEBUG    | app.ws.live:emit_delta:408 - Emitted pnl delta: seq=81\n", "record": {"elapsed": {"repr": "0:01:12.918200", "seconds": 72.9182}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "emit_delta", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 408, "message": "Emitted pnl delta: seq=81", "module": "live", "name": "app.ws.live", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:02:31.210742+05:30", "timestamp": 1755783151.210742}}}
{"text": "2025-08-21 19:02:32.602 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:01:14.310109", "seconds": 74.310109}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:02:32.602651+05:30", "timestamp": 1755783152.602651}}}
{"text": "2025-08-21 19:02:32.603 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:01:14.311065", "seconds": 74.311065}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:02:32.603607+05:30", "timestamp": 1755783152.603607}}}
{"text": "2025-08-21 19:02:32.604 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:01:14.311504", "seconds": 74.311504}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:02:32.604046+05:30", "timestamp": 1755783152.604046}}}
{"text": "2025-08-21 19:02:32.604 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:01:14.311946", "seconds": 74.311946}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:02:32.604488+05:30", "timestamp": 1755783152.604488}}}
{"text": "2025-08-21 19:02:32.604 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:01:14.312427", "seconds": 74.312427}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:02:32.604969+05:30", "timestamp": 1755783152.604969}}}
{"text": "2025-08-21 19:02:32.605 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:01:14.312852", "seconds": 74.312852}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:02:32.605394+05:30", "timestamp": 1755783152.605394}}}
{"text": "2025-08-21 19:02:32.605 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:01:14.313212", "seconds": 74.313212}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:02:32.605754+05:30", "timestamp": 1755783152.605754}}}
{"text": "2025-08-21 19:02:32.606 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:01:14.313663", "seconds": 74.313663}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:02:32.606205+05:30", "timestamp": 1755783152.606205}}}
{"text": "2025-08-21 19:02:32.606 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:01:14.314043", "seconds": 74.314043}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:02:32.606585+05:30", "timestamp": 1755783152.606585}}}
{"text": "2025-08-21 19:02:32.607 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:01:14.314477", "seconds": 74.314477}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:02:32.607019+05:30", "timestamp": 1755783152.607019}}}
{"text": "2025-08-21 19:02:33.147 | INFO     | app.services.dhan_client:get_pnl:489 - Starting accurate P&L calculation\n", "record": {"elapsed": {"repr": "0:01:14.854826", "seconds": 74.854826}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 489, "message": "Starting accurate P&L calculation", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:02:33.147368+05:30", "timestamp": 1755783153.147368}}}
{"text": "2025-08-21 19:02:33.147 | INFO     | app.services.dhan_client:get_pnl:491 - Fetched 5 positions\n", "record": {"elapsed": {"repr": "0:01:14.855352", "seconds": 74.855352}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 491, "message": "Fetched 5 positions", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:02:33.147894+05:30", "timestamp": 1755783153.147894}}}
{"text": "2025-08-21 19:02:33.148 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for RELIANCE: unrealized=-428435.61, today=-428435.61\n", "record": {"elapsed": {"repr": "0:01:14.855805", "seconds": 74.855805}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for RELIANCE: unrealized=-428435.61, today=-428435.61", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:02:33.148347+05:30", "timestamp": 1755783153.148347}}}
{"text": "2025-08-21 19:02:33.148 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for TCS: unrealized=-46618.33, today=-46618.33\n", "record": {"elapsed": {"repr": "0:01:14.856247", "seconds": 74.856247}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for TCS: unrealized=-46618.33, today=-46618.33", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:02:33.148789+05:30", "timestamp": 1755783153.148789}}}
{"text": "2025-08-21 19:02:33.149 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for HDFC: unrealized=1542325.58, today=1542325.58\n", "record": {"elapsed": {"repr": "0:01:14.856775", "seconds": 74.856775}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for HDFC: unrealized=1542325.58, today=1542325.58", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:02:33.149317+05:30", "timestamp": 1755783153.149317}}}
{"text": "2025-08-21 19:02:33.150 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for INFY: unrealized=21593.29, today=21593.29\n", "record": {"elapsed": {"repr": "0:01:14.857540", "seconds": 74.85754}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for INFY: unrealized=21593.29, today=21593.29", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:02:33.150082+05:30", "timestamp": 1755783153.150082}}}
{"text": "2025-08-21 19:02:33.150 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for ICICIBANK: unrealized=-489195.74, today=-489195.74\n", "record": {"elapsed": {"repr": "0:01:14.858096", "seconds": 74.858096}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for ICICIBANK: unrealized=-489195.74, today=-489195.74", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:02:33.150638+05:30", "timestamp": 1755783153.150638}}}
{"text": "2025-08-21 19:02:33.151 | INFO     | app.services.dhan_client:get_pnl:545 - Calculated totals - realized: 0.0, unrealized: 599669.19, day: 599669.19\n", "record": {"elapsed": {"repr": "0:01:14.858540", "seconds": 74.85854}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 545, "message": "Calculated totals - realized: 0.0, unrealized: 599669.19, day: 599669.19", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:02:33.151082+05:30", "timestamp": 1755783153.151082}}}
{"text": "2025-08-21 19:02:33.151 | DEBUG    | app.services.dhan_client:get_pnl:554 - PnL consistency check passed: drift=‚Çπ0.00\n", "record": {"elapsed": {"repr": "0:01:14.859008", "seconds": 74.859008}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 554, "message": "PnL consistency check passed: drift=‚Çπ0.00", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:02:33.151550+05:30", "timestamp": 1755783153.15155}}}
{"text": "2025-08-21 19:02:33.152 | DEBUG    | app.services.dhan_client:get_pnl:558 - Creating PnLTotals...\n", "record": {"elapsed": {"repr": "0:01:14.859490", "seconds": 74.85949}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 558, "message": "Creating PnLTotals...", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:02:33.152032+05:30", "timestamp": 1755783153.152032}}}
{"text": "2025-08-21 19:02:33.152 | DEBUG    | app.services.dhan_client:get_pnl:565 - PnLTotals created successfully\n", "record": {"elapsed": {"repr": "0:01:14.860035", "seconds": 74.860035}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 565, "message": "PnLTotals created successfully", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:02:33.152577+05:30", "timestamp": 1755783153.152577}}}
{"text": "2025-08-21 19:02:33.153 | DEBUG    | app.services.dhan_client:get_pnl:574 - Creating PnL model...\n", "record": {"elapsed": {"repr": "0:01:14.860937", "seconds": 74.860937}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 574, "message": "Creating PnL model...", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:02:33.153479+05:30", "timestamp": 1755783153.153479}}}
{"text": "2025-08-21 19:02:33.154 | DEBUG    | app.services.dhan_client:get_pnl:575 - Model fields: totals=<class 'app.models.schemas.PnLTotals'>, perSymbol=5, updated_at=2025-08-21 19:02:33.148279+05:30, trading_day=2025-08-21\n", "record": {"elapsed": {"repr": "0:01:14.861594", "seconds": 74.861594}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 575, "message": "Model fields: totals=<class 'app.models.schemas.PnLTotals'>, perSymbol=5, updated_at=2025-08-21 19:02:33.148279+05:30, trading_day=2025-08-21", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:02:33.154136+05:30", "timestamp": 1755783153.154136}}}
{"text": "2025-08-21 19:02:33.154 | DEBUG    | app.services.dhan_client:get_pnl:584 - Created PnL model: totals=PnLTotals(realized=0.0, unrealized=599669.19, day=599669.19, currency='INR') per_symbol=[PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1727, avg=618.93, ltp=370.85, unrealized=-428435.61, today_pnl=-428435.61), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=167, avg=948.57, ltp=1227.72, unrealized=-46618.33, today_pnl=-46618.33), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=1347, avg=801.44, ltp=1946.45, unrealized=1542325.58, today_pnl=1542325.58), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=143, avg=1427.62, ltp=1276.62, unrealized=21593.29, today_pnl=21593.29), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=438, avg=1994.48, ltp=877.59, unrealized=-489195.74, today_pnl=-489195.74)] updated_at=datetime.datetime(2025, 8, 21, 19, 2, 33, 148279, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))) trading_day='2025-08-21'\n", "record": {"elapsed": {"repr": "0:01:14.862164", "seconds": 74.862164}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 584, "message": "Created PnL model: totals=PnLTotals(realized=0.0, unrealized=599669.19, day=599669.19, currency='INR') per_symbol=[PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1727, avg=618.93, ltp=370.85, unrealized=-428435.61, today_pnl=-428435.61), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=167, avg=948.57, ltp=1227.72, unrealized=-46618.33, today_pnl=-46618.33), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=1347, avg=801.44, ltp=1946.45, unrealized=1542325.58, today_pnl=1542325.58), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=143, avg=1427.62, ltp=1276.62, unrealized=21593.29, today_pnl=21593.29), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=438, avg=1994.48, ltp=877.59, unrealized=-489195.74, today_pnl=-489195.74)] updated_at=datetime.datetime(2025, 8, 21, 19, 2, 33, 148279, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))) trading_day='2025-08-21'", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:02:33.154706+05:30", "timestamp": 1755783153.154706}}}
{"text": "2025-08-21 19:02:33.155 | DEBUG    | app.services.dhan_client:get_pnl:585 - PnL model fields: {'totals': PnLTotals(realized=0.0, unrealized=599669.19, day=599669.19, currency='INR'), 'per_symbol': [PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1727, avg=618.93, ltp=370.85, unrealized=-428435.61, today_pnl=-428435.61), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=167, avg=948.57, ltp=1227.72, unrealized=-46618.33, today_pnl=-46618.33), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=1347, avg=801.44, ltp=1946.45, unrealized=1542325.58, today_pnl=1542325.58), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=143, avg=1427.62, ltp=1276.62, unrealized=21593.29, today_pnl=21593.29), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=438, avg=1994.48, ltp=877.59, unrealized=-489195.74, today_pnl=-489195.74)], 'updated_at': datetime.datetime(2025, 8, 21, 19, 2, 33, 148279, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))), 'trading_day': '2025-08-21'}\n", "record": {"elapsed": {"repr": "0:01:14.862751", "seconds": 74.862751}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 585, "message": "PnL model fields: {'totals': PnLTotals(realized=0.0, unrealized=599669.19, day=599669.19, currency='INR'), 'per_symbol': [PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1727, avg=618.93, ltp=370.85, unrealized=-428435.61, today_pnl=-428435.61), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=167, avg=948.57, ltp=1227.72, unrealized=-46618.33, today_pnl=-46618.33), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=1347, avg=801.44, ltp=1946.45, unrealized=1542325.58, today_pnl=1542325.58), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=143, avg=1427.62, ltp=1276.62, unrealized=21593.29, today_pnl=21593.29), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=438, avg=1994.48, ltp=877.59, unrealized=-489195.74, today_pnl=-489195.74)], 'updated_at': datetime.datetime(2025, 8, 21, 19, 2, 33, 148279, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))), 'trading_day': '2025-08-21'}", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:02:33.155293+05:30", "timestamp": 1755783153.155293}}}
{"text": "2025-08-21 19:02:33.155 | INFO     | app.services.dhan_client:get_pnl:587 - P&L calculation completed successfully: 5 symbols, unrealized=‚Çπ599669.19\n", "record": {"elapsed": {"repr": "0:01:14.863346", "seconds": 74.863346}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 587, "message": "P&L calculation completed successfully: 5 symbols, unrealized=‚Çπ599669.19", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:02:33.155888+05:30", "timestamp": 1755783153.155888}}}
{"text": "2025-08-21 19:02:33.156 | DEBUG    | app.ws.live:emit_delta:408 - Emitted pnl delta: seq=82\n", "record": {"elapsed": {"repr": "0:01:14.863940", "seconds": 74.86394}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "emit_delta", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 408, "message": "Emitted pnl delta: seq=82", "module": "live", "name": "app.ws.live", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:02:33.156482+05:30", "timestamp": 1755783153.156482}}}
{"text": "2025-08-21 19:02:33.514 | DEBUG    | app.ws.live:emit_delta:408 - Emitted holdings delta: seq=83\n", "record": {"elapsed": {"repr": "0:01:15.221600", "seconds": 75.2216}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "emit_delta", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 408, "message": "Emitted holdings delta: seq=83", "module": "live", "name": "app.ws.live", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:02:33.514142+05:30", "timestamp": 1755783153.514142}}}
{"text": "2025-08-21 19:02:33.988 | DEBUG    | app.ws.live:emit_delta:408 - Emitted positions delta: seq=84\n", "record": {"elapsed": {"repr": "0:01:15.696243", "seconds": 75.696243}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "emit_delta", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 408, "message": "Emitted positions delta: seq=84", "module": "live", "name": "app.ws.live", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:02:33.988785+05:30", "timestamp": 1755783153.988785}}}
{"text": "2025-08-21 19:02:34.607 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:01:16.315201", "seconds": 76.315201}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:02:34.607743+05:30", "timestamp": 1755783154.607743}}}
{"text": "2025-08-21 19:02:34.608 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:01:16.315883", "seconds": 76.315883}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:02:34.608425+05:30", "timestamp": 1755783154.608425}}}
{"text": "2025-08-21 19:02:34.608 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:01:16.316384", "seconds": 76.316384}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:02:34.608926+05:30", "timestamp": 1755783154.608926}}}
{"text": "2025-08-21 19:02:34.609 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:01:16.316979", "seconds": 76.316979}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:02:34.609521+05:30", "timestamp": 1755783154.609521}}}
{"text": "2025-08-21 19:02:34.610 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:01:16.317829", "seconds": 76.317829}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:02:34.610371+05:30", "timestamp": 1755783154.610371}}}
{"text": "2025-08-21 19:02:34.611 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:01:16.318470", "seconds": 76.31847}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:02:34.611012+05:30", "timestamp": 1755783154.611012}}}
{"text": "2025-08-21 19:02:34.611 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:01:16.318900", "seconds": 76.3189}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:02:34.611442+05:30", "timestamp": 1755783154.611442}}}
{"text": "2025-08-21 19:02:34.611 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:01:16.319269", "seconds": 76.319269}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:02:34.611811+05:30", "timestamp": 1755783154.611811}}}
{"text": "2025-08-21 19:02:34.612 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:01:16.319789", "seconds": 76.319789}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:02:34.612331+05:30", "timestamp": 1755783154.612331}}}
{"text": "2025-08-21 19:02:34.612 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:01:16.320226", "seconds": 76.320226}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:02:34.612768+05:30", "timestamp": 1755783154.612768}}}
{"text": "2025-08-21 19:02:35.063 | INFO     | app.services.dhan_client:get_pnl:489 - Starting accurate P&L calculation\n", "record": {"elapsed": {"repr": "0:01:16.770485", "seconds": 76.770485}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 489, "message": "Starting accurate P&L calculation", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:02:35.063027+05:30", "timestamp": 1755783155.063027}}}
{"text": "2025-08-21 19:02:35.063 | INFO     | app.services.dhan_client:get_pnl:491 - Fetched 5 positions\n", "record": {"elapsed": {"repr": "0:01:16.771020", "seconds": 76.77102}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 491, "message": "Fetched 5 positions", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:02:35.063562+05:30", "timestamp": 1755783155.063562}}}
{"text": "2025-08-21 19:02:35.064 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for RELIANCE: unrealized=-425257.13, today=-425257.13\n", "record": {"elapsed": {"repr": "0:01:16.771532", "seconds": 76.771532}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for RELIANCE: unrealized=-425257.13, today=-425257.13", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:02:35.064074+05:30", "timestamp": 1755783155.064074}}}
{"text": "2025-08-21 19:02:35.064 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for TCS: unrealized=-47101.72, today=-47101.72\n", "record": {"elapsed": {"repr": "0:01:16.772066", "seconds": 76.772066}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for TCS: unrealized=-47101.72, today=-47101.72", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:02:35.064608+05:30", "timestamp": 1755783155.064608}}}
{"text": "2025-08-21 19:02:35.065 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for HDFC: unrealized=1551128.64, today=1551128.64\n", "record": {"elapsed": {"repr": "0:01:16.772898", "seconds": 76.772898}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for HDFC: unrealized=1551128.64, today=1551128.64", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:02:35.065440+05:30", "timestamp": 1755783155.06544}}}
{"text": "2025-08-21 19:02:35.066 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for INFY: unrealized=20641.33, today=20641.33\n", "record": {"elapsed": {"repr": "0:01:16.773659", "seconds": 76.773659}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for INFY: unrealized=20641.33, today=20641.33", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:02:35.066201+05:30", "timestamp": 1755783155.066201}}}
{"text": "2025-08-21 19:02:35.066 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for ICICIBANK: unrealized=-483488.13, today=-483488.13\n", "record": {"elapsed": {"repr": "0:01:16.774138", "seconds": 76.774138}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for ICICIBANK: unrealized=-483488.13, today=-483488.13", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:02:35.066680+05:30", "timestamp": 1755783155.06668}}}
{"text": "2025-08-21 19:02:35.067 | INFO     | app.services.dhan_client:get_pnl:545 - Calculated totals - realized: 0.0, unrealized: 615922.99, day: 615922.99\n", "record": {"elapsed": {"repr": "0:01:16.774615", "seconds": 76.774615}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 545, "message": "Calculated totals - realized: 0.0, unrealized: 615922.99, day: 615922.99", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:02:35.067157+05:30", "timestamp": 1755783155.067157}}}
{"text": "2025-08-21 19:02:35.067 | DEBUG    | app.services.dhan_client:get_pnl:554 - PnL consistency check passed: drift=‚Çπ0.00\n", "record": {"elapsed": {"repr": "0:01:16.775215", "seconds": 76.775215}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 554, "message": "PnL consistency check passed: drift=‚Çπ0.00", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:02:35.067757+05:30", "timestamp": 1755783155.067757}}}
{"text": "2025-08-21 19:02:35.068 | DEBUG    | app.services.dhan_client:get_pnl:558 - Creating PnLTotals...\n", "record": {"elapsed": {"repr": "0:01:16.776116", "seconds": 76.776116}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 558, "message": "Creating PnLTotals...", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:02:35.068658+05:30", "timestamp": 1755783155.068658}}}
{"text": "2025-08-21 19:02:35.069 | DEBUG    | app.services.dhan_client:get_pnl:565 - PnLTotals created successfully\n", "record": {"elapsed": {"repr": "0:01:16.776958", "seconds": 76.776958}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 565, "message": "PnLTotals created successfully", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:02:35.069500+05:30", "timestamp": 1755783155.0695}}}
{"text": "2025-08-21 19:02:35.069 | DEBUG    | app.services.dhan_client:get_pnl:574 - Creating PnL model...\n", "record": {"elapsed": {"repr": "0:01:16.777391", "seconds": 76.777391}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 574, "message": "Creating PnL model...", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:02:35.069933+05:30", "timestamp": 1755783155.069933}}}
{"text": "2025-08-21 19:02:35.070 | DEBUG    | app.services.dhan_client:get_pnl:575 - Model fields: totals=<class 'app.models.schemas.PnLTotals'>, perSymbol=5, updated_at=2025-08-21 19:02:35.064001+05:30, trading_day=2025-08-21\n", "record": {"elapsed": {"repr": "0:01:16.777769", "seconds": 76.777769}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 575, "message": "Model fields: totals=<class 'app.models.schemas.PnLTotals'>, perSymbol=5, updated_at=2025-08-21 19:02:35.064001+05:30, trading_day=2025-08-21", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:02:35.070311+05:30", "timestamp": 1755783155.070311}}}
{"text": "2025-08-21 19:02:35.070 | DEBUG    | app.services.dhan_client:get_pnl:584 - Created PnL model: totals=PnLTotals(realized=0.0, unrealized=615922.99, day=615922.99, currency='INR') per_symbol=[PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1727, avg=618.93, ltp=372.69, unrealized=-425257.13, today_pnl=-425257.13), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=167, avg=948.57, ltp=1230.62, unrealized=-47101.72, today_pnl=-47101.72), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=1347, avg=801.44, ltp=1952.98, unrealized=1551128.64, today_pnl=1551128.64), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=143, avg=1427.62, ltp=1283.28, unrealized=20641.33, today_pnl=20641.33), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=438, avg=1994.48, ltp=890.63, unrealized=-483488.13, today_pnl=-483488.13)] updated_at=datetime.datetime(2025, 8, 21, 19, 2, 35, 64001, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))) trading_day='2025-08-21'\n", "record": {"elapsed": {"repr": "0:01:16.778306", "seconds": 76.778306}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 584, "message": "Created PnL model: totals=PnLTotals(realized=0.0, unrealized=615922.99, day=615922.99, currency='INR') per_symbol=[PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1727, avg=618.93, ltp=372.69, unrealized=-425257.13, today_pnl=-425257.13), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=167, avg=948.57, ltp=1230.62, unrealized=-47101.72, today_pnl=-47101.72), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=1347, avg=801.44, ltp=1952.98, unrealized=1551128.64, today_pnl=1551128.64), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=143, avg=1427.62, ltp=1283.28, unrealized=20641.33, today_pnl=20641.33), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=438, avg=1994.48, ltp=890.63, unrealized=-483488.13, today_pnl=-483488.13)] updated_at=datetime.datetime(2025, 8, 21, 19, 2, 35, 64001, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))) trading_day='2025-08-21'", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:02:35.070848+05:30", "timestamp": 1755783155.070848}}}
{"text": "2025-08-21 19:02:35.071 | DEBUG    | app.services.dhan_client:get_pnl:585 - PnL model fields: {'totals': PnLTotals(realized=0.0, unrealized=615922.99, day=615922.99, currency='INR'), 'per_symbol': [PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1727, avg=618.93, ltp=372.69, unrealized=-425257.13, today_pnl=-425257.13), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=167, avg=948.57, ltp=1230.62, unrealized=-47101.72, today_pnl=-47101.72), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=1347, avg=801.44, ltp=1952.98, unrealized=1551128.64, today_pnl=1551128.64), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=143, avg=1427.62, ltp=1283.28, unrealized=20641.33, today_pnl=20641.33), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=438, avg=1994.48, ltp=890.63, unrealized=-483488.13, today_pnl=-483488.13)], 'updated_at': datetime.datetime(2025, 8, 21, 19, 2, 35, 64001, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))), 'trading_day': '2025-08-21'}\n", "record": {"elapsed": {"repr": "0:01:16.778883", "seconds": 76.778883}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 585, "message": "PnL model fields: {'totals': PnLTotals(realized=0.0, unrealized=615922.99, day=615922.99, currency='INR'), 'per_symbol': [PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1727, avg=618.93, ltp=372.69, unrealized=-425257.13, today_pnl=-425257.13), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=167, avg=948.57, ltp=1230.62, unrealized=-47101.72, today_pnl=-47101.72), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=1347, avg=801.44, ltp=1952.98, unrealized=1551128.64, today_pnl=1551128.64), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=143, avg=1427.62, ltp=1283.28, unrealized=20641.33, today_pnl=20641.33), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=438, avg=1994.48, ltp=890.63, unrealized=-483488.13, today_pnl=-483488.13)], 'updated_at': datetime.datetime(2025, 8, 21, 19, 2, 35, 64001, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))), 'trading_day': '2025-08-21'}", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:02:35.071425+05:30", "timestamp": 1755783155.071425}}}
{"text": "2025-08-21 19:02:35.071 | INFO     | app.services.dhan_client:get_pnl:587 - P&L calculation completed successfully: 5 symbols, unrealized=‚Çπ615922.99\n", "record": {"elapsed": {"repr": "0:01:16.779372", "seconds": 76.779372}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 587, "message": "P&L calculation completed successfully: 5 symbols, unrealized=‚Çπ615922.99", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:02:35.071914+05:30", "timestamp": 1755783155.071914}}}
{"text": "2025-08-21 19:02:35.072 | DEBUG    | app.ws.live:emit_delta:408 - Emitted pnl delta: seq=85\n", "record": {"elapsed": {"repr": "0:01:16.780183", "seconds": 76.780183}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "emit_delta", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 408, "message": "Emitted pnl delta: seq=85", "module": "live", "name": "app.ws.live", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:02:35.072725+05:30", "timestamp": 1755783155.072725}}}
{"text": "2025-08-21 19:02:35.812 | DEBUG    | app.ws.live:emit_delta:408 - Emitted positions delta: seq=86\n", "record": {"elapsed": {"repr": "0:01:17.520215", "seconds": 77.520215}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "emit_delta", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 408, "message": "Emitted positions delta: seq=86", "module": "live", "name": "app.ws.live", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:02:35.812757+05:30", "timestamp": 1755783155.812757}}}
{"text": "2025-08-21 19:02:36.613 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:01:18.321210", "seconds": 78.32121}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:02:36.613752+05:30", "timestamp": 1755783156.613752}}}
{"text": "2025-08-21 19:02:36.614 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:01:18.322235", "seconds": 78.322235}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:02:36.614777+05:30", "timestamp": 1755783156.614777}}}
{"text": "2025-08-21 19:02:36.615 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:01:18.322762", "seconds": 78.322762}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:02:36.615304+05:30", "timestamp": 1755783156.615304}}}
{"text": "2025-08-21 19:02:36.615 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:01:18.323238", "seconds": 78.323238}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:02:36.615780+05:30", "timestamp": 1755783156.61578}}}
{"text": "2025-08-21 19:02:36.616 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:01:18.323768", "seconds": 78.323768}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:02:36.616310+05:30", "timestamp": 1755783156.61631}}}
{"text": "2025-08-21 19:02:36.616 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:01:18.324323", "seconds": 78.324323}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:02:36.616865+05:30", "timestamp": 1755783156.616865}}}
{"text": "2025-08-21 19:02:36.617 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:01:18.325088", "seconds": 78.325088}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:02:36.617630+05:30", "timestamp": 1755783156.61763}}}
{"text": "2025-08-21 19:02:36.618 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:01:18.325708", "seconds": 78.325708}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:02:36.618250+05:30", "timestamp": 1755783156.61825}}}
{"text": "2025-08-21 19:02:36.618 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:01:18.326102", "seconds": 78.326102}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:02:36.618644+05:30", "timestamp": 1755783156.618644}}}
{"text": "2025-08-21 19:02:36.619 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:01:18.326471", "seconds": 78.326471}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:02:36.619013+05:30", "timestamp": 1755783156.619013}}}
{"text": "2025-08-21 19:02:36.936 | INFO     | app.services.dhan_client:get_pnl:489 - Starting accurate P&L calculation\n", "record": {"elapsed": {"repr": "0:01:18.644368", "seconds": 78.644368}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 489, "message": "Starting accurate P&L calculation", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:02:36.936910+05:30", "timestamp": 1755783156.93691}}}
{"text": "2025-08-21 19:02:36.937 | INFO     | app.services.dhan_client:get_pnl:491 - Fetched 5 positions\n", "record": {"elapsed": {"repr": "0:01:18.644899", "seconds": 78.644899}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 491, "message": "Fetched 5 positions", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:02:36.937441+05:30", "timestamp": 1755783156.937441}}}
{"text": "2025-08-21 19:02:36.937 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for RELIANCE: unrealized=-421465.75, today=-421465.75\n", "record": {"elapsed": {"repr": "0:01:18.645402", "seconds": 78.645402}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for RELIANCE: unrealized=-421465.75, today=-421465.75", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:02:36.937944+05:30", "timestamp": 1755783156.937944}}}
{"text": "2025-08-21 19:02:36.938 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for TCS: unrealized=-43756.36, today=-43756.36\n", "record": {"elapsed": {"repr": "0:01:18.645889", "seconds": 78.645889}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for TCS: unrealized=-43756.36, today=-43756.36", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:02:36.938431+05:30", "timestamp": 1755783156.938431}}}
{"text": "2025-08-21 19:02:36.939 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for HDFC: unrealized=1520687.86, today=1520687.86\n", "record": {"elapsed": {"repr": "0:01:18.646607", "seconds": 78.646607}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for HDFC: unrealized=1520687.86, today=1520687.86", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:02:36.939149+05:30", "timestamp": 1755783156.939149}}}
{"text": "2025-08-21 19:02:36.940 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for INFY: unrealized=22960.0, today=22960.0\n", "record": {"elapsed": {"repr": "0:01:18.647459", "seconds": 78.647459}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for INFY: unrealized=22960.0, today=22960.0", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:02:36.940001+05:30", "timestamp": 1755783156.940001}}}
{"text": "2025-08-21 19:02:36.940 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for ICICIBANK: unrealized=-487606.41, today=-487606.41\n", "record": {"elapsed": {"repr": "0:01:18.648008", "seconds": 78.648008}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for ICICIBANK: unrealized=-487606.41, today=-487606.41", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:02:36.940550+05:30", "timestamp": 1755783156.94055}}}
{"text": "2025-08-21 19:02:36.941 | INFO     | app.services.dhan_client:get_pnl:545 - Calculated totals - realized: 0.0, unrealized: 590819.34, day: 590819.34\n", "record": {"elapsed": {"repr": "0:01:18.648578", "seconds": 78.648578}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 545, "message": "Calculated totals - realized: 0.0, unrealized: 590819.34, day: 590819.34", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:02:36.941120+05:30", "timestamp": 1755783156.94112}}}
{"text": "2025-08-21 19:02:36.941 | DEBUG    | app.services.dhan_client:get_pnl:554 - PnL consistency check passed: drift=‚Çπ0.00\n", "record": {"elapsed": {"repr": "0:01:18.649164", "seconds": 78.649164}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 554, "message": "PnL consistency check passed: drift=‚Çπ0.00", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:02:36.941706+05:30", "timestamp": 1755783156.941706}}}
{"text": "2025-08-21 19:02:36.942 | DEBUG    | app.services.dhan_client:get_pnl:558 - Creating PnLTotals...\n", "record": {"elapsed": {"repr": "0:01:18.649826", "seconds": 78.649826}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 558, "message": "Creating PnLTotals...", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:02:36.942368+05:30", "timestamp": 1755783156.942368}}}
{"text": "2025-08-21 19:02:36.943 | DEBUG    | app.services.dhan_client:get_pnl:565 - PnLTotals created successfully\n", "record": {"elapsed": {"repr": "0:01:18.650776", "seconds": 78.650776}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 565, "message": "PnLTotals created successfully", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:02:36.943318+05:30", "timestamp": 1755783156.943318}}}
{"text": "2025-08-21 19:02:36.943 | DEBUG    | app.services.dhan_client:get_pnl:574 - Creating PnL model...\n", "record": {"elapsed": {"repr": "0:01:18.651186", "seconds": 78.651186}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 574, "message": "Creating PnL model...", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:02:36.943728+05:30", "timestamp": 1755783156.943728}}}
{"text": "2025-08-21 19:02:36.944 | DEBUG    | app.services.dhan_client:get_pnl:575 - Model fields: totals=<class 'app.models.schemas.PnLTotals'>, perSymbol=5, updated_at=2025-08-21 19:02:36.937855+05:30, trading_day=2025-08-21\n", "record": {"elapsed": {"repr": "0:01:18.651584", "seconds": 78.651584}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 575, "message": "Model fields: totals=<class 'app.models.schemas.PnLTotals'>, perSymbol=5, updated_at=2025-08-21 19:02:36.937855+05:30, trading_day=2025-08-21", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:02:36.944126+05:30", "timestamp": 1755783156.944126}}}
{"text": "2025-08-21 19:02:36.944 | DEBUG    | app.services.dhan_client:get_pnl:584 - Created PnL model: totals=PnLTotals(realized=0.0, unrealized=590819.34, day=590819.34, currency='INR') per_symbol=[PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1727, avg=618.93, ltp=374.88, unrealized=-421465.75, today_pnl=-421465.75), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=167, avg=948.57, ltp=1210.58, unrealized=-43756.36, today_pnl=-43756.36), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=1347, avg=801.44, ltp=1930.38, unrealized=1520687.86, today_pnl=1520687.86), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=143, avg=1427.62, ltp=1267.06, unrealized=22960.0, today_pnl=22960.0), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=438, avg=1994.48, ltp=881.22, unrealized=-487606.41, today_pnl=-487606.41)] updated_at=datetime.datetime(2025, 8, 21, 19, 2, 36, 937855, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))) trading_day='2025-08-21'\n", "record": {"elapsed": {"repr": "0:01:18.652167", "seconds": 78.652167}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 584, "message": "Created PnL model: totals=PnLTotals(realized=0.0, unrealized=590819.34, day=590819.34, currency='INR') per_symbol=[PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1727, avg=618.93, ltp=374.88, unrealized=-421465.75, today_pnl=-421465.75), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=167, avg=948.57, ltp=1210.58, unrealized=-43756.36, today_pnl=-43756.36), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=1347, avg=801.44, ltp=1930.38, unrealized=1520687.86, today_pnl=1520687.86), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=143, avg=1427.62, ltp=1267.06, unrealized=22960.0, today_pnl=22960.0), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=438, avg=1994.48, ltp=881.22, unrealized=-487606.41, today_pnl=-487606.41)] updated_at=datetime.datetime(2025, 8, 21, 19, 2, 36, 937855, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))) trading_day='2025-08-21'", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:02:36.944709+05:30", "timestamp": 1755783156.944709}}}
{"text": "2025-08-21 19:02:36.945 | DEBUG    | app.services.dhan_client:get_pnl:585 - PnL model fields: {'totals': PnLTotals(realized=0.0, unrealized=590819.34, day=590819.34, currency='INR'), 'per_symbol': [PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1727, avg=618.93, ltp=374.88, unrealized=-421465.75, today_pnl=-421465.75), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=167, avg=948.57, ltp=1210.58, unrealized=-43756.36, today_pnl=-43756.36), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=1347, avg=801.44, ltp=1930.38, unrealized=1520687.86, today_pnl=1520687.86), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=143, avg=1427.62, ltp=1267.06, unrealized=22960.0, today_pnl=22960.0), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=438, avg=1994.48, ltp=881.22, unrealized=-487606.41, today_pnl=-487606.41)], 'updated_at': datetime.datetime(2025, 8, 21, 19, 2, 36, 937855, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))), 'trading_day': '2025-08-21'}\n", "record": {"elapsed": {"repr": "0:01:18.652831", "seconds": 78.652831}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 585, "message": "PnL model fields: {'totals': PnLTotals(realized=0.0, unrealized=590819.34, day=590819.34, currency='INR'), 'per_symbol': [PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1727, avg=618.93, ltp=374.88, unrealized=-421465.75, today_pnl=-421465.75), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=167, avg=948.57, ltp=1210.58, unrealized=-43756.36, today_pnl=-43756.36), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=1347, avg=801.44, ltp=1930.38, unrealized=1520687.86, today_pnl=1520687.86), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=143, avg=1427.62, ltp=1267.06, unrealized=22960.0, today_pnl=22960.0), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=438, avg=1994.48, ltp=881.22, unrealized=-487606.41, today_pnl=-487606.41)], 'updated_at': datetime.datetime(2025, 8, 21, 19, 2, 36, 937855, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))), 'trading_day': '2025-08-21'}", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:02:36.945373+05:30", "timestamp": 1755783156.945373}}}
{"text": "2025-08-21 19:02:36.945 | INFO     | app.services.dhan_client:get_pnl:587 - P&L calculation completed successfully: 5 symbols, unrealized=‚Çπ590819.34\n", "record": {"elapsed": {"repr": "0:01:18.653326", "seconds": 78.653326}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 587, "message": "P&L calculation completed successfully: 5 symbols, unrealized=‚Çπ590819.34", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:02:36.945868+05:30", "timestamp": 1755783156.945868}}}
{"text": "2025-08-21 19:02:36.946 | DEBUG    | app.ws.live:emit_delta:408 - Emitted pnl delta: seq=87\n", "record": {"elapsed": {"repr": "0:01:18.654025", "seconds": 78.654025}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "emit_delta", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 408, "message": "Emitted pnl delta: seq=87", "module": "live", "name": "app.ws.live", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:02:36.946567+05:30", "timestamp": 1755783156.946567}}}
{"text": "2025-08-21 19:02:37.545 | DEBUG    | app.ws.live:emit_delta:408 - Emitted positions delta: seq=88\n", "record": {"elapsed": {"repr": "0:01:19.252799", "seconds": 79.252799}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "emit_delta", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 408, "message": "Emitted positions delta: seq=88", "module": "live", "name": "app.ws.live", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:02:37.545341+05:30", "timestamp": 1755783157.545341}}}
{"text": "2025-08-21 19:02:38.619 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:01:20.327365", "seconds": 80.327365}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:02:38.619907+05:30", "timestamp": 1755783158.619907}}}
{"text": "2025-08-21 19:02:38.620 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:01:20.328049", "seconds": 80.328049}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:02:38.620591+05:30", "timestamp": 1755783158.620591}}}
{"text": "2025-08-21 19:02:38.621 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:01:20.328627", "seconds": 80.328627}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:02:38.621169+05:30", "timestamp": 1755783158.621169}}}
{"text": "2025-08-21 19:02:38.622 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:01:20.329540", "seconds": 80.32954}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:02:38.622082+05:30", "timestamp": 1755783158.622082}}}
{"text": "2025-08-21 19:02:38.622 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:01:20.330057", "seconds": 80.330057}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:02:38.622599+05:30", "timestamp": 1755783158.622599}}}
{"text": "2025-08-21 19:02:38.623 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:01:20.330518", "seconds": 80.330518}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:02:38.623060+05:30", "timestamp": 1755783158.62306}}}
{"text": "2025-08-21 19:02:38.623 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:01:20.331045", "seconds": 80.331045}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:02:38.623587+05:30", "timestamp": 1755783158.623587}}}
{"text": "2025-08-21 19:02:38.624 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:01:20.331604", "seconds": 80.331604}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:02:38.624146+05:30", "timestamp": 1755783158.624146}}}
{"text": "2025-08-21 19:02:38.624 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:01:20.332266", "seconds": 80.332266}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:02:38.624808+05:30", "timestamp": 1755783158.624808}}}
{"text": "2025-08-21 19:02:38.625 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:01:20.333072", "seconds": 80.333072}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:02:38.625614+05:30", "timestamp": 1755783158.625614}}}
{"text": "2025-08-21 19:02:38.751 | INFO     | app.services.dhan_client:get_pnl:489 - Starting accurate P&L calculation\n", "record": {"elapsed": {"repr": "0:01:20.458675", "seconds": 80.458675}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 489, "message": "Starting accurate P&L calculation", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:02:38.751217+05:30", "timestamp": 1755783158.751217}}}
{"text": "2025-08-21 19:02:38.751 | INFO     | app.services.dhan_client:get_pnl:491 - Fetched 5 positions\n", "record": {"elapsed": {"repr": "0:01:20.459266", "seconds": 80.459266}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 491, "message": "Fetched 5 positions", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:02:38.751808+05:30", "timestamp": 1755783158.751808}}}
{"text": "2025-08-21 19:02:38.752 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for RELIANCE: unrealized=-422287.05, today=-422287.05\n", "record": {"elapsed": {"repr": "0:01:20.459688", "seconds": 80.459688}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for RELIANCE: unrealized=-422287.05, today=-422287.05", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:02:38.752230+05:30", "timestamp": 1755783158.75223}}}
{"text": "2025-08-21 19:02:38.752 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for TCS: unrealized=-44771.23, today=-44771.23\n", "record": {"elapsed": {"repr": "0:01:20.460183", "seconds": 80.460183}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for TCS: unrealized=-44771.23, today=-44771.23", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:02:38.752725+05:30", "timestamp": 1755783158.752725}}}
{"text": "2025-08-21 19:02:38.753 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for HDFC: unrealized=1525571.21, today=1525571.21\n", "record": {"elapsed": {"repr": "0:01:20.460550", "seconds": 80.46055}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for HDFC: unrealized=1525571.21, today=1525571.21", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:02:38.753092+05:30", "timestamp": 1755783158.753092}}}
{"text": "2025-08-21 19:02:38.753 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for INFY: unrealized=22833.16, today=22833.16\n", "record": {"elapsed": {"repr": "0:01:20.461011", "seconds": 80.461011}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for INFY: unrealized=22833.16, today=22833.16", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:02:38.753553+05:30", "timestamp": 1755783158.753553}}}
{"text": "2025-08-21 19:02:38.754 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for ICICIBANK: unrealized=-485351.01, today=-485351.01\n", "record": {"elapsed": {"repr": "0:01:20.461458", "seconds": 80.461458}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for ICICIBANK: unrealized=-485351.01, today=-485351.01", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:02:38.754000+05:30", "timestamp": 1755783158.754}}}
{"text": "2025-08-21 19:02:38.754 | INFO     | app.services.dhan_client:get_pnl:545 - Calculated totals - realized: 0.0, unrealized: 595995.08, day: 595995.08\n", "record": {"elapsed": {"repr": "0:01:20.462305", "seconds": 80.462305}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 545, "message": "Calculated totals - realized: 0.0, unrealized: 595995.08, day: 595995.08", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:02:38.754847+05:30", "timestamp": 1755783158.754847}}}
{"text": "2025-08-21 19:02:38.755 | DEBUG    | app.services.dhan_client:get_pnl:554 - PnL consistency check passed: drift=‚Çπ0.00\n", "record": {"elapsed": {"repr": "0:01:20.463016", "seconds": 80.463016}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 554, "message": "PnL consistency check passed: drift=‚Çπ0.00", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:02:38.755558+05:30", "timestamp": 1755783158.755558}}}
{"text": "2025-08-21 19:02:38.755 | DEBUG    | app.services.dhan_client:get_pnl:558 - Creating PnLTotals...\n", "record": {"elapsed": {"repr": "0:01:20.463455", "seconds": 80.463455}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 558, "message": "Creating PnLTotals...", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:02:38.755997+05:30", "timestamp": 1755783158.755997}}}
{"text": "2025-08-21 19:02:38.756 | DEBUG    | app.services.dhan_client:get_pnl:565 - PnLTotals created successfully\n", "record": {"elapsed": {"repr": "0:01:20.463854", "seconds": 80.463854}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 565, "message": "PnLTotals created successfully", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:02:38.756396+05:30", "timestamp": 1755783158.756396}}}
{"text": "2025-08-21 19:02:38.756 | DEBUG    | app.services.dhan_client:get_pnl:574 - Creating PnL model...\n", "record": {"elapsed": {"repr": "0:01:20.464364", "seconds": 80.464364}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 574, "message": "Creating PnL model...", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:02:38.756906+05:30", "timestamp": 1755783158.756906}}}
{"text": "2025-08-21 19:02:38.757 | DEBUG    | app.services.dhan_client:get_pnl:575 - Model fields: totals=<class 'app.models.schemas.PnLTotals'>, perSymbol=5, updated_at=2025-08-21 19:02:38.752177+05:30, trading_day=2025-08-21\n", "record": {"elapsed": {"repr": "0:01:20.464934", "seconds": 80.464934}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 575, "message": "Model fields: totals=<class 'app.models.schemas.PnLTotals'>, perSymbol=5, updated_at=2025-08-21 19:02:38.752177+05:30, trading_day=2025-08-21", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:02:38.757476+05:30", "timestamp": 1755783158.757476}}}
{"text": "2025-08-21 19:02:38.758 | DEBUG    | app.services.dhan_client:get_pnl:584 - Created PnL model: totals=PnLTotals(realized=0.0, unrealized=595995.08, day=595995.08, currency='INR') per_symbol=[PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1727, avg=618.93, ltp=374.41, unrealized=-422287.05, today_pnl=-422287.05), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=167, avg=948.57, ltp=1216.66, unrealized=-44771.23, today_pnl=-44771.23), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=1347, avg=801.44, ltp=1934.01, unrealized=1525571.21, today_pnl=1525571.21), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=143, avg=1427.62, ltp=1267.95, unrealized=22833.16, today_pnl=22833.16), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=438, avg=1994.48, ltp=886.37, unrealized=-485351.01, today_pnl=-485351.01)] updated_at=datetime.datetime(2025, 8, 21, 19, 2, 38, 752177, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))) trading_day='2025-08-21'\n", "record": {"elapsed": {"repr": "0:01:20.466061", "seconds": 80.466061}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 584, "message": "Created PnL model: totals=PnLTotals(realized=0.0, unrealized=595995.08, day=595995.08, currency='INR') per_symbol=[PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1727, avg=618.93, ltp=374.41, unrealized=-422287.05, today_pnl=-422287.05), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=167, avg=948.57, ltp=1216.66, unrealized=-44771.23, today_pnl=-44771.23), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=1347, avg=801.44, ltp=1934.01, unrealized=1525571.21, today_pnl=1525571.21), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=143, avg=1427.62, ltp=1267.95, unrealized=22833.16, today_pnl=22833.16), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=438, avg=1994.48, ltp=886.37, unrealized=-485351.01, today_pnl=-485351.01)] updated_at=datetime.datetime(2025, 8, 21, 19, 2, 38, 752177, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))) trading_day='2025-08-21'", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:02:38.758603+05:30", "timestamp": 1755783158.758603}}}
{"text": "2025-08-21 19:02:38.759 | DEBUG    | app.services.dhan_client:get_pnl:585 - PnL model fields: {'totals': PnLTotals(realized=0.0, unrealized=595995.08, day=595995.08, currency='INR'), 'per_symbol': [PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1727, avg=618.93, ltp=374.41, unrealized=-422287.05, today_pnl=-422287.05), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=167, avg=948.57, ltp=1216.66, unrealized=-44771.23, today_pnl=-44771.23), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=1347, avg=801.44, ltp=1934.01, unrealized=1525571.21, today_pnl=1525571.21), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=143, avg=1427.62, ltp=1267.95, unrealized=22833.16, today_pnl=22833.16), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=438, avg=1994.48, ltp=886.37, unrealized=-485351.01, today_pnl=-485351.01)], 'updated_at': datetime.datetime(2025, 8, 21, 19, 2, 38, 752177, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))), 'trading_day': '2025-08-21'}\n", "record": {"elapsed": {"repr": "0:01:20.466870", "seconds": 80.46687}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 585, "message": "PnL model fields: {'totals': PnLTotals(realized=0.0, unrealized=595995.08, day=595995.08, currency='INR'), 'per_symbol': [PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1727, avg=618.93, ltp=374.41, unrealized=-422287.05, today_pnl=-422287.05), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=167, avg=948.57, ltp=1216.66, unrealized=-44771.23, today_pnl=-44771.23), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=1347, avg=801.44, ltp=1934.01, unrealized=1525571.21, today_pnl=1525571.21), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=143, avg=1427.62, ltp=1267.95, unrealized=22833.16, today_pnl=22833.16), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=438, avg=1994.48, ltp=886.37, unrealized=-485351.01, today_pnl=-485351.01)], 'updated_at': datetime.datetime(2025, 8, 21, 19, 2, 38, 752177, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))), 'trading_day': '2025-08-21'}", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:02:38.759412+05:30", "timestamp": 1755783158.759412}}}
{"text": "2025-08-21 19:02:38.759 | INFO     | app.services.dhan_client:get_pnl:587 - P&L calculation completed successfully: 5 symbols, unrealized=‚Çπ595995.08\n", "record": {"elapsed": {"repr": "0:01:20.467438", "seconds": 80.467438}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 587, "message": "P&L calculation completed successfully: 5 symbols, unrealized=‚Çπ595995.08", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:02:38.759980+05:30", "timestamp": 1755783158.75998}}}
{"text": "2025-08-21 19:02:38.760 | DEBUG    | app.ws.live:emit_delta:408 - Emitted pnl delta: seq=89\n", "record": {"elapsed": {"repr": "0:01:20.468069", "seconds": 80.468069}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "emit_delta", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 408, "message": "Emitted pnl delta: seq=89", "module": "live", "name": "app.ws.live", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:02:38.760611+05:30", "timestamp": 1755783158.760611}}}
{"text": "2025-08-21 19:02:39.153 | DEBUG    | app.ws.live:emit_delta:408 - Emitted positions delta: seq=90\n", "record": {"elapsed": {"repr": "0:01:20.861341", "seconds": 80.861341}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "emit_delta", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 408, "message": "Emitted positions delta: seq=90", "module": "live", "name": "app.ws.live", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:02:39.153883+05:30", "timestamp": 1755783159.153883}}}
{"text": "2025-08-21 19:02:40.468 | INFO     | app.services.dhan_client:get_pnl:489 - Starting accurate P&L calculation\n", "record": {"elapsed": {"repr": "0:01:22.175602", "seconds": 82.175602}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 489, "message": "Starting accurate P&L calculation", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:02:40.468144+05:30", "timestamp": 1755783160.468144}}}
{"text": "2025-08-21 19:02:40.468 | INFO     | app.services.dhan_client:get_pnl:491 - Fetched 5 positions\n", "record": {"elapsed": {"repr": "0:01:22.176129", "seconds": 82.176129}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 491, "message": "Fetched 5 positions", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:02:40.468671+05:30", "timestamp": 1755783160.468671}}}
{"text": "2025-08-21 19:02:40.469 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for RELIANCE: unrealized=-422287.05, today=-422287.05\n", "record": {"elapsed": {"repr": "0:01:22.176530", "seconds": 82.17653}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for RELIANCE: unrealized=-422287.05, today=-422287.05", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:02:40.469072+05:30", "timestamp": 1755783160.469072}}}
{"text": "2025-08-21 19:02:40.469 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for TCS: unrealized=-44771.23, today=-44771.23\n", "record": {"elapsed": {"repr": "0:01:22.176960", "seconds": 82.17696}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for TCS: unrealized=-44771.23, today=-44771.23", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:02:40.469502+05:30", "timestamp": 1755783160.469502}}}
{"text": "2025-08-21 19:02:40.469 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for HDFC: unrealized=1525571.21, today=1525571.21\n", "record": {"elapsed": {"repr": "0:01:22.177409", "seconds": 82.177409}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for HDFC: unrealized=1525571.21, today=1525571.21", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:02:40.469951+05:30", "timestamp": 1755783160.469951}}}
{"text": "2025-08-21 19:02:40.470 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for INFY: unrealized=22833.16, today=22833.16\n", "record": {"elapsed": {"repr": "0:01:22.178327", "seconds": 82.178327}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for INFY: unrealized=22833.16, today=22833.16", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:02:40.470869+05:30", "timestamp": 1755783160.470869}}}
{"text": "2025-08-21 19:02:40.471 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for ICICIBANK: unrealized=-485351.01, today=-485351.01\n", "record": {"elapsed": {"repr": "0:01:22.179115", "seconds": 82.179115}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for ICICIBANK: unrealized=-485351.01, today=-485351.01", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:02:40.471657+05:30", "timestamp": 1755783160.471657}}}
{"text": "2025-08-21 19:02:40.472 | INFO     | app.services.dhan_client:get_pnl:545 - Calculated totals - realized: 0.0, unrealized: 595995.08, day: 595995.08\n", "record": {"elapsed": {"repr": "0:01:22.179611", "seconds": 82.179611}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 545, "message": "Calculated totals - realized: 0.0, unrealized: 595995.08, day: 595995.08", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:02:40.472153+05:30", "timestamp": 1755783160.472153}}}
{"text": "2025-08-21 19:02:40.472 | DEBUG    | app.services.dhan_client:get_pnl:554 - PnL consistency check passed: drift=‚Çπ0.00\n", "record": {"elapsed": {"repr": "0:01:22.180169", "seconds": 82.180169}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 554, "message": "PnL consistency check passed: drift=‚Çπ0.00", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:02:40.472711+05:30", "timestamp": 1755783160.472711}}}
{"text": "2025-08-21 19:02:40.473 | DEBUG    | app.services.dhan_client:get_pnl:558 - Creating PnLTotals...\n", "record": {"elapsed": {"repr": "0:01:22.180714", "seconds": 82.180714}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 558, "message": "Creating PnLTotals...", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:02:40.473256+05:30", "timestamp": 1755783160.473256}}}
{"text": "2025-08-21 19:02:40.474 | DEBUG    | app.services.dhan_client:get_pnl:565 - PnLTotals created successfully\n", "record": {"elapsed": {"repr": "0:01:22.181683", "seconds": 82.181683}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 565, "message": "PnLTotals created successfully", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:02:40.474225+05:30", "timestamp": 1755783160.474225}}}
{"text": "2025-08-21 19:02:40.474 | DEBUG    | app.services.dhan_client:get_pnl:574 - Creating PnL model...\n", "record": {"elapsed": {"repr": "0:01:22.182349", "seconds": 82.182349}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 574, "message": "Creating PnL model...", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:02:40.474891+05:30", "timestamp": 1755783160.474891}}}
{"text": "2025-08-21 19:02:40.475 | DEBUG    | app.services.dhan_client:get_pnl:575 - Model fields: totals=<class 'app.models.schemas.PnLTotals'>, perSymbol=5, updated_at=2025-08-21 19:02:40.469012+05:30, trading_day=2025-08-21\n", "record": {"elapsed": {"repr": "0:01:22.182749", "seconds": 82.182749}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 575, "message": "Model fields: totals=<class 'app.models.schemas.PnLTotals'>, perSymbol=5, updated_at=2025-08-21 19:02:40.469012+05:30, trading_day=2025-08-21", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:02:40.475291+05:30", "timestamp": 1755783160.475291}}}
{"text": "2025-08-21 19:02:40.475 | DEBUG    | app.services.dhan_client:get_pnl:584 - Created PnL model: totals=PnLTotals(realized=0.0, unrealized=595995.08, day=595995.08, currency='INR') per_symbol=[PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1727, avg=618.93, ltp=374.41, unrealized=-422287.05, today_pnl=-422287.05), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=167, avg=948.57, ltp=1216.66, unrealized=-44771.23, today_pnl=-44771.23), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=1347, avg=801.44, ltp=1934.01, unrealized=1525571.21, today_pnl=1525571.21), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=143, avg=1427.62, ltp=1267.95, unrealized=22833.16, today_pnl=22833.16), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=438, avg=1994.48, ltp=886.37, unrealized=-485351.01, today_pnl=-485351.01)] updated_at=datetime.datetime(2025, 8, 21, 19, 2, 40, 469012, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))) trading_day='2025-08-21'\n", "record": {"elapsed": {"repr": "0:01:22.183310", "seconds": 82.18331}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 584, "message": "Created PnL model: totals=PnLTotals(realized=0.0, unrealized=595995.08, day=595995.08, currency='INR') per_symbol=[PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1727, avg=618.93, ltp=374.41, unrealized=-422287.05, today_pnl=-422287.05), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=167, avg=948.57, ltp=1216.66, unrealized=-44771.23, today_pnl=-44771.23), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=1347, avg=801.44, ltp=1934.01, unrealized=1525571.21, today_pnl=1525571.21), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=143, avg=1427.62, ltp=1267.95, unrealized=22833.16, today_pnl=22833.16), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=438, avg=1994.48, ltp=886.37, unrealized=-485351.01, today_pnl=-485351.01)] updated_at=datetime.datetime(2025, 8, 21, 19, 2, 40, 469012, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))) trading_day='2025-08-21'", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:02:40.475852+05:30", "timestamp": 1755783160.475852}}}
{"text": "2025-08-21 19:02:40.476 | DEBUG    | app.services.dhan_client:get_pnl:585 - PnL model fields: {'totals': PnLTotals(realized=0.0, unrealized=595995.08, day=595995.08, currency='INR'), 'per_symbol': [PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1727, avg=618.93, ltp=374.41, unrealized=-422287.05, today_pnl=-422287.05), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=167, avg=948.57, ltp=1216.66, unrealized=-44771.23, today_pnl=-44771.23), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=1347, avg=801.44, ltp=1934.01, unrealized=1525571.21, today_pnl=1525571.21), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=143, avg=1427.62, ltp=1267.95, unrealized=22833.16, today_pnl=22833.16), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=438, avg=1994.48, ltp=886.37, unrealized=-485351.01, today_pnl=-485351.01)], 'updated_at': datetime.datetime(2025, 8, 21, 19, 2, 40, 469012, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))), 'trading_day': '2025-08-21'}\n", "record": {"elapsed": {"repr": "0:01:22.183954", "seconds": 82.183954}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 585, "message": "PnL model fields: {'totals': PnLTotals(realized=0.0, unrealized=595995.08, day=595995.08, currency='INR'), 'per_symbol': [PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1727, avg=618.93, ltp=374.41, unrealized=-422287.05, today_pnl=-422287.05), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=167, avg=948.57, ltp=1216.66, unrealized=-44771.23, today_pnl=-44771.23), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=1347, avg=801.44, ltp=1934.01, unrealized=1525571.21, today_pnl=1525571.21), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=143, avg=1427.62, ltp=1267.95, unrealized=22833.16, today_pnl=22833.16), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=438, avg=1994.48, ltp=886.37, unrealized=-485351.01, today_pnl=-485351.01)], 'updated_at': datetime.datetime(2025, 8, 21, 19, 2, 40, 469012, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))), 'trading_day': '2025-08-21'}", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:02:40.476496+05:30", "timestamp": 1755783160.476496}}}
{"text": "2025-08-21 19:02:40.477 | INFO     | app.services.dhan_client:get_pnl:587 - P&L calculation completed successfully: 5 symbols, unrealized=‚Çπ595995.08\n", "record": {"elapsed": {"repr": "0:01:22.184516", "seconds": 82.184516}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 587, "message": "P&L calculation completed successfully: 5 symbols, unrealized=‚Çπ595995.08", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:02:40.477058+05:30", "timestamp": 1755783160.477058}}}
{"text": "2025-08-21 19:02:40.477 | DEBUG    | app.ws.live:emit_delta:408 - Emitted pnl delta: seq=91\n", "record": {"elapsed": {"repr": "0:01:22.185204", "seconds": 82.185204}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "emit_delta", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 408, "message": "Emitted pnl delta: seq=91", "module": "live", "name": "app.ws.live", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:02:40.477746+05:30", "timestamp": 1755783160.477746}}}
{"text": "2025-08-21 19:02:40.626 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:01:22.333942", "seconds": 82.333942}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:02:40.626484+05:30", "timestamp": 1755783160.626484}}}
{"text": "2025-08-21 19:02:40.627 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:01:22.334516", "seconds": 82.334516}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:02:40.627058+05:30", "timestamp": 1755783160.627058}}}
{"text": "2025-08-21 19:02:40.627 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:01:22.334960", "seconds": 82.33496}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:02:40.627502+05:30", "timestamp": 1755783160.627502}}}
{"text": "2025-08-21 19:02:40.627 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:01:22.335455", "seconds": 82.335455}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:02:40.627997+05:30", "timestamp": 1755783160.627997}}}
{"text": "2025-08-21 19:02:40.628 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:01:22.336015", "seconds": 82.336015}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:02:40.628557+05:30", "timestamp": 1755783160.628557}}}
{"text": "2025-08-21 19:02:40.629 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:01:22.336848", "seconds": 82.336848}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:02:40.629390+05:30", "timestamp": 1755783160.62939}}}
{"text": "2025-08-21 19:02:40.629 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:01:22.337318", "seconds": 82.337318}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:02:40.629860+05:30", "timestamp": 1755783160.62986}}}
{"text": "2025-08-21 19:02:40.630 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:01:22.337765", "seconds": 82.337765}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:02:40.630307+05:30", "timestamp": 1755783160.630307}}}
{"text": "2025-08-21 19:02:40.630 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:01:22.338227", "seconds": 82.338227}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:02:40.630769+05:30", "timestamp": 1755783160.630769}}}
{"text": "2025-08-21 19:02:40.631 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:01:22.338785", "seconds": 82.338785}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:02:40.631327+05:30", "timestamp": 1755783160.631327}}}
{"text": "2025-08-21 19:02:41.059 | DEBUG    | app.ws.live:emit_delta:408 - Emitted positions delta: seq=92\n", "record": {"elapsed": {"repr": "0:01:22.767165", "seconds": 82.767165}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "emit_delta", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 408, "message": "Emitted positions delta: seq=92", "module": "live", "name": "app.ws.live", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:02:41.059707+05:30", "timestamp": 1755783161.059707}}}
{"text": "2025-08-21 19:02:42.042 | INFO     | app.services.dhan_client:get_pnl:489 - Starting accurate P&L calculation\n", "record": {"elapsed": {"repr": "0:01:23.749649", "seconds": 83.749649}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 489, "message": "Starting accurate P&L calculation", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:02:42.042191+05:30", "timestamp": 1755783162.042191}}}
{"text": "2025-08-21 19:02:42.042 | INFO     | app.services.dhan_client:get_pnl:491 - Fetched 5 positions\n", "record": {"elapsed": {"repr": "0:01:23.750188", "seconds": 83.750188}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 491, "message": "Fetched 5 positions", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:02:42.042730+05:30", "timestamp": 1755783162.04273}}}
{"text": "2025-08-21 19:02:42.043 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for RELIANCE: unrealized=-415357.11, today=-415357.11\n", "record": {"elapsed": {"repr": "0:01:23.750667", "seconds": 83.750667}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for RELIANCE: unrealized=-415357.11, today=-415357.11", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:02:42.043209+05:30", "timestamp": 1755783162.043209}}}
{"text": "2025-08-21 19:02:42.043 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for TCS: unrealized=-40909.15, today=-40909.15\n", "record": {"elapsed": {"repr": "0:01:23.751131", "seconds": 83.751131}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for TCS: unrealized=-40909.15, today=-40909.15", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:02:42.043673+05:30", "timestamp": 1755783162.043673}}}
{"text": "2025-08-21 19:02:42.044 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for HDFC: unrealized=1565743.49, today=1565743.49\n", "record": {"elapsed": {"repr": "0:01:23.751759", "seconds": 83.751759}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for HDFC: unrealized=1565743.49, today=1565743.49", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:02:42.044301+05:30", "timestamp": 1755783162.044301}}}
{"text": "2025-08-21 19:02:42.045 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for INFY: unrealized=24826.46, today=24826.46\n", "record": {"elapsed": {"repr": "0:01:23.752655", "seconds": 83.752655}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for INFY: unrealized=24826.46, today=24826.46", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:02:42.045197+05:30", "timestamp": 1755783162.045197}}}
{"text": "2025-08-21 19:02:42.045 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for ICICIBANK: unrealized=-481561.07, today=-481561.07\n", "record": {"elapsed": {"repr": "0:01:23.753203", "seconds": 83.753203}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for ICICIBANK: unrealized=-481561.07, today=-481561.07", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:02:42.045745+05:30", "timestamp": 1755783162.045745}}}
{"text": "2025-08-21 19:02:42.046 | INFO     | app.services.dhan_client:get_pnl:545 - Calculated totals - realized: 0.0, unrealized: 652742.62, day: 652742.62\n", "record": {"elapsed": {"repr": "0:01:23.753723", "seconds": 83.753723}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 545, "message": "Calculated totals - realized: 0.0, unrealized: 652742.62, day: 652742.62", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:02:42.046265+05:30", "timestamp": 1755783162.046265}}}
{"text": "2025-08-21 19:02:42.046 | DEBUG    | app.services.dhan_client:get_pnl:554 - PnL consistency check passed: drift=‚Çπ0.00\n", "record": {"elapsed": {"repr": "0:01:23.754200", "seconds": 83.7542}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 554, "message": "PnL consistency check passed: drift=‚Çπ0.00", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:02:42.046742+05:30", "timestamp": 1755783162.046742}}}
{"text": "2025-08-21 19:02:42.047 | DEBUG    | app.services.dhan_client:get_pnl:558 - Creating PnLTotals...\n", "record": {"elapsed": {"repr": "0:01:23.754816", "seconds": 83.754816}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 558, "message": "Creating PnLTotals...", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:02:42.047358+05:30", "timestamp": 1755783162.047358}}}
{"text": "2025-08-21 19:02:42.048 | DEBUG    | app.services.dhan_client:get_pnl:565 - PnLTotals created successfully\n", "record": {"elapsed": {"repr": "0:01:23.755527", "seconds": 83.755527}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 565, "message": "PnLTotals created successfully", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:02:42.048069+05:30", "timestamp": 1755783162.048069}}}
{"text": "2025-08-21 19:02:42.048 | DEBUG    | app.services.dhan_client:get_pnl:574 - Creating PnL model...\n", "record": {"elapsed": {"repr": "0:01:23.756289", "seconds": 83.756289}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 574, "message": "Creating PnL model...", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:02:42.048831+05:30", "timestamp": 1755783162.048831}}}
{"text": "2025-08-21 19:02:42.049 | DEBUG    | app.services.dhan_client:get_pnl:575 - Model fields: totals=<class 'app.models.schemas.PnLTotals'>, perSymbol=5, updated_at=2025-08-21 19:02:42.043142+05:30, trading_day=2025-08-21\n", "record": {"elapsed": {"repr": "0:01:23.756786", "seconds": 83.756786}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 575, "message": "Model fields: totals=<class 'app.models.schemas.PnLTotals'>, perSymbol=5, updated_at=2025-08-21 19:02:42.043142+05:30, trading_day=2025-08-21", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:02:42.049328+05:30", "timestamp": 1755783162.049328}}}
{"text": "2025-08-21 19:02:42.049 | DEBUG    | app.services.dhan_client:get_pnl:584 - Created PnL model: totals=PnLTotals(realized=0.0, unrealized=652742.62, day=652742.62, currency='INR') per_symbol=[PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1727, avg=618.93, ltp=378.42, unrealized=-415357.11, today_pnl=-415357.11), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=167, avg=948.57, ltp=1193.53, unrealized=-40909.15, today_pnl=-40909.15), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=1347, avg=801.44, ltp=1963.83, unrealized=1565743.49, today_pnl=1565743.49), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=143, avg=1427.62, ltp=1254.01, unrealized=24826.46, today_pnl=24826.46), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=438, avg=1994.48, ltp=895.03, unrealized=-481561.07, today_pnl=-481561.07)] updated_at=datetime.datetime(2025, 8, 21, 19, 2, 42, 43142, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))) trading_day='2025-08-21'\n", "record": {"elapsed": {"repr": "0:01:23.757320", "seconds": 83.75732}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 584, "message": "Created PnL model: totals=PnLTotals(realized=0.0, unrealized=652742.62, day=652742.62, currency='INR') per_symbol=[PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1727, avg=618.93, ltp=378.42, unrealized=-415357.11, today_pnl=-415357.11), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=167, avg=948.57, ltp=1193.53, unrealized=-40909.15, today_pnl=-40909.15), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=1347, avg=801.44, ltp=1963.83, unrealized=1565743.49, today_pnl=1565743.49), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=143, avg=1427.62, ltp=1254.01, unrealized=24826.46, today_pnl=24826.46), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=438, avg=1994.48, ltp=895.03, unrealized=-481561.07, today_pnl=-481561.07)] updated_at=datetime.datetime(2025, 8, 21, 19, 2, 42, 43142, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))) trading_day='2025-08-21'", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:02:42.049862+05:30", "timestamp": 1755783162.049862}}}
{"text": "2025-08-21 19:02:42.050 | DEBUG    | app.services.dhan_client:get_pnl:585 - PnL model fields: {'totals': PnLTotals(realized=0.0, unrealized=652742.62, day=652742.62, currency='INR'), 'per_symbol': [PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1727, avg=618.93, ltp=378.42, unrealized=-415357.11, today_pnl=-415357.11), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=167, avg=948.57, ltp=1193.53, unrealized=-40909.15, today_pnl=-40909.15), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=1347, avg=801.44, ltp=1963.83, unrealized=1565743.49, today_pnl=1565743.49), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=143, avg=1427.62, ltp=1254.01, unrealized=24826.46, today_pnl=24826.46), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=438, avg=1994.48, ltp=895.03, unrealized=-481561.07, today_pnl=-481561.07)], 'updated_at': datetime.datetime(2025, 8, 21, 19, 2, 42, 43142, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))), 'trading_day': '2025-08-21'}\n", "record": {"elapsed": {"repr": "0:01:23.757900", "seconds": 83.7579}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 585, "message": "PnL model fields: {'totals': PnLTotals(realized=0.0, unrealized=652742.62, day=652742.62, currency='INR'), 'per_symbol': [PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1727, avg=618.93, ltp=378.42, unrealized=-415357.11, today_pnl=-415357.11), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=167, avg=948.57, ltp=1193.53, unrealized=-40909.15, today_pnl=-40909.15), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=1347, avg=801.44, ltp=1963.83, unrealized=1565743.49, today_pnl=1565743.49), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=143, avg=1427.62, ltp=1254.01, unrealized=24826.46, today_pnl=24826.46), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=438, avg=1994.48, ltp=895.03, unrealized=-481561.07, today_pnl=-481561.07)], 'updated_at': datetime.datetime(2025, 8, 21, 19, 2, 42, 43142, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))), 'trading_day': '2025-08-21'}", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:02:42.050442+05:30", "timestamp": 1755783162.050442}}}
{"text": "2025-08-21 19:02:42.050 | INFO     | app.services.dhan_client:get_pnl:587 - P&L calculation completed successfully: 5 symbols, unrealized=‚Çπ652742.62\n", "record": {"elapsed": {"repr": "0:01:23.758444", "seconds": 83.758444}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 587, "message": "P&L calculation completed successfully: 5 symbols, unrealized=‚Çπ652742.62", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:02:42.050986+05:30", "timestamp": 1755783162.050986}}}
{"text": "2025-08-21 19:02:42.051 | DEBUG    | app.ws.live:emit_delta:408 - Emitted pnl delta: seq=93\n", "record": {"elapsed": {"repr": "0:01:23.759085", "seconds": 83.759085}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "emit_delta", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 408, "message": "Emitted pnl delta: seq=93", "module": "live", "name": "app.ws.live", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:02:42.051627+05:30", "timestamp": 1755783162.051627}}}
{"text": "2025-08-21 19:02:42.632 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:01:24.340133", "seconds": 84.340133}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:02:42.632675+05:30", "timestamp": 1755783162.632675}}}
{"text": "2025-08-21 19:02:42.633 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:01:24.340769", "seconds": 84.340769}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:02:42.633311+05:30", "timestamp": 1755783162.633311}}}
{"text": "2025-08-21 19:02:42.633 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:01:24.341236", "seconds": 84.341236}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:02:42.633778+05:30", "timestamp": 1755783162.633778}}}
{"text": "2025-08-21 19:02:42.634 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:01:24.341583", "seconds": 84.341583}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:02:42.634125+05:30", "timestamp": 1755783162.634125}}}
{"text": "2025-08-21 19:02:42.634 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:01:24.342027", "seconds": 84.342027}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:02:42.634569+05:30", "timestamp": 1755783162.634569}}}
{"text": "2025-08-21 19:02:42.635 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:01:24.342557", "seconds": 84.342557}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:02:42.635099+05:30", "timestamp": 1755783162.635099}}}
{"text": "2025-08-21 19:02:42.635 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:01:24.343124", "seconds": 84.343124}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:02:42.635666+05:30", "timestamp": 1755783162.635666}}}
{"text": "2025-08-21 19:02:42.636 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:01:24.343894", "seconds": 84.343894}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:02:42.636436+05:30", "timestamp": 1755783162.636436}}}
{"text": "2025-08-21 19:02:42.636 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:01:24.344310", "seconds": 84.34431}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:02:42.636852+05:30", "timestamp": 1755783162.636852}}}
{"text": "2025-08-21 19:02:42.637 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:01:24.344728", "seconds": 84.344728}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:02:42.637270+05:30", "timestamp": 1755783162.63727}}}
{"text": "2025-08-21 19:02:42.917 | DEBUG    | app.ws.live:emit_delta:408 - Emitted positions delta: seq=94\n", "record": {"elapsed": {"repr": "0:01:24.624830", "seconds": 84.62483}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "emit_delta", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 408, "message": "Emitted positions delta: seq=94", "module": "live", "name": "app.ws.live", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:02:42.917372+05:30", "timestamp": 1755783162.917372}}}
{"text": "2025-08-21 19:02:43.908 | INFO     | app.services.dhan_client:get_pnl:489 - Starting accurate P&L calculation\n", "record": {"elapsed": {"repr": "0:01:25.615504", "seconds": 85.615504}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 489, "message": "Starting accurate P&L calculation", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:02:43.908046+05:30", "timestamp": 1755783163.908046}}}
{"text": "2025-08-21 19:02:43.908 | INFO     | app.services.dhan_client:get_pnl:491 - Fetched 5 positions\n", "record": {"elapsed": {"repr": "0:01:25.616007", "seconds": 85.616007}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 491, "message": "Fetched 5 positions", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:02:43.908549+05:30", "timestamp": 1755783163.908549}}}
{"text": "2025-08-21 19:02:43.909 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for RELIANCE: unrealized=-420815.99, today=-420815.99\n", "record": {"elapsed": {"repr": "0:01:25.616481", "seconds": 85.616481}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for RELIANCE: unrealized=-420815.99, today=-420815.99", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:02:43.909023+05:30", "timestamp": 1755783163.909023}}}
{"text": "2025-08-21 19:02:43.909 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for TCS: unrealized=-41368.88, today=-41368.88\n", "record": {"elapsed": {"repr": "0:01:25.616993", "seconds": 85.616993}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for TCS: unrealized=-41368.88, today=-41368.88", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:02:43.909535+05:30", "timestamp": 1755783163.909535}}}
{"text": "2025-08-21 19:02:43.910 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for HDFC: unrealized=1582719.08, today=1582719.08\n", "record": {"elapsed": {"repr": "0:01:25.617675", "seconds": 85.617675}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for HDFC: unrealized=1582719.08, today=1582719.08", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:02:43.910217+05:30", "timestamp": 1755783163.910217}}}
{"text": "2025-08-21 19:02:43.911 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for INFY: unrealized=26942.42, today=26942.42\n", "record": {"elapsed": {"repr": "0:01:25.618502", "seconds": 85.618502}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for INFY: unrealized=26942.42, today=26942.42", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:02:43.911044+05:30", "timestamp": 1755783163.911044}}}
{"text": "2025-08-21 19:02:43.911 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for ICICIBANK: unrealized=-485844.37, today=-485844.37\n", "record": {"elapsed": {"repr": "0:01:25.619035", "seconds": 85.619035}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for ICICIBANK: unrealized=-485844.37, today=-485844.37", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:02:43.911577+05:30", "timestamp": 1755783163.911577}}}
{"text": "2025-08-21 19:02:43.912 | INFO     | app.services.dhan_client:get_pnl:545 - Calculated totals - realized: 0.0, unrealized: 661632.26, day: 661632.26\n", "record": {"elapsed": {"repr": "0:01:25.619529", "seconds": 85.619529}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 545, "message": "Calculated totals - realized: 0.0, unrealized: 661632.26, day: 661632.26", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:02:43.912071+05:30", "timestamp": 1755783163.912071}}}
{"text": "2025-08-21 19:02:43.912 | DEBUG    | app.services.dhan_client:get_pnl:554 - PnL consistency check passed: drift=‚Çπ0.00\n", "record": {"elapsed": {"repr": "0:01:25.620023", "seconds": 85.620023}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 554, "message": "PnL consistency check passed: drift=‚Çπ0.00", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:02:43.912565+05:30", "timestamp": 1755783163.912565}}}
{"text": "2025-08-21 19:02:43.913 | DEBUG    | app.services.dhan_client:get_pnl:558 - Creating PnLTotals...\n", "record": {"elapsed": {"repr": "0:01:25.620748", "seconds": 85.620748}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 558, "message": "Creating PnLTotals...", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:02:43.913290+05:30", "timestamp": 1755783163.91329}}}
{"text": "2025-08-21 19:02:43.914 | DEBUG    | app.services.dhan_client:get_pnl:565 - PnLTotals created successfully\n", "record": {"elapsed": {"repr": "0:01:25.621742", "seconds": 85.621742}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 565, "message": "PnLTotals created successfully", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:02:43.914284+05:30", "timestamp": 1755783163.914284}}}
{"text": "2025-08-21 19:02:43.914 | DEBUG    | app.services.dhan_client:get_pnl:574 - Creating PnL model...\n", "record": {"elapsed": {"repr": "0:01:25.622258", "seconds": 85.622258}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 574, "message": "Creating PnL model...", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:02:43.914800+05:30", "timestamp": 1755783163.9148}}}
{"text": "2025-08-21 19:02:43.915 | DEBUG    | app.services.dhan_client:get_pnl:575 - Model fields: totals=<class 'app.models.schemas.PnLTotals'>, perSymbol=5, updated_at=2025-08-21 19:02:43.908954+05:30, trading_day=2025-08-21\n", "record": {"elapsed": {"repr": "0:01:25.622629", "seconds": 85.622629}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 575, "message": "Model fields: totals=<class 'app.models.schemas.PnLTotals'>, perSymbol=5, updated_at=2025-08-21 19:02:43.908954+05:30, trading_day=2025-08-21", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:02:43.915171+05:30", "timestamp": 1755783163.915171}}}
{"text": "2025-08-21 19:02:43.915 | DEBUG    | app.services.dhan_client:get_pnl:584 - Created PnL model: totals=PnLTotals(realized=0.0, unrealized=661632.26, day=661632.26, currency='INR') per_symbol=[PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1727, avg=618.93, ltp=375.26, unrealized=-420815.99, today_pnl=-420815.99), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=167, avg=948.57, ltp=1196.29, unrealized=-41368.88, today_pnl=-41368.88), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=1347, avg=801.44, ltp=1976.44, unrealized=1582719.08, today_pnl=1582719.08), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=143, avg=1427.62, ltp=1239.21, unrealized=26942.42, today_pnl=26942.42), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=438, avg=1994.48, ltp=885.25, unrealized=-485844.37, today_pnl=-485844.37)] updated_at=datetime.datetime(2025, 8, 21, 19, 2, 43, 908954, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))) trading_day='2025-08-21'\n", "record": {"elapsed": {"repr": "0:01:25.623116", "seconds": 85.623116}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 584, "message": "Created PnL model: totals=PnLTotals(realized=0.0, unrealized=661632.26, day=661632.26, currency='INR') per_symbol=[PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1727, avg=618.93, ltp=375.26, unrealized=-420815.99, today_pnl=-420815.99), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=167, avg=948.57, ltp=1196.29, unrealized=-41368.88, today_pnl=-41368.88), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=1347, avg=801.44, ltp=1976.44, unrealized=1582719.08, today_pnl=1582719.08), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=143, avg=1427.62, ltp=1239.21, unrealized=26942.42, today_pnl=26942.42), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=438, avg=1994.48, ltp=885.25, unrealized=-485844.37, today_pnl=-485844.37)] updated_at=datetime.datetime(2025, 8, 21, 19, 2, 43, 908954, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))) trading_day='2025-08-21'", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:02:43.915658+05:30", "timestamp": 1755783163.915658}}}
{"text": "2025-08-21 19:02:43.916 | DEBUG    | app.services.dhan_client:get_pnl:585 - PnL model fields: {'totals': PnLTotals(realized=0.0, unrealized=661632.26, day=661632.26, currency='INR'), 'per_symbol': [PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1727, avg=618.93, ltp=375.26, unrealized=-420815.99, today_pnl=-420815.99), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=167, avg=948.57, ltp=1196.29, unrealized=-41368.88, today_pnl=-41368.88), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=1347, avg=801.44, ltp=1976.44, unrealized=1582719.08, today_pnl=1582719.08), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=143, avg=1427.62, ltp=1239.21, unrealized=26942.42, today_pnl=26942.42), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=438, avg=1994.48, ltp=885.25, unrealized=-485844.37, today_pnl=-485844.37)], 'updated_at': datetime.datetime(2025, 8, 21, 19, 2, 43, 908954, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))), 'trading_day': '2025-08-21'}\n", "record": {"elapsed": {"repr": "0:01:25.623747", "seconds": 85.623747}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 585, "message": "PnL model fields: {'totals': PnLTotals(realized=0.0, unrealized=661632.26, day=661632.26, currency='INR'), 'per_symbol': [PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1727, avg=618.93, ltp=375.26, unrealized=-420815.99, today_pnl=-420815.99), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=167, avg=948.57, ltp=1196.29, unrealized=-41368.88, today_pnl=-41368.88), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=1347, avg=801.44, ltp=1976.44, unrealized=1582719.08, today_pnl=1582719.08), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=143, avg=1427.62, ltp=1239.21, unrealized=26942.42, today_pnl=26942.42), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=438, avg=1994.48, ltp=885.25, unrealized=-485844.37, today_pnl=-485844.37)], 'updated_at': datetime.datetime(2025, 8, 21, 19, 2, 43, 908954, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))), 'trading_day': '2025-08-21'}", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:02:43.916289+05:30", "timestamp": 1755783163.916289}}}
{"text": "2025-08-21 19:02:43.916 | INFO     | app.services.dhan_client:get_pnl:587 - P&L calculation completed successfully: 5 symbols, unrealized=‚Çπ661632.26\n", "record": {"elapsed": {"repr": "0:01:25.624256", "seconds": 85.624256}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 587, "message": "P&L calculation completed successfully: 5 symbols, unrealized=‚Çπ661632.26", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:02:43.916798+05:30", "timestamp": 1755783163.916798}}}
{"text": "2025-08-21 19:02:43.917 | DEBUG    | app.ws.live:emit_delta:408 - Emitted pnl delta: seq=95\n", "record": {"elapsed": {"repr": "0:01:25.624936", "seconds": 85.624936}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "emit_delta", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 408, "message": "Emitted pnl delta: seq=95", "module": "live", "name": "app.ws.live", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:02:43.917478+05:30", "timestamp": 1755783163.917478}}}
{"text": "2025-08-21 19:02:44.638 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:01:26.345839", "seconds": 86.345839}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:02:44.638381+05:30", "timestamp": 1755783164.638381}}}
{"text": "2025-08-21 19:02:44.639 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:01:26.346496", "seconds": 86.346496}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:02:44.639038+05:30", "timestamp": 1755783164.639038}}}
{"text": "2025-08-21 19:02:44.639 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:01:26.347028", "seconds": 86.347028}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:02:44.639570+05:30", "timestamp": 1755783164.63957}}}
{"text": "2025-08-21 19:02:44.640 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:01:26.347459", "seconds": 86.347459}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:02:44.640001+05:30", "timestamp": 1755783164.640001}}}
{"text": "2025-08-21 19:02:44.640 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:01:26.347838", "seconds": 86.347838}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:02:44.640380+05:30", "timestamp": 1755783164.64038}}}
{"text": "2025-08-21 19:02:44.640 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:01:26.348294", "seconds": 86.348294}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:02:44.640836+05:30", "timestamp": 1755783164.640836}}}
{"text": "2025-08-21 19:02:44.641 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:01:26.348607", "seconds": 86.348607}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:02:44.641149+05:30", "timestamp": 1755783164.641149}}}
{"text": "2025-08-21 19:02:44.641 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:01:26.348926", "seconds": 86.348926}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:02:44.641468+05:30", "timestamp": 1755783164.641468}}}
{"text": "2025-08-21 19:02:44.641 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:01:26.349355", "seconds": 86.349355}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:02:44.641897+05:30", "timestamp": 1755783164.641897}}}
{"text": "2025-08-21 19:02:44.642 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:01:26.349848", "seconds": 86.349848}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:02:44.642390+05:30", "timestamp": 1755783164.64239}}}
{"text": "2025-08-21 19:02:44.707 | DEBUG    | app.ws.live:emit_delta:408 - Emitted positions delta: seq=96\n", "record": {"elapsed": {"repr": "0:01:26.415142", "seconds": 86.415142}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "emit_delta", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 408, "message": "Emitted positions delta: seq=96", "module": "live", "name": "app.ws.live", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:02:44.707684+05:30", "timestamp": 1755783164.707684}}}
{"text": "2025-08-21 19:02:45.707 | INFO     | app.services.dhan_client:get_pnl:489 - Starting accurate P&L calculation\n", "record": {"elapsed": {"repr": "0:01:27.414664", "seconds": 87.414664}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 489, "message": "Starting accurate P&L calculation", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:02:45.707206+05:30", "timestamp": 1755783165.707206}}}
{"text": "2025-08-21 19:02:45.707 | INFO     | app.services.dhan_client:get_pnl:491 - Fetched 5 positions\n", "record": {"elapsed": {"repr": "0:01:27.415297", "seconds": 87.415297}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 491, "message": "Fetched 5 positions", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:02:45.707839+05:30", "timestamp": 1755783165.707839}}}
{"text": "2025-08-21 19:02:45.708 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for RELIANCE: unrealized=-428607.92, today=-428607.92\n", "record": {"elapsed": {"repr": "0:01:27.415827", "seconds": 87.415827}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for RELIANCE: unrealized=-428607.92, today=-428607.92", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:02:45.708369+05:30", "timestamp": 1755783165.708369}}}
{"text": "2025-08-21 19:02:45.708 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for TCS: unrealized=-44037.95, today=-44037.95\n", "record": {"elapsed": {"repr": "0:01:27.416408", "seconds": 87.416408}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for TCS: unrealized=-44037.95, today=-44037.95", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:02:45.708950+05:30", "timestamp": 1755783165.70895}}}
{"text": "2025-08-21 19:02:45.709 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for HDFC: unrealized=1620784.01, today=1620784.01\n", "record": {"elapsed": {"repr": "0:01:27.417298", "seconds": 87.417298}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for HDFC: unrealized=1620784.01, today=1620784.01", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:02:45.709840+05:30", "timestamp": 1755783165.70984}}}
{"text": "2025-08-21 19:02:45.710 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for INFY: unrealized=29364.59, today=29364.59\n", "record": {"elapsed": {"repr": "0:01:27.417780", "seconds": 87.41778}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for INFY: unrealized=29364.59, today=29364.59", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:02:45.710322+05:30", "timestamp": 1755783165.710322}}}
{"text": "2025-08-21 19:02:45.710 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for ICICIBANK: unrealized=-490217.78, today=-490217.78\n", "record": {"elapsed": {"repr": "0:01:27.418287", "seconds": 87.418287}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for ICICIBANK: unrealized=-490217.78, today=-490217.78", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:02:45.710829+05:30", "timestamp": 1755783165.710829}}}
{"text": "2025-08-21 19:02:45.711 | INFO     | app.services.dhan_client:get_pnl:545 - Calculated totals - realized: 0.0, unrealized: 687284.95, day: 687284.95\n", "record": {"elapsed": {"repr": "0:01:27.418744", "seconds": 87.418744}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 545, "message": "Calculated totals - realized: 0.0, unrealized: 687284.95, day: 687284.95", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:02:45.711286+05:30", "timestamp": 1755783165.711286}}}
{"text": "2025-08-21 19:02:45.711 | DEBUG    | app.services.dhan_client:get_pnl:554 - PnL consistency check passed: drift=‚Çπ0.00\n", "record": {"elapsed": {"repr": "0:01:27.419339", "seconds": 87.419339}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 554, "message": "PnL consistency check passed: drift=‚Çπ0.00", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:02:45.711881+05:30", "timestamp": 1755783165.711881}}}
{"text": "2025-08-21 19:02:45.712 | DEBUG    | app.services.dhan_client:get_pnl:558 - Creating PnLTotals...\n", "record": {"elapsed": {"repr": "0:01:27.420270", "seconds": 87.42027}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 558, "message": "Creating PnLTotals...", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:02:45.712812+05:30", "timestamp": 1755783165.712812}}}
{"text": "2025-08-21 19:02:45.713 | DEBUG    | app.services.dhan_client:get_pnl:565 - PnLTotals created successfully\n", "record": {"elapsed": {"repr": "0:01:27.421016", "seconds": 87.421016}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 565, "message": "PnLTotals created successfully", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:02:45.713558+05:30", "timestamp": 1755783165.713558}}}
{"text": "2025-08-21 19:02:45.713 | DEBUG    | app.services.dhan_client:get_pnl:574 - Creating PnL model...\n", "record": {"elapsed": {"repr": "0:01:27.421445", "seconds": 87.421445}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 574, "message": "Creating PnL model...", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:02:45.713987+05:30", "timestamp": 1755783165.713987}}}
{"text": "2025-08-21 19:02:45.714 | DEBUG    | app.services.dhan_client:get_pnl:575 - Model fields: totals=<class 'app.models.schemas.PnLTotals'>, perSymbol=5, updated_at=2025-08-21 19:02:45.708291+05:30, trading_day=2025-08-21\n", "record": {"elapsed": {"repr": "0:01:27.421909", "seconds": 87.421909}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 575, "message": "Model fields: totals=<class 'app.models.schemas.PnLTotals'>, perSymbol=5, updated_at=2025-08-21 19:02:45.708291+05:30, trading_day=2025-08-21", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:02:45.714451+05:30", "timestamp": 1755783165.714451}}}
{"text": "2025-08-21 19:02:45.715 | DEBUG    | app.services.dhan_client:get_pnl:584 - Created PnL model: totals=PnLTotals(realized=0.0, unrealized=687284.95, day=687284.95, currency='INR') per_symbol=[PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1727, avg=618.93, ltp=370.75, unrealized=-428607.92, today_pnl=-428607.92), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=167, avg=948.57, ltp=1212.27, unrealized=-44037.95, today_pnl=-44037.95), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=1347, avg=801.44, ltp=2004.69, unrealized=1620784.01, today_pnl=1620784.01), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=143, avg=1427.62, ltp=1222.27, unrealized=29364.59, today_pnl=29364.59), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=438, avg=1994.48, ltp=875.26, unrealized=-490217.78, today_pnl=-490217.78)] updated_at=datetime.datetime(2025, 8, 21, 19, 2, 45, 708291, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))) trading_day='2025-08-21'\n", "record": {"elapsed": {"repr": "0:01:27.422564", "seconds": 87.422564}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 584, "message": "Created PnL model: totals=PnLTotals(realized=0.0, unrealized=687284.95, day=687284.95, currency='INR') per_symbol=[PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1727, avg=618.93, ltp=370.75, unrealized=-428607.92, today_pnl=-428607.92), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=167, avg=948.57, ltp=1212.27, unrealized=-44037.95, today_pnl=-44037.95), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=1347, avg=801.44, ltp=2004.69, unrealized=1620784.01, today_pnl=1620784.01), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=143, avg=1427.62, ltp=1222.27, unrealized=29364.59, today_pnl=29364.59), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=438, avg=1994.48, ltp=875.26, unrealized=-490217.78, today_pnl=-490217.78)] updated_at=datetime.datetime(2025, 8, 21, 19, 2, 45, 708291, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))) trading_day='2025-08-21'", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:02:45.715106+05:30", "timestamp": 1755783165.715106}}}
{"text": "2025-08-21 19:02:45.715 | DEBUG    | app.services.dhan_client:get_pnl:585 - PnL model fields: {'totals': PnLTotals(realized=0.0, unrealized=687284.95, day=687284.95, currency='INR'), 'per_symbol': [PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1727, avg=618.93, ltp=370.75, unrealized=-428607.92, today_pnl=-428607.92), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=167, avg=948.57, ltp=1212.27, unrealized=-44037.95, today_pnl=-44037.95), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=1347, avg=801.44, ltp=2004.69, unrealized=1620784.01, today_pnl=1620784.01), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=143, avg=1427.62, ltp=1222.27, unrealized=29364.59, today_pnl=29364.59), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=438, avg=1994.48, ltp=875.26, unrealized=-490217.78, today_pnl=-490217.78)], 'updated_at': datetime.datetime(2025, 8, 21, 19, 2, 45, 708291, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))), 'trading_day': '2025-08-21'}\n", "record": {"elapsed": {"repr": "0:01:27.423194", "seconds": 87.423194}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 585, "message": "PnL model fields: {'totals': PnLTotals(realized=0.0, unrealized=687284.95, day=687284.95, currency='INR'), 'per_symbol': [PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1727, avg=618.93, ltp=370.75, unrealized=-428607.92, today_pnl=-428607.92), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=167, avg=948.57, ltp=1212.27, unrealized=-44037.95, today_pnl=-44037.95), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=1347, avg=801.44, ltp=2004.69, unrealized=1620784.01, today_pnl=1620784.01), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=143, avg=1427.62, ltp=1222.27, unrealized=29364.59, today_pnl=29364.59), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=438, avg=1994.48, ltp=875.26, unrealized=-490217.78, today_pnl=-490217.78)], 'updated_at': datetime.datetime(2025, 8, 21, 19, 2, 45, 708291, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))), 'trading_day': '2025-08-21'}", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:02:45.715736+05:30", "timestamp": 1755783165.715736}}}
{"text": "2025-08-21 19:02:45.716 | INFO     | app.services.dhan_client:get_pnl:587 - P&L calculation completed successfully: 5 symbols, unrealized=‚Çπ687284.95\n", "record": {"elapsed": {"repr": "0:01:27.423819", "seconds": 87.423819}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 587, "message": "P&L calculation completed successfully: 5 symbols, unrealized=‚Çπ687284.95", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:02:45.716361+05:30", "timestamp": 1755783165.716361}}}
{"text": "2025-08-21 19:02:45.717 | DEBUG    | app.ws.live:emit_delta:408 - Emitted pnl delta: seq=97\n", "record": {"elapsed": {"repr": "0:01:27.424517", "seconds": 87.424517}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "emit_delta", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 408, "message": "Emitted pnl delta: seq=97", "module": "live", "name": "app.ws.live", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:02:45.717059+05:30", "timestamp": 1755783165.717059}}}
{"text": "2025-08-21 19:02:46.643 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:01:28.351032", "seconds": 88.351032}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:02:46.643574+05:30", "timestamp": 1755783166.643574}}}
{"text": "2025-08-21 19:02:46.644 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:01:28.351787", "seconds": 88.351787}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:02:46.644329+05:30", "timestamp": 1755783166.644329}}}
{"text": "2025-08-21 19:02:46.645 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:01:28.352544", "seconds": 88.352544}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:02:46.645086+05:30", "timestamp": 1755783166.645086}}}
{"text": "2025-08-21 19:02:46.645 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:01:28.353244", "seconds": 88.353244}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:02:46.645786+05:30", "timestamp": 1755783166.645786}}}
{"text": "2025-08-21 19:02:46.646 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:01:28.353724", "seconds": 88.353724}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:02:46.646266+05:30", "timestamp": 1755783166.646266}}}
{"text": "2025-08-21 19:02:46.646 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:01:28.354108", "seconds": 88.354108}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:02:46.646650+05:30", "timestamp": 1755783166.64665}}}
{"text": "2025-08-21 19:02:46.647 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:01:28.354500", "seconds": 88.3545}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:02:46.647042+05:30", "timestamp": 1755783166.647042}}}
{"text": "2025-08-21 19:02:46.647 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:01:28.354886", "seconds": 88.354886}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:02:46.647428+05:30", "timestamp": 1755783166.647428}}}
{"text": "2025-08-21 19:02:46.647 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:01:28.355279", "seconds": 88.355279}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:02:46.647821+05:30", "timestamp": 1755783166.647821}}}
{"text": "2025-08-21 19:02:46.648 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:01:28.355751", "seconds": 88.355751}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:02:46.648293+05:30", "timestamp": 1755783166.648293}}}
{"text": "2025-08-21 19:02:47.414 | INFO     | app.services.dhan_client:get_pnl:489 - Starting accurate P&L calculation\n", "record": {"elapsed": {"repr": "0:01:29.121667", "seconds": 89.121667}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 489, "message": "Starting accurate P&L calculation", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:02:47.414209+05:30", "timestamp": 1755783167.414209}}}
{"text": "2025-08-21 19:02:47.414 | INFO     | app.services.dhan_client:get_pnl:491 - Fetched 5 positions\n", "record": {"elapsed": {"repr": "0:01:29.122430", "seconds": 89.12243}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 491, "message": "Fetched 5 positions", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:02:47.414972+05:30", "timestamp": 1755783167.414972}}}
{"text": "2025-08-21 19:02:47.415 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for RELIANCE: unrealized=-435367.25, today=-435367.25\n", "record": {"elapsed": {"repr": "0:01:29.123042", "seconds": 89.123042}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for RELIANCE: unrealized=-435367.25, today=-435367.25", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:02:47.415584+05:30", "timestamp": 1755783167.415584}}}
{"text": "2025-08-21 19:02:47.416 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for TCS: unrealized=-41406.83, today=-41406.83\n", "record": {"elapsed": {"repr": "0:01:29.124047", "seconds": 89.124047}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for TCS: unrealized=-41406.83, today=-41406.83", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:02:47.416589+05:30", "timestamp": 1755783167.416589}}}
{"text": "2025-08-21 19:02:47.417 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for HDFC: unrealized=1619993.6, today=1619993.6\n", "record": {"elapsed": {"repr": "0:01:29.124895", "seconds": 89.124895}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for HDFC: unrealized=1619993.6, today=1619993.6", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:02:47.417437+05:30", "timestamp": 1755783167.417437}}}
{"text": "2025-08-21 19:02:47.417 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for INFY: unrealized=27350.26, today=27350.26\n", "record": {"elapsed": {"repr": "0:01:29.125445", "seconds": 89.125445}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for INFY: unrealized=27350.26, today=27350.26", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:02:47.417987+05:30", "timestamp": 1755783167.417987}}}
{"text": "2025-08-21 19:02:47.418 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for ICICIBANK: unrealized=-491880.8, today=-491880.8\n", "record": {"elapsed": {"repr": "0:01:29.126070", "seconds": 89.12607}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for ICICIBANK: unrealized=-491880.8, today=-491880.8", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:02:47.418612+05:30", "timestamp": 1755783167.418612}}}
{"text": "2025-08-21 19:02:47.419 | INFO     | app.services.dhan_client:get_pnl:545 - Calculated totals - realized: 0.0, unrealized: 678688.98, day: 678688.98\n", "record": {"elapsed": {"repr": "0:01:29.126738", "seconds": 89.126738}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 545, "message": "Calculated totals - realized: 0.0, unrealized: 678688.98, day: 678688.98", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:02:47.419280+05:30", "timestamp": 1755783167.41928}}}
{"text": "2025-08-21 19:02:47.420 | DEBUG    | app.services.dhan_client:get_pnl:554 - PnL consistency check passed: drift=‚Çπ0.00\n", "record": {"elapsed": {"repr": "0:01:29.127533", "seconds": 89.127533}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 554, "message": "PnL consistency check passed: drift=‚Çπ0.00", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:02:47.420075+05:30", "timestamp": 1755783167.420075}}}
{"text": "2025-08-21 19:02:47.421 | DEBUG    | app.services.dhan_client:get_pnl:558 - Creating PnLTotals...\n", "record": {"elapsed": {"repr": "0:01:29.128779", "seconds": 89.128779}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 558, "message": "Creating PnLTotals...", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:02:47.421321+05:30", "timestamp": 1755783167.421321}}}
{"text": "2025-08-21 19:02:47.421 | DEBUG    | app.services.dhan_client:get_pnl:565 - PnLTotals created successfully\n", "record": {"elapsed": {"repr": "0:01:29.129327", "seconds": 89.129327}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 565, "message": "PnLTotals created successfully", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:02:47.421869+05:30", "timestamp": 1755783167.421869}}}
{"text": "2025-08-21 19:02:47.422 | DEBUG    | app.services.dhan_client:get_pnl:574 - Creating PnL model...\n", "record": {"elapsed": {"repr": "0:01:29.129775", "seconds": 89.129775}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 574, "message": "Creating PnL model...", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:02:47.422317+05:30", "timestamp": 1755783167.422317}}}
{"text": "2025-08-21 19:02:47.422 | DEBUG    | app.services.dhan_client:get_pnl:575 - Model fields: totals=<class 'app.models.schemas.PnLTotals'>, perSymbol=5, updated_at=2025-08-21 19:02:47.415501+05:30, trading_day=2025-08-21\n", "record": {"elapsed": {"repr": "0:01:29.130411", "seconds": 89.130411}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 575, "message": "Model fields: totals=<class 'app.models.schemas.PnLTotals'>, perSymbol=5, updated_at=2025-08-21 19:02:47.415501+05:30, trading_day=2025-08-21", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:02:47.422953+05:30", "timestamp": 1755783167.422953}}}
{"text": "2025-08-21 19:02:47.423 | DEBUG    | app.services.dhan_client:get_pnl:584 - Created PnL model: totals=PnLTotals(realized=0.0, unrealized=678688.98, day=678688.98, currency='INR') per_symbol=[PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1727, avg=618.93, ltp=366.84, unrealized=-435367.25, today_pnl=-435367.25), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=167, avg=948.57, ltp=1196.52, unrealized=-41406.83, today_pnl=-41406.83), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=1347, avg=801.44, ltp=2004.11, unrealized=1619993.6, today_pnl=1619993.6), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=143, avg=1427.62, ltp=1236.36, unrealized=27350.26, today_pnl=27350.26), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=438, avg=1994.48, ltp=871.46, unrealized=-491880.8, today_pnl=-491880.8)] updated_at=datetime.datetime(2025, 8, 21, 19, 2, 47, 415501, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))) trading_day='2025-08-21'\n", "record": {"elapsed": {"repr": "0:01:29.131088", "seconds": 89.131088}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 584, "message": "Created PnL model: totals=PnLTotals(realized=0.0, unrealized=678688.98, day=678688.98, currency='INR') per_symbol=[PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1727, avg=618.93, ltp=366.84, unrealized=-435367.25, today_pnl=-435367.25), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=167, avg=948.57, ltp=1196.52, unrealized=-41406.83, today_pnl=-41406.83), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=1347, avg=801.44, ltp=2004.11, unrealized=1619993.6, today_pnl=1619993.6), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=143, avg=1427.62, ltp=1236.36, unrealized=27350.26, today_pnl=27350.26), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=438, avg=1994.48, ltp=871.46, unrealized=-491880.8, today_pnl=-491880.8)] updated_at=datetime.datetime(2025, 8, 21, 19, 2, 47, 415501, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))) trading_day='2025-08-21'", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:02:47.423630+05:30", "timestamp": 1755783167.42363}}}
{"text": "2025-08-21 19:02:47.424 | DEBUG    | app.services.dhan_client:get_pnl:585 - PnL model fields: {'totals': PnLTotals(realized=0.0, unrealized=678688.98, day=678688.98, currency='INR'), 'per_symbol': [PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1727, avg=618.93, ltp=366.84, unrealized=-435367.25, today_pnl=-435367.25), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=167, avg=948.57, ltp=1196.52, unrealized=-41406.83, today_pnl=-41406.83), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=1347, avg=801.44, ltp=2004.11, unrealized=1619993.6, today_pnl=1619993.6), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=143, avg=1427.62, ltp=1236.36, unrealized=27350.26, today_pnl=27350.26), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=438, avg=1994.48, ltp=871.46, unrealized=-491880.8, today_pnl=-491880.8)], 'updated_at': datetime.datetime(2025, 8, 21, 19, 2, 47, 415501, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))), 'trading_day': '2025-08-21'}\n", "record": {"elapsed": {"repr": "0:01:29.132023", "seconds": 89.132023}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 585, "message": "PnL model fields: {'totals': PnLTotals(realized=0.0, unrealized=678688.98, day=678688.98, currency='INR'), 'per_symbol': [PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1727, avg=618.93, ltp=366.84, unrealized=-435367.25, today_pnl=-435367.25), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=167, avg=948.57, ltp=1196.52, unrealized=-41406.83, today_pnl=-41406.83), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=1347, avg=801.44, ltp=2004.11, unrealized=1619993.6, today_pnl=1619993.6), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=143, avg=1427.62, ltp=1236.36, unrealized=27350.26, today_pnl=27350.26), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=438, avg=1994.48, ltp=871.46, unrealized=-491880.8, today_pnl=-491880.8)], 'updated_at': datetime.datetime(2025, 8, 21, 19, 2, 47, 415501, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))), 'trading_day': '2025-08-21'}", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:02:47.424565+05:30", "timestamp": 1755783167.424565}}}
{"text": "2025-08-21 19:02:47.425 | INFO     | app.services.dhan_client:get_pnl:587 - P&L calculation completed successfully: 5 symbols, unrealized=‚Çπ678688.98\n", "record": {"elapsed": {"repr": "0:01:29.133047", "seconds": 89.133047}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 587, "message": "P&L calculation completed successfully: 5 symbols, unrealized=‚Çπ678688.98", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:02:47.425589+05:30", "timestamp": 1755783167.425589}}}
{"text": "2025-08-21 19:02:47.426 | DEBUG    | app.ws.live:emit_delta:408 - Emitted pnl delta: seq=98\n", "record": {"elapsed": {"repr": "0:01:29.133658", "seconds": 89.133658}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "emit_delta", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 408, "message": "Emitted pnl delta: seq=98", "module": "live", "name": "app.ws.live", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:02:47.426200+05:30", "timestamp": 1755783167.4262}}}
{"text": "2025-08-21 19:02:47.907 | DEBUG    | app.ws.live:emit_delta:408 - Emitted positions delta: seq=99\n", "record": {"elapsed": {"repr": "0:01:29.614794", "seconds": 89.614794}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "emit_delta", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 408, "message": "Emitted positions delta: seq=99", "module": "live", "name": "app.ws.live", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:02:47.907336+05:30", "timestamp": 1755783167.907336}}}
{"text": "2025-08-21 19:02:48.649 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:01:30.356864", "seconds": 90.356864}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:02:48.649406+05:30", "timestamp": 1755783168.649406}}}
{"text": "2025-08-21 19:02:48.650 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:01:30.357590", "seconds": 90.35759}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:02:48.650132+05:30", "timestamp": 1755783168.650132}}}
{"text": "2025-08-21 19:02:48.650 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:01:30.358162", "seconds": 90.358162}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:02:48.650704+05:30", "timestamp": 1755783168.650704}}}
{"text": "2025-08-21 19:02:48.651 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:01:30.358890", "seconds": 90.35889}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:02:48.651432+05:30", "timestamp": 1755783168.651432}}}
{"text": "2025-08-21 19:02:48.652 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:01:30.359733", "seconds": 90.359733}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:02:48.652275+05:30", "timestamp": 1755783168.652275}}}
{"text": "2025-08-21 19:02:48.653 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:01:30.360587", "seconds": 90.360587}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:02:48.653129+05:30", "timestamp": 1755783168.653129}}}
{"text": "2025-08-21 19:02:48.653 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:01:30.361113", "seconds": 90.361113}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:02:48.653655+05:30", "timestamp": 1755783168.653655}}}
{"text": "2025-08-21 19:02:48.654 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:01:30.361684", "seconds": 90.361684}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:02:48.654226+05:30", "timestamp": 1755783168.654226}}}
{"text": "2025-08-21 19:02:48.654 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:01:30.362169", "seconds": 90.362169}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:02:48.654711+05:30", "timestamp": 1755783168.654711}}}
{"text": "2025-08-21 19:02:48.655 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:01:30.362692", "seconds": 90.362692}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:02:48.655234+05:30", "timestamp": 1755783168.655234}}}
{"text": "2025-08-21 19:02:48.966 | INFO     | app.services.dhan_client:get_pnl:489 - Starting accurate P&L calculation\n", "record": {"elapsed": {"repr": "0:01:30.674106", "seconds": 90.674106}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 489, "message": "Starting accurate P&L calculation", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:02:48.966648+05:30", "timestamp": 1755783168.966648}}}
{"text": "2025-08-21 19:02:48.967 | INFO     | app.services.dhan_client:get_pnl:491 - Fetched 5 positions\n", "record": {"elapsed": {"repr": "0:01:30.674817", "seconds": 90.674817}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 491, "message": "Fetched 5 positions", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:02:48.967359+05:30", "timestamp": 1755783168.967359}}}
{"text": "2025-08-21 19:02:48.968 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for RELIANCE: unrealized=-424498.8, today=-424498.8\n", "record": {"elapsed": {"repr": "0:01:30.675695", "seconds": 90.675695}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for RELIANCE: unrealized=-424498.8, today=-424498.8", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:02:48.968237+05:30", "timestamp": 1755783168.968237}}}
{"text": "2025-08-21 19:02:48.969 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for TCS: unrealized=-44290.52, today=-44290.52\n", "record": {"elapsed": {"repr": "0:01:30.676556", "seconds": 90.676556}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for TCS: unrealized=-44290.52, today=-44290.52", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:02:48.969098+05:30", "timestamp": 1755783168.969098}}}
{"text": "2025-08-21 19:02:48.969 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for HDFC: unrealized=1589538.7, today=1589538.7\n", "record": {"elapsed": {"repr": "0:01:30.677207", "seconds": 90.677207}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for HDFC: unrealized=1589538.7, today=1589538.7", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:02:48.969749+05:30", "timestamp": 1755783168.969749}}}
{"text": "2025-08-21 19:02:48.970 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for INFY: unrealized=27196.34, today=27196.34\n", "record": {"elapsed": {"repr": "0:01:30.677613", "seconds": 90.677613}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for INFY: unrealized=27196.34, today=27196.34", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:02:48.970155+05:30", "timestamp": 1755783168.970155}}}
{"text": "2025-08-21 19:02:48.970 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for ICICIBANK: unrealized=-491785.77, today=-491785.77\n", "record": {"elapsed": {"repr": "0:01:30.678084", "seconds": 90.678084}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for ICICIBANK: unrealized=-491785.77, today=-491785.77", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:02:48.970626+05:30", "timestamp": 1755783168.970626}}}
{"text": "2025-08-21 19:02:48.971 | INFO     | app.services.dhan_client:get_pnl:545 - Calculated totals - realized: 0.0, unrealized: 656159.95, day: 656159.95\n", "record": {"elapsed": {"repr": "0:01:30.678593", "seconds": 90.678593}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 545, "message": "Calculated totals - realized: 0.0, unrealized: 656159.95, day: 656159.95", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:02:48.971135+05:30", "timestamp": 1755783168.971135}}}
{"text": "2025-08-21 19:02:48.971 | DEBUG    | app.services.dhan_client:get_pnl:554 - PnL consistency check passed: drift=‚Çπ0.00\n", "record": {"elapsed": {"repr": "0:01:30.679053", "seconds": 90.679053}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 554, "message": "PnL consistency check passed: drift=‚Çπ0.00", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:02:48.971595+05:30", "timestamp": 1755783168.971595}}}
{"text": "2025-08-21 19:02:48.972 | DEBUG    | app.services.dhan_client:get_pnl:558 - Creating PnLTotals...\n", "record": {"elapsed": {"repr": "0:01:30.679564", "seconds": 90.679564}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 558, "message": "Creating PnLTotals...", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:02:48.972106+05:30", "timestamp": 1755783168.972106}}}
{"text": "2025-08-21 19:02:48.972 | DEBUG    | app.services.dhan_client:get_pnl:565 - PnLTotals created successfully\n", "record": {"elapsed": {"repr": "0:01:30.680077", "seconds": 90.680077}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 565, "message": "PnLTotals created successfully", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:02:48.972619+05:30", "timestamp": 1755783168.972619}}}
{"text": "2025-08-21 19:02:48.973 | DEBUG    | app.services.dhan_client:get_pnl:574 - Creating PnL model...\n", "record": {"elapsed": {"repr": "0:01:30.680635", "seconds": 90.680635}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 574, "message": "Creating PnL model...", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:02:48.973177+05:30", "timestamp": 1755783168.973177}}}
{"text": "2025-08-21 19:02:48.973 | DEBUG    | app.services.dhan_client:get_pnl:575 - Model fields: totals=<class 'app.models.schemas.PnLTotals'>, perSymbol=5, updated_at=2025-08-21 19:02:48.968045+05:30, trading_day=2025-08-21\n", "record": {"elapsed": {"repr": "0:01:30.681344", "seconds": 90.681344}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 575, "message": "Model fields: totals=<class 'app.models.schemas.PnLTotals'>, perSymbol=5, updated_at=2025-08-21 19:02:48.968045+05:30, trading_day=2025-08-21", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:02:48.973886+05:30", "timestamp": 1755783168.973886}}}
{"text": "2025-08-21 19:02:48.974 | DEBUG    | app.services.dhan_client:get_pnl:584 - Created PnL model: totals=PnLTotals(realized=0.0, unrealized=656159.95, day=656159.95, currency='INR') per_symbol=[PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1727, avg=618.93, ltp=373.13, unrealized=-424498.8, today_pnl=-424498.8), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=167, avg=948.57, ltp=1213.78, unrealized=-44290.52, today_pnl=-44290.52), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=1347, avg=801.44, ltp=1981.5, unrealized=1589538.7, today_pnl=1589538.7), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=143, avg=1427.62, ltp=1237.44, unrealized=27196.34, today_pnl=27196.34), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=438, avg=1994.48, ltp=871.68, unrealized=-491785.77, today_pnl=-491785.77)] updated_at=datetime.datetime(2025, 8, 21, 19, 2, 48, 968045, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))) trading_day='2025-08-21'\n", "record": {"elapsed": {"repr": "0:01:30.682354", "seconds": 90.682354}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 584, "message": "Created PnL model: totals=PnLTotals(realized=0.0, unrealized=656159.95, day=656159.95, currency='INR') per_symbol=[PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1727, avg=618.93, ltp=373.13, unrealized=-424498.8, today_pnl=-424498.8), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=167, avg=948.57, ltp=1213.78, unrealized=-44290.52, today_pnl=-44290.52), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=1347, avg=801.44, ltp=1981.5, unrealized=1589538.7, today_pnl=1589538.7), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=143, avg=1427.62, ltp=1237.44, unrealized=27196.34, today_pnl=27196.34), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=438, avg=1994.48, ltp=871.68, unrealized=-491785.77, today_pnl=-491785.77)] updated_at=datetime.datetime(2025, 8, 21, 19, 2, 48, 968045, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))) trading_day='2025-08-21'", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:02:48.974896+05:30", "timestamp": 1755783168.974896}}}
{"text": "2025-08-21 19:02:48.975 | DEBUG    | app.services.dhan_client:get_pnl:585 - PnL model fields: {'totals': PnLTotals(realized=0.0, unrealized=656159.95, day=656159.95, currency='INR'), 'per_symbol': [PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1727, avg=618.93, ltp=373.13, unrealized=-424498.8, today_pnl=-424498.8), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=167, avg=948.57, ltp=1213.78, unrealized=-44290.52, today_pnl=-44290.52), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=1347, avg=801.44, ltp=1981.5, unrealized=1589538.7, today_pnl=1589538.7), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=143, avg=1427.62, ltp=1237.44, unrealized=27196.34, today_pnl=27196.34), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=438, avg=1994.48, ltp=871.68, unrealized=-491785.77, today_pnl=-491785.77)], 'updated_at': datetime.datetime(2025, 8, 21, 19, 2, 48, 968045, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))), 'trading_day': '2025-08-21'}\n", "record": {"elapsed": {"repr": "0:01:30.683312", "seconds": 90.683312}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 585, "message": "PnL model fields: {'totals': PnLTotals(realized=0.0, unrealized=656159.95, day=656159.95, currency='INR'), 'per_symbol': [PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1727, avg=618.93, ltp=373.13, unrealized=-424498.8, today_pnl=-424498.8), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=167, avg=948.57, ltp=1213.78, unrealized=-44290.52, today_pnl=-44290.52), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=1347, avg=801.44, ltp=1981.5, unrealized=1589538.7, today_pnl=1589538.7), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=143, avg=1427.62, ltp=1237.44, unrealized=27196.34, today_pnl=27196.34), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=438, avg=1994.48, ltp=871.68, unrealized=-491785.77, today_pnl=-491785.77)], 'updated_at': datetime.datetime(2025, 8, 21, 19, 2, 48, 968045, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))), 'trading_day': '2025-08-21'}", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:02:48.975854+05:30", "timestamp": 1755783168.975854}}}
{"text": "2025-08-21 19:02:48.976 | INFO     | app.services.dhan_client:get_pnl:587 - P&L calculation completed successfully: 5 symbols, unrealized=‚Çπ656159.95\n", "record": {"elapsed": {"repr": "0:01:30.684132", "seconds": 90.684132}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 587, "message": "P&L calculation completed successfully: 5 symbols, unrealized=‚Çπ656159.95", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:02:48.976674+05:30", "timestamp": 1755783168.976674}}}
{"text": "2025-08-21 19:02:48.977 | DEBUG    | app.ws.live:emit_delta:408 - Emitted pnl delta: seq=100\n", "record": {"elapsed": {"repr": "0:01:30.685316", "seconds": 90.685316}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "emit_delta", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 408, "message": "Emitted pnl delta: seq=100", "module": "live", "name": "app.ws.live", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:02:48.977858+05:30", "timestamp": 1755783168.977858}}}
{"text": "2025-08-21 19:02:49.694 | DEBUG    | app.ws.live:emit_delta:408 - Emitted positions delta: seq=101\n", "record": {"elapsed": {"repr": "0:01:31.402259", "seconds": 91.402259}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "emit_delta", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 408, "message": "Emitted positions delta: seq=101", "module": "live", "name": "app.ws.live", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:02:49.694801+05:30", "timestamp": 1755783169.694801}}}
{"text": "2025-08-21 19:02:50.656 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:01:32.363474", "seconds": 92.363474}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:02:50.656016+05:30", "timestamp": 1755783170.656016}}}
{"text": "2025-08-21 19:02:50.657 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:01:32.364488", "seconds": 92.364488}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:02:50.657030+05:30", "timestamp": 1755783170.65703}}}
{"text": "2025-08-21 19:02:50.657 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:01:32.364964", "seconds": 92.364964}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:02:50.657506+05:30", "timestamp": 1755783170.657506}}}
{"text": "2025-08-21 19:02:50.657 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:01:32.365420", "seconds": 92.36542}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:02:50.657962+05:30", "timestamp": 1755783170.657962}}}
{"text": "2025-08-21 19:02:50.658 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:01:32.365888", "seconds": 92.365888}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:02:50.658430+05:30", "timestamp": 1755783170.65843}}}
{"text": "2025-08-21 19:02:50.659 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:01:32.366608", "seconds": 92.366608}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:02:50.659150+05:30", "timestamp": 1755783170.65915}}}
{"text": "2025-08-21 19:02:50.659 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:01:32.367425", "seconds": 92.367425}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:02:50.659967+05:30", "timestamp": 1755783170.659967}}}
{"text": "2025-08-21 19:02:50.660 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:01:32.367985", "seconds": 92.367985}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:02:50.660527+05:30", "timestamp": 1755783170.660527}}}
{"text": "2025-08-21 19:02:50.660 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:01:32.368357", "seconds": 92.368357}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:02:50.660899+05:30", "timestamp": 1755783170.660899}}}
{"text": "2025-08-21 19:02:50.661 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:01:32.368752", "seconds": 92.368752}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:02:50.661294+05:30", "timestamp": 1755783170.661294}}}
{"text": "2025-08-21 19:02:50.795 | INFO     | app.services.dhan_client:get_pnl:489 - Starting accurate P&L calculation\n", "record": {"elapsed": {"repr": "0:01:32.503090", "seconds": 92.50309}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 489, "message": "Starting accurate P&L calculation", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:02:50.795632+05:30", "timestamp": 1755783170.795632}}}
{"text": "2025-08-21 19:02:50.796 | INFO     | app.services.dhan_client:get_pnl:491 - Fetched 5 positions\n", "record": {"elapsed": {"repr": "0:01:32.503615", "seconds": 92.503615}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 491, "message": "Fetched 5 positions", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:02:50.796157+05:30", "timestamp": 1755783170.796157}}}
{"text": "2025-08-21 19:02:50.796 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for RELIANCE: unrealized=-426674.36, today=-426674.36\n", "record": {"elapsed": {"repr": "0:01:32.504093", "seconds": 92.504093}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for RELIANCE: unrealized=-426674.36, today=-426674.36", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:02:50.796635+05:30", "timestamp": 1755783170.796635}}}
{"text": "2025-08-21 19:02:50.797 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for TCS: unrealized=-41243.77, today=-41243.77\n", "record": {"elapsed": {"repr": "0:01:32.504576", "seconds": 92.504576}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for TCS: unrealized=-41243.77, today=-41243.77", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:02:50.797118+05:30", "timestamp": 1755783170.797118}}}
{"text": "2025-08-21 19:02:50.797 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for HDFC: unrealized=1641966.4, today=1641966.4\n", "record": {"elapsed": {"repr": "0:01:32.505292", "seconds": 92.505292}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for HDFC: unrealized=1641966.4, today=1641966.4", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:02:50.797834+05:30", "timestamp": 1755783170.797834}}}
{"text": "2025-08-21 19:02:50.798 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for INFY: unrealized=24331.11, today=24331.11\n", "record": {"elapsed": {"repr": "0:01:32.506059", "seconds": 92.506059}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for INFY: unrealized=24331.11, today=24331.11", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:02:50.798601+05:30", "timestamp": 1755783170.798601}}}
{"text": "2025-08-21 19:02:50.799 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for ICICIBANK: unrealized=-492567.35, today=-492567.35\n", "record": {"elapsed": {"repr": "0:01:32.506554", "seconds": 92.506554}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for ICICIBANK: unrealized=-492567.35, today=-492567.35", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:02:50.799096+05:30", "timestamp": 1755783170.799096}}}
{"text": "2025-08-21 19:02:50.799 | INFO     | app.services.dhan_client:get_pnl:545 - Calculated totals - realized: 0.0, unrealized: 705812.03, day: 705812.03\n", "record": {"elapsed": {"repr": "0:01:32.506924", "seconds": 92.506924}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 545, "message": "Calculated totals - realized: 0.0, unrealized: 705812.03, day: 705812.03", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:02:50.799466+05:30", "timestamp": 1755783170.799466}}}
{"text": "2025-08-21 19:02:50.799 | DEBUG    | app.services.dhan_client:get_pnl:554 - PnL consistency check passed: drift=‚Çπ0.00\n", "record": {"elapsed": {"repr": "0:01:32.507336", "seconds": 92.507336}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 554, "message": "PnL consistency check passed: drift=‚Çπ0.00", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:02:50.799878+05:30", "timestamp": 1755783170.799878}}}
{"text": "2025-08-21 19:02:50.800 | DEBUG    | app.services.dhan_client:get_pnl:558 - Creating PnLTotals...\n", "record": {"elapsed": {"repr": "0:01:32.507966", "seconds": 92.507966}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 558, "message": "Creating PnLTotals...", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:02:50.800508+05:30", "timestamp": 1755783170.800508}}}
{"text": "2025-08-21 19:02:50.801 | DEBUG    | app.services.dhan_client:get_pnl:565 - PnLTotals created successfully\n", "record": {"elapsed": {"repr": "0:01:32.508811", "seconds": 92.508811}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 565, "message": "PnLTotals created successfully", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:02:50.801353+05:30", "timestamp": 1755783170.801353}}}
{"text": "2025-08-21 19:02:50.802 | DEBUG    | app.services.dhan_client:get_pnl:574 - Creating PnL model...\n", "record": {"elapsed": {"repr": "0:01:32.509688", "seconds": 92.509688}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 574, "message": "Creating PnL model...", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:02:50.802230+05:30", "timestamp": 1755783170.80223}}}
{"text": "2025-08-21 19:02:50.802 | DEBUG    | app.services.dhan_client:get_pnl:575 - Model fields: totals=<class 'app.models.schemas.PnLTotals'>, perSymbol=5, updated_at=2025-08-21 19:02:50.796564+05:30, trading_day=2025-08-21\n", "record": {"elapsed": {"repr": "0:01:32.510209", "seconds": 92.510209}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 575, "message": "Model fields: totals=<class 'app.models.schemas.PnLTotals'>, perSymbol=5, updated_at=2025-08-21 19:02:50.796564+05:30, trading_day=2025-08-21", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:02:50.802751+05:30", "timestamp": 1755783170.802751}}}
{"text": "2025-08-21 19:02:50.803 | DEBUG    | app.services.dhan_client:get_pnl:584 - Created PnL model: totals=PnLTotals(realized=0.0, unrealized=705812.03, day=705812.03, currency='INR') per_symbol=[PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1727, avg=618.93, ltp=371.87, unrealized=-426674.36, today_pnl=-426674.36), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=167, avg=948.57, ltp=1195.54, unrealized=-41243.77, today_pnl=-41243.77), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=1347, avg=801.44, ltp=2020.42, unrealized=1641966.4, today_pnl=1641966.4), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=143, avg=1427.62, ltp=1257.47, unrealized=24331.11, today_pnl=24331.11), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=438, avg=1994.48, ltp=869.9, unrealized=-492567.35, today_pnl=-492567.35)] updated_at=datetime.datetime(2025, 8, 21, 19, 2, 50, 796564, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))) trading_day='2025-08-21'\n", "record": {"elapsed": {"repr": "0:01:32.510705", "seconds": 92.510705}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 584, "message": "Created PnL model: totals=PnLTotals(realized=0.0, unrealized=705812.03, day=705812.03, currency='INR') per_symbol=[PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1727, avg=618.93, ltp=371.87, unrealized=-426674.36, today_pnl=-426674.36), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=167, avg=948.57, ltp=1195.54, unrealized=-41243.77, today_pnl=-41243.77), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=1347, avg=801.44, ltp=2020.42, unrealized=1641966.4, today_pnl=1641966.4), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=143, avg=1427.62, ltp=1257.47, unrealized=24331.11, today_pnl=24331.11), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=438, avg=1994.48, ltp=869.9, unrealized=-492567.35, today_pnl=-492567.35)] updated_at=datetime.datetime(2025, 8, 21, 19, 2, 50, 796564, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))) trading_day='2025-08-21'", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:02:50.803247+05:30", "timestamp": 1755783170.803247}}}
{"text": "2025-08-21 19:02:50.803 | DEBUG    | app.services.dhan_client:get_pnl:585 - PnL model fields: {'totals': PnLTotals(realized=0.0, unrealized=705812.03, day=705812.03, currency='INR'), 'per_symbol': [PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1727, avg=618.93, ltp=371.87, unrealized=-426674.36, today_pnl=-426674.36), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=167, avg=948.57, ltp=1195.54, unrealized=-41243.77, today_pnl=-41243.77), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=1347, avg=801.44, ltp=2020.42, unrealized=1641966.4, today_pnl=1641966.4), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=143, avg=1427.62, ltp=1257.47, unrealized=24331.11, today_pnl=24331.11), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=438, avg=1994.48, ltp=869.9, unrealized=-492567.35, today_pnl=-492567.35)], 'updated_at': datetime.datetime(2025, 8, 21, 19, 2, 50, 796564, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))), 'trading_day': '2025-08-21'}\n", "record": {"elapsed": {"repr": "0:01:32.511420", "seconds": 92.51142}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 585, "message": "PnL model fields: {'totals': PnLTotals(realized=0.0, unrealized=705812.03, day=705812.03, currency='INR'), 'per_symbol': [PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1727, avg=618.93, ltp=371.87, unrealized=-426674.36, today_pnl=-426674.36), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=167, avg=948.57, ltp=1195.54, unrealized=-41243.77, today_pnl=-41243.77), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=1347, avg=801.44, ltp=2020.42, unrealized=1641966.4, today_pnl=1641966.4), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=143, avg=1427.62, ltp=1257.47, unrealized=24331.11, today_pnl=24331.11), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=438, avg=1994.48, ltp=869.9, unrealized=-492567.35, today_pnl=-492567.35)], 'updated_at': datetime.datetime(2025, 8, 21, 19, 2, 50, 796564, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))), 'trading_day': '2025-08-21'}", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:02:50.803962+05:30", "timestamp": 1755783170.803962}}}
{"text": "2025-08-21 19:02:50.804 | INFO     | app.services.dhan_client:get_pnl:587 - P&L calculation completed successfully: 5 symbols, unrealized=‚Çπ705812.03\n", "record": {"elapsed": {"repr": "0:01:32.511951", "seconds": 92.511951}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 587, "message": "P&L calculation completed successfully: 5 symbols, unrealized=‚Çπ705812.03", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:02:50.804493+05:30", "timestamp": 1755783170.804493}}}
{"text": "2025-08-21 19:02:50.805 | DEBUG    | app.ws.live:emit_delta:408 - Emitted pnl delta: seq=102\n", "record": {"elapsed": {"repr": "0:01:32.512638", "seconds": 92.512638}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "emit_delta", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 408, "message": "Emitted pnl delta: seq=102", "module": "live", "name": "app.ws.live", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:02:50.805180+05:30", "timestamp": 1755783170.80518}}}
{"text": "2025-08-21 19:02:51.370 | DEBUG    | app.ws.live:emit_delta:408 - Emitted positions delta: seq=103\n", "record": {"elapsed": {"repr": "0:01:33.077967", "seconds": 93.077967}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "emit_delta", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 408, "message": "Emitted positions delta: seq=103", "module": "live", "name": "app.ws.live", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:02:51.370509+05:30", "timestamp": 1755783171.370509}}}
{"text": "2025-08-21 19:02:52.533 | INFO     | app.services.dhan_client:get_pnl:489 - Starting accurate P&L calculation\n", "record": {"elapsed": {"repr": "0:01:34.240528", "seconds": 94.240528}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 489, "message": "Starting accurate P&L calculation", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:02:52.533070+05:30", "timestamp": 1755783172.53307}}}
{"text": "2025-08-21 19:02:52.534 | INFO     | app.services.dhan_client:get_pnl:491 - Fetched 5 positions\n", "record": {"elapsed": {"repr": "0:01:34.242035", "seconds": 94.242035}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 491, "message": "Fetched 5 positions", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:02:52.534577+05:30", "timestamp": 1755783172.534577}}}
{"text": "2025-08-21 19:02:52.535 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for RELIANCE: unrealized=-426674.36, today=-426674.36\n", "record": {"elapsed": {"repr": "0:01:34.242884", "seconds": 94.242884}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for RELIANCE: unrealized=-426674.36, today=-426674.36", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:02:52.535426+05:30", "timestamp": 1755783172.535426}}}
{"text": "2025-08-21 19:02:52.536 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for TCS: unrealized=-41243.77, today=-41243.77\n", "record": {"elapsed": {"repr": "0:01:34.243600", "seconds": 94.2436}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for TCS: unrealized=-41243.77, today=-41243.77", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:02:52.536142+05:30", "timestamp": 1755783172.536142}}}
{"text": "2025-08-21 19:02:52.536 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for HDFC: unrealized=1641966.4, today=1641966.4\n", "record": {"elapsed": {"repr": "0:01:34.244242", "seconds": 94.244242}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for HDFC: unrealized=1641966.4, today=1641966.4", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:02:52.536784+05:30", "timestamp": 1755783172.536784}}}
{"text": "2025-08-21 19:02:52.537 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for INFY: unrealized=24331.11, today=24331.11\n", "record": {"elapsed": {"repr": "0:01:34.245051", "seconds": 94.245051}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for INFY: unrealized=24331.11, today=24331.11", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:02:52.537593+05:30", "timestamp": 1755783172.537593}}}
{"text": "2025-08-21 19:02:52.538 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for ICICIBANK: unrealized=-492567.35, today=-492567.35\n", "record": {"elapsed": {"repr": "0:01:34.245773", "seconds": 94.245773}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for ICICIBANK: unrealized=-492567.35, today=-492567.35", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:02:52.538315+05:30", "timestamp": 1755783172.538315}}}
{"text": "2025-08-21 19:02:52.539 | INFO     | app.services.dhan_client:get_pnl:545 - Calculated totals - realized: 0.0, unrealized: 705812.03, day: 705812.03\n", "record": {"elapsed": {"repr": "0:01:34.246848", "seconds": 94.246848}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 545, "message": "Calculated totals - realized: 0.0, unrealized: 705812.03, day: 705812.03", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:02:52.539390+05:30", "timestamp": 1755783172.53939}}}
{"text": "2025-08-21 19:02:52.540 | DEBUG    | app.services.dhan_client:get_pnl:554 - PnL consistency check passed: drift=‚Çπ0.00\n", "record": {"elapsed": {"repr": "0:01:34.247559", "seconds": 94.247559}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 554, "message": "PnL consistency check passed: drift=‚Çπ0.00", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:02:52.540101+05:30", "timestamp": 1755783172.540101}}}
{"text": "2025-08-21 19:02:52.540 | DEBUG    | app.services.dhan_client:get_pnl:558 - Creating PnLTotals...\n", "record": {"elapsed": {"repr": "0:01:34.248198", "seconds": 94.248198}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 558, "message": "Creating PnLTotals...", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:02:52.540740+05:30", "timestamp": 1755783172.54074}}}
{"text": "2025-08-21 19:02:52.541 | DEBUG    | app.services.dhan_client:get_pnl:565 - PnLTotals created successfully\n", "record": {"elapsed": {"repr": "0:01:34.248814", "seconds": 94.248814}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 565, "message": "PnLTotals created successfully", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:02:52.541356+05:30", "timestamp": 1755783172.541356}}}
{"text": "2025-08-21 19:02:52.542 | DEBUG    | app.services.dhan_client:get_pnl:574 - Creating PnL model...\n", "record": {"elapsed": {"repr": "0:01:34.249706", "seconds": 94.249706}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 574, "message": "Creating PnL model...", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:02:52.542248+05:30", "timestamp": 1755783172.542248}}}
{"text": "2025-08-21 19:02:52.542 | DEBUG    | app.services.dhan_client:get_pnl:575 - Model fields: totals=<class 'app.models.schemas.PnLTotals'>, perSymbol=5, updated_at=2025-08-21 19:02:52.535306+05:30, trading_day=2025-08-21\n", "record": {"elapsed": {"repr": "0:01:34.250364", "seconds": 94.250364}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 575, "message": "Model fields: totals=<class 'app.models.schemas.PnLTotals'>, perSymbol=5, updated_at=2025-08-21 19:02:52.535306+05:30, trading_day=2025-08-21", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:02:52.542906+05:30", "timestamp": 1755783172.542906}}}
{"text": "2025-08-21 19:02:52.544 | DEBUG    | app.services.dhan_client:get_pnl:584 - Created PnL model: totals=PnLTotals(realized=0.0, unrealized=705812.03, day=705812.03, currency='INR') per_symbol=[PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1727, avg=618.93, ltp=371.87, unrealized=-426674.36, today_pnl=-426674.36), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=167, avg=948.57, ltp=1195.54, unrealized=-41243.77, today_pnl=-41243.77), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=1347, avg=801.44, ltp=2020.42, unrealized=1641966.4, today_pnl=1641966.4), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=143, avg=1427.62, ltp=1257.47, unrealized=24331.11, today_pnl=24331.11), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=438, avg=1994.48, ltp=869.9, unrealized=-492567.35, today_pnl=-492567.35)] updated_at=datetime.datetime(2025, 8, 21, 19, 2, 52, 535306, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))) trading_day='2025-08-21'\n", "record": {"elapsed": {"repr": "0:01:34.251985", "seconds": 94.251985}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 584, "message": "Created PnL model: totals=PnLTotals(realized=0.0, unrealized=705812.03, day=705812.03, currency='INR') per_symbol=[PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1727, avg=618.93, ltp=371.87, unrealized=-426674.36, today_pnl=-426674.36), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=167, avg=948.57, ltp=1195.54, unrealized=-41243.77, today_pnl=-41243.77), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=1347, avg=801.44, ltp=2020.42, unrealized=1641966.4, today_pnl=1641966.4), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=143, avg=1427.62, ltp=1257.47, unrealized=24331.11, today_pnl=24331.11), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=438, avg=1994.48, ltp=869.9, unrealized=-492567.35, today_pnl=-492567.35)] updated_at=datetime.datetime(2025, 8, 21, 19, 2, 52, 535306, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))) trading_day='2025-08-21'", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:02:52.544527+05:30", "timestamp": 1755783172.544527}}}
{"text": "2025-08-21 19:02:52.545 | DEBUG    | app.services.dhan_client:get_pnl:585 - PnL model fields: {'totals': PnLTotals(realized=0.0, unrealized=705812.03, day=705812.03, currency='INR'), 'per_symbol': [PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1727, avg=618.93, ltp=371.87, unrealized=-426674.36, today_pnl=-426674.36), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=167, avg=948.57, ltp=1195.54, unrealized=-41243.77, today_pnl=-41243.77), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=1347, avg=801.44, ltp=2020.42, unrealized=1641966.4, today_pnl=1641966.4), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=143, avg=1427.62, ltp=1257.47, unrealized=24331.11, today_pnl=24331.11), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=438, avg=1994.48, ltp=869.9, unrealized=-492567.35, today_pnl=-492567.35)], 'updated_at': datetime.datetime(2025, 8, 21, 19, 2, 52, 535306, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))), 'trading_day': '2025-08-21'}\n", "record": {"elapsed": {"repr": "0:01:34.253428", "seconds": 94.253428}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 585, "message": "PnL model fields: {'totals': PnLTotals(realized=0.0, unrealized=705812.03, day=705812.03, currency='INR'), 'per_symbol': [PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1727, avg=618.93, ltp=371.87, unrealized=-426674.36, today_pnl=-426674.36), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=167, avg=948.57, ltp=1195.54, unrealized=-41243.77, today_pnl=-41243.77), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=1347, avg=801.44, ltp=2020.42, unrealized=1641966.4, today_pnl=1641966.4), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=143, avg=1427.62, ltp=1257.47, unrealized=24331.11, today_pnl=24331.11), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=438, avg=1994.48, ltp=869.9, unrealized=-492567.35, today_pnl=-492567.35)], 'updated_at': datetime.datetime(2025, 8, 21, 19, 2, 52, 535306, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))), 'trading_day': '2025-08-21'}", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:02:52.545970+05:30", "timestamp": 1755783172.54597}}}
{"text": "2025-08-21 19:02:52.547 | INFO     | app.services.dhan_client:get_pnl:587 - P&L calculation completed successfully: 5 symbols, unrealized=‚Çπ705812.03\n", "record": {"elapsed": {"repr": "0:01:34.254882", "seconds": 94.254882}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 587, "message": "P&L calculation completed successfully: 5 symbols, unrealized=‚Çπ705812.03", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:02:52.547424+05:30", "timestamp": 1755783172.547424}}}
{"text": "2025-08-21 19:02:52.548 | DEBUG    | app.ws.live:emit_delta:408 - Emitted pnl delta: seq=104\n", "record": {"elapsed": {"repr": "0:01:34.255890", "seconds": 94.25589}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "emit_delta", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 408, "message": "Emitted pnl delta: seq=104", "module": "live", "name": "app.ws.live", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:02:52.548432+05:30", "timestamp": 1755783172.548432}}}
{"text": "2025-08-21 19:02:52.662 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:01:34.369595", "seconds": 94.369595}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:02:52.662137+05:30", "timestamp": 1755783172.662137}}}
{"text": "2025-08-21 19:02:52.663 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:01:34.370479", "seconds": 94.370479}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:02:52.663021+05:30", "timestamp": 1755783172.663021}}}
{"text": "2025-08-21 19:02:52.664 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:01:34.371708", "seconds": 94.371708}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:02:52.664250+05:30", "timestamp": 1755783172.66425}}}
{"text": "2025-08-21 19:02:52.664 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:01:34.372293", "seconds": 94.372293}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:02:52.664835+05:30", "timestamp": 1755783172.664835}}}
{"text": "2025-08-21 19:02:52.665 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:01:34.372908", "seconds": 94.372908}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:02:52.665450+05:30", "timestamp": 1755783172.66545}}}
{"text": "2025-08-21 19:02:52.666 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:01:34.373709", "seconds": 94.373709}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:02:52.666251+05:30", "timestamp": 1755783172.666251}}}
{"text": "2025-08-21 19:02:52.666 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:01:34.374252", "seconds": 94.374252}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:02:52.666794+05:30", "timestamp": 1755783172.666794}}}
{"text": "2025-08-21 19:02:52.668 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:01:34.375518", "seconds": 94.375518}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:02:52.668060+05:30", "timestamp": 1755783172.66806}}}
{"text": "2025-08-21 19:02:52.668 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:01:34.376319", "seconds": 94.376319}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:02:52.668861+05:30", "timestamp": 1755783172.668861}}}
{"text": "2025-08-21 19:02:52.669 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:01:34.376987", "seconds": 94.376987}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:02:52.669529+05:30", "timestamp": 1755783172.669529}}}
{"text": "2025-08-21 19:02:52.883 | DEBUG    | app.ws.live:emit_delta:408 - Emitted positions delta: seq=105\n", "record": {"elapsed": {"repr": "0:01:34.591397", "seconds": 94.591397}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "emit_delta", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 408, "message": "Emitted positions delta: seq=105", "module": "live", "name": "app.ws.live", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:02:52.883939+05:30", "timestamp": 1755783172.883939}}}
{"text": "2025-08-21 19:02:54.150 | INFO     | app.services.dhan_client:get_pnl:489 - Starting accurate P&L calculation\n", "record": {"elapsed": {"repr": "0:01:35.857595", "seconds": 95.857595}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 489, "message": "Starting accurate P&L calculation", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:02:54.150137+05:30", "timestamp": 1755783174.150137}}}
{"text": "2025-08-21 19:02:54.150 | INFO     | app.services.dhan_client:get_pnl:491 - Fetched 5 positions\n", "record": {"elapsed": {"repr": "0:01:35.858227", "seconds": 95.858227}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 491, "message": "Fetched 5 positions", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:02:54.150769+05:30", "timestamp": 1755783174.150769}}}
{"text": "2025-08-21 19:02:54.151 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for RELIANCE: unrealized=-423137.63, today=-423137.63\n", "record": {"elapsed": {"repr": "0:01:35.858699", "seconds": 95.858699}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for RELIANCE: unrealized=-423137.63, today=-423137.63", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:02:54.151241+05:30", "timestamp": 1755783174.151241}}}
{"text": "2025-08-21 19:02:54.151 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for TCS: unrealized=-41624.02, today=-41624.02\n", "record": {"elapsed": {"repr": "0:01:35.859128", "seconds": 95.859128}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for TCS: unrealized=-41624.02, today=-41624.02", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:02:54.151670+05:30", "timestamp": 1755783174.15167}}}
{"text": "2025-08-21 19:02:54.152 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for HDFC: unrealized=1681080.24, today=1681080.24\n", "record": {"elapsed": {"repr": "0:01:35.859583", "seconds": 95.859583}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for HDFC: unrealized=1681080.24, today=1681080.24", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:02:54.152125+05:30", "timestamp": 1755783174.152125}}}
{"text": "2025-08-21 19:02:54.152 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for INFY: unrealized=25473.86, today=25473.86\n", "record": {"elapsed": {"repr": "0:01:35.860023", "seconds": 95.860023}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for INFY: unrealized=25473.86, today=25473.86", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:02:54.152565+05:30", "timestamp": 1755783174.152565}}}
{"text": "2025-08-21 19:02:54.152 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for ICICIBANK: unrealized=-490778.15, today=-490778.15\n", "record": {"elapsed": {"repr": "0:01:35.860438", "seconds": 95.860438}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for ICICIBANK: unrealized=-490778.15, today=-490778.15", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:02:54.152980+05:30", "timestamp": 1755783174.15298}}}
{"text": "2025-08-21 19:02:54.153 | INFO     | app.services.dhan_client:get_pnl:545 - Calculated totals - realized: 0.0, unrealized: 751014.3, day: 751014.3\n", "record": {"elapsed": {"repr": "0:01:35.861036", "seconds": 95.861036}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 545, "message": "Calculated totals - realized: 0.0, unrealized: 751014.3, day: 751014.3", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:02:54.153578+05:30", "timestamp": 1755783174.153578}}}
{"text": "2025-08-21 19:02:54.154 | DEBUG    | app.services.dhan_client:get_pnl:554 - PnL consistency check passed: drift=‚Çπ0.00\n", "record": {"elapsed": {"repr": "0:01:35.861592", "seconds": 95.861592}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 554, "message": "PnL consistency check passed: drift=‚Çπ0.00", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:02:54.154134+05:30", "timestamp": 1755783174.154134}}}
{"text": "2025-08-21 19:02:54.155 | DEBUG    | app.services.dhan_client:get_pnl:558 - Creating PnLTotals...\n", "record": {"elapsed": {"repr": "0:01:35.862548", "seconds": 95.862548}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 558, "message": "Creating PnLTotals...", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:02:54.155090+05:30", "timestamp": 1755783174.15509}}}
{"text": "2025-08-21 19:02:54.155 | DEBUG    | app.services.dhan_client:get_pnl:565 - PnLTotals created successfully\n", "record": {"elapsed": {"repr": "0:01:35.863072", "seconds": 95.863072}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 565, "message": "PnLTotals created successfully", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:02:54.155614+05:30", "timestamp": 1755783174.155614}}}
{"text": "2025-08-21 19:02:54.156 | DEBUG    | app.services.dhan_client:get_pnl:574 - Creating PnL model...\n", "record": {"elapsed": {"repr": "0:01:35.863740", "seconds": 95.86374}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 574, "message": "Creating PnL model...", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:02:54.156282+05:30", "timestamp": 1755783174.156282}}}
{"text": "2025-08-21 19:02:54.156 | DEBUG    | app.services.dhan_client:get_pnl:575 - Model fields: totals=<class 'app.models.schemas.PnLTotals'>, perSymbol=5, updated_at=2025-08-21 19:02:54.151186+05:30, trading_day=2025-08-21\n", "record": {"elapsed": {"repr": "0:01:35.864369", "seconds": 95.864369}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 575, "message": "Model fields: totals=<class 'app.models.schemas.PnLTotals'>, perSymbol=5, updated_at=2025-08-21 19:02:54.151186+05:30, trading_day=2025-08-21", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:02:54.156911+05:30", "timestamp": 1755783174.156911}}}
{"text": "2025-08-21 19:02:54.158 | DEBUG    | app.services.dhan_client:get_pnl:584 - Created PnL model: totals=PnLTotals(realized=0.0, unrealized=751014.3, day=751014.3, currency='INR') per_symbol=[PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1727, avg=618.93, ltp=373.92, unrealized=-423137.63, today_pnl=-423137.63), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=167, avg=948.57, ltp=1197.82, unrealized=-41624.02, today_pnl=-41624.02), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=1347, avg=801.44, ltp=2049.46, unrealized=1681080.24, today_pnl=1681080.24), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=143, avg=1427.62, ltp=1249.48, unrealized=25473.86, today_pnl=25473.86), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=438, avg=1994.48, ltp=873.98, unrealized=-490778.15, today_pnl=-490778.15)] updated_at=datetime.datetime(2025, 8, 21, 19, 2, 54, 151186, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))) trading_day='2025-08-21'\n", "record": {"elapsed": {"repr": "0:01:35.865763", "seconds": 95.865763}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 584, "message": "Created PnL model: totals=PnLTotals(realized=0.0, unrealized=751014.3, day=751014.3, currency='INR') per_symbol=[PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1727, avg=618.93, ltp=373.92, unrealized=-423137.63, today_pnl=-423137.63), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=167, avg=948.57, ltp=1197.82, unrealized=-41624.02, today_pnl=-41624.02), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=1347, avg=801.44, ltp=2049.46, unrealized=1681080.24, today_pnl=1681080.24), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=143, avg=1427.62, ltp=1249.48, unrealized=25473.86, today_pnl=25473.86), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=438, avg=1994.48, ltp=873.98, unrealized=-490778.15, today_pnl=-490778.15)] updated_at=datetime.datetime(2025, 8, 21, 19, 2, 54, 151186, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))) trading_day='2025-08-21'", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:02:54.158305+05:30", "timestamp": 1755783174.158305}}}
{"text": "2025-08-21 19:02:54.159 | DEBUG    | app.services.dhan_client:get_pnl:585 - PnL model fields: {'totals': PnLTotals(realized=0.0, unrealized=751014.3, day=751014.3, currency='INR'), 'per_symbol': [PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1727, avg=618.93, ltp=373.92, unrealized=-423137.63, today_pnl=-423137.63), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=167, avg=948.57, ltp=1197.82, unrealized=-41624.02, today_pnl=-41624.02), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=1347, avg=801.44, ltp=2049.46, unrealized=1681080.24, today_pnl=1681080.24), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=143, avg=1427.62, ltp=1249.48, unrealized=25473.86, today_pnl=25473.86), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=438, avg=1994.48, ltp=873.98, unrealized=-490778.15, today_pnl=-490778.15)], 'updated_at': datetime.datetime(2025, 8, 21, 19, 2, 54, 151186, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))), 'trading_day': '2025-08-21'}\n", "record": {"elapsed": {"repr": "0:01:35.866623", "seconds": 95.866623}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 585, "message": "PnL model fields: {'totals': PnLTotals(realized=0.0, unrealized=751014.3, day=751014.3, currency='INR'), 'per_symbol': [PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1727, avg=618.93, ltp=373.92, unrealized=-423137.63, today_pnl=-423137.63), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=167, avg=948.57, ltp=1197.82, unrealized=-41624.02, today_pnl=-41624.02), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=1347, avg=801.44, ltp=2049.46, unrealized=1681080.24, today_pnl=1681080.24), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=143, avg=1427.62, ltp=1249.48, unrealized=25473.86, today_pnl=25473.86), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=438, avg=1994.48, ltp=873.98, unrealized=-490778.15, today_pnl=-490778.15)], 'updated_at': datetime.datetime(2025, 8, 21, 19, 2, 54, 151186, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))), 'trading_day': '2025-08-21'}", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:02:54.159165+05:30", "timestamp": 1755783174.159165}}}
{"text": "2025-08-21 19:02:54.159 | INFO     | app.services.dhan_client:get_pnl:587 - P&L calculation completed successfully: 5 symbols, unrealized=‚Çπ751014.30\n", "record": {"elapsed": {"repr": "0:01:35.867175", "seconds": 95.867175}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 587, "message": "P&L calculation completed successfully: 5 symbols, unrealized=‚Çπ751014.30", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:02:54.159717+05:30", "timestamp": 1755783174.159717}}}
{"text": "2025-08-21 19:02:54.160 | DEBUG    | app.ws.live:emit_delta:408 - Emitted pnl delta: seq=106\n", "record": {"elapsed": {"repr": "0:01:35.867797", "seconds": 95.867797}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "emit_delta", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 408, "message": "Emitted pnl delta: seq=106", "module": "live", "name": "app.ws.live", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:02:54.160339+05:30", "timestamp": 1755783174.160339}}}
{"text": "2025-08-21 19:02:54.670 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:01:36.377741", "seconds": 96.377741}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:02:54.670283+05:30", "timestamp": 1755783174.670283}}}
{"text": "2025-08-21 19:02:54.671 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:01:36.378928", "seconds": 96.378928}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:02:54.671470+05:30", "timestamp": 1755783174.67147}}}
{"text": "2025-08-21 19:02:54.672 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:01:36.379472", "seconds": 96.379472}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:02:54.672014+05:30", "timestamp": 1755783174.672014}}}
{"text": "2025-08-21 19:02:54.672 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:01:36.379939", "seconds": 96.379939}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:02:54.672481+05:30", "timestamp": 1755783174.672481}}}
{"text": "2025-08-21 19:02:54.673 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:01:36.380978", "seconds": 96.380978}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:02:54.673520+05:30", "timestamp": 1755783174.67352}}}
{"text": "2025-08-21 19:02:54.674 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:01:36.381923", "seconds": 96.381923}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:02:54.674465+05:30", "timestamp": 1755783174.674465}}}
