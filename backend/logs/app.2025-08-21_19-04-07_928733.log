{"text": "2025-08-21 19:04:07.925 | INFO     | app.services.dhan_client:get_pnl:545 - Calculated totals - realized: 0.0, unrealized: 618486.85, day: 618486.85\n", "record": {"elapsed": {"repr": "0:02:49.632695", "seconds": 169.632695}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 545, "message": "Calculated totals - realized: 0.0, unrealized: 618486.85, day: 618486.85", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:04:07.925237+05:30", "timestamp": 1755783247.925237}}}
{"text": "2025-08-21 19:04:07.929 | DEBUG    | app.services.dhan_client:get_pnl:554 - PnL consistency check passed: drift=‚Çπ0.00\n", "record": {"elapsed": {"repr": "0:02:49.637083", "seconds": 169.637083}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 554, "message": "PnL consistency check passed: drift=‚Çπ0.00", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:04:07.929625+05:30", "timestamp": 1755783247.929625}}}
{"text": "2025-08-21 19:04:07.930 | DEBUG    | app.services.dhan_client:get_pnl:558 - Creating PnLTotals...\n", "record": {"elapsed": {"repr": "0:02:49.637686", "seconds": 169.637686}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 558, "message": "Creating PnLTotals...", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:04:07.930228+05:30", "timestamp": 1755783247.930228}}}
{"text": "2025-08-21 19:04:07.930 | DEBUG    | app.services.dhan_client:get_pnl:565 - PnLTotals created successfully\n", "record": {"elapsed": {"repr": "0:02:49.638368", "seconds": 169.638368}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 565, "message": "PnLTotals created successfully", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:04:07.930910+05:30", "timestamp": 1755783247.93091}}}
{"text": "2025-08-21 19:04:07.931 | DEBUG    | app.services.dhan_client:get_pnl:574 - Creating PnL model...\n", "record": {"elapsed": {"repr": "0:02:49.639081", "seconds": 169.639081}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 574, "message": "Creating PnL model...", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:04:07.931623+05:30", "timestamp": 1755783247.931623}}}
{"text": "2025-08-21 19:04:07.932 | DEBUG    | app.services.dhan_client:get_pnl:575 - Model fields: totals=<class 'app.models.schemas.PnLTotals'>, perSymbol=5, updated_at=2025-08-21 19:04:07.921431+05:30, trading_day=2025-08-21\n", "record": {"elapsed": {"repr": "0:02:49.640255", "seconds": 169.640255}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 575, "message": "Model fields: totals=<class 'app.models.schemas.PnLTotals'>, perSymbol=5, updated_at=2025-08-21 19:04:07.921431+05:30, trading_day=2025-08-21", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:04:07.932797+05:30", "timestamp": 1755783247.932797}}}
{"text": "2025-08-21 19:04:07.933 | DEBUG    | app.services.dhan_client:get_pnl:584 - Created PnL model: totals=PnLTotals(realized=0.0, unrealized=618486.85, day=618486.85, currency='INR') per_symbol=[PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1727, avg=618.93, ltp=354.21, unrealized=-457165.0, today_pnl=-457165.0), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=167, avg=948.57, ltp=1179.21, unrealized=-38517.41, today_pnl=-38517.41), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=1347, avg=801.44, ltp=1967.57, unrealized=1570778.9, today_pnl=1570778.9), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=143, avg=1427.62, ltp=1317.25, unrealized=15782.84, today_pnl=15782.84), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=438, avg=1994.48, ltp=915.96, unrealized=-472392.48, today_pnl=-472392.48)] updated_at=datetime.datetime(2025, 8, 21, 19, 4, 7, 921431, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))) trading_day='2025-08-21'\n", "record": {"elapsed": {"repr": "0:02:49.641161", "seconds": 169.641161}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 584, "message": "Created PnL model: totals=PnLTotals(realized=0.0, unrealized=618486.85, day=618486.85, currency='INR') per_symbol=[PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1727, avg=618.93, ltp=354.21, unrealized=-457165.0, today_pnl=-457165.0), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=167, avg=948.57, ltp=1179.21, unrealized=-38517.41, today_pnl=-38517.41), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=1347, avg=801.44, ltp=1967.57, unrealized=1570778.9, today_pnl=1570778.9), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=143, avg=1427.62, ltp=1317.25, unrealized=15782.84, today_pnl=15782.84), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=438, avg=1994.48, ltp=915.96, unrealized=-472392.48, today_pnl=-472392.48)] updated_at=datetime.datetime(2025, 8, 21, 19, 4, 7, 921431, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))) trading_day='2025-08-21'", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:04:07.933703+05:30", "timestamp": 1755783247.933703}}}
{"text": "2025-08-21 19:04:07.934 | DEBUG    | app.services.dhan_client:get_pnl:585 - PnL model fields: {'totals': PnLTotals(realized=0.0, unrealized=618486.85, day=618486.85, currency='INR'), 'per_symbol': [PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1727, avg=618.93, ltp=354.21, unrealized=-457165.0, today_pnl=-457165.0), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=167, avg=948.57, ltp=1179.21, unrealized=-38517.41, today_pnl=-38517.41), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=1347, avg=801.44, ltp=1967.57, unrealized=1570778.9, today_pnl=1570778.9), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=143, avg=1427.62, ltp=1317.25, unrealized=15782.84, today_pnl=15782.84), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=438, avg=1994.48, ltp=915.96, unrealized=-472392.48, today_pnl=-472392.48)], 'updated_at': datetime.datetime(2025, 8, 21, 19, 4, 7, 921431, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))), 'trading_day': '2025-08-21'}\n", "record": {"elapsed": {"repr": "0:02:49.641923", "seconds": 169.641923}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 585, "message": "PnL model fields: {'totals': PnLTotals(realized=0.0, unrealized=618486.85, day=618486.85, currency='INR'), 'per_symbol': [PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1727, avg=618.93, ltp=354.21, unrealized=-457165.0, today_pnl=-457165.0), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=167, avg=948.57, ltp=1179.21, unrealized=-38517.41, today_pnl=-38517.41), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=1347, avg=801.44, ltp=1967.57, unrealized=1570778.9, today_pnl=1570778.9), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=143, avg=1427.62, ltp=1317.25, unrealized=15782.84, today_pnl=15782.84), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=438, avg=1994.48, ltp=915.96, unrealized=-472392.48, today_pnl=-472392.48)], 'updated_at': datetime.datetime(2025, 8, 21, 19, 4, 7, 921431, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))), 'trading_day': '2025-08-21'}", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:04:07.934465+05:30", "timestamp": 1755783247.934465}}}
{"text": "2025-08-21 19:04:07.935 | INFO     | app.services.dhan_client:get_pnl:587 - P&L calculation completed successfully: 5 symbols, unrealized=‚Çπ618486.85\n", "record": {"elapsed": {"repr": "0:02:49.642546", "seconds": 169.642546}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 587, "message": "P&L calculation completed successfully: 5 symbols, unrealized=‚Çπ618486.85", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:04:07.935088+05:30", "timestamp": 1755783247.935088}}}
{"text": "2025-08-21 19:04:07.935 | DEBUG    | app.ws.live:emit_delta:408 - Emitted pnl delta: seq=186\n", "record": {"elapsed": {"repr": "0:02:49.643325", "seconds": 169.643325}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "emit_delta", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 408, "message": "Emitted pnl delta: seq=186", "module": "live", "name": "app.ws.live", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:04:07.935867+05:30", "timestamp": 1755783247.935867}}}
{"text": "2025-08-21 19:04:07.936 | DEBUG    | app.ws.live:emit_delta:408 - Emitted positions delta: seq=187\n", "record": {"elapsed": {"repr": "0:02:49.644111", "seconds": 169.644111}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "emit_delta", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 408, "message": "Emitted positions delta: seq=187", "module": "live", "name": "app.ws.live", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:04:07.936653+05:30", "timestamp": 1755783247.936653}}}
{"text": "2025-08-21 19:04:08.920 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:02:50.627474", "seconds": 170.627474}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:04:08.920016+05:30", "timestamp": 1755783248.920016}}}
{"text": "2025-08-21 19:04:08.920 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:02:50.628266", "seconds": 170.628266}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:04:08.920808+05:30", "timestamp": 1755783248.920808}}}
{"text": "2025-08-21 19:04:08.921 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:02:50.628677", "seconds": 170.628677}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:04:08.921219+05:30", "timestamp": 1755783248.921219}}}
{"text": "2025-08-21 19:04:08.921 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:02:50.629138", "seconds": 170.629138}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:04:08.921680+05:30", "timestamp": 1755783248.92168}}}
{"text": "2025-08-21 19:04:08.922 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:02:50.630150", "seconds": 170.63015}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:04:08.922692+05:30", "timestamp": 1755783248.922692}}}
{"text": "2025-08-21 19:04:08.923 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:02:50.631021", "seconds": 170.631021}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:04:08.923563+05:30", "timestamp": 1755783248.923563}}}
{"text": "2025-08-21 19:04:08.924 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:02:50.631606", "seconds": 170.631606}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:04:08.924148+05:30", "timestamp": 1755783248.924148}}}
{"text": "2025-08-21 19:04:08.924 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:02:50.632132", "seconds": 170.632132}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:04:08.924674+05:30", "timestamp": 1755783248.924674}}}
{"text": "2025-08-21 19:04:08.925 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:02:50.632651", "seconds": 170.632651}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:04:08.925193+05:30", "timestamp": 1755783248.925193}}}
{"text": "2025-08-21 19:04:08.925 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:02:50.633130", "seconds": 170.63313}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:04:08.925672+05:30", "timestamp": 1755783248.925672}}}
{"text": "2025-08-21 19:04:09.731 | INFO     | app.services.dhan_client:get_pnl:489 - Starting accurate P&L calculation\n", "record": {"elapsed": {"repr": "0:02:51.439004", "seconds": 171.439004}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 489, "message": "Starting accurate P&L calculation", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:04:09.731546+05:30", "timestamp": 1755783249.731546}}}
{"text": "2025-08-21 19:04:09.732 | INFO     | app.services.dhan_client:get_pnl:491 - Fetched 5 positions\n", "record": {"elapsed": {"repr": "0:02:51.439798", "seconds": 171.439798}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 491, "message": "Fetched 5 positions", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:04:09.732340+05:30", "timestamp": 1755783249.73234}}}
{"text": "2025-08-21 19:04:09.732 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for RELIANCE: unrealized=-462910.91, today=-462910.91\n", "record": {"elapsed": {"repr": "0:02:51.440439", "seconds": 171.440439}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for RELIANCE: unrealized=-462910.91, today=-462910.91", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:04:09.732981+05:30", "timestamp": 1755783249.732981}}}
{"text": "2025-08-21 19:04:09.733 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for TCS: unrealized=-38743.89, today=-38743.89\n", "record": {"elapsed": {"repr": "0:02:51.441035", "seconds": 171.441035}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for TCS: unrealized=-38743.89, today=-38743.89", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:04:09.733577+05:30", "timestamp": 1755783249.733577}}}
{"text": "2025-08-21 19:04:09.734 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for HDFC: unrealized=1534051.0, today=1534051.0\n", "record": {"elapsed": {"repr": "0:02:51.441693", "seconds": 171.441693}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for HDFC: unrealized=1534051.0, today=1534051.0", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:04:09.734235+05:30", "timestamp": 1755783249.734235}}}
{"text": "2025-08-21 19:04:09.734 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for INFY: unrealized=13225.1, today=13225.1\n", "record": {"elapsed": {"repr": "0:02:51.442394", "seconds": 171.442394}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for INFY: unrealized=13225.1, today=13225.1", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:04:09.734936+05:30", "timestamp": 1755783249.734936}}}
{"text": "2025-08-21 19:04:09.735 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for ICICIBANK: unrealized=-474547.65, today=-474547.65\n", "record": {"elapsed": {"repr": "0:02:51.443005", "seconds": 171.443005}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for ICICIBANK: unrealized=-474547.65, today=-474547.65", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:04:09.735547+05:30", "timestamp": 1755783249.735547}}}
{"text": "2025-08-21 19:04:09.736 | INFO     | app.services.dhan_client:get_pnl:545 - Calculated totals - realized: 0.0, unrealized: 571073.65, day: 571073.65\n", "record": {"elapsed": {"repr": "0:02:51.444116", "seconds": 171.444116}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 545, "message": "Calculated totals - realized: 0.0, unrealized: 571073.65, day: 571073.65", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:04:09.736658+05:30", "timestamp": 1755783249.736658}}}
{"text": "2025-08-21 19:04:09.737 | DEBUG    | app.services.dhan_client:get_pnl:554 - PnL consistency check passed: drift=‚Çπ0.00\n", "record": {"elapsed": {"repr": "0:02:51.444784", "seconds": 171.444784}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 554, "message": "PnL consistency check passed: drift=‚Çπ0.00", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:04:09.737326+05:30", "timestamp": 1755783249.737326}}}
{"text": "2025-08-21 19:04:09.737 | DEBUG    | app.services.dhan_client:get_pnl:558 - Creating PnLTotals...\n", "record": {"elapsed": {"repr": "0:02:51.445423", "seconds": 171.445423}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 558, "message": "Creating PnLTotals...", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:04:09.737965+05:30", "timestamp": 1755783249.737965}}}
{"text": "2025-08-21 19:04:09.738 | DEBUG    | app.services.dhan_client:get_pnl:565 - PnLTotals created successfully\n", "record": {"elapsed": {"repr": "0:02:51.445928", "seconds": 171.445928}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 565, "message": "PnLTotals created successfully", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:04:09.738470+05:30", "timestamp": 1755783249.73847}}}
{"text": "2025-08-21 19:04:09.739 | DEBUG    | app.services.dhan_client:get_pnl:574 - Creating PnL model...\n", "record": {"elapsed": {"repr": "0:02:51.446686", "seconds": 171.446686}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 574, "message": "Creating PnL model...", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:04:09.739228+05:30", "timestamp": 1755783249.739228}}}
{"text": "2025-08-21 19:04:09.739 | DEBUG    | app.services.dhan_client:get_pnl:575 - Model fields: totals=<class 'app.models.schemas.PnLTotals'>, perSymbol=5, updated_at=2025-08-21 19:04:09.732915+05:30, trading_day=2025-08-21\n", "record": {"elapsed": {"repr": "0:02:51.447228", "seconds": 171.447228}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 575, "message": "Model fields: totals=<class 'app.models.schemas.PnLTotals'>, perSymbol=5, updated_at=2025-08-21 19:04:09.732915+05:30, trading_day=2025-08-21", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:04:09.739770+05:30", "timestamp": 1755783249.73977}}}
{"text": "2025-08-21 19:04:09.740 | DEBUG    | app.services.dhan_client:get_pnl:584 - Created PnL model: totals=PnLTotals(realized=0.0, unrealized=571073.65, day=571073.65, currency='INR') per_symbol=[PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1727, avg=618.93, ltp=350.89, unrealized=-462910.91, today_pnl=-462910.91), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=167, avg=948.57, ltp=1180.57, unrealized=-38743.89, today_pnl=-38743.89), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=1347, avg=801.44, ltp=1940.3, unrealized=1534051.0, today_pnl=1534051.0), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=143, avg=1427.62, ltp=1335.14, unrealized=13225.1, today_pnl=13225.1), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=438, avg=1994.48, ltp=911.04, unrealized=-474547.65, today_pnl=-474547.65)] updated_at=datetime.datetime(2025, 8, 21, 19, 4, 9, 732915, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))) trading_day='2025-08-21'\n", "record": {"elapsed": {"repr": "0:02:51.448374", "seconds": 171.448374}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 584, "message": "Created PnL model: totals=PnLTotals(realized=0.0, unrealized=571073.65, day=571073.65, currency='INR') per_symbol=[PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1727, avg=618.93, ltp=350.89, unrealized=-462910.91, today_pnl=-462910.91), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=167, avg=948.57, ltp=1180.57, unrealized=-38743.89, today_pnl=-38743.89), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=1347, avg=801.44, ltp=1940.3, unrealized=1534051.0, today_pnl=1534051.0), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=143, avg=1427.62, ltp=1335.14, unrealized=13225.1, today_pnl=13225.1), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=438, avg=1994.48, ltp=911.04, unrealized=-474547.65, today_pnl=-474547.65)] updated_at=datetime.datetime(2025, 8, 21, 19, 4, 9, 732915, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))) trading_day='2025-08-21'", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:04:09.740916+05:30", "timestamp": 1755783249.740916}}}
{"text": "2025-08-21 19:04:09.742 | DEBUG    | app.services.dhan_client:get_pnl:585 - PnL model fields: {'totals': PnLTotals(realized=0.0, unrealized=571073.65, day=571073.65, currency='INR'), 'per_symbol': [PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1727, avg=618.93, ltp=350.89, unrealized=-462910.91, today_pnl=-462910.91), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=167, avg=948.57, ltp=1180.57, unrealized=-38743.89, today_pnl=-38743.89), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=1347, avg=801.44, ltp=1940.3, unrealized=1534051.0, today_pnl=1534051.0), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=143, avg=1427.62, ltp=1335.14, unrealized=13225.1, today_pnl=13225.1), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=438, avg=1994.48, ltp=911.04, unrealized=-474547.65, today_pnl=-474547.65)], 'updated_at': datetime.datetime(2025, 8, 21, 19, 4, 9, 732915, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))), 'trading_day': '2025-08-21'}\n", "record": {"elapsed": {"repr": "0:02:51.449611", "seconds": 171.449611}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 585, "message": "PnL model fields: {'totals': PnLTotals(realized=0.0, unrealized=571073.65, day=571073.65, currency='INR'), 'per_symbol': [PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1727, avg=618.93, ltp=350.89, unrealized=-462910.91, today_pnl=-462910.91), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=167, avg=948.57, ltp=1180.57, unrealized=-38743.89, today_pnl=-38743.89), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=1347, avg=801.44, ltp=1940.3, unrealized=1534051.0, today_pnl=1534051.0), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=143, avg=1427.62, ltp=1335.14, unrealized=13225.1, today_pnl=13225.1), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=438, avg=1994.48, ltp=911.04, unrealized=-474547.65, today_pnl=-474547.65)], 'updated_at': datetime.datetime(2025, 8, 21, 19, 4, 9, 732915, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))), 'trading_day': '2025-08-21'}", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:04:09.742153+05:30", "timestamp": 1755783249.742153}}}
{"text": "2025-08-21 19:04:09.743 | INFO     | app.services.dhan_client:get_pnl:587 - P&L calculation completed successfully: 5 symbols, unrealized=‚Çπ571073.65\n", "record": {"elapsed": {"repr": "0:02:51.450785", "seconds": 171.450785}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 587, "message": "P&L calculation completed successfully: 5 symbols, unrealized=‚Çπ571073.65", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:04:09.743327+05:30", "timestamp": 1755783249.743327}}}
{"text": "2025-08-21 19:04:09.744 | DEBUG    | app.ws.live:emit_delta:408 - Emitted pnl delta: seq=188\n", "record": {"elapsed": {"repr": "0:02:51.452412", "seconds": 171.452412}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "emit_delta", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 408, "message": "Emitted pnl delta: seq=188", "module": "live", "name": "app.ws.live", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:04:09.744954+05:30", "timestamp": 1755783249.744954}}}
{"text": "2025-08-21 19:04:09.745 | DEBUG    | app.ws.live:emit_delta:408 - Emitted positions delta: seq=189\n", "record": {"elapsed": {"repr": "0:02:51.453271", "seconds": 171.453271}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "emit_delta", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 408, "message": "Emitted positions delta: seq=189", "module": "live", "name": "app.ws.live", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:04:09.745813+05:30", "timestamp": 1755783249.745813}}}
{"text": "2025-08-21 19:04:10.926 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:02:52.633939", "seconds": 172.633939}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:04:10.926481+05:30", "timestamp": 1755783250.926481}}}
{"text": "2025-08-21 19:04:10.927 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:02:52.635047", "seconds": 172.635047}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:04:10.927589+05:30", "timestamp": 1755783250.927589}}}
{"text": "2025-08-21 19:04:10.928 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:02:52.635551", "seconds": 172.635551}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:04:10.928093+05:30", "timestamp": 1755783250.928093}}}
{"text": "2025-08-21 19:04:10.928 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:02:52.636042", "seconds": 172.636042}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:04:10.928584+05:30", "timestamp": 1755783250.928584}}}
{"text": "2025-08-21 19:04:10.929 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:02:52.636687", "seconds": 172.636687}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:04:10.929229+05:30", "timestamp": 1755783250.929229}}}
{"text": "2025-08-21 19:04:10.930 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:02:52.637865", "seconds": 172.637865}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:04:10.930407+05:30", "timestamp": 1755783250.930407}}}
{"text": "2025-08-21 19:04:10.931 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:02:52.638534", "seconds": 172.638534}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:04:10.931076+05:30", "timestamp": 1755783250.931076}}}
{"text": "2025-08-21 19:04:10.931 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:02:52.638957", "seconds": 172.638957}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:04:10.931499+05:30", "timestamp": 1755783250.931499}}}
{"text": "2025-08-21 19:04:10.931 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:02:52.639349", "seconds": 172.639349}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:04:10.931891+05:30", "timestamp": 1755783250.931891}}}
{"text": "2025-08-21 19:04:10.932 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:02:52.639771", "seconds": 172.639771}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:04:10.932313+05:30", "timestamp": 1755783250.932313}}}
{"text": "2025-08-21 19:04:11.455 | INFO     | app.services.dhan_client:get_pnl:489 - Starting accurate P&L calculation\n", "record": {"elapsed": {"repr": "0:02:53.163374", "seconds": 173.163374}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 489, "message": "Starting accurate P&L calculation", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:04:11.455916+05:30", "timestamp": 1755783251.455916}}}
{"text": "2025-08-21 19:04:11.456 | INFO     | app.services.dhan_client:get_pnl:491 - Fetched 5 positions\n", "record": {"elapsed": {"repr": "0:02:53.163992", "seconds": 173.163992}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 491, "message": "Fetched 5 positions", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:04:11.456534+05:30", "timestamp": 1755783251.456534}}}
{"text": "2025-08-21 19:04:11.457 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for RELIANCE: unrealized=-473154.49, today=-473154.49\n", "record": {"elapsed": {"repr": "0:02:53.164502", "seconds": 173.164502}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for RELIANCE: unrealized=-473154.49, today=-473154.49", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:04:11.457044+05:30", "timestamp": 1755783251.457044}}}
{"text": "2025-08-21 19:04:11.457 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for TCS: unrealized=-36925.49, today=-36925.49\n", "record": {"elapsed": {"repr": "0:02:53.164971", "seconds": 173.164971}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for TCS: unrealized=-36925.49, today=-36925.49", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:04:11.457513+05:30", "timestamp": 1755783251.457513}}}
{"text": "2025-08-21 19:04:11.457 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for HDFC: unrealized=1578242.72, today=1578242.72\n", "record": {"elapsed": {"repr": "0:02:53.165371", "seconds": 173.165371}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for HDFC: unrealized=1578242.72, today=1578242.72", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:04:11.457913+05:30", "timestamp": 1755783251.457913}}}
{"text": "2025-08-21 19:04:11.458 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for INFY: unrealized=11334.16, today=11334.16\n", "record": {"elapsed": {"repr": "0:02:53.165759", "seconds": 173.165759}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for INFY: unrealized=11334.16, today=11334.16", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:04:11.458301+05:30", "timestamp": 1755783251.458301}}}
{"text": "2025-08-21 19:04:11.458 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for ICICIBANK: unrealized=-472432.05, today=-472432.05\n", "record": {"elapsed": {"repr": "0:02:53.166158", "seconds": 173.166158}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for ICICIBANK: unrealized=-472432.05, today=-472432.05", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:04:11.458700+05:30", "timestamp": 1755783251.4587}}}
{"text": "2025-08-21 19:04:11.459 | INFO     | app.services.dhan_client:get_pnl:545 - Calculated totals - realized: 0.0, unrealized: 607064.85, day: 607064.85\n", "record": {"elapsed": {"repr": "0:02:53.166691", "seconds": 173.166691}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 545, "message": "Calculated totals - realized: 0.0, unrealized: 607064.85, day: 607064.85", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:04:11.459233+05:30", "timestamp": 1755783251.459233}}}
{"text": "2025-08-21 19:04:11.459 | DEBUG    | app.services.dhan_client:get_pnl:554 - PnL consistency check passed: drift=‚Çπ0.00\n", "record": {"elapsed": {"repr": "0:02:53.167164", "seconds": 173.167164}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 554, "message": "PnL consistency check passed: drift=‚Çπ0.00", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:04:11.459706+05:30", "timestamp": 1755783251.459706}}}
{"text": "2025-08-21 19:04:11.460 | DEBUG    | app.services.dhan_client:get_pnl:558 - Creating PnLTotals...\n", "record": {"elapsed": {"repr": "0:02:53.168116", "seconds": 173.168116}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 558, "message": "Creating PnLTotals...", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:04:11.460658+05:30", "timestamp": 1755783251.460658}}}
{"text": "2025-08-21 19:04:11.461 | DEBUG    | app.services.dhan_client:get_pnl:565 - PnLTotals created successfully\n", "record": {"elapsed": {"repr": "0:02:53.168684", "seconds": 173.168684}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 565, "message": "PnLTotals created successfully", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:04:11.461226+05:30", "timestamp": 1755783251.461226}}}
{"text": "2025-08-21 19:04:11.461 | DEBUG    | app.services.dhan_client:get_pnl:574 - Creating PnL model...\n", "record": {"elapsed": {"repr": "0:02:53.169173", "seconds": 173.169173}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 574, "message": "Creating PnL model...", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:04:11.461715+05:30", "timestamp": 1755783251.461715}}}
{"text": "2025-08-21 19:04:11.462 | DEBUG    | app.services.dhan_client:get_pnl:575 - Model fields: totals=<class 'app.models.schemas.PnLTotals'>, perSymbol=5, updated_at=2025-08-21 19:04:11.456971+05:30, trading_day=2025-08-21\n", "record": {"elapsed": {"repr": "0:02:53.169892", "seconds": 173.169892}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 575, "message": "Model fields: totals=<class 'app.models.schemas.PnLTotals'>, perSymbol=5, updated_at=2025-08-21 19:04:11.456971+05:30, trading_day=2025-08-21", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:04:11.462434+05:30", "timestamp": 1755783251.462434}}}
{"text": "2025-08-21 19:04:11.463 | DEBUG    | app.services.dhan_client:get_pnl:584 - Created PnL model: totals=PnLTotals(realized=0.0, unrealized=607064.85, day=607064.85, currency='INR') per_symbol=[PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1727, avg=618.93, ltp=344.96, unrealized=-473154.49, today_pnl=-473154.49), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=167, avg=948.57, ltp=1169.68, unrealized=-36925.49, today_pnl=-36925.49), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=1347, avg=801.44, ltp=1973.11, unrealized=1578242.72, today_pnl=1578242.72), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=143, avg=1427.62, ltp=1348.36, unrealized=11334.16, today_pnl=11334.16), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=438, avg=1994.48, ltp=915.87, unrealized=-472432.05, today_pnl=-472432.05)] updated_at=datetime.datetime(2025, 8, 21, 19, 4, 11, 456971, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))) trading_day='2025-08-21'\n", "record": {"elapsed": {"repr": "0:02:53.171252", "seconds": 173.171252}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 584, "message": "Created PnL model: totals=PnLTotals(realized=0.0, unrealized=607064.85, day=607064.85, currency='INR') per_symbol=[PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1727, avg=618.93, ltp=344.96, unrealized=-473154.49, today_pnl=-473154.49), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=167, avg=948.57, ltp=1169.68, unrealized=-36925.49, today_pnl=-36925.49), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=1347, avg=801.44, ltp=1973.11, unrealized=1578242.72, today_pnl=1578242.72), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=143, avg=1427.62, ltp=1348.36, unrealized=11334.16, today_pnl=11334.16), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=438, avg=1994.48, ltp=915.87, unrealized=-472432.05, today_pnl=-472432.05)] updated_at=datetime.datetime(2025, 8, 21, 19, 4, 11, 456971, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))) trading_day='2025-08-21'", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:04:11.463794+05:30", "timestamp": 1755783251.463794}}}
{"text": "2025-08-21 19:04:11.464 | DEBUG    | app.services.dhan_client:get_pnl:585 - PnL model fields: {'totals': PnLTotals(realized=0.0, unrealized=607064.85, day=607064.85, currency='INR'), 'per_symbol': [PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1727, avg=618.93, ltp=344.96, unrealized=-473154.49, today_pnl=-473154.49), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=167, avg=948.57, ltp=1169.68, unrealized=-36925.49, today_pnl=-36925.49), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=1347, avg=801.44, ltp=1973.11, unrealized=1578242.72, today_pnl=1578242.72), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=143, avg=1427.62, ltp=1348.36, unrealized=11334.16, today_pnl=11334.16), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=438, avg=1994.48, ltp=915.87, unrealized=-472432.05, today_pnl=-472432.05)], 'updated_at': datetime.datetime(2025, 8, 21, 19, 4, 11, 456971, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))), 'trading_day': '2025-08-21'}\n", "record": {"elapsed": {"repr": "0:02:53.172121", "seconds": 173.172121}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 585, "message": "PnL model fields: {'totals': PnLTotals(realized=0.0, unrealized=607064.85, day=607064.85, currency='INR'), 'per_symbol': [PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1727, avg=618.93, ltp=344.96, unrealized=-473154.49, today_pnl=-473154.49), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=167, avg=948.57, ltp=1169.68, unrealized=-36925.49, today_pnl=-36925.49), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=1347, avg=801.44, ltp=1973.11, unrealized=1578242.72, today_pnl=1578242.72), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=143, avg=1427.62, ltp=1348.36, unrealized=11334.16, today_pnl=11334.16), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=438, avg=1994.48, ltp=915.87, unrealized=-472432.05, today_pnl=-472432.05)], 'updated_at': datetime.datetime(2025, 8, 21, 19, 4, 11, 456971, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))), 'trading_day': '2025-08-21'}", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:04:11.464663+05:30", "timestamp": 1755783251.464663}}}
{"text": "2025-08-21 19:04:11.465 | INFO     | app.services.dhan_client:get_pnl:587 - P&L calculation completed successfully: 5 symbols, unrealized=‚Çπ607064.85\n", "record": {"elapsed": {"repr": "0:02:53.172676", "seconds": 173.172676}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 587, "message": "P&L calculation completed successfully: 5 symbols, unrealized=‚Çπ607064.85", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:04:11.465218+05:30", "timestamp": 1755783251.465218}}}
{"text": "2025-08-21 19:04:11.465 | DEBUG    | app.ws.live:emit_delta:408 - Emitted pnl delta: seq=190\n", "record": {"elapsed": {"repr": "0:02:53.173253", "seconds": 173.173253}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "emit_delta", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 408, "message": "Emitted pnl delta: seq=190", "module": "live", "name": "app.ws.live", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:04:11.465795+05:30", "timestamp": 1755783251.465795}}}
{"text": "2025-08-21 19:04:11.466 | DEBUG    | app.ws.live:emit_delta:408 - Emitted positions delta: seq=191\n", "record": {"elapsed": {"repr": "0:02:53.173879", "seconds": 173.173879}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "emit_delta", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 408, "message": "Emitted positions delta: seq=191", "module": "live", "name": "app.ws.live", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:04:11.466421+05:30", "timestamp": 1755783251.466421}}}
{"text": "2025-08-21 19:04:12.933 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:02:54.640648", "seconds": 174.640648}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:04:12.933190+05:30", "timestamp": 1755783252.93319}}}
{"text": "2025-08-21 19:04:12.934 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:02:54.641721", "seconds": 174.641721}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:04:12.934263+05:30", "timestamp": 1755783252.934263}}}
{"text": "2025-08-21 19:04:12.934 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:02:54.642408", "seconds": 174.642408}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:04:12.934950+05:30", "timestamp": 1755783252.93495}}}
{"text": "2025-08-21 19:04:12.935 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:02:54.642988", "seconds": 174.642988}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:04:12.935530+05:30", "timestamp": 1755783252.93553}}}
{"text": "2025-08-21 19:04:12.936 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:02:54.643525", "seconds": 174.643525}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:04:12.936067+05:30", "timestamp": 1755783252.936067}}}
{"text": "2025-08-21 19:04:12.936 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:02:54.644069", "seconds": 174.644069}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:04:12.936611+05:30", "timestamp": 1755783252.936611}}}
{"text": "2025-08-21 19:04:12.937 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:02:54.644769", "seconds": 174.644769}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:04:12.937311+05:30", "timestamp": 1755783252.937311}}}
{"text": "2025-08-21 19:04:12.938 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:02:54.645635", "seconds": 174.645635}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:04:12.938177+05:30", "timestamp": 1755783252.938177}}}
{"text": "2025-08-21 19:04:12.938 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:02:54.646383", "seconds": 174.646383}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:04:12.938925+05:30", "timestamp": 1755783252.938925}}}
{"text": "2025-08-21 19:04:12.939 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:02:54.646898", "seconds": 174.646898}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:04:12.939440+05:30", "timestamp": 1755783252.93944}}}
{"text": "2025-08-21 19:04:13.027 | INFO     | app.services.dhan_client:get_pnl:489 - Starting accurate P&L calculation\n", "record": {"elapsed": {"repr": "0:02:54.734613", "seconds": 174.734613}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 489, "message": "Starting accurate P&L calculation", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:04:13.027155+05:30", "timestamp": 1755783253.027155}}}
{"text": "2025-08-21 19:04:13.027 | INFO     | app.services.dhan_client:get_pnl:491 - Fetched 5 positions\n", "record": {"elapsed": {"repr": "0:02:54.735274", "seconds": 174.735274}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 491, "message": "Fetched 5 positions", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:04:13.027816+05:30", "timestamp": 1755783253.027816}}}
{"text": "2025-08-21 19:04:13.028 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for RELIANCE: unrealized=-474723.98, today=-474723.98\n", "record": {"elapsed": {"repr": "0:02:54.735948", "seconds": 174.735948}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for RELIANCE: unrealized=-474723.98, today=-474723.98", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:04:13.028490+05:30", "timestamp": 1755783253.02849}}}
{"text": "2025-08-21 19:04:13.029 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for TCS: unrealized=-38829.16, today=-38829.16\n", "record": {"elapsed": {"repr": "0:02:54.736847", "seconds": 174.736847}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for TCS: unrealized=-38829.16, today=-38829.16", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:04:13.029389+05:30", "timestamp": 1755783253.029389}}}
{"text": "2025-08-21 19:04:13.030 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for HDFC: unrealized=1623639.91, today=1623639.91\n", "record": {"elapsed": {"repr": "0:02:54.737567", "seconds": 174.737567}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for HDFC: unrealized=1623639.91, today=1623639.91", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:04:13.030109+05:30", "timestamp": 1755783253.030109}}}
{"text": "2025-08-21 19:04:13.030 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for INFY: unrealized=10706.1, today=10706.1\n", "record": {"elapsed": {"repr": "0:02:54.738155", "seconds": 174.738155}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for INFY: unrealized=10706.1, today=10706.1", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:04:13.030697+05:30", "timestamp": 1755783253.030697}}}
{"text": "2025-08-21 19:04:13.031 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for ICICIBANK: unrealized=-472124.36, today=-472124.36\n", "record": {"elapsed": {"repr": "0:02:54.738626", "seconds": 174.738626}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for ICICIBANK: unrealized=-472124.36, today=-472124.36", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:04:13.031168+05:30", "timestamp": 1755783253.031168}}}
{"text": "2025-08-21 19:04:13.031 | INFO     | app.services.dhan_client:get_pnl:545 - Calculated totals - realized: 0.0, unrealized: 648668.51, day: 648668.51\n", "record": {"elapsed": {"repr": "0:02:54.739068", "seconds": 174.739068}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 545, "message": "Calculated totals - realized: 0.0, unrealized: 648668.51, day: 648668.51", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:04:13.031610+05:30", "timestamp": 1755783253.03161}}}
{"text": "2025-08-21 19:04:13.032 | DEBUG    | app.services.dhan_client:get_pnl:554 - PnL consistency check passed: drift=‚Çπ0.00\n", "record": {"elapsed": {"repr": "0:02:54.739552", "seconds": 174.739552}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 554, "message": "PnL consistency check passed: drift=‚Çπ0.00", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:04:13.032094+05:30", "timestamp": 1755783253.032094}}}
{"text": "2025-08-21 19:04:13.032 | DEBUG    | app.services.dhan_client:get_pnl:558 - Creating PnLTotals...\n", "record": {"elapsed": {"repr": "0:02:54.739966", "seconds": 174.739966}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 558, "message": "Creating PnLTotals...", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:04:13.032508+05:30", "timestamp": 1755783253.032508}}}
{"text": "2025-08-21 19:04:13.033 | DEBUG    | app.services.dhan_client:get_pnl:565 - PnLTotals created successfully\n", "record": {"elapsed": {"repr": "0:02:54.740586", "seconds": 174.740586}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 565, "message": "PnLTotals created successfully", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:04:13.033128+05:30", "timestamp": 1755783253.033128}}}
{"text": "2025-08-21 19:04:13.033 | DEBUG    | app.services.dhan_client:get_pnl:574 - Creating PnL model...\n", "record": {"elapsed": {"repr": "0:02:54.741021", "seconds": 174.741021}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 574, "message": "Creating PnL model...", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:04:13.033563+05:30", "timestamp": 1755783253.033563}}}
{"text": "2025-08-21 19:04:13.034 | DEBUG    | app.services.dhan_client:get_pnl:575 - Model fields: totals=<class 'app.models.schemas.PnLTotals'>, perSymbol=5, updated_at=2025-08-21 19:04:13.028410+05:30, trading_day=2025-08-21\n", "record": {"elapsed": {"repr": "0:02:54.741964", "seconds": 174.741964}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 575, "message": "Model fields: totals=<class 'app.models.schemas.PnLTotals'>, perSymbol=5, updated_at=2025-08-21 19:04:13.028410+05:30, trading_day=2025-08-21", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:04:13.034506+05:30", "timestamp": 1755783253.034506}}}
{"text": "2025-08-21 19:04:13.035 | DEBUG    | app.services.dhan_client:get_pnl:584 - Created PnL model: totals=PnLTotals(realized=0.0, unrealized=648668.51, day=648668.51, currency='INR') per_symbol=[PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1727, avg=618.93, ltp=344.05, unrealized=-474723.98, today_pnl=-474723.98), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=167, avg=948.57, ltp=1181.08, unrealized=-38829.16, today_pnl=-38829.16), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=1347, avg=801.44, ltp=2006.81, unrealized=1623639.91, today_pnl=1623639.91), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=143, avg=1427.62, ltp=1352.75, unrealized=10706.1, today_pnl=10706.1), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=438, avg=1994.48, ltp=916.57, unrealized=-472124.36, today_pnl=-472124.36)] updated_at=datetime.datetime(2025, 8, 21, 19, 4, 13, 28410, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))) trading_day='2025-08-21'\n", "record": {"elapsed": {"repr": "0:02:54.742730", "seconds": 174.74273}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 584, "message": "Created PnL model: totals=PnLTotals(realized=0.0, unrealized=648668.51, day=648668.51, currency='INR') per_symbol=[PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1727, avg=618.93, ltp=344.05, unrealized=-474723.98, today_pnl=-474723.98), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=167, avg=948.57, ltp=1181.08, unrealized=-38829.16, today_pnl=-38829.16), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=1347, avg=801.44, ltp=2006.81, unrealized=1623639.91, today_pnl=1623639.91), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=143, avg=1427.62, ltp=1352.75, unrealized=10706.1, today_pnl=10706.1), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=438, avg=1994.48, ltp=916.57, unrealized=-472124.36, today_pnl=-472124.36)] updated_at=datetime.datetime(2025, 8, 21, 19, 4, 13, 28410, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))) trading_day='2025-08-21'", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:04:13.035272+05:30", "timestamp": 1755783253.035272}}}
{"text": "2025-08-21 19:04:13.035 | DEBUG    | app.services.dhan_client:get_pnl:585 - PnL model fields: {'totals': PnLTotals(realized=0.0, unrealized=648668.51, day=648668.51, currency='INR'), 'per_symbol': [PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1727, avg=618.93, ltp=344.05, unrealized=-474723.98, today_pnl=-474723.98), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=167, avg=948.57, ltp=1181.08, unrealized=-38829.16, today_pnl=-38829.16), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=1347, avg=801.44, ltp=2006.81, unrealized=1623639.91, today_pnl=1623639.91), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=143, avg=1427.62, ltp=1352.75, unrealized=10706.1, today_pnl=10706.1), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=438, avg=1994.48, ltp=916.57, unrealized=-472124.36, today_pnl=-472124.36)], 'updated_at': datetime.datetime(2025, 8, 21, 19, 4, 13, 28410, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))), 'trading_day': '2025-08-21'}\n", "record": {"elapsed": {"repr": "0:02:54.743388", "seconds": 174.743388}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 585, "message": "PnL model fields: {'totals': PnLTotals(realized=0.0, unrealized=648668.51, day=648668.51, currency='INR'), 'per_symbol': [PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1727, avg=618.93, ltp=344.05, unrealized=-474723.98, today_pnl=-474723.98), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=167, avg=948.57, ltp=1181.08, unrealized=-38829.16, today_pnl=-38829.16), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=1347, avg=801.44, ltp=2006.81, unrealized=1623639.91, today_pnl=1623639.91), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=143, avg=1427.62, ltp=1352.75, unrealized=10706.1, today_pnl=10706.1), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=438, avg=1994.48, ltp=916.57, unrealized=-472124.36, today_pnl=-472124.36)], 'updated_at': datetime.datetime(2025, 8, 21, 19, 4, 13, 28410, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))), 'trading_day': '2025-08-21'}", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:04:13.035930+05:30", "timestamp": 1755783253.03593}}}
{"text": "2025-08-21 19:04:13.036 | INFO     | app.services.dhan_client:get_pnl:587 - P&L calculation completed successfully: 5 symbols, unrealized=‚Çπ648668.51\n", "record": {"elapsed": {"repr": "0:02:54.744058", "seconds": 174.744058}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 587, "message": "P&L calculation completed successfully: 5 symbols, unrealized=‚Çπ648668.51", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:04:13.036600+05:30", "timestamp": 1755783253.0366}}}
{"text": "2025-08-21 19:04:13.037 | DEBUG    | app.ws.live:emit_delta:408 - Emitted pnl delta: seq=192\n", "record": {"elapsed": {"repr": "0:02:54.744912", "seconds": 174.744912}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "emit_delta", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 408, "message": "Emitted pnl delta: seq=192", "module": "live", "name": "app.ws.live", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:04:13.037454+05:30", "timestamp": 1755783253.037454}}}
{"text": "2025-08-21 19:04:13.038 | DEBUG    | app.ws.live:emit_delta:408 - Emitted positions delta: seq=193\n", "record": {"elapsed": {"repr": "0:02:54.746201", "seconds": 174.746201}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "emit_delta", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 408, "message": "Emitted positions delta: seq=193", "module": "live", "name": "app.ws.live", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:04:13.038743+05:30", "timestamp": 1755783253.038743}}}
{"text": "2025-08-21 19:04:14.223 | DEBUG    | app.ws.live:emit_delta:408 - Emitted holdings delta: seq=194\n", "record": {"elapsed": {"repr": "0:02:55.930574", "seconds": 175.930574}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "emit_delta", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 408, "message": "Emitted holdings delta: seq=194", "module": "live", "name": "app.ws.live", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:04:14.223116+05:30", "timestamp": 1755783254.223116}}}
{"text": "2025-08-21 19:04:14.885 | INFO     | app.services.dhan_client:get_pnl:489 - Starting accurate P&L calculation\n", "record": {"elapsed": {"repr": "0:02:56.592663", "seconds": 176.592663}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 489, "message": "Starting accurate P&L calculation", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:04:14.885205+05:30", "timestamp": 1755783254.885205}}}
{"text": "2025-08-21 19:04:14.886 | INFO     | app.services.dhan_client:get_pnl:491 - Fetched 5 positions\n", "record": {"elapsed": {"repr": "0:02:56.593551", "seconds": 176.593551}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 491, "message": "Fetched 5 positions", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:04:14.886093+05:30", "timestamp": 1755783254.886093}}}
{"text": "2025-08-21 19:04:14.887 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for RELIANCE: unrealized=-474723.98, today=-474723.98\n", "record": {"elapsed": {"repr": "0:02:56.594479", "seconds": 176.594479}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for RELIANCE: unrealized=-474723.98, today=-474723.98", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:04:14.887021+05:30", "timestamp": 1755783254.887021}}}
{"text": "2025-08-21 19:04:14.887 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for TCS: unrealized=-38829.16, today=-38829.16\n", "record": {"elapsed": {"repr": "0:02:56.594973", "seconds": 176.594973}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for TCS: unrealized=-38829.16, today=-38829.16", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:04:14.887515+05:30", "timestamp": 1755783254.887515}}}
{"text": "2025-08-21 19:04:14.888 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for HDFC: unrealized=1623639.91, today=1623639.91\n", "record": {"elapsed": {"repr": "0:02:56.595496", "seconds": 176.595496}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for HDFC: unrealized=1623639.91, today=1623639.91", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:04:14.888038+05:30", "timestamp": 1755783254.888038}}}
{"text": "2025-08-21 19:04:14.888 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for INFY: unrealized=10706.1, today=10706.1\n", "record": {"elapsed": {"repr": "0:02:56.596015", "seconds": 176.596015}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for INFY: unrealized=10706.1, today=10706.1", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:04:14.888557+05:30", "timestamp": 1755783254.888557}}}
{"text": "2025-08-21 19:04:14.889 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for ICICIBANK: unrealized=-472124.36, today=-472124.36\n", "record": {"elapsed": {"repr": "0:02:56.596536", "seconds": 176.596536}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for ICICIBANK: unrealized=-472124.36, today=-472124.36", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:04:14.889078+05:30", "timestamp": 1755783254.889078}}}
{"text": "2025-08-21 19:04:14.889 | INFO     | app.services.dhan_client:get_pnl:545 - Calculated totals - realized: 0.0, unrealized: 648668.51, day: 648668.51\n", "record": {"elapsed": {"repr": "0:02:56.597028", "seconds": 176.597028}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 545, "message": "Calculated totals - realized: 0.0, unrealized: 648668.51, day: 648668.51", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:04:14.889570+05:30", "timestamp": 1755783254.88957}}}
{"text": "2025-08-21 19:04:14.889 | DEBUG    | app.services.dhan_client:get_pnl:554 - PnL consistency check passed: drift=‚Çπ0.00\n", "record": {"elapsed": {"repr": "0:02:56.597454", "seconds": 176.597454}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 554, "message": "PnL consistency check passed: drift=‚Çπ0.00", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:04:14.889996+05:30", "timestamp": 1755783254.889996}}}
{"text": "2025-08-21 19:04:14.890 | DEBUG    | app.services.dhan_client:get_pnl:558 - Creating PnLTotals...\n", "record": {"elapsed": {"repr": "0:02:56.597983", "seconds": 176.597983}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 558, "message": "Creating PnLTotals...", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:04:14.890525+05:30", "timestamp": 1755783254.890525}}}
{"text": "2025-08-21 19:04:14.891 | DEBUG    | app.services.dhan_client:get_pnl:565 - PnLTotals created successfully\n", "record": {"elapsed": {"repr": "0:02:56.598705", "seconds": 176.598705}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 565, "message": "PnLTotals created successfully", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:04:14.891247+05:30", "timestamp": 1755783254.891247}}}
{"text": "2025-08-21 19:04:14.892 | DEBUG    | app.services.dhan_client:get_pnl:574 - Creating PnL model...\n", "record": {"elapsed": {"repr": "0:02:56.599620", "seconds": 176.59962}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 574, "message": "Creating PnL model...", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:04:14.892162+05:30", "timestamp": 1755783254.892162}}}
{"text": "2025-08-21 19:04:14.892 | DEBUG    | app.services.dhan_client:get_pnl:575 - Model fields: totals=<class 'app.models.schemas.PnLTotals'>, perSymbol=5, updated_at=2025-08-21 19:04:14.886950+05:30, trading_day=2025-08-21\n", "record": {"elapsed": {"repr": "0:02:56.600128", "seconds": 176.600128}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 575, "message": "Model fields: totals=<class 'app.models.schemas.PnLTotals'>, perSymbol=5, updated_at=2025-08-21 19:04:14.886950+05:30, trading_day=2025-08-21", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:04:14.892670+05:30", "timestamp": 1755783254.89267}}}
{"text": "2025-08-21 19:04:14.893 | DEBUG    | app.services.dhan_client:get_pnl:584 - Created PnL model: totals=PnLTotals(realized=0.0, unrealized=648668.51, day=648668.51, currency='INR') per_symbol=[PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1727, avg=618.93, ltp=344.05, unrealized=-474723.98, today_pnl=-474723.98), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=167, avg=948.57, ltp=1181.08, unrealized=-38829.16, today_pnl=-38829.16), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=1347, avg=801.44, ltp=2006.81, unrealized=1623639.91, today_pnl=1623639.91), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=143, avg=1427.62, ltp=1352.75, unrealized=10706.1, today_pnl=10706.1), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=438, avg=1994.48, ltp=916.57, unrealized=-472124.36, today_pnl=-472124.36)] updated_at=datetime.datetime(2025, 8, 21, 19, 4, 14, 886950, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))) trading_day='2025-08-21'\n", "record": {"elapsed": {"repr": "0:02:56.600847", "seconds": 176.600847}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 584, "message": "Created PnL model: totals=PnLTotals(realized=0.0, unrealized=648668.51, day=648668.51, currency='INR') per_symbol=[PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1727, avg=618.93, ltp=344.05, unrealized=-474723.98, today_pnl=-474723.98), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=167, avg=948.57, ltp=1181.08, unrealized=-38829.16, today_pnl=-38829.16), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=1347, avg=801.44, ltp=2006.81, unrealized=1623639.91, today_pnl=1623639.91), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=143, avg=1427.62, ltp=1352.75, unrealized=10706.1, today_pnl=10706.1), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=438, avg=1994.48, ltp=916.57, unrealized=-472124.36, today_pnl=-472124.36)] updated_at=datetime.datetime(2025, 8, 21, 19, 4, 14, 886950, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))) trading_day='2025-08-21'", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:04:14.893389+05:30", "timestamp": 1755783254.893389}}}
{"text": "2025-08-21 19:04:14.894 | DEBUG    | app.services.dhan_client:get_pnl:585 - PnL model fields: {'totals': PnLTotals(realized=0.0, unrealized=648668.51, day=648668.51, currency='INR'), 'per_symbol': [PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1727, avg=618.93, ltp=344.05, unrealized=-474723.98, today_pnl=-474723.98), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=167, avg=948.57, ltp=1181.08, unrealized=-38829.16, today_pnl=-38829.16), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=1347, avg=801.44, ltp=2006.81, unrealized=1623639.91, today_pnl=1623639.91), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=143, avg=1427.62, ltp=1352.75, unrealized=10706.1, today_pnl=10706.1), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=438, avg=1994.48, ltp=916.57, unrealized=-472124.36, today_pnl=-472124.36)], 'updated_at': datetime.datetime(2025, 8, 21, 19, 4, 14, 886950, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))), 'trading_day': '2025-08-21'}\n", "record": {"elapsed": {"repr": "0:02:56.601856", "seconds": 176.601856}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 585, "message": "PnL model fields: {'totals': PnLTotals(realized=0.0, unrealized=648668.51, day=648668.51, currency='INR'), 'per_symbol': [PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1727, avg=618.93, ltp=344.05, unrealized=-474723.98, today_pnl=-474723.98), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=167, avg=948.57, ltp=1181.08, unrealized=-38829.16, today_pnl=-38829.16), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=1347, avg=801.44, ltp=2006.81, unrealized=1623639.91, today_pnl=1623639.91), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=143, avg=1427.62, ltp=1352.75, unrealized=10706.1, today_pnl=10706.1), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=438, avg=1994.48, ltp=916.57, unrealized=-472124.36, today_pnl=-472124.36)], 'updated_at': datetime.datetime(2025, 8, 21, 19, 4, 14, 886950, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))), 'trading_day': '2025-08-21'}", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:04:14.894398+05:30", "timestamp": 1755783254.894398}}}
{"text": "2025-08-21 19:04:14.895 | INFO     | app.services.dhan_client:get_pnl:587 - P&L calculation completed successfully: 5 symbols, unrealized=‚Çπ648668.51\n", "record": {"elapsed": {"repr": "0:02:56.602919", "seconds": 176.602919}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 587, "message": "P&L calculation completed successfully: 5 symbols, unrealized=‚Çπ648668.51", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:04:14.895461+05:30", "timestamp": 1755783254.895461}}}
{"text": "2025-08-21 19:04:14.896 | DEBUG    | app.ws.live:emit_delta:408 - Emitted pnl delta: seq=195\n", "record": {"elapsed": {"repr": "0:02:56.603859", "seconds": 176.603859}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "emit_delta", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 408, "message": "Emitted pnl delta: seq=195", "module": "live", "name": "app.ws.live", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:04:14.896401+05:30", "timestamp": 1755783254.896401}}}
{"text": "2025-08-21 19:04:14.940 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:02:56.647667", "seconds": 176.647667}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:04:14.940209+05:30", "timestamp": 1755783254.940209}}}
{"text": "2025-08-21 19:04:14.941 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:02:56.648769", "seconds": 176.648769}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:04:14.941311+05:30", "timestamp": 1755783254.941311}}}
{"text": "2025-08-21 19:04:14.942 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:02:56.649764", "seconds": 176.649764}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:04:14.942306+05:30", "timestamp": 1755783254.942306}}}
{"text": "2025-08-21 19:04:14.942 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:02:56.650280", "seconds": 176.65028}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:04:14.942822+05:30", "timestamp": 1755783254.942822}}}
{"text": "2025-08-21 19:04:14.943 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:02:56.650771", "seconds": 176.650771}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:04:14.943313+05:30", "timestamp": 1755783254.943313}}}
{"text": "2025-08-21 19:04:14.943 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:02:56.651276", "seconds": 176.651276}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:04:14.943818+05:30", "timestamp": 1755783254.943818}}}
{"text": "2025-08-21 19:04:14.944 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:02:56.651974", "seconds": 176.651974}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:04:14.944516+05:30", "timestamp": 1755783254.944516}}}
{"text": "2025-08-21 19:04:14.945 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:02:56.652948", "seconds": 176.652948}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:04:14.945490+05:30", "timestamp": 1755783254.94549}}}
{"text": "2025-08-21 19:04:14.946 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:02:56.653633", "seconds": 176.653633}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:04:14.946175+05:30", "timestamp": 1755783254.946175}}}
{"text": "2025-08-21 19:04:14.946 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:02:56.654070", "seconds": 176.65407}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:04:14.946612+05:30", "timestamp": 1755783254.946612}}}
{"text": "2025-08-21 19:04:16.678 | INFO     | app.services.dhan_client:get_pnl:489 - Starting accurate P&L calculation\n", "record": {"elapsed": {"repr": "0:02:58.386319", "seconds": 178.386319}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 489, "message": "Starting accurate P&L calculation", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:04:16.678861+05:30", "timestamp": 1755783256.678861}}}
{"text": "2025-08-21 19:04:16.679 | INFO     | app.services.dhan_client:get_pnl:491 - Fetched 5 positions\n", "record": {"elapsed": {"repr": "0:02:58.386946", "seconds": 178.386946}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 491, "message": "Fetched 5 positions", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:04:16.679488+05:30", "timestamp": 1755783256.679488}}}
{"text": "2025-08-21 19:04:16.680 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for RELIANCE: unrealized=-480775.21, today=-480775.21\n", "record": {"elapsed": {"repr": "0:02:58.387462", "seconds": 178.387462}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for RELIANCE: unrealized=-480775.21, today=-480775.21", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:04:16.680004+05:30", "timestamp": 1755783256.680004}}}
{"text": "2025-08-21 19:04:16.680 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for TCS: unrealized=-41265.37, today=-41265.37\n", "record": {"elapsed": {"repr": "0:02:58.387851", "seconds": 178.387851}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for TCS: unrealized=-41265.37, today=-41265.37", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:04:16.680393+05:30", "timestamp": 1755783256.680393}}}
{"text": "2025-08-21 19:04:16.680 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for HDFC: unrealized=1661681.68, today=1661681.68\n", "record": {"elapsed": {"repr": "0:02:58.388286", "seconds": 178.388286}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for HDFC: unrealized=1661681.68, today=1661681.68", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:04:16.680828+05:30", "timestamp": 1755783256.680828}}}
{"text": "2025-08-21 19:04:16.681 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for INFY: unrealized=8715.78, today=8715.78\n", "record": {"elapsed": {"repr": "0:02:58.388710", "seconds": 178.38871}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for INFY: unrealized=8715.78, today=8715.78", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:04:16.681252+05:30", "timestamp": 1755783256.681252}}}
{"text": "2025-08-21 19:04:16.682 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for ICICIBANK: unrealized=-474264.41, today=-474264.41\n", "record": {"elapsed": {"repr": "0:02:58.389669", "seconds": 178.389669}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for ICICIBANK: unrealized=-474264.41, today=-474264.41", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:04:16.682211+05:30", "timestamp": 1755783256.682211}}}
{"text": "2025-08-21 19:04:16.682 | INFO     | app.services.dhan_client:get_pnl:545 - Calculated totals - realized: 0.0, unrealized: 674092.47, day: 674092.47\n", "record": {"elapsed": {"repr": "0:02:58.390297", "seconds": 178.390297}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 545, "message": "Calculated totals - realized: 0.0, unrealized: 674092.47, day: 674092.47", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:04:16.682839+05:30", "timestamp": 1755783256.682839}}}
{"text": "2025-08-21 19:04:16.683 | DEBUG    | app.services.dhan_client:get_pnl:554 - PnL consistency check passed: drift=‚Çπ0.00\n", "record": {"elapsed": {"repr": "0:02:58.390763", "seconds": 178.390763}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 554, "message": "PnL consistency check passed: drift=‚Çπ0.00", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:04:16.683305+05:30", "timestamp": 1755783256.683305}}}
{"text": "2025-08-21 19:04:16.683 | DEBUG    | app.services.dhan_client:get_pnl:558 - Creating PnLTotals...\n", "record": {"elapsed": {"repr": "0:02:58.391248", "seconds": 178.391248}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 558, "message": "Creating PnLTotals...", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:04:16.683790+05:30", "timestamp": 1755783256.68379}}}
{"text": "2025-08-21 19:04:16.684 | DEBUG    | app.services.dhan_client:get_pnl:565 - PnLTotals created successfully\n", "record": {"elapsed": {"repr": "0:02:58.391747", "seconds": 178.391747}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 565, "message": "PnLTotals created successfully", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:04:16.684289+05:30", "timestamp": 1755783256.684289}}}
{"text": "2025-08-21 19:04:16.684 | DEBUG    | app.services.dhan_client:get_pnl:574 - Creating PnL model...\n", "record": {"elapsed": {"repr": "0:02:58.392442", "seconds": 178.392442}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 574, "message": "Creating PnL model...", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:04:16.684984+05:30", "timestamp": 1755783256.684984}}}
{"text": "2025-08-21 19:04:16.685 | DEBUG    | app.services.dhan_client:get_pnl:575 - Model fields: totals=<class 'app.models.schemas.PnLTotals'>, perSymbol=5, updated_at=2025-08-21 19:04:16.679937+05:30, trading_day=2025-08-21\n", "record": {"elapsed": {"repr": "0:02:58.393154", "seconds": 178.393154}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 575, "message": "Model fields: totals=<class 'app.models.schemas.PnLTotals'>, perSymbol=5, updated_at=2025-08-21 19:04:16.679937+05:30, trading_day=2025-08-21", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:04:16.685696+05:30", "timestamp": 1755783256.685696}}}
{"text": "2025-08-21 19:04:16.686 | DEBUG    | app.services.dhan_client:get_pnl:584 - Created PnL model: totals=PnLTotals(realized=0.0, unrealized=674092.47, day=674092.47, currency='INR') per_symbol=[PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1727, avg=618.93, ltp=340.54, unrealized=-480775.21, today_pnl=-480775.21), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=167, avg=948.57, ltp=1195.67, unrealized=-41265.37, today_pnl=-41265.37), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=1347, avg=801.44, ltp=2035.06, unrealized=1661681.68, today_pnl=1661681.68), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=143, avg=1427.62, ltp=1366.67, unrealized=8715.78, today_pnl=8715.78), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=438, avg=1994.48, ltp=911.68, unrealized=-474264.41, today_pnl=-474264.41)] updated_at=datetime.datetime(2025, 8, 21, 19, 4, 16, 679937, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))) trading_day='2025-08-21'\n", "record": {"elapsed": {"repr": "0:02:58.394010", "seconds": 178.39401}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 584, "message": "Created PnL model: totals=PnLTotals(realized=0.0, unrealized=674092.47, day=674092.47, currency='INR') per_symbol=[PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1727, avg=618.93, ltp=340.54, unrealized=-480775.21, today_pnl=-480775.21), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=167, avg=948.57, ltp=1195.67, unrealized=-41265.37, today_pnl=-41265.37), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=1347, avg=801.44, ltp=2035.06, unrealized=1661681.68, today_pnl=1661681.68), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=143, avg=1427.62, ltp=1366.67, unrealized=8715.78, today_pnl=8715.78), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=438, avg=1994.48, ltp=911.68, unrealized=-474264.41, today_pnl=-474264.41)] updated_at=datetime.datetime(2025, 8, 21, 19, 4, 16, 679937, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))) trading_day='2025-08-21'", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:04:16.686552+05:30", "timestamp": 1755783256.686552}}}
{"text": "2025-08-21 19:04:16.687 | DEBUG    | app.services.dhan_client:get_pnl:585 - PnL model fields: {'totals': PnLTotals(realized=0.0, unrealized=674092.47, day=674092.47, currency='INR'), 'per_symbol': [PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1727, avg=618.93, ltp=340.54, unrealized=-480775.21, today_pnl=-480775.21), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=167, avg=948.57, ltp=1195.67, unrealized=-41265.37, today_pnl=-41265.37), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=1347, avg=801.44, ltp=2035.06, unrealized=1661681.68, today_pnl=1661681.68), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=143, avg=1427.62, ltp=1366.67, unrealized=8715.78, today_pnl=8715.78), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=438, avg=1994.48, ltp=911.68, unrealized=-474264.41, today_pnl=-474264.41)], 'updated_at': datetime.datetime(2025, 8, 21, 19, 4, 16, 679937, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))), 'trading_day': '2025-08-21'}\n", "record": {"elapsed": {"repr": "0:02:58.394718", "seconds": 178.394718}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 585, "message": "PnL model fields: {'totals': PnLTotals(realized=0.0, unrealized=674092.47, day=674092.47, currency='INR'), 'per_symbol': [PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1727, avg=618.93, ltp=340.54, unrealized=-480775.21, today_pnl=-480775.21), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=167, avg=948.57, ltp=1195.67, unrealized=-41265.37, today_pnl=-41265.37), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=1347, avg=801.44, ltp=2035.06, unrealized=1661681.68, today_pnl=1661681.68), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=143, avg=1427.62, ltp=1366.67, unrealized=8715.78, today_pnl=8715.78), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=438, avg=1994.48, ltp=911.68, unrealized=-474264.41, today_pnl=-474264.41)], 'updated_at': datetime.datetime(2025, 8, 21, 19, 4, 16, 679937, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))), 'trading_day': '2025-08-21'}", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:04:16.687260+05:30", "timestamp": 1755783256.68726}}}
{"text": "2025-08-21 19:04:16.687 | INFO     | app.services.dhan_client:get_pnl:587 - P&L calculation completed successfully: 5 symbols, unrealized=‚Çπ674092.47\n", "record": {"elapsed": {"repr": "0:02:58.395305", "seconds": 178.395305}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 587, "message": "P&L calculation completed successfully: 5 symbols, unrealized=‚Çπ674092.47", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:04:16.687847+05:30", "timestamp": 1755783256.687847}}}
{"text": "2025-08-21 19:04:16.688 | DEBUG    | app.ws.live:emit_delta:408 - Emitted pnl delta: seq=196\n", "record": {"elapsed": {"repr": "0:02:58.395889", "seconds": 178.395889}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "emit_delta", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 408, "message": "Emitted pnl delta: seq=196", "module": "live", "name": "app.ws.live", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:04:16.688431+05:30", "timestamp": 1755783256.688431}}}
{"text": "2025-08-21 19:04:16.689 | DEBUG    | app.ws.live:emit_delta:408 - Emitted positions delta: seq=197\n", "record": {"elapsed": {"repr": "0:02:58.396599", "seconds": 178.396599}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "emit_delta", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 408, "message": "Emitted positions delta: seq=197", "module": "live", "name": "app.ws.live", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:04:16.689141+05:30", "timestamp": 1755783256.689141}}}
{"text": "2025-08-21 19:04:16.947 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:02:58.654803", "seconds": 178.654803}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:04:16.947345+05:30", "timestamp": 1755783256.947345}}}
{"text": "2025-08-21 19:04:16.947 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:02:58.655454", "seconds": 178.655454}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:04:16.947996+05:30", "timestamp": 1755783256.947996}}}
{"text": "2025-08-21 19:04:16.948 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:02:58.656439", "seconds": 178.656439}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:04:16.948981+05:30", "timestamp": 1755783256.948981}}}
{"text": "2025-08-21 19:04:16.949 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:02:58.657011", "seconds": 178.657011}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:04:16.949553+05:30", "timestamp": 1755783256.949553}}}
{"text": "2025-08-21 19:04:16.950 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:02:58.657520", "seconds": 178.65752}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:04:16.950062+05:30", "timestamp": 1755783256.950062}}}
{"text": "2025-08-21 19:04:16.950 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:02:58.658090", "seconds": 178.65809}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:04:16.950632+05:30", "timestamp": 1755783256.950632}}}
{"text": "2025-08-21 19:04:16.951 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:02:58.658661", "seconds": 178.658661}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:04:16.951203+05:30", "timestamp": 1755783256.951203}}}
{"text": "2025-08-21 19:04:16.951 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:02:58.659277", "seconds": 178.659277}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:04:16.951819+05:30", "timestamp": 1755783256.951819}}}
{"text": "2025-08-21 19:04:16.952 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:02:58.660002", "seconds": 178.660002}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:04:16.952544+05:30", "timestamp": 1755783256.952544}}}
{"text": "2025-08-21 19:04:16.953 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:02:58.660770", "seconds": 178.66077}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:04:16.953312+05:30", "timestamp": 1755783256.953312}}}
{"text": "2025-08-21 19:04:18.363 | INFO     | app.services.dhan_client:get_pnl:489 - Starting accurate P&L calculation\n", "record": {"elapsed": {"repr": "0:03:00.071086", "seconds": 180.071086}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 489, "message": "Starting accurate P&L calculation", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:04:18.363628+05:30", "timestamp": 1755783258.363628}}}
{"text": "2025-08-21 19:04:18.364 | INFO     | app.services.dhan_client:get_pnl:491 - Fetched 5 positions\n", "record": {"elapsed": {"repr": "0:03:00.072208", "seconds": 180.072208}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 491, "message": "Fetched 5 positions", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:04:18.364750+05:30", "timestamp": 1755783258.36475}}}
{"text": "2025-08-21 19:04:18.365 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for RELIANCE: unrealized=-480973.28, today=-480973.28\n", "record": {"elapsed": {"repr": "0:03:00.072748", "seconds": 180.072748}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for RELIANCE: unrealized=-480973.28, today=-480973.28", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:04:18.365290+05:30", "timestamp": 1755783258.36529}}}
{"text": "2025-08-21 19:04:18.365 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for TCS: unrealized=-43073.27, today=-43073.27\n", "record": {"elapsed": {"repr": "0:03:00.073255", "seconds": 180.073255}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for TCS: unrealized=-43073.27, today=-43073.27", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:04:18.365797+05:30", "timestamp": 1755783258.365797}}}
{"text": "2025-08-21 19:04:18.366 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for HDFC: unrealized=1639009.03, today=1639009.03\n", "record": {"elapsed": {"repr": "0:03:00.073760", "seconds": 180.07376}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for HDFC: unrealized=1639009.03, today=1639009.03", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:04:18.366302+05:30", "timestamp": 1755783258.366302}}}
{"text": "2025-08-21 19:04:18.366 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for INFY: unrealized=11231.08, today=11231.08\n", "record": {"elapsed": {"repr": "0:03:00.074425", "seconds": 180.074425}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for INFY: unrealized=11231.08, today=11231.08", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:04:18.366967+05:30", "timestamp": 1755783258.366967}}}
{"text": "2025-08-21 19:04:18.367 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for ICICIBANK: unrealized=-469309.66, today=-469309.66\n", "record": {"elapsed": {"repr": "0:03:00.075165", "seconds": 180.075165}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for ICICIBANK: unrealized=-469309.66, today=-469309.66", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:04:18.367707+05:30", "timestamp": 1755783258.367707}}}
{"text": "2025-08-21 19:04:18.368 | INFO     | app.services.dhan_client:get_pnl:545 - Calculated totals - realized: 0.0, unrealized: 656883.9, day: 656883.9\n", "record": {"elapsed": {"repr": "0:03:00.075962", "seconds": 180.075962}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 545, "message": "Calculated totals - realized: 0.0, unrealized: 656883.9, day: 656883.9", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:04:18.368504+05:30", "timestamp": 1755783258.368504}}}
{"text": "2025-08-21 19:04:18.369 | DEBUG    | app.services.dhan_client:get_pnl:554 - PnL consistency check passed: drift=‚Çπ0.00\n", "record": {"elapsed": {"repr": "0:03:00.076500", "seconds": 180.0765}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 554, "message": "PnL consistency check passed: drift=‚Çπ0.00", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:04:18.369042+05:30", "timestamp": 1755783258.369042}}}
{"text": "2025-08-21 19:04:18.369 | DEBUG    | app.services.dhan_client:get_pnl:558 - Creating PnLTotals...\n", "record": {"elapsed": {"repr": "0:03:00.077011", "seconds": 180.077011}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 558, "message": "Creating PnLTotals...", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:04:18.369553+05:30", "timestamp": 1755783258.369553}}}
{"text": "2025-08-21 19:04:18.370 | DEBUG    | app.services.dhan_client:get_pnl:565 - PnLTotals created successfully\n", "record": {"elapsed": {"repr": "0:03:00.077602", "seconds": 180.077602}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 565, "message": "PnLTotals created successfully", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:04:18.370144+05:30", "timestamp": 1755783258.370144}}}
{"text": "2025-08-21 19:04:18.370 | DEBUG    | app.services.dhan_client:get_pnl:574 - Creating PnL model...\n", "record": {"elapsed": {"repr": "0:03:00.078105", "seconds": 180.078105}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 574, "message": "Creating PnL model...", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:04:18.370647+05:30", "timestamp": 1755783258.370647}}}
{"text": "2025-08-21 19:04:18.371 | DEBUG    | app.services.dhan_client:get_pnl:575 - Model fields: totals=<class 'app.models.schemas.PnLTotals'>, perSymbol=5, updated_at=2025-08-21 19:04:18.365201+05:30, trading_day=2025-08-21\n", "record": {"elapsed": {"repr": "0:03:00.078607", "seconds": 180.078607}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 575, "message": "Model fields: totals=<class 'app.models.schemas.PnLTotals'>, perSymbol=5, updated_at=2025-08-21 19:04:18.365201+05:30, trading_day=2025-08-21", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:04:18.371149+05:30", "timestamp": 1755783258.371149}}}
{"text": "2025-08-21 19:04:18.371 | DEBUG    | app.services.dhan_client:get_pnl:584 - Created PnL model: totals=PnLTotals(realized=0.0, unrealized=656883.9, day=656883.9, currency='INR') per_symbol=[PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1727, avg=618.93, ltp=340.43, unrealized=-480973.28, today_pnl=-480973.28), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=167, avg=948.57, ltp=1206.49, unrealized=-43073.27, today_pnl=-43073.27), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=1347, avg=801.44, ltp=2018.22, unrealized=1639009.03, today_pnl=1639009.03), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=143, avg=1427.62, ltp=1349.08, unrealized=11231.08, today_pnl=11231.08), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=438, avg=1994.48, ltp=923.0, unrealized=-469309.66, today_pnl=-469309.66)] updated_at=datetime.datetime(2025, 8, 21, 19, 4, 18, 365201, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))) trading_day='2025-08-21'\n", "record": {"elapsed": {"repr": "0:03:00.079371", "seconds": 180.079371}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 584, "message": "Created PnL model: totals=PnLTotals(realized=0.0, unrealized=656883.9, day=656883.9, currency='INR') per_symbol=[PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1727, avg=618.93, ltp=340.43, unrealized=-480973.28, today_pnl=-480973.28), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=167, avg=948.57, ltp=1206.49, unrealized=-43073.27, today_pnl=-43073.27), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=1347, avg=801.44, ltp=2018.22, unrealized=1639009.03, today_pnl=1639009.03), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=143, avg=1427.62, ltp=1349.08, unrealized=11231.08, today_pnl=11231.08), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=438, avg=1994.48, ltp=923.0, unrealized=-469309.66, today_pnl=-469309.66)] updated_at=datetime.datetime(2025, 8, 21, 19, 4, 18, 365201, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))) trading_day='2025-08-21'", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:04:18.371913+05:30", "timestamp": 1755783258.371913}}}
{"text": "2025-08-21 19:04:18.373 | DEBUG    | app.services.dhan_client:get_pnl:585 - PnL model fields: {'totals': PnLTotals(realized=0.0, unrealized=656883.9, day=656883.9, currency='INR'), 'per_symbol': [PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1727, avg=618.93, ltp=340.43, unrealized=-480973.28, today_pnl=-480973.28), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=167, avg=948.57, ltp=1206.49, unrealized=-43073.27, today_pnl=-43073.27), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=1347, avg=801.44, ltp=2018.22, unrealized=1639009.03, today_pnl=1639009.03), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=143, avg=1427.62, ltp=1349.08, unrealized=11231.08, today_pnl=11231.08), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=438, avg=1994.48, ltp=923.0, unrealized=-469309.66, today_pnl=-469309.66)], 'updated_at': datetime.datetime(2025, 8, 21, 19, 4, 18, 365201, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))), 'trading_day': '2025-08-21'}\n", "record": {"elapsed": {"repr": "0:03:00.080593", "seconds": 180.080593}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 585, "message": "PnL model fields: {'totals': PnLTotals(realized=0.0, unrealized=656883.9, day=656883.9, currency='INR'), 'per_symbol': [PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1727, avg=618.93, ltp=340.43, unrealized=-480973.28, today_pnl=-480973.28), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=167, avg=948.57, ltp=1206.49, unrealized=-43073.27, today_pnl=-43073.27), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=1347, avg=801.44, ltp=2018.22, unrealized=1639009.03, today_pnl=1639009.03), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=143, avg=1427.62, ltp=1349.08, unrealized=11231.08, today_pnl=11231.08), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=438, avg=1994.48, ltp=923.0, unrealized=-469309.66, today_pnl=-469309.66)], 'updated_at': datetime.datetime(2025, 8, 21, 19, 4, 18, 365201, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))), 'trading_day': '2025-08-21'}", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:04:18.373135+05:30", "timestamp": 1755783258.373135}}}
{"text": "2025-08-21 19:04:18.373 | INFO     | app.services.dhan_client:get_pnl:587 - P&L calculation completed successfully: 5 symbols, unrealized=‚Çπ656883.90\n", "record": {"elapsed": {"repr": "0:03:00.081378", "seconds": 180.081378}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 587, "message": "P&L calculation completed successfully: 5 symbols, unrealized=‚Çπ656883.90", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:04:18.373920+05:30", "timestamp": 1755783258.37392}}}
{"text": "2025-08-21 19:04:18.375 | DEBUG    | app.ws.live:emit_delta:408 - Emitted pnl delta: seq=198\n", "record": {"elapsed": {"repr": "0:03:00.082566", "seconds": 180.082566}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "emit_delta", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 408, "message": "Emitted pnl delta: seq=198", "module": "live", "name": "app.ws.live", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:04:18.375108+05:30", "timestamp": 1755783258.375108}}}
{"text": "2025-08-21 19:04:18.376 | DEBUG    | app.ws.live:emit_delta:408 - Emitted positions delta: seq=199\n", "record": {"elapsed": {"repr": "0:03:00.083892", "seconds": 180.083892}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "emit_delta", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 408, "message": "Emitted positions delta: seq=199", "module": "live", "name": "app.ws.live", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:04:18.376434+05:30", "timestamp": 1755783258.376434}}}
{"text": "2025-08-21 19:04:18.954 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:03:00.661896", "seconds": 180.661896}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:04:18.954438+05:30", "timestamp": 1755783258.954438}}}
{"text": "2025-08-21 19:04:18.955 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:03:00.662570", "seconds": 180.66257}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:04:18.955112+05:30", "timestamp": 1755783258.955112}}}
{"text": "2025-08-21 19:04:18.955 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:03:00.663224", "seconds": 180.663224}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:04:18.955766+05:30", "timestamp": 1755783258.955766}}}
{"text": "2025-08-21 19:04:18.956 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:03:00.664035", "seconds": 180.664035}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:04:18.956577+05:30", "timestamp": 1755783258.956577}}}
{"text": "2025-08-21 19:04:18.957 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:03:00.664495", "seconds": 180.664495}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:04:18.957037+05:30", "timestamp": 1755783258.957037}}}
{"text": "2025-08-21 19:04:18.957 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:03:00.664977", "seconds": 180.664977}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:04:18.957519+05:30", "timestamp": 1755783258.957519}}}
{"text": "2025-08-21 19:04:18.957 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:03:00.665384", "seconds": 180.665384}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:04:18.957926+05:30", "timestamp": 1755783258.957926}}}
{"text": "2025-08-21 19:04:18.958 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:03:00.665921", "seconds": 180.665921}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:04:18.958463+05:30", "timestamp": 1755783258.958463}}}
{"text": "2025-08-21 19:04:18.959 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:03:00.666722", "seconds": 180.666722}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:04:18.959264+05:30", "timestamp": 1755783258.959264}}}
{"text": "2025-08-21 19:04:18.960 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:03:00.667485", "seconds": 180.667485}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:04:18.960027+05:30", "timestamp": 1755783258.960027}}}
{"text": "2025-08-21 19:04:19.901 | INFO     | app.services.dhan_client:get_pnl:489 - Starting accurate P&L calculation\n", "record": {"elapsed": {"repr": "0:03:01.608556", "seconds": 181.608556}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 489, "message": "Starting accurate P&L calculation", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:04:19.901098+05:30", "timestamp": 1755783259.901098}}}
{"text": "2025-08-21 19:04:19.901 | INFO     | app.services.dhan_client:get_pnl:491 - Fetched 5 positions\n", "record": {"elapsed": {"repr": "0:03:01.609178", "seconds": 181.609178}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 491, "message": "Fetched 5 positions", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:04:19.901720+05:30", "timestamp": 1755783259.90172}}}
{"text": "2025-08-21 19:04:19.902 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for RELIANCE: unrealized=-479877.19, today=-479877.19\n", "record": {"elapsed": {"repr": "0:03:01.609628", "seconds": 181.609628}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for RELIANCE: unrealized=-479877.19, today=-479877.19", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:04:19.902170+05:30", "timestamp": 1755783259.90217}}}
{"text": "2025-08-21 19:04:19.902 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for TCS: unrealized=-43900.68, today=-43900.68\n", "record": {"elapsed": {"repr": "0:03:01.610236", "seconds": 181.610236}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for TCS: unrealized=-43900.68, today=-43900.68", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:04:19.902778+05:30", "timestamp": 1755783259.902778}}}
{"text": "2025-08-21 19:04:19.903 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for HDFC: unrealized=1676337.48, today=1676337.48\n", "record": {"elapsed": {"repr": "0:03:01.610864", "seconds": 181.610864}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for HDFC: unrealized=1676337.48, today=1676337.48", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:04:19.903406+05:30", "timestamp": 1755783259.903406}}}
{"text": "2025-08-21 19:04:19.903 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for INFY: unrealized=14531.14, today=14531.14\n", "record": {"elapsed": {"repr": "0:03:01.611406", "seconds": 181.611406}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for INFY: unrealized=14531.14, today=14531.14", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:04:19.903948+05:30", "timestamp": 1755783259.903948}}}
{"text": "2025-08-21 19:04:19.904 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for ICICIBANK: unrealized=-475727.31, today=-475727.31\n", "record": {"elapsed": {"repr": "0:03:01.612032", "seconds": 181.612032}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for ICICIBANK: unrealized=-475727.31, today=-475727.31", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:04:19.904574+05:30", "timestamp": 1755783259.904574}}}
{"text": "2025-08-21 19:04:19.905 | INFO     | app.services.dhan_client:get_pnl:545 - Calculated totals - realized: 0.0, unrealized: 691363.44, day: 691363.44\n", "record": {"elapsed": {"repr": "0:03:01.612905", "seconds": 181.612905}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 545, "message": "Calculated totals - realized: 0.0, unrealized: 691363.44, day: 691363.44", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:04:19.905447+05:30", "timestamp": 1755783259.905447}}}
{"text": "2025-08-21 19:04:19.906 | DEBUG    | app.services.dhan_client:get_pnl:554 - PnL consistency check passed: drift=‚Çπ0.00\n", "record": {"elapsed": {"repr": "0:03:01.613553", "seconds": 181.613553}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 554, "message": "PnL consistency check passed: drift=‚Çπ0.00", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:04:19.906095+05:30", "timestamp": 1755783259.906095}}}
{"text": "2025-08-21 19:04:19.906 | DEBUG    | app.services.dhan_client:get_pnl:558 - Creating PnLTotals...\n", "record": {"elapsed": {"repr": "0:03:01.614151", "seconds": 181.614151}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 558, "message": "Creating PnLTotals...", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:04:19.906693+05:30", "timestamp": 1755783259.906693}}}
{"text": "2025-08-21 19:04:19.907 | DEBUG    | app.services.dhan_client:get_pnl:565 - PnLTotals created successfully\n", "record": {"elapsed": {"repr": "0:03:01.614701", "seconds": 181.614701}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 565, "message": "PnLTotals created successfully", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:04:19.907243+05:30", "timestamp": 1755783259.907243}}}
{"text": "2025-08-21 19:04:19.907 | DEBUG    | app.services.dhan_client:get_pnl:574 - Creating PnL model...\n", "record": {"elapsed": {"repr": "0:03:01.615274", "seconds": 181.615274}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 574, "message": "Creating PnL model...", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:04:19.907816+05:30", "timestamp": 1755783259.907816}}}
{"text": "2025-08-21 19:04:19.908 | DEBUG    | app.services.dhan_client:get_pnl:575 - Model fields: totals=<class 'app.models.schemas.PnLTotals'>, perSymbol=5, updated_at=2025-08-21 19:04:19.902113+05:30, trading_day=2025-08-21\n", "record": {"elapsed": {"repr": "0:03:01.616070", "seconds": 181.61607}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 575, "message": "Model fields: totals=<class 'app.models.schemas.PnLTotals'>, perSymbol=5, updated_at=2025-08-21 19:04:19.902113+05:30, trading_day=2025-08-21", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:04:19.908612+05:30", "timestamp": 1755783259.908612}}}
{"text": "2025-08-21 19:04:19.909 | DEBUG    | app.services.dhan_client:get_pnl:584 - Created PnL model: totals=PnLTotals(realized=0.0, unrealized=691363.44, day=691363.44, currency='INR') per_symbol=[PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1727, avg=618.93, ltp=341.06, unrealized=-479877.19, today_pnl=-479877.19), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=167, avg=948.57, ltp=1211.45, unrealized=-43900.68, today_pnl=-43900.68), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=1347, avg=801.44, ltp=2045.94, unrealized=1676337.48, today_pnl=1676337.48), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=143, avg=1427.62, ltp=1326.0, unrealized=14531.14, today_pnl=14531.14), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=438, avg=1994.48, ltp=908.34, unrealized=-475727.31, today_pnl=-475727.31)] updated_at=datetime.datetime(2025, 8, 21, 19, 4, 19, 902113, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))) trading_day='2025-08-21'\n", "record": {"elapsed": {"repr": "0:03:01.617065", "seconds": 181.617065}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 584, "message": "Created PnL model: totals=PnLTotals(realized=0.0, unrealized=691363.44, day=691363.44, currency='INR') per_symbol=[PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1727, avg=618.93, ltp=341.06, unrealized=-479877.19, today_pnl=-479877.19), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=167, avg=948.57, ltp=1211.45, unrealized=-43900.68, today_pnl=-43900.68), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=1347, avg=801.44, ltp=2045.94, unrealized=1676337.48, today_pnl=1676337.48), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=143, avg=1427.62, ltp=1326.0, unrealized=14531.14, today_pnl=14531.14), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=438, avg=1994.48, ltp=908.34, unrealized=-475727.31, today_pnl=-475727.31)] updated_at=datetime.datetime(2025, 8, 21, 19, 4, 19, 902113, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))) trading_day='2025-08-21'", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:04:19.909607+05:30", "timestamp": 1755783259.909607}}}
{"text": "2025-08-21 19:04:19.910 | DEBUG    | app.services.dhan_client:get_pnl:585 - PnL model fields: {'totals': PnLTotals(realized=0.0, unrealized=691363.44, day=691363.44, currency='INR'), 'per_symbol': [PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1727, avg=618.93, ltp=341.06, unrealized=-479877.19, today_pnl=-479877.19), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=167, avg=948.57, ltp=1211.45, unrealized=-43900.68, today_pnl=-43900.68), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=1347, avg=801.44, ltp=2045.94, unrealized=1676337.48, today_pnl=1676337.48), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=143, avg=1427.62, ltp=1326.0, unrealized=14531.14, today_pnl=14531.14), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=438, avg=1994.48, ltp=908.34, unrealized=-475727.31, today_pnl=-475727.31)], 'updated_at': datetime.datetime(2025, 8, 21, 19, 4, 19, 902113, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))), 'trading_day': '2025-08-21'}\n", "record": {"elapsed": {"repr": "0:03:01.618059", "seconds": 181.618059}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 585, "message": "PnL model fields: {'totals': PnLTotals(realized=0.0, unrealized=691363.44, day=691363.44, currency='INR'), 'per_symbol': [PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1727, avg=618.93, ltp=341.06, unrealized=-479877.19, today_pnl=-479877.19), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=167, avg=948.57, ltp=1211.45, unrealized=-43900.68, today_pnl=-43900.68), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=1347, avg=801.44, ltp=2045.94, unrealized=1676337.48, today_pnl=1676337.48), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=143, avg=1427.62, ltp=1326.0, unrealized=14531.14, today_pnl=14531.14), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=438, avg=1994.48, ltp=908.34, unrealized=-475727.31, today_pnl=-475727.31)], 'updated_at': datetime.datetime(2025, 8, 21, 19, 4, 19, 902113, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))), 'trading_day': '2025-08-21'}", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:04:19.910601+05:30", "timestamp": 1755783259.910601}}}
{"text": "2025-08-21 19:04:19.911 | INFO     | app.services.dhan_client:get_pnl:587 - P&L calculation completed successfully: 5 symbols, unrealized=‚Çπ691363.44\n", "record": {"elapsed": {"repr": "0:03:01.618897", "seconds": 181.618897}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 587, "message": "P&L calculation completed successfully: 5 symbols, unrealized=‚Çπ691363.44", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:04:19.911439+05:30", "timestamp": 1755783259.911439}}}
{"text": "2025-08-21 19:04:19.912 | DEBUG    | app.ws.live:emit_delta:408 - Emitted pnl delta: seq=200\n", "record": {"elapsed": {"repr": "0:03:01.619601", "seconds": 181.619601}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "emit_delta", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 408, "message": "Emitted pnl delta: seq=200", "module": "live", "name": "app.ws.live", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:04:19.912143+05:30", "timestamp": 1755783259.912143}}}
{"text": "2025-08-21 19:04:19.912 | DEBUG    | app.ws.live:emit_delta:408 - Emitted positions delta: seq=201\n", "record": {"elapsed": {"repr": "0:03:01.620337", "seconds": 181.620337}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "emit_delta", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 408, "message": "Emitted positions delta: seq=201", "module": "live", "name": "app.ws.live", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:04:19.912879+05:30", "timestamp": 1755783259.912879}}}
{"text": "2025-08-21 19:04:20.961 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:03:02.668587", "seconds": 182.668587}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:04:20.961129+05:30", "timestamp": 1755783260.961129}}}
{"text": "2025-08-21 19:04:20.961 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:03:02.669341", "seconds": 182.669341}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:04:20.961883+05:30", "timestamp": 1755783260.961883}}}
{"text": "2025-08-21 19:04:20.962 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:03:02.669854", "seconds": 182.669854}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:04:20.962396+05:30", "timestamp": 1755783260.962396}}}
{"text": "2025-08-21 19:04:20.963 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:03:02.670634", "seconds": 182.670634}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:04:20.963176+05:30", "timestamp": 1755783260.963176}}}
{"text": "2025-08-21 19:04:20.963 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:03:02.671350", "seconds": 182.67135}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:04:20.963892+05:30", "timestamp": 1755783260.963892}}}
{"text": "2025-08-21 19:04:20.964 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:03:02.671755", "seconds": 182.671755}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:04:20.964297+05:30", "timestamp": 1755783260.964297}}}
{"text": "2025-08-21 19:04:20.964 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:03:02.672231", "seconds": 182.672231}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:04:20.964773+05:30", "timestamp": 1755783260.964773}}}
{"text": "2025-08-21 19:04:20.965 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:03:02.672661", "seconds": 182.672661}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:04:20.965203+05:30", "timestamp": 1755783260.965203}}}
{"text": "2025-08-21 19:04:20.965 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:03:02.673258", "seconds": 182.673258}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:04:20.965800+05:30", "timestamp": 1755783260.9658}}}
{"text": "2025-08-21 19:04:20.966 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:03:02.673844", "seconds": 182.673844}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:04:20.966386+05:30", "timestamp": 1755783260.966386}}}
{"text": "2025-08-21 19:04:21.700 | INFO     | app.services.dhan_client:get_pnl:489 - Starting accurate P&L calculation\n", "record": {"elapsed": {"repr": "0:03:03.408455", "seconds": 183.408455}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 489, "message": "Starting accurate P&L calculation", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:04:21.700997+05:30", "timestamp": 1755783261.700997}}}
{"text": "2025-08-21 19:04:21.701 | INFO     | app.services.dhan_client:get_pnl:491 - Fetched 5 positions\n", "record": {"elapsed": {"repr": "0:03:03.409125", "seconds": 183.409125}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 491, "message": "Fetched 5 positions", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:04:21.701667+05:30", "timestamp": 1755783261.701667}}}
{"text": "2025-08-21 19:04:21.702 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for RELIANCE: unrealized=-488888.83, today=-488888.83\n", "record": {"elapsed": {"repr": "0:03:03.409568", "seconds": 183.409568}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for RELIANCE: unrealized=-488888.83, today=-488888.83", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:04:21.702110+05:30", "timestamp": 1755783261.70211}}}
{"text": "2025-08-21 19:04:21.702 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for TCS: unrealized=-47287.84, today=-47287.84\n", "record": {"elapsed": {"repr": "0:03:03.410015", "seconds": 183.410015}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for TCS: unrealized=-47287.84, today=-47287.84", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:04:21.702557+05:30", "timestamp": 1755783261.702557}}}
{"text": "2025-08-21 19:04:21.703 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for HDFC: unrealized=1697199.91, today=1697199.91\n", "record": {"elapsed": {"repr": "0:03:03.410572", "seconds": 183.410572}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for HDFC: unrealized=1697199.91, today=1697199.91", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:04:21.703114+05:30", "timestamp": 1755783261.703114}}}
{"text": "2025-08-21 19:04:21.703 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for INFY: unrealized=12003.79, today=12003.79\n", "record": {"elapsed": {"repr": "0:03:03.411073", "seconds": 183.411073}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for INFY: unrealized=12003.79, today=12003.79", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:04:21.703615+05:30", "timestamp": 1755783261.703615}}}
{"text": "2025-08-21 19:04:21.704 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for ICICIBANK: unrealized=-477566.72, today=-477566.72\n", "record": {"elapsed": {"repr": "0:03:03.411768", "seconds": 183.411768}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for ICICIBANK: unrealized=-477566.72, today=-477566.72", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:04:21.704310+05:30", "timestamp": 1755783261.70431}}}
{"text": "2025-08-21 19:04:21.705 | INFO     | app.services.dhan_client:get_pnl:545 - Calculated totals - realized: 0.0, unrealized: 695460.31, day: 695460.31\n", "record": {"elapsed": {"repr": "0:03:03.412490", "seconds": 183.41249}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 545, "message": "Calculated totals - realized: 0.0, unrealized: 695460.31, day: 695460.31", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:04:21.705032+05:30", "timestamp": 1755783261.705032}}}
{"text": "2025-08-21 19:04:21.705 | DEBUG    | app.services.dhan_client:get_pnl:554 - PnL consistency check passed: drift=‚Çπ0.00\n", "record": {"elapsed": {"repr": "0:03:03.412958", "seconds": 183.412958}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 554, "message": "PnL consistency check passed: drift=‚Çπ0.00", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:04:21.705500+05:30", "timestamp": 1755783261.7055}}}
{"text": "2025-08-21 19:04:21.705 | DEBUG    | app.services.dhan_client:get_pnl:558 - Creating PnLTotals...\n", "record": {"elapsed": {"repr": "0:03:03.413428", "seconds": 183.413428}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 558, "message": "Creating PnLTotals...", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:04:21.705970+05:30", "timestamp": 1755783261.70597}}}
{"text": "2025-08-21 19:04:21.706 | DEBUG    | app.services.dhan_client:get_pnl:565 - PnLTotals created successfully\n", "record": {"elapsed": {"repr": "0:03:03.413936", "seconds": 183.413936}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 565, "message": "PnLTotals created successfully", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:04:21.706478+05:30", "timestamp": 1755783261.706478}}}
{"text": "2025-08-21 19:04:21.707 | DEBUG    | app.services.dhan_client:get_pnl:574 - Creating PnL model...\n", "record": {"elapsed": {"repr": "0:03:03.414620", "seconds": 183.41462}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 574, "message": "Creating PnL model...", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:04:21.707162+05:30", "timestamp": 1755783261.707162}}}
{"text": "2025-08-21 19:04:21.707 | DEBUG    | app.services.dhan_client:get_pnl:575 - Model fields: totals=<class 'app.models.schemas.PnLTotals'>, perSymbol=5, updated_at=2025-08-21 19:04:21.702058+05:30, trading_day=2025-08-21\n", "record": {"elapsed": {"repr": "0:03:03.415316", "seconds": 183.415316}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 575, "message": "Model fields: totals=<class 'app.models.schemas.PnLTotals'>, perSymbol=5, updated_at=2025-08-21 19:04:21.702058+05:30, trading_day=2025-08-21", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:04:21.707858+05:30", "timestamp": 1755783261.707858}}}
{"text": "2025-08-21 19:04:21.708 | DEBUG    | app.services.dhan_client:get_pnl:584 - Created PnL model: totals=PnLTotals(realized=0.0, unrealized=695460.31, day=695460.31, currency='INR') per_symbol=[PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1727, avg=618.93, ltp=335.84, unrealized=-488888.83, today_pnl=-488888.83), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=167, avg=948.57, ltp=1231.73, unrealized=-47287.84, today_pnl=-47287.84), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=1347, avg=801.44, ltp=2061.43, unrealized=1697199.91, today_pnl=1697199.91), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=143, avg=1427.62, ltp=1343.68, unrealized=12003.79, today_pnl=12003.79), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=438, avg=1994.48, ltp=904.15, unrealized=-477566.72, today_pnl=-477566.72)] updated_at=datetime.datetime(2025, 8, 21, 19, 4, 21, 702058, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))) trading_day='2025-08-21'\n", "record": {"elapsed": {"repr": "0:03:03.416225", "seconds": 183.416225}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 584, "message": "Created PnL model: totals=PnLTotals(realized=0.0, unrealized=695460.31, day=695460.31, currency='INR') per_symbol=[PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1727, avg=618.93, ltp=335.84, unrealized=-488888.83, today_pnl=-488888.83), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=167, avg=948.57, ltp=1231.73, unrealized=-47287.84, today_pnl=-47287.84), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=1347, avg=801.44, ltp=2061.43, unrealized=1697199.91, today_pnl=1697199.91), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=143, avg=1427.62, ltp=1343.68, unrealized=12003.79, today_pnl=12003.79), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=438, avg=1994.48, ltp=904.15, unrealized=-477566.72, today_pnl=-477566.72)] updated_at=datetime.datetime(2025, 8, 21, 19, 4, 21, 702058, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))) trading_day='2025-08-21'", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:04:21.708767+05:30", "timestamp": 1755783261.708767}}}
{"text": "2025-08-21 19:04:21.709 | DEBUG    | app.services.dhan_client:get_pnl:585 - PnL model fields: {'totals': PnLTotals(realized=0.0, unrealized=695460.31, day=695460.31, currency='INR'), 'per_symbol': [PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1727, avg=618.93, ltp=335.84, unrealized=-488888.83, today_pnl=-488888.83), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=167, avg=948.57, ltp=1231.73, unrealized=-47287.84, today_pnl=-47287.84), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=1347, avg=801.44, ltp=2061.43, unrealized=1697199.91, today_pnl=1697199.91), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=143, avg=1427.62, ltp=1343.68, unrealized=12003.79, today_pnl=12003.79), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=438, avg=1994.48, ltp=904.15, unrealized=-477566.72, today_pnl=-477566.72)], 'updated_at': datetime.datetime(2025, 8, 21, 19, 4, 21, 702058, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))), 'trading_day': '2025-08-21'}\n", "record": {"elapsed": {"repr": "0:03:03.416975", "seconds": 183.416975}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 585, "message": "PnL model fields: {'totals': PnLTotals(realized=0.0, unrealized=695460.31, day=695460.31, currency='INR'), 'per_symbol': [PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1727, avg=618.93, ltp=335.84, unrealized=-488888.83, today_pnl=-488888.83), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=167, avg=948.57, ltp=1231.73, unrealized=-47287.84, today_pnl=-47287.84), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=1347, avg=801.44, ltp=2061.43, unrealized=1697199.91, today_pnl=1697199.91), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=143, avg=1427.62, ltp=1343.68, unrealized=12003.79, today_pnl=12003.79), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=438, avg=1994.48, ltp=904.15, unrealized=-477566.72, today_pnl=-477566.72)], 'updated_at': datetime.datetime(2025, 8, 21, 19, 4, 21, 702058, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))), 'trading_day': '2025-08-21'}", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:04:21.709517+05:30", "timestamp": 1755783261.709517}}}
{"text": "2025-08-21 19:04:21.710 | INFO     | app.services.dhan_client:get_pnl:587 - P&L calculation completed successfully: 5 symbols, unrealized=‚Çπ695460.31\n", "record": {"elapsed": {"repr": "0:03:03.417525", "seconds": 183.417525}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 587, "message": "P&L calculation completed successfully: 5 symbols, unrealized=‚Çπ695460.31", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:04:21.710067+05:30", "timestamp": 1755783261.710067}}}
{"text": "2025-08-21 19:04:21.710 | DEBUG    | app.ws.live:emit_delta:408 - Emitted pnl delta: seq=202\n", "record": {"elapsed": {"repr": "0:03:03.418194", "seconds": 183.418194}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "emit_delta", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 408, "message": "Emitted pnl delta: seq=202", "module": "live", "name": "app.ws.live", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:04:21.710736+05:30", "timestamp": 1755783261.710736}}}
{"text": "2025-08-21 19:04:21.711 | DEBUG    | app.ws.live:emit_delta:408 - Emitted positions delta: seq=203\n", "record": {"elapsed": {"repr": "0:03:03.418910", "seconds": 183.41891}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "emit_delta", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 408, "message": "Emitted positions delta: seq=203", "module": "live", "name": "app.ws.live", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:04:21.711452+05:30", "timestamp": 1755783261.711452}}}
{"text": "2025-08-21 19:04:22.967 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:03:04.675261", "seconds": 184.675261}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:04:22.967803+05:30", "timestamp": 1755783262.967803}}}
{"text": "2025-08-21 19:04:22.968 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:03:04.675929", "seconds": 184.675929}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:04:22.968471+05:30", "timestamp": 1755783262.968471}}}
{"text": "2025-08-21 19:04:22.969 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:03:04.676475", "seconds": 184.676475}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:04:22.969017+05:30", "timestamp": 1755783262.969017}}}
{"text": "2025-08-21 19:04:22.969 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:03:04.677075", "seconds": 184.677075}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:04:22.969617+05:30", "timestamp": 1755783262.969617}}}
{"text": "2025-08-21 19:04:22.970 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:03:04.678006", "seconds": 184.678006}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:04:22.970548+05:30", "timestamp": 1755783262.970548}}}
{"text": "2025-08-21 19:04:22.971 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:03:04.678505", "seconds": 184.678505}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:04:22.971047+05:30", "timestamp": 1755783262.971047}}}
{"text": "2025-08-21 19:04:22.971 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:03:04.678958", "seconds": 184.678958}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:04:22.971500+05:30", "timestamp": 1755783262.9715}}}
{"text": "2025-08-21 19:04:22.972 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:03:04.679489", "seconds": 184.679489}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:04:22.972031+05:30", "timestamp": 1755783262.972031}}}
{"text": "2025-08-21 19:04:22.972 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:03:04.680076", "seconds": 184.680076}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:04:22.972618+05:30", "timestamp": 1755783262.972618}}}
{"text": "2025-08-21 19:04:22.973 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:03:04.680764", "seconds": 184.680764}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:04:22.973306+05:30", "timestamp": 1755783262.973306}}}
{"text": "2025-08-21 19:04:23.398 | INFO     | app.services.dhan_client:get_pnl:489 - Starting accurate P&L calculation\n", "record": {"elapsed": {"repr": "0:03:05.105671", "seconds": 185.105671}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 489, "message": "Starting accurate P&L calculation", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:04:23.398213+05:30", "timestamp": 1755783263.398213}}}
{"text": "2025-08-21 19:04:23.399 | INFO     | app.services.dhan_client:get_pnl:491 - Fetched 5 positions\n", "record": {"elapsed": {"repr": "0:03:05.106511", "seconds": 185.106511}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 491, "message": "Fetched 5 positions", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:04:23.399053+05:30", "timestamp": 1755783263.399053}}}
{"text": "2025-08-21 19:04:23.399 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for RELIANCE: unrealized=-478588.2, today=-478588.2\n", "record": {"elapsed": {"repr": "0:03:05.107034", "seconds": 185.107034}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for RELIANCE: unrealized=-478588.2, today=-478588.2", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:04:23.399576+05:30", "timestamp": 1755783263.399576}}}
{"text": "2025-08-21 19:04:23.399 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for TCS: unrealized=-48865.58, today=-48865.58\n", "record": {"elapsed": {"repr": "0:03:05.107416", "seconds": 185.107416}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for TCS: unrealized=-48865.58, today=-48865.58", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:04:23.399958+05:30", "timestamp": 1755783263.399958}}}
{"text": "2025-08-21 19:04:23.400 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for HDFC: unrealized=1659211.0, today=1659211.0\n", "record": {"elapsed": {"repr": "0:03:05.107753", "seconds": 185.107753}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for HDFC: unrealized=1659211.0, today=1659211.0", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:04:23.400295+05:30", "timestamp": 1755783263.400295}}}
{"text": "2025-08-21 19:04:23.400 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for INFY: unrealized=14204.89, today=14204.89\n", "record": {"elapsed": {"repr": "0:03:05.108126", "seconds": 185.108126}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for INFY: unrealized=14204.89, today=14204.89", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:04:23.400668+05:30", "timestamp": 1755783263.400668}}}
{"text": "2025-08-21 19:04:23.401 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for ICICIBANK: unrealized=-480749.93, today=-480749.93\n", "record": {"elapsed": {"repr": "0:03:05.108575", "seconds": 185.108575}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for ICICIBANK: unrealized=-480749.93, today=-480749.93", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:04:23.401117+05:30", "timestamp": 1755783263.401117}}}
{"text": "2025-08-21 19:04:23.401 | INFO     | app.services.dhan_client:get_pnl:545 - Calculated totals - realized: 0.0, unrealized: 665212.18, day: 665212.18\n", "record": {"elapsed": {"repr": "0:03:05.109005", "seconds": 185.109005}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 545, "message": "Calculated totals - realized: 0.0, unrealized: 665212.18, day: 665212.18", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:04:23.401547+05:30", "timestamp": 1755783263.401547}}}
{"text": "2025-08-21 19:04:23.402 | DEBUG    | app.services.dhan_client:get_pnl:554 - PnL consistency check passed: drift=‚Çπ0.00\n", "record": {"elapsed": {"repr": "0:03:05.109592", "seconds": 185.109592}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 554, "message": "PnL consistency check passed: drift=‚Çπ0.00", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:04:23.402134+05:30", "timestamp": 1755783263.402134}}}
{"text": "2025-08-21 19:04:23.402 | DEBUG    | app.services.dhan_client:get_pnl:558 - Creating PnLTotals...\n", "record": {"elapsed": {"repr": "0:03:05.110036", "seconds": 185.110036}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 558, "message": "Creating PnLTotals...", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:04:23.402578+05:30", "timestamp": 1755783263.402578}}}
{"text": "2025-08-21 19:04:23.403 | DEBUG    | app.services.dhan_client:get_pnl:565 - PnLTotals created successfully\n", "record": {"elapsed": {"repr": "0:03:05.110965", "seconds": 185.110965}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 565, "message": "PnLTotals created successfully", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:04:23.403507+05:30", "timestamp": 1755783263.403507}}}
{"text": "2025-08-21 19:04:23.404 | DEBUG    | app.services.dhan_client:get_pnl:574 - Creating PnL model...\n", "record": {"elapsed": {"repr": "0:03:05.111533", "seconds": 185.111533}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 574, "message": "Creating PnL model...", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:04:23.404075+05:30", "timestamp": 1755783263.404075}}}
{"text": "2025-08-21 19:04:23.404 | DEBUG    | app.services.dhan_client:get_pnl:575 - Model fields: totals=<class 'app.models.schemas.PnLTotals'>, perSymbol=5, updated_at=2025-08-21 19:04:23.399520+05:30, trading_day=2025-08-21\n", "record": {"elapsed": {"repr": "0:03:05.111931", "seconds": 185.111931}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 575, "message": "Model fields: totals=<class 'app.models.schemas.PnLTotals'>, perSymbol=5, updated_at=2025-08-21 19:04:23.399520+05:30, trading_day=2025-08-21", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:04:23.404473+05:30", "timestamp": 1755783263.404473}}}
{"text": "2025-08-21 19:04:23.404 | DEBUG    | app.services.dhan_client:get_pnl:584 - Created PnL model: totals=PnLTotals(realized=0.0, unrealized=665212.18, day=665212.18, currency='INR') per_symbol=[PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1727, avg=618.93, ltp=341.81, unrealized=-478588.2, today_pnl=-478588.2), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=167, avg=948.57, ltp=1241.18, unrealized=-48865.58, today_pnl=-48865.58), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=1347, avg=801.44, ltp=2033.22, unrealized=1659211.0, today_pnl=1659211.0), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=143, avg=1427.62, ltp=1328.29, unrealized=14204.89, today_pnl=14204.89), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=438, avg=1994.48, ltp=896.88, unrealized=-480749.93, today_pnl=-480749.93)] updated_at=datetime.datetime(2025, 8, 21, 19, 4, 23, 399520, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))) trading_day='2025-08-21'\n", "record": {"elapsed": {"repr": "0:03:05.112446", "seconds": 185.112446}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 584, "message": "Created PnL model: totals=PnLTotals(realized=0.0, unrealized=665212.18, day=665212.18, currency='INR') per_symbol=[PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1727, avg=618.93, ltp=341.81, unrealized=-478588.2, today_pnl=-478588.2), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=167, avg=948.57, ltp=1241.18, unrealized=-48865.58, today_pnl=-48865.58), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=1347, avg=801.44, ltp=2033.22, unrealized=1659211.0, today_pnl=1659211.0), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=143, avg=1427.62, ltp=1328.29, unrealized=14204.89, today_pnl=14204.89), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=438, avg=1994.48, ltp=896.88, unrealized=-480749.93, today_pnl=-480749.93)] updated_at=datetime.datetime(2025, 8, 21, 19, 4, 23, 399520, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))) trading_day='2025-08-21'", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:04:23.404988+05:30", "timestamp": 1755783263.404988}}}
{"text": "2025-08-21 19:04:23.405 | DEBUG    | app.services.dhan_client:get_pnl:585 - PnL model fields: {'totals': PnLTotals(realized=0.0, unrealized=665212.18, day=665212.18, currency='INR'), 'per_symbol': [PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1727, avg=618.93, ltp=341.81, unrealized=-478588.2, today_pnl=-478588.2), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=167, avg=948.57, ltp=1241.18, unrealized=-48865.58, today_pnl=-48865.58), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=1347, avg=801.44, ltp=2033.22, unrealized=1659211.0, today_pnl=1659211.0), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=143, avg=1427.62, ltp=1328.29, unrealized=14204.89, today_pnl=14204.89), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=438, avg=1994.48, ltp=896.88, unrealized=-480749.93, today_pnl=-480749.93)], 'updated_at': datetime.datetime(2025, 8, 21, 19, 4, 23, 399520, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))), 'trading_day': '2025-08-21'}\n", "record": {"elapsed": {"repr": "0:03:05.113151", "seconds": 185.113151}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 585, "message": "PnL model fields: {'totals': PnLTotals(realized=0.0, unrealized=665212.18, day=665212.18, currency='INR'), 'per_symbol': [PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1727, avg=618.93, ltp=341.81, unrealized=-478588.2, today_pnl=-478588.2), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=167, avg=948.57, ltp=1241.18, unrealized=-48865.58, today_pnl=-48865.58), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=1347, avg=801.44, ltp=2033.22, unrealized=1659211.0, today_pnl=1659211.0), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=143, avg=1427.62, ltp=1328.29, unrealized=14204.89, today_pnl=14204.89), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=438, avg=1994.48, ltp=896.88, unrealized=-480749.93, today_pnl=-480749.93)], 'updated_at': datetime.datetime(2025, 8, 21, 19, 4, 23, 399520, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))), 'trading_day': '2025-08-21'}", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:04:23.405693+05:30", "timestamp": 1755783263.405693}}}
{"text": "2025-08-21 19:04:23.406 | INFO     | app.services.dhan_client:get_pnl:587 - P&L calculation completed successfully: 5 symbols, unrealized=‚Çπ665212.18\n", "record": {"elapsed": {"repr": "0:03:05.113835", "seconds": 185.113835}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 587, "message": "P&L calculation completed successfully: 5 symbols, unrealized=‚Çπ665212.18", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:04:23.406377+05:30", "timestamp": 1755783263.406377}}}
{"text": "2025-08-21 19:04:23.407 | DEBUG    | app.ws.live:emit_delta:408 - Emitted pnl delta: seq=204\n", "record": {"elapsed": {"repr": "0:03:05.114668", "seconds": 185.114668}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "emit_delta", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 408, "message": "Emitted pnl delta: seq=204", "module": "live", "name": "app.ws.live", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:04:23.407210+05:30", "timestamp": 1755783263.40721}}}
{"text": "2025-08-21 19:04:23.408 | DEBUG    | app.ws.live:emit_delta:408 - Emitted positions delta: seq=205\n", "record": {"elapsed": {"repr": "0:03:05.115779", "seconds": 185.115779}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "emit_delta", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 408, "message": "Emitted positions delta: seq=205", "module": "live", "name": "app.ws.live", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:04:23.408321+05:30", "timestamp": 1755783263.408321}}}
{"text": "2025-08-21 19:04:24.946 | INFO     | app.services.dhan_client:get_pnl:489 - Starting accurate P&L calculation\n", "record": {"elapsed": {"repr": "0:03:06.653693", "seconds": 186.653693}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 489, "message": "Starting accurate P&L calculation", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:04:24.946235+05:30", "timestamp": 1755783264.946235}}}
{"text": "2025-08-21 19:04:24.946 | INFO     | app.services.dhan_client:get_pnl:491 - Fetched 5 positions\n", "record": {"elapsed": {"repr": "0:03:06.654409", "seconds": 186.654409}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 491, "message": "Fetched 5 positions", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:04:24.946951+05:30", "timestamp": 1755783264.946951}}}
{"text": "2025-08-21 19:04:24.947 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for RELIANCE: unrealized=-478588.2, today=-478588.2\n", "record": {"elapsed": {"repr": "0:03:06.655307", "seconds": 186.655307}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for RELIANCE: unrealized=-478588.2, today=-478588.2", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:04:24.947849+05:30", "timestamp": 1755783264.947849}}}
{"text": "2025-08-21 19:04:24.948 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for TCS: unrealized=-48865.58, today=-48865.58\n", "record": {"elapsed": {"repr": "0:03:06.656012", "seconds": 186.656012}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for TCS: unrealized=-48865.58, today=-48865.58", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:04:24.948554+05:30", "timestamp": 1755783264.948554}}}
{"text": "2025-08-21 19:04:24.948 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for HDFC: unrealized=1659211.0, today=1659211.0\n", "record": {"elapsed": {"repr": "0:03:06.656447", "seconds": 186.656447}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for HDFC: unrealized=1659211.0, today=1659211.0", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:04:24.948989+05:30", "timestamp": 1755783264.948989}}}
{"text": "2025-08-21 19:04:24.949 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for INFY: unrealized=14204.89, today=14204.89\n", "record": {"elapsed": {"repr": "0:03:06.656906", "seconds": 186.656906}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for INFY: unrealized=14204.89, today=14204.89", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:04:24.949448+05:30", "timestamp": 1755783264.949448}}}
{"text": "2025-08-21 19:04:24.949 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for ICICIBANK: unrealized=-480749.93, today=-480749.93\n", "record": {"elapsed": {"repr": "0:03:06.657397", "seconds": 186.657397}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for ICICIBANK: unrealized=-480749.93, today=-480749.93", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:04:24.949939+05:30", "timestamp": 1755783264.949939}}}
{"text": "2025-08-21 19:04:24.950 | INFO     | app.services.dhan_client:get_pnl:545 - Calculated totals - realized: 0.0, unrealized: 665212.18, day: 665212.18\n", "record": {"elapsed": {"repr": "0:03:06.657862", "seconds": 186.657862}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 545, "message": "Calculated totals - realized: 0.0, unrealized: 665212.18, day: 665212.18", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:04:24.950404+05:30", "timestamp": 1755783264.950404}}}
{"text": "2025-08-21 19:04:24.950 | DEBUG    | app.services.dhan_client:get_pnl:554 - PnL consistency check passed: drift=‚Çπ0.00\n", "record": {"elapsed": {"repr": "0:03:06.658325", "seconds": 186.658325}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 554, "message": "PnL consistency check passed: drift=‚Çπ0.00", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:04:24.950867+05:30", "timestamp": 1755783264.950867}}}
{"text": "2025-08-21 19:04:24.951 | DEBUG    | app.services.dhan_client:get_pnl:558 - Creating PnLTotals...\n", "record": {"elapsed": {"repr": "0:03:06.658796", "seconds": 186.658796}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 558, "message": "Creating PnLTotals...", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:04:24.951338+05:30", "timestamp": 1755783264.951338}}}
{"text": "2025-08-21 19:04:24.951 | DEBUG    | app.services.dhan_client:get_pnl:565 - PnLTotals created successfully\n", "record": {"elapsed": {"repr": "0:03:06.659332", "seconds": 186.659332}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 565, "message": "PnLTotals created successfully", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:04:24.951874+05:30", "timestamp": 1755783264.951874}}}
{"text": "2025-08-21 19:04:24.952 | DEBUG    | app.services.dhan_client:get_pnl:574 - Creating PnL model...\n", "record": {"elapsed": {"repr": "0:03:06.660393", "seconds": 186.660393}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 574, "message": "Creating PnL model...", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:04:24.952935+05:30", "timestamp": 1755783264.952935}}}
{"text": "2025-08-21 19:04:24.953 | DEBUG    | app.services.dhan_client:get_pnl:575 - Model fields: totals=<class 'app.models.schemas.PnLTotals'>, perSymbol=5, updated_at=2025-08-21 19:04:24.947739+05:30, trading_day=2025-08-21\n", "record": {"elapsed": {"repr": "0:03:06.660886", "seconds": 186.660886}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 575, "message": "Model fields: totals=<class 'app.models.schemas.PnLTotals'>, perSymbol=5, updated_at=2025-08-21 19:04:24.947739+05:30, trading_day=2025-08-21", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:04:24.953428+05:30", "timestamp": 1755783264.953428}}}
{"text": "2025-08-21 19:04:24.954 | DEBUG    | app.services.dhan_client:get_pnl:584 - Created PnL model: totals=PnLTotals(realized=0.0, unrealized=665212.18, day=665212.18, currency='INR') per_symbol=[PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1727, avg=618.93, ltp=341.81, unrealized=-478588.2, today_pnl=-478588.2), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=167, avg=948.57, ltp=1241.18, unrealized=-48865.58, today_pnl=-48865.58), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=1347, avg=801.44, ltp=2033.22, unrealized=1659211.0, today_pnl=1659211.0), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=143, avg=1427.62, ltp=1328.29, unrealized=14204.89, today_pnl=14204.89), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=438, avg=1994.48, ltp=896.88, unrealized=-480749.93, today_pnl=-480749.93)] updated_at=datetime.datetime(2025, 8, 21, 19, 4, 24, 947739, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))) trading_day='2025-08-21'\n", "record": {"elapsed": {"repr": "0:03:06.661529", "seconds": 186.661529}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 584, "message": "Created PnL model: totals=PnLTotals(realized=0.0, unrealized=665212.18, day=665212.18, currency='INR') per_symbol=[PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1727, avg=618.93, ltp=341.81, unrealized=-478588.2, today_pnl=-478588.2), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=167, avg=948.57, ltp=1241.18, unrealized=-48865.58, today_pnl=-48865.58), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=1347, avg=801.44, ltp=2033.22, unrealized=1659211.0, today_pnl=1659211.0), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=143, avg=1427.62, ltp=1328.29, unrealized=14204.89, today_pnl=14204.89), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=438, avg=1994.48, ltp=896.88, unrealized=-480749.93, today_pnl=-480749.93)] updated_at=datetime.datetime(2025, 8, 21, 19, 4, 24, 947739, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))) trading_day='2025-08-21'", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:04:24.954071+05:30", "timestamp": 1755783264.954071}}}
{"text": "2025-08-21 19:04:24.954 | DEBUG    | app.services.dhan_client:get_pnl:585 - PnL model fields: {'totals': PnLTotals(realized=0.0, unrealized=665212.18, day=665212.18, currency='INR'), 'per_symbol': [PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1727, avg=618.93, ltp=341.81, unrealized=-478588.2, today_pnl=-478588.2), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=167, avg=948.57, ltp=1241.18, unrealized=-48865.58, today_pnl=-48865.58), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=1347, avg=801.44, ltp=2033.22, unrealized=1659211.0, today_pnl=1659211.0), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=143, avg=1427.62, ltp=1328.29, unrealized=14204.89, today_pnl=14204.89), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=438, avg=1994.48, ltp=896.88, unrealized=-480749.93, today_pnl=-480749.93)], 'updated_at': datetime.datetime(2025, 8, 21, 19, 4, 24, 947739, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))), 'trading_day': '2025-08-21'}\n", "record": {"elapsed": {"repr": "0:03:06.662413", "seconds": 186.662413}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 585, "message": "PnL model fields: {'totals': PnLTotals(realized=0.0, unrealized=665212.18, day=665212.18, currency='INR'), 'per_symbol': [PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1727, avg=618.93, ltp=341.81, unrealized=-478588.2, today_pnl=-478588.2), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=167, avg=948.57, ltp=1241.18, unrealized=-48865.58, today_pnl=-48865.58), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=1347, avg=801.44, ltp=2033.22, unrealized=1659211.0, today_pnl=1659211.0), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=143, avg=1427.62, ltp=1328.29, unrealized=14204.89, today_pnl=14204.89), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=438, avg=1994.48, ltp=896.88, unrealized=-480749.93, today_pnl=-480749.93)], 'updated_at': datetime.datetime(2025, 8, 21, 19, 4, 24, 947739, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))), 'trading_day': '2025-08-21'}", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:04:24.954955+05:30", "timestamp": 1755783264.954955}}}
{"text": "2025-08-21 19:04:24.955 | INFO     | app.services.dhan_client:get_pnl:587 - P&L calculation completed successfully: 5 symbols, unrealized=‚Çπ665212.18\n", "record": {"elapsed": {"repr": "0:03:06.663456", "seconds": 186.663456}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 587, "message": "P&L calculation completed successfully: 5 symbols, unrealized=‚Çπ665212.18", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:04:24.955998+05:30", "timestamp": 1755783264.955998}}}
{"text": "2025-08-21 19:04:24.956 | DEBUG    | app.ws.live:emit_delta:408 - Emitted pnl delta: seq=206\n", "record": {"elapsed": {"repr": "0:03:06.664411", "seconds": 186.664411}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "emit_delta", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 408, "message": "Emitted pnl delta: seq=206", "module": "live", "name": "app.ws.live", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:04:24.956953+05:30", "timestamp": 1755783264.956953}}}
{"text": "2025-08-21 19:04:24.974 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:03:06.682138", "seconds": 186.682138}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:04:24.974680+05:30", "timestamp": 1755783264.97468}}}
{"text": "2025-08-21 19:04:24.975 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:03:06.682633", "seconds": 186.682633}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:04:24.975175+05:30", "timestamp": 1755783264.975175}}}
{"text": "2025-08-21 19:04:24.975 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:03:06.683090", "seconds": 186.68309}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:04:24.975632+05:30", "timestamp": 1755783264.975632}}}
{"text": "2025-08-21 19:04:24.976 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:03:06.683546", "seconds": 186.683546}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:04:24.976088+05:30", "timestamp": 1755783264.976088}}}
{"text": "2025-08-21 19:04:24.976 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:03:06.684106", "seconds": 186.684106}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:04:24.976648+05:30", "timestamp": 1755783264.976648}}}
{"text": "2025-08-21 19:04:24.977 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:03:06.684791", "seconds": 186.684791}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:04:24.977333+05:30", "timestamp": 1755783264.977333}}}
{"text": "2025-08-21 19:04:24.978 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:03:06.685618", "seconds": 186.685618}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:04:24.978160+05:30", "timestamp": 1755783264.97816}}}
{"text": "2025-08-21 19:04:24.978 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:03:06.686058", "seconds": 186.686058}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:04:24.978600+05:30", "timestamp": 1755783264.9786}}}
{"text": "2025-08-21 19:04:24.979 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:03:06.686498", "seconds": 186.686498}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:04:24.979040+05:30", "timestamp": 1755783264.97904}}}
{"text": "2025-08-21 19:04:24.979 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:03:06.686930", "seconds": 186.68693}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:04:24.979472+05:30", "timestamp": 1755783264.979472}}}
{"text": "2025-08-21 19:04:26.772 | INFO     | app.services.dhan_client:get_pnl:489 - Starting accurate P&L calculation\n", "record": {"elapsed": {"repr": "0:03:08.479717", "seconds": 188.479717}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 489, "message": "Starting accurate P&L calculation", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:04:26.772259+05:30", "timestamp": 1755783266.772259}}}
{"text": "2025-08-21 19:04:26.772 | INFO     | app.services.dhan_client:get_pnl:491 - Fetched 5 positions\n", "record": {"elapsed": {"repr": "0:03:08.480320", "seconds": 188.48032}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 491, "message": "Fetched 5 positions", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:04:26.772862+05:30", "timestamp": 1755783266.772862}}}
{"text": "2025-08-21 19:04:26.773 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for RELIANCE: unrealized=-473596.91, today=-473596.91\n", "record": {"elapsed": {"repr": "0:03:08.480787", "seconds": 188.480787}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for RELIANCE: unrealized=-473596.91, today=-473596.91", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:04:26.773329+05:30", "timestamp": 1755783266.773329}}}
{"text": "2025-08-21 19:04:26.773 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for TCS: unrealized=-47896.53, today=-47896.53\n", "record": {"elapsed": {"repr": "0:03:08.481178", "seconds": 188.481178}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for TCS: unrealized=-47896.53, today=-47896.53", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:04:26.773720+05:30", "timestamp": 1755783266.77372}}}
{"text": "2025-08-21 19:04:26.774 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for HDFC: unrealized=1661763.49, today=1661763.49\n", "record": {"elapsed": {"repr": "0:03:08.481724", "seconds": 188.481724}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for HDFC: unrealized=1661763.49, today=1661763.49", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:04:26.774266+05:30", "timestamp": 1755783266.774266}}}
{"text": "2025-08-21 19:04:26.774 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for INFY: unrealized=11994.93, today=11994.93\n", "record": {"elapsed": {"repr": "0:03:08.482183", "seconds": 188.482183}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for INFY: unrealized=11994.93, today=11994.93", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:04:26.774725+05:30", "timestamp": 1755783266.774725}}}
{"text": "2025-08-21 19:04:26.775 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for ICICIBANK: unrealized=-473018.32, today=-473018.32\n", "record": {"elapsed": {"repr": "0:03:08.482719", "seconds": 188.482719}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for ICICIBANK: unrealized=-473018.32, today=-473018.32", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:04:26.775261+05:30", "timestamp": 1755783266.775261}}}
{"text": "2025-08-21 19:04:26.775 | INFO     | app.services.dhan_client:get_pnl:545 - Calculated totals - realized: 0.0, unrealized: 679246.66, day: 679246.66\n", "record": {"elapsed": {"repr": "0:03:08.483376", "seconds": 188.483376}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 545, "message": "Calculated totals - realized: 0.0, unrealized: 679246.66, day: 679246.66", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:04:26.775918+05:30", "timestamp": 1755783266.775918}}}
{"text": "2025-08-21 19:04:26.776 | DEBUG    | app.services.dhan_client:get_pnl:554 - PnL consistency check passed: drift=‚Çπ0.00\n", "record": {"elapsed": {"repr": "0:03:08.484245", "seconds": 188.484245}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 554, "message": "PnL consistency check passed: drift=‚Çπ0.00", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:04:26.776787+05:30", "timestamp": 1755783266.776787}}}
{"text": "2025-08-21 19:04:26.777 | DEBUG    | app.services.dhan_client:get_pnl:558 - Creating PnLTotals...\n", "record": {"elapsed": {"repr": "0:03:08.484767", "seconds": 188.484767}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 558, "message": "Creating PnLTotals...", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:04:26.777309+05:30", "timestamp": 1755783266.777309}}}
{"text": "2025-08-21 19:04:26.777 | DEBUG    | app.services.dhan_client:get_pnl:565 - PnLTotals created successfully\n", "record": {"elapsed": {"repr": "0:03:08.485213", "seconds": 188.485213}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 565, "message": "PnLTotals created successfully", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:04:26.777755+05:30", "timestamp": 1755783266.777755}}}
{"text": "2025-08-21 19:04:26.778 | DEBUG    | app.services.dhan_client:get_pnl:574 - Creating PnL model...\n", "record": {"elapsed": {"repr": "0:03:08.485657", "seconds": 188.485657}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 574, "message": "Creating PnL model...", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:04:26.778199+05:30", "timestamp": 1755783266.778199}}}
{"text": "2025-08-21 19:04:26.778 | DEBUG    | app.services.dhan_client:get_pnl:575 - Model fields: totals=<class 'app.models.schemas.PnLTotals'>, perSymbol=5, updated_at=2025-08-21 19:04:26.773270+05:30, trading_day=2025-08-21\n", "record": {"elapsed": {"repr": "0:03:08.486098", "seconds": 188.486098}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 575, "message": "Model fields: totals=<class 'app.models.schemas.PnLTotals'>, perSymbol=5, updated_at=2025-08-21 19:04:26.773270+05:30, trading_day=2025-08-21", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:04:26.778640+05:30", "timestamp": 1755783266.77864}}}
{"text": "2025-08-21 19:04:26.779 | DEBUG    | app.services.dhan_client:get_pnl:584 - Created PnL model: totals=PnLTotals(realized=0.0, unrealized=679246.66, day=679246.66, currency='INR') per_symbol=[PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1727, avg=618.93, ltp=344.7, unrealized=-473596.91, today_pnl=-473596.91), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=167, avg=948.57, ltp=1235.38, unrealized=-47896.53, today_pnl=-47896.53), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=1347, avg=801.44, ltp=2035.12, unrealized=1661763.49, today_pnl=1661763.49), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=143, avg=1427.62, ltp=1343.74, unrealized=11994.93, today_pnl=11994.93), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=438, avg=1994.48, ltp=914.53, unrealized=-473018.32, today_pnl=-473018.32)] updated_at=datetime.datetime(2025, 8, 21, 19, 4, 26, 773270, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))) trading_day='2025-08-21'\n", "record": {"elapsed": {"repr": "0:03:08.486966", "seconds": 188.486966}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 584, "message": "Created PnL model: totals=PnLTotals(realized=0.0, unrealized=679246.66, day=679246.66, currency='INR') per_symbol=[PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1727, avg=618.93, ltp=344.7, unrealized=-473596.91, today_pnl=-473596.91), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=167, avg=948.57, ltp=1235.38, unrealized=-47896.53, today_pnl=-47896.53), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=1347, avg=801.44, ltp=2035.12, unrealized=1661763.49, today_pnl=1661763.49), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=143, avg=1427.62, ltp=1343.74, unrealized=11994.93, today_pnl=11994.93), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=438, avg=1994.48, ltp=914.53, unrealized=-473018.32, today_pnl=-473018.32)] updated_at=datetime.datetime(2025, 8, 21, 19, 4, 26, 773270, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))) trading_day='2025-08-21'", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:04:26.779508+05:30", "timestamp": 1755783266.779508}}}
{"text": "2025-08-21 19:04:26.780 | DEBUG    | app.services.dhan_client:get_pnl:585 - PnL model fields: {'totals': PnLTotals(realized=0.0, unrealized=679246.66, day=679246.66, currency='INR'), 'per_symbol': [PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1727, avg=618.93, ltp=344.7, unrealized=-473596.91, today_pnl=-473596.91), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=167, avg=948.57, ltp=1235.38, unrealized=-47896.53, today_pnl=-47896.53), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=1347, avg=801.44, ltp=2035.12, unrealized=1661763.49, today_pnl=1661763.49), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=143, avg=1427.62, ltp=1343.74, unrealized=11994.93, today_pnl=11994.93), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=438, avg=1994.48, ltp=914.53, unrealized=-473018.32, today_pnl=-473018.32)], 'updated_at': datetime.datetime(2025, 8, 21, 19, 4, 26, 773270, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))), 'trading_day': '2025-08-21'}\n", "record": {"elapsed": {"repr": "0:03:08.488124", "seconds": 188.488124}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 585, "message": "PnL model fields: {'totals': PnLTotals(realized=0.0, unrealized=679246.66, day=679246.66, currency='INR'), 'per_symbol': [PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1727, avg=618.93, ltp=344.7, unrealized=-473596.91, today_pnl=-473596.91), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=167, avg=948.57, ltp=1235.38, unrealized=-47896.53, today_pnl=-47896.53), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=1347, avg=801.44, ltp=2035.12, unrealized=1661763.49, today_pnl=1661763.49), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=143, avg=1427.62, ltp=1343.74, unrealized=11994.93, today_pnl=11994.93), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=438, avg=1994.48, ltp=914.53, unrealized=-473018.32, today_pnl=-473018.32)], 'updated_at': datetime.datetime(2025, 8, 21, 19, 4, 26, 773270, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))), 'trading_day': '2025-08-21'}", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:04:26.780666+05:30", "timestamp": 1755783266.780666}}}
{"text": "2025-08-21 19:04:26.781 | INFO     | app.services.dhan_client:get_pnl:587 - P&L calculation completed successfully: 5 symbols, unrealized=‚Çπ679246.66\n", "record": {"elapsed": {"repr": "0:03:08.488804", "seconds": 188.488804}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 587, "message": "P&L calculation completed successfully: 5 symbols, unrealized=‚Çπ679246.66", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:04:26.781346+05:30", "timestamp": 1755783266.781346}}}
{"text": "2025-08-21 19:04:26.781 | DEBUG    | app.ws.live:emit_delta:408 - Emitted pnl delta: seq=207\n", "record": {"elapsed": {"repr": "0:03:08.489450", "seconds": 188.48945}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "emit_delta", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 408, "message": "Emitted pnl delta: seq=207", "module": "live", "name": "app.ws.live", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:04:26.781992+05:30", "timestamp": 1755783266.781992}}}
{"text": "2025-08-21 19:04:26.782 | DEBUG    | app.ws.live:emit_delta:408 - Emitted positions delta: seq=208\n", "record": {"elapsed": {"repr": "0:03:08.490135", "seconds": 188.490135}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "emit_delta", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 408, "message": "Emitted positions delta: seq=208", "module": "live", "name": "app.ws.live", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:04:26.782677+05:30", "timestamp": 1755783266.782677}}}
{"text": "2025-08-21 19:04:26.980 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:03:08.687814", "seconds": 188.687814}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:04:26.980356+05:30", "timestamp": 1755783266.980356}}}
{"text": "2025-08-21 19:04:26.981 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:03:08.688459", "seconds": 188.688459}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:04:26.981001+05:30", "timestamp": 1755783266.981001}}}
{"text": "2025-08-21 19:04:26.981 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:03:08.688866", "seconds": 188.688866}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:04:26.981408+05:30", "timestamp": 1755783266.981408}}}
{"text": "2025-08-21 19:04:26.981 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:03:08.689210", "seconds": 188.68921}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:04:26.981752+05:30", "timestamp": 1755783266.981752}}}
{"text": "2025-08-21 19:04:26.982 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:03:08.689640", "seconds": 188.68964}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:04:26.982182+05:30", "timestamp": 1755783266.982182}}}
{"text": "2025-08-21 19:04:26.982 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:03:08.690084", "seconds": 188.690084}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:04:26.982626+05:30", "timestamp": 1755783266.982626}}}
{"text": "2025-08-21 19:04:26.982 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:03:08.690455", "seconds": 188.690455}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:04:26.982997+05:30", "timestamp": 1755783266.982997}}}
{"text": "2025-08-21 19:04:26.983 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:03:08.690948", "seconds": 188.690948}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:04:26.983490+05:30", "timestamp": 1755783266.98349}}}
{"text": "2025-08-21 19:04:26.984 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:03:08.691596", "seconds": 188.691596}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:04:26.984138+05:30", "timestamp": 1755783266.984138}}}
{"text": "2025-08-21 19:04:26.985 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:03:08.692520", "seconds": 188.69252}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:04:26.985062+05:30", "timestamp": 1755783266.985062}}}
{"text": "2025-08-21 19:04:28.500 | INFO     | app.services.dhan_client:get_pnl:489 - Starting accurate P&L calculation\n", "record": {"elapsed": {"repr": "0:03:10.207632", "seconds": 190.207632}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 489, "message": "Starting accurate P&L calculation", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:04:28.500174+05:30", "timestamp": 1755783268.500174}}}
{"text": "2025-08-21 19:04:28.501 | INFO     | app.services.dhan_client:get_pnl:491 - Fetched 5 positions\n", "record": {"elapsed": {"repr": "0:03:10.208617", "seconds": 190.208617}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 491, "message": "Fetched 5 positions", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:04:28.501159+05:30", "timestamp": 1755783268.501159}}}
{"text": "2025-08-21 19:04:28.501 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for RELIANCE: unrealized=-465319.06, today=-465319.06\n", "record": {"elapsed": {"repr": "0:03:10.209267", "seconds": 190.209267}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for RELIANCE: unrealized=-465319.06, today=-465319.06", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:04:28.501809+05:30", "timestamp": 1755783268.501809}}}
{"text": "2025-08-21 19:04:28.502 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for TCS: unrealized=-45154.96, today=-45154.96\n", "record": {"elapsed": {"repr": "0:03:10.209829", "seconds": 190.209829}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for TCS: unrealized=-45154.96, today=-45154.96", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:04:28.502371+05:30", "timestamp": 1755783268.502371}}}
{"text": "2025-08-21 19:04:28.503 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for HDFC: unrealized=1689155.65, today=1689155.65\n", "record": {"elapsed": {"repr": "0:03:10.210458", "seconds": 190.210458}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for HDFC: unrealized=1689155.65, today=1689155.65", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:04:28.503000+05:30", "timestamp": 1755783268.503}}}
{"text": "2025-08-21 19:04:28.503 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for INFY: unrealized=13497.57, today=13497.57\n", "record": {"elapsed": {"repr": "0:03:10.211358", "seconds": 190.211358}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for INFY: unrealized=13497.57, today=13497.57", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:04:28.503900+05:30", "timestamp": 1755783268.5039}}}
{"text": "2025-08-21 19:04:28.505 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for ICICIBANK: unrealized=-471256.61, today=-471256.61\n", "record": {"elapsed": {"repr": "0:03:10.212765", "seconds": 190.212765}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for ICICIBANK: unrealized=-471256.61, today=-471256.61", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:04:28.505307+05:30", "timestamp": 1755783268.505307}}}
{"text": "2025-08-21 19:04:28.505 | INFO     | app.services.dhan_client:get_pnl:545 - Calculated totals - realized: 0.0, unrealized: 720922.59, day: 720922.59\n", "record": {"elapsed": {"repr": "0:03:10.213385", "seconds": 190.213385}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 545, "message": "Calculated totals - realized: 0.0, unrealized: 720922.59, day: 720922.59", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:04:28.505927+05:30", "timestamp": 1755783268.505927}}}
{"text": "2025-08-21 19:04:28.506 | DEBUG    | app.services.dhan_client:get_pnl:554 - PnL consistency check passed: drift=‚Çπ0.00\n", "record": {"elapsed": {"repr": "0:03:10.213952", "seconds": 190.213952}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 554, "message": "PnL consistency check passed: drift=‚Çπ0.00", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:04:28.506494+05:30", "timestamp": 1755783268.506494}}}
{"text": "2025-08-21 19:04:28.506 | DEBUG    | app.services.dhan_client:get_pnl:558 - Creating PnLTotals...\n", "record": {"elapsed": {"repr": "0:03:10.214457", "seconds": 190.214457}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 558, "message": "Creating PnLTotals...", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:04:28.506999+05:30", "timestamp": 1755783268.506999}}}
{"text": "2025-08-21 19:04:28.507 | DEBUG    | app.services.dhan_client:get_pnl:565 - PnLTotals created successfully\n", "record": {"elapsed": {"repr": "0:03:10.215042", "seconds": 190.215042}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 565, "message": "PnLTotals created successfully", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:04:28.507584+05:30", "timestamp": 1755783268.507584}}}
{"text": "2025-08-21 19:04:28.508 | DEBUG    | app.services.dhan_client:get_pnl:574 - Creating PnL model...\n", "record": {"elapsed": {"repr": "0:03:10.215526", "seconds": 190.215526}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 574, "message": "Creating PnL model...", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:04:28.508068+05:30", "timestamp": 1755783268.508068}}}
{"text": "2025-08-21 19:04:28.508 | DEBUG    | app.services.dhan_client:get_pnl:575 - Model fields: totals=<class 'app.models.schemas.PnLTotals'>, perSymbol=5, updated_at=2025-08-21 19:04:28.501712+05:30, trading_day=2025-08-21\n", "record": {"elapsed": {"repr": "0:03:10.216326", "seconds": 190.216326}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 575, "message": "Model fields: totals=<class 'app.models.schemas.PnLTotals'>, perSymbol=5, updated_at=2025-08-21 19:04:28.501712+05:30, trading_day=2025-08-21", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:04:28.508868+05:30", "timestamp": 1755783268.508868}}}
{"text": "2025-08-21 19:04:28.509 | DEBUG    | app.services.dhan_client:get_pnl:584 - Created PnL model: totals=PnLTotals(realized=0.0, unrealized=720922.59, day=720922.59, currency='INR') per_symbol=[PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1727, avg=618.93, ltp=349.49, unrealized=-465319.06, today_pnl=-465319.06), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=167, avg=948.57, ltp=1218.96, unrealized=-45154.96, today_pnl=-45154.96), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=1347, avg=801.44, ltp=2055.45, unrealized=1689155.65, today_pnl=1689155.65), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=143, avg=1427.62, ltp=1333.23, unrealized=13497.57, today_pnl=13497.57), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=438, avg=1994.48, ltp=918.55, unrealized=-471256.61, today_pnl=-471256.61)] updated_at=datetime.datetime(2025, 8, 21, 19, 4, 28, 501712, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))) trading_day='2025-08-21'\n", "record": {"elapsed": {"repr": "0:03:10.216990", "seconds": 190.21699}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 584, "message": "Created PnL model: totals=PnLTotals(realized=0.0, unrealized=720922.59, day=720922.59, currency='INR') per_symbol=[PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1727, avg=618.93, ltp=349.49, unrealized=-465319.06, today_pnl=-465319.06), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=167, avg=948.57, ltp=1218.96, unrealized=-45154.96, today_pnl=-45154.96), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=1347, avg=801.44, ltp=2055.45, unrealized=1689155.65, today_pnl=1689155.65), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=143, avg=1427.62, ltp=1333.23, unrealized=13497.57, today_pnl=13497.57), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=438, avg=1994.48, ltp=918.55, unrealized=-471256.61, today_pnl=-471256.61)] updated_at=datetime.datetime(2025, 8, 21, 19, 4, 28, 501712, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))) trading_day='2025-08-21'", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:04:28.509532+05:30", "timestamp": 1755783268.509532}}}
{"text": "2025-08-21 19:04:28.510 | DEBUG    | app.services.dhan_client:get_pnl:585 - PnL model fields: {'totals': PnLTotals(realized=0.0, unrealized=720922.59, day=720922.59, currency='INR'), 'per_symbol': [PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1727, avg=618.93, ltp=349.49, unrealized=-465319.06, today_pnl=-465319.06), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=167, avg=948.57, ltp=1218.96, unrealized=-45154.96, today_pnl=-45154.96), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=1347, avg=801.44, ltp=2055.45, unrealized=1689155.65, today_pnl=1689155.65), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=143, avg=1427.62, ltp=1333.23, unrealized=13497.57, today_pnl=13497.57), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=438, avg=1994.48, ltp=918.55, unrealized=-471256.61, today_pnl=-471256.61)], 'updated_at': datetime.datetime(2025, 8, 21, 19, 4, 28, 501712, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))), 'trading_day': '2025-08-21'}\n", "record": {"elapsed": {"repr": "0:03:10.217636", "seconds": 190.217636}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 585, "message": "PnL model fields: {'totals': PnLTotals(realized=0.0, unrealized=720922.59, day=720922.59, currency='INR'), 'per_symbol': [PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1727, avg=618.93, ltp=349.49, unrealized=-465319.06, today_pnl=-465319.06), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=167, avg=948.57, ltp=1218.96, unrealized=-45154.96, today_pnl=-45154.96), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=1347, avg=801.44, ltp=2055.45, unrealized=1689155.65, today_pnl=1689155.65), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=143, avg=1427.62, ltp=1333.23, unrealized=13497.57, today_pnl=13497.57), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=438, avg=1994.48, ltp=918.55, unrealized=-471256.61, today_pnl=-471256.61)], 'updated_at': datetime.datetime(2025, 8, 21, 19, 4, 28, 501712, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))), 'trading_day': '2025-08-21'}", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:04:28.510178+05:30", "timestamp": 1755783268.510178}}}
{"text": "2025-08-21 19:04:28.510 | INFO     | app.services.dhan_client:get_pnl:587 - P&L calculation completed successfully: 5 symbols, unrealized=‚Çπ720922.59\n", "record": {"elapsed": {"repr": "0:03:10.218162", "seconds": 190.218162}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 587, "message": "P&L calculation completed successfully: 5 symbols, unrealized=‚Çπ720922.59", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:04:28.510704+05:30", "timestamp": 1755783268.510704}}}
{"text": "2025-08-21 19:04:28.511 | DEBUG    | app.ws.live:emit_delta:408 - Emitted pnl delta: seq=209\n", "record": {"elapsed": {"repr": "0:03:10.218744", "seconds": 190.218744}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "emit_delta", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 408, "message": "Emitted pnl delta: seq=209", "module": "live", "name": "app.ws.live", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:04:28.511286+05:30", "timestamp": 1755783268.511286}}}
{"text": "2025-08-21 19:04:28.511 | DEBUG    | app.ws.live:emit_delta:408 - Emitted positions delta: seq=210\n", "record": {"elapsed": {"repr": "0:03:10.219342", "seconds": 190.219342}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "emit_delta", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 408, "message": "Emitted positions delta: seq=210", "module": "live", "name": "app.ws.live", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:04:28.511884+05:30", "timestamp": 1755783268.511884}}}
{"text": "2025-08-21 19:04:28.985 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:03:10.693387", "seconds": 190.693387}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:04:28.985929+05:30", "timestamp": 1755783268.985929}}}
{"text": "2025-08-21 19:04:28.986 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:03:10.694371", "seconds": 190.694371}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:04:28.986913+05:30", "timestamp": 1755783268.986913}}}
{"text": "2025-08-21 19:04:28.987 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:03:10.695085", "seconds": 190.695085}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:04:28.987627+05:30", "timestamp": 1755783268.987627}}}
{"text": "2025-08-21 19:04:28.988 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:03:10.695488", "seconds": 190.695488}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:04:28.988030+05:30", "timestamp": 1755783268.98803}}}
{"text": "2025-08-21 19:04:28.988 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:03:10.695943", "seconds": 190.695943}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:04:28.988485+05:30", "timestamp": 1755783268.988485}}}
{"text": "2025-08-21 19:04:28.988 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:03:10.696453", "seconds": 190.696453}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:04:28.988995+05:30", "timestamp": 1755783268.988995}}}
{"text": "2025-08-21 19:04:28.989 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:03:10.696925", "seconds": 190.696925}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:04:28.989467+05:30", "timestamp": 1755783268.989467}}}
{"text": "2025-08-21 19:04:28.989 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:03:10.697352", "seconds": 190.697352}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:04:28.989894+05:30", "timestamp": 1755783268.989894}}}
{"text": "2025-08-21 19:04:28.990 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:03:10.697784", "seconds": 190.697784}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:04:28.990326+05:30", "timestamp": 1755783268.990326}}}
{"text": "2025-08-21 19:04:28.990 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:03:10.698329", "seconds": 190.698329}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:04:28.990871+05:30", "timestamp": 1755783268.990871}}}
{"text": "2025-08-21 19:04:30.103 | INFO     | app.services.dhan_client:get_pnl:489 - Starting accurate P&L calculation\n", "record": {"elapsed": {"repr": "0:03:11.810989", "seconds": 191.810989}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 489, "message": "Starting accurate P&L calculation", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:04:30.103531+05:30", "timestamp": 1755783270.103531}}}
{"text": "2025-08-21 19:04:30.104 | INFO     | app.services.dhan_client:get_pnl:491 - Fetched 5 positions\n", "record": {"elapsed": {"repr": "0:03:11.811602", "seconds": 191.811602}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 491, "message": "Fetched 5 positions", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:04:30.104144+05:30", "timestamp": 1755783270.104144}}}
{"text": "2025-08-21 19:04:30.104 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for RELIANCE: unrealized=-460963.49, today=-460963.49\n", "record": {"elapsed": {"repr": "0:03:11.812011", "seconds": 191.812011}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for RELIANCE: unrealized=-460963.49, today=-460963.49", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:04:30.104553+05:30", "timestamp": 1755783270.104553}}}
{"text": "2025-08-21 19:04:30.105 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for TCS: unrealized=-41545.88, today=-41545.88\n", "record": {"elapsed": {"repr": "0:03:11.812467", "seconds": 191.812467}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for TCS: unrealized=-41545.88, today=-41545.88", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:04:30.105009+05:30", "timestamp": 1755783270.105009}}}
{"text": "2025-08-21 19:04:30.105 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for HDFC: unrealized=1682674.41, today=1682674.41\n", "record": {"elapsed": {"repr": "0:03:11.812912", "seconds": 191.812912}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for HDFC: unrealized=1682674.41, today=1682674.41", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:04:30.105454+05:30", "timestamp": 1755783270.105454}}}
{"text": "2025-08-21 19:04:30.105 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for INFY: unrealized=15068.94, today=15068.94\n", "record": {"elapsed": {"repr": "0:03:11.813284", "seconds": 191.813284}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for INFY: unrealized=15068.94, today=15068.94", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:04:30.105826+05:30", "timestamp": 1755783270.105826}}}
{"text": "2025-08-21 19:04:30.106 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for ICICIBANK: unrealized=-464196.57, today=-464196.57\n", "record": {"elapsed": {"repr": "0:03:11.813792", "seconds": 191.813792}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for ICICIBANK: unrealized=-464196.57, today=-464196.57", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:04:30.106334+05:30", "timestamp": 1755783270.106334}}}
{"text": "2025-08-21 19:04:30.106 | INFO     | app.services.dhan_client:get_pnl:545 - Calculated totals - realized: 0.0, unrealized: 731037.41, day: 731037.41\n", "record": {"elapsed": {"repr": "0:03:11.814221", "seconds": 191.814221}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 545, "message": "Calculated totals - realized: 0.0, unrealized: 731037.41, day: 731037.41", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:04:30.106763+05:30", "timestamp": 1755783270.106763}}}
{"text": "2025-08-21 19:04:30.107 | DEBUG    | app.services.dhan_client:get_pnl:554 - PnL consistency check passed: drift=‚Çπ0.00\n", "record": {"elapsed": {"repr": "0:03:11.814808", "seconds": 191.814808}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 554, "message": "PnL consistency check passed: drift=‚Çπ0.00", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:04:30.107350+05:30", "timestamp": 1755783270.10735}}}
{"text": "2025-08-21 19:04:30.108 | DEBUG    | app.services.dhan_client:get_pnl:558 - Creating PnLTotals...\n", "record": {"elapsed": {"repr": "0:03:11.815652", "seconds": 191.815652}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 558, "message": "Creating PnLTotals...", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:04:30.108194+05:30", "timestamp": 1755783270.108194}}}
{"text": "2025-08-21 19:04:30.108 | DEBUG    | app.services.dhan_client:get_pnl:565 - PnLTotals created successfully\n", "record": {"elapsed": {"repr": "0:03:11.816121", "seconds": 191.816121}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 565, "message": "PnLTotals created successfully", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:04:30.108663+05:30", "timestamp": 1755783270.108663}}}
{"text": "2025-08-21 19:04:30.109 | DEBUG    | app.services.dhan_client:get_pnl:574 - Creating PnL model...\n", "record": {"elapsed": {"repr": "0:03:11.816561", "seconds": 191.816561}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 574, "message": "Creating PnL model...", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:04:30.109103+05:30", "timestamp": 1755783270.109103}}}
{"text": "2025-08-21 19:04:30.109 | DEBUG    | app.services.dhan_client:get_pnl:575 - Model fields: totals=<class 'app.models.schemas.PnLTotals'>, perSymbol=5, updated_at=2025-08-21 19:04:30.104499+05:30, trading_day=2025-08-21\n", "record": {"elapsed": {"repr": "0:03:11.817056", "seconds": 191.817056}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 575, "message": "Model fields: totals=<class 'app.models.schemas.PnLTotals'>, perSymbol=5, updated_at=2025-08-21 19:04:30.104499+05:30, trading_day=2025-08-21", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:04:30.109598+05:30", "timestamp": 1755783270.109598}}}
{"text": "2025-08-21 19:04:30.110 | DEBUG    | app.services.dhan_client:get_pnl:584 - Created PnL model: totals=PnLTotals(realized=0.0, unrealized=731037.41, day=731037.41, currency='INR') per_symbol=[PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1727, avg=618.93, ltp=352.01, unrealized=-460963.49, today_pnl=-460963.49), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=167, avg=948.57, ltp=1197.35, unrealized=-41545.88, today_pnl=-41545.88), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=1347, avg=801.44, ltp=2050.64, unrealized=1682674.41, today_pnl=1682674.41), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=143, avg=1427.62, ltp=1322.24, unrealized=15068.94, today_pnl=15068.94), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=438, avg=1994.48, ltp=934.67, unrealized=-464196.57, today_pnl=-464196.57)] updated_at=datetime.datetime(2025, 8, 21, 19, 4, 30, 104499, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))) trading_day='2025-08-21'\n", "record": {"elapsed": {"repr": "0:03:11.817815", "seconds": 191.817815}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 584, "message": "Created PnL model: totals=PnLTotals(realized=0.0, unrealized=731037.41, day=731037.41, currency='INR') per_symbol=[PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1727, avg=618.93, ltp=352.01, unrealized=-460963.49, today_pnl=-460963.49), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=167, avg=948.57, ltp=1197.35, unrealized=-41545.88, today_pnl=-41545.88), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=1347, avg=801.44, ltp=2050.64, unrealized=1682674.41, today_pnl=1682674.41), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=143, avg=1427.62, ltp=1322.24, unrealized=15068.94, today_pnl=15068.94), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=438, avg=1994.48, ltp=934.67, unrealized=-464196.57, today_pnl=-464196.57)] updated_at=datetime.datetime(2025, 8, 21, 19, 4, 30, 104499, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))) trading_day='2025-08-21'", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:04:30.110357+05:30", "timestamp": 1755783270.110357}}}
{"text": "2025-08-21 19:04:30.111 | DEBUG    | app.services.dhan_client:get_pnl:585 - PnL model fields: {'totals': PnLTotals(realized=0.0, unrealized=731037.41, day=731037.41, currency='INR'), 'per_symbol': [PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1727, avg=618.93, ltp=352.01, unrealized=-460963.49, today_pnl=-460963.49), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=167, avg=948.57, ltp=1197.35, unrealized=-41545.88, today_pnl=-41545.88), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=1347, avg=801.44, ltp=2050.64, unrealized=1682674.41, today_pnl=1682674.41), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=143, avg=1427.62, ltp=1322.24, unrealized=15068.94, today_pnl=15068.94), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=438, avg=1994.48, ltp=934.67, unrealized=-464196.57, today_pnl=-464196.57)], 'updated_at': datetime.datetime(2025, 8, 21, 19, 4, 30, 104499, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))), 'trading_day': '2025-08-21'}\n", "record": {"elapsed": {"repr": "0:03:11.819003", "seconds": 191.819003}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 585, "message": "PnL model fields: {'totals': PnLTotals(realized=0.0, unrealized=731037.41, day=731037.41, currency='INR'), 'per_symbol': [PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1727, avg=618.93, ltp=352.01, unrealized=-460963.49, today_pnl=-460963.49), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=167, avg=948.57, ltp=1197.35, unrealized=-41545.88, today_pnl=-41545.88), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=1347, avg=801.44, ltp=2050.64, unrealized=1682674.41, today_pnl=1682674.41), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=143, avg=1427.62, ltp=1322.24, unrealized=15068.94, today_pnl=15068.94), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=438, avg=1994.48, ltp=934.67, unrealized=-464196.57, today_pnl=-464196.57)], 'updated_at': datetime.datetime(2025, 8, 21, 19, 4, 30, 104499, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))), 'trading_day': '2025-08-21'}", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:04:30.111545+05:30", "timestamp": 1755783270.111545}}}
{"text": "2025-08-21 19:04:30.112 | INFO     | app.services.dhan_client:get_pnl:587 - P&L calculation completed successfully: 5 symbols, unrealized=‚Çπ731037.41\n", "record": {"elapsed": {"repr": "0:03:11.819740", "seconds": 191.81974}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 587, "message": "P&L calculation completed successfully: 5 symbols, unrealized=‚Çπ731037.41", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:04:30.112282+05:30", "timestamp": 1755783270.112282}}}
{"text": "2025-08-21 19:04:30.112 | DEBUG    | app.ws.live:emit_delta:408 - Emitted pnl delta: seq=211\n", "record": {"elapsed": {"repr": "0:03:11.820443", "seconds": 191.820443}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "emit_delta", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 408, "message": "Emitted pnl delta: seq=211", "module": "live", "name": "app.ws.live", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:04:30.112985+05:30", "timestamp": 1755783270.112985}}}
{"text": "2025-08-21 19:04:30.113 | DEBUG    | app.ws.live:emit_delta:408 - Emitted positions delta: seq=212\n", "record": {"elapsed": {"repr": "0:03:11.821100", "seconds": 191.8211}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "emit_delta", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 408, "message": "Emitted positions delta: seq=212", "module": "live", "name": "app.ws.live", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:04:30.113642+05:30", "timestamp": 1755783270.113642}}}
{"text": "2025-08-21 19:04:30.992 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:03:12.699758", "seconds": 192.699758}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:04:30.992300+05:30", "timestamp": 1755783270.9923}}}
{"text": "2025-08-21 19:04:30.993 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:03:12.700535", "seconds": 192.700535}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:04:30.993077+05:30", "timestamp": 1755783270.993077}}}
{"text": "2025-08-21 19:04:30.993 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:03:12.701361", "seconds": 192.701361}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:04:30.993903+05:30", "timestamp": 1755783270.993903}}}
{"text": "2025-08-21 19:04:30.994 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:03:12.702036", "seconds": 192.702036}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:04:30.994578+05:30", "timestamp": 1755783270.994578}}}
{"text": "2025-08-21 19:04:30.995 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:03:12.702503", "seconds": 192.702503}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:04:30.995045+05:30", "timestamp": 1755783270.995045}}}
{"text": "2025-08-21 19:04:30.995 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:03:12.702900", "seconds": 192.7029}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:04:30.995442+05:30", "timestamp": 1755783270.995442}}}
{"text": "2025-08-21 19:04:30.995 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:03:12.703297", "seconds": 192.703297}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:04:30.995839+05:30", "timestamp": 1755783270.995839}}}
{"text": "2025-08-21 19:04:30.996 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:03:12.703686", "seconds": 192.703686}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:04:30.996228+05:30", "timestamp": 1755783270.996228}}}
{"text": "2025-08-21 19:04:30.996 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:03:12.704063", "seconds": 192.704063}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:04:30.996605+05:30", "timestamp": 1755783270.996605}}}
{"text": "2025-08-21 19:04:30.996 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:03:12.704433", "seconds": 192.704433}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:04:30.996975+05:30", "timestamp": 1755783270.996975}}}
{"text": "2025-08-21 19:04:31.995 | INFO     | app.services.dhan_client:get_pnl:489 - Starting accurate P&L calculation\n", "record": {"elapsed": {"repr": "0:03:13.702714", "seconds": 193.702714}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 489, "message": "Starting accurate P&L calculation", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:04:31.995256+05:30", "timestamp": 1755783271.995256}}}
{"text": "2025-08-21 19:04:31.995 | INFO     | app.services.dhan_client:get_pnl:491 - Fetched 5 positions\n", "record": {"elapsed": {"repr": "0:03:13.703371", "seconds": 193.703371}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 491, "message": "Fetched 5 positions", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:04:31.995913+05:30", "timestamp": 1755783271.995913}}}
{"text": "2025-08-21 19:04:31.996 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for RELIANCE: unrealized=-453769.89, today=-453769.89\n", "record": {"elapsed": {"repr": "0:03:13.703885", "seconds": 193.703885}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for RELIANCE: unrealized=-453769.89, today=-453769.89", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:04:31.996427+05:30", "timestamp": 1755783271.996427}}}
{"text": "2025-08-21 19:04:31.996 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for TCS: unrealized=-42398.3, today=-42398.3\n", "record": {"elapsed": {"repr": "0:03:13.704303", "seconds": 193.704303}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for TCS: unrealized=-42398.3, today=-42398.3", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:04:31.996845+05:30", "timestamp": 1755783271.996845}}}
{"text": "2025-08-21 19:04:31.997 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for HDFC: unrealized=1666133.61, today=1666133.61\n", "record": {"elapsed": {"repr": "0:03:13.704755", "seconds": 193.704755}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for HDFC: unrealized=1666133.61, today=1666133.61", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:04:31.997297+05:30", "timestamp": 1755783271.997297}}}
{"text": "2025-08-21 19:04:31.997 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for INFY: unrealized=17114.33, today=17114.33\n", "record": {"elapsed": {"repr": "0:03:13.705340", "seconds": 193.70534}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for INFY: unrealized=17114.33, today=17114.33", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:04:31.997882+05:30", "timestamp": 1755783271.997882}}}
{"text": "2025-08-21 19:04:31.998 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for ICICIBANK: unrealized=-462910.18, today=-462910.18\n", "record": {"elapsed": {"repr": "0:03:13.706217", "seconds": 193.706217}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for ICICIBANK: unrealized=-462910.18, today=-462910.18", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:04:31.998759+05:30", "timestamp": 1755783271.998759}}}
{"text": "2025-08-21 19:04:31.999 | INFO     | app.services.dhan_client:get_pnl:545 - Calculated totals - realized: 0.0, unrealized: 724169.57, day: 724169.57\n", "record": {"elapsed": {"repr": "0:03:13.706721", "seconds": 193.706721}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 545, "message": "Calculated totals - realized: 0.0, unrealized: 724169.57, day: 724169.57", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:04:31.999263+05:30", "timestamp": 1755783271.999263}}}
{"text": "2025-08-21 19:04:31.999 | DEBUG    | app.services.dhan_client:get_pnl:554 - PnL consistency check passed: drift=‚Çπ0.00\n", "record": {"elapsed": {"repr": "0:03:13.707206", "seconds": 193.707206}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 554, "message": "PnL consistency check passed: drift=‚Çπ0.00", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:04:31.999748+05:30", "timestamp": 1755783271.999748}}}
{"text": "2025-08-21 19:04:32.000 | DEBUG    | app.services.dhan_client:get_pnl:558 - Creating PnLTotals...\n", "record": {"elapsed": {"repr": "0:03:13.707713", "seconds": 193.707713}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 558, "message": "Creating PnLTotals...", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:04:32.000255+05:30", "timestamp": 1755783272.000255}}}
{"text": "2025-08-21 19:04:32.000 | DEBUG    | app.services.dhan_client:get_pnl:565 - PnLTotals created successfully\n", "record": {"elapsed": {"repr": "0:03:13.708301", "seconds": 193.708301}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 565, "message": "PnLTotals created successfully", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:04:32.000843+05:30", "timestamp": 1755783272.000843}}}
{"text": "2025-08-21 19:04:32.001 | DEBUG    | app.services.dhan_client:get_pnl:574 - Creating PnL model...\n", "record": {"elapsed": {"repr": "0:03:13.709060", "seconds": 193.70906}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 574, "message": "Creating PnL model...", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:04:32.001602+05:30", "timestamp": 1755783272.001602}}}
{"text": "2025-08-21 19:04:32.002 | DEBUG    | app.services.dhan_client:get_pnl:575 - Model fields: totals=<class 'app.models.schemas.PnLTotals'>, perSymbol=5, updated_at=2025-08-21 19:04:31.996349+05:30, trading_day=2025-08-21\n", "record": {"elapsed": {"repr": "0:03:13.709837", "seconds": 193.709837}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 575, "message": "Model fields: totals=<class 'app.models.schemas.PnLTotals'>, perSymbol=5, updated_at=2025-08-21 19:04:31.996349+05:30, trading_day=2025-08-21", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:04:32.002379+05:30", "timestamp": 1755783272.002379}}}
{"text": "2025-08-21 19:04:32.003 | DEBUG    | app.services.dhan_client:get_pnl:584 - Created PnL model: totals=PnLTotals(realized=0.0, unrealized=724169.57, day=724169.57, currency='INR') per_symbol=[PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1727, avg=618.93, ltp=356.18, unrealized=-453769.89, today_pnl=-453769.89), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=167, avg=948.57, ltp=1202.45, unrealized=-42398.3, today_pnl=-42398.3), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=1347, avg=801.44, ltp=2038.36, unrealized=1666133.61, today_pnl=1666133.61), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=143, avg=1427.62, ltp=1307.94, unrealized=17114.33, today_pnl=17114.33), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=438, avg=1994.48, ltp=937.61, unrealized=-462910.18, today_pnl=-462910.18)] updated_at=datetime.datetime(2025, 8, 21, 19, 4, 31, 996349, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))) trading_day='2025-08-21'\n", "record": {"elapsed": {"repr": "0:03:13.710559", "seconds": 193.710559}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 584, "message": "Created PnL model: totals=PnLTotals(realized=0.0, unrealized=724169.57, day=724169.57, currency='INR') per_symbol=[PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1727, avg=618.93, ltp=356.18, unrealized=-453769.89, today_pnl=-453769.89), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=167, avg=948.57, ltp=1202.45, unrealized=-42398.3, today_pnl=-42398.3), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=1347, avg=801.44, ltp=2038.36, unrealized=1666133.61, today_pnl=1666133.61), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=143, avg=1427.62, ltp=1307.94, unrealized=17114.33, today_pnl=17114.33), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=438, avg=1994.48, ltp=937.61, unrealized=-462910.18, today_pnl=-462910.18)] updated_at=datetime.datetime(2025, 8, 21, 19, 4, 31, 996349, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))) trading_day='2025-08-21'", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:04:32.003101+05:30", "timestamp": 1755783272.003101}}}
{"text": "2025-08-21 19:04:32.003 | DEBUG    | app.services.dhan_client:get_pnl:585 - PnL model fields: {'totals': PnLTotals(realized=0.0, unrealized=724169.57, day=724169.57, currency='INR'), 'per_symbol': [PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1727, avg=618.93, ltp=356.18, unrealized=-453769.89, today_pnl=-453769.89), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=167, avg=948.57, ltp=1202.45, unrealized=-42398.3, today_pnl=-42398.3), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=1347, avg=801.44, ltp=2038.36, unrealized=1666133.61, today_pnl=1666133.61), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=143, avg=1427.62, ltp=1307.94, unrealized=17114.33, today_pnl=17114.33), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=438, avg=1994.48, ltp=937.61, unrealized=-462910.18, today_pnl=-462910.18)], 'updated_at': datetime.datetime(2025, 8, 21, 19, 4, 31, 996349, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))), 'trading_day': '2025-08-21'}\n", "record": {"elapsed": {"repr": "0:03:13.711262", "seconds": 193.711262}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 585, "message": "PnL model fields: {'totals': PnLTotals(realized=0.0, unrealized=724169.57, day=724169.57, currency='INR'), 'per_symbol': [PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1727, avg=618.93, ltp=356.18, unrealized=-453769.89, today_pnl=-453769.89), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=167, avg=948.57, ltp=1202.45, unrealized=-42398.3, today_pnl=-42398.3), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=1347, avg=801.44, ltp=2038.36, unrealized=1666133.61, today_pnl=1666133.61), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=143, avg=1427.62, ltp=1307.94, unrealized=17114.33, today_pnl=17114.33), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=438, avg=1994.48, ltp=937.61, unrealized=-462910.18, today_pnl=-462910.18)], 'updated_at': datetime.datetime(2025, 8, 21, 19, 4, 31, 996349, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))), 'trading_day': '2025-08-21'}", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:04:32.003804+05:30", "timestamp": 1755783272.003804}}}
{"text": "2025-08-21 19:04:32.004 | INFO     | app.services.dhan_client:get_pnl:587 - P&L calculation completed successfully: 5 symbols, unrealized=‚Çπ724169.57\n", "record": {"elapsed": {"repr": "0:03:13.711824", "seconds": 193.711824}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 587, "message": "P&L calculation completed successfully: 5 symbols, unrealized=‚Çπ724169.57", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:04:32.004366+05:30", "timestamp": 1755783272.004366}}}
{"text": "2025-08-21 19:04:32.004 | DEBUG    | app.ws.live:emit_delta:408 - Emitted pnl delta: seq=213\n", "record": {"elapsed": {"repr": "0:03:13.712423", "seconds": 193.712423}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "emit_delta", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 408, "message": "Emitted pnl delta: seq=213", "module": "live", "name": "app.ws.live", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:04:32.004965+05:30", "timestamp": 1755783272.004965}}}
{"text": "2025-08-21 19:04:32.005 | DEBUG    | app.ws.live:emit_delta:408 - Emitted positions delta: seq=214\n", "record": {"elapsed": {"repr": "0:03:13.713380", "seconds": 193.71338}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "emit_delta", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 408, "message": "Emitted positions delta: seq=214", "module": "live", "name": "app.ws.live", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:04:32.005922+05:30", "timestamp": 1755783272.005922}}}
{"text": "2025-08-21 19:04:32.997 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:03:14.705327", "seconds": 194.705327}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:04:32.997869+05:30", "timestamp": 1755783272.997869}}}
{"text": "2025-08-21 19:04:32.998 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:03:14.705953", "seconds": 194.705953}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:04:32.998495+05:30", "timestamp": 1755783272.998495}}}
{"text": "2025-08-21 19:04:32.998 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:03:14.706434", "seconds": 194.706434}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:04:32.998976+05:30", "timestamp": 1755783272.998976}}}
{"text": "2025-08-21 19:04:32.999 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:03:14.706946", "seconds": 194.706946}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:04:32.999488+05:30", "timestamp": 1755783272.999488}}}
{"text": "2025-08-21 19:04:33.000 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:03:14.707664", "seconds": 194.707664}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:04:33.000206+05:30", "timestamp": 1755783273.000206}}}
{"text": "2025-08-21 19:04:33.000 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:03:14.708401", "seconds": 194.708401}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:04:33.000943+05:30", "timestamp": 1755783273.000943}}}
{"text": "2025-08-21 19:04:33.001 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:03:14.709052", "seconds": 194.709052}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:04:33.001594+05:30", "timestamp": 1755783273.001594}}}
{"text": "2025-08-21 19:04:33.002 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:03:14.709516", "seconds": 194.709516}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:04:33.002058+05:30", "timestamp": 1755783273.002058}}}
{"text": "2025-08-21 19:04:33.002 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:03:14.709926", "seconds": 194.709926}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:04:33.002468+05:30", "timestamp": 1755783273.002468}}}
{"text": "2025-08-21 19:04:33.002 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:03:14.710351", "seconds": 194.710351}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:04:33.002893+05:30", "timestamp": 1755783273.002893}}}
{"text": "2025-08-21 19:04:33.833 | INFO     | app.services.dhan_client:get_pnl:489 - Starting accurate P&L calculation\n", "record": {"elapsed": {"repr": "0:03:15.540906", "seconds": 195.540906}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 489, "message": "Starting accurate P&L calculation", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:04:33.833448+05:30", "timestamp": 1755783273.833448}}}
{"text": "2025-08-21 19:04:33.834 | INFO     | app.services.dhan_client:get_pnl:491 - Fetched 5 positions\n", "record": {"elapsed": {"repr": "0:03:15.541788", "seconds": 195.541788}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 491, "message": "Fetched 5 positions", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:04:33.834330+05:30", "timestamp": 1755783273.83433}}}
{"text": "2025-08-21 19:04:33.834 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for RELIANCE: unrealized=-445047.83, today=-445047.83\n", "record": {"elapsed": {"repr": "0:03:15.542452", "seconds": 195.542452}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for RELIANCE: unrealized=-445047.83, today=-445047.83", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:04:33.834994+05:30", "timestamp": 1755783273.834994}}}
{"text": "2025-08-21 19:04:33.835 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for TCS: unrealized=-46266.91, today=-46266.91\n", "record": {"elapsed": {"repr": "0:03:15.542887", "seconds": 195.542887}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for TCS: unrealized=-46266.91, today=-46266.91", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:04:33.835429+05:30", "timestamp": 1755783273.835429}}}
{"text": "2025-08-21 19:04:33.835 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for HDFC: unrealized=1639966.3, today=1639966.3\n", "record": {"elapsed": {"repr": "0:03:15.543280", "seconds": 195.54328}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for HDFC: unrealized=1639966.3, today=1639966.3", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:04:33.835822+05:30", "timestamp": 1755783273.835822}}}
{"text": "2025-08-21 19:04:33.836 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for INFY: unrealized=14900.12, today=14900.12\n", "record": {"elapsed": {"repr": "0:03:15.543741", "seconds": 195.543741}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for INFY: unrealized=14900.12, today=14900.12", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:04:33.836283+05:30", "timestamp": 1755783273.836283}}}
{"text": "2025-08-21 19:04:33.836 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for ICICIBANK: unrealized=-455020.32, today=-455020.32\n", "record": {"elapsed": {"repr": "0:03:15.544195", "seconds": 195.544195}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for ICICIBANK: unrealized=-455020.32, today=-455020.32", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:04:33.836737+05:30", "timestamp": 1755783273.836737}}}
{"text": "2025-08-21 19:04:33.837 | INFO     | app.services.dhan_client:get_pnl:545 - Calculated totals - realized: 0.0, unrealized: 708531.36, day: 708531.36\n", "record": {"elapsed": {"repr": "0:03:15.544593", "seconds": 195.544593}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 545, "message": "Calculated totals - realized: 0.0, unrealized: 708531.36, day: 708531.36", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:04:33.837135+05:30", "timestamp": 1755783273.837135}}}
{"text": "2025-08-21 19:04:33.837 | DEBUG    | app.services.dhan_client:get_pnl:554 - PnL consistency check passed: drift=‚Çπ0.00\n", "record": {"elapsed": {"repr": "0:03:15.544978", "seconds": 195.544978}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 554, "message": "PnL consistency check passed: drift=‚Çπ0.00", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:04:33.837520+05:30", "timestamp": 1755783273.83752}}}
{"text": "2025-08-21 19:04:33.837 | DEBUG    | app.services.dhan_client:get_pnl:558 - Creating PnLTotals...\n", "record": {"elapsed": {"repr": "0:03:15.545426", "seconds": 195.545426}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 558, "message": "Creating PnLTotals...", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:04:33.837968+05:30", "timestamp": 1755783273.837968}}}
{"text": "2025-08-21 19:04:33.838 | DEBUG    | app.services.dhan_client:get_pnl:565 - PnLTotals created successfully\n", "record": {"elapsed": {"repr": "0:03:15.545821", "seconds": 195.545821}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 565, "message": "PnLTotals created successfully", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:04:33.838363+05:30", "timestamp": 1755783273.838363}}}
{"text": "2025-08-21 19:04:33.839 | DEBUG    | app.services.dhan_client:get_pnl:574 - Creating PnL model...\n", "record": {"elapsed": {"repr": "0:03:15.546477", "seconds": 195.546477}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 574, "message": "Creating PnL model...", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:04:33.839019+05:30", "timestamp": 1755783273.839019}}}
{"text": "2025-08-21 19:04:33.839 | DEBUG    | app.services.dhan_client:get_pnl:575 - Model fields: totals=<class 'app.models.schemas.PnLTotals'>, perSymbol=5, updated_at=2025-08-21 19:04:33.834926+05:30, trading_day=2025-08-21\n", "record": {"elapsed": {"repr": "0:03:15.547169", "seconds": 195.547169}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 575, "message": "Model fields: totals=<class 'app.models.schemas.PnLTotals'>, perSymbol=5, updated_at=2025-08-21 19:04:33.834926+05:30, trading_day=2025-08-21", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:04:33.839711+05:30", "timestamp": 1755783273.839711}}}
{"text": "2025-08-21 19:04:33.840 | DEBUG    | app.services.dhan_client:get_pnl:584 - Created PnL model: totals=PnLTotals(realized=0.0, unrealized=708531.36, day=708531.36, currency='INR') per_symbol=[PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1727, avg=618.93, ltp=361.23, unrealized=-445047.83, today_pnl=-445047.83), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=167, avg=948.57, ltp=1225.62, unrealized=-46266.91, today_pnl=-46266.91), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=1347, avg=801.44, ltp=2018.94, unrealized=1639966.3, today_pnl=1639966.3), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=143, avg=1427.62, ltp=1323.42, unrealized=14900.12, today_pnl=14900.12), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=438, avg=1994.48, ltp=955.62, unrealized=-455020.32, today_pnl=-455020.32)] updated_at=datetime.datetime(2025, 8, 21, 19, 4, 33, 834926, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))) trading_day='2025-08-21'\n", "record": {"elapsed": {"repr": "0:03:15.547837", "seconds": 195.547837}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 584, "message": "Created PnL model: totals=PnLTotals(realized=0.0, unrealized=708531.36, day=708531.36, currency='INR') per_symbol=[PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1727, avg=618.93, ltp=361.23, unrealized=-445047.83, today_pnl=-445047.83), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=167, avg=948.57, ltp=1225.62, unrealized=-46266.91, today_pnl=-46266.91), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=1347, avg=801.44, ltp=2018.94, unrealized=1639966.3, today_pnl=1639966.3), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=143, avg=1427.62, ltp=1323.42, unrealized=14900.12, today_pnl=14900.12), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=438, avg=1994.48, ltp=955.62, unrealized=-455020.32, today_pnl=-455020.32)] updated_at=datetime.datetime(2025, 8, 21, 19, 4, 33, 834926, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))) trading_day='2025-08-21'", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:04:33.840379+05:30", "timestamp": 1755783273.840379}}}
{"text": "2025-08-21 19:04:33.841 | DEBUG    | app.services.dhan_client:get_pnl:585 - PnL model fields: {'totals': PnLTotals(realized=0.0, unrealized=708531.36, day=708531.36, currency='INR'), 'per_symbol': [PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1727, avg=618.93, ltp=361.23, unrealized=-445047.83, today_pnl=-445047.83), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=167, avg=948.57, ltp=1225.62, unrealized=-46266.91, today_pnl=-46266.91), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=1347, avg=801.44, ltp=2018.94, unrealized=1639966.3, today_pnl=1639966.3), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=143, avg=1427.62, ltp=1323.42, unrealized=14900.12, today_pnl=14900.12), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=438, avg=1994.48, ltp=955.62, unrealized=-455020.32, today_pnl=-455020.32)], 'updated_at': datetime.datetime(2025, 8, 21, 19, 4, 33, 834926, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))), 'trading_day': '2025-08-21'}\n", "record": {"elapsed": {"repr": "0:03:15.548691", "seconds": 195.548691}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 585, "message": "PnL model fields: {'totals': PnLTotals(realized=0.0, unrealized=708531.36, day=708531.36, currency='INR'), 'per_symbol': [PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1727, avg=618.93, ltp=361.23, unrealized=-445047.83, today_pnl=-445047.83), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=167, avg=948.57, ltp=1225.62, unrealized=-46266.91, today_pnl=-46266.91), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=1347, avg=801.44, ltp=2018.94, unrealized=1639966.3, today_pnl=1639966.3), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=143, avg=1427.62, ltp=1323.42, unrealized=14900.12, today_pnl=14900.12), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=438, avg=1994.48, ltp=955.62, unrealized=-455020.32, today_pnl=-455020.32)], 'updated_at': datetime.datetime(2025, 8, 21, 19, 4, 33, 834926, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))), 'trading_day': '2025-08-21'}", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:04:33.841233+05:30", "timestamp": 1755783273.841233}}}
{"text": "2025-08-21 19:04:33.842 | INFO     | app.services.dhan_client:get_pnl:587 - P&L calculation completed successfully: 5 symbols, unrealized=‚Çπ708531.36\n", "record": {"elapsed": {"repr": "0:03:15.549509", "seconds": 195.549509}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 587, "message": "P&L calculation completed successfully: 5 symbols, unrealized=‚Çπ708531.36", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:04:33.842051+05:30", "timestamp": 1755783273.842051}}}
{"text": "2025-08-21 19:04:33.843 | DEBUG    | app.ws.live:emit_delta:408 - Emitted pnl delta: seq=215\n", "record": {"elapsed": {"repr": "0:03:15.550604", "seconds": 195.550604}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "emit_delta", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 408, "message": "Emitted pnl delta: seq=215", "module": "live", "name": "app.ws.live", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:04:33.843146+05:30", "timestamp": 1755783273.843146}}}
{"text": "2025-08-21 19:04:33.844 | DEBUG    | app.ws.live:emit_delta:408 - Emitted positions delta: seq=216\n", "record": {"elapsed": {"repr": "0:03:15.551463", "seconds": 195.551463}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "emit_delta", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 408, "message": "Emitted positions delta: seq=216", "module": "live", "name": "app.ws.live", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:04:33.844005+05:30", "timestamp": 1755783273.844005}}}
{"text": "2025-08-21 19:04:35.003 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:03:16.711140", "seconds": 196.71114}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:04:35.003682+05:30", "timestamp": 1755783275.003682}}}
{"text": "2025-08-21 19:04:35.004 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:03:16.711816", "seconds": 196.711816}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:04:35.004358+05:30", "timestamp": 1755783275.004358}}}
{"text": "2025-08-21 19:04:35.005 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:03:16.712687", "seconds": 196.712687}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:04:35.005229+05:30", "timestamp": 1755783275.005229}}}
{"text": "2025-08-21 19:04:35.005 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:03:16.713316", "seconds": 196.713316}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:04:35.005858+05:30", "timestamp": 1755783275.005858}}}
{"text": "2025-08-21 19:04:35.006 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:03:16.713818", "seconds": 196.713818}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:04:35.006360+05:30", "timestamp": 1755783275.00636}}}
{"text": "2025-08-21 19:04:35.006 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:03:16.714304", "seconds": 196.714304}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:04:35.006846+05:30", "timestamp": 1755783275.006846}}}
{"text": "2025-08-21 19:04:35.007 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:03:16.714850", "seconds": 196.71485}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:04:35.007392+05:30", "timestamp": 1755783275.007392}}}
{"text": "2025-08-21 19:04:35.008 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:03:16.715486", "seconds": 196.715486}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:04:35.008028+05:30", "timestamp": 1755783275.008028}}}
{"text": "2025-08-21 19:04:35.008 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:03:16.716247", "seconds": 196.716247}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:04:35.008789+05:30", "timestamp": 1755783275.008789}}}
{"text": "2025-08-21 19:04:35.009 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:03:16.717058", "seconds": 196.717058}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:04:35.009600+05:30", "timestamp": 1755783275.0096}}}
{"text": "2025-08-21 19:04:35.593 | INFO     | app.services.dhan_client:get_pnl:489 - Starting accurate P&L calculation\n", "record": {"elapsed": {"repr": "0:03:17.300536", "seconds": 197.300536}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 489, "message": "Starting accurate P&L calculation", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:04:35.593078+05:30", "timestamp": 1755783275.593078}}}
{"text": "2025-08-21 19:04:35.593 | INFO     | app.services.dhan_client:get_pnl:491 - Fetched 5 positions\n", "record": {"elapsed": {"repr": "0:03:17.301184", "seconds": 197.301184}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 491, "message": "Fetched 5 positions", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:04:35.593726+05:30", "timestamp": 1755783275.593726}}}
{"text": "2025-08-21 19:04:35.594 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for RELIANCE: unrealized=-436501.31, today=-436501.31\n", "record": {"elapsed": {"repr": "0:03:17.301681", "seconds": 197.301681}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for RELIANCE: unrealized=-436501.31, today=-436501.31", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:04:35.594223+05:30", "timestamp": 1755783275.594223}}}
{"text": "2025-08-21 19:04:35.594 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for TCS: unrealized=-45634.63, today=-45634.63\n", "record": {"elapsed": {"repr": "0:03:17.302151", "seconds": 197.302151}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for TCS: unrealized=-45634.63, today=-45634.63", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:04:35.594693+05:30", "timestamp": 1755783275.594693}}}
{"text": "2025-08-21 19:04:35.595 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for HDFC: unrealized=1686021.81, today=1686021.81\n", "record": {"elapsed": {"repr": "0:03:17.302626", "seconds": 197.302626}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for HDFC: unrealized=1686021.81, today=1686021.81", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:04:35.595168+05:30", "timestamp": 1755783275.595168}}}
{"text": "2025-08-21 19:04:35.595 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for INFY: unrealized=14832.15, today=14832.15\n", "record": {"elapsed": {"repr": "0:03:17.303077", "seconds": 197.303077}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for INFY: unrealized=14832.15, today=14832.15", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:04:35.595619+05:30", "timestamp": 1755783275.595619}}}
{"text": "2025-08-21 19:04:35.596 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for ICICIBANK: unrealized=-453472.33, today=-453472.33\n", "record": {"elapsed": {"repr": "0:03:17.303826", "seconds": 197.303826}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for ICICIBANK: unrealized=-453472.33, today=-453472.33", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:04:35.596368+05:30", "timestamp": 1755783275.596368}}}
{"text": "2025-08-21 19:04:35.596 | INFO     | app.services.dhan_client:get_pnl:545 - Calculated totals - realized: 0.0, unrealized: 765245.69, day: 765245.69\n", "record": {"elapsed": {"repr": "0:03:17.304453", "seconds": 197.304453}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 545, "message": "Calculated totals - realized: 0.0, unrealized: 765245.69, day: 765245.69", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:04:35.596995+05:30", "timestamp": 1755783275.596995}}}
{"text": "2025-08-21 19:04:35.597 | DEBUG    | app.services.dhan_client:get_pnl:554 - PnL consistency check passed: drift=‚Çπ0.00\n", "record": {"elapsed": {"repr": "0:03:17.305043", "seconds": 197.305043}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 554, "message": "PnL consistency check passed: drift=‚Çπ0.00", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:04:35.597585+05:30", "timestamp": 1755783275.597585}}}
{"text": "2025-08-21 19:04:35.598 | DEBUG    | app.services.dhan_client:get_pnl:558 - Creating PnLTotals...\n", "record": {"elapsed": {"repr": "0:03:17.305511", "seconds": 197.305511}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 558, "message": "Creating PnLTotals...", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:04:35.598053+05:30", "timestamp": 1755783275.598053}}}
{"text": "2025-08-21 19:04:35.598 | DEBUG    | app.services.dhan_client:get_pnl:565 - PnLTotals created successfully\n", "record": {"elapsed": {"repr": "0:03:17.305990", "seconds": 197.30599}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 565, "message": "PnLTotals created successfully", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:04:35.598532+05:30", "timestamp": 1755783275.598532}}}
{"text": "2025-08-21 19:04:35.599 | DEBUG    | app.services.dhan_client:get_pnl:574 - Creating PnL model...\n", "record": {"elapsed": {"repr": "0:03:17.306657", "seconds": 197.306657}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 574, "message": "Creating PnL model...", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:04:35.599199+05:30", "timestamp": 1755783275.599199}}}
{"text": "2025-08-21 19:04:35.599 | DEBUG    | app.services.dhan_client:get_pnl:575 - Model fields: totals=<class 'app.models.schemas.PnLTotals'>, perSymbol=5, updated_at=2025-08-21 19:04:35.594157+05:30, trading_day=2025-08-21\n", "record": {"elapsed": {"repr": "0:03:17.307423", "seconds": 197.307423}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 575, "message": "Model fields: totals=<class 'app.models.schemas.PnLTotals'>, perSymbol=5, updated_at=2025-08-21 19:04:35.594157+05:30, trading_day=2025-08-21", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:04:35.599965+05:30", "timestamp": 1755783275.599965}}}
{"text": "2025-08-21 19:04:35.601 | DEBUG    | app.services.dhan_client:get_pnl:584 - Created PnL model: totals=PnLTotals(realized=0.0, unrealized=765245.69, day=765245.69, currency='INR') per_symbol=[PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1727, avg=618.93, ltp=366.18, unrealized=-436501.31, today_pnl=-436501.31), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=167, avg=948.57, ltp=1221.83, unrealized=-45634.63, today_pnl=-45634.63), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=1347, avg=801.44, ltp=2053.13, unrealized=1686021.81, today_pnl=1686021.81), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=143, avg=1427.62, ltp=1323.9, unrealized=14832.15, today_pnl=14832.15), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=438, avg=1994.48, ltp=959.16, unrealized=-453472.33, today_pnl=-453472.33)] updated_at=datetime.datetime(2025, 8, 21, 19, 4, 35, 594157, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))) trading_day='2025-08-21'\n", "record": {"elapsed": {"repr": "0:03:17.308523", "seconds": 197.308523}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 584, "message": "Created PnL model: totals=PnLTotals(realized=0.0, unrealized=765245.69, day=765245.69, currency='INR') per_symbol=[PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1727, avg=618.93, ltp=366.18, unrealized=-436501.31, today_pnl=-436501.31), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=167, avg=948.57, ltp=1221.83, unrealized=-45634.63, today_pnl=-45634.63), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=1347, avg=801.44, ltp=2053.13, unrealized=1686021.81, today_pnl=1686021.81), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=143, avg=1427.62, ltp=1323.9, unrealized=14832.15, today_pnl=14832.15), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=438, avg=1994.48, ltp=959.16, unrealized=-453472.33, today_pnl=-453472.33)] updated_at=datetime.datetime(2025, 8, 21, 19, 4, 35, 594157, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))) trading_day='2025-08-21'", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:04:35.601065+05:30", "timestamp": 1755783275.601065}}}
{"text": "2025-08-21 19:04:35.601 | DEBUG    | app.services.dhan_client:get_pnl:585 - PnL model fields: {'totals': PnLTotals(realized=0.0, unrealized=765245.69, day=765245.69, currency='INR'), 'per_symbol': [PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1727, avg=618.93, ltp=366.18, unrealized=-436501.31, today_pnl=-436501.31), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=167, avg=948.57, ltp=1221.83, unrealized=-45634.63, today_pnl=-45634.63), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=1347, avg=801.44, ltp=2053.13, unrealized=1686021.81, today_pnl=1686021.81), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=143, avg=1427.62, ltp=1323.9, unrealized=14832.15, today_pnl=14832.15), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=438, avg=1994.48, ltp=959.16, unrealized=-453472.33, today_pnl=-453472.33)], 'updated_at': datetime.datetime(2025, 8, 21, 19, 4, 35, 594157, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))), 'trading_day': '2025-08-21'}\n", "record": {"elapsed": {"repr": "0:03:17.309267", "seconds": 197.309267}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 585, "message": "PnL model fields: {'totals': PnLTotals(realized=0.0, unrealized=765245.69, day=765245.69, currency='INR'), 'per_symbol': [PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1727, avg=618.93, ltp=366.18, unrealized=-436501.31, today_pnl=-436501.31), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=167, avg=948.57, ltp=1221.83, unrealized=-45634.63, today_pnl=-45634.63), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=1347, avg=801.44, ltp=2053.13, unrealized=1686021.81, today_pnl=1686021.81), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=143, avg=1427.62, ltp=1323.9, unrealized=14832.15, today_pnl=14832.15), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=438, avg=1994.48, ltp=959.16, unrealized=-453472.33, today_pnl=-453472.33)], 'updated_at': datetime.datetime(2025, 8, 21, 19, 4, 35, 594157, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))), 'trading_day': '2025-08-21'}", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:04:35.601809+05:30", "timestamp": 1755783275.601809}}}
{"text": "2025-08-21 19:04:35.602 | INFO     | app.services.dhan_client:get_pnl:587 - P&L calculation completed successfully: 5 symbols, unrealized=‚Çπ765245.69\n", "record": {"elapsed": {"repr": "0:03:17.310029", "seconds": 197.310029}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 587, "message": "P&L calculation completed successfully: 5 symbols, unrealized=‚Çπ765245.69", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:04:35.602571+05:30", "timestamp": 1755783275.602571}}}
{"text": "2025-08-21 19:04:35.603 | DEBUG    | app.ws.live:emit_delta:408 - Emitted pnl delta: seq=217\n", "record": {"elapsed": {"repr": "0:03:17.310788", "seconds": 197.310788}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "emit_delta", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 408, "message": "Emitted pnl delta: seq=217", "module": "live", "name": "app.ws.live", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:04:35.603330+05:30", "timestamp": 1755783275.60333}}}
{"text": "2025-08-21 19:04:35.604 | DEBUG    | app.ws.live:emit_delta:408 - Emitted positions delta: seq=218\n", "record": {"elapsed": {"repr": "0:03:17.311593", "seconds": 197.311593}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "emit_delta", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 408, "message": "Emitted positions delta: seq=218", "module": "live", "name": "app.ws.live", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:04:35.604135+05:30", "timestamp": 1755783275.604135}}}
{"text": "2025-08-21 19:04:37.010 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:03:18.717827", "seconds": 198.717827}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:04:37.010369+05:30", "timestamp": 1755783277.010369}}}
{"text": "2025-08-21 19:04:37.011 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:03:18.718490", "seconds": 198.71849}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:04:37.011032+05:30", "timestamp": 1755783277.011032}}}
{"text": "2025-08-21 19:04:37.011 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:03:18.719136", "seconds": 198.719136}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:04:37.011678+05:30", "timestamp": 1755783277.011678}}}
{"text": "2025-08-21 19:04:37.012 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:03:18.720125", "seconds": 198.720125}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:04:37.012667+05:30", "timestamp": 1755783277.012667}}}
{"text": "2025-08-21 19:04:37.013 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:03:18.720666", "seconds": 198.720666}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:04:37.013208+05:30", "timestamp": 1755783277.013208}}}
{"text": "2025-08-21 19:04:37.013 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:03:18.721138", "seconds": 198.721138}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:04:37.013680+05:30", "timestamp": 1755783277.01368}}}
{"text": "2025-08-21 19:04:37.014 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:03:18.721608", "seconds": 198.721608}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:04:37.014150+05:30", "timestamp": 1755783277.01415}}}
{"text": "2025-08-21 19:04:37.014 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:03:18.722290", "seconds": 198.72229}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:04:37.014832+05:30", "timestamp": 1755783277.014832}}}
{"text": "2025-08-21 19:04:37.015 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:03:18.723035", "seconds": 198.723035}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:04:37.015577+05:30", "timestamp": 1755783277.015577}}}
{"text": "2025-08-21 19:04:37.016 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:03:18.723877", "seconds": 198.723877}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:04:37.016419+05:30", "timestamp": 1755783277.016419}}}
{"text": "2025-08-21 19:04:37.237 | INFO     | app.services.dhan_client:get_pnl:489 - Starting accurate P&L calculation\n", "record": {"elapsed": {"repr": "0:03:18.944778", "seconds": 198.944778}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 489, "message": "Starting accurate P&L calculation", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:04:37.237320+05:30", "timestamp": 1755783277.23732}}}
{"text": "2025-08-21 19:04:37.237 | INFO     | app.services.dhan_client:get_pnl:491 - Fetched 5 positions\n", "record": {"elapsed": {"repr": "0:03:18.945374", "seconds": 198.945374}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 491, "message": "Fetched 5 positions", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:04:37.237916+05:30", "timestamp": 1755783277.237916}}}
{"text": "2025-08-21 19:04:37.238 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for RELIANCE: unrealized=-430630.06, today=-430630.06\n", "record": {"elapsed": {"repr": "0:03:18.946123", "seconds": 198.946123}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for RELIANCE: unrealized=-430630.06, today=-430630.06", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:04:37.238665+05:30", "timestamp": 1755783277.238665}}}
{"text": "2025-08-21 19:04:37.239 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for TCS: unrealized=-42479.16, today=-42479.16\n", "record": {"elapsed": {"repr": "0:03:18.946751", "seconds": 198.946751}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for TCS: unrealized=-42479.16, today=-42479.16", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:04:37.239293+05:30", "timestamp": 1755783277.239293}}}
{"text": "2025-08-21 19:04:37.240 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for HDFC: unrealized=1738841.82, today=1738841.82\n", "record": {"elapsed": {"repr": "0:03:18.947549", "seconds": 198.947549}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for HDFC: unrealized=1738841.82, today=1738841.82", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:04:37.240091+05:30", "timestamp": 1755783277.240091}}}
{"text": "2025-08-21 19:04:37.240 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for INFY: unrealized=15286.32, today=15286.32\n", "record": {"elapsed": {"repr": "0:03:18.948336", "seconds": 198.948336}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for INFY: unrealized=15286.32, today=15286.32", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:04:37.240878+05:30", "timestamp": 1755783277.240878}}}
{"text": "2025-08-21 19:04:37.241 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for ICICIBANK: unrealized=-451559.27, today=-451559.27\n", "record": {"elapsed": {"repr": "0:03:18.948901", "seconds": 198.948901}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for ICICIBANK: unrealized=-451559.27, today=-451559.27", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:04:37.241443+05:30", "timestamp": 1755783277.241443}}}
{"text": "2025-08-21 19:04:37.241 | INFO     | app.services.dhan_client:get_pnl:545 - Calculated totals - realized: 0.0, unrealized: 829459.65, day: 829459.65\n", "record": {"elapsed": {"repr": "0:03:18.949411", "seconds": 198.949411}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 545, "message": "Calculated totals - realized: 0.0, unrealized: 829459.65, day: 829459.65", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:04:37.241953+05:30", "timestamp": 1755783277.241953}}}
{"text": "2025-08-21 19:04:37.242 | DEBUG    | app.services.dhan_client:get_pnl:554 - PnL consistency check passed: drift=‚Çπ0.00\n", "record": {"elapsed": {"repr": "0:03:18.949849", "seconds": 198.949849}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 554, "message": "PnL consistency check passed: drift=‚Çπ0.00", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:04:37.242391+05:30", "timestamp": 1755783277.242391}}}
{"text": "2025-08-21 19:04:37.242 | DEBUG    | app.services.dhan_client:get_pnl:558 - Creating PnLTotals...\n", "record": {"elapsed": {"repr": "0:03:18.950279", "seconds": 198.950279}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 558, "message": "Creating PnLTotals...", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:04:37.242821+05:30", "timestamp": 1755783277.242821}}}
{"text": "2025-08-21 19:04:37.243 | DEBUG    | app.services.dhan_client:get_pnl:565 - PnLTotals created successfully\n", "record": {"elapsed": {"repr": "0:03:18.950690", "seconds": 198.95069}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 565, "message": "PnLTotals created successfully", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:04:37.243232+05:30", "timestamp": 1755783277.243232}}}
{"text": "2025-08-21 19:04:37.243 | DEBUG    | app.services.dhan_client:get_pnl:574 - Creating PnL model...\n", "record": {"elapsed": {"repr": "0:03:18.951157", "seconds": 198.951157}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 574, "message": "Creating PnL model...", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:04:37.243699+05:30", "timestamp": 1755783277.243699}}}
{"text": "2025-08-21 19:04:37.244 | DEBUG    | app.services.dhan_client:get_pnl:575 - Model fields: totals=<class 'app.models.schemas.PnLTotals'>, perSymbol=5, updated_at=2025-08-21 19:04:37.238586+05:30, trading_day=2025-08-21\n", "record": {"elapsed": {"repr": "0:03:18.951698", "seconds": 198.951698}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 575, "message": "Model fields: totals=<class 'app.models.schemas.PnLTotals'>, perSymbol=5, updated_at=2025-08-21 19:04:37.238586+05:30, trading_day=2025-08-21", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:04:37.244240+05:30", "timestamp": 1755783277.24424}}}
{"text": "2025-08-21 19:04:37.244 | DEBUG    | app.services.dhan_client:get_pnl:584 - Created PnL model: totals=PnLTotals(realized=0.0, unrealized=829459.65, day=829459.65, currency='INR') per_symbol=[PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1727, avg=618.93, ltp=369.58, unrealized=-430630.06, today_pnl=-430630.06), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=167, avg=948.57, ltp=1202.94, unrealized=-42479.16, today_pnl=-42479.16), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=1347, avg=801.44, ltp=2092.34, unrealized=1738841.82, today_pnl=1738841.82), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=143, avg=1427.62, ltp=1320.72, unrealized=15286.32, today_pnl=15286.32), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=438, avg=1994.48, ltp=963.52, unrealized=-451559.27, today_pnl=-451559.27)] updated_at=datetime.datetime(2025, 8, 21, 19, 4, 37, 238586, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))) trading_day='2025-08-21'\n", "record": {"elapsed": {"repr": "0:03:18.952330", "seconds": 198.95233}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 584, "message": "Created PnL model: totals=PnLTotals(realized=0.0, unrealized=829459.65, day=829459.65, currency='INR') per_symbol=[PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1727, avg=618.93, ltp=369.58, unrealized=-430630.06, today_pnl=-430630.06), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=167, avg=948.57, ltp=1202.94, unrealized=-42479.16, today_pnl=-42479.16), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=1347, avg=801.44, ltp=2092.34, unrealized=1738841.82, today_pnl=1738841.82), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=143, avg=1427.62, ltp=1320.72, unrealized=15286.32, today_pnl=15286.32), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=438, avg=1994.48, ltp=963.52, unrealized=-451559.27, today_pnl=-451559.27)] updated_at=datetime.datetime(2025, 8, 21, 19, 4, 37, 238586, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))) trading_day='2025-08-21'", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:04:37.244872+05:30", "timestamp": 1755783277.244872}}}
{"text": "2025-08-21 19:04:37.246 | DEBUG    | app.services.dhan_client:get_pnl:585 - PnL model fields: {'totals': PnLTotals(realized=0.0, unrealized=829459.65, day=829459.65, currency='INR'), 'per_symbol': [PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1727, avg=618.93, ltp=369.58, unrealized=-430630.06, today_pnl=-430630.06), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=167, avg=948.57, ltp=1202.94, unrealized=-42479.16, today_pnl=-42479.16), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=1347, avg=801.44, ltp=2092.34, unrealized=1738841.82, today_pnl=1738841.82), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=143, avg=1427.62, ltp=1320.72, unrealized=15286.32, today_pnl=15286.32), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=438, avg=1994.48, ltp=963.52, unrealized=-451559.27, today_pnl=-451559.27)], 'updated_at': datetime.datetime(2025, 8, 21, 19, 4, 37, 238586, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))), 'trading_day': '2025-08-21'}\n", "record": {"elapsed": {"repr": "0:03:18.953478", "seconds": 198.953478}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 585, "message": "PnL model fields: {'totals': PnLTotals(realized=0.0, unrealized=829459.65, day=829459.65, currency='INR'), 'per_symbol': [PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1727, avg=618.93, ltp=369.58, unrealized=-430630.06, today_pnl=-430630.06), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=167, avg=948.57, ltp=1202.94, unrealized=-42479.16, today_pnl=-42479.16), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=1347, avg=801.44, ltp=2092.34, unrealized=1738841.82, today_pnl=1738841.82), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=143, avg=1427.62, ltp=1320.72, unrealized=15286.32, today_pnl=15286.32), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=438, avg=1994.48, ltp=963.52, unrealized=-451559.27, today_pnl=-451559.27)], 'updated_at': datetime.datetime(2025, 8, 21, 19, 4, 37, 238586, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))), 'trading_day': '2025-08-21'}", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:04:37.246020+05:30", "timestamp": 1755783277.24602}}}
{"text": "2025-08-21 19:04:37.246 | INFO     | app.services.dhan_client:get_pnl:587 - P&L calculation completed successfully: 5 symbols, unrealized=‚Çπ829459.65\n", "record": {"elapsed": {"repr": "0:03:18.954207", "seconds": 198.954207}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 587, "message": "P&L calculation completed successfully: 5 symbols, unrealized=‚Çπ829459.65", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:04:37.246749+05:30", "timestamp": 1755783277.246749}}}
{"text": "2025-08-21 19:04:37.247 | DEBUG    | app.ws.live:emit_delta:408 - Emitted pnl delta: seq=219\n", "record": {"elapsed": {"repr": "0:03:18.954978", "seconds": 198.954978}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "emit_delta", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 408, "message": "Emitted pnl delta: seq=219", "module": "live", "name": "app.ws.live", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:04:37.247520+05:30", "timestamp": 1755783277.24752}}}
{"text": "2025-08-21 19:04:37.248 | DEBUG    | app.ws.live:emit_delta:408 - Emitted positions delta: seq=220\n", "record": {"elapsed": {"repr": "0:03:18.955953", "seconds": 198.955953}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "emit_delta", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 408, "message": "Emitted positions delta: seq=220", "module": "live", "name": "app.ws.live", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:04:37.248495+05:30", "timestamp": 1755783277.248495}}}
{"text": "2025-08-21 19:04:39.017 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:03:20.724787", "seconds": 200.724787}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:04:39.017329+05:30", "timestamp": 1755783279.017329}}}
{"text": "2025-08-21 19:04:39.017 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:03:20.725436", "seconds": 200.725436}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:04:39.017978+05:30", "timestamp": 1755783279.017978}}}
{"text": "2025-08-21 19:04:39.018 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:03:20.725952", "seconds": 200.725952}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:04:39.018494+05:30", "timestamp": 1755783279.018494}}}
{"text": "2025-08-21 19:04:39.019 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:03:20.726610", "seconds": 200.72661}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:04:39.019152+05:30", "timestamp": 1755783279.019152}}}
{"text": "2025-08-21 19:04:39.020 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:03:20.727514", "seconds": 200.727514}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:04:39.020056+05:30", "timestamp": 1755783279.020056}}}
{"text": "2025-08-21 19:04:39.020 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:03:20.728064", "seconds": 200.728064}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:04:39.020606+05:30", "timestamp": 1755783279.020606}}}
{"text": "2025-08-21 19:04:39.021 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:03:20.728560", "seconds": 200.72856}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:04:39.021102+05:30", "timestamp": 1755783279.021102}}}
{"text": "2025-08-21 19:04:39.021 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:03:20.729007", "seconds": 200.729007}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:04:39.021549+05:30", "timestamp": 1755783279.021549}}}
{"text": "2025-08-21 19:04:39.022 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:03:20.729576", "seconds": 200.729576}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:04:39.022118+05:30", "timestamp": 1755783279.022118}}}
{"text": "2025-08-21 19:04:39.022 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:03:20.730348", "seconds": 200.730348}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:04:39.022890+05:30", "timestamp": 1755783279.02289}}}
{"text": "2025-08-21 19:04:39.200 | INFO     | app.services.dhan_client:get_pnl:489 - Starting accurate P&L calculation\n", "record": {"elapsed": {"repr": "0:03:20.907820", "seconds": 200.90782}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 489, "message": "Starting accurate P&L calculation", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:04:39.200362+05:30", "timestamp": 1755783279.200362}}}
{"text": "2025-08-21 19:04:39.200 | INFO     | app.services.dhan_client:get_pnl:491 - Fetched 5 positions\n", "record": {"elapsed": {"repr": "0:03:20.908438", "seconds": 200.908438}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 491, "message": "Fetched 5 positions", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:04:39.200980+05:30", "timestamp": 1755783279.20098}}}
{"text": "2025-08-21 19:04:39.201 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for RELIANCE: unrealized=-435084.2, today=-435084.2\n", "record": {"elapsed": {"repr": "0:03:20.908915", "seconds": 200.908915}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for RELIANCE: unrealized=-435084.2, today=-435084.2", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:04:39.201457+05:30", "timestamp": 1755783279.201457}}}
{"text": "2025-08-21 19:04:39.201 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for TCS: unrealized=-41869.58, today=-41869.58\n", "record": {"elapsed": {"repr": "0:03:20.909413", "seconds": 200.909413}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for TCS: unrealized=-41869.58, today=-41869.58", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:04:39.201955+05:30", "timestamp": 1755783279.201955}}}
{"text": "2025-08-21 19:04:39.202 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for HDFC: unrealized=1744935.77, today=1744935.77\n", "record": {"elapsed": {"repr": "0:03:20.910110", "seconds": 200.91011}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for HDFC: unrealized=1744935.77, today=1744935.77", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:04:39.202652+05:30", "timestamp": 1755783279.202652}}}
{"text": "2025-08-21 19:04:39.203 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for INFY: unrealized=14121.38, today=14121.38\n", "record": {"elapsed": {"repr": "0:03:20.910866", "seconds": 200.910866}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for INFY: unrealized=14121.38, today=14121.38", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:04:39.203408+05:30", "timestamp": 1755783279.203408}}}
{"text": "2025-08-21 19:04:39.204 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for ICICIBANK: unrealized=-451477.02, today=-451477.02\n", "record": {"elapsed": {"repr": "0:03:20.911506", "seconds": 200.911506}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for ICICIBANK: unrealized=-451477.02, today=-451477.02", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:04:39.204048+05:30", "timestamp": 1755783279.204048}}}
{"text": "2025-08-21 19:04:39.204 | INFO     | app.services.dhan_client:get_pnl:545 - Calculated totals - realized: 0.0, unrealized: 830626.35, day: 830626.35\n", "record": {"elapsed": {"repr": "0:03:20.911996", "seconds": 200.911996}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 545, "message": "Calculated totals - realized: 0.0, unrealized: 830626.35, day: 830626.35", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:04:39.204538+05:30", "timestamp": 1755783279.204538}}}
{"text": "2025-08-21 19:04:39.205 | DEBUG    | app.services.dhan_client:get_pnl:554 - PnL consistency check passed: drift=‚Çπ0.00\n", "record": {"elapsed": {"repr": "0:03:20.912549", "seconds": 200.912549}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 554, "message": "PnL consistency check passed: drift=‚Çπ0.00", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:04:39.205091+05:30", "timestamp": 1755783279.205091}}}
{"text": "2025-08-21 19:04:39.205 | DEBUG    | app.services.dhan_client:get_pnl:558 - Creating PnLTotals...\n", "record": {"elapsed": {"repr": "0:03:20.913215", "seconds": 200.913215}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 558, "message": "Creating PnLTotals...", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:04:39.205757+05:30", "timestamp": 1755783279.205757}}}
{"text": "2025-08-21 19:04:39.206 | DEBUG    | app.services.dhan_client:get_pnl:565 - PnLTotals created successfully\n", "record": {"elapsed": {"repr": "0:03:20.914177", "seconds": 200.914177}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 565, "message": "PnLTotals created successfully", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:04:39.206719+05:30", "timestamp": 1755783279.206719}}}
{"text": "2025-08-21 19:04:39.207 | DEBUG    | app.services.dhan_client:get_pnl:574 - Creating PnL model...\n", "record": {"elapsed": {"repr": "0:03:20.914663", "seconds": 200.914663}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 574, "message": "Creating PnL model...", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:04:39.207205+05:30", "timestamp": 1755783279.207205}}}
{"text": "2025-08-21 19:04:39.207 | DEBUG    | app.services.dhan_client:get_pnl:575 - Model fields: totals=<class 'app.models.schemas.PnLTotals'>, perSymbol=5, updated_at=2025-08-21 19:04:39.201383+05:30, trading_day=2025-08-21\n", "record": {"elapsed": {"repr": "0:03:20.915080", "seconds": 200.91508}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 575, "message": "Model fields: totals=<class 'app.models.schemas.PnLTotals'>, perSymbol=5, updated_at=2025-08-21 19:04:39.201383+05:30, trading_day=2025-08-21", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:04:39.207622+05:30", "timestamp": 1755783279.207622}}}
{"text": "2025-08-21 19:04:39.208 | DEBUG    | app.services.dhan_client:get_pnl:584 - Created PnL model: totals=PnLTotals(realized=0.0, unrealized=830626.35, day=830626.35, currency='INR') per_symbol=[PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1727, avg=618.93, ltp=367.0, unrealized=-435084.2, today_pnl=-435084.2), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=167, avg=948.57, ltp=1199.29, unrealized=-41869.58, today_pnl=-41869.58), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=1347, avg=801.44, ltp=2096.86, unrealized=1744935.77, today_pnl=1744935.77), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=143, avg=1427.62, ltp=1328.87, unrealized=14121.38, today_pnl=14121.38), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=438, avg=1994.48, ltp=963.71, unrealized=-451477.02, today_pnl=-451477.02)] updated_at=datetime.datetime(2025, 8, 21, 19, 4, 39, 201383, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))) trading_day='2025-08-21'\n", "record": {"elapsed": {"repr": "0:03:20.915662", "seconds": 200.915662}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 584, "message": "Created PnL model: totals=PnLTotals(realized=0.0, unrealized=830626.35, day=830626.35, currency='INR') per_symbol=[PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1727, avg=618.93, ltp=367.0, unrealized=-435084.2, today_pnl=-435084.2), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=167, avg=948.57, ltp=1199.29, unrealized=-41869.58, today_pnl=-41869.58), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=1347, avg=801.44, ltp=2096.86, unrealized=1744935.77, today_pnl=1744935.77), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=143, avg=1427.62, ltp=1328.87, unrealized=14121.38, today_pnl=14121.38), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=438, avg=1994.48, ltp=963.71, unrealized=-451477.02, today_pnl=-451477.02)] updated_at=datetime.datetime(2025, 8, 21, 19, 4, 39, 201383, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))) trading_day='2025-08-21'", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:04:39.208204+05:30", "timestamp": 1755783279.208204}}}
{"text": "2025-08-21 19:04:39.208 | DEBUG    | app.services.dhan_client:get_pnl:585 - PnL model fields: {'totals': PnLTotals(realized=0.0, unrealized=830626.35, day=830626.35, currency='INR'), 'per_symbol': [PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1727, avg=618.93, ltp=367.0, unrealized=-435084.2, today_pnl=-435084.2), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=167, avg=948.57, ltp=1199.29, unrealized=-41869.58, today_pnl=-41869.58), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=1347, avg=801.44, ltp=2096.86, unrealized=1744935.77, today_pnl=1744935.77), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=143, avg=1427.62, ltp=1328.87, unrealized=14121.38, today_pnl=14121.38), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=438, avg=1994.48, ltp=963.71, unrealized=-451477.02, today_pnl=-451477.02)], 'updated_at': datetime.datetime(2025, 8, 21, 19, 4, 39, 201383, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))), 'trading_day': '2025-08-21'}\n", "record": {"elapsed": {"repr": "0:03:20.916426", "seconds": 200.916426}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 585, "message": "PnL model fields: {'totals': PnLTotals(realized=0.0, unrealized=830626.35, day=830626.35, currency='INR'), 'per_symbol': [PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1727, avg=618.93, ltp=367.0, unrealized=-435084.2, today_pnl=-435084.2), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=167, avg=948.57, ltp=1199.29, unrealized=-41869.58, today_pnl=-41869.58), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=1347, avg=801.44, ltp=2096.86, unrealized=1744935.77, today_pnl=1744935.77), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=143, avg=1427.62, ltp=1328.87, unrealized=14121.38, today_pnl=14121.38), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=438, avg=1994.48, ltp=963.71, unrealized=-451477.02, today_pnl=-451477.02)], 'updated_at': datetime.datetime(2025, 8, 21, 19, 4, 39, 201383, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))), 'trading_day': '2025-08-21'}", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:04:39.208968+05:30", "timestamp": 1755783279.208968}}}
{"text": "2025-08-21 19:04:39.209 | INFO     | app.services.dhan_client:get_pnl:587 - P&L calculation completed successfully: 5 symbols, unrealized=‚Çπ830626.35\n", "record": {"elapsed": {"repr": "0:03:20.916934", "seconds": 200.916934}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 587, "message": "P&L calculation completed successfully: 5 symbols, unrealized=‚Çπ830626.35", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:04:39.209476+05:30", "timestamp": 1755783279.209476}}}
{"text": "2025-08-21 19:04:39.210 | DEBUG    | app.ws.live:emit_delta:408 - Emitted pnl delta: seq=221\n", "record": {"elapsed": {"repr": "0:03:20.917630", "seconds": 200.91763}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "emit_delta", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 408, "message": "Emitted pnl delta: seq=221", "module": "live", "name": "app.ws.live", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:04:39.210172+05:30", "timestamp": 1755783279.210172}}}
{"text": "2025-08-21 19:04:39.211 | DEBUG    | app.ws.live:emit_delta:408 - Emitted positions delta: seq=222\n", "record": {"elapsed": {"repr": "0:03:20.918781", "seconds": 200.918781}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "emit_delta", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 408, "message": "Emitted positions delta: seq=222", "module": "live", "name": "app.ws.live", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:04:39.211323+05:30", "timestamp": 1755783279.211323}}}
{"text": "2025-08-21 19:04:39.673 | DEBUG    | app.ws.live:emit_delta:408 - Emitted holdings delta: seq=223\n", "record": {"elapsed": {"repr": "0:03:21.380806", "seconds": 201.380806}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "emit_delta", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 408, "message": "Emitted holdings delta: seq=223", "module": "live", "name": "app.ws.live", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:04:39.673348+05:30", "timestamp": 1755783279.673348}}}
{"text": "2025-08-21 19:04:41.024 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:03:22.731619", "seconds": 202.731619}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:04:41.024161+05:30", "timestamp": 1755783281.024161}}}
{"text": "2025-08-21 19:04:41.024 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:03:22.732269", "seconds": 202.732269}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:04:41.024811+05:30", "timestamp": 1755783281.024811}}}
{"text": "2025-08-21 19:04:41.025 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:03:22.732768", "seconds": 202.732768}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:04:41.025310+05:30", "timestamp": 1755783281.02531}}}
{"text": "2025-08-21 19:04:41.025 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:03:22.733247", "seconds": 202.733247}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:04:41.025789+05:30", "timestamp": 1755783281.025789}}}
{"text": "2025-08-21 19:04:41.026 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:03:22.733959", "seconds": 202.733959}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:04:41.026501+05:30", "timestamp": 1755783281.026501}}}
{"text": "2025-08-21 19:04:41.027 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:03:22.734701", "seconds": 202.734701}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:04:41.027243+05:30", "timestamp": 1755783281.027243}}}
{"text": "2025-08-21 19:04:41.027 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:03:22.735180", "seconds": 202.73518}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:04:41.027722+05:30", "timestamp": 1755783281.027722}}}
{"text": "2025-08-21 19:04:41.028 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:03:22.735595", "seconds": 202.735595}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:04:41.028137+05:30", "timestamp": 1755783281.028137}}}
{"text": "2025-08-21 19:04:41.028 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:03:22.736064", "seconds": 202.736064}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:04:41.028606+05:30", "timestamp": 1755783281.028606}}}
{"text": "2025-08-21 19:04:41.029 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:03:22.736572", "seconds": 202.736572}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:04:41.029114+05:30", "timestamp": 1755783281.029114}}}
{"text": "2025-08-21 19:04:41.141 | INFO     | app.services.dhan_client:get_pnl:489 - Starting accurate P&L calculation\n", "record": {"elapsed": {"repr": "0:03:22.848495", "seconds": 202.848495}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 489, "message": "Starting accurate P&L calculation", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:04:41.141037+05:30", "timestamp": 1755783281.141037}}}
{"text": "2025-08-21 19:04:41.141 | INFO     | app.services.dhan_client:get_pnl:491 - Fetched 5 positions\n", "record": {"elapsed": {"repr": "0:03:22.849204", "seconds": 202.849204}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 491, "message": "Fetched 5 positions", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:04:41.141746+05:30", "timestamp": 1755783281.141746}}}
{"text": "2025-08-21 19:04:41.142 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for RELIANCE: unrealized=-440613.56, today=-440613.56\n", "record": {"elapsed": {"repr": "0:03:22.849756", "seconds": 202.849756}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for RELIANCE: unrealized=-440613.56, today=-440613.56", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:04:41.142298+05:30", "timestamp": 1755783281.142298}}}
{"text": "2025-08-21 19:04:41.142 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for TCS: unrealized=-42447.92, today=-42447.92\n", "record": {"elapsed": {"repr": "0:03:22.850380", "seconds": 202.85038}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for TCS: unrealized=-42447.92, today=-42447.92", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:04:41.142922+05:30", "timestamp": 1755783281.142922}}}
{"text": "2025-08-21 19:04:41.143 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for HDFC: unrealized=1771511.36, today=1771511.36\n", "record": {"elapsed": {"repr": "0:03:22.851276", "seconds": 202.851276}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for HDFC: unrealized=1771511.36, today=1771511.36", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:04:41.143818+05:30", "timestamp": 1755783281.143818}}}
{"text": "2025-08-21 19:04:41.144 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for INFY: unrealized=13694.9, today=13694.9\n", "record": {"elapsed": {"repr": "0:03:22.851791", "seconds": 202.851791}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for INFY: unrealized=13694.9, today=13694.9", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:04:41.144333+05:30", "timestamp": 1755783281.144333}}}
{"text": "2025-08-21 19:04:41.144 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for ICICIBANK: unrealized=-449760.23, today=-449760.23\n", "record": {"elapsed": {"repr": "0:03:22.852328", "seconds": 202.852328}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for ICICIBANK: unrealized=-449760.23, today=-449760.23", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:04:41.144870+05:30", "timestamp": 1755783281.14487}}}
{"text": "2025-08-21 19:04:41.145 | INFO     | app.services.dhan_client:get_pnl:545 - Calculated totals - realized: 0.0, unrealized: 852384.55, day: 852384.55\n", "record": {"elapsed": {"repr": "0:03:22.852837", "seconds": 202.852837}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 545, "message": "Calculated totals - realized: 0.0, unrealized: 852384.55, day: 852384.55", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:04:41.145379+05:30", "timestamp": 1755783281.145379}}}
{"text": "2025-08-21 19:04:41.145 | DEBUG    | app.services.dhan_client:get_pnl:554 - PnL consistency check passed: drift=‚Çπ0.00\n", "record": {"elapsed": {"repr": "0:03:22.853436", "seconds": 202.853436}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 554, "message": "PnL consistency check passed: drift=‚Çπ0.00", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:04:41.145978+05:30", "timestamp": 1755783281.145978}}}
{"text": "2025-08-21 19:04:41.146 | DEBUG    | app.services.dhan_client:get_pnl:558 - Creating PnLTotals...\n", "record": {"elapsed": {"repr": "0:03:22.854285", "seconds": 202.854285}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 558, "message": "Creating PnLTotals...", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:04:41.146827+05:30", "timestamp": 1755783281.146827}}}
{"text": "2025-08-21 19:04:41.147 | DEBUG    | app.services.dhan_client:get_pnl:565 - PnLTotals created successfully\n", "record": {"elapsed": {"repr": "0:03:22.854944", "seconds": 202.854944}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 565, "message": "PnLTotals created successfully", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:04:41.147486+05:30", "timestamp": 1755783281.147486}}}
{"text": "2025-08-21 19:04:41.147 | DEBUG    | app.services.dhan_client:get_pnl:574 - Creating PnL model...\n", "record": {"elapsed": {"repr": "0:03:22.855415", "seconds": 202.855415}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 574, "message": "Creating PnL model...", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:04:41.147957+05:30", "timestamp": 1755783281.147957}}}
{"text": "2025-08-21 19:04:41.148 | DEBUG    | app.services.dhan_client:get_pnl:575 - Model fields: totals=<class 'app.models.schemas.PnLTotals'>, perSymbol=5, updated_at=2025-08-21 19:04:41.142219+05:30, trading_day=2025-08-21\n", "record": {"elapsed": {"repr": "0:03:22.855854", "seconds": 202.855854}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 575, "message": "Model fields: totals=<class 'app.models.schemas.PnLTotals'>, perSymbol=5, updated_at=2025-08-21 19:04:41.142219+05:30, trading_day=2025-08-21", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:04:41.148396+05:30", "timestamp": 1755783281.148396}}}
{"text": "2025-08-21 19:04:41.149 | DEBUG    | app.services.dhan_client:get_pnl:584 - Created PnL model: totals=PnLTotals(realized=0.0, unrealized=852384.55, day=852384.55, currency='INR') per_symbol=[PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1727, avg=618.93, ltp=363.8, unrealized=-440613.56, today_pnl=-440613.56), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=167, avg=948.57, ltp=1202.75, unrealized=-42447.92, today_pnl=-42447.92), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=1347, avg=801.44, ltp=2116.59, unrealized=1771511.36, today_pnl=1771511.36), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=143, avg=1427.62, ltp=1331.85, unrealized=13694.9, today_pnl=13694.9), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=438, avg=1994.48, ltp=967.63, unrealized=-449760.23, today_pnl=-449760.23)] updated_at=datetime.datetime(2025, 8, 21, 19, 4, 41, 142219, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))) trading_day='2025-08-21'\n", "record": {"elapsed": {"repr": "0:03:22.856479", "seconds": 202.856479}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 584, "message": "Created PnL model: totals=PnLTotals(realized=0.0, unrealized=852384.55, day=852384.55, currency='INR') per_symbol=[PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1727, avg=618.93, ltp=363.8, unrealized=-440613.56, today_pnl=-440613.56), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=167, avg=948.57, ltp=1202.75, unrealized=-42447.92, today_pnl=-42447.92), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=1347, avg=801.44, ltp=2116.59, unrealized=1771511.36, today_pnl=1771511.36), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=143, avg=1427.62, ltp=1331.85, unrealized=13694.9, today_pnl=13694.9), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=438, avg=1994.48, ltp=967.63, unrealized=-449760.23, today_pnl=-449760.23)] updated_at=datetime.datetime(2025, 8, 21, 19, 4, 41, 142219, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))) trading_day='2025-08-21'", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:04:41.149021+05:30", "timestamp": 1755783281.149021}}}
{"text": "2025-08-21 19:04:41.149 | DEBUG    | app.services.dhan_client:get_pnl:585 - PnL model fields: {'totals': PnLTotals(realized=0.0, unrealized=852384.55, day=852384.55, currency='INR'), 'per_symbol': [PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1727, avg=618.93, ltp=363.8, unrealized=-440613.56, today_pnl=-440613.56), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=167, avg=948.57, ltp=1202.75, unrealized=-42447.92, today_pnl=-42447.92), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=1347, avg=801.44, ltp=2116.59, unrealized=1771511.36, today_pnl=1771511.36), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=143, avg=1427.62, ltp=1331.85, unrealized=13694.9, today_pnl=13694.9), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=438, avg=1994.48, ltp=967.63, unrealized=-449760.23, today_pnl=-449760.23)], 'updated_at': datetime.datetime(2025, 8, 21, 19, 4, 41, 142219, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))), 'trading_day': '2025-08-21'}\n", "record": {"elapsed": {"repr": "0:03:22.857234", "seconds": 202.857234}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 585, "message": "PnL model fields: {'totals': PnLTotals(realized=0.0, unrealized=852384.55, day=852384.55, currency='INR'), 'per_symbol': [PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1727, avg=618.93, ltp=363.8, unrealized=-440613.56, today_pnl=-440613.56), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=167, avg=948.57, ltp=1202.75, unrealized=-42447.92, today_pnl=-42447.92), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=1347, avg=801.44, ltp=2116.59, unrealized=1771511.36, today_pnl=1771511.36), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=143, avg=1427.62, ltp=1331.85, unrealized=13694.9, today_pnl=13694.9), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=438, avg=1994.48, ltp=967.63, unrealized=-449760.23, today_pnl=-449760.23)], 'updated_at': datetime.datetime(2025, 8, 21, 19, 4, 41, 142219, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))), 'trading_day': '2025-08-21'}", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:04:41.149776+05:30", "timestamp": 1755783281.149776}}}
{"text": "2025-08-21 19:04:41.150 | INFO     | app.services.dhan_client:get_pnl:587 - P&L calculation completed successfully: 5 symbols, unrealized=‚Çπ852384.55\n", "record": {"elapsed": {"repr": "0:03:22.857815", "seconds": 202.857815}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 587, "message": "P&L calculation completed successfully: 5 symbols, unrealized=‚Çπ852384.55", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:04:41.150357+05:30", "timestamp": 1755783281.150357}}}
{"text": "2025-08-21 19:04:41.151 | DEBUG    | app.ws.live:emit_delta:408 - Emitted pnl delta: seq=224\n", "record": {"elapsed": {"repr": "0:03:22.858512", "seconds": 202.858512}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "emit_delta", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 408, "message": "Emitted pnl delta: seq=224", "module": "live", "name": "app.ws.live", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:04:41.151054+05:30", "timestamp": 1755783281.151054}}}
{"text": "2025-08-21 19:04:41.152 | DEBUG    | app.ws.live:emit_delta:408 - Emitted positions delta: seq=225\n", "record": {"elapsed": {"repr": "0:03:22.859657", "seconds": 202.859657}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "emit_delta", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 408, "message": "Emitted positions delta: seq=225", "module": "live", "name": "app.ws.live", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:04:41.152199+05:30", "timestamp": 1755783281.152199}}}
{"text": "2025-08-21 19:04:43.029 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:03:24.737420", "seconds": 204.73742}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:04:43.029962+05:30", "timestamp": 1755783283.029962}}}
{"text": "2025-08-21 19:04:43.030 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:03:24.738146", "seconds": 204.738146}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:04:43.030688+05:30", "timestamp": 1755783283.030688}}}
{"text": "2025-08-21 19:04:43.031 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:03:24.738578", "seconds": 204.738578}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:04:43.031120+05:30", "timestamp": 1755783283.03112}}}
{"text": "2025-08-21 19:04:43.031 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:03:24.738961", "seconds": 204.738961}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:04:43.031503+05:30", "timestamp": 1755783283.031503}}}
{"text": "2025-08-21 19:04:43.031 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:03:24.739345", "seconds": 204.739345}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:04:43.031887+05:30", "timestamp": 1755783283.031887}}}
{"text": "2025-08-21 19:04:43.032 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:03:24.739748", "seconds": 204.739748}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:04:43.032290+05:30", "timestamp": 1755783283.03229}}}
{"text": "2025-08-21 19:04:43.032 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:03:24.740269", "seconds": 204.740269}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:04:43.032811+05:30", "timestamp": 1755783283.032811}}}
{"text": "2025-08-21 19:04:43.033 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:03:24.740687", "seconds": 204.740687}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:04:43.033229+05:30", "timestamp": 1755783283.033229}}}
{"text": "2025-08-21 19:04:43.034 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:03:24.741521", "seconds": 204.741521}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:04:43.034063+05:30", "timestamp": 1755783283.034063}}}
{"text": "2025-08-21 19:04:43.034 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:03:24.742117", "seconds": 204.742117}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:04:43.034659+05:30", "timestamp": 1755783283.034659}}}
{"text": "2025-08-21 19:04:43.058 | INFO     | app.services.dhan_client:get_pnl:489 - Starting accurate P&L calculation\n", "record": {"elapsed": {"repr": "0:03:24.766139", "seconds": 204.766139}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 489, "message": "Starting accurate P&L calculation", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:04:43.058681+05:30", "timestamp": 1755783283.058681}}}
{"text": "2025-08-21 19:04:43.059 | INFO     | app.services.dhan_client:get_pnl:491 - Fetched 5 positions\n", "record": {"elapsed": {"repr": "0:03:24.766952", "seconds": 204.766952}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 491, "message": "Fetched 5 positions", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:04:43.059494+05:30", "timestamp": 1755783283.059494}}}
{"text": "2025-08-21 19:04:43.060 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for RELIANCE: unrealized=-434149.18, today=-434149.18\n", "record": {"elapsed": {"repr": "0:03:24.767489", "seconds": 204.767489}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for RELIANCE: unrealized=-434149.18, today=-434149.18", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:04:43.060031+05:30", "timestamp": 1755783283.060031}}}
{"text": "2025-08-21 19:04:43.060 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for TCS: unrealized=-45744.92, today=-45744.92\n", "record": {"elapsed": {"repr": "0:03:24.767996", "seconds": 204.767996}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for TCS: unrealized=-45744.92, today=-45744.92", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:04:43.060538+05:30", "timestamp": 1755783283.060538}}}
{"text": "2025-08-21 19:04:43.061 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for HDFC: unrealized=1735121.46, today=1735121.46\n", "record": {"elapsed": {"repr": "0:03:24.768490", "seconds": 204.76849}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for HDFC: unrealized=1735121.46, today=1735121.46", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:04:43.061032+05:30", "timestamp": 1755783283.061032}}}
{"text": "2025-08-21 19:04:43.061 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for INFY: unrealized=13843.06, today=13843.06\n", "record": {"elapsed": {"repr": "0:03:24.769059", "seconds": 204.769059}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for INFY: unrealized=13843.06, today=13843.06", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:04:43.061601+05:30", "timestamp": 1755783283.061601}}}
{"text": "2025-08-21 19:04:43.062 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for ICICIBANK: unrealized=-444475.29, today=-444475.29\n", "record": {"elapsed": {"repr": "0:03:24.769881", "seconds": 204.769881}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for ICICIBANK: unrealized=-444475.29, today=-444475.29", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:04:43.062423+05:30", "timestamp": 1755783283.062423}}}
{"text": "2025-08-21 19:04:43.063 | INFO     | app.services.dhan_client:get_pnl:545 - Calculated totals - realized: 0.0, unrealized: 824595.13, day: 824595.13\n", "record": {"elapsed": {"repr": "0:03:24.770608", "seconds": 204.770608}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 545, "message": "Calculated totals - realized: 0.0, unrealized: 824595.13, day: 824595.13", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:04:43.063150+05:30", "timestamp": 1755783283.06315}}}
{"text": "2025-08-21 19:04:43.063 | DEBUG    | app.services.dhan_client:get_pnl:554 - PnL consistency check passed: drift=‚Çπ0.00\n", "record": {"elapsed": {"repr": "0:03:24.771091", "seconds": 204.771091}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 554, "message": "PnL consistency check passed: drift=‚Çπ0.00", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:04:43.063633+05:30", "timestamp": 1755783283.063633}}}
{"text": "2025-08-21 19:04:43.064 | DEBUG    | app.services.dhan_client:get_pnl:558 - Creating PnLTotals...\n", "record": {"elapsed": {"repr": "0:03:24.771552", "seconds": 204.771552}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 558, "message": "Creating PnLTotals...", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:04:43.064094+05:30", "timestamp": 1755783283.064094}}}
{"text": "2025-08-21 19:04:43.064 | DEBUG    | app.services.dhan_client:get_pnl:565 - PnLTotals created successfully\n", "record": {"elapsed": {"repr": "0:03:24.772001", "seconds": 204.772001}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 565, "message": "PnLTotals created successfully", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:04:43.064543+05:30", "timestamp": 1755783283.064543}}}
{"text": "2025-08-21 19:04:43.064 | DEBUG    | app.services.dhan_client:get_pnl:574 - Creating PnL model...\n", "record": {"elapsed": {"repr": "0:03:24.772439", "seconds": 204.772439}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 574, "message": "Creating PnL model...", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:04:43.064981+05:30", "timestamp": 1755783283.064981}}}
{"text": "2025-08-21 19:04:43.065 | DEBUG    | app.services.dhan_client:get_pnl:575 - Model fields: totals=<class 'app.models.schemas.PnLTotals'>, perSymbol=5, updated_at=2025-08-21 19:04:43.059960+05:30, trading_day=2025-08-21\n", "record": {"elapsed": {"repr": "0:03:24.772771", "seconds": 204.772771}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 575, "message": "Model fields: totals=<class 'app.models.schemas.PnLTotals'>, perSymbol=5, updated_at=2025-08-21 19:04:43.059960+05:30, trading_day=2025-08-21", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:04:43.065313+05:30", "timestamp": 1755783283.065313}}}
{"text": "2025-08-21 19:04:43.066 | DEBUG    | app.services.dhan_client:get_pnl:584 - Created PnL model: totals=PnLTotals(realized=0.0, unrealized=824595.13, day=824595.13, currency='INR') per_symbol=[PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1727, avg=618.93, ltp=367.54, unrealized=-434149.18, today_pnl=-434149.18), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=167, avg=948.57, ltp=1222.49, unrealized=-45744.92, today_pnl=-45744.92), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=1347, avg=801.44, ltp=2089.58, unrealized=1735121.46, today_pnl=1735121.46), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=143, avg=1427.62, ltp=1330.82, unrealized=13843.06, today_pnl=13843.06), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=438, avg=1994.48, ltp=979.7, unrealized=-444475.29, today_pnl=-444475.29)] updated_at=datetime.datetime(2025, 8, 21, 19, 4, 43, 59960, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))) trading_day='2025-08-21'\n", "record": {"elapsed": {"repr": "0:03:24.773468", "seconds": 204.773468}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 584, "message": "Created PnL model: totals=PnLTotals(realized=0.0, unrealized=824595.13, day=824595.13, currency='INR') per_symbol=[PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1727, avg=618.93, ltp=367.54, unrealized=-434149.18, today_pnl=-434149.18), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=167, avg=948.57, ltp=1222.49, unrealized=-45744.92, today_pnl=-45744.92), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=1347, avg=801.44, ltp=2089.58, unrealized=1735121.46, today_pnl=1735121.46), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=143, avg=1427.62, ltp=1330.82, unrealized=13843.06, today_pnl=13843.06), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=438, avg=1994.48, ltp=979.7, unrealized=-444475.29, today_pnl=-444475.29)] updated_at=datetime.datetime(2025, 8, 21, 19, 4, 43, 59960, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))) trading_day='2025-08-21'", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:04:43.066010+05:30", "timestamp": 1755783283.06601}}}
{"text": "2025-08-21 19:04:43.066 | DEBUG    | app.services.dhan_client:get_pnl:585 - PnL model fields: {'totals': PnLTotals(realized=0.0, unrealized=824595.13, day=824595.13, currency='INR'), 'per_symbol': [PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1727, avg=618.93, ltp=367.54, unrealized=-434149.18, today_pnl=-434149.18), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=167, avg=948.57, ltp=1222.49, unrealized=-45744.92, today_pnl=-45744.92), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=1347, avg=801.44, ltp=2089.58, unrealized=1735121.46, today_pnl=1735121.46), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=143, avg=1427.62, ltp=1330.82, unrealized=13843.06, today_pnl=13843.06), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=438, avg=1994.48, ltp=979.7, unrealized=-444475.29, today_pnl=-444475.29)], 'updated_at': datetime.datetime(2025, 8, 21, 19, 4, 43, 59960, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))), 'trading_day': '2025-08-21'}\n", "record": {"elapsed": {"repr": "0:03:24.774349", "seconds": 204.774349}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 585, "message": "PnL model fields: {'totals': PnLTotals(realized=0.0, unrealized=824595.13, day=824595.13, currency='INR'), 'per_symbol': [PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1727, avg=618.93, ltp=367.54, unrealized=-434149.18, today_pnl=-434149.18), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=167, avg=948.57, ltp=1222.49, unrealized=-45744.92, today_pnl=-45744.92), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=1347, avg=801.44, ltp=2089.58, unrealized=1735121.46, today_pnl=1735121.46), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=143, avg=1427.62, ltp=1330.82, unrealized=13843.06, today_pnl=13843.06), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=438, avg=1994.48, ltp=979.7, unrealized=-444475.29, today_pnl=-444475.29)], 'updated_at': datetime.datetime(2025, 8, 21, 19, 4, 43, 59960, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))), 'trading_day': '2025-08-21'}", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:04:43.066891+05:30", "timestamp": 1755783283.066891}}}
{"text": "2025-08-21 19:04:43.067 | INFO     | app.services.dhan_client:get_pnl:587 - P&L calculation completed successfully: 5 symbols, unrealized=‚Çπ824595.13\n", "record": {"elapsed": {"repr": "0:03:24.775131", "seconds": 204.775131}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 587, "message": "P&L calculation completed successfully: 5 symbols, unrealized=‚Çπ824595.13", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:04:43.067673+05:30", "timestamp": 1755783283.067673}}}
{"text": "2025-08-21 19:04:43.068 | DEBUG    | app.ws.live:emit_delta:408 - Emitted pnl delta: seq=226\n", "record": {"elapsed": {"repr": "0:03:24.775844", "seconds": 204.775844}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "emit_delta", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 408, "message": "Emitted pnl delta: seq=226", "module": "live", "name": "app.ws.live", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:04:43.068386+05:30", "timestamp": 1755783283.068386}}}
{"text": "2025-08-21 19:04:43.069 | DEBUG    | app.ws.live:emit_delta:408 - Emitted positions delta: seq=227\n", "record": {"elapsed": {"repr": "0:03:24.776541", "seconds": 204.776541}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "emit_delta", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 408, "message": "Emitted positions delta: seq=227", "module": "live", "name": "app.ws.live", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:04:43.069083+05:30", "timestamp": 1755783283.069083}}}
{"text": "2025-08-21 19:04:44.930 | INFO     | app.services.dhan_client:get_pnl:489 - Starting accurate P&L calculation\n", "record": {"elapsed": {"repr": "0:03:26.637903", "seconds": 206.637903}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 489, "message": "Starting accurate P&L calculation", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:04:44.930445+05:30", "timestamp": 1755783284.930445}}}
{"text": "2025-08-21 19:04:44.931 | INFO     | app.services.dhan_client:get_pnl:491 - Fetched 5 positions\n", "record": {"elapsed": {"repr": "0:03:26.638571", "seconds": 206.638571}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 491, "message": "Fetched 5 positions", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:04:44.931113+05:30", "timestamp": 1755783284.931113}}}
{"text": "2025-08-21 19:04:44.931 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for RELIANCE: unrealized=-434149.18, today=-434149.18\n", "record": {"elapsed": {"repr": "0:03:26.639111", "seconds": 206.639111}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for RELIANCE: unrealized=-434149.18, today=-434149.18", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:04:44.931653+05:30", "timestamp": 1755783284.931653}}}
{"text": "2025-08-21 19:04:44.932 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for TCS: unrealized=-45744.92, today=-45744.92\n", "record": {"elapsed": {"repr": "0:03:26.639614", "seconds": 206.639614}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for TCS: unrealized=-45744.92, today=-45744.92", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:04:44.932156+05:30", "timestamp": 1755783284.932156}}}
{"text": "2025-08-21 19:04:44.933 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for HDFC: unrealized=1735121.46, today=1735121.46\n", "record": {"elapsed": {"repr": "0:03:26.640466", "seconds": 206.640466}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for HDFC: unrealized=1735121.46, today=1735121.46", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:04:44.933008+05:30", "timestamp": 1755783284.933008}}}
{"text": "2025-08-21 19:04:44.933 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for INFY: unrealized=13843.06, today=13843.06\n", "record": {"elapsed": {"repr": "0:03:26.641024", "seconds": 206.641024}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for INFY: unrealized=13843.06, today=13843.06", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:04:44.933566+05:30", "timestamp": 1755783284.933566}}}
{"text": "2025-08-21 19:04:44.933 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for ICICIBANK: unrealized=-444475.29, today=-444475.29\n", "record": {"elapsed": {"repr": "0:03:26.641452", "seconds": 206.641452}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for ICICIBANK: unrealized=-444475.29, today=-444475.29", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:04:44.933994+05:30", "timestamp": 1755783284.933994}}}
{"text": "2025-08-21 19:04:44.934 | INFO     | app.services.dhan_client:get_pnl:545 - Calculated totals - realized: 0.0, unrealized: 824595.13, day: 824595.13\n", "record": {"elapsed": {"repr": "0:03:26.641848", "seconds": 206.641848}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 545, "message": "Calculated totals - realized: 0.0, unrealized: 824595.13, day: 824595.13", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:04:44.934390+05:30", "timestamp": 1755783284.93439}}}
{"text": "2025-08-21 19:04:44.934 | DEBUG    | app.services.dhan_client:get_pnl:554 - PnL consistency check passed: drift=‚Çπ0.00\n", "record": {"elapsed": {"repr": "0:03:26.642268", "seconds": 206.642268}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 554, "message": "PnL consistency check passed: drift=‚Çπ0.00", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:04:44.934810+05:30", "timestamp": 1755783284.93481}}}
{"text": "2025-08-21 19:04:44.935 | DEBUG    | app.services.dhan_client:get_pnl:558 - Creating PnLTotals...\n", "record": {"elapsed": {"repr": "0:03:26.642793", "seconds": 206.642793}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 558, "message": "Creating PnLTotals...", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:04:44.935335+05:30", "timestamp": 1755783284.935335}}}
{"text": "2025-08-21 19:04:44.936 | DEBUG    | app.services.dhan_client:get_pnl:565 - PnLTotals created successfully\n", "record": {"elapsed": {"repr": "0:03:26.643546", "seconds": 206.643546}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 565, "message": "PnLTotals created successfully", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:04:44.936088+05:30", "timestamp": 1755783284.936088}}}
{"text": "2025-08-21 19:04:44.936 | DEBUG    | app.services.dhan_client:get_pnl:574 - Creating PnL model...\n", "record": {"elapsed": {"repr": "0:03:26.644350", "seconds": 206.64435}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 574, "message": "Creating PnL model...", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:04:44.936892+05:30", "timestamp": 1755783284.936892}}}
{"text": "2025-08-21 19:04:44.937 | DEBUG    | app.services.dhan_client:get_pnl:575 - Model fields: totals=<class 'app.models.schemas.PnLTotals'>, perSymbol=5, updated_at=2025-08-21 19:04:44.931576+05:30, trading_day=2025-08-21\n", "record": {"elapsed": {"repr": "0:03:26.644826", "seconds": 206.644826}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 575, "message": "Model fields: totals=<class 'app.models.schemas.PnLTotals'>, perSymbol=5, updated_at=2025-08-21 19:04:44.931576+05:30, trading_day=2025-08-21", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:04:44.937368+05:30", "timestamp": 1755783284.937368}}}
{"text": "2025-08-21 19:04:44.937 | DEBUG    | app.services.dhan_client:get_pnl:584 - Created PnL model: totals=PnLTotals(realized=0.0, unrealized=824595.13, day=824595.13, currency='INR') per_symbol=[PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1727, avg=618.93, ltp=367.54, unrealized=-434149.18, today_pnl=-434149.18), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=167, avg=948.57, ltp=1222.49, unrealized=-45744.92, today_pnl=-45744.92), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=1347, avg=801.44, ltp=2089.58, unrealized=1735121.46, today_pnl=1735121.46), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=143, avg=1427.62, ltp=1330.82, unrealized=13843.06, today_pnl=13843.06), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=438, avg=1994.48, ltp=979.7, unrealized=-444475.29, today_pnl=-444475.29)] updated_at=datetime.datetime(2025, 8, 21, 19, 4, 44, 931576, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))) trading_day='2025-08-21'\n", "record": {"elapsed": {"repr": "0:03:26.645438", "seconds": 206.645438}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 584, "message": "Created PnL model: totals=PnLTotals(realized=0.0, unrealized=824595.13, day=824595.13, currency='INR') per_symbol=[PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1727, avg=618.93, ltp=367.54, unrealized=-434149.18, today_pnl=-434149.18), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=167, avg=948.57, ltp=1222.49, unrealized=-45744.92, today_pnl=-45744.92), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=1347, avg=801.44, ltp=2089.58, unrealized=1735121.46, today_pnl=1735121.46), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=143, avg=1427.62, ltp=1330.82, unrealized=13843.06, today_pnl=13843.06), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=438, avg=1994.48, ltp=979.7, unrealized=-444475.29, today_pnl=-444475.29)] updated_at=datetime.datetime(2025, 8, 21, 19, 4, 44, 931576, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))) trading_day='2025-08-21'", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:04:44.937980+05:30", "timestamp": 1755783284.93798}}}
{"text": "2025-08-21 19:04:44.938 | DEBUG    | app.services.dhan_client:get_pnl:585 - PnL model fields: {'totals': PnLTotals(realized=0.0, unrealized=824595.13, day=824595.13, currency='INR'), 'per_symbol': [PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1727, avg=618.93, ltp=367.54, unrealized=-434149.18, today_pnl=-434149.18), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=167, avg=948.57, ltp=1222.49, unrealized=-45744.92, today_pnl=-45744.92), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=1347, avg=801.44, ltp=2089.58, unrealized=1735121.46, today_pnl=1735121.46), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=143, avg=1427.62, ltp=1330.82, unrealized=13843.06, today_pnl=13843.06), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=438, avg=1994.48, ltp=979.7, unrealized=-444475.29, today_pnl=-444475.29)], 'updated_at': datetime.datetime(2025, 8, 21, 19, 4, 44, 931576, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))), 'trading_day': '2025-08-21'}\n", "record": {"elapsed": {"repr": "0:03:26.646112", "seconds": 206.646112}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 585, "message": "PnL model fields: {'totals': PnLTotals(realized=0.0, unrealized=824595.13, day=824595.13, currency='INR'), 'per_symbol': [PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1727, avg=618.93, ltp=367.54, unrealized=-434149.18, today_pnl=-434149.18), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=167, avg=948.57, ltp=1222.49, unrealized=-45744.92, today_pnl=-45744.92), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=1347, avg=801.44, ltp=2089.58, unrealized=1735121.46, today_pnl=1735121.46), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=143, avg=1427.62, ltp=1330.82, unrealized=13843.06, today_pnl=13843.06), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=438, avg=1994.48, ltp=979.7, unrealized=-444475.29, today_pnl=-444475.29)], 'updated_at': datetime.datetime(2025, 8, 21, 19, 4, 44, 931576, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))), 'trading_day': '2025-08-21'}", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:04:44.938654+05:30", "timestamp": 1755783284.938654}}}
{"text": "2025-08-21 19:04:44.939 | INFO     | app.services.dhan_client:get_pnl:587 - P&L calculation completed successfully: 5 symbols, unrealized=‚Çπ824595.13\n", "record": {"elapsed": {"repr": "0:03:26.646794", "seconds": 206.646794}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 587, "message": "P&L calculation completed successfully: 5 symbols, unrealized=‚Çπ824595.13", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:04:44.939336+05:30", "timestamp": 1755783284.939336}}}
{"text": "2025-08-21 19:04:44.939 | DEBUG    | app.ws.live:emit_delta:408 - Emitted pnl delta: seq=228\n", "record": {"elapsed": {"repr": "0:03:26.647422", "seconds": 206.647422}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "emit_delta", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 408, "message": "Emitted pnl delta: seq=228", "module": "live", "name": "app.ws.live", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:04:44.939964+05:30", "timestamp": 1755783284.939964}}}
{"text": "2025-08-21 19:04:45.035 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:03:26.743187", "seconds": 206.743187}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:04:45.035729+05:30", "timestamp": 1755783285.035729}}}
{"text": "2025-08-21 19:04:45.036 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:03:26.744104", "seconds": 206.744104}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:04:45.036646+05:30", "timestamp": 1755783285.036646}}}
{"text": "2025-08-21 19:04:45.037 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:03:26.744566", "seconds": 206.744566}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:04:45.037108+05:30", "timestamp": 1755783285.037108}}}
{"text": "2025-08-21 19:04:45.037 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:03:26.744972", "seconds": 206.744972}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:04:45.037514+05:30", "timestamp": 1755783285.037514}}}
{"text": "2025-08-21 19:04:45.037 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:03:26.745416", "seconds": 206.745416}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:04:45.037958+05:30", "timestamp": 1755783285.037958}}}
{"text": "2025-08-21 19:04:45.038 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:03:26.745824", "seconds": 206.745824}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:04:45.038366+05:30", "timestamp": 1755783285.038366}}}
{"text": "2025-08-21 19:04:45.038 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:03:26.746246", "seconds": 206.746246}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:04:45.038788+05:30", "timestamp": 1755783285.038788}}}
{"text": "2025-08-21 19:04:45.039 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:03:26.746617", "seconds": 206.746617}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:04:45.039159+05:30", "timestamp": 1755783285.039159}}}
{"text": "2025-08-21 19:04:45.039 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:03:26.747178", "seconds": 206.747178}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:04:45.039720+05:30", "timestamp": 1755783285.03972}}}
{"text": "2025-08-21 19:04:45.040 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:03:26.747685", "seconds": 206.747685}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:04:45.040227+05:30", "timestamp": 1755783285.040227}}}
{"text": "2025-08-21 19:04:46.734 | INFO     | app.services.dhan_client:get_pnl:489 - Starting accurate P&L calculation\n", "record": {"elapsed": {"repr": "0:03:28.442295", "seconds": 208.442295}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 489, "message": "Starting accurate P&L calculation", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:04:46.734837+05:30", "timestamp": 1755783286.734837}}}
{"text": "2025-08-21 19:04:46.735 | INFO     | app.services.dhan_client:get_pnl:491 - Fetched 5 positions\n", "record": {"elapsed": {"repr": "0:03:28.443034", "seconds": 208.443034}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 491, "message": "Fetched 5 positions", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:04:46.735576+05:30", "timestamp": 1755783286.735576}}}
{"text": "2025-08-21 19:04:46.736 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for RELIANCE: unrealized=-431100.06, today=-431100.06\n", "record": {"elapsed": {"repr": "0:03:28.443516", "seconds": 208.443516}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for RELIANCE: unrealized=-431100.06, today=-431100.06", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:04:46.736058+05:30", "timestamp": 1755783286.736058}}}
{"text": "2025-08-21 19:04:46.736 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for TCS: unrealized=-43242.47, today=-43242.47\n", "record": {"elapsed": {"repr": "0:03:28.443964", "seconds": 208.443964}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for TCS: unrealized=-43242.47, today=-43242.47", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:04:46.736506+05:30", "timestamp": 1755783286.736506}}}
{"text": "2025-08-21 19:04:46.736 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for HDFC: unrealized=1777777.82, today=1777777.82\n", "record": {"elapsed": {"repr": "0:03:28.444382", "seconds": 208.444382}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for HDFC: unrealized=1777777.82, today=1777777.82", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:04:46.736924+05:30", "timestamp": 1755783286.736924}}}
{"text": "2025-08-21 19:04:46.737 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for INFY: unrealized=17532.9, today=17532.9\n", "record": {"elapsed": {"repr": "0:03:28.444768", "seconds": 208.444768}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for INFY: unrealized=17532.9, today=17532.9", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:04:46.737310+05:30", "timestamp": 1755783286.73731}}}
{"text": "2025-08-21 19:04:46.737 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for ICICIBANK: unrealized=-440340.94, today=-440340.94\n", "record": {"elapsed": {"repr": "0:03:28.445317", "seconds": 208.445317}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for ICICIBANK: unrealized=-440340.94, today=-440340.94", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:04:46.737859+05:30", "timestamp": 1755783286.737859}}}
{"text": "2025-08-21 19:04:46.738 | INFO     | app.services.dhan_client:get_pnl:545 - Calculated totals - realized: 0.0, unrealized: 880627.25, day: 880627.25\n", "record": {"elapsed": {"repr": "0:03:28.445788", "seconds": 208.445788}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 545, "message": "Calculated totals - realized: 0.0, unrealized: 880627.25, day: 880627.25", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:04:46.738330+05:30", "timestamp": 1755783286.73833}}}
{"text": "2025-08-21 19:04:46.738 | DEBUG    | app.services.dhan_client:get_pnl:554 - PnL consistency check passed: drift=‚Çπ0.00\n", "record": {"elapsed": {"repr": "0:03:28.446230", "seconds": 208.44623}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 554, "message": "PnL consistency check passed: drift=‚Çπ0.00", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:04:46.738772+05:30", "timestamp": 1755783286.738772}}}
{"text": "2025-08-21 19:04:46.739 | DEBUG    | app.services.dhan_client:get_pnl:558 - Creating PnLTotals...\n", "record": {"elapsed": {"repr": "0:03:28.446655", "seconds": 208.446655}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 558, "message": "Creating PnLTotals...", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:04:46.739197+05:30", "timestamp": 1755783286.739197}}}
{"text": "2025-08-21 19:04:46.740 | DEBUG    | app.services.dhan_client:get_pnl:565 - PnLTotals created successfully\n", "record": {"elapsed": {"repr": "0:03:28.447698", "seconds": 208.447698}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 565, "message": "PnLTotals created successfully", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:04:46.740240+05:30", "timestamp": 1755783286.74024}}}
{"text": "2025-08-21 19:04:46.740 | DEBUG    | app.services.dhan_client:get_pnl:574 - Creating PnL model...\n", "record": {"elapsed": {"repr": "0:03:28.448433", "seconds": 208.448433}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 574, "message": "Creating PnL model...", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:04:46.740975+05:30", "timestamp": 1755783286.740975}}}
{"text": "2025-08-21 19:04:46.741 | DEBUG    | app.services.dhan_client:get_pnl:575 - Model fields: totals=<class 'app.models.schemas.PnLTotals'>, perSymbol=5, updated_at=2025-08-21 19:04:46.735991+05:30, trading_day=2025-08-21\n", "record": {"elapsed": {"repr": "0:03:28.448963", "seconds": 208.448963}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 575, "message": "Model fields: totals=<class 'app.models.schemas.PnLTotals'>, perSymbol=5, updated_at=2025-08-21 19:04:46.735991+05:30, trading_day=2025-08-21", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:04:46.741505+05:30", "timestamp": 1755783286.741505}}}
{"text": "2025-08-21 19:04:46.742 | DEBUG    | app.services.dhan_client:get_pnl:584 - Created PnL model: totals=PnLTotals(realized=0.0, unrealized=880627.25, day=880627.25, currency='INR') per_symbol=[PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1727, avg=618.93, ltp=369.31, unrealized=-431100.06, today_pnl=-431100.06), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=167, avg=948.57, ltp=1207.51, unrealized=-43242.47, today_pnl=-43242.47), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=1347, avg=801.44, ltp=2121.25, unrealized=1777777.82, today_pnl=1777777.82), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=143, avg=1427.62, ltp=1305.01, unrealized=17532.9, today_pnl=17532.9), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=438, avg=1994.48, ltp=989.14, unrealized=-440340.94, today_pnl=-440340.94)] updated_at=datetime.datetime(2025, 8, 21, 19, 4, 46, 735991, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))) trading_day='2025-08-21'\n", "record": {"elapsed": {"repr": "0:03:28.449872", "seconds": 208.449872}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 584, "message": "Created PnL model: totals=PnLTotals(realized=0.0, unrealized=880627.25, day=880627.25, currency='INR') per_symbol=[PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1727, avg=618.93, ltp=369.31, unrealized=-431100.06, today_pnl=-431100.06), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=167, avg=948.57, ltp=1207.51, unrealized=-43242.47, today_pnl=-43242.47), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=1347, avg=801.44, ltp=2121.25, unrealized=1777777.82, today_pnl=1777777.82), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=143, avg=1427.62, ltp=1305.01, unrealized=17532.9, today_pnl=17532.9), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=438, avg=1994.48, ltp=989.14, unrealized=-440340.94, today_pnl=-440340.94)] updated_at=datetime.datetime(2025, 8, 21, 19, 4, 46, 735991, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))) trading_day='2025-08-21'", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:04:46.742414+05:30", "timestamp": 1755783286.742414}}}
{"text": "2025-08-21 19:04:46.743 | DEBUG    | app.services.dhan_client:get_pnl:585 - PnL model fields: {'totals': PnLTotals(realized=0.0, unrealized=880627.25, day=880627.25, currency='INR'), 'per_symbol': [PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1727, avg=618.93, ltp=369.31, unrealized=-431100.06, today_pnl=-431100.06), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=167, avg=948.57, ltp=1207.51, unrealized=-43242.47, today_pnl=-43242.47), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=1347, avg=801.44, ltp=2121.25, unrealized=1777777.82, today_pnl=1777777.82), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=143, avg=1427.62, ltp=1305.01, unrealized=17532.9, today_pnl=17532.9), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=438, avg=1994.48, ltp=989.14, unrealized=-440340.94, today_pnl=-440340.94)], 'updated_at': datetime.datetime(2025, 8, 21, 19, 4, 46, 735991, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))), 'trading_day': '2025-08-21'}\n", "record": {"elapsed": {"repr": "0:03:28.451084", "seconds": 208.451084}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 585, "message": "PnL model fields: {'totals': PnLTotals(realized=0.0, unrealized=880627.25, day=880627.25, currency='INR'), 'per_symbol': [PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1727, avg=618.93, ltp=369.31, unrealized=-431100.06, today_pnl=-431100.06), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=167, avg=948.57, ltp=1207.51, unrealized=-43242.47, today_pnl=-43242.47), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=1347, avg=801.44, ltp=2121.25, unrealized=1777777.82, today_pnl=1777777.82), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=143, avg=1427.62, ltp=1305.01, unrealized=17532.9, today_pnl=17532.9), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=438, avg=1994.48, ltp=989.14, unrealized=-440340.94, today_pnl=-440340.94)], 'updated_at': datetime.datetime(2025, 8, 21, 19, 4, 46, 735991, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))), 'trading_day': '2025-08-21'}", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:04:46.743626+05:30", "timestamp": 1755783286.743626}}}
{"text": "2025-08-21 19:04:46.744 | INFO     | app.services.dhan_client:get_pnl:587 - P&L calculation completed successfully: 5 symbols, unrealized=‚Çπ880627.25\n", "record": {"elapsed": {"repr": "0:03:28.451933", "seconds": 208.451933}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 587, "message": "P&L calculation completed successfully: 5 symbols, unrealized=‚Çπ880627.25", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:04:46.744475+05:30", "timestamp": 1755783286.744475}}}
{"text": "2025-08-21 19:04:46.745 | DEBUG    | app.ws.live:emit_delta:408 - Emitted pnl delta: seq=229\n", "record": {"elapsed": {"repr": "0:03:28.452657", "seconds": 208.452657}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "emit_delta", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 408, "message": "Emitted pnl delta: seq=229", "module": "live", "name": "app.ws.live", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:04:46.745199+05:30", "timestamp": 1755783286.745199}}}
{"text": "2025-08-21 19:04:46.745 | DEBUG    | app.ws.live:emit_delta:408 - Emitted positions delta: seq=230\n", "record": {"elapsed": {"repr": "0:03:28.453380", "seconds": 208.45338}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "emit_delta", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 408, "message": "Emitted positions delta: seq=230", "module": "live", "name": "app.ws.live", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:04:46.745922+05:30", "timestamp": 1755783286.745922}}}
{"text": "2025-08-21 19:04:47.041 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:03:28.749282", "seconds": 208.749282}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:04:47.041824+05:30", "timestamp": 1755783287.041824}}}
{"text": "2025-08-21 19:04:47.042 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:03:28.750164", "seconds": 208.750164}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:04:47.042706+05:30", "timestamp": 1755783287.042706}}}
{"text": "2025-08-21 19:04:47.043 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:03:28.750862", "seconds": 208.750862}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:04:47.043404+05:30", "timestamp": 1755783287.043404}}}
{"text": "2025-08-21 19:04:47.043 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:03:28.751352", "seconds": 208.751352}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:04:47.043894+05:30", "timestamp": 1755783287.043894}}}
{"text": "2025-08-21 19:04:47.044 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:03:28.751777", "seconds": 208.751777}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:04:47.044319+05:30", "timestamp": 1755783287.044319}}}
{"text": "2025-08-21 19:04:47.044 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:03:28.752165", "seconds": 208.752165}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:04:47.044707+05:30", "timestamp": 1755783287.044707}}}
{"text": "2025-08-21 19:04:47.045 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:03:28.752542", "seconds": 208.752542}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:04:47.045084+05:30", "timestamp": 1755783287.045084}}}
{"text": "2025-08-21 19:04:47.045 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:03:28.752915", "seconds": 208.752915}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:04:47.045457+05:30", "timestamp": 1755783287.045457}}}
{"text": "2025-08-21 19:04:47.045 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:03:28.753303", "seconds": 208.753303}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:04:47.045845+05:30", "timestamp": 1755783287.045845}}}
{"text": "2025-08-21 19:04:47.046 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:03:28.753700", "seconds": 208.7537}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:04:47.046242+05:30", "timestamp": 1755783287.046242}}}
{"text": "2025-08-21 19:04:48.445 | INFO     | app.services.dhan_client:get_pnl:489 - Starting accurate P&L calculation\n", "record": {"elapsed": {"repr": "0:03:30.152502", "seconds": 210.152502}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 489, "message": "Starting accurate P&L calculation", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:04:48.445044+05:30", "timestamp": 1755783288.445044}}}
{"text": "2025-08-21 19:04:48.445 | INFO     | app.services.dhan_client:get_pnl:491 - Fetched 5 positions\n", "record": {"elapsed": {"repr": "0:03:30.153036", "seconds": 210.153036}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 491, "message": "Fetched 5 positions", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:04:48.445578+05:30", "timestamp": 1755783288.445578}}}
{"text": "2025-08-21 19:04:48.446 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for RELIANCE: unrealized=-438971.33, today=-438971.33\n", "record": {"elapsed": {"repr": "0:03:30.153585", "seconds": 210.153585}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for RELIANCE: unrealized=-438971.33, today=-438971.33", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:04:48.446127+05:30", "timestamp": 1755783288.446127}}}
{"text": "2025-08-21 19:04:48.446 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for TCS: unrealized=-46630.97, today=-46630.97\n", "record": {"elapsed": {"repr": "0:03:30.154119", "seconds": 210.154119}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for TCS: unrealized=-46630.97, today=-46630.97", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:04:48.446661+05:30", "timestamp": 1755783288.446661}}}
{"text": "2025-08-21 19:04:48.447 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for HDFC: unrealized=1744931.1, today=1744931.1\n", "record": {"elapsed": {"repr": "0:03:30.154653", "seconds": 210.154653}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for HDFC: unrealized=1744931.1, today=1744931.1", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:04:48.447195+05:30", "timestamp": 1755783288.447195}}}
{"text": "2025-08-21 19:04:48.447 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for INFY: unrealized=20514.63, today=20514.63\n", "record": {"elapsed": {"repr": "0:03:30.155434", "seconds": 210.155434}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for INFY: unrealized=20514.63, today=20514.63", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:04:48.447976+05:30", "timestamp": 1755783288.447976}}}
{"text": "2025-08-21 19:04:48.448 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for ICICIBANK: unrealized=-439289.83, today=-439289.83\n", "record": {"elapsed": {"repr": "0:03:30.155987", "seconds": 210.155987}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for ICICIBANK: unrealized=-439289.83, today=-439289.83", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:04:48.448529+05:30", "timestamp": 1755783288.448529}}}
{"text": "2025-08-21 19:04:48.449 | INFO     | app.services.dhan_client:get_pnl:545 - Calculated totals - realized: 0.0, unrealized: 840553.6, day: 840553.6\n", "record": {"elapsed": {"repr": "0:03:30.156499", "seconds": 210.156499}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 545, "message": "Calculated totals - realized: 0.0, unrealized: 840553.6, day: 840553.6", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:04:48.449041+05:30", "timestamp": 1755783288.449041}}}
{"text": "2025-08-21 19:04:48.449 | DEBUG    | app.services.dhan_client:get_pnl:554 - PnL consistency check passed: drift=‚Çπ0.00\n", "record": {"elapsed": {"repr": "0:03:30.157011", "seconds": 210.157011}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 554, "message": "PnL consistency check passed: drift=‚Çπ0.00", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:04:48.449553+05:30", "timestamp": 1755783288.449553}}}
{"text": "2025-08-21 19:04:48.450 | DEBUG    | app.services.dhan_client:get_pnl:558 - Creating PnLTotals...\n", "record": {"elapsed": {"repr": "0:03:30.157645", "seconds": 210.157645}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 558, "message": "Creating PnLTotals...", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:04:48.450187+05:30", "timestamp": 1755783288.450187}}}
{"text": "2025-08-21 19:04:48.451 | DEBUG    | app.services.dhan_client:get_pnl:565 - PnLTotals created successfully\n", "record": {"elapsed": {"repr": "0:03:30.158628", "seconds": 210.158628}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 565, "message": "PnLTotals created successfully", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:04:48.451170+05:30", "timestamp": 1755783288.45117}}}
{"text": "2025-08-21 19:04:48.451 | DEBUG    | app.services.dhan_client:get_pnl:574 - Creating PnL model...\n", "record": {"elapsed": {"repr": "0:03:30.159185", "seconds": 210.159185}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 574, "message": "Creating PnL model...", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:04:48.451727+05:30", "timestamp": 1755783288.451727}}}
{"text": "2025-08-21 19:04:48.452 | DEBUG    | app.services.dhan_client:get_pnl:575 - Model fields: totals=<class 'app.models.schemas.PnLTotals'>, perSymbol=5, updated_at=2025-08-21 19:04:48.446059+05:30, trading_day=2025-08-21\n", "record": {"elapsed": {"repr": "0:03:30.159589", "seconds": 210.159589}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 575, "message": "Model fields: totals=<class 'app.models.schemas.PnLTotals'>, perSymbol=5, updated_at=2025-08-21 19:04:48.446059+05:30, trading_day=2025-08-21", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:04:48.452131+05:30", "timestamp": 1755783288.452131}}}
{"text": "2025-08-21 19:04:48.452 | DEBUG    | app.services.dhan_client:get_pnl:584 - Created PnL model: totals=PnLTotals(realized=0.0, unrealized=840553.6, day=840553.6, currency='INR') per_symbol=[PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1727, avg=618.93, ltp=364.75, unrealized=-438971.33, today_pnl=-438971.33), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=167, avg=948.57, ltp=1227.8, unrealized=-46630.97, today_pnl=-46630.97), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=1347, avg=801.44, ltp=2096.86, unrealized=1744931.1, today_pnl=1744931.1), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=143, avg=1427.62, ltp=1284.16, unrealized=20514.63, today_pnl=20514.63), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=438, avg=1994.48, ltp=991.54, unrealized=-439289.83, today_pnl=-439289.83)] updated_at=datetime.datetime(2025, 8, 21, 19, 4, 48, 446059, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))) trading_day='2025-08-21'\n", "record": {"elapsed": {"repr": "0:03:30.160132", "seconds": 210.160132}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 584, "message": "Created PnL model: totals=PnLTotals(realized=0.0, unrealized=840553.6, day=840553.6, currency='INR') per_symbol=[PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1727, avg=618.93, ltp=364.75, unrealized=-438971.33, today_pnl=-438971.33), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=167, avg=948.57, ltp=1227.8, unrealized=-46630.97, today_pnl=-46630.97), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=1347, avg=801.44, ltp=2096.86, unrealized=1744931.1, today_pnl=1744931.1), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=143, avg=1427.62, ltp=1284.16, unrealized=20514.63, today_pnl=20514.63), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=438, avg=1994.48, ltp=991.54, unrealized=-439289.83, today_pnl=-439289.83)] updated_at=datetime.datetime(2025, 8, 21, 19, 4, 48, 446059, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))) trading_day='2025-08-21'", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:04:48.452674+05:30", "timestamp": 1755783288.452674}}}
{"text": "2025-08-21 19:04:48.453 | DEBUG    | app.services.dhan_client:get_pnl:585 - PnL model fields: {'totals': PnLTotals(realized=0.0, unrealized=840553.6, day=840553.6, currency='INR'), 'per_symbol': [PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1727, avg=618.93, ltp=364.75, unrealized=-438971.33, today_pnl=-438971.33), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=167, avg=948.57, ltp=1227.8, unrealized=-46630.97, today_pnl=-46630.97), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=1347, avg=801.44, ltp=2096.86, unrealized=1744931.1, today_pnl=1744931.1), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=143, avg=1427.62, ltp=1284.16, unrealized=20514.63, today_pnl=20514.63), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=438, avg=1994.48, ltp=991.54, unrealized=-439289.83, today_pnl=-439289.83)], 'updated_at': datetime.datetime(2025, 8, 21, 19, 4, 48, 446059, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))), 'trading_day': '2025-08-21'}\n", "record": {"elapsed": {"repr": "0:03:30.160867", "seconds": 210.160867}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 585, "message": "PnL model fields: {'totals': PnLTotals(realized=0.0, unrealized=840553.6, day=840553.6, currency='INR'), 'per_symbol': [PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1727, avg=618.93, ltp=364.75, unrealized=-438971.33, today_pnl=-438971.33), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=167, avg=948.57, ltp=1227.8, unrealized=-46630.97, today_pnl=-46630.97), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=1347, avg=801.44, ltp=2096.86, unrealized=1744931.1, today_pnl=1744931.1), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=143, avg=1427.62, ltp=1284.16, unrealized=20514.63, today_pnl=20514.63), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=438, avg=1994.48, ltp=991.54, unrealized=-439289.83, today_pnl=-439289.83)], 'updated_at': datetime.datetime(2025, 8, 21, 19, 4, 48, 446059, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))), 'trading_day': '2025-08-21'}", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:04:48.453409+05:30", "timestamp": 1755783288.453409}}}
{"text": "2025-08-21 19:04:48.454 | INFO     | app.services.dhan_client:get_pnl:587 - P&L calculation completed successfully: 5 symbols, unrealized=‚Çπ840553.60\n", "record": {"elapsed": {"repr": "0:03:30.161620", "seconds": 210.16162}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 587, "message": "P&L calculation completed successfully: 5 symbols, unrealized=‚Çπ840553.60", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:04:48.454162+05:30", "timestamp": 1755783288.454162}}}
{"text": "2025-08-21 19:04:48.454 | DEBUG    | app.ws.live:emit_delta:408 - Emitted pnl delta: seq=231\n", "record": {"elapsed": {"repr": "0:03:30.162334", "seconds": 210.162334}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "emit_delta", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 408, "message": "Emitted pnl delta: seq=231", "module": "live", "name": "app.ws.live", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:04:48.454876+05:30", "timestamp": 1755783288.454876}}}
{"text": "2025-08-21 19:04:48.455 | DEBUG    | app.ws.live:emit_delta:408 - Emitted positions delta: seq=232\n", "record": {"elapsed": {"repr": "0:03:30.163450", "seconds": 210.16345}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "emit_delta", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 408, "message": "Emitted positions delta: seq=232", "module": "live", "name": "app.ws.live", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:04:48.455992+05:30", "timestamp": 1755783288.455992}}}
{"text": "2025-08-21 19:04:49.047 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:03:30.754572", "seconds": 210.754572}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:04:49.047114+05:30", "timestamp": 1755783289.047114}}}
{"text": "2025-08-21 19:04:49.047 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:03:30.755293", "seconds": 210.755293}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:04:49.047835+05:30", "timestamp": 1755783289.047835}}}
{"text": "2025-08-21 19:04:49.048 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:03:30.755807", "seconds": 210.755807}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:04:49.048349+05:30", "timestamp": 1755783289.048349}}}
{"text": "2025-08-21 19:04:49.048 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:03:30.756314", "seconds": 210.756314}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:04:49.048856+05:30", "timestamp": 1755783289.048856}}}
{"text": "2025-08-21 19:04:49.049 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:03:30.756979", "seconds": 210.756979}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:04:49.049521+05:30", "timestamp": 1755783289.049521}}}
{"text": "2025-08-21 19:04:49.050 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:03:30.757763", "seconds": 210.757763}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:04:49.050305+05:30", "timestamp": 1755783289.050305}}}
{"text": "2025-08-21 19:04:49.050 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:03:30.758348", "seconds": 210.758348}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:04:49.050890+05:30", "timestamp": 1755783289.05089}}}
{"text": "2025-08-21 19:04:49.051 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:03:30.758741", "seconds": 210.758741}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:04:49.051283+05:30", "timestamp": 1755783289.051283}}}
{"text": "2025-08-21 19:04:49.051 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:03:30.759169", "seconds": 210.759169}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:04:49.051711+05:30", "timestamp": 1755783289.051711}}}
{"text": "2025-08-21 19:04:49.052 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:03:30.759563", "seconds": 210.759563}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:04:49.052105+05:30", "timestamp": 1755783289.052105}}}
{"text": "2025-08-21 19:04:50.010 | INFO     | app.services.dhan_client:get_pnl:489 - Starting accurate P&L calculation\n", "record": {"elapsed": {"repr": "0:03:31.718409", "seconds": 211.718409}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 489, "message": "Starting accurate P&L calculation", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:04:50.010951+05:30", "timestamp": 1755783290.010951}}}
{"text": "2025-08-21 19:04:50.011 | INFO     | app.services.dhan_client:get_pnl:491 - Fetched 5 positions\n", "record": {"elapsed": {"repr": "0:03:31.719242", "seconds": 211.719242}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 491, "message": "Fetched 5 positions", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:04:50.011784+05:30", "timestamp": 1755783290.011784}}}
{"text": "2025-08-21 19:04:50.012 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for RELIANCE: unrealized=-434695.41, today=-434695.41\n", "record": {"elapsed": {"repr": "0:03:31.720107", "seconds": 211.720107}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for RELIANCE: unrealized=-434695.41, today=-434695.41", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:04:50.012649+05:30", "timestamp": 1755783290.012649}}}
{"text": "2025-08-21 19:04:50.013 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for TCS: unrealized=-49196.56, today=-49196.56\n", "record": {"elapsed": {"repr": "0:03:31.721252", "seconds": 211.721252}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for TCS: unrealized=-49196.56, today=-49196.56", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:04:50.013794+05:30", "timestamp": 1755783290.013794}}}
{"text": "2025-08-21 19:04:50.014 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for HDFC: unrealized=1746610.26, today=1746610.26\n", "record": {"elapsed": {"repr": "0:03:31.721904", "seconds": 211.721904}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for HDFC: unrealized=1746610.26, today=1746610.26", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:04:50.014446+05:30", "timestamp": 1755783290.014446}}}
{"text": "2025-08-21 19:04:50.015 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for INFY: unrealized=23371.75, today=23371.75\n", "record": {"elapsed": {"repr": "0:03:31.722473", "seconds": 211.722473}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for INFY: unrealized=23371.75, today=23371.75", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:04:50.015015+05:30", "timestamp": 1755783290.015015}}}
{"text": "2025-08-21 19:04:50.015 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for ICICIBANK: unrealized=-447682.37, today=-447682.37\n", "record": {"elapsed": {"repr": "0:03:31.723078", "seconds": 211.723078}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for ICICIBANK: unrealized=-447682.37, today=-447682.37", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:04:50.015620+05:30", "timestamp": 1755783290.01562}}}
{"text": "2025-08-21 19:04:50.016 | INFO     | app.services.dhan_client:get_pnl:545 - Calculated totals - realized: 0.0, unrealized: 838407.67, day: 838407.67\n", "record": {"elapsed": {"repr": "0:03:31.723861", "seconds": 211.723861}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 545, "message": "Calculated totals - realized: 0.0, unrealized: 838407.67, day: 838407.67", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:04:50.016403+05:30", "timestamp": 1755783290.016403}}}
{"text": "2025-08-21 19:04:50.017 | DEBUG    | app.services.dhan_client:get_pnl:554 - PnL consistency check passed: drift=‚Çπ0.00\n", "record": {"elapsed": {"repr": "0:03:31.725196", "seconds": 211.725196}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 554, "message": "PnL consistency check passed: drift=‚Çπ0.00", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:04:50.017738+05:30", "timestamp": 1755783290.017738}}}
{"text": "2025-08-21 19:04:50.018 | DEBUG    | app.services.dhan_client:get_pnl:558 - Creating PnLTotals...\n", "record": {"elapsed": {"repr": "0:03:31.726037", "seconds": 211.726037}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 558, "message": "Creating PnLTotals...", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:04:50.018579+05:30", "timestamp": 1755783290.018579}}}
{"text": "2025-08-21 19:04:50.019 | DEBUG    | app.services.dhan_client:get_pnl:565 - PnLTotals created successfully\n", "record": {"elapsed": {"repr": "0:03:31.726581", "seconds": 211.726581}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 565, "message": "PnLTotals created successfully", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:04:50.019123+05:30", "timestamp": 1755783290.019123}}}
{"text": "2025-08-21 19:04:50.019 | DEBUG    | app.services.dhan_client:get_pnl:574 - Creating PnL model...\n", "record": {"elapsed": {"repr": "0:03:31.727199", "seconds": 211.727199}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 574, "message": "Creating PnL model...", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:04:50.019741+05:30", "timestamp": 1755783290.019741}}}
{"text": "2025-08-21 19:04:50.020 | DEBUG    | app.services.dhan_client:get_pnl:575 - Model fields: totals=<class 'app.models.schemas.PnLTotals'>, perSymbol=5, updated_at=2025-08-21 19:04:50.012489+05:30, trading_day=2025-08-21\n", "record": {"elapsed": {"repr": "0:03:31.727997", "seconds": 211.727997}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 575, "message": "Model fields: totals=<class 'app.models.schemas.PnLTotals'>, perSymbol=5, updated_at=2025-08-21 19:04:50.012489+05:30, trading_day=2025-08-21", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:04:50.020539+05:30", "timestamp": 1755783290.020539}}}
{"text": "2025-08-21 19:04:50.021 | DEBUG    | app.services.dhan_client:get_pnl:584 - Created PnL model: totals=PnLTotals(realized=0.0, unrealized=838407.67, day=838407.67, currency='INR') per_symbol=[PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1727, avg=618.93, ltp=367.22, unrealized=-434695.41, today_pnl=-434695.41), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=167, avg=948.57, ltp=1243.16, unrealized=-49196.56, today_pnl=-49196.56), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=1347, avg=801.44, ltp=2098.11, unrealized=1746610.26, today_pnl=1746610.26), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=143, avg=1427.62, ltp=1264.18, unrealized=23371.75, today_pnl=23371.75), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=438, avg=1994.48, ltp=972.37, unrealized=-447682.37, today_pnl=-447682.37)] updated_at=datetime.datetime(2025, 8, 21, 19, 4, 50, 12489, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))) trading_day='2025-08-21'\n", "record": {"elapsed": {"repr": "0:03:31.729385", "seconds": 211.729385}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 584, "message": "Created PnL model: totals=PnLTotals(realized=0.0, unrealized=838407.67, day=838407.67, currency='INR') per_symbol=[PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1727, avg=618.93, ltp=367.22, unrealized=-434695.41, today_pnl=-434695.41), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=167, avg=948.57, ltp=1243.16, unrealized=-49196.56, today_pnl=-49196.56), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=1347, avg=801.44, ltp=2098.11, unrealized=1746610.26, today_pnl=1746610.26), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=143, avg=1427.62, ltp=1264.18, unrealized=23371.75, today_pnl=23371.75), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=438, avg=1994.48, ltp=972.37, unrealized=-447682.37, today_pnl=-447682.37)] updated_at=datetime.datetime(2025, 8, 21, 19, 4, 50, 12489, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))) trading_day='2025-08-21'", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:04:50.021927+05:30", "timestamp": 1755783290.021927}}}
{"text": "2025-08-21 19:04:50.022 | DEBUG    | app.services.dhan_client:get_pnl:585 - PnL model fields: {'totals': PnLTotals(realized=0.0, unrealized=838407.67, day=838407.67, currency='INR'), 'per_symbol': [PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1727, avg=618.93, ltp=367.22, unrealized=-434695.41, today_pnl=-434695.41), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=167, avg=948.57, ltp=1243.16, unrealized=-49196.56, today_pnl=-49196.56), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=1347, avg=801.44, ltp=2098.11, unrealized=1746610.26, today_pnl=1746610.26), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=143, avg=1427.62, ltp=1264.18, unrealized=23371.75, today_pnl=23371.75), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=438, avg=1994.48, ltp=972.37, unrealized=-447682.37, today_pnl=-447682.37)], 'updated_at': datetime.datetime(2025, 8, 21, 19, 4, 50, 12489, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))), 'trading_day': '2025-08-21'}\n", "record": {"elapsed": {"repr": "0:03:31.730439", "seconds": 211.730439}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 585, "message": "PnL model fields: {'totals': PnLTotals(realized=0.0, unrealized=838407.67, day=838407.67, currency='INR'), 'per_symbol': [PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1727, avg=618.93, ltp=367.22, unrealized=-434695.41, today_pnl=-434695.41), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=167, avg=948.57, ltp=1243.16, unrealized=-49196.56, today_pnl=-49196.56), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=1347, avg=801.44, ltp=2098.11, unrealized=1746610.26, today_pnl=1746610.26), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=143, avg=1427.62, ltp=1264.18, unrealized=23371.75, today_pnl=23371.75), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=438, avg=1994.48, ltp=972.37, unrealized=-447682.37, today_pnl=-447682.37)], 'updated_at': datetime.datetime(2025, 8, 21, 19, 4, 50, 12489, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))), 'trading_day': '2025-08-21'}", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:04:50.022981+05:30", "timestamp": 1755783290.022981}}}
{"text": "2025-08-21 19:04:50.023 | INFO     | app.services.dhan_client:get_pnl:587 - P&L calculation completed successfully: 5 symbols, unrealized=‚Çπ838407.67\n", "record": {"elapsed": {"repr": "0:03:31.731419", "seconds": 211.731419}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 587, "message": "P&L calculation completed successfully: 5 symbols, unrealized=‚Çπ838407.67", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:04:50.023961+05:30", "timestamp": 1755783290.023961}}}
{"text": "2025-08-21 19:04:50.025 | DEBUG    | app.ws.live:emit_delta:408 - Emitted pnl delta: seq=233\n", "record": {"elapsed": {"repr": "0:03:31.732535", "seconds": 211.732535}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "emit_delta", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 408, "message": "Emitted pnl delta: seq=233", "module": "live", "name": "app.ws.live", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:04:50.025077+05:30", "timestamp": 1755783290.025077}}}
{"text": "2025-08-21 19:04:50.026 | DEBUG    | app.ws.live:emit_delta:408 - Emitted positions delta: seq=234\n", "record": {"elapsed": {"repr": "0:03:31.733898", "seconds": 211.733898}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "emit_delta", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 408, "message": "Emitted positions delta: seq=234", "module": "live", "name": "app.ws.live", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:04:50.026440+05:30", "timestamp": 1755783290.02644}}}
{"text": "2025-08-21 19:04:51.052 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:03:32.760267", "seconds": 212.760267}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:04:51.052809+05:30", "timestamp": 1755783291.052809}}}
{"text": "2025-08-21 19:04:51.053 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:03:32.761109", "seconds": 212.761109}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:04:51.053651+05:30", "timestamp": 1755783291.053651}}}
{"text": "2025-08-21 19:04:51.054 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:03:32.762050", "seconds": 212.76205}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:04:51.054592+05:30", "timestamp": 1755783291.054592}}}
{"text": "2025-08-21 19:04:51.055 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:03:32.762571", "seconds": 212.762571}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:04:51.055113+05:30", "timestamp": 1755783291.055113}}}
{"text": "2025-08-21 19:04:51.055 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:03:32.763104", "seconds": 212.763104}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:04:51.055646+05:30", "timestamp": 1755783291.055646}}}
{"text": "2025-08-21 19:04:51.056 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:03:32.763525", "seconds": 212.763525}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:04:51.056067+05:30", "timestamp": 1755783291.056067}}}
{"text": "2025-08-21 19:04:51.056 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:03:32.764105", "seconds": 212.764105}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:04:51.056647+05:30", "timestamp": 1755783291.056647}}}
{"text": "2025-08-21 19:04:51.057 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:03:32.764702", "seconds": 212.764702}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:04:51.057244+05:30", "timestamp": 1755783291.057244}}}
{"text": "2025-08-21 19:04:51.058 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:03:32.765650", "seconds": 212.76565}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:04:51.058192+05:30", "timestamp": 1755783291.058192}}}
{"text": "2025-08-21 19:04:51.058 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:03:32.766262", "seconds": 212.766262}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:04:51.058804+05:30", "timestamp": 1755783291.058804}}}
{"text": "2025-08-21 19:04:51.865 | INFO     | app.services.dhan_client:get_pnl:489 - Starting accurate P&L calculation\n", "record": {"elapsed": {"repr": "0:03:33.572604", "seconds": 213.572604}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 489, "message": "Starting accurate P&L calculation", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:04:51.865146+05:30", "timestamp": 1755783291.865146}}}
{"text": "2025-08-21 19:04:51.865 | INFO     | app.services.dhan_client:get_pnl:491 - Fetched 5 positions\n", "record": {"elapsed": {"repr": "0:03:33.573363", "seconds": 213.573363}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 491, "message": "Fetched 5 positions", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:04:51.865905+05:30", "timestamp": 1755783291.865905}}}
{"text": "2025-08-21 19:04:51.866 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for RELIANCE: unrealized=-446634.27, today=-446634.27\n", "record": {"elapsed": {"repr": "0:03:33.573836", "seconds": 213.573836}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for RELIANCE: unrealized=-446634.27, today=-446634.27", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:04:51.866378+05:30", "timestamp": 1755783291.866378}}}
{"text": "2025-08-21 19:04:51.866 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for TCS: unrealized=-51869.32, today=-51869.32\n", "record": {"elapsed": {"repr": "0:03:33.574325", "seconds": 213.574325}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for TCS: unrealized=-51869.32, today=-51869.32", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:04:51.866867+05:30", "timestamp": 1755783291.866867}}}
{"text": "2025-08-21 19:04:51.867 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for HDFC: unrealized=1725197.38, today=1725197.38\n", "record": {"elapsed": {"repr": "0:03:33.574842", "seconds": 213.574842}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for HDFC: unrealized=1725197.38, today=1725197.38", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:04:51.867384+05:30", "timestamp": 1755783291.867384}}}
{"text": "2025-08-21 19:04:51.867 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for INFY: unrealized=24588.61, today=24588.61\n", "record": {"elapsed": {"repr": "0:03:33.575293", "seconds": 213.575293}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for INFY: unrealized=24588.61, today=24588.61", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:04:51.867835+05:30", "timestamp": 1755783291.867835}}}
{"text": "2025-08-21 19:04:51.868 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for ICICIBANK: unrealized=-449808.97, today=-449808.97\n", "record": {"elapsed": {"repr": "0:03:33.575650", "seconds": 213.57565}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for ICICIBANK: unrealized=-449808.97, today=-449808.97", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:04:51.868192+05:30", "timestamp": 1755783291.868192}}}
{"text": "2025-08-21 19:04:51.868 | INFO     | app.services.dhan_client:get_pnl:545 - Calculated totals - realized: 0.0, unrealized: 801473.43, day: 801473.43\n", "record": {"elapsed": {"repr": "0:03:33.576047", "seconds": 213.576047}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 545, "message": "Calculated totals - realized: 0.0, unrealized: 801473.43, day: 801473.43", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:04:51.868589+05:30", "timestamp": 1755783291.868589}}}
{"text": "2025-08-21 19:04:51.869 | DEBUG    | app.services.dhan_client:get_pnl:554 - PnL consistency check passed: drift=‚Çπ0.00\n", "record": {"elapsed": {"repr": "0:03:33.576595", "seconds": 213.576595}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 554, "message": "PnL consistency check passed: drift=‚Çπ0.00", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:04:51.869137+05:30", "timestamp": 1755783291.869137}}}
{"text": "2025-08-21 19:04:51.869 | DEBUG    | app.services.dhan_client:get_pnl:558 - Creating PnLTotals...\n", "record": {"elapsed": {"repr": "0:03:33.577084", "seconds": 213.577084}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 558, "message": "Creating PnLTotals...", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:04:51.869626+05:30", "timestamp": 1755783291.869626}}}
{"text": "2025-08-21 19:04:51.870 | DEBUG    | app.services.dhan_client:get_pnl:565 - PnLTotals created successfully\n", "record": {"elapsed": {"repr": "0:03:33.577706", "seconds": 213.577706}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 565, "message": "PnLTotals created successfully", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:04:51.870248+05:30", "timestamp": 1755783291.870248}}}
{"text": "2025-08-21 19:04:51.871 | DEBUG    | app.services.dhan_client:get_pnl:574 - Creating PnL model...\n", "record": {"elapsed": {"repr": "0:03:33.578590", "seconds": 213.57859}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 574, "message": "Creating PnL model...", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:04:51.871132+05:30", "timestamp": 1755783291.871132}}}
{"text": "2025-08-21 19:04:51.871 | DEBUG    | app.services.dhan_client:get_pnl:575 - Model fields: totals=<class 'app.models.schemas.PnLTotals'>, perSymbol=5, updated_at=2025-08-21 19:04:51.866324+05:30, trading_day=2025-08-21\n", "record": {"elapsed": {"repr": "0:03:33.579140", "seconds": 213.57914}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 575, "message": "Model fields: totals=<class 'app.models.schemas.PnLTotals'>, perSymbol=5, updated_at=2025-08-21 19:04:51.866324+05:30, trading_day=2025-08-21", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:04:51.871682+05:30", "timestamp": 1755783291.871682}}}
{"text": "2025-08-21 19:04:51.872 | DEBUG    | app.services.dhan_client:get_pnl:584 - Created PnL model: totals=PnLTotals(realized=0.0, unrealized=801473.43, day=801473.43, currency='INR') per_symbol=[PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1727, avg=618.93, ltp=360.31, unrealized=-446634.27, today_pnl=-446634.27), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=167, avg=948.57, ltp=1259.16, unrealized=-51869.32, today_pnl=-51869.32), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=1347, avg=801.44, ltp=2082.21, unrealized=1725197.38, today_pnl=1725197.38), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=143, avg=1427.62, ltp=1255.67, unrealized=24588.61, today_pnl=24588.61), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=438, avg=1994.48, ltp=967.52, unrealized=-449808.97, today_pnl=-449808.97)] updated_at=datetime.datetime(2025, 8, 21, 19, 4, 51, 866324, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))) trading_day='2025-08-21'\n", "record": {"elapsed": {"repr": "0:03:33.579888", "seconds": 213.579888}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 584, "message": "Created PnL model: totals=PnLTotals(realized=0.0, unrealized=801473.43, day=801473.43, currency='INR') per_symbol=[PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1727, avg=618.93, ltp=360.31, unrealized=-446634.27, today_pnl=-446634.27), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=167, avg=948.57, ltp=1259.16, unrealized=-51869.32, today_pnl=-51869.32), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=1347, avg=801.44, ltp=2082.21, unrealized=1725197.38, today_pnl=1725197.38), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=143, avg=1427.62, ltp=1255.67, unrealized=24588.61, today_pnl=24588.61), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=438, avg=1994.48, ltp=967.52, unrealized=-449808.97, today_pnl=-449808.97)] updated_at=datetime.datetime(2025, 8, 21, 19, 4, 51, 866324, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))) trading_day='2025-08-21'", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:04:51.872430+05:30", "timestamp": 1755783291.87243}}}
{"text": "2025-08-21 19:04:51.873 | DEBUG    | app.services.dhan_client:get_pnl:585 - PnL model fields: {'totals': PnLTotals(realized=0.0, unrealized=801473.43, day=801473.43, currency='INR'), 'per_symbol': [PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1727, avg=618.93, ltp=360.31, unrealized=-446634.27, today_pnl=-446634.27), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=167, avg=948.57, ltp=1259.16, unrealized=-51869.32, today_pnl=-51869.32), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=1347, avg=801.44, ltp=2082.21, unrealized=1725197.38, today_pnl=1725197.38), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=143, avg=1427.62, ltp=1255.67, unrealized=24588.61, today_pnl=24588.61), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=438, avg=1994.48, ltp=967.52, unrealized=-449808.97, today_pnl=-449808.97)], 'updated_at': datetime.datetime(2025, 8, 21, 19, 4, 51, 866324, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))), 'trading_day': '2025-08-21'}\n", "record": {"elapsed": {"repr": "0:03:33.580816", "seconds": 213.580816}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 585, "message": "PnL model fields: {'totals': PnLTotals(realized=0.0, unrealized=801473.43, day=801473.43, currency='INR'), 'per_symbol': [PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1727, avg=618.93, ltp=360.31, unrealized=-446634.27, today_pnl=-446634.27), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=167, avg=948.57, ltp=1259.16, unrealized=-51869.32, today_pnl=-51869.32), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=1347, avg=801.44, ltp=2082.21, unrealized=1725197.38, today_pnl=1725197.38), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=143, avg=1427.62, ltp=1255.67, unrealized=24588.61, today_pnl=24588.61), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=438, avg=1994.48, ltp=967.52, unrealized=-449808.97, today_pnl=-449808.97)], 'updated_at': datetime.datetime(2025, 8, 21, 19, 4, 51, 866324, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))), 'trading_day': '2025-08-21'}", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:04:51.873358+05:30", "timestamp": 1755783291.873358}}}
{"text": "2025-08-21 19:04:51.874 | INFO     | app.services.dhan_client:get_pnl:587 - P&L calculation completed successfully: 5 symbols, unrealized=‚Çπ801473.43\n", "record": {"elapsed": {"repr": "0:03:33.581820", "seconds": 213.58182}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 587, "message": "P&L calculation completed successfully: 5 symbols, unrealized=‚Çπ801473.43", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:04:51.874362+05:30", "timestamp": 1755783291.874362}}}
{"text": "2025-08-21 19:04:51.875 | DEBUG    | app.ws.live:emit_delta:408 - Emitted pnl delta: seq=235\n", "record": {"elapsed": {"repr": "0:03:33.582664", "seconds": 213.582664}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "emit_delta", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 408, "message": "Emitted pnl delta: seq=235", "module": "live", "name": "app.ws.live", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:04:51.875206+05:30", "timestamp": 1755783291.875206}}}
{"text": "2025-08-21 19:04:51.875 | DEBUG    | app.ws.live:emit_delta:408 - Emitted positions delta: seq=236\n", "record": {"elapsed": {"repr": "0:03:33.583360", "seconds": 213.58336}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "emit_delta", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 408, "message": "Emitted positions delta: seq=236", "module": "live", "name": "app.ws.live", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:04:51.875902+05:30", "timestamp": 1755783291.875902}}}
{"text": "2025-08-21 19:04:53.060 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:03:34.767549", "seconds": 214.767549}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:04:53.060091+05:30", "timestamp": 1755783293.060091}}}
{"text": "2025-08-21 19:04:53.060 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:03:34.768201", "seconds": 214.768201}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:04:53.060743+05:30", "timestamp": 1755783293.060743}}}
{"text": "2025-08-21 19:04:53.061 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:03:34.768906", "seconds": 214.768906}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:04:53.061448+05:30", "timestamp": 1755783293.061448}}}
{"text": "2025-08-21 19:04:53.062 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:03:34.769652", "seconds": 214.769652}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:04:53.062194+05:30", "timestamp": 1755783293.062194}}}
{"text": "2025-08-21 19:04:53.062 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:03:34.770102", "seconds": 214.770102}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:04:53.062644+05:30", "timestamp": 1755783293.062644}}}
{"text": "2025-08-21 19:04:53.063 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:03:34.770545", "seconds": 214.770545}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:04:53.063087+05:30", "timestamp": 1755783293.063087}}}
{"text": "2025-08-21 19:04:53.063 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:03:34.771027", "seconds": 214.771027}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:04:53.063569+05:30", "timestamp": 1755783293.063569}}}
{"text": "2025-08-21 19:04:53.064 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:03:34.771584", "seconds": 214.771584}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:04:53.064126+05:30", "timestamp": 1755783293.064126}}}
{"text": "2025-08-21 19:04:53.064 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:03:34.772400", "seconds": 214.7724}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:04:53.064942+05:30", "timestamp": 1755783293.064942}}}
{"text": "2025-08-21 19:04:53.065 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:03:34.773120", "seconds": 214.77312}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:04:53.065662+05:30", "timestamp": 1755783293.065662}}}
{"text": "2025-08-21 19:04:53.642 | INFO     | app.services.dhan_client:get_pnl:489 - Starting accurate P&L calculation\n", "record": {"elapsed": {"repr": "0:03:35.349603", "seconds": 215.349603}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 489, "message": "Starting accurate P&L calculation", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:04:53.642145+05:30", "timestamp": 1755783293.642145}}}
{"text": "2025-08-21 19:04:53.642 | INFO     | app.services.dhan_client:get_pnl:491 - Fetched 5 positions\n", "record": {"elapsed": {"repr": "0:03:35.350195", "seconds": 215.350195}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 491, "message": "Fetched 5 positions", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:04:53.642737+05:30", "timestamp": 1755783293.642737}}}
{"text": "2025-08-21 19:04:53.643 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for RELIANCE: unrealized=-438197.08, today=-438197.08\n", "record": {"elapsed": {"repr": "0:03:35.350679", "seconds": 215.350679}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for RELIANCE: unrealized=-438197.08, today=-438197.08", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:04:53.643221+05:30", "timestamp": 1755783293.643221}}}
{"text": "2025-08-21 19:04:53.643 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for TCS: unrealized=-50934.91, today=-50934.91\n", "record": {"elapsed": {"repr": "0:03:35.351187", "seconds": 215.351187}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for TCS: unrealized=-50934.91, today=-50934.91", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:04:53.643729+05:30", "timestamp": 1755783293.643729}}}
{"text": "2025-08-21 19:04:53.644 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for HDFC: unrealized=1703395.73, today=1703395.73\n", "record": {"elapsed": {"repr": "0:03:35.352092", "seconds": 215.352092}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for HDFC: unrealized=1703395.73, today=1703395.73", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:04:53.644634+05:30", "timestamp": 1755783293.644634}}}
{"text": "2025-08-21 19:04:53.645 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for INFY: unrealized=25999.55, today=25999.55\n", "record": {"elapsed": {"repr": "0:03:35.352676", "seconds": 215.352676}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for INFY: unrealized=25999.55, today=25999.55", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:04:53.645218+05:30", "timestamp": 1755783293.645218}}}
{"text": "2025-08-21 19:04:53.645 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for ICICIBANK: unrealized=-456379.24, today=-456379.24\n", "record": {"elapsed": {"repr": "0:03:35.353150", "seconds": 215.35315}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for ICICIBANK: unrealized=-456379.24, today=-456379.24", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:04:53.645692+05:30", "timestamp": 1755783293.645692}}}
{"text": "2025-08-21 19:04:53.646 | INFO     | app.services.dhan_client:get_pnl:545 - Calculated totals - realized: 0.0, unrealized: 783884.05, day: 783884.05\n", "record": {"elapsed": {"repr": "0:03:35.353613", "seconds": 215.353613}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 545, "message": "Calculated totals - realized: 0.0, unrealized: 783884.05, day: 783884.05", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:04:53.646155+05:30", "timestamp": 1755783293.646155}}}
{"text": "2025-08-21 19:04:53.646 | DEBUG    | app.services.dhan_client:get_pnl:554 - PnL consistency check passed: drift=‚Çπ0.00\n", "record": {"elapsed": {"repr": "0:03:35.354106", "seconds": 215.354106}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 554, "message": "PnL consistency check passed: drift=‚Çπ0.00", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:04:53.646648+05:30", "timestamp": 1755783293.646648}}}
{"text": "2025-08-21 19:04:53.647 | DEBUG    | app.services.dhan_client:get_pnl:558 - Creating PnLTotals...\n", "record": {"elapsed": {"repr": "0:03:35.354683", "seconds": 215.354683}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 558, "message": "Creating PnLTotals...", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:04:53.647225+05:30", "timestamp": 1755783293.647225}}}
{"text": "2025-08-21 19:04:53.648 | DEBUG    | app.services.dhan_client:get_pnl:565 - PnLTotals created successfully\n", "record": {"elapsed": {"repr": "0:03:35.355680", "seconds": 215.35568}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 565, "message": "PnLTotals created successfully", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:04:53.648222+05:30", "timestamp": 1755783293.648222}}}
{"text": "2025-08-21 19:04:53.648 | DEBUG    | app.services.dhan_client:get_pnl:574 - Creating PnL model...\n", "record": {"elapsed": {"repr": "0:03:35.356326", "seconds": 215.356326}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 574, "message": "Creating PnL model...", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:04:53.648868+05:30", "timestamp": 1755783293.648868}}}
{"text": "2025-08-21 19:04:53.649 | DEBUG    | app.services.dhan_client:get_pnl:575 - Model fields: totals=<class 'app.models.schemas.PnLTotals'>, perSymbol=5, updated_at=2025-08-21 19:04:53.643129+05:30, trading_day=2025-08-21\n", "record": {"elapsed": {"repr": "0:03:35.356736", "seconds": 215.356736}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 575, "message": "Model fields: totals=<class 'app.models.schemas.PnLTotals'>, perSymbol=5, updated_at=2025-08-21 19:04:53.643129+05:30, trading_day=2025-08-21", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:04:53.649278+05:30", "timestamp": 1755783293.649278}}}
{"text": "2025-08-21 19:04:53.649 | DEBUG    | app.services.dhan_client:get_pnl:584 - Created PnL model: totals=PnLTotals(realized=0.0, unrealized=783884.05, day=783884.05, currency='INR') per_symbol=[PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1727, avg=618.93, ltp=365.2, unrealized=-438197.08, today_pnl=-438197.08), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=167, avg=948.57, ltp=1253.57, unrealized=-50934.91, today_pnl=-50934.91), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=1347, avg=801.44, ltp=2066.02, unrealized=1703395.73, today_pnl=1703395.73), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=143, avg=1427.62, ltp=1245.8, unrealized=25999.55, today_pnl=25999.55), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=438, avg=1994.48, ltp=952.52, unrealized=-456379.24, today_pnl=-456379.24)] updated_at=datetime.datetime(2025, 8, 21, 19, 4, 53, 643129, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))) trading_day='2025-08-21'\n", "record": {"elapsed": {"repr": "0:03:35.357359", "seconds": 215.357359}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 584, "message": "Created PnL model: totals=PnLTotals(realized=0.0, unrealized=783884.05, day=783884.05, currency='INR') per_symbol=[PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1727, avg=618.93, ltp=365.2, unrealized=-438197.08, today_pnl=-438197.08), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=167, avg=948.57, ltp=1253.57, unrealized=-50934.91, today_pnl=-50934.91), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=1347, avg=801.44, ltp=2066.02, unrealized=1703395.73, today_pnl=1703395.73), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=143, avg=1427.62, ltp=1245.8, unrealized=25999.55, today_pnl=25999.55), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=438, avg=1994.48, ltp=952.52, unrealized=-456379.24, today_pnl=-456379.24)] updated_at=datetime.datetime(2025, 8, 21, 19, 4, 53, 643129, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))) trading_day='2025-08-21'", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:04:53.649901+05:30", "timestamp": 1755783293.649901}}}
{"text": "2025-08-21 19:04:53.650 | DEBUG    | app.services.dhan_client:get_pnl:585 - PnL model fields: {'totals': PnLTotals(realized=0.0, unrealized=783884.05, day=783884.05, currency='INR'), 'per_symbol': [PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1727, avg=618.93, ltp=365.2, unrealized=-438197.08, today_pnl=-438197.08), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=167, avg=948.57, ltp=1253.57, unrealized=-50934.91, today_pnl=-50934.91), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=1347, avg=801.44, ltp=2066.02, unrealized=1703395.73, today_pnl=1703395.73), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=143, avg=1427.62, ltp=1245.8, unrealized=25999.55, today_pnl=25999.55), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=438, avg=1994.48, ltp=952.52, unrealized=-456379.24, today_pnl=-456379.24)], 'updated_at': datetime.datetime(2025, 8, 21, 19, 4, 53, 643129, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))), 'trading_day': '2025-08-21'}\n", "record": {"elapsed": {"repr": "0:03:35.358110", "seconds": 215.35811}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 585, "message": "PnL model fields: {'totals': PnLTotals(realized=0.0, unrealized=783884.05, day=783884.05, currency='INR'), 'per_symbol': [PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1727, avg=618.93, ltp=365.2, unrealized=-438197.08, today_pnl=-438197.08), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=167, avg=948.57, ltp=1253.57, unrealized=-50934.91, today_pnl=-50934.91), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=1347, avg=801.44, ltp=2066.02, unrealized=1703395.73, today_pnl=1703395.73), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=143, avg=1427.62, ltp=1245.8, unrealized=25999.55, today_pnl=25999.55), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=438, avg=1994.48, ltp=952.52, unrealized=-456379.24, today_pnl=-456379.24)], 'updated_at': datetime.datetime(2025, 8, 21, 19, 4, 53, 643129, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))), 'trading_day': '2025-08-21'}", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:04:53.650652+05:30", "timestamp": 1755783293.650652}}}
{"text": "2025-08-21 19:04:53.651 | INFO     | app.services.dhan_client:get_pnl:587 - P&L calculation completed successfully: 5 symbols, unrealized=‚Çπ783884.05\n", "record": {"elapsed": {"repr": "0:03:35.358665", "seconds": 215.358665}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 587, "message": "P&L calculation completed successfully: 5 symbols, unrealized=‚Çπ783884.05", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:04:53.651207+05:30", "timestamp": 1755783293.651207}}}
{"text": "2025-08-21 19:04:53.651 | DEBUG    | app.ws.live:emit_delta:408 - Emitted pnl delta: seq=237\n", "record": {"elapsed": {"repr": "0:03:35.359350", "seconds": 215.35935}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "emit_delta", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 408, "message": "Emitted pnl delta: seq=237", "module": "live", "name": "app.ws.live", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:04:53.651892+05:30", "timestamp": 1755783293.651892}}}
{"text": "2025-08-21 19:04:53.653 | DEBUG    | app.ws.live:emit_delta:408 - Emitted positions delta: seq=238\n", "record": {"elapsed": {"repr": "0:03:35.360585", "seconds": 215.360585}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "emit_delta", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 408, "message": "Emitted positions delta: seq=238", "module": "live", "name": "app.ws.live", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:04:53.653127+05:30", "timestamp": 1755783293.653127}}}
{"text": "2025-08-21 19:04:55.066 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:03:36.774193", "seconds": 216.774193}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:04:55.066735+05:30", "timestamp": 1755783295.066735}}}
{"text": "2025-08-21 19:04:55.067 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:03:36.774829", "seconds": 216.774829}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:04:55.067371+05:30", "timestamp": 1755783295.067371}}}
{"text": "2025-08-21 19:04:55.067 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:03:36.775273", "seconds": 216.775273}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:04:55.067815+05:30", "timestamp": 1755783295.067815}}}
{"text": "2025-08-21 19:04:55.068 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:03:36.776046", "seconds": 216.776046}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:04:55.068588+05:30", "timestamp": 1755783295.068588}}}
{"text": "2025-08-21 19:04:55.069 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:03:36.776901", "seconds": 216.776901}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:04:55.069443+05:30", "timestamp": 1755783295.069443}}}
{"text": "2025-08-21 19:04:55.069 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:03:36.777373", "seconds": 216.777373}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:04:55.069915+05:30", "timestamp": 1755783295.069915}}}
{"text": "2025-08-21 19:04:55.070 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:03:36.777855", "seconds": 216.777855}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:04:55.070397+05:30", "timestamp": 1755783295.070397}}}
{"text": "2025-08-21 19:04:55.070 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:03:36.778354", "seconds": 216.778354}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:04:55.070896+05:30", "timestamp": 1755783295.070896}}}
{"text": "2025-08-21 19:04:55.071 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:03:36.778862", "seconds": 216.778862}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:04:55.071404+05:30", "timestamp": 1755783295.071404}}}
{"text": "2025-08-21 19:04:55.072 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:03:36.779496", "seconds": 216.779496}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:04:55.072038+05:30", "timestamp": 1755783295.072038}}}
{"text": "2025-08-21 19:04:55.315 | INFO     | app.services.dhan_client:get_pnl:489 - Starting accurate P&L calculation\n", "record": {"elapsed": {"repr": "0:03:37.022732", "seconds": 217.022732}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 489, "message": "Starting accurate P&L calculation", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:04:55.315274+05:30", "timestamp": 1755783295.315274}}}
{"text": "2025-08-21 19:04:55.315 | INFO     | app.services.dhan_client:get_pnl:491 - Fetched 5 positions\n", "record": {"elapsed": {"repr": "0:03:37.023349", "seconds": 217.023349}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 491, "message": "Fetched 5 positions", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:04:55.315891+05:30", "timestamp": 1755783295.315891}}}
{"text": "2025-08-21 19:04:55.316 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for RELIANCE: unrealized=-447980.4, today=-447980.4\n", "record": {"elapsed": {"repr": "0:03:37.023879", "seconds": 217.023879}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for RELIANCE: unrealized=-447980.4, today=-447980.4", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:04:55.316421+05:30", "timestamp": 1755783295.316421}}}
{"text": "2025-08-21 19:04:55.317 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for TCS: unrealized=-50633.8, today=-50633.8\n", "record": {"elapsed": {"repr": "0:03:37.024542", "seconds": 217.024542}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for TCS: unrealized=-50633.8, today=-50633.8", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:04:55.317084+05:30", "timestamp": 1755783295.317084}}}
{"text": "2025-08-21 19:04:55.317 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for HDFC: unrealized=1687480.1, today=1687480.1\n", "record": {"elapsed": {"repr": "0:03:37.025034", "seconds": 217.025034}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for HDFC: unrealized=1687480.1, today=1687480.1", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:04:55.317576+05:30", "timestamp": 1755783295.317576}}}
{"text": "2025-08-21 19:04:55.318 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for INFY: unrealized=23355.06, today=23355.06\n", "record": {"elapsed": {"repr": "0:03:37.026005", "seconds": 217.026005}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for INFY: unrealized=23355.06, today=23355.06", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:04:55.318547+05:30", "timestamp": 1755783295.318547}}}
{"text": "2025-08-21 19:04:55.319 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for ICICIBANK: unrealized=-458216.76, today=-458216.76\n", "record": {"elapsed": {"repr": "0:03:37.026651", "seconds": 217.026651}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for ICICIBANK: unrealized=-458216.76, today=-458216.76", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:04:55.319193+05:30", "timestamp": 1755783295.319193}}}
{"text": "2025-08-21 19:04:55.319 | INFO     | app.services.dhan_client:get_pnl:545 - Calculated totals - realized: 0.0, unrealized: 754004.2, day: 754004.2\n", "record": {"elapsed": {"repr": "0:03:37.027105", "seconds": 217.027105}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 545, "message": "Calculated totals - realized: 0.0, unrealized: 754004.2, day: 754004.2", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:04:55.319647+05:30", "timestamp": 1755783295.319647}}}
{"text": "2025-08-21 19:04:55.320 | DEBUG    | app.services.dhan_client:get_pnl:554 - PnL consistency check passed: drift=‚Çπ0.00\n", "record": {"elapsed": {"repr": "0:03:37.027570", "seconds": 217.02757}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 554, "message": "PnL consistency check passed: drift=‚Çπ0.00", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:04:55.320112+05:30", "timestamp": 1755783295.320112}}}
{"text": "2025-08-21 19:04:55.320 | DEBUG    | app.services.dhan_client:get_pnl:558 - Creating PnLTotals...\n", "record": {"elapsed": {"repr": "0:03:37.028038", "seconds": 217.028038}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 558, "message": "Creating PnLTotals...", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:04:55.320580+05:30", "timestamp": 1755783295.32058}}}
{"text": "2025-08-21 19:04:55.321 | DEBUG    | app.services.dhan_client:get_pnl:565 - PnLTotals created successfully\n", "record": {"elapsed": {"repr": "0:03:37.028669", "seconds": 217.028669}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 565, "message": "PnLTotals created successfully", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:04:55.321211+05:30", "timestamp": 1755783295.321211}}}
{"text": "2025-08-21 19:04:55.322 | DEBUG    | app.services.dhan_client:get_pnl:574 - Creating PnL model...\n", "record": {"elapsed": {"repr": "0:03:37.029475", "seconds": 217.029475}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 574, "message": "Creating PnL model...", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:04:55.322017+05:30", "timestamp": 1755783295.322017}}}
{"text": "2025-08-21 19:04:55.322 | DEBUG    | app.services.dhan_client:get_pnl:575 - Model fields: totals=<class 'app.models.schemas.PnLTotals'>, perSymbol=5, updated_at=2025-08-21 19:04:55.316364+05:30, trading_day=2025-08-21\n", "record": {"elapsed": {"repr": "0:03:37.030338", "seconds": 217.030338}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 575, "message": "Model fields: totals=<class 'app.models.schemas.PnLTotals'>, perSymbol=5, updated_at=2025-08-21 19:04:55.316364+05:30, trading_day=2025-08-21", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:04:55.322880+05:30", "timestamp": 1755783295.32288}}}
{"text": "2025-08-21 19:04:55.323 | DEBUG    | app.services.dhan_client:get_pnl:584 - Created PnL model: totals=PnLTotals(realized=0.0, unrealized=754004.2, day=754004.2, currency='INR') per_symbol=[PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1727, avg=618.93, ltp=359.53, unrealized=-447980.4, today_pnl=-447980.4), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=167, avg=948.57, ltp=1251.77, unrealized=-50633.8, today_pnl=-50633.8), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=1347, avg=801.44, ltp=2054.21, unrealized=1687480.1, today_pnl=1687480.1), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=143, avg=1427.62, ltp=1264.3, unrealized=23355.06, today_pnl=23355.06), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=438, avg=1994.48, ltp=948.32, unrealized=-458216.76, today_pnl=-458216.76)] updated_at=datetime.datetime(2025, 8, 21, 19, 4, 55, 316364, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))) trading_day='2025-08-21'\n", "record": {"elapsed": {"repr": "0:03:37.031015", "seconds": 217.031015}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 584, "message": "Created PnL model: totals=PnLTotals(realized=0.0, unrealized=754004.2, day=754004.2, currency='INR') per_symbol=[PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1727, avg=618.93, ltp=359.53, unrealized=-447980.4, today_pnl=-447980.4), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=167, avg=948.57, ltp=1251.77, unrealized=-50633.8, today_pnl=-50633.8), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=1347, avg=801.44, ltp=2054.21, unrealized=1687480.1, today_pnl=1687480.1), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=143, avg=1427.62, ltp=1264.3, unrealized=23355.06, today_pnl=23355.06), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=438, avg=1994.48, ltp=948.32, unrealized=-458216.76, today_pnl=-458216.76)] updated_at=datetime.datetime(2025, 8, 21, 19, 4, 55, 316364, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))) trading_day='2025-08-21'", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:04:55.323557+05:30", "timestamp": 1755783295.323557}}}
{"text": "2025-08-21 19:04:55.324 | DEBUG    | app.services.dhan_client:get_pnl:585 - PnL model fields: {'totals': PnLTotals(realized=0.0, unrealized=754004.2, day=754004.2, currency='INR'), 'per_symbol': [PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1727, avg=618.93, ltp=359.53, unrealized=-447980.4, today_pnl=-447980.4), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=167, avg=948.57, ltp=1251.77, unrealized=-50633.8, today_pnl=-50633.8), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=1347, avg=801.44, ltp=2054.21, unrealized=1687480.1, today_pnl=1687480.1), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=143, avg=1427.62, ltp=1264.3, unrealized=23355.06, today_pnl=23355.06), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=438, avg=1994.48, ltp=948.32, unrealized=-458216.76, today_pnl=-458216.76)], 'updated_at': datetime.datetime(2025, 8, 21, 19, 4, 55, 316364, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))), 'trading_day': '2025-08-21'}\n", "record": {"elapsed": {"repr": "0:03:37.031759", "seconds": 217.031759}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 585, "message": "PnL model fields: {'totals': PnLTotals(realized=0.0, unrealized=754004.2, day=754004.2, currency='INR'), 'per_symbol': [PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1727, avg=618.93, ltp=359.53, unrealized=-447980.4, today_pnl=-447980.4), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=167, avg=948.57, ltp=1251.77, unrealized=-50633.8, today_pnl=-50633.8), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=1347, avg=801.44, ltp=2054.21, unrealized=1687480.1, today_pnl=1687480.1), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=143, avg=1427.62, ltp=1264.3, unrealized=23355.06, today_pnl=23355.06), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=438, avg=1994.48, ltp=948.32, unrealized=-458216.76, today_pnl=-458216.76)], 'updated_at': datetime.datetime(2025, 8, 21, 19, 4, 55, 316364, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))), 'trading_day': '2025-08-21'}", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:04:55.324301+05:30", "timestamp": 1755783295.324301}}}
{"text": "2025-08-21 19:04:55.325 | INFO     | app.services.dhan_client:get_pnl:587 - P&L calculation completed successfully: 5 symbols, unrealized=‚Çπ754004.20\n", "record": {"elapsed": {"repr": "0:03:37.032553", "seconds": 217.032553}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 587, "message": "P&L calculation completed successfully: 5 symbols, unrealized=‚Çπ754004.20", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:04:55.325095+05:30", "timestamp": 1755783295.325095}}}
{"text": "2025-08-21 19:04:55.325 | DEBUG    | app.ws.live:emit_delta:408 - Emitted pnl delta: seq=239\n", "record": {"elapsed": {"repr": "0:03:37.033341", "seconds": 217.033341}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "emit_delta", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 408, "message": "Emitted pnl delta: seq=239", "module": "live", "name": "app.ws.live", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:04:55.325883+05:30", "timestamp": 1755783295.325883}}}
{"text": "2025-08-21 19:04:55.327 | DEBUG    | app.ws.live:emit_delta:408 - Emitted positions delta: seq=240\n", "record": {"elapsed": {"repr": "0:03:37.034634", "seconds": 217.034634}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "emit_delta", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 408, "message": "Emitted positions delta: seq=240", "module": "live", "name": "app.ws.live", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:04:55.327176+05:30", "timestamp": 1755783295.327176}}}
{"text": "2025-08-21 19:04:57.073 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:03:38.780489", "seconds": 218.780489}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:04:57.073031+05:30", "timestamp": 1755783297.073031}}}
{"text": "2025-08-21 19:04:57.073 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:03:38.781215", "seconds": 218.781215}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:04:57.073757+05:30", "timestamp": 1755783297.073757}}}
{"text": "2025-08-21 19:04:57.074 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:03:38.781655", "seconds": 218.781655}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:04:57.074197+05:30", "timestamp": 1755783297.074197}}}
{"text": "2025-08-21 19:04:57.074 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:03:38.782151", "seconds": 218.782151}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:04:57.074693+05:30", "timestamp": 1755783297.074693}}}
{"text": "2025-08-21 19:04:57.075 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:03:38.782812", "seconds": 218.782812}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:04:57.075354+05:30", "timestamp": 1755783297.075354}}}
{"text": "2025-08-21 19:04:57.076 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:03:38.783633", "seconds": 218.783633}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:04:57.076175+05:30", "timestamp": 1755783297.076175}}}
{"text": "2025-08-21 19:04:57.076 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:03:38.784173", "seconds": 218.784173}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:04:57.076715+05:30", "timestamp": 1755783297.076715}}}
{"text": "2025-08-21 19:04:57.077 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:03:38.784694", "seconds": 218.784694}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:04:57.077236+05:30", "timestamp": 1755783297.077236}}}
{"text": "2025-08-21 19:04:57.077 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:03:38.785213", "seconds": 218.785213}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:04:57.077755+05:30", "timestamp": 1755783297.077755}}}
{"text": "2025-08-21 19:04:57.078 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:03:38.785731", "seconds": 218.785731}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:04:57.078273+05:30", "timestamp": 1755783297.078273}}}
{"text": "2025-08-21 19:04:57.319 | INFO     | app.services.dhan_client:get_pnl:489 - Starting accurate P&L calculation\n", "record": {"elapsed": {"repr": "0:03:39.027120", "seconds": 219.02712}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 489, "message": "Starting accurate P&L calculation", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:04:57.319662+05:30", "timestamp": 1755783297.319662}}}
{"text": "2025-08-21 19:04:57.320 | INFO     | app.services.dhan_client:get_pnl:491 - Fetched 5 positions\n", "record": {"elapsed": {"repr": "0:03:39.028249", "seconds": 219.028249}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 491, "message": "Fetched 5 positions", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:04:57.320791+05:30", "timestamp": 1755783297.320791}}}
{"text": "2025-08-21 19:04:57.321 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for RELIANCE: unrealized=-447679.65, today=-447679.65\n", "record": {"elapsed": {"repr": "0:03:39.029034", "seconds": 219.029034}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for RELIANCE: unrealized=-447679.65, today=-447679.65", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:04:57.321576+05:30", "timestamp": 1755783297.321576}}}
{"text": "2025-08-21 19:04:57.322 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for TCS: unrealized=-53716.4, today=-53716.4\n", "record": {"elapsed": {"repr": "0:03:39.029537", "seconds": 219.029537}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for TCS: unrealized=-53716.4, today=-53716.4", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:04:57.322079+05:30", "timestamp": 1755783297.322079}}}
{"text": "2025-08-21 19:04:57.322 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for HDFC: unrealized=1683265.63, today=1683265.63\n", "record": {"elapsed": {"repr": "0:03:39.030030", "seconds": 219.03003}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for HDFC: unrealized=1683265.63, today=1683265.63", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:04:57.322572+05:30", "timestamp": 1755783297.322572}}}
{"text": "2025-08-21 19:04:57.323 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for INFY: unrealized=23776.15, today=23776.15\n", "record": {"elapsed": {"repr": "0:03:39.030521", "seconds": 219.030521}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for INFY: unrealized=23776.15, today=23776.15", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:04:57.323063+05:30", "timestamp": 1755783297.323063}}}
{"text": "2025-08-21 19:04:57.323 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for ICICIBANK: unrealized=-464683.92, today=-464683.92\n", "record": {"elapsed": {"repr": "0:03:39.031059", "seconds": 219.031059}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for ICICIBANK: unrealized=-464683.92, today=-464683.92", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:04:57.323601+05:30", "timestamp": 1755783297.323601}}}
{"text": "2025-08-21 19:04:57.324 | INFO     | app.services.dhan_client:get_pnl:545 - Calculated totals - realized: 0.0, unrealized: 740961.81, day: 740961.81\n", "record": {"elapsed": {"repr": "0:03:39.031472", "seconds": 219.031472}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 545, "message": "Calculated totals - realized: 0.0, unrealized: 740961.81, day: 740961.81", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:04:57.324014+05:30", "timestamp": 1755783297.324014}}}
{"text": "2025-08-21 19:04:57.324 | DEBUG    | app.services.dhan_client:get_pnl:554 - PnL consistency check passed: drift=‚Çπ0.00\n", "record": {"elapsed": {"repr": "0:03:39.031923", "seconds": 219.031923}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 554, "message": "PnL consistency check passed: drift=‚Çπ0.00", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:04:57.324465+05:30", "timestamp": 1755783297.324465}}}
{"text": "2025-08-21 19:04:57.325 | DEBUG    | app.services.dhan_client:get_pnl:558 - Creating PnLTotals...\n", "record": {"elapsed": {"repr": "0:03:39.032465", "seconds": 219.032465}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 558, "message": "Creating PnLTotals...", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:04:57.325007+05:30", "timestamp": 1755783297.325007}}}
{"text": "2025-08-21 19:04:57.325 | DEBUG    | app.services.dhan_client:get_pnl:565 - PnLTotals created successfully\n", "record": {"elapsed": {"repr": "0:03:39.033360", "seconds": 219.03336}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 565, "message": "PnLTotals created successfully", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:04:57.325902+05:30", "timestamp": 1755783297.325902}}}
{"text": "2025-08-21 19:04:57.326 | DEBUG    | app.services.dhan_client:get_pnl:574 - Creating PnL model...\n", "record": {"elapsed": {"repr": "0:03:39.033970", "seconds": 219.03397}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 574, "message": "Creating PnL model...", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:04:57.326512+05:30", "timestamp": 1755783297.326512}}}
{"text": "2025-08-21 19:04:57.326 | DEBUG    | app.services.dhan_client:get_pnl:575 - Model fields: totals=<class 'app.models.schemas.PnLTotals'>, perSymbol=5, updated_at=2025-08-21 19:04:57.321493+05:30, trading_day=2025-08-21\n", "record": {"elapsed": {"repr": "0:03:39.034383", "seconds": 219.034383}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 575, "message": "Model fields: totals=<class 'app.models.schemas.PnLTotals'>, perSymbol=5, updated_at=2025-08-21 19:04:57.321493+05:30, trading_day=2025-08-21", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:04:57.326925+05:30", "timestamp": 1755783297.326925}}}
{"text": "2025-08-21 19:04:57.327 | DEBUG    | app.services.dhan_client:get_pnl:584 - Created PnL model: totals=PnLTotals(realized=0.0, unrealized=740961.81, day=740961.81, currency='INR') per_symbol=[PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1727, avg=618.93, ltp=359.71, unrealized=-447679.65, today_pnl=-447679.65), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=167, avg=948.57, ltp=1270.23, unrealized=-53716.4, today_pnl=-53716.4), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=1347, avg=801.44, ltp=2051.08, unrealized=1683265.63, today_pnl=1683265.63), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=143, avg=1427.62, ltp=1261.35, unrealized=23776.15, today_pnl=23776.15), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=438, avg=1994.48, ltp=933.56, unrealized=-464683.92, today_pnl=-464683.92)] updated_at=datetime.datetime(2025, 8, 21, 19, 4, 57, 321493, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))) trading_day='2025-08-21'\n", "record": {"elapsed": {"repr": "0:03:39.035026", "seconds": 219.035026}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 584, "message": "Created PnL model: totals=PnLTotals(realized=0.0, unrealized=740961.81, day=740961.81, currency='INR') per_symbol=[PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1727, avg=618.93, ltp=359.71, unrealized=-447679.65, today_pnl=-447679.65), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=167, avg=948.57, ltp=1270.23, unrealized=-53716.4, today_pnl=-53716.4), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=1347, avg=801.44, ltp=2051.08, unrealized=1683265.63, today_pnl=1683265.63), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=143, avg=1427.62, ltp=1261.35, unrealized=23776.15, today_pnl=23776.15), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=438, avg=1994.48, ltp=933.56, unrealized=-464683.92, today_pnl=-464683.92)] updated_at=datetime.datetime(2025, 8, 21, 19, 4, 57, 321493, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))) trading_day='2025-08-21'", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:04:57.327568+05:30", "timestamp": 1755783297.327568}}}
{"text": "2025-08-21 19:04:57.328 | DEBUG    | app.services.dhan_client:get_pnl:585 - PnL model fields: {'totals': PnLTotals(realized=0.0, unrealized=740961.81, day=740961.81, currency='INR'), 'per_symbol': [PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1727, avg=618.93, ltp=359.71, unrealized=-447679.65, today_pnl=-447679.65), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=167, avg=948.57, ltp=1270.23, unrealized=-53716.4, today_pnl=-53716.4), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=1347, avg=801.44, ltp=2051.08, unrealized=1683265.63, today_pnl=1683265.63), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=143, avg=1427.62, ltp=1261.35, unrealized=23776.15, today_pnl=23776.15), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=438, avg=1994.48, ltp=933.56, unrealized=-464683.92, today_pnl=-464683.92)], 'updated_at': datetime.datetime(2025, 8, 21, 19, 4, 57, 321493, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))), 'trading_day': '2025-08-21'}\n", "record": {"elapsed": {"repr": "0:03:39.036045", "seconds": 219.036045}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 585, "message": "PnL model fields: {'totals': PnLTotals(realized=0.0, unrealized=740961.81, day=740961.81, currency='INR'), 'per_symbol': [PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1727, avg=618.93, ltp=359.71, unrealized=-447679.65, today_pnl=-447679.65), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=167, avg=948.57, ltp=1270.23, unrealized=-53716.4, today_pnl=-53716.4), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=1347, avg=801.44, ltp=2051.08, unrealized=1683265.63, today_pnl=1683265.63), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=143, avg=1427.62, ltp=1261.35, unrealized=23776.15, today_pnl=23776.15), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=438, avg=1994.48, ltp=933.56, unrealized=-464683.92, today_pnl=-464683.92)], 'updated_at': datetime.datetime(2025, 8, 21, 19, 4, 57, 321493, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))), 'trading_day': '2025-08-21'}", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:04:57.328587+05:30", "timestamp": 1755783297.328587}}}
{"text": "2025-08-21 19:04:57.329 | INFO     | app.services.dhan_client:get_pnl:587 - P&L calculation completed successfully: 5 symbols, unrealized=‚Çπ740961.81\n", "record": {"elapsed": {"repr": "0:03:39.037276", "seconds": 219.037276}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 587, "message": "P&L calculation completed successfully: 5 symbols, unrealized=‚Çπ740961.81", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:04:57.329818+05:30", "timestamp": 1755783297.329818}}}
{"text": "2025-08-21 19:04:57.330 | DEBUG    | app.ws.live:emit_delta:408 - Emitted pnl delta: seq=241\n", "record": {"elapsed": {"repr": "0:03:39.038091", "seconds": 219.038091}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "emit_delta", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 408, "message": "Emitted pnl delta: seq=241", "module": "live", "name": "app.ws.live", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:04:57.330633+05:30", "timestamp": 1755783297.330633}}}
{"text": "2025-08-21 19:04:57.331 | DEBUG    | app.ws.live:emit_delta:408 - Emitted positions delta: seq=242\n", "record": {"elapsed": {"repr": "0:03:39.038947", "seconds": 219.038947}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "emit_delta", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 408, "message": "Emitted positions delta: seq=242", "module": "live", "name": "app.ws.live", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:04:57.331489+05:30", "timestamp": 1755783297.331489}}}
{"text": "2025-08-21 19:04:59.079 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:03:40.786573", "seconds": 220.786573}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:04:59.079115+05:30", "timestamp": 1755783299.079115}}}
{"text": "2025-08-21 19:04:59.079 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:03:40.787300", "seconds": 220.7873}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:04:59.079842+05:30", "timestamp": 1755783299.079842}}}
{"text": "2025-08-21 19:04:59.080 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:03:40.787765", "seconds": 220.787765}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:04:59.080307+05:30", "timestamp": 1755783299.080307}}}
{"text": "2025-08-21 19:04:59.080 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:03:40.788147", "seconds": 220.788147}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:04:59.080689+05:30", "timestamp": 1755783299.080689}}}
{"text": "2025-08-21 19:04:59.081 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:03:40.788549", "seconds": 220.788549}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:04:59.081091+05:30", "timestamp": 1755783299.081091}}}
{"text": "2025-08-21 19:04:59.081 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:03:40.789049", "seconds": 220.789049}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:04:59.081591+05:30", "timestamp": 1755783299.081591}}}
{"text": "2025-08-21 19:04:59.082 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:03:40.789601", "seconds": 220.789601}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:04:59.082143+05:30", "timestamp": 1755783299.082143}}}
{"text": "2025-08-21 19:04:59.082 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:03:40.790217", "seconds": 220.790217}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:04:59.082759+05:30", "timestamp": 1755783299.082759}}}
{"text": "2025-08-21 19:04:59.083 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:03:40.791090", "seconds": 220.79109}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:04:59.083632+05:30", "timestamp": 1755783299.083632}}}
{"text": "2025-08-21 19:04:59.084 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:03:40.791482", "seconds": 220.791482}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:04:59.084024+05:30", "timestamp": 1755783299.084024}}}
{"text": "2025-08-21 19:04:59.329 | INFO     | app.services.dhan_client:get_pnl:489 - Starting accurate P&L calculation\n", "record": {"elapsed": {"repr": "0:03:41.036544", "seconds": 221.036544}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 489, "message": "Starting accurate P&L calculation", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:04:59.329086+05:30", "timestamp": 1755783299.329086}}}
{"text": "2025-08-21 19:04:59.329 | INFO     | app.services.dhan_client:get_pnl:491 - Fetched 5 positions\n", "record": {"elapsed": {"repr": "0:03:41.037179", "seconds": 221.037179}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 491, "message": "Fetched 5 positions", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:04:59.329721+05:30", "timestamp": 1755783299.329721}}}
{"text": "2025-08-21 19:04:59.330 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for RELIANCE: unrealized=-456896.93, today=-456896.93\n", "record": {"elapsed": {"repr": "0:03:41.037648", "seconds": 221.037648}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for RELIANCE: unrealized=-456896.93, today=-456896.93", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:04:59.330190+05:30", "timestamp": 1755783299.33019}}}
{"text": "2025-08-21 19:04:59.330 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for TCS: unrealized=-51834.26, today=-51834.26\n", "record": {"elapsed": {"repr": "0:03:41.038039", "seconds": 221.038039}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for TCS: unrealized=-51834.26, today=-51834.26", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:04:59.330581+05:30", "timestamp": 1755783299.330581}}}
{"text": "2025-08-21 19:04:59.330 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for HDFC: unrealized=1629370.16, today=1629370.16\n", "record": {"elapsed": {"repr": "0:03:41.038419", "seconds": 221.038419}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for HDFC: unrealized=1629370.16, today=1629370.16", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:04:59.330961+05:30", "timestamp": 1755783299.330961}}}
{"text": "2025-08-21 19:04:59.331 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for INFY: unrealized=23268.66, today=23268.66\n", "record": {"elapsed": {"repr": "0:03:41.038862", "seconds": 221.038862}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for INFY: unrealized=23268.66, today=23268.66", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:04:59.331404+05:30", "timestamp": 1755783299.331404}}}
{"text": "2025-08-21 19:04:59.331 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for ICICIBANK: unrealized=-466321.07, today=-466321.07\n", "record": {"elapsed": {"repr": "0:03:41.039320", "seconds": 221.03932}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for ICICIBANK: unrealized=-466321.07, today=-466321.07", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:04:59.331862+05:30", "timestamp": 1755783299.331862}}}
{"text": "2025-08-21 19:04:59.332 | INFO     | app.services.dhan_client:get_pnl:545 - Calculated totals - realized: 0.0, unrealized: 677586.56, day: 677586.56\n", "record": {"elapsed": {"repr": "0:03:41.039875", "seconds": 221.039875}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 545, "message": "Calculated totals - realized: 0.0, unrealized: 677586.56, day: 677586.56", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:04:59.332417+05:30", "timestamp": 1755783299.332417}}}
{"text": "2025-08-21 19:04:59.333 | DEBUG    | app.services.dhan_client:get_pnl:554 - PnL consistency check passed: drift=‚Çπ0.00\n", "record": {"elapsed": {"repr": "0:03:41.040798", "seconds": 221.040798}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 554, "message": "PnL consistency check passed: drift=‚Çπ0.00", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:04:59.333340+05:30", "timestamp": 1755783299.33334}}}
{"text": "2025-08-21 19:04:59.333 | DEBUG    | app.services.dhan_client:get_pnl:558 - Creating PnLTotals...\n", "record": {"elapsed": {"repr": "0:03:41.041313", "seconds": 221.041313}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 558, "message": "Creating PnLTotals...", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:04:59.333855+05:30", "timestamp": 1755783299.333855}}}
{"text": "2025-08-21 19:04:59.334 | DEBUG    | app.services.dhan_client:get_pnl:565 - PnLTotals created successfully\n", "record": {"elapsed": {"repr": "0:03:41.041781", "seconds": 221.041781}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 565, "message": "PnLTotals created successfully", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:04:59.334323+05:30", "timestamp": 1755783299.334323}}}
{"text": "2025-08-21 19:04:59.334 | DEBUG    | app.services.dhan_client:get_pnl:574 - Creating PnL model...\n", "record": {"elapsed": {"repr": "0:03:41.042198", "seconds": 221.042198}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 574, "message": "Creating PnL model...", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:04:59.334740+05:30", "timestamp": 1755783299.33474}}}
{"text": "2025-08-21 19:04:59.335 | DEBUG    | app.services.dhan_client:get_pnl:575 - Model fields: totals=<class 'app.models.schemas.PnLTotals'>, perSymbol=5, updated_at=2025-08-21 19:04:59.330131+05:30, trading_day=2025-08-21\n", "record": {"elapsed": {"repr": "0:03:41.042786", "seconds": 221.042786}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 575, "message": "Model fields: totals=<class 'app.models.schemas.PnLTotals'>, perSymbol=5, updated_at=2025-08-21 19:04:59.330131+05:30, trading_day=2025-08-21", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:04:59.335328+05:30", "timestamp": 1755783299.335328}}}
{"text": "2025-08-21 19:04:59.336 | DEBUG    | app.services.dhan_client:get_pnl:584 - Created PnL model: totals=PnLTotals(realized=0.0, unrealized=677586.56, day=677586.56, currency='INR') per_symbol=[PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1727, avg=618.93, ltp=354.37, unrealized=-456896.93, today_pnl=-456896.93), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=167, avg=948.57, ltp=1258.95, unrealized=-51834.26, today_pnl=-51834.26), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=1347, avg=801.44, ltp=2011.07, unrealized=1629370.16, today_pnl=1629370.16), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=143, avg=1427.62, ltp=1264.9, unrealized=23268.66, today_pnl=23268.66), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=438, avg=1994.48, ltp=929.82, unrealized=-466321.07, today_pnl=-466321.07)] updated_at=datetime.datetime(2025, 8, 21, 19, 4, 59, 330131, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))) trading_day='2025-08-21'\n", "record": {"elapsed": {"repr": "0:03:41.043624", "seconds": 221.043624}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 584, "message": "Created PnL model: totals=PnLTotals(realized=0.0, unrealized=677586.56, day=677586.56, currency='INR') per_symbol=[PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1727, avg=618.93, ltp=354.37, unrealized=-456896.93, today_pnl=-456896.93), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=167, avg=948.57, ltp=1258.95, unrealized=-51834.26, today_pnl=-51834.26), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=1347, avg=801.44, ltp=2011.07, unrealized=1629370.16, today_pnl=1629370.16), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=143, avg=1427.62, ltp=1264.9, unrealized=23268.66, today_pnl=23268.66), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=438, avg=1994.48, ltp=929.82, unrealized=-466321.07, today_pnl=-466321.07)] updated_at=datetime.datetime(2025, 8, 21, 19, 4, 59, 330131, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))) trading_day='2025-08-21'", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:04:59.336166+05:30", "timestamp": 1755783299.336166}}}
{"text": "2025-08-21 19:04:59.337 | DEBUG    | app.services.dhan_client:get_pnl:585 - PnL model fields: {'totals': PnLTotals(realized=0.0, unrealized=677586.56, day=677586.56, currency='INR'), 'per_symbol': [PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1727, avg=618.93, ltp=354.37, unrealized=-456896.93, today_pnl=-456896.93), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=167, avg=948.57, ltp=1258.95, unrealized=-51834.26, today_pnl=-51834.26), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=1347, avg=801.44, ltp=2011.07, unrealized=1629370.16, today_pnl=1629370.16), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=143, avg=1427.62, ltp=1264.9, unrealized=23268.66, today_pnl=23268.66), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=438, avg=1994.48, ltp=929.82, unrealized=-466321.07, today_pnl=-466321.07)], 'updated_at': datetime.datetime(2025, 8, 21, 19, 4, 59, 330131, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))), 'trading_day': '2025-08-21'}\n", "record": {"elapsed": {"repr": "0:03:41.044803", "seconds": 221.044803}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 585, "message": "PnL model fields: {'totals': PnLTotals(realized=0.0, unrealized=677586.56, day=677586.56, currency='INR'), 'per_symbol': [PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1727, avg=618.93, ltp=354.37, unrealized=-456896.93, today_pnl=-456896.93), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=167, avg=948.57, ltp=1258.95, unrealized=-51834.26, today_pnl=-51834.26), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=1347, avg=801.44, ltp=2011.07, unrealized=1629370.16, today_pnl=1629370.16), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=143, avg=1427.62, ltp=1264.9, unrealized=23268.66, today_pnl=23268.66), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=438, avg=1994.48, ltp=929.82, unrealized=-466321.07, today_pnl=-466321.07)], 'updated_at': datetime.datetime(2025, 8, 21, 19, 4, 59, 330131, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))), 'trading_day': '2025-08-21'}", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:04:59.337345+05:30", "timestamp": 1755783299.337345}}}
{"text": "2025-08-21 19:04:59.337 | INFO     | app.services.dhan_client:get_pnl:587 - P&L calculation completed successfully: 5 symbols, unrealized=‚Çπ677586.56\n", "record": {"elapsed": {"repr": "0:03:41.045401", "seconds": 221.045401}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 587, "message": "P&L calculation completed successfully: 5 symbols, unrealized=‚Çπ677586.56", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:04:59.337943+05:30", "timestamp": 1755783299.337943}}}
{"text": "2025-08-21 19:04:59.338 | DEBUG    | app.ws.live:emit_delta:408 - Emitted pnl delta: seq=243\n", "record": {"elapsed": {"repr": "0:03:41.046024", "seconds": 221.046024}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "emit_delta", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 408, "message": "Emitted pnl delta: seq=243", "module": "live", "name": "app.ws.live", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:04:59.338566+05:30", "timestamp": 1755783299.338566}}}
{"text": "2025-08-21 19:04:59.339 | DEBUG    | app.ws.live:emit_delta:408 - Emitted positions delta: seq=244\n", "record": {"elapsed": {"repr": "0:03:41.046793", "seconds": 221.046793}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "emit_delta", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 408, "message": "Emitted positions delta: seq=244", "module": "live", "name": "app.ws.live", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:04:59.339335+05:30", "timestamp": 1755783299.339335}}}
{"text": "2025-08-21 19:05:01.084 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:03:42.792256", "seconds": 222.792256}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:05:01.084798+05:30", "timestamp": 1755783301.084798}}}
{"text": "2025-08-21 19:05:01.085 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:03:42.793168", "seconds": 222.793168}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:05:01.085710+05:30", "timestamp": 1755783301.08571}}}
{"text": "2025-08-21 19:05:01.086 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:03:42.793714", "seconds": 222.793714}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:05:01.086256+05:30", "timestamp": 1755783301.086256}}}
{"text": "2025-08-21 19:05:01.086 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:03:42.794198", "seconds": 222.794198}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:05:01.086740+05:30", "timestamp": 1755783301.08674}}}
{"text": "2025-08-21 19:05:01.087 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:03:42.794672", "seconds": 222.794672}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:05:01.087214+05:30", "timestamp": 1755783301.087214}}}
{"text": "2025-08-21 19:05:01.087 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:03:42.795024", "seconds": 222.795024}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:05:01.087566+05:30", "timestamp": 1755783301.087566}}}
{"text": "2025-08-21 19:05:01.087 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:03:42.795370", "seconds": 222.79537}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:05:01.087912+05:30", "timestamp": 1755783301.087912}}}
{"text": "2025-08-21 19:05:01.088 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:03:42.795703", "seconds": 222.795703}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:05:01.088245+05:30", "timestamp": 1755783301.088245}}}
{"text": "2025-08-21 19:05:01.088 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:03:42.796087", "seconds": 222.796087}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:05:01.088629+05:30", "timestamp": 1755783301.088629}}}
{"text": "2025-08-21 19:05:01.089 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:03:42.796502", "seconds": 222.796502}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:05:01.089044+05:30", "timestamp": 1755783301.089044}}}
{"text": "2025-08-21 19:05:01.339 | INFO     | app.services.dhan_client:get_pnl:489 - Starting accurate P&L calculation\n", "record": {"elapsed": {"repr": "0:03:43.046825", "seconds": 223.046825}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 489, "message": "Starting accurate P&L calculation", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:05:01.339367+05:30", "timestamp": 1755783301.339367}}}
{"text": "2025-08-21 19:05:01.340 | INFO     | app.services.dhan_client:get_pnl:491 - Fetched 5 positions\n", "record": {"elapsed": {"repr": "0:03:43.047986", "seconds": 223.047986}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 491, "message": "Fetched 5 positions", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:05:01.340528+05:30", "timestamp": 1755783301.340528}}}
{"text": "2025-08-21 19:05:01.341 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for RELIANCE: unrealized=-452720.25, today=-452720.25\n", "record": {"elapsed": {"repr": "0:03:43.048775", "seconds": 223.048775}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for RELIANCE: unrealized=-452720.25, today=-452720.25", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:05:01.341317+05:30", "timestamp": 1755783301.341317}}}
{"text": "2025-08-21 19:05:01.341 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for TCS: unrealized=-51405.43, today=-51405.43\n", "record": {"elapsed": {"repr": "0:03:43.049426", "seconds": 223.049426}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for TCS: unrealized=-51405.43, today=-51405.43", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:05:01.341968+05:30", "timestamp": 1755783301.341968}}}
{"text": "2025-08-21 19:05:01.342 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for HDFC: unrealized=1671021.82, today=1671021.82\n", "record": {"elapsed": {"repr": "0:03:43.050257", "seconds": 223.050257}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for HDFC: unrealized=1671021.82, today=1671021.82", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:05:01.342799+05:30", "timestamp": 1755783301.342799}}}
{"text": "2025-08-21 19:05:01.344 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for INFY: unrealized=21347.04, today=21347.04\n", "record": {"elapsed": {"repr": "0:03:43.051604", "seconds": 223.051604}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for INFY: unrealized=21347.04, today=21347.04", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:05:01.344146+05:30", "timestamp": 1755783301.344146}}}
{"text": "2025-08-21 19:05:01.344 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for ICICIBANK: unrealized=-462427.15, today=-462427.15\n", "record": {"elapsed": {"repr": "0:03:43.052421", "seconds": 223.052421}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for ICICIBANK: unrealized=-462427.15, today=-462427.15", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:05:01.344963+05:30", "timestamp": 1755783301.344963}}}
{"text": "2025-08-21 19:05:01.345 | INFO     | app.services.dhan_client:get_pnl:545 - Calculated totals - realized: 0.0, unrealized: 725816.03, day: 725816.03\n", "record": {"elapsed": {"repr": "0:03:43.053003", "seconds": 223.053003}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 545, "message": "Calculated totals - realized: 0.0, unrealized: 725816.03, day: 725816.03", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:05:01.345545+05:30", "timestamp": 1755783301.345545}}}
{"text": "2025-08-21 19:05:01.346 | DEBUG    | app.services.dhan_client:get_pnl:554 - PnL consistency check passed: drift=‚Çπ0.00\n", "record": {"elapsed": {"repr": "0:03:43.053587", "seconds": 223.053587}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 554, "message": "PnL consistency check passed: drift=‚Çπ0.00", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:05:01.346129+05:30", "timestamp": 1755783301.346129}}}
{"text": "2025-08-21 19:05:01.346 | DEBUG    | app.services.dhan_client:get_pnl:558 - Creating PnLTotals...\n", "record": {"elapsed": {"repr": "0:03:43.054168", "seconds": 223.054168}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 558, "message": "Creating PnLTotals...", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:05:01.346710+05:30", "timestamp": 1755783301.34671}}}
{"text": "2025-08-21 19:05:01.347 | DEBUG    | app.services.dhan_client:get_pnl:565 - PnLTotals created successfully\n", "record": {"elapsed": {"repr": "0:03:43.054868", "seconds": 223.054868}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 565, "message": "PnLTotals created successfully", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:05:01.347410+05:30", "timestamp": 1755783301.34741}}}
{"text": "2025-08-21 19:05:01.348 | DEBUG    | app.services.dhan_client:get_pnl:574 - Creating PnL model...\n", "record": {"elapsed": {"repr": "0:03:43.055536", "seconds": 223.055536}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 574, "message": "Creating PnL model...", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:05:01.348078+05:30", "timestamp": 1755783301.348078}}}
{"text": "2025-08-21 19:05:01.349 | DEBUG    | app.services.dhan_client:get_pnl:575 - Model fields: totals=<class 'app.models.schemas.PnLTotals'>, perSymbol=5, updated_at=2025-08-21 19:05:01.341228+05:30, trading_day=2025-08-21\n", "record": {"elapsed": {"repr": "0:03:43.056520", "seconds": 223.05652}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 575, "message": "Model fields: totals=<class 'app.models.schemas.PnLTotals'>, perSymbol=5, updated_at=2025-08-21 19:05:01.341228+05:30, trading_day=2025-08-21", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:05:01.349062+05:30", "timestamp": 1755783301.349062}}}
{"text": "2025-08-21 19:05:01.349 | DEBUG    | app.services.dhan_client:get_pnl:584 - Created PnL model: totals=PnLTotals(realized=0.0, unrealized=725816.03, day=725816.03, currency='INR') per_symbol=[PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1727, avg=618.93, ltp=356.79, unrealized=-452720.25, today_pnl=-452720.25), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=167, avg=948.57, ltp=1256.39, unrealized=-51405.43, today_pnl=-51405.43), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=1347, avg=801.44, ltp=2041.99, unrealized=1671021.82, today_pnl=1671021.82), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=143, avg=1427.62, ltp=1278.34, unrealized=21347.04, today_pnl=21347.04), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=438, avg=1994.48, ltp=938.71, unrealized=-462427.15, today_pnl=-462427.15)] updated_at=datetime.datetime(2025, 8, 21, 19, 5, 1, 341228, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))) trading_day='2025-08-21'\n", "record": {"elapsed": {"repr": "0:03:43.057391", "seconds": 223.057391}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 584, "message": "Created PnL model: totals=PnLTotals(realized=0.0, unrealized=725816.03, day=725816.03, currency='INR') per_symbol=[PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1727, avg=618.93, ltp=356.79, unrealized=-452720.25, today_pnl=-452720.25), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=167, avg=948.57, ltp=1256.39, unrealized=-51405.43, today_pnl=-51405.43), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=1347, avg=801.44, ltp=2041.99, unrealized=1671021.82, today_pnl=1671021.82), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=143, avg=1427.62, ltp=1278.34, unrealized=21347.04, today_pnl=21347.04), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=438, avg=1994.48, ltp=938.71, unrealized=-462427.15, today_pnl=-462427.15)] updated_at=datetime.datetime(2025, 8, 21, 19, 5, 1, 341228, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))) trading_day='2025-08-21'", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:05:01.349933+05:30", "timestamp": 1755783301.349933}}}
{"text": "2025-08-21 19:05:01.351 | DEBUG    | app.services.dhan_client:get_pnl:585 - PnL model fields: {'totals': PnLTotals(realized=0.0, unrealized=725816.03, day=725816.03, currency='INR'), 'per_symbol': [PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1727, avg=618.93, ltp=356.79, unrealized=-452720.25, today_pnl=-452720.25), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=167, avg=948.57, ltp=1256.39, unrealized=-51405.43, today_pnl=-51405.43), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=1347, avg=801.44, ltp=2041.99, unrealized=1671021.82, today_pnl=1671021.82), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=143, avg=1427.62, ltp=1278.34, unrealized=21347.04, today_pnl=21347.04), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=438, avg=1994.48, ltp=938.71, unrealized=-462427.15, today_pnl=-462427.15)], 'updated_at': datetime.datetime(2025, 8, 21, 19, 5, 1, 341228, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))), 'trading_day': '2025-08-21'}\n", "record": {"elapsed": {"repr": "0:03:43.058583", "seconds": 223.058583}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 585, "message": "PnL model fields: {'totals': PnLTotals(realized=0.0, unrealized=725816.03, day=725816.03, currency='INR'), 'per_symbol': [PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1727, avg=618.93, ltp=356.79, unrealized=-452720.25, today_pnl=-452720.25), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=167, avg=948.57, ltp=1256.39, unrealized=-51405.43, today_pnl=-51405.43), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=1347, avg=801.44, ltp=2041.99, unrealized=1671021.82, today_pnl=1671021.82), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=143, avg=1427.62, ltp=1278.34, unrealized=21347.04, today_pnl=21347.04), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=438, avg=1994.48, ltp=938.71, unrealized=-462427.15, today_pnl=-462427.15)], 'updated_at': datetime.datetime(2025, 8, 21, 19, 5, 1, 341228, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))), 'trading_day': '2025-08-21'}", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:05:01.351125+05:30", "timestamp": 1755783301.351125}}}
{"text": "2025-08-21 19:05:01.352 | INFO     | app.services.dhan_client:get_pnl:587 - P&L calculation completed successfully: 5 symbols, unrealized=‚Çπ725816.03\n", "record": {"elapsed": {"repr": "0:03:43.060256", "seconds": 223.060256}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 587, "message": "P&L calculation completed successfully: 5 symbols, unrealized=‚Çπ725816.03", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:05:01.352798+05:30", "timestamp": 1755783301.352798}}}
{"text": "2025-08-21 19:05:01.353 | DEBUG    | app.ws.live:emit_delta:408 - Emitted pnl delta: seq=245\n", "record": {"elapsed": {"repr": "0:03:43.061177", "seconds": 223.061177}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "emit_delta", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 408, "message": "Emitted pnl delta: seq=245", "module": "live", "name": "app.ws.live", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:05:01.353719+05:30", "timestamp": 1755783301.353719}}}
{"text": "2025-08-21 19:05:01.354 | DEBUG    | app.ws.live:emit_delta:408 - Emitted positions delta: seq=246\n", "record": {"elapsed": {"repr": "0:03:43.062162", "seconds": 223.062162}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "emit_delta", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 408, "message": "Emitted positions delta: seq=246", "module": "live", "name": "app.ws.live", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:05:01.354704+05:30", "timestamp": 1755783301.354704}}}
{"text": "2025-08-21 19:05:02.863 | INFO     | app.services.dhan_client:get_pnl:489 - Starting accurate P&L calculation\n", "record": {"elapsed": {"repr": "0:03:44.570523", "seconds": 224.570523}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 489, "message": "Starting accurate P&L calculation", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:05:02.863065+05:30", "timestamp": 1755783302.863065}}}
{"text": "2025-08-21 19:05:02.864 | INFO     | app.services.dhan_client:get_pnl:491 - Fetched 5 positions\n", "record": {"elapsed": {"repr": "0:03:44.571937", "seconds": 224.571937}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 491, "message": "Fetched 5 positions", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:05:02.864479+05:30", "timestamp": 1755783302.864479}}}
{"text": "2025-08-21 19:05:02.865 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for RELIANCE: unrealized=-452720.25, today=-452720.25\n", "record": {"elapsed": {"repr": "0:03:44.572668", "seconds": 224.572668}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for RELIANCE: unrealized=-452720.25, today=-452720.25", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:05:02.865210+05:30", "timestamp": 1755783302.86521}}}
{"text": "2025-08-21 19:05:02.865 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for TCS: unrealized=-51405.43, today=-51405.43\n", "record": {"elapsed": {"repr": "0:03:44.573305", "seconds": 224.573305}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for TCS: unrealized=-51405.43, today=-51405.43", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:05:02.865847+05:30", "timestamp": 1755783302.865847}}}
{"text": "2025-08-21 19:05:02.866 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for HDFC: unrealized=1671021.82, today=1671021.82\n", "record": {"elapsed": {"repr": "0:03:44.574020", "seconds": 224.57402}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for HDFC: unrealized=1671021.82, today=1671021.82", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:05:02.866562+05:30", "timestamp": 1755783302.866562}}}
{"text": "2025-08-21 19:05:02.867 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for INFY: unrealized=21347.04, today=21347.04\n", "record": {"elapsed": {"repr": "0:03:44.574844", "seconds": 224.574844}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for INFY: unrealized=21347.04, today=21347.04", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:05:02.867386+05:30", "timestamp": 1755783302.867386}}}
{"text": "2025-08-21 19:05:02.868 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for ICICIBANK: unrealized=-462427.15, today=-462427.15\n", "record": {"elapsed": {"repr": "0:03:44.575837", "seconds": 224.575837}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for ICICIBANK: unrealized=-462427.15, today=-462427.15", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:05:02.868379+05:30", "timestamp": 1755783302.868379}}}
{"text": "2025-08-21 19:05:02.869 | INFO     | app.services.dhan_client:get_pnl:545 - Calculated totals - realized: 0.0, unrealized: 725816.03, day: 725816.03\n", "record": {"elapsed": {"repr": "0:03:44.577105", "seconds": 224.577105}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 545, "message": "Calculated totals - realized: 0.0, unrealized: 725816.03, day: 725816.03", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:05:02.869647+05:30", "timestamp": 1755783302.869647}}}
{"text": "2025-08-21 19:05:02.870 | DEBUG    | app.services.dhan_client:get_pnl:554 - PnL consistency check passed: drift=‚Çπ0.00\n", "record": {"elapsed": {"repr": "0:03:44.578350", "seconds": 224.57835}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 554, "message": "PnL consistency check passed: drift=‚Çπ0.00", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:05:02.870892+05:30", "timestamp": 1755783302.870892}}}
{"text": "2025-08-21 19:05:02.871 | DEBUG    | app.services.dhan_client:get_pnl:558 - Creating PnLTotals...\n", "record": {"elapsed": {"repr": "0:03:44.579126", "seconds": 224.579126}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 558, "message": "Creating PnLTotals...", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:05:02.871668+05:30", "timestamp": 1755783302.871668}}}
{"text": "2025-08-21 19:05:02.872 | DEBUG    | app.services.dhan_client:get_pnl:565 - PnLTotals created successfully\n", "record": {"elapsed": {"repr": "0:03:44.580289", "seconds": 224.580289}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 565, "message": "PnLTotals created successfully", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:05:02.872831+05:30", "timestamp": 1755783302.872831}}}
{"text": "2025-08-21 19:05:02.873 | DEBUG    | app.services.dhan_client:get_pnl:574 - Creating PnL model...\n", "record": {"elapsed": {"repr": "0:03:44.581025", "seconds": 224.581025}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 574, "message": "Creating PnL model...", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:05:02.873567+05:30", "timestamp": 1755783302.873567}}}
{"text": "2025-08-21 19:05:02.874 | DEBUG    | app.services.dhan_client:get_pnl:575 - Model fields: totals=<class 'app.models.schemas.PnLTotals'>, perSymbol=5, updated_at=2025-08-21 19:05:02.865133+05:30, trading_day=2025-08-21\n", "record": {"elapsed": {"repr": "0:03:44.581655", "seconds": 224.581655}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 575, "message": "Model fields: totals=<class 'app.models.schemas.PnLTotals'>, perSymbol=5, updated_at=2025-08-21 19:05:02.865133+05:30, trading_day=2025-08-21", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:05:02.874197+05:30", "timestamp": 1755783302.874197}}}
{"text": "2025-08-21 19:05:02.875 | DEBUG    | app.services.dhan_client:get_pnl:584 - Created PnL model: totals=PnLTotals(realized=0.0, unrealized=725816.03, day=725816.03, currency='INR') per_symbol=[PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1727, avg=618.93, ltp=356.79, unrealized=-452720.25, today_pnl=-452720.25), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=167, avg=948.57, ltp=1256.39, unrealized=-51405.43, today_pnl=-51405.43), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=1347, avg=801.44, ltp=2041.99, unrealized=1671021.82, today_pnl=1671021.82), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=143, avg=1427.62, ltp=1278.34, unrealized=21347.04, today_pnl=21347.04), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=438, avg=1994.48, ltp=938.71, unrealized=-462427.15, today_pnl=-462427.15)] updated_at=datetime.datetime(2025, 8, 21, 19, 5, 2, 865133, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))) trading_day='2025-08-21'\n", "record": {"elapsed": {"repr": "0:03:44.582749", "seconds": 224.582749}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 584, "message": "Created PnL model: totals=PnLTotals(realized=0.0, unrealized=725816.03, day=725816.03, currency='INR') per_symbol=[PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1727, avg=618.93, ltp=356.79, unrealized=-452720.25, today_pnl=-452720.25), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=167, avg=948.57, ltp=1256.39, unrealized=-51405.43, today_pnl=-51405.43), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=1347, avg=801.44, ltp=2041.99, unrealized=1671021.82, today_pnl=1671021.82), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=143, avg=1427.62, ltp=1278.34, unrealized=21347.04, today_pnl=21347.04), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=438, avg=1994.48, ltp=938.71, unrealized=-462427.15, today_pnl=-462427.15)] updated_at=datetime.datetime(2025, 8, 21, 19, 5, 2, 865133, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))) trading_day='2025-08-21'", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:05:02.875291+05:30", "timestamp": 1755783302.875291}}}
{"text": "2025-08-21 19:05:02.877 | DEBUG    | app.services.dhan_client:get_pnl:585 - PnL model fields: {'totals': PnLTotals(realized=0.0, unrealized=725816.03, day=725816.03, currency='INR'), 'per_symbol': [PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1727, avg=618.93, ltp=356.79, unrealized=-452720.25, today_pnl=-452720.25), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=167, avg=948.57, ltp=1256.39, unrealized=-51405.43, today_pnl=-51405.43), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=1347, avg=801.44, ltp=2041.99, unrealized=1671021.82, today_pnl=1671021.82), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=143, avg=1427.62, ltp=1278.34, unrealized=21347.04, today_pnl=21347.04), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=438, avg=1994.48, ltp=938.71, unrealized=-462427.15, today_pnl=-462427.15)], 'updated_at': datetime.datetime(2025, 8, 21, 19, 5, 2, 865133, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))), 'trading_day': '2025-08-21'}\n", "record": {"elapsed": {"repr": "0:03:44.584616", "seconds": 224.584616}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 585, "message": "PnL model fields: {'totals': PnLTotals(realized=0.0, unrealized=725816.03, day=725816.03, currency='INR'), 'per_symbol': [PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1727, avg=618.93, ltp=356.79, unrealized=-452720.25, today_pnl=-452720.25), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=167, avg=948.57, ltp=1256.39, unrealized=-51405.43, today_pnl=-51405.43), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=1347, avg=801.44, ltp=2041.99, unrealized=1671021.82, today_pnl=1671021.82), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=143, avg=1427.62, ltp=1278.34, unrealized=21347.04, today_pnl=21347.04), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=438, avg=1994.48, ltp=938.71, unrealized=-462427.15, today_pnl=-462427.15)], 'updated_at': datetime.datetime(2025, 8, 21, 19, 5, 2, 865133, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))), 'trading_day': '2025-08-21'}", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:05:02.877158+05:30", "timestamp": 1755783302.877158}}}
{"text": "2025-08-21 19:05:02.878 | INFO     | app.services.dhan_client:get_pnl:587 - P&L calculation completed successfully: 5 symbols, unrealized=‚Çπ725816.03\n", "record": {"elapsed": {"repr": "0:03:44.585710", "seconds": 224.58571}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 587, "message": "P&L calculation completed successfully: 5 symbols, unrealized=‚Çπ725816.03", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:05:02.878252+05:30", "timestamp": 1755783302.878252}}}
{"text": "2025-08-21 19:05:02.879 | DEBUG    | app.ws.live:emit_delta:408 - Emitted pnl delta: seq=247\n", "record": {"elapsed": {"repr": "0:03:44.586789", "seconds": 224.586789}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "emit_delta", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 408, "message": "Emitted pnl delta: seq=247", "module": "live", "name": "app.ws.live", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:05:02.879331+05:30", "timestamp": 1755783302.879331}}}
{"text": "2025-08-21 19:05:03.089 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:03:44.797185", "seconds": 224.797185}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:05:03.089727+05:30", "timestamp": 1755783303.089727}}}
{"text": "2025-08-21 19:05:03.090 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:03:44.798080", "seconds": 224.79808}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:05:03.090622+05:30", "timestamp": 1755783303.090622}}}
{"text": "2025-08-21 19:05:03.091 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:03:44.798985", "seconds": 224.798985}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:05:03.091527+05:30", "timestamp": 1755783303.091527}}}
{"text": "2025-08-21 19:05:03.092 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:03:44.799834", "seconds": 224.799834}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:05:03.092376+05:30", "timestamp": 1755783303.092376}}}
{"text": "2025-08-21 19:05:03.093 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:03:44.801138", "seconds": 224.801138}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:05:03.093680+05:30", "timestamp": 1755783303.09368}}}
{"text": "2025-08-21 19:05:03.094 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:03:44.801992", "seconds": 224.801992}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:05:03.094534+05:30", "timestamp": 1755783303.094534}}}
{"text": "2025-08-21 19:05:03.095 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:03:44.802641", "seconds": 224.802641}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:05:03.095183+05:30", "timestamp": 1755783303.095183}}}
{"text": "2025-08-21 19:05:03.096 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:03:44.803669", "seconds": 224.803669}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:05:03.096211+05:30", "timestamp": 1755783303.096211}}}
{"text": "2025-08-21 19:05:03.097 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:03:44.804643", "seconds": 224.804643}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:05:03.097185+05:30", "timestamp": 1755783303.097185}}}
{"text": "2025-08-21 19:05:03.098 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:03:44.805709", "seconds": 224.805709}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:05:03.098251+05:30", "timestamp": 1755783303.098251}}}
{"text": "2025-08-21 19:05:04.658 | INFO     | app.services.dhan_client:get_pnl:489 - Starting accurate P&L calculation\n", "record": {"elapsed": {"repr": "0:03:46.366198", "seconds": 226.366198}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 489, "message": "Starting accurate P&L calculation", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:05:04.658740+05:30", "timestamp": 1755783304.65874}}}
{"text": "2025-08-21 19:05:04.659 | INFO     | app.services.dhan_client:get_pnl:491 - Fetched 5 positions\n", "record": {"elapsed": {"repr": "0:03:46.366866", "seconds": 226.366866}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 491, "message": "Fetched 5 positions", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:05:04.659408+05:30", "timestamp": 1755783304.659408}}}
{"text": "2025-08-21 19:05:04.659 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for RELIANCE: unrealized=-460488.3, today=-460488.3\n", "record": {"elapsed": {"repr": "0:03:46.367323", "seconds": 226.367323}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for RELIANCE: unrealized=-460488.3, today=-460488.3", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:05:04.659865+05:30", "timestamp": 1755783304.659865}}}
{"text": "2025-08-21 19:05:04.660 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for TCS: unrealized=-52105.14, today=-52105.14\n", "record": {"elapsed": {"repr": "0:03:46.367830", "seconds": 226.36783}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for TCS: unrealized=-52105.14, today=-52105.14", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:05:04.660372+05:30", "timestamp": 1755783304.660372}}}
{"text": "2025-08-21 19:05:04.660 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for HDFC: unrealized=1699883.37, today=1699883.37\n", "record": {"elapsed": {"repr": "0:03:46.368303", "seconds": 226.368303}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for HDFC: unrealized=1699883.37, today=1699883.37", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:05:04.660845+05:30", "timestamp": 1755783304.660845}}}
{"text": "2025-08-21 19:05:04.661 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for INFY: unrealized=22691.7, today=22691.7\n", "record": {"elapsed": {"repr": "0:03:46.368808", "seconds": 226.368808}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for INFY: unrealized=22691.7, today=22691.7", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:05:04.661350+05:30", "timestamp": 1755783304.66135}}}
{"text": "2025-08-21 19:05:04.661 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for ICICIBANK: unrealized=-464691.5, today=-464691.5\n", "record": {"elapsed": {"repr": "0:03:46.369363", "seconds": 226.369363}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for ICICIBANK: unrealized=-464691.5, today=-464691.5", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:05:04.661905+05:30", "timestamp": 1755783304.661905}}}
{"text": "2025-08-21 19:05:04.662 | INFO     | app.services.dhan_client:get_pnl:545 - Calculated totals - realized: 0.0, unrealized: 745290.13, day: 745290.13\n", "record": {"elapsed": {"repr": "0:03:46.369895", "seconds": 226.369895}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 545, "message": "Calculated totals - realized: 0.0, unrealized: 745290.13, day: 745290.13", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:05:04.662437+05:30", "timestamp": 1755783304.662437}}}
{"text": "2025-08-21 19:05:04.663 | DEBUG    | app.services.dhan_client:get_pnl:554 - PnL consistency check passed: drift=‚Çπ0.00\n", "record": {"elapsed": {"repr": "0:03:46.370694", "seconds": 226.370694}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 554, "message": "PnL consistency check passed: drift=‚Çπ0.00", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:05:04.663236+05:30", "timestamp": 1755783304.663236}}}
{"text": "2025-08-21 19:05:04.664 | DEBUG    | app.services.dhan_client:get_pnl:558 - Creating PnLTotals...\n", "record": {"elapsed": {"repr": "0:03:46.371743", "seconds": 226.371743}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 558, "message": "Creating PnLTotals...", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:05:04.664285+05:30", "timestamp": 1755783304.664285}}}
{"text": "2025-08-21 19:05:04.664 | DEBUG    | app.services.dhan_client:get_pnl:565 - PnLTotals created successfully\n", "record": {"elapsed": {"repr": "0:03:46.372315", "seconds": 226.372315}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 565, "message": "PnLTotals created successfully", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:05:04.664857+05:30", "timestamp": 1755783304.664857}}}
{"text": "2025-08-21 19:05:04.666 | DEBUG    | app.services.dhan_client:get_pnl:574 - Creating PnL model...\n", "record": {"elapsed": {"repr": "0:03:46.373917", "seconds": 226.373917}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 574, "message": "Creating PnL model...", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:05:04.666459+05:30", "timestamp": 1755783304.666459}}}
{"text": "2025-08-21 19:05:04.667 | DEBUG    | app.services.dhan_client:get_pnl:575 - Model fields: totals=<class 'app.models.schemas.PnLTotals'>, perSymbol=5, updated_at=2025-08-21 19:05:04.659803+05:30, trading_day=2025-08-21\n", "record": {"elapsed": {"repr": "0:03:46.374691", "seconds": 226.374691}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 575, "message": "Model fields: totals=<class 'app.models.schemas.PnLTotals'>, perSymbol=5, updated_at=2025-08-21 19:05:04.659803+05:30, trading_day=2025-08-21", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:05:04.667233+05:30", "timestamp": 1755783304.667233}}}
{"text": "2025-08-21 19:05:04.668 | DEBUG    | app.services.dhan_client:get_pnl:584 - Created PnL model: totals=PnLTotals(realized=0.0, unrealized=745290.13, day=745290.13, currency='INR') per_symbol=[PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1727, avg=618.93, ltp=352.29, unrealized=-460488.3, today_pnl=-460488.3), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=167, avg=948.57, ltp=1260.58, unrealized=-52105.14, today_pnl=-52105.14), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=1347, avg=801.44, ltp=2063.42, unrealized=1699883.37, today_pnl=1699883.37), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=143, avg=1427.62, ltp=1268.94, unrealized=22691.7, today_pnl=22691.7), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=438, avg=1994.48, ltp=933.54, unrealized=-464691.5, today_pnl=-464691.5)] updated_at=datetime.datetime(2025, 8, 21, 19, 5, 4, 659803, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))) trading_day='2025-08-21'\n", "record": {"elapsed": {"repr": "0:03:46.375472", "seconds": 226.375472}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 584, "message": "Created PnL model: totals=PnLTotals(realized=0.0, unrealized=745290.13, day=745290.13, currency='INR') per_symbol=[PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1727, avg=618.93, ltp=352.29, unrealized=-460488.3, today_pnl=-460488.3), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=167, avg=948.57, ltp=1260.58, unrealized=-52105.14, today_pnl=-52105.14), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=1347, avg=801.44, ltp=2063.42, unrealized=1699883.37, today_pnl=1699883.37), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=143, avg=1427.62, ltp=1268.94, unrealized=22691.7, today_pnl=22691.7), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=438, avg=1994.48, ltp=933.54, unrealized=-464691.5, today_pnl=-464691.5)] updated_at=datetime.datetime(2025, 8, 21, 19, 5, 4, 659803, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))) trading_day='2025-08-21'", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:05:04.668014+05:30", "timestamp": 1755783304.668014}}}
{"text": "2025-08-21 19:05:04.668 | DEBUG    | app.services.dhan_client:get_pnl:585 - PnL model fields: {'totals': PnLTotals(realized=0.0, unrealized=745290.13, day=745290.13, currency='INR'), 'per_symbol': [PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1727, avg=618.93, ltp=352.29, unrealized=-460488.3, today_pnl=-460488.3), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=167, avg=948.57, ltp=1260.58, unrealized=-52105.14, today_pnl=-52105.14), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=1347, avg=801.44, ltp=2063.42, unrealized=1699883.37, today_pnl=1699883.37), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=143, avg=1427.62, ltp=1268.94, unrealized=22691.7, today_pnl=22691.7), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=438, avg=1994.48, ltp=933.54, unrealized=-464691.5, today_pnl=-464691.5)], 'updated_at': datetime.datetime(2025, 8, 21, 19, 5, 4, 659803, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))), 'trading_day': '2025-08-21'}\n", "record": {"elapsed": {"repr": "0:03:46.376174", "seconds": 226.376174}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 585, "message": "PnL model fields: {'totals': PnLTotals(realized=0.0, unrealized=745290.13, day=745290.13, currency='INR'), 'per_symbol': [PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1727, avg=618.93, ltp=352.29, unrealized=-460488.3, today_pnl=-460488.3), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=167, avg=948.57, ltp=1260.58, unrealized=-52105.14, today_pnl=-52105.14), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=1347, avg=801.44, ltp=2063.42, unrealized=1699883.37, today_pnl=1699883.37), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=143, avg=1427.62, ltp=1268.94, unrealized=22691.7, today_pnl=22691.7), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=438, avg=1994.48, ltp=933.54, unrealized=-464691.5, today_pnl=-464691.5)], 'updated_at': datetime.datetime(2025, 8, 21, 19, 5, 4, 659803, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))), 'trading_day': '2025-08-21'}", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:05:04.668716+05:30", "timestamp": 1755783304.668716}}}
{"text": "2025-08-21 19:05:04.669 | INFO     | app.services.dhan_client:get_pnl:587 - P&L calculation completed successfully: 5 symbols, unrealized=‚Çπ745290.13\n", "record": {"elapsed": {"repr": "0:03:46.376809", "seconds": 226.376809}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 587, "message": "P&L calculation completed successfully: 5 symbols, unrealized=‚Çπ745290.13", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:05:04.669351+05:30", "timestamp": 1755783304.669351}}}
{"text": "2025-08-21 19:05:04.670 | DEBUG    | app.ws.live:emit_delta:408 - Emitted pnl delta: seq=248\n", "record": {"elapsed": {"repr": "0:03:46.377570", "seconds": 226.37757}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "emit_delta", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 408, "message": "Emitted pnl delta: seq=248", "module": "live", "name": "app.ws.live", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:05:04.670112+05:30", "timestamp": 1755783304.670112}}}
{"text": "2025-08-21 19:05:04.670 | DEBUG    | app.ws.live:emit_delta:408 - Emitted positions delta: seq=249\n", "record": {"elapsed": {"repr": "0:03:46.378434", "seconds": 226.378434}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "emit_delta", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 408, "message": "Emitted positions delta: seq=249", "module": "live", "name": "app.ws.live", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:05:04.670976+05:30", "timestamp": 1755783304.670976}}}
{"text": "2025-08-21 19:05:04.836 | DEBUG    | app.ws.live:emit_delta:408 - Emitted holdings delta: seq=250\n", "record": {"elapsed": {"repr": "0:03:46.544043", "seconds": 226.544043}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "emit_delta", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 408, "message": "Emitted holdings delta: seq=250", "module": "live", "name": "app.ws.live", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:05:04.836585+05:30", "timestamp": 1755783304.836585}}}
{"text": "2025-08-21 19:05:05.099 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:03:46.806863", "seconds": 226.806863}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:05:05.099405+05:30", "timestamp": 1755783305.099405}}}
{"text": "2025-08-21 19:05:05.100 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:03:46.807649", "seconds": 226.807649}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:05:05.100191+05:30", "timestamp": 1755783305.100191}}}
{"text": "2025-08-21 19:05:05.100 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:03:46.808125", "seconds": 226.808125}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:05:05.100667+05:30", "timestamp": 1755783305.100667}}}
{"text": "2025-08-21 19:05:05.101 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:03:46.808570", "seconds": 226.80857}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:05:05.101112+05:30", "timestamp": 1755783305.101112}}}
{"text": "2025-08-21 19:05:05.101 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:03:46.809021", "seconds": 226.809021}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:05:05.101563+05:30", "timestamp": 1755783305.101563}}}
{"text": "2025-08-21 19:05:05.101 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:03:46.809429", "seconds": 226.809429}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:05:05.101971+05:30", "timestamp": 1755783305.101971}}}
{"text": "2025-08-21 19:05:05.102 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:03:46.809820", "seconds": 226.80982}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:05:05.102362+05:30", "timestamp": 1755783305.102362}}}
{"text": "2025-08-21 19:05:05.102 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:03:46.810268", "seconds": 226.810268}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:05:05.102810+05:30", "timestamp": 1755783305.10281}}}
{"text": "2025-08-21 19:05:05.103 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:03:46.810762", "seconds": 226.810762}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:05:05.103304+05:30", "timestamp": 1755783305.103304}}}
{"text": "2025-08-21 19:05:05.103 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:03:46.811359", "seconds": 226.811359}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:05:05.103901+05:30", "timestamp": 1755783305.103901}}}
{"text": "2025-08-21 19:05:06.340 | INFO     | app.services.dhan_client:get_pnl:489 - Starting accurate P&L calculation\n", "record": {"elapsed": {"repr": "0:03:48.047633", "seconds": 228.047633}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 489, "message": "Starting accurate P&L calculation", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:05:06.340175+05:30", "timestamp": 1755783306.340175}}}
{"text": "2025-08-21 19:05:06.340 | INFO     | app.services.dhan_client:get_pnl:491 - Fetched 5 positions\n", "record": {"elapsed": {"repr": "0:03:48.048264", "seconds": 228.048264}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 491, "message": "Fetched 5 positions", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:05:06.340806+05:30", "timestamp": 1755783306.340806}}}
{"text": "2025-08-21 19:05:06.341 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for RELIANCE: unrealized=-455451.33, today=-455451.33\n", "record": {"elapsed": {"repr": "0:03:48.048748", "seconds": 228.048748}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for RELIANCE: unrealized=-455451.33, today=-455451.33", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:05:06.341290+05:30", "timestamp": 1755783306.34129}}}
{"text": "2025-08-21 19:05:06.341 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for TCS: unrealized=-48422.09, today=-48422.09\n", "record": {"elapsed": {"repr": "0:03:48.049219", "seconds": 228.049219}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for TCS: unrealized=-48422.09, today=-48422.09", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:05:06.341761+05:30", "timestamp": 1755783306.341761}}}
{"text": "2025-08-21 19:05:06.342 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for HDFC: unrealized=1700023.41, today=1700023.41\n", "record": {"elapsed": {"repr": "0:03:48.049642", "seconds": 228.049642}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for HDFC: unrealized=1700023.41, today=1700023.41", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:05:06.342184+05:30", "timestamp": 1755783306.342184}}}
{"text": "2025-08-21 19:05:06.342 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for INFY: unrealized=21185.2, today=21185.2\n", "record": {"elapsed": {"repr": "0:03:48.050034", "seconds": 228.050034}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for INFY: unrealized=21185.2, today=21185.2", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:05:06.342576+05:30", "timestamp": 1755783306.342576}}}
{"text": "2025-08-21 19:05:06.343 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for ICICIBANK: unrealized=-459135.73, today=-459135.73\n", "record": {"elapsed": {"repr": "0:03:48.050466", "seconds": 228.050466}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for ICICIBANK: unrealized=-459135.73, today=-459135.73", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:05:06.343008+05:30", "timestamp": 1755783306.343008}}}
{"text": "2025-08-21 19:05:06.343 | INFO     | app.services.dhan_client:get_pnl:545 - Calculated totals - realized: 0.0, unrealized: 758199.46, day: 758199.46\n", "record": {"elapsed": {"repr": "0:03:48.050878", "seconds": 228.050878}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 545, "message": "Calculated totals - realized: 0.0, unrealized: 758199.46, day: 758199.46", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:05:06.343420+05:30", "timestamp": 1755783306.34342}}}
{"text": "2025-08-21 19:05:06.343 | DEBUG    | app.services.dhan_client:get_pnl:554 - PnL consistency check passed: drift=‚Çπ0.00\n", "record": {"elapsed": {"repr": "0:03:48.051448", "seconds": 228.051448}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 554, "message": "PnL consistency check passed: drift=‚Çπ0.00", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:05:06.343990+05:30", "timestamp": 1755783306.34399}}}
{"text": "2025-08-21 19:05:06.344 | DEBUG    | app.services.dhan_client:get_pnl:558 - Creating PnLTotals...\n", "record": {"elapsed": {"repr": "0:03:48.051937", "seconds": 228.051937}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 558, "message": "Creating PnLTotals...", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:05:06.344479+05:30", "timestamp": 1755783306.344479}}}
{"text": "2025-08-21 19:05:06.344 | DEBUG    | app.services.dhan_client:get_pnl:565 - PnLTotals created successfully\n", "record": {"elapsed": {"repr": "0:03:48.052390", "seconds": 228.05239}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 565, "message": "PnLTotals created successfully", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:05:06.344932+05:30", "timestamp": 1755783306.344932}}}
{"text": "2025-08-21 19:05:06.345 | DEBUG    | app.services.dhan_client:get_pnl:574 - Creating PnL model...\n", "record": {"elapsed": {"repr": "0:03:48.053361", "seconds": 228.053361}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 574, "message": "Creating PnL model...", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:05:06.345903+05:30", "timestamp": 1755783306.345903}}}
{"text": "2025-08-21 19:05:06.346 | DEBUG    | app.services.dhan_client:get_pnl:575 - Model fields: totals=<class 'app.models.schemas.PnLTotals'>, perSymbol=5, updated_at=2025-08-21 19:05:06.341229+05:30, trading_day=2025-08-21\n", "record": {"elapsed": {"repr": "0:03:48.054037", "seconds": 228.054037}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 575, "message": "Model fields: totals=<class 'app.models.schemas.PnLTotals'>, perSymbol=5, updated_at=2025-08-21 19:05:06.341229+05:30, trading_day=2025-08-21", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:05:06.346579+05:30", "timestamp": 1755783306.346579}}}
{"text": "2025-08-21 19:05:06.347 | DEBUG    | app.services.dhan_client:get_pnl:584 - Created PnL model: totals=PnLTotals(realized=0.0, unrealized=758199.46, day=758199.46, currency='INR') per_symbol=[PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1727, avg=618.93, ltp=355.21, unrealized=-455451.33, today_pnl=-455451.33), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=167, avg=948.57, ltp=1238.52, unrealized=-48422.09, today_pnl=-48422.09), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=1347, avg=801.44, ltp=2063.52, unrealized=1700023.41, today_pnl=1700023.41), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=143, avg=1427.62, ltp=1279.47, unrealized=21185.2, today_pnl=21185.2), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=438, avg=1994.48, ltp=946.22, unrealized=-459135.73, today_pnl=-459135.73)] updated_at=datetime.datetime(2025, 8, 21, 19, 5, 6, 341229, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))) trading_day='2025-08-21'\n", "record": {"elapsed": {"repr": "0:03:48.054731", "seconds": 228.054731}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 584, "message": "Created PnL model: totals=PnLTotals(realized=0.0, unrealized=758199.46, day=758199.46, currency='INR') per_symbol=[PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1727, avg=618.93, ltp=355.21, unrealized=-455451.33, today_pnl=-455451.33), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=167, avg=948.57, ltp=1238.52, unrealized=-48422.09, today_pnl=-48422.09), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=1347, avg=801.44, ltp=2063.52, unrealized=1700023.41, today_pnl=1700023.41), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=143, avg=1427.62, ltp=1279.47, unrealized=21185.2, today_pnl=21185.2), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=438, avg=1994.48, ltp=946.22, unrealized=-459135.73, today_pnl=-459135.73)] updated_at=datetime.datetime(2025, 8, 21, 19, 5, 6, 341229, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))) trading_day='2025-08-21'", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:05:06.347273+05:30", "timestamp": 1755783306.347273}}}
{"text": "2025-08-21 19:05:06.348 | DEBUG    | app.services.dhan_client:get_pnl:585 - PnL model fields: {'totals': PnLTotals(realized=0.0, unrealized=758199.46, day=758199.46, currency='INR'), 'per_symbol': [PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1727, avg=618.93, ltp=355.21, unrealized=-455451.33, today_pnl=-455451.33), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=167, avg=948.57, ltp=1238.52, unrealized=-48422.09, today_pnl=-48422.09), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=1347, avg=801.44, ltp=2063.52, unrealized=1700023.41, today_pnl=1700023.41), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=143, avg=1427.62, ltp=1279.47, unrealized=21185.2, today_pnl=21185.2), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=438, avg=1994.48, ltp=946.22, unrealized=-459135.73, today_pnl=-459135.73)], 'updated_at': datetime.datetime(2025, 8, 21, 19, 5, 6, 341229, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))), 'trading_day': '2025-08-21'}\n", "record": {"elapsed": {"repr": "0:03:48.055511", "seconds": 228.055511}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 585, "message": "PnL model fields: {'totals': PnLTotals(realized=0.0, unrealized=758199.46, day=758199.46, currency='INR'), 'per_symbol': [PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1727, avg=618.93, ltp=355.21, unrealized=-455451.33, today_pnl=-455451.33), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=167, avg=948.57, ltp=1238.52, unrealized=-48422.09, today_pnl=-48422.09), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=1347, avg=801.44, ltp=2063.52, unrealized=1700023.41, today_pnl=1700023.41), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=143, avg=1427.62, ltp=1279.47, unrealized=21185.2, today_pnl=21185.2), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=438, avg=1994.48, ltp=946.22, unrealized=-459135.73, today_pnl=-459135.73)], 'updated_at': datetime.datetime(2025, 8, 21, 19, 5, 6, 341229, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))), 'trading_day': '2025-08-21'}", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:05:06.348053+05:30", "timestamp": 1755783306.348053}}}
{"text": "2025-08-21 19:05:06.349 | INFO     | app.services.dhan_client:get_pnl:587 - P&L calculation completed successfully: 5 symbols, unrealized=‚Çπ758199.46\n", "record": {"elapsed": {"repr": "0:03:48.057022", "seconds": 228.057022}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 587, "message": "P&L calculation completed successfully: 5 symbols, unrealized=‚Çπ758199.46", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:05:06.349564+05:30", "timestamp": 1755783306.349564}}}
{"text": "2025-08-21 19:05:06.350 | DEBUG    | app.ws.live:emit_delta:408 - Emitted pnl delta: seq=251\n", "record": {"elapsed": {"repr": "0:03:48.057803", "seconds": 228.057803}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "emit_delta", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 408, "message": "Emitted pnl delta: seq=251", "module": "live", "name": "app.ws.live", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:05:06.350345+05:30", "timestamp": 1755783306.350345}}}
{"text": "2025-08-21 19:05:06.351 | DEBUG    | app.ws.live:emit_delta:408 - Emitted positions delta: seq=252\n", "record": {"elapsed": {"repr": "0:03:48.058485", "seconds": 228.058485}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "emit_delta", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 408, "message": "Emitted positions delta: seq=252", "module": "live", "name": "app.ws.live", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:05:06.351027+05:30", "timestamp": 1755783306.351027}}}
{"text": "2025-08-21 19:05:07.105 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:03:48.812656", "seconds": 228.812656}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:05:07.105198+05:30", "timestamp": 1755783307.105198}}}
{"text": "2025-08-21 19:05:07.105 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:03:48.813445", "seconds": 228.813445}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:05:07.105987+05:30", "timestamp": 1755783307.105987}}}
{"text": "2025-08-21 19:05:07.106 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:03:48.814011", "seconds": 228.814011}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:05:07.106553+05:30", "timestamp": 1755783307.106553}}}
{"text": "2025-08-21 19:05:07.107 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:03:48.815116", "seconds": 228.815116}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:05:07.107658+05:30", "timestamp": 1755783307.107658}}}
{"text": "2025-08-21 19:05:07.108 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:03:48.815620", "seconds": 228.81562}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:05:07.108162+05:30", "timestamp": 1755783307.108162}}}
{"text": "2025-08-21 19:05:07.108 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:03:48.816043", "seconds": 228.816043}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:05:07.108585+05:30", "timestamp": 1755783307.108585}}}
{"text": "2025-08-21 19:05:07.109 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:03:48.816474", "seconds": 228.816474}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:05:07.109016+05:30", "timestamp": 1755783307.109016}}}
{"text": "2025-08-21 19:05:07.109 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:03:48.816884", "seconds": 228.816884}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:05:07.109426+05:30", "timestamp": 1755783307.109426}}}
{"text": "2025-08-21 19:05:07.109 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:03:48.817327", "seconds": 228.817327}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:05:07.109869+05:30", "timestamp": 1755783307.109869}}}
{"text": "2025-08-21 19:05:07.110 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:03:48.817771", "seconds": 228.817771}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:05:07.110313+05:30", "timestamp": 1755783307.110313}}}
{"text": "2025-08-21 19:05:07.175 | INFO     | app.ws.live:shutdown_event:557 - Stopping WebSocket polling...\n", "record": {"elapsed": {"repr": "0:03:48.882519", "seconds": 228.882519}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "shutdown_event", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 557, "message": "Stopping WebSocket polling...", "module": "live", "name": "app.ws.live", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:05:07.175061+05:30", "timestamp": 1755783307.175061}}}
{"text": "2025-08-21 19:05:07.175 | INFO     | app.ws.live:shutdown_event:557 - Stopping WebSocket polling...\n", "record": {"elapsed": {"repr": "0:03:48.883292", "seconds": 228.883292}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "shutdown_event", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 557, "message": "Stopping WebSocket polling...", "module": "live", "name": "app.ws.live", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:05:07.175834+05:30", "timestamp": 1755783307.175834}}}
{"text": "2025-08-21 19:05:07.176 | INFO     | app.main:shutdown_event:35 - Dhan Automation Backend Application shutting down\n", "record": {"elapsed": {"repr": "0:03:48.883657", "seconds": 228.883657}, "exception": null, "extra": {}, "file": {"name": "main.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\main.py"}, "function": "shutdown_event", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 35, "message": "Dhan Automation Backend Application shutting down", "module": "main", "name": "app.main", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:05:07.176199+05:30", "timestamp": 1755783307.176199}}}
{"text": "2025-08-21 22:05:04.460 | INFO     | app.services.dhan_client:_initialize_mock_data:53 - Initializing mock data...\n", "record": {"elapsed": {"repr": "0:00:00.216358", "seconds": 0.216358}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_initialize_mock_data", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 53, "message": "Initializing mock data...", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 29644, "name": "MainProcess"}, "thread": {"id": 29140, "name": "MainThread"}, "time": {"repr": "2025-08-21 22:05:04.460130+05:30", "timestamp": 1755794104.46013}}}
{"text": "2025-08-21 22:05:04.462 | INFO     | app.services.dhan_client:_initialize_mock_data:75 - Created mock holding for RELIANCE: qty=1119, avg_price=156.48999282974114, ltp=184.82027319971013\n", "record": {"elapsed": {"repr": "0:00:00.219216", "seconds": 0.219216}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_initialize_mock_data", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 75, "message": "Created mock holding for RELIANCE: qty=1119, avg_price=156.48999282974114, ltp=184.82027319971013", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 29644, "name": "MainProcess"}, "thread": {"id": 29140, "name": "MainThread"}, "time": {"repr": "2025-08-21 22:05:04.462988+05:30", "timestamp": 1755794104.462988}}}
{"text": "2025-08-21 22:05:04.464 | INFO     | app.services.dhan_client:_initialize_mock_data:75 - Created mock holding for TCS: qty=3636, avg_price=892.76820174998, ltp=1004.1229798435663\n", "record": {"elapsed": {"repr": "0:00:00.220601", "seconds": 0.220601}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_initialize_mock_data", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 75, "message": "Created mock holding for TCS: qty=3636, avg_price=892.76820174998, ltp=1004.1229798435663", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 29644, "name": "MainProcess"}, "thread": {"id": 29140, "name": "MainThread"}, "time": {"repr": "2025-08-21 22:05:04.464373+05:30", "timestamp": 1755794104.464373}}}
{"text": "2025-08-21 22:05:04.466 | INFO     | app.services.dhan_client:_initialize_mock_data:75 - Created mock holding for HDFC: qty=2782, avg_price=1633.778287976532, ltp=1951.2189184414383\n", "record": {"elapsed": {"repr": "0:00:00.222487", "seconds": 0.222487}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_initialize_mock_data", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 75, "message": "Created mock holding for HDFC: qty=2782, avg_price=1633.778287976532, ltp=1951.2189184414383", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 29644, "name": "MainProcess"}, "thread": {"id": 29140, "name": "MainThread"}, "time": {"repr": "2025-08-21 22:05:04.466259+05:30", "timestamp": 1755794104.466259}}}
{"text": "2025-08-21 22:05:04.467 | INFO     | app.services.dhan_client:_initialize_mock_data:75 - Created mock holding for INFY: qty=4286, avg_price=121.246319150279, ltp=97.14199759571991\n", "record": {"elapsed": {"repr": "0:00:00.223471", "seconds": 0.223471}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_initialize_mock_data", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 75, "message": "Created mock holding for INFY: qty=4286, avg_price=121.246319150279, ltp=97.14199759571991", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 29644, "name": "MainProcess"}, "thread": {"id": 29140, "name": "MainThread"}, "time": {"repr": "2025-08-21 22:05:04.467243+05:30", "timestamp": 1755794104.467243}}}
{"text": "2025-08-21 22:05:04.468 | INFO     | app.services.dhan_client:_initialize_mock_data:75 - Created mock holding for ICICIBANK: qty=4779, avg_price=379.2769423058792, ltp=366.84795854461976\n", "record": {"elapsed": {"repr": "0:00:00.224398", "seconds": 0.224398}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_initialize_mock_data", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 75, "message": "Created mock holding for ICICIBANK: qty=4779, avg_price=379.2769423058792, ltp=366.84795854461976", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 29644, "name": "MainProcess"}, "thread": {"id": 29140, "name": "MainThread"}, "time": {"repr": "2025-08-21 22:05:04.468170+05:30", "timestamp": 1755794104.46817}}}
{"text": "2025-08-21 22:05:04.469 | INFO     | app.services.dhan_client:_initialize_mock_data:75 - Created mock holding for HINDUNILVR: qty=1239, avg_price=1798.3760222615906, ltp=1556.9758321228226\n", "record": {"elapsed": {"repr": "0:00:00.225322", "seconds": 0.225322}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_initialize_mock_data", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 75, "message": "Created mock holding for HINDUNILVR: qty=1239, avg_price=1798.3760222615906, ltp=1556.9758321228226", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 29644, "name": "MainProcess"}, "thread": {"id": 29140, "name": "MainThread"}, "time": {"repr": "2025-08-21 22:05:04.469094+05:30", "timestamp": 1755794104.469094}}}
{"text": "2025-08-21 22:05:04.470 | INFO     | app.services.dhan_client:_initialize_mock_data:75 - Created mock holding for ITC: qty=2569, avg_price=1244.944401752008, ltp=1173.8243557455728\n", "record": {"elapsed": {"repr": "0:00:00.226862", "seconds": 0.226862}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_initialize_mock_data", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 75, "message": "Created mock holding for ITC: qty=2569, avg_price=1244.944401752008, ltp=1173.8243557455728", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 29644, "name": "MainProcess"}, "thread": {"id": 29140, "name": "MainThread"}, "time": {"repr": "2025-08-21 22:05:04.470634+05:30", "timestamp": 1755794104.470634}}}
{"text": "2025-08-21 22:05:04.471 | INFO     | app.services.dhan_client:_initialize_mock_data:75 - Created mock holding for SBIN: qty=4071, avg_price=452.3589122480268, ltp=464.89254824246433\n", "record": {"elapsed": {"repr": "0:00:00.228007", "seconds": 0.228007}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_initialize_mock_data", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 75, "message": "Created mock holding for SBIN: qty=4071, avg_price=452.3589122480268, ltp=464.89254824246433", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 29644, "name": "MainProcess"}, "thread": {"id": 29140, "name": "MainThread"}, "time": {"repr": "2025-08-21 22:05:04.471779+05:30", "timestamp": 1755794104.471779}}}
{"text": "2025-08-21 22:05:04.472 | INFO     | app.services.dhan_client:_initialize_mock_data:75 - Created mock holding for BHARTIARTL: qty=2144, avg_price=1670.9758493001061, ltp=1492.8413693363862\n", "record": {"elapsed": {"repr": "0:00:00.228637", "seconds": 0.228637}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_initialize_mock_data", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 75, "message": "Created mock holding for BHARTIARTL: qty=2144, avg_price=1670.9758493001061, ltp=1492.8413693363862", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 29644, "name": "MainProcess"}, "thread": {"id": 29140, "name": "MainThread"}, "time": {"repr": "2025-08-21 22:05:04.472409+05:30", "timestamp": 1755794104.472409}}}
{"text": "2025-08-21 22:05:04.474 | INFO     | app.services.dhan_client:_initialize_mock_data:75 - Created mock holding for KOTAKBANK: qty=1643, avg_price=193.23699020809266, ltp=201.2108656425453\n", "record": {"elapsed": {"repr": "0:00:00.230788", "seconds": 0.230788}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_initialize_mock_data", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 75, "message": "Created mock holding for KOTAKBANK: qty=1643, avg_price=193.23699020809266, ltp=201.2108656425453", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 29644, "name": "MainProcess"}, "thread": {"id": 29140, "name": "MainThread"}, "time": {"repr": "2025-08-21 22:05:04.474560+05:30", "timestamp": 1755794104.47456}}}
{"text": "2025-08-21 22:05:04.475 | INFO     | app.services.dhan_client:_initialize_mock_data:77 - Created 10 mock holdings\n", "record": {"elapsed": {"repr": "0:00:00.231976", "seconds": 0.231976}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_initialize_mock_data", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 77, "message": "Created 10 mock holdings", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 29644, "name": "MainProcess"}, "thread": {"id": 29140, "name": "MainThread"}, "time": {"repr": "2025-08-21 22:05:04.475748+05:30", "timestamp": 1755794104.475748}}}
{"text": "2025-08-21 22:05:04.479 | INFO     | app.services.dhan_client:_initialize_mock_data:91 - Created mock position for RELIANCE: id=pos_001, qty=1596, avg_price=105.2\n", "record": {"elapsed": {"repr": "0:00:00.235888", "seconds": 0.235888}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_initialize_mock_data", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 91, "message": "Created mock position for RELIANCE: id=pos_001, qty=1596, avg_price=105.2", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 29644, "name": "MainProcess"}, "thread": {"id": 29140, "name": "MainThread"}, "time": {"repr": "2025-08-21 22:05:04.479660+05:30", "timestamp": 1755794104.47966}}}
{"text": "2025-08-21 22:05:04.481 | INFO     | app.services.dhan_client:_initialize_mock_data:91 - Created mock position for TCS: id=pos_002, qty=895, avg_price=965.72\n", "record": {"elapsed": {"repr": "0:00:00.237519", "seconds": 0.237519}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_initialize_mock_data", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 91, "message": "Created mock position for TCS: id=pos_002, qty=895, avg_price=965.72", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 29644, "name": "MainProcess"}, "thread": {"id": 29140, "name": "MainThread"}, "time": {"repr": "2025-08-21 22:05:04.481291+05:30", "timestamp": 1755794104.481291}}}
{"text": "2025-08-21 22:05:04.483 | INFO     | app.services.dhan_client:_initialize_mock_data:91 - Created mock position for HDFC: id=pos_003, qty=1697, avg_price=987.4\n", "record": {"elapsed": {"repr": "0:00:00.239650", "seconds": 0.23965}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_initialize_mock_data", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 91, "message": "Created mock position for HDFC: id=pos_003, qty=1697, avg_price=987.4", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 29644, "name": "MainProcess"}, "thread": {"id": 29140, "name": "MainThread"}, "time": {"repr": "2025-08-21 22:05:04.483422+05:30", "timestamp": 1755794104.483422}}}
{"text": "2025-08-21 22:05:04.487 | INFO     | app.services.dhan_client:_initialize_mock_data:91 - Created mock position for INFY: id=pos_004, qty=1638, avg_price=1011.79\n", "record": {"elapsed": {"repr": "0:00:00.243311", "seconds": 0.243311}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_initialize_mock_data", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 91, "message": "Created mock position for INFY: id=pos_004, qty=1638, avg_price=1011.79", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 29644, "name": "MainProcess"}, "thread": {"id": 29140, "name": "MainThread"}, "time": {"repr": "2025-08-21 22:05:04.487083+05:30", "timestamp": 1755794104.487083}}}
{"text": "2025-08-21 22:05:04.490 | INFO     | app.services.dhan_client:_initialize_mock_data:91 - Created mock position for ICICIBANK: id=pos_005, qty=1535, avg_price=1230.09\n", "record": {"elapsed": {"repr": "0:00:00.246558", "seconds": 0.246558}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_initialize_mock_data", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 91, "message": "Created mock position for ICICIBANK: id=pos_005, qty=1535, avg_price=1230.09", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 29644, "name": "MainProcess"}, "thread": {"id": 29140, "name": "MainThread"}, "time": {"repr": "2025-08-21 22:05:04.490330+05:30", "timestamp": 1755794104.49033}}}
{"text": "2025-08-21 22:05:04.491 | INFO     | app.services.dhan_client:_initialize_mock_data:93 - Created 5 mock positions\n", "record": {"elapsed": {"repr": "0:00:00.247843", "seconds": 0.247843}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_initialize_mock_data", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 93, "message": "Created 5 mock positions", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 29644, "name": "MainProcess"}, "thread": {"id": 29140, "name": "MainThread"}, "time": {"repr": "2025-08-21 22:05:04.491615+05:30", "timestamp": 1755794104.491615}}}
{"text": "2025-08-21 22:05:04.498 | INFO     | app.services.dhan_client:_initialize_mock_data:111 - Created 10 mock orders\n", "record": {"elapsed": {"repr": "0:00:00.255203", "seconds": 0.255203}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_initialize_mock_data", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 111, "message": "Created 10 mock orders", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 29644, "name": "MainProcess"}, "thread": {"id": 29140, "name": "MainThread"}, "time": {"repr": "2025-08-21 22:05:04.498975+05:30", "timestamp": 1755794104.498975}}}
{"text": "2025-08-21 22:05:04.504 | INFO     | app.services.dhan_client:_initialize_mock_data:127 - Created 20 mock trades\n", "record": {"elapsed": {"repr": "0:00:00.261005", "seconds": 0.261005}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_initialize_mock_data", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 127, "message": "Created 20 mock trades", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 29644, "name": "MainProcess"}, "thread": {"id": 29140, "name": "MainThread"}, "time": {"repr": "2025-08-21 22:05:04.504777+05:30", "timestamp": 1755794104.504777}}}
{"text": "2025-08-21 22:05:04.506 | INFO     | app.services.dhan_client:_initialize_mock_data:128 - Mock data initialization completed successfully\n", "record": {"elapsed": {"repr": "0:00:00.263162", "seconds": 0.263162}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_initialize_mock_data", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 128, "message": "Mock data initialization completed successfully", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 29644, "name": "MainProcess"}, "thread": {"id": 29140, "name": "MainThread"}, "time": {"repr": "2025-08-21 22:05:04.506934+05:30", "timestamp": 1755794104.506934}}}
{"text": "2025-08-21 22:05:04.627 | INFO     | app.main:<module>:38 - Starting Dhan Automation Backend Application\n", "record": {"elapsed": {"repr": "0:00:00.383992", "seconds": 0.383992}, "exception": null, "extra": {}, "file": {"name": "main.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\main.py"}, "function": "<module>", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 38, "message": "Starting Dhan Automation Backend Application", "module": "main", "name": "app.main", "process": {"id": 29644, "name": "MainProcess"}, "thread": {"id": 29140, "name": "MainThread"}, "time": {"repr": "2025-08-21 22:05:04.627764+05:30", "timestamp": 1755794104.627764}}}
{"text": "2025-08-21 22:05:04.635 | INFO     | app.ws.live:startup_event:551 - Starting WebSocket polling...\n", "record": {"elapsed": {"repr": "0:00:00.391232", "seconds": 0.391232}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "startup_event", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 551, "message": "Starting WebSocket polling...", "module": "live", "name": "app.ws.live", "process": {"id": 29644, "name": "MainProcess"}, "thread": {"id": 29140, "name": "MainThread"}, "time": {"repr": "2025-08-21 22:05:04.635004+05:30", "timestamp": 1755794104.635004}}}
{"text": "2025-08-21 22:05:04.638 | INFO     | app.main:startup_event:30 - Dhan Automation Backend Application started successfully\n", "record": {"elapsed": {"repr": "0:00:00.394828", "seconds": 0.394828}, "exception": null, "extra": {}, "file": {"name": "main.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\main.py"}, "function": "startup_event", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 30, "message": "Dhan Automation Backend Application started successfully", "module": "main", "name": "app.main", "process": {"id": 29644, "name": "MainProcess"}, "thread": {"id": 29140, "name": "MainThread"}, "time": {"repr": "2025-08-21 22:05:04.638600+05:30", "timestamp": 1755794104.6386}}}
{"text": "2025-08-21 22:05:04.640 | INFO     | app.main:startup_event:31 - Using MOCK data mode\n", "record": {"elapsed": {"repr": "0:00:00.396786", "seconds": 0.396786}, "exception": null, "extra": {}, "file": {"name": "main.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\main.py"}, "function": "startup_event", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 31, "message": "Using MOCK data mode", "module": "main", "name": "app.main", "process": {"id": 29644, "name": "MainProcess"}, "thread": {"id": 29140, "name": "MainThread"}, "time": {"repr": "2025-08-21 22:05:04.640558+05:30", "timestamp": 1755794104.640558}}}
{"text": "2025-08-21 22:05:04.642 | INFO     | app.ws.live:startup_event:551 - Starting WebSocket polling...\n", "record": {"elapsed": {"repr": "0:00:00.398408", "seconds": 0.398408}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "startup_event", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 551, "message": "Starting WebSocket polling...", "module": "live", "name": "app.ws.live", "process": {"id": 29644, "name": "MainProcess"}, "thread": {"id": 29140, "name": "MainThread"}, "time": {"repr": "2025-08-21 22:05:04.642180+05:30", "timestamp": 1755794104.64218}}}
{"text": "2025-08-21 22:05:06.292 | DEBUG    | app.ws.live:emit_delta:408 - Emitted positions delta: seq=1\n", "record": {"elapsed": {"repr": "0:00:02.048817", "seconds": 2.048817}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "emit_delta", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 408, "message": "Emitted positions delta: seq=1", "module": "live", "name": "app.ws.live", "process": {"id": 29644, "name": "MainProcess"}, "thread": {"id": 29140, "name": "MainThread"}, "time": {"repr": "2025-08-21 22:05:06.292589+05:30", "timestamp": 1755794106.292589}}}
{"text": "2025-08-21 22:05:06.294 | INFO     | app.services.dhan_client:get_pnl:489 - Starting accurate P&L calculation\n", "record": {"elapsed": {"repr": "0:00:02.051126", "seconds": 2.051126}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 489, "message": "Starting accurate P&L calculation", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 29644, "name": "MainProcess"}, "thread": {"id": 29140, "name": "MainThread"}, "time": {"repr": "2025-08-21 22:05:06.294898+05:30", "timestamp": 1755794106.294898}}}
{"text": "2025-08-21 22:05:06.296 | INFO     | app.services.dhan_client:get_pnl:491 - Fetched 5 positions\n", "record": {"elapsed": {"repr": "0:00:02.052608", "seconds": 2.052608}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 491, "message": "Fetched 5 positions", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 29644, "name": "MainProcess"}, "thread": {"id": 29140, "name": "MainThread"}, "time": {"repr": "2025-08-21 22:05:06.296380+05:30", "timestamp": 1755794106.29638}}}
{"text": "2025-08-21 22:05:06.298 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for RELIANCE: unrealized=127073.96, today=127073.96\n", "record": {"elapsed": {"repr": "0:00:02.054815", "seconds": 2.054815}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for RELIANCE: unrealized=127073.96, today=127073.96", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 29644, "name": "MainProcess"}, "thread": {"id": 29140, "name": "MainThread"}, "time": {"repr": "2025-08-21 22:05:06.298587+05:30", "timestamp": 1755794106.298587}}}
{"text": "2025-08-21 22:05:06.300 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for TCS: unrealized=-34370.67, today=-34370.67\n", "record": {"elapsed": {"repr": "0:00:02.056607", "seconds": 2.056607}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for TCS: unrealized=-34370.67, today=-34370.67", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 29644, "name": "MainProcess"}, "thread": {"id": 29140, "name": "MainThread"}, "time": {"repr": "2025-08-21 22:05:06.300379+05:30", "timestamp": 1755794106.300379}}}
{"text": "2025-08-21 22:05:06.303 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for HDFC: unrealized=1635600.7, today=1635600.7\n", "record": {"elapsed": {"repr": "0:00:02.059266", "seconds": 2.059266}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for HDFC: unrealized=1635600.7, today=1635600.7", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 29644, "name": "MainProcess"}, "thread": {"id": 29140, "name": "MainThread"}, "time": {"repr": "2025-08-21 22:05:06.303038+05:30", "timestamp": 1755794106.303038}}}
{"text": "2025-08-21 22:05:06.307 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for INFY: unrealized=1498193.43, today=1498193.43\n", "record": {"elapsed": {"repr": "0:00:02.063655", "seconds": 2.063655}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for INFY: unrealized=1498193.43, today=1498193.43", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 29644, "name": "MainProcess"}, "thread": {"id": 29140, "name": "MainThread"}, "time": {"repr": "2025-08-21 22:05:06.307427+05:30", "timestamp": 1755794106.307427}}}
{"text": "2025-08-21 22:05:06.312 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for ICICIBANK: unrealized=-1325076.53, today=-1325076.53\n", "record": {"elapsed": {"repr": "0:00:02.069068", "seconds": 2.069068}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for ICICIBANK: unrealized=-1325076.53, today=-1325076.53", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 29644, "name": "MainProcess"}, "thread": {"id": 29140, "name": "MainThread"}, "time": {"repr": "2025-08-21 22:05:06.312840+05:30", "timestamp": 1755794106.31284}}}
{"text": "2025-08-21 22:05:06.316 | INFO     | app.services.dhan_client:get_pnl:545 - Calculated totals - realized: 0.0, unrealized: 1901420.89, day: 1901420.89\n", "record": {"elapsed": {"repr": "0:00:02.072391", "seconds": 2.072391}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 545, "message": "Calculated totals - realized: 0.0, unrealized: 1901420.89, day: 1901420.89", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 29644, "name": "MainProcess"}, "thread": {"id": 29140, "name": "MainThread"}, "time": {"repr": "2025-08-21 22:05:06.316163+05:30", "timestamp": 1755794106.316163}}}
{"text": "2025-08-21 22:05:06.317 | DEBUG    | app.services.dhan_client:get_pnl:554 - PnL consistency check passed: drift=‚Çπ0.00\n", "record": {"elapsed": {"repr": "0:00:02.073737", "seconds": 2.073737}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 554, "message": "PnL consistency check passed: drift=‚Çπ0.00", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 29644, "name": "MainProcess"}, "thread": {"id": 29140, "name": "MainThread"}, "time": {"repr": "2025-08-21 22:05:06.317509+05:30", "timestamp": 1755794106.317509}}}
{"text": "2025-08-21 22:05:06.319 | DEBUG    | app.services.dhan_client:get_pnl:558 - Creating PnLTotals...\n", "record": {"elapsed": {"repr": "0:00:02.075326", "seconds": 2.075326}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 558, "message": "Creating PnLTotals...", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 29644, "name": "MainProcess"}, "thread": {"id": 29140, "name": "MainThread"}, "time": {"repr": "2025-08-21 22:05:06.319098+05:30", "timestamp": 1755794106.319098}}}
{"text": "2025-08-21 22:05:06.320 | DEBUG    | app.services.dhan_client:get_pnl:565 - PnLTotals created successfully\n", "record": {"elapsed": {"repr": "0:00:02.076309", "seconds": 2.076309}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 565, "message": "PnLTotals created successfully", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 29644, "name": "MainProcess"}, "thread": {"id": 29140, "name": "MainThread"}, "time": {"repr": "2025-08-21 22:05:06.320081+05:30", "timestamp": 1755794106.320081}}}
{"text": "2025-08-21 22:05:06.321 | DEBUG    | app.services.dhan_client:get_pnl:574 - Creating PnL model...\n", "record": {"elapsed": {"repr": "0:00:02.077730", "seconds": 2.07773}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 574, "message": "Creating PnL model...", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 29644, "name": "MainProcess"}, "thread": {"id": 29140, "name": "MainThread"}, "time": {"repr": "2025-08-21 22:05:06.321502+05:30", "timestamp": 1755794106.321502}}}
{"text": "2025-08-21 22:05:06.322 | DEBUG    | app.services.dhan_client:get_pnl:575 - Model fields: totals=<class 'app.models.schemas.PnLTotals'>, perSymbol=5, updated_at=2025-08-21 22:05:06.298026+05:30, trading_day=2025-08-21\n", "record": {"elapsed": {"repr": "0:00:02.078672", "seconds": 2.078672}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 575, "message": "Model fields: totals=<class 'app.models.schemas.PnLTotals'>, perSymbol=5, updated_at=2025-08-21 22:05:06.298026+05:30, trading_day=2025-08-21", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 29644, "name": "MainProcess"}, "thread": {"id": 29140, "name": "MainThread"}, "time": {"repr": "2025-08-21 22:05:06.322444+05:30", "timestamp": 1755794106.322444}}}
{"text": "2025-08-21 22:05:06.326 | DEBUG    | app.services.dhan_client:get_pnl:584 - Created PnL model: totals=PnLTotals(realized=0.0, unrealized=1901420.89, day=1901420.89, currency='INR') per_symbol=[PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1596, avg=105.2, ltp=184.82, unrealized=127073.96, today_pnl=127073.96), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=895, avg=965.72, ltp=1004.12, unrealized=-34370.67, today_pnl=-34370.67), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=1697, avg=987.4, ltp=1951.22, unrealized=1635600.7, today_pnl=1635600.7), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=1638, avg=1011.79, ltp=97.14, unrealized=1498193.43, today_pnl=1498193.43), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=1535, avg=1230.09, ltp=366.85, unrealized=-1325076.53, today_pnl=-1325076.53)] updated_at=datetime.datetime(2025, 8, 21, 22, 5, 6, 298026, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))) trading_day='2025-08-21'\n", "record": {"elapsed": {"repr": "0:00:02.082647", "seconds": 2.082647}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 584, "message": "Created PnL model: totals=PnLTotals(realized=0.0, unrealized=1901420.89, day=1901420.89, currency='INR') per_symbol=[PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1596, avg=105.2, ltp=184.82, unrealized=127073.96, today_pnl=127073.96), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=895, avg=965.72, ltp=1004.12, unrealized=-34370.67, today_pnl=-34370.67), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=1697, avg=987.4, ltp=1951.22, unrealized=1635600.7, today_pnl=1635600.7), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=1638, avg=1011.79, ltp=97.14, unrealized=1498193.43, today_pnl=1498193.43), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=1535, avg=1230.09, ltp=366.85, unrealized=-1325076.53, today_pnl=-1325076.53)] updated_at=datetime.datetime(2025, 8, 21, 22, 5, 6, 298026, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))) trading_day='2025-08-21'", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 29644, "name": "MainProcess"}, "thread": {"id": 29140, "name": "MainThread"}, "time": {"repr": "2025-08-21 22:05:06.326419+05:30", "timestamp": 1755794106.326419}}}
{"text": "2025-08-21 22:05:06.329 | DEBUG    | app.services.dhan_client:get_pnl:585 - PnL model fields: {'totals': PnLTotals(realized=0.0, unrealized=1901420.89, day=1901420.89, currency='INR'), 'per_symbol': [PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1596, avg=105.2, ltp=184.82, unrealized=127073.96, today_pnl=127073.96), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=895, avg=965.72, ltp=1004.12, unrealized=-34370.67, today_pnl=-34370.67), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=1697, avg=987.4, ltp=1951.22, unrealized=1635600.7, today_pnl=1635600.7), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=1638, avg=1011.79, ltp=97.14, unrealized=1498193.43, today_pnl=1498193.43), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=1535, avg=1230.09, ltp=366.85, unrealized=-1325076.53, today_pnl=-1325076.53)], 'updated_at': datetime.datetime(2025, 8, 21, 22, 5, 6, 298026, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))), 'trading_day': '2025-08-21'}\n", "record": {"elapsed": {"repr": "0:00:02.085504", "seconds": 2.085504}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 585, "message": "PnL model fields: {'totals': PnLTotals(realized=0.0, unrealized=1901420.89, day=1901420.89, currency='INR'), 'per_symbol': [PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1596, avg=105.2, ltp=184.82, unrealized=127073.96, today_pnl=127073.96), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=895, avg=965.72, ltp=1004.12, unrealized=-34370.67, today_pnl=-34370.67), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=1697, avg=987.4, ltp=1951.22, unrealized=1635600.7, today_pnl=1635600.7), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=1638, avg=1011.79, ltp=97.14, unrealized=1498193.43, today_pnl=1498193.43), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=1535, avg=1230.09, ltp=366.85, unrealized=-1325076.53, today_pnl=-1325076.53)], 'updated_at': datetime.datetime(2025, 8, 21, 22, 5, 6, 298026, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))), 'trading_day': '2025-08-21'}", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 29644, "name": "MainProcess"}, "thread": {"id": 29140, "name": "MainThread"}, "time": {"repr": "2025-08-21 22:05:06.329276+05:30", "timestamp": 1755794106.329276}}}
{"text": "2025-08-21 22:05:06.331 | INFO     | app.services.dhan_client:get_pnl:587 - P&L calculation completed successfully: 5 symbols, unrealized=‚Çπ1901420.89\n", "record": {"elapsed": {"repr": "0:00:02.087835", "seconds": 2.087835}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 587, "message": "P&L calculation completed successfully: 5 symbols, unrealized=‚Çπ1901420.89", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 29644, "name": "MainProcess"}, "thread": {"id": 29140, "name": "MainThread"}, "time": {"repr": "2025-08-21 22:05:06.331607+05:30", "timestamp": 1755794106.331607}}}
{"text": "2025-08-21 22:05:06.334 | DEBUG    | app.ws.live:emit_delta:408 - Emitted pnl delta: seq=2\n", "record": {"elapsed": {"repr": "0:00:02.090485", "seconds": 2.090485}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "emit_delta", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 408, "message": "Emitted pnl delta: seq=2", "module": "live", "name": "app.ws.live", "process": {"id": 29644, "name": "MainProcess"}, "thread": {"id": 29140, "name": "MainThread"}, "time": {"repr": "2025-08-21 22:05:06.334257+05:30", "timestamp": 1755794106.334257}}}
{"text": "2025-08-21 22:05:06.512 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:02.268938", "seconds": 2.268938}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 29644, "name": "MainProcess"}, "thread": {"id": 15452, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 22:05:06.512710+05:30", "timestamp": 1755794106.51271}}}
{"text": "2025-08-21 22:05:06.514 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:02.270651", "seconds": 2.270651}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 29644, "name": "MainProcess"}, "thread": {"id": 15452, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 22:05:06.514423+05:30", "timestamp": 1755794106.514423}}}
{"text": "2025-08-21 22:05:06.516 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:02.272443", "seconds": 2.272443}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 29644, "name": "MainProcess"}, "thread": {"id": 15452, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 22:05:06.516215+05:30", "timestamp": 1755794106.516215}}}
{"text": "2025-08-21 22:05:06.517 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:02.273971", "seconds": 2.273971}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 29644, "name": "MainProcess"}, "thread": {"id": 15452, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 22:05:06.517743+05:30", "timestamp": 1755794106.517743}}}
{"text": "2025-08-21 22:05:06.519 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:02.275571", "seconds": 2.275571}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 29644, "name": "MainProcess"}, "thread": {"id": 15452, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 22:05:06.519343+05:30", "timestamp": 1755794106.519343}}}
{"text": "2025-08-21 22:05:06.521 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:02.277592", "seconds": 2.277592}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 29644, "name": "MainProcess"}, "thread": {"id": 15452, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 22:05:06.521364+05:30", "timestamp": 1755794106.521364}}}
{"text": "2025-08-21 22:05:06.523 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:02.279344", "seconds": 2.279344}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 29644, "name": "MainProcess"}, "thread": {"id": 15452, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 22:05:06.523116+05:30", "timestamp": 1755794106.523116}}}
{"text": "2025-08-21 22:05:06.525 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:02.281619", "seconds": 2.281619}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 29644, "name": "MainProcess"}, "thread": {"id": 15452, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 22:05:06.525391+05:30", "timestamp": 1755794106.525391}}}
{"text": "2025-08-21 22:05:06.529 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:02.285780", "seconds": 2.28578}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 29644, "name": "MainProcess"}, "thread": {"id": 15452, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 22:05:06.529552+05:30", "timestamp": 1755794106.529552}}}
{"text": "2025-08-21 22:05:06.532 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:02.288278", "seconds": 2.288278}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 29644, "name": "MainProcess"}, "thread": {"id": 15452, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 22:05:06.532050+05:30", "timestamp": 1755794106.53205}}}
{"text": "2025-08-21 22:05:07.298 | DEBUG    | app.ws.live:emit_delta:408 - Emitted orders delta: seq=3\n", "record": {"elapsed": {"repr": "0:00:03.054523", "seconds": 3.054523}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "emit_delta", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 408, "message": "Emitted orders delta: seq=3", "module": "live", "name": "app.ws.live", "process": {"id": 29644, "name": "MainProcess"}, "thread": {"id": 29140, "name": "MainThread"}, "time": {"repr": "2025-08-21 22:05:07.298295+05:30", "timestamp": 1755794107.298295}}}
{"text": "2025-08-21 22:05:08.271 | DEBUG    | app.ws.live:emit_delta:408 - Emitted positions delta: seq=4\n", "record": {"elapsed": {"repr": "0:00:04.027594", "seconds": 4.027594}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "emit_delta", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 408, "message": "Emitted positions delta: seq=4", "module": "live", "name": "app.ws.live", "process": {"id": 29644, "name": "MainProcess"}, "thread": {"id": 29140, "name": "MainThread"}, "time": {"repr": "2025-08-21 22:05:08.271366+05:30", "timestamp": 1755794108.271366}}}
{"text": "2025-08-21 22:05:08.334 | INFO     | app.services.dhan_client:get_pnl:489 - Starting accurate P&L calculation\n", "record": {"elapsed": {"repr": "0:00:04.091121", "seconds": 4.091121}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 489, "message": "Starting accurate P&L calculation", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 29644, "name": "MainProcess"}, "thread": {"id": 29140, "name": "MainThread"}, "time": {"repr": "2025-08-21 22:05:08.334893+05:30", "timestamp": 1755794108.334893}}}
{"text": "2025-08-21 22:05:08.336 | INFO     | app.services.dhan_client:get_pnl:491 - Fetched 5 positions\n", "record": {"elapsed": {"repr": "0:00:04.092902", "seconds": 4.092902}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 491, "message": "Fetched 5 positions", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 29644, "name": "MainProcess"}, "thread": {"id": 29140, "name": "MainThread"}, "time": {"repr": "2025-08-21 22:05:08.336674+05:30", "timestamp": 1755794108.336674}}}
{"text": "2025-08-21 22:05:08.338 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for RELIANCE: unrealized=128194.76, today=128194.76\n", "record": {"elapsed": {"repr": "0:00:04.094885", "seconds": 4.094885}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for RELIANCE: unrealized=128194.76, today=128194.76", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 29644, "name": "MainProcess"}, "thread": {"id": 29140, "name": "MainThread"}, "time": {"repr": "2025-08-21 22:05:08.338657+05:30", "timestamp": 1755794108.338657}}}
{"text": "2025-08-21 22:05:08.341 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for TCS: unrealized=-49372.67, today=-49372.67\n", "record": {"elapsed": {"repr": "0:00:04.097958", "seconds": 4.097958}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for TCS: unrealized=-49372.67, today=-49372.67", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 29644, "name": "MainProcess"}, "thread": {"id": 29140, "name": "MainThread"}, "time": {"repr": "2025-08-21 22:05:08.341730+05:30", "timestamp": 1755794108.34173}}}
{"text": "2025-08-21 22:05:08.346 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for HDFC: unrealized=1683456.43, today=1683456.43\n", "record": {"elapsed": {"repr": "0:00:04.102627", "seconds": 4.102627}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for HDFC: unrealized=1683456.43, today=1683456.43", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 29644, "name": "MainProcess"}, "thread": {"id": 29140, "name": "MainThread"}, "time": {"repr": "2025-08-21 22:05:08.346399+05:30", "timestamp": 1755794108.346399}}}
{"text": "2025-08-21 22:05:08.347 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for INFY: unrealized=1499262.48, today=1499262.48\n", "record": {"elapsed": {"repr": "0:00:04.104028", "seconds": 4.104028}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for INFY: unrealized=1499262.48, today=1499262.48", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 29644, "name": "MainProcess"}, "thread": {"id": 29140, "name": "MainThread"}, "time": {"repr": "2025-08-21 22:05:08.347800+05:30", "timestamp": 1755794108.3478}}}
{"text": "2025-08-21 22:05:08.350 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for ICICIBANK: unrealized=-1327098.43, today=-1327098.43\n", "record": {"elapsed": {"repr": "0:00:04.106309", "seconds": 4.106309}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for ICICIBANK: unrealized=-1327098.43, today=-1327098.43", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 29644, "name": "MainProcess"}, "thread": {"id": 29140, "name": "MainThread"}, "time": {"repr": "2025-08-21 22:05:08.350081+05:30", "timestamp": 1755794108.350081}}}
{"text": "2025-08-21 22:05:08.351 | INFO     | app.services.dhan_client:get_pnl:545 - Calculated totals - realized: 0.0, unrealized: 1934442.57, day: 1934442.57\n", "record": {"elapsed": {"repr": "0:00:04.107935", "seconds": 4.107935}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 545, "message": "Calculated totals - realized: 0.0, unrealized: 1934442.57, day: 1934442.57", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 29644, "name": "MainProcess"}, "thread": {"id": 29140, "name": "MainThread"}, "time": {"repr": "2025-08-21 22:05:08.351707+05:30", "timestamp": 1755794108.351707}}}
{"text": "2025-08-21 22:05:08.355 | DEBUG    | app.services.dhan_client:get_pnl:554 - PnL consistency check passed: drift=‚Çπ0.00\n", "record": {"elapsed": {"repr": "0:00:04.111744", "seconds": 4.111744}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 554, "message": "PnL consistency check passed: drift=‚Çπ0.00", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 29644, "name": "MainProcess"}, "thread": {"id": 29140, "name": "MainThread"}, "time": {"repr": "2025-08-21 22:05:08.355516+05:30", "timestamp": 1755794108.355516}}}
{"text": "2025-08-21 22:05:08.357 | DEBUG    | app.services.dhan_client:get_pnl:558 - Creating PnLTotals...\n", "record": {"elapsed": {"repr": "0:00:04.113531", "seconds": 4.113531}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 558, "message": "Creating PnLTotals...", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 29644, "name": "MainProcess"}, "thread": {"id": 29140, "name": "MainThread"}, "time": {"repr": "2025-08-21 22:05:08.357303+05:30", "timestamp": 1755794108.357303}}}
{"text": "2025-08-21 22:05:08.358 | DEBUG    | app.services.dhan_client:get_pnl:565 - PnLTotals created successfully\n", "record": {"elapsed": {"repr": "0:00:04.115167", "seconds": 4.115167}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 565, "message": "PnLTotals created successfully", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 29644, "name": "MainProcess"}, "thread": {"id": 29140, "name": "MainThread"}, "time": {"repr": "2025-08-21 22:05:08.358939+05:30", "timestamp": 1755794108.358939}}}
{"text": "2025-08-21 22:05:08.361 | DEBUG    | app.services.dhan_client:get_pnl:574 - Creating PnL model...\n", "record": {"elapsed": {"repr": "0:00:04.117632", "seconds": 4.117632}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 574, "message": "Creating PnL model...", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 29644, "name": "MainProcess"}, "thread": {"id": 29140, "name": "MainThread"}, "time": {"repr": "2025-08-21 22:05:08.361404+05:30", "timestamp": 1755794108.361404}}}
{"text": "2025-08-21 22:05:08.363 | DEBUG    | app.services.dhan_client:get_pnl:575 - Model fields: totals=<class 'app.models.schemas.PnLTotals'>, perSymbol=5, updated_at=2025-08-21 22:05:08.338361+05:30, trading_day=2025-08-21\n", "record": {"elapsed": {"repr": "0:00:04.119718", "seconds": 4.119718}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 575, "message": "Model fields: totals=<class 'app.models.schemas.PnLTotals'>, perSymbol=5, updated_at=2025-08-21 22:05:08.338361+05:30, trading_day=2025-08-21", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 29644, "name": "MainProcess"}, "thread": {"id": 29140, "name": "MainThread"}, "time": {"repr": "2025-08-21 22:05:08.363490+05:30", "timestamp": 1755794108.36349}}}
{"text": "2025-08-21 22:05:08.368 | DEBUG    | app.services.dhan_client:get_pnl:584 - Created PnL model: totals=PnLTotals(realized=0.0, unrealized=1934442.57, day=1934442.57, currency='INR') per_symbol=[PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1596, avg=105.2, ltp=185.52, unrealized=128194.76, today_pnl=128194.76), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=895, avg=965.72, ltp=1020.88, unrealized=-49372.67, today_pnl=-49372.67), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=1697, avg=987.4, ltp=1979.42, unrealized=1683456.43, today_pnl=1683456.43), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=1638, avg=1011.79, ltp=96.49, unrealized=1499262.48, today_pnl=1499262.48), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=1535, avg=1230.09, ltp=365.53, unrealized=-1327098.43, today_pnl=-1327098.43)] updated_at=datetime.datetime(2025, 8, 21, 22, 5, 8, 338361, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))) trading_day='2025-08-21'\n", "record": {"elapsed": {"repr": "0:00:04.124293", "seconds": 4.124293}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 584, "message": "Created PnL model: totals=PnLTotals(realized=0.0, unrealized=1934442.57, day=1934442.57, currency='INR') per_symbol=[PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1596, avg=105.2, ltp=185.52, unrealized=128194.76, today_pnl=128194.76), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=895, avg=965.72, ltp=1020.88, unrealized=-49372.67, today_pnl=-49372.67), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=1697, avg=987.4, ltp=1979.42, unrealized=1683456.43, today_pnl=1683456.43), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=1638, avg=1011.79, ltp=96.49, unrealized=1499262.48, today_pnl=1499262.48), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=1535, avg=1230.09, ltp=365.53, unrealized=-1327098.43, today_pnl=-1327098.43)] updated_at=datetime.datetime(2025, 8, 21, 22, 5, 8, 338361, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))) trading_day='2025-08-21'", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 29644, "name": "MainProcess"}, "thread": {"id": 29140, "name": "MainThread"}, "time": {"repr": "2025-08-21 22:05:08.368065+05:30", "timestamp": 1755794108.368065}}}
{"text": "2025-08-21 22:05:08.374 | DEBUG    | app.services.dhan_client:get_pnl:585 - PnL model fields: {'totals': PnLTotals(realized=0.0, unrealized=1934442.57, day=1934442.57, currency='INR'), 'per_symbol': [PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1596, avg=105.2, ltp=185.52, unrealized=128194.76, today_pnl=128194.76), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=895, avg=965.72, ltp=1020.88, unrealized=-49372.67, today_pnl=-49372.67), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=1697, avg=987.4, ltp=1979.42, unrealized=1683456.43, today_pnl=1683456.43), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=1638, avg=1011.79, ltp=96.49, unrealized=1499262.48, today_pnl=1499262.48), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=1535, avg=1230.09, ltp=365.53, unrealized=-1327098.43, today_pnl=-1327098.43)], 'updated_at': datetime.datetime(2025, 8, 21, 22, 5, 8, 338361, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))), 'trading_day': '2025-08-21'}\n", "record": {"elapsed": {"repr": "0:00:04.130799", "seconds": 4.130799}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 585, "message": "PnL model fields: {'totals': PnLTotals(realized=0.0, unrealized=1934442.57, day=1934442.57, currency='INR'), 'per_symbol': [PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1596, avg=105.2, ltp=185.52, unrealized=128194.76, today_pnl=128194.76), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=895, avg=965.72, ltp=1020.88, unrealized=-49372.67, today_pnl=-49372.67), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=1697, avg=987.4, ltp=1979.42, unrealized=1683456.43, today_pnl=1683456.43), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=1638, avg=1011.79, ltp=96.49, unrealized=1499262.48, today_pnl=1499262.48), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=1535, avg=1230.09, ltp=365.53, unrealized=-1327098.43, today_pnl=-1327098.43)], 'updated_at': datetime.datetime(2025, 8, 21, 22, 5, 8, 338361, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))), 'trading_day': '2025-08-21'}", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 29644, "name": "MainProcess"}, "thread": {"id": 29140, "name": "MainThread"}, "time": {"repr": "2025-08-21 22:05:08.374571+05:30", "timestamp": 1755794108.374571}}}
{"text": "2025-08-21 22:05:08.377 | INFO     | app.services.dhan_client:get_pnl:587 - P&L calculation completed successfully: 5 symbols, unrealized=‚Çπ1934442.57\n", "record": {"elapsed": {"repr": "0:00:04.133241", "seconds": 4.133241}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 587, "message": "P&L calculation completed successfully: 5 symbols, unrealized=‚Çπ1934442.57", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 29644, "name": "MainProcess"}, "thread": {"id": 29140, "name": "MainThread"}, "time": {"repr": "2025-08-21 22:05:08.377013+05:30", "timestamp": 1755794108.377013}}}
{"text": "2025-08-21 22:05:08.381 | DEBUG    | app.ws.live:emit_delta:408 - Emitted pnl delta: seq=5\n", "record": {"elapsed": {"repr": "0:00:04.137302", "seconds": 4.137302}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "emit_delta", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 408, "message": "Emitted pnl delta: seq=5", "module": "live", "name": "app.ws.live", "process": {"id": 29644, "name": "MainProcess"}, "thread": {"id": 29140, "name": "MainThread"}, "time": {"repr": "2025-08-21 22:05:08.381074+05:30", "timestamp": 1755794108.381074}}}
{"text": "2025-08-21 22:05:08.534 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:04.290952", "seconds": 4.290952}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 29644, "name": "MainProcess"}, "thread": {"id": 15452, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 22:05:08.534724+05:30", "timestamp": 1755794108.534724}}}
{"text": "2025-08-21 22:05:08.537 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:04.293351", "seconds": 4.293351}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 29644, "name": "MainProcess"}, "thread": {"id": 15452, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 22:05:08.537123+05:30", "timestamp": 1755794108.537123}}}
{"text": "2025-08-21 22:05:08.539 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:04.295825", "seconds": 4.295825}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 29644, "name": "MainProcess"}, "thread": {"id": 15452, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 22:05:08.539597+05:30", "timestamp": 1755794108.539597}}}
{"text": "2025-08-21 22:05:08.542 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:04.298575", "seconds": 4.298575}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 29644, "name": "MainProcess"}, "thread": {"id": 15452, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 22:05:08.542347+05:30", "timestamp": 1755794108.542347}}}
{"text": "2025-08-21 22:05:08.546 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:04.302345", "seconds": 4.302345}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 29644, "name": "MainProcess"}, "thread": {"id": 15452, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 22:05:08.546117+05:30", "timestamp": 1755794108.546117}}}
{"text": "2025-08-21 22:05:08.548 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:04.304898", "seconds": 4.304898}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 29644, "name": "MainProcess"}, "thread": {"id": 15452, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 22:05:08.548670+05:30", "timestamp": 1755794108.54867}}}
{"text": "2025-08-21 22:05:08.551 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:04.307430", "seconds": 4.30743}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 29644, "name": "MainProcess"}, "thread": {"id": 15452, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 22:05:08.551202+05:30", "timestamp": 1755794108.551202}}}
{"text": "2025-08-21 22:05:08.553 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:04.309597", "seconds": 4.309597}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 29644, "name": "MainProcess"}, "thread": {"id": 15452, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 22:05:08.553369+05:30", "timestamp": 1755794108.553369}}}
{"text": "2025-08-21 22:05:08.556 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:04.312441", "seconds": 4.312441}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 29644, "name": "MainProcess"}, "thread": {"id": 15452, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 22:05:08.556213+05:30", "timestamp": 1755794108.556213}}}
{"text": "2025-08-21 22:05:08.559 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:04.315626", "seconds": 4.315626}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 29644, "name": "MainProcess"}, "thread": {"id": 15452, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 22:05:08.559398+05:30", "timestamp": 1755794108.559398}}}
{"text": "2025-08-21 22:05:09.903 | INFO     | app.services.dhan_client:get_pnl:489 - Starting accurate P&L calculation\n", "record": {"elapsed": {"repr": "0:00:05.659621", "seconds": 5.659621}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 489, "message": "Starting accurate P&L calculation", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 29644, "name": "MainProcess"}, "thread": {"id": 29140, "name": "MainThread"}, "time": {"repr": "2025-08-21 22:05:09.903393+05:30", "timestamp": 1755794109.903393}}}
{"text": "2025-08-21 22:05:09.904 | INFO     | app.services.dhan_client:get_pnl:491 - Fetched 5 positions\n", "record": {"elapsed": {"repr": "0:00:05.660530", "seconds": 5.66053}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 491, "message": "Fetched 5 positions", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 29644, "name": "MainProcess"}, "thread": {"id": 29140, "name": "MainThread"}, "time": {"repr": "2025-08-21 22:05:09.904302+05:30", "timestamp": 1755794109.904302}}}
{"text": "2025-08-21 22:05:09.905 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for RELIANCE: unrealized=132475.28, today=132475.28\n", "record": {"elapsed": {"repr": "0:00:05.661315", "seconds": 5.661315}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for RELIANCE: unrealized=132475.28, today=132475.28", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 29644, "name": "MainProcess"}, "thread": {"id": 29140, "name": "MainThread"}, "time": {"repr": "2025-08-21 22:05:09.905087+05:30", "timestamp": 1755794109.905087}}}
{"text": "2025-08-21 22:05:09.905 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for TCS: unrealized=-51025.8, today=-51025.8\n", "record": {"elapsed": {"repr": "0:00:05.662100", "seconds": 5.6621}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for TCS: unrealized=-51025.8, today=-51025.8", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 29644, "name": "MainProcess"}, "thread": {"id": 29140, "name": "MainThread"}, "time": {"repr": "2025-08-21 22:05:09.905872+05:30", "timestamp": 1755794109.905872}}}
{"text": "2025-08-21 22:05:09.906 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for HDFC: unrealized=1688476.21, today=1688476.21\n", "record": {"elapsed": {"repr": "0:00:05.663067", "seconds": 5.663067}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for HDFC: unrealized=1688476.21, today=1688476.21", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 29644, "name": "MainProcess"}, "thread": {"id": 29140, "name": "MainThread"}, "time": {"repr": "2025-08-21 22:05:09.906839+05:30", "timestamp": 1755794109.906839}}}
{"text": "2025-08-21 22:05:09.907 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for INFY: unrealized=1496545.17, today=1496545.17\n", "record": {"elapsed": {"repr": "0:00:05.663827", "seconds": 5.663827}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for INFY: unrealized=1496545.17, today=1496545.17", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 29644, "name": "MainProcess"}, "thread": {"id": 29140, "name": "MainThread"}, "time": {"repr": "2025-08-21 22:05:09.907599+05:30", "timestamp": 1755794109.907599}}}
{"text": "2025-08-21 22:05:09.908 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for ICICIBANK: unrealized=-1324106.86, today=-1324106.86\n", "record": {"elapsed": {"repr": "0:00:05.664591", "seconds": 5.664591}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for ICICIBANK: unrealized=-1324106.86, today=-1324106.86", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 29644, "name": "MainProcess"}, "thread": {"id": 29140, "name": "MainThread"}, "time": {"repr": "2025-08-21 22:05:09.908363+05:30", "timestamp": 1755794109.908363}}}
{"text": "2025-08-21 22:05:09.909 | INFO     | app.services.dhan_client:get_pnl:545 - Calculated totals - realized: 0.0, unrealized: 1942364.0, day: 1942364.0\n", "record": {"elapsed": {"repr": "0:00:05.665235", "seconds": 5.665235}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 545, "message": "Calculated totals - realized: 0.0, unrealized: 1942364.0, day: 1942364.0", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 29644, "name": "MainProcess"}, "thread": {"id": 29140, "name": "MainThread"}, "time": {"repr": "2025-08-21 22:05:09.909007+05:30", "timestamp": 1755794109.909007}}}
{"text": "2025-08-21 22:05:09.909 | DEBUG    | app.services.dhan_client:get_pnl:554 - PnL consistency check passed: drift=‚Çπ0.00\n", "record": {"elapsed": {"repr": "0:00:05.665952", "seconds": 5.665952}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 554, "message": "PnL consistency check passed: drift=‚Çπ0.00", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 29644, "name": "MainProcess"}, "thread": {"id": 29140, "name": "MainThread"}, "time": {"repr": "2025-08-21 22:05:09.909724+05:30", "timestamp": 1755794109.909724}}}
{"text": "2025-08-21 22:05:09.910 | DEBUG    | app.services.dhan_client:get_pnl:558 - Creating PnLTotals...\n", "record": {"elapsed": {"repr": "0:00:05.666710", "seconds": 5.66671}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 558, "message": "Creating PnLTotals...", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 29644, "name": "MainProcess"}, "thread": {"id": 29140, "name": "MainThread"}, "time": {"repr": "2025-08-21 22:05:09.910482+05:30", "timestamp": 1755794109.910482}}}
{"text": "2025-08-21 22:05:09.911 | DEBUG    | app.services.dhan_client:get_pnl:565 - PnLTotals created successfully\n", "record": {"elapsed": {"repr": "0:00:05.667455", "seconds": 5.667455}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 565, "message": "PnLTotals created successfully", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 29644, "name": "MainProcess"}, "thread": {"id": 29140, "name": "MainThread"}, "time": {"repr": "2025-08-21 22:05:09.911227+05:30", "timestamp": 1755794109.911227}}}
{"text": "2025-08-21 22:05:09.911 | DEBUG    | app.services.dhan_client:get_pnl:574 - Creating PnL model...\n", "record": {"elapsed": {"repr": "0:00:05.668199", "seconds": 5.668199}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 574, "message": "Creating PnL model...", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 29644, "name": "MainProcess"}, "thread": {"id": 29140, "name": "MainThread"}, "time": {"repr": "2025-08-21 22:05:09.911971+05:30", "timestamp": 1755794109.911971}}}
{"text": "2025-08-21 22:05:09.912 | DEBUG    | app.services.dhan_client:get_pnl:575 - Model fields: totals=<class 'app.models.schemas.PnLTotals'>, perSymbol=5, updated_at=2025-08-21 22:05:09.904985+05:30, trading_day=2025-08-21\n", "record": {"elapsed": {"repr": "0:00:05.668955", "seconds": 5.668955}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 575, "message": "Model fields: totals=<class 'app.models.schemas.PnLTotals'>, perSymbol=5, updated_at=2025-08-21 22:05:09.904985+05:30, trading_day=2025-08-21", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 29644, "name": "MainProcess"}, "thread": {"id": 29140, "name": "MainThread"}, "time": {"repr": "2025-08-21 22:05:09.912727+05:30", "timestamp": 1755794109.912727}}}
{"text": "2025-08-21 22:05:09.913 | DEBUG    | app.services.dhan_client:get_pnl:584 - Created PnL model: totals=PnLTotals(realized=0.0, unrealized=1942364.0, day=1942364.0, currency='INR') per_symbol=[PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1596, avg=105.2, ltp=188.2, unrealized=132475.28, today_pnl=132475.28), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=895, avg=965.72, ltp=1022.73, unrealized=-51025.8, today_pnl=-51025.8), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=1697, avg=987.4, ltp=1982.38, unrealized=1688476.21, today_pnl=1688476.21), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=1638, avg=1011.79, ltp=98.15, unrealized=1496545.17, today_pnl=1496545.17), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=1535, avg=1230.09, ltp=367.48, unrealized=-1324106.86, today_pnl=-1324106.86)] updated_at=datetime.datetime(2025, 8, 21, 22, 5, 9, 904985, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))) trading_day='2025-08-21'\n", "record": {"elapsed": {"repr": "0:00:05.669891", "seconds": 5.669891}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 584, "message": "Created PnL model: totals=PnLTotals(realized=0.0, unrealized=1942364.0, day=1942364.0, currency='INR') per_symbol=[PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1596, avg=105.2, ltp=188.2, unrealized=132475.28, today_pnl=132475.28), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=895, avg=965.72, ltp=1022.73, unrealized=-51025.8, today_pnl=-51025.8), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=1697, avg=987.4, ltp=1982.38, unrealized=1688476.21, today_pnl=1688476.21), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=1638, avg=1011.79, ltp=98.15, unrealized=1496545.17, today_pnl=1496545.17), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=1535, avg=1230.09, ltp=367.48, unrealized=-1324106.86, today_pnl=-1324106.86)] updated_at=datetime.datetime(2025, 8, 21, 22, 5, 9, 904985, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))) trading_day='2025-08-21'", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 29644, "name": "MainProcess"}, "thread": {"id": 29140, "name": "MainThread"}, "time": {"repr": "2025-08-21 22:05:09.913663+05:30", "timestamp": 1755794109.913663}}}
{"text": "2025-08-21 22:05:09.915 | DEBUG    | app.services.dhan_client:get_pnl:585 - PnL model fields: {'totals': PnLTotals(realized=0.0, unrealized=1942364.0, day=1942364.0, currency='INR'), 'per_symbol': [PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1596, avg=105.2, ltp=188.2, unrealized=132475.28, today_pnl=132475.28), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=895, avg=965.72, ltp=1022.73, unrealized=-51025.8, today_pnl=-51025.8), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=1697, avg=987.4, ltp=1982.38, unrealized=1688476.21, today_pnl=1688476.21), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=1638, avg=1011.79, ltp=98.15, unrealized=1496545.17, today_pnl=1496545.17), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=1535, avg=1230.09, ltp=367.48, unrealized=-1324106.86, today_pnl=-1324106.86)], 'updated_at': datetime.datetime(2025, 8, 21, 22, 5, 9, 904985, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))), 'trading_day': '2025-08-21'}\n", "record": {"elapsed": {"repr": "0:00:05.672109", "seconds": 5.672109}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 585, "message": "PnL model fields: {'totals': PnLTotals(realized=0.0, unrealized=1942364.0, day=1942364.0, currency='INR'), 'per_symbol': [PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1596, avg=105.2, ltp=188.2, unrealized=132475.28, today_pnl=132475.28), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=895, avg=965.72, ltp=1022.73, unrealized=-51025.8, today_pnl=-51025.8), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=1697, avg=987.4, ltp=1982.38, unrealized=1688476.21, today_pnl=1688476.21), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=1638, avg=1011.79, ltp=98.15, unrealized=1496545.17, today_pnl=1496545.17), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=1535, avg=1230.09, ltp=367.48, unrealized=-1324106.86, today_pnl=-1324106.86)], 'updated_at': datetime.datetime(2025, 8, 21, 22, 5, 9, 904985, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))), 'trading_day': '2025-08-21'}", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 29644, "name": "MainProcess"}, "thread": {"id": 29140, "name": "MainThread"}, "time": {"repr": "2025-08-21 22:05:09.915881+05:30", "timestamp": 1755794109.915881}}}
{"text": "2025-08-21 22:05:09.916 | INFO     | app.services.dhan_client:get_pnl:587 - P&L calculation completed successfully: 5 symbols, unrealized=‚Çπ1942364.00\n", "record": {"elapsed": {"repr": "0:00:05.673095", "seconds": 5.673095}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 587, "message": "P&L calculation completed successfully: 5 symbols, unrealized=‚Çπ1942364.00", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 29644, "name": "MainProcess"}, "thread": {"id": 29140, "name": "MainThread"}, "time": {"repr": "2025-08-21 22:05:09.916867+05:30", "timestamp": 1755794109.916867}}}
{"text": "2025-08-21 22:05:09.917 | DEBUG    | app.ws.live:emit_delta:408 - Emitted pnl delta: seq=6\n", "record": {"elapsed": {"repr": "0:00:05.674222", "seconds": 5.674222}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "emit_delta", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 408, "message": "Emitted pnl delta: seq=6", "module": "live", "name": "app.ws.live", "process": {"id": 29644, "name": "MainProcess"}, "thread": {"id": 29140, "name": "MainThread"}, "time": {"repr": "2025-08-21 22:05:09.917994+05:30", "timestamp": 1755794109.917994}}}
{"text": "2025-08-21 22:05:10.242 | DEBUG    | app.ws.live:emit_delta:408 - Emitted positions delta: seq=7\n", "record": {"elapsed": {"repr": "0:00:05.999005", "seconds": 5.999005}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "emit_delta", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 408, "message": "Emitted positions delta: seq=7", "module": "live", "name": "app.ws.live", "process": {"id": 29644, "name": "MainProcess"}, "thread": {"id": 29140, "name": "MainThread"}, "time": {"repr": "2025-08-21 22:05:10.242777+05:30", "timestamp": 1755794110.242777}}}
{"text": "2025-08-21 22:05:10.562 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:06.318308", "seconds": 6.318308}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 29644, "name": "MainProcess"}, "thread": {"id": 15452, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 22:05:10.562080+05:30", "timestamp": 1755794110.56208}}}
{"text": "2025-08-21 22:05:10.562 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:06.319141", "seconds": 6.319141}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 29644, "name": "MainProcess"}, "thread": {"id": 15452, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 22:05:10.562913+05:30", "timestamp": 1755794110.562913}}}
{"text": "2025-08-21 22:05:10.563 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:06.319993", "seconds": 6.319993}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 29644, "name": "MainProcess"}, "thread": {"id": 15452, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 22:05:10.563765+05:30", "timestamp": 1755794110.563765}}}
{"text": "2025-08-21 22:05:10.564 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:06.320739", "seconds": 6.320739}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 29644, "name": "MainProcess"}, "thread": {"id": 15452, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 22:05:10.564511+05:30", "timestamp": 1755794110.564511}}}
{"text": "2025-08-21 22:05:10.565 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:06.321372", "seconds": 6.321372}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 29644, "name": "MainProcess"}, "thread": {"id": 15452, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 22:05:10.565144+05:30", "timestamp": 1755794110.565144}}}
{"text": "2025-08-21 22:05:10.565 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:06.322135", "seconds": 6.322135}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 29644, "name": "MainProcess"}, "thread": {"id": 15452, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 22:05:10.565907+05:30", "timestamp": 1755794110.565907}}}
{"text": "2025-08-21 22:05:10.566 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:06.322847", "seconds": 6.322847}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 29644, "name": "MainProcess"}, "thread": {"id": 15452, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 22:05:10.566619+05:30", "timestamp": 1755794110.566619}}}
{"text": "2025-08-21 22:05:10.567 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:06.323641", "seconds": 6.323641}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 29644, "name": "MainProcess"}, "thread": {"id": 15452, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 22:05:10.567413+05:30", "timestamp": 1755794110.567413}}}
{"text": "2025-08-21 22:05:10.568 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:06.324421", "seconds": 6.324421}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 29644, "name": "MainProcess"}, "thread": {"id": 15452, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 22:05:10.568193+05:30", "timestamp": 1755794110.568193}}}
{"text": "2025-08-21 22:05:10.569 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:06.325493", "seconds": 6.325493}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 29644, "name": "MainProcess"}, "thread": {"id": 15452, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 22:05:10.569265+05:30", "timestamp": 1755794110.569265}}}
{"text": "2025-08-21 22:05:11.709 | INFO     | app.services.dhan_client:get_pnl:489 - Starting accurate P&L calculation\n", "record": {"elapsed": {"repr": "0:00:07.466211", "seconds": 7.466211}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 489, "message": "Starting accurate P&L calculation", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 29644, "name": "MainProcess"}, "thread": {"id": 29140, "name": "MainThread"}, "time": {"repr": "2025-08-21 22:05:11.709983+05:30", "timestamp": 1755794111.709983}}}
{"text": "2025-08-21 22:05:11.713 | INFO     | app.services.dhan_client:get_pnl:491 - Fetched 5 positions\n", "record": {"elapsed": {"repr": "0:00:07.470172", "seconds": 7.470172}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 491, "message": "Fetched 5 positions", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 29644, "name": "MainProcess"}, "thread": {"id": 29140, "name": "MainThread"}, "time": {"repr": "2025-08-21 22:05:11.713944+05:30", "timestamp": 1755794111.713944}}}
{"text": "2025-08-21 22:05:11.716 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for RELIANCE: unrealized=129845.02, today=129845.02\n", "record": {"elapsed": {"repr": "0:00:07.473129", "seconds": 7.473129}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for RELIANCE: unrealized=129845.02, today=129845.02", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 29644, "name": "MainProcess"}, "thread": {"id": 29140, "name": "MainThread"}, "time": {"repr": "2025-08-21 22:05:11.716901+05:30", "timestamp": 1755794111.716901}}}
{"text": "2025-08-21 22:05:11.720 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for TCS: unrealized=-50731.44, today=-50731.44\n", "record": {"elapsed": {"repr": "0:00:07.476348", "seconds": 7.476348}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for TCS: unrealized=-50731.44, today=-50731.44", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 29644, "name": "MainProcess"}, "thread": {"id": 29140, "name": "MainThread"}, "time": {"repr": "2025-08-21 22:05:11.720120+05:30", "timestamp": 1755794111.72012}}}
{"text": "2025-08-21 22:05:11.722 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for HDFC: unrealized=1719168.78, today=1719168.78\n", "record": {"elapsed": {"repr": "0:00:07.478583", "seconds": 7.478583}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for HDFC: unrealized=1719168.78, today=1719168.78", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 29644, "name": "MainProcess"}, "thread": {"id": 29140, "name": "MainThread"}, "time": {"repr": "2025-08-21 22:05:11.722355+05:30", "timestamp": 1755794111.722355}}}
{"text": "2025-08-21 22:05:11.724 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for INFY: unrealized=1499132.16, today=1499132.16\n", "record": {"elapsed": {"repr": "0:00:07.480681", "seconds": 7.480681}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for INFY: unrealized=1499132.16, today=1499132.16", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 29644, "name": "MainProcess"}, "thread": {"id": 29140, "name": "MainThread"}, "time": {"repr": "2025-08-21 22:05:11.724453+05:30", "timestamp": 1755794111.724453}}}
{"text": "2025-08-21 22:05:11.727 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for ICICIBANK: unrealized=-1330429.89, today=-1330429.89\n", "record": {"elapsed": {"repr": "0:00:07.483316", "seconds": 7.483316}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for ICICIBANK: unrealized=-1330429.89, today=-1330429.89", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 29644, "name": "MainProcess"}, "thread": {"id": 29140, "name": "MainThread"}, "time": {"repr": "2025-08-21 22:05:11.727088+05:30", "timestamp": 1755794111.727088}}}
{"text": "2025-08-21 22:05:11.729 | INFO     | app.services.dhan_client:get_pnl:545 - Calculated totals - realized: 0.0, unrealized: 1966984.63, day: 1966984.63\n", "record": {"elapsed": {"repr": "0:00:07.485646", "seconds": 7.485646}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 545, "message": "Calculated totals - realized: 0.0, unrealized: 1966984.63, day: 1966984.63", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 29644, "name": "MainProcess"}, "thread": {"id": 29140, "name": "MainThread"}, "time": {"repr": "2025-08-21 22:05:11.729418+05:30", "timestamp": 1755794111.729418}}}
{"text": "2025-08-21 22:05:11.731 | DEBUG    | app.services.dhan_client:get_pnl:554 - PnL consistency check passed: drift=‚Çπ0.00\n", "record": {"elapsed": {"repr": "0:00:07.487895", "seconds": 7.487895}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 554, "message": "PnL consistency check passed: drift=‚Çπ0.00", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 29644, "name": "MainProcess"}, "thread": {"id": 29140, "name": "MainThread"}, "time": {"repr": "2025-08-21 22:05:11.731667+05:30", "timestamp": 1755794111.731667}}}
{"text": "2025-08-21 22:05:11.733 | DEBUG    | app.services.dhan_client:get_pnl:558 - Creating PnLTotals...\n", "record": {"elapsed": {"repr": "0:00:07.489930", "seconds": 7.48993}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 558, "message": "Creating PnLTotals...", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 29644, "name": "MainProcess"}, "thread": {"id": 29140, "name": "MainThread"}, "time": {"repr": "2025-08-21 22:05:11.733702+05:30", "timestamp": 1755794111.733702}}}
{"text": "2025-08-21 22:05:11.736 | DEBUG    | app.services.dhan_client:get_pnl:565 - PnLTotals created successfully\n", "record": {"elapsed": {"repr": "0:00:07.492545", "seconds": 7.492545}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 565, "message": "PnLTotals created successfully", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 29644, "name": "MainProcess"}, "thread": {"id": 29140, "name": "MainThread"}, "time": {"repr": "2025-08-21 22:05:11.736317+05:30", "timestamp": 1755794111.736317}}}
{"text": "2025-08-21 22:05:11.739 | DEBUG    | app.services.dhan_client:get_pnl:574 - Creating PnL model...\n", "record": {"elapsed": {"repr": "0:00:07.495863", "seconds": 7.495863}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 574, "message": "Creating PnL model...", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 29644, "name": "MainProcess"}, "thread": {"id": 29140, "name": "MainThread"}, "time": {"repr": "2025-08-21 22:05:11.739635+05:30", "timestamp": 1755794111.739635}}}
{"text": "2025-08-21 22:05:11.744 | DEBUG    | app.services.dhan_client:get_pnl:575 - Model fields: totals=<class 'app.models.schemas.PnLTotals'>, perSymbol=5, updated_at=2025-08-21 22:05:11.716642+05:30, trading_day=2025-08-21\n", "record": {"elapsed": {"repr": "0:00:07.500641", "seconds": 7.500641}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 575, "message": "Model fields: totals=<class 'app.models.schemas.PnLTotals'>, perSymbol=5, updated_at=2025-08-21 22:05:11.716642+05:30, trading_day=2025-08-21", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 29644, "name": "MainProcess"}, "thread": {"id": 29140, "name": "MainThread"}, "time": {"repr": "2025-08-21 22:05:11.744413+05:30", "timestamp": 1755794111.744413}}}
{"text": "2025-08-21 22:05:11.751 | DEBUG    | app.services.dhan_client:get_pnl:584 - Created PnL model: totals=PnLTotals(realized=0.0, unrealized=1966984.63, day=1966984.63, currency='INR') per_symbol=[PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1596, avg=105.2, ltp=186.56, unrealized=129845.02, today_pnl=129845.02), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=895, avg=965.72, ltp=1022.4, unrealized=-50731.44, today_pnl=-50731.44), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=1697, avg=987.4, ltp=2000.46, unrealized=1719168.78, today_pnl=1719168.78), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=1638, avg=1011.79, ltp=96.57, unrealized=1499132.16, today_pnl=1499132.16), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=1535, avg=1230.09, ltp=363.36, unrealized=-1330429.89, today_pnl=-1330429.89)] updated_at=datetime.datetime(2025, 8, 21, 22, 5, 11, 716642, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))) trading_day='2025-08-21'\n", "record": {"elapsed": {"repr": "0:00:07.507602", "seconds": 7.507602}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 584, "message": "Created PnL model: totals=PnLTotals(realized=0.0, unrealized=1966984.63, day=1966984.63, currency='INR') per_symbol=[PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1596, avg=105.2, ltp=186.56, unrealized=129845.02, today_pnl=129845.02), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=895, avg=965.72, ltp=1022.4, unrealized=-50731.44, today_pnl=-50731.44), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=1697, avg=987.4, ltp=2000.46, unrealized=1719168.78, today_pnl=1719168.78), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=1638, avg=1011.79, ltp=96.57, unrealized=1499132.16, today_pnl=1499132.16), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=1535, avg=1230.09, ltp=363.36, unrealized=-1330429.89, today_pnl=-1330429.89)] updated_at=datetime.datetime(2025, 8, 21, 22, 5, 11, 716642, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))) trading_day='2025-08-21'", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 29644, "name": "MainProcess"}, "thread": {"id": 29140, "name": "MainThread"}, "time": {"repr": "2025-08-21 22:05:11.751374+05:30", "timestamp": 1755794111.751374}}}
{"text": "2025-08-21 22:05:11.757 | DEBUG    | app.services.dhan_client:get_pnl:585 - PnL model fields: {'totals': PnLTotals(realized=0.0, unrealized=1966984.63, day=1966984.63, currency='INR'), 'per_symbol': [PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1596, avg=105.2, ltp=186.56, unrealized=129845.02, today_pnl=129845.02), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=895, avg=965.72, ltp=1022.4, unrealized=-50731.44, today_pnl=-50731.44), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=1697, avg=987.4, ltp=2000.46, unrealized=1719168.78, today_pnl=1719168.78), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=1638, avg=1011.79, ltp=96.57, unrealized=1499132.16, today_pnl=1499132.16), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=1535, avg=1230.09, ltp=363.36, unrealized=-1330429.89, today_pnl=-1330429.89)], 'updated_at': datetime.datetime(2025, 8, 21, 22, 5, 11, 716642, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))), 'trading_day': '2025-08-21'}\n", "record": {"elapsed": {"repr": "0:00:07.513244", "seconds": 7.513244}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 585, "message": "PnL model fields: {'totals': PnLTotals(realized=0.0, unrealized=1966984.63, day=1966984.63, currency='INR'), 'per_symbol': [PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1596, avg=105.2, ltp=186.56, unrealized=129845.02, today_pnl=129845.02), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=895, avg=965.72, ltp=1022.4, unrealized=-50731.44, today_pnl=-50731.44), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=1697, avg=987.4, ltp=2000.46, unrealized=1719168.78, today_pnl=1719168.78), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=1638, avg=1011.79, ltp=96.57, unrealized=1499132.16, today_pnl=1499132.16), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=1535, avg=1230.09, ltp=363.36, unrealized=-1330429.89, today_pnl=-1330429.89)], 'updated_at': datetime.datetime(2025, 8, 21, 22, 5, 11, 716642, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))), 'trading_day': '2025-08-21'}", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 29644, "name": "MainProcess"}, "thread": {"id": 29140, "name": "MainThread"}, "time": {"repr": "2025-08-21 22:05:11.757016+05:30", "timestamp": 1755794111.757016}}}
{"text": "2025-08-21 22:05:11.762 | INFO     | app.services.dhan_client:get_pnl:587 - P&L calculation completed successfully: 5 symbols, unrealized=‚Çπ1966984.63\n", "record": {"elapsed": {"repr": "0:00:07.518549", "seconds": 7.518549}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 587, "message": "P&L calculation completed successfully: 5 symbols, unrealized=‚Çπ1966984.63", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 29644, "name": "MainProcess"}, "thread": {"id": 29140, "name": "MainThread"}, "time": {"repr": "2025-08-21 22:05:11.762321+05:30", "timestamp": 1755794111.762321}}}
{"text": "2025-08-21 22:05:11.764 | DEBUG    | app.ws.live:emit_delta:408 - Emitted pnl delta: seq=8\n", "record": {"elapsed": {"repr": "0:00:07.520970", "seconds": 7.52097}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "emit_delta", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 408, "message": "Emitted pnl delta: seq=8", "module": "live", "name": "app.ws.live", "process": {"id": 29644, "name": "MainProcess"}, "thread": {"id": 29140, "name": "MainThread"}, "time": {"repr": "2025-08-21 22:05:11.764742+05:30", "timestamp": 1755794111.764742}}}
{"text": "2025-08-21 22:05:12.195 | DEBUG    | app.ws.live:emit_delta:408 - Emitted positions delta: seq=9\n", "record": {"elapsed": {"repr": "0:00:07.952205", "seconds": 7.952205}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "emit_delta", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 408, "message": "Emitted positions delta: seq=9", "module": "live", "name": "app.ws.live", "process": {"id": 29644, "name": "MainProcess"}, "thread": {"id": 29140, "name": "MainThread"}, "time": {"repr": "2025-08-21 22:05:12.195977+05:30", "timestamp": 1755794112.195977}}}
{"text": "2025-08-21 22:05:12.570 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:08.326671", "seconds": 8.326671}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 29644, "name": "MainProcess"}, "thread": {"id": 15452, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 22:05:12.570443+05:30", "timestamp": 1755794112.570443}}}
{"text": "2025-08-21 22:05:12.574 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:08.330616", "seconds": 8.330616}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 29644, "name": "MainProcess"}, "thread": {"id": 15452, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 22:05:12.574388+05:30", "timestamp": 1755794112.574388}}}
{"text": "2025-08-21 22:05:12.577 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:08.333351", "seconds": 8.333351}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 29644, "name": "MainProcess"}, "thread": {"id": 15452, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 22:05:12.577123+05:30", "timestamp": 1755794112.577123}}}
{"text": "2025-08-21 22:05:12.580 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:08.336416", "seconds": 8.336416}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 29644, "name": "MainProcess"}, "thread": {"id": 15452, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 22:05:12.580188+05:30", "timestamp": 1755794112.580188}}}
{"text": "2025-08-21 22:05:12.581 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:08.338202", "seconds": 8.338202}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 29644, "name": "MainProcess"}, "thread": {"id": 15452, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 22:05:12.581974+05:30", "timestamp": 1755794112.581974}}}
{"text": "2025-08-21 22:05:12.584 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:08.340539", "seconds": 8.340539}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 29644, "name": "MainProcess"}, "thread": {"id": 15452, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 22:05:12.584311+05:30", "timestamp": 1755794112.584311}}}
{"text": "2025-08-21 22:05:12.588 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:08.344923", "seconds": 8.344923}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 29644, "name": "MainProcess"}, "thread": {"id": 15452, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 22:05:12.588695+05:30", "timestamp": 1755794112.588695}}}
{"text": "2025-08-21 22:05:12.590 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:08.347014", "seconds": 8.347014}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 29644, "name": "MainProcess"}, "thread": {"id": 15452, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 22:05:12.590786+05:30", "timestamp": 1755794112.590786}}}
{"text": "2025-08-21 22:05:12.592 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:08.348866", "seconds": 8.348866}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 29644, "name": "MainProcess"}, "thread": {"id": 15452, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 22:05:12.592638+05:30", "timestamp": 1755794112.592638}}}
{"text": "2025-08-21 22:05:12.595 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:08.351532", "seconds": 8.351532}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 29644, "name": "MainProcess"}, "thread": {"id": 15452, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 22:05:12.595304+05:30", "timestamp": 1755794112.595304}}}
{"text": "2025-08-21 22:05:13.480 | INFO     | app.services.dhan_client:get_pnl:489 - Starting accurate P&L calculation\n", "record": {"elapsed": {"repr": "0:00:09.236321", "seconds": 9.236321}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 489, "message": "Starting accurate P&L calculation", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 29644, "name": "MainProcess"}, "thread": {"id": 29140, "name": "MainThread"}, "time": {"repr": "2025-08-21 22:05:13.480093+05:30", "timestamp": 1755794113.480093}}}
{"text": "2025-08-21 22:05:13.482 | INFO     | app.services.dhan_client:get_pnl:491 - Fetched 5 positions\n", "record": {"elapsed": {"repr": "0:00:09.239210", "seconds": 9.23921}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 491, "message": "Fetched 5 positions", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 29644, "name": "MainProcess"}, "thread": {"id": 29140, "name": "MainThread"}, "time": {"repr": "2025-08-21 22:05:13.482982+05:30", "timestamp": 1755794113.482982}}}
{"text": "2025-08-21 22:05:13.485 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for RELIANCE: unrealized=128788.43, today=128788.43\n", "record": {"elapsed": {"repr": "0:00:09.242086", "seconds": 9.242086}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for RELIANCE: unrealized=128788.43, today=128788.43", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 29644, "name": "MainProcess"}, "thread": {"id": 29140, "name": "MainThread"}, "time": {"repr": "2025-08-21 22:05:13.485858+05:30", "timestamp": 1755794113.485858}}}
{"text": "2025-08-21 22:05:13.489 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for TCS: unrealized=-39228.25, today=-39228.25\n", "record": {"elapsed": {"repr": "0:00:09.246070", "seconds": 9.24607}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for TCS: unrealized=-39228.25, today=-39228.25", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 29644, "name": "MainProcess"}, "thread": {"id": 29140, "name": "MainThread"}, "time": {"repr": "2025-08-21 22:05:13.489842+05:30", "timestamp": 1755794113.489842}}}
{"text": "2025-08-21 22:05:13.492 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for HDFC: unrealized=1679585.52, today=1679585.52\n", "record": {"elapsed": {"repr": "0:00:09.248670", "seconds": 9.24867}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for HDFC: unrealized=1679585.52, today=1679585.52", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 29644, "name": "MainProcess"}, "thread": {"id": 29140, "name": "MainThread"}, "time": {"repr": "2025-08-21 22:05:13.492442+05:30", "timestamp": 1755794113.492442}}}
{"text": "2025-08-21 22:05:13.494 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for INFY: unrealized=1501486.46, today=1501486.46\n", "record": {"elapsed": {"repr": "0:00:09.251096", "seconds": 9.251096}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for INFY: unrealized=1501486.46, today=1501486.46", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 29644, "name": "MainProcess"}, "thread": {"id": 29140, "name": "MainThread"}, "time": {"repr": "2025-08-21 22:05:13.494868+05:30", "timestamp": 1755794113.494868}}}
{"text": "2025-08-21 22:05:13.498 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for ICICIBANK: unrealized=-1334584.3, today=-1334584.3\n", "record": {"elapsed": {"repr": "0:00:09.254285", "seconds": 9.254285}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for ICICIBANK: unrealized=-1334584.3, today=-1334584.3", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 29644, "name": "MainProcess"}, "thread": {"id": 29140, "name": "MainThread"}, "time": {"repr": "2025-08-21 22:05:13.498057+05:30", "timestamp": 1755794113.498057}}}
{"text": "2025-08-21 22:05:13.500 | INFO     | app.services.dhan_client:get_pnl:545 - Calculated totals - realized: 0.0, unrealized: 1936047.86, day: 1936047.86\n", "record": {"elapsed": {"repr": "0:00:09.256634", "seconds": 9.256634}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 545, "message": "Calculated totals - realized: 0.0, unrealized: 1936047.86, day: 1936047.86", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 29644, "name": "MainProcess"}, "thread": {"id": 29140, "name": "MainThread"}, "time": {"repr": "2025-08-21 22:05:13.500406+05:30", "timestamp": 1755794113.500406}}}
{"text": "2025-08-21 22:05:13.502 | DEBUG    | app.services.dhan_client:get_pnl:554 - PnL consistency check passed: drift=‚Çπ0.00\n", "record": {"elapsed": {"repr": "0:00:09.258506", "seconds": 9.258506}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 554, "message": "PnL consistency check passed: drift=‚Çπ0.00", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 29644, "name": "MainProcess"}, "thread": {"id": 29140, "name": "MainThread"}, "time": {"repr": "2025-08-21 22:05:13.502278+05:30", "timestamp": 1755794113.502278}}}
{"text": "2025-08-21 22:05:13.503 | DEBUG    | app.services.dhan_client:get_pnl:558 - Creating PnLTotals...\n", "record": {"elapsed": {"repr": "0:00:09.259714", "seconds": 9.259714}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 558, "message": "Creating PnLTotals...", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 29644, "name": "MainProcess"}, "thread": {"id": 29140, "name": "MainThread"}, "time": {"repr": "2025-08-21 22:05:13.503486+05:30", "timestamp": 1755794113.503486}}}
{"text": "2025-08-21 22:05:13.505 | DEBUG    | app.services.dhan_client:get_pnl:565 - PnLTotals created successfully\n", "record": {"elapsed": {"repr": "0:00:09.261761", "seconds": 9.261761}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 565, "message": "PnLTotals created successfully", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 29644, "name": "MainProcess"}, "thread": {"id": 29140, "name": "MainThread"}, "time": {"repr": "2025-08-21 22:05:13.505533+05:30", "timestamp": 1755794113.505533}}}
{"text": "2025-08-21 22:05:13.507 | DEBUG    | app.services.dhan_client:get_pnl:574 - Creating PnL model...\n", "record": {"elapsed": {"repr": "0:00:09.263260", "seconds": 9.26326}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 574, "message": "Creating PnL model...", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 29644, "name": "MainProcess"}, "thread": {"id": 29140, "name": "MainThread"}, "time": {"repr": "2025-08-21 22:05:13.507032+05:30", "timestamp": 1755794113.507032}}}
{"text": "2025-08-21 22:05:13.509 | DEBUG    | app.services.dhan_client:get_pnl:575 - Model fields: totals=<class 'app.models.schemas.PnLTotals'>, perSymbol=5, updated_at=2025-08-21 22:05:13.485402+05:30, trading_day=2025-08-21\n", "record": {"elapsed": {"repr": "0:00:09.265237", "seconds": 9.265237}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 575, "message": "Model fields: totals=<class 'app.models.schemas.PnLTotals'>, perSymbol=5, updated_at=2025-08-21 22:05:13.485402+05:30, trading_day=2025-08-21", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 29644, "name": "MainProcess"}, "thread": {"id": 29140, "name": "MainThread"}, "time": {"repr": "2025-08-21 22:05:13.509009+05:30", "timestamp": 1755794113.509009}}}
{"text": "2025-08-21 22:05:13.511 | DEBUG    | app.services.dhan_client:get_pnl:584 - Created PnL model: totals=PnLTotals(realized=0.0, unrealized=1936047.86, day=1936047.86, currency='INR') per_symbol=[PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1596, avg=105.2, ltp=185.89, unrealized=128788.43, today_pnl=128788.43), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=895, avg=965.72, ltp=1009.55, unrealized=-39228.25, today_pnl=-39228.25), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=1697, avg=987.4, ltp=1977.14, unrealized=1679585.52, today_pnl=1679585.52), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=1638, avg=1011.79, ltp=95.13, unrealized=1501486.46, today_pnl=1501486.46), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=1535, avg=1230.09, ltp=360.65, unrealized=-1334584.3, today_pnl=-1334584.3)] updated_at=datetime.datetime(2025, 8, 21, 22, 5, 13, 485402, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))) trading_day='2025-08-21'\n", "record": {"elapsed": {"repr": "0:00:09.267656", "seconds": 9.267656}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 584, "message": "Created PnL model: totals=PnLTotals(realized=0.0, unrealized=1936047.86, day=1936047.86, currency='INR') per_symbol=[PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1596, avg=105.2, ltp=185.89, unrealized=128788.43, today_pnl=128788.43), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=895, avg=965.72, ltp=1009.55, unrealized=-39228.25, today_pnl=-39228.25), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=1697, avg=987.4, ltp=1977.14, unrealized=1679585.52, today_pnl=1679585.52), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=1638, avg=1011.79, ltp=95.13, unrealized=1501486.46, today_pnl=1501486.46), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=1535, avg=1230.09, ltp=360.65, unrealized=-1334584.3, today_pnl=-1334584.3)] updated_at=datetime.datetime(2025, 8, 21, 22, 5, 13, 485402, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))) trading_day='2025-08-21'", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 29644, "name": "MainProcess"}, "thread": {"id": 29140, "name": "MainThread"}, "time": {"repr": "2025-08-21 22:05:13.511428+05:30", "timestamp": 1755794113.511428}}}
{"text": "2025-08-21 22:05:13.514 | DEBUG    | app.services.dhan_client:get_pnl:585 - PnL model fields: {'totals': PnLTotals(realized=0.0, unrealized=1936047.86, day=1936047.86, currency='INR'), 'per_symbol': [PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1596, avg=105.2, ltp=185.89, unrealized=128788.43, today_pnl=128788.43), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=895, avg=965.72, ltp=1009.55, unrealized=-39228.25, today_pnl=-39228.25), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=1697, avg=987.4, ltp=1977.14, unrealized=1679585.52, today_pnl=1679585.52), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=1638, avg=1011.79, ltp=95.13, unrealized=1501486.46, today_pnl=1501486.46), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=1535, avg=1230.09, ltp=360.65, unrealized=-1334584.3, today_pnl=-1334584.3)], 'updated_at': datetime.datetime(2025, 8, 21, 22, 5, 13, 485402, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))), 'trading_day': '2025-08-21'}\n", "record": {"elapsed": {"repr": "0:00:09.270262", "seconds": 9.270262}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 585, "message": "PnL model fields: {'totals': PnLTotals(realized=0.0, unrealized=1936047.86, day=1936047.86, currency='INR'), 'per_symbol': [PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1596, avg=105.2, ltp=185.89, unrealized=128788.43, today_pnl=128788.43), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=895, avg=965.72, ltp=1009.55, unrealized=-39228.25, today_pnl=-39228.25), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=1697, avg=987.4, ltp=1977.14, unrealized=1679585.52, today_pnl=1679585.52), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=1638, avg=1011.79, ltp=95.13, unrealized=1501486.46, today_pnl=1501486.46), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=1535, avg=1230.09, ltp=360.65, unrealized=-1334584.3, today_pnl=-1334584.3)], 'updated_at': datetime.datetime(2025, 8, 21, 22, 5, 13, 485402, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))), 'trading_day': '2025-08-21'}", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 29644, "name": "MainProcess"}, "thread": {"id": 29140, "name": "MainThread"}, "time": {"repr": "2025-08-21 22:05:13.514034+05:30", "timestamp": 1755794113.514034}}}
{"text": "2025-08-21 22:05:13.516 | INFO     | app.services.dhan_client:get_pnl:587 - P&L calculation completed successfully: 5 symbols, unrealized=‚Çπ1936047.86\n", "record": {"elapsed": {"repr": "0:00:09.272418", "seconds": 9.272418}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 587, "message": "P&L calculation completed successfully: 5 symbols, unrealized=‚Çπ1936047.86", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 29644, "name": "MainProcess"}, "thread": {"id": 29140, "name": "MainThread"}, "time": {"repr": "2025-08-21 22:05:13.516190+05:30", "timestamp": 1755794113.51619}}}
{"text": "2025-08-21 22:05:13.519 | DEBUG    | app.ws.live:emit_delta:408 - Emitted pnl delta: seq=10\n", "record": {"elapsed": {"repr": "0:00:09.276035", "seconds": 9.276035}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "emit_delta", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 408, "message": "Emitted pnl delta: seq=10", "module": "live", "name": "app.ws.live", "process": {"id": 29644, "name": "MainProcess"}, "thread": {"id": 29140, "name": "MainThread"}, "time": {"repr": "2025-08-21 22:05:13.519807+05:30", "timestamp": 1755794113.519807}}}
{"text": "2025-08-21 22:05:14.122 | DEBUG    | app.ws.live:emit_delta:408 - Emitted positions delta: seq=11\n", "record": {"elapsed": {"repr": "0:00:09.879071", "seconds": 9.879071}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "emit_delta", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 408, "message": "Emitted positions delta: seq=11", "module": "live", "name": "app.ws.live", "process": {"id": 29644, "name": "MainProcess"}, "thread": {"id": 29140, "name": "MainThread"}, "time": {"repr": "2025-08-21 22:05:14.122843+05:30", "timestamp": 1755794114.122843}}}
{"text": "2025-08-21 22:05:14.597 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:10.353674", "seconds": 10.353674}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 29644, "name": "MainProcess"}, "thread": {"id": 15452, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 22:05:14.597446+05:30", "timestamp": 1755794114.597446}}}
{"text": "2025-08-21 22:05:14.599 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:10.355407", "seconds": 10.355407}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 29644, "name": "MainProcess"}, "thread": {"id": 15452, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 22:05:14.599179+05:30", "timestamp": 1755794114.599179}}}
{"text": "2025-08-21 22:05:14.600 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:10.356560", "seconds": 10.35656}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 29644, "name": "MainProcess"}, "thread": {"id": 15452, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 22:05:14.600332+05:30", "timestamp": 1755794114.600332}}}
{"text": "2025-08-21 22:05:14.602 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:10.358758", "seconds": 10.358758}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 29644, "name": "MainProcess"}, "thread": {"id": 15452, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 22:05:14.602530+05:30", "timestamp": 1755794114.60253}}}
{"text": "2025-08-21 22:05:14.603 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:10.359935", "seconds": 10.359935}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 29644, "name": "MainProcess"}, "thread": {"id": 15452, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 22:05:14.603707+05:30", "timestamp": 1755794114.603707}}}
{"text": "2025-08-21 22:05:14.609 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:10.365782", "seconds": 10.365782}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 29644, "name": "MainProcess"}, "thread": {"id": 15452, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 22:05:14.609554+05:30", "timestamp": 1755794114.609554}}}
{"text": "2025-08-21 22:05:14.610 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:10.366907", "seconds": 10.366907}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 29644, "name": "MainProcess"}, "thread": {"id": 15452, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 22:05:14.610679+05:30", "timestamp": 1755794114.610679}}}
{"text": "2025-08-21 22:05:14.612 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:10.368301", "seconds": 10.368301}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 29644, "name": "MainProcess"}, "thread": {"id": 15452, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 22:05:14.612073+05:30", "timestamp": 1755794114.612073}}}
{"text": "2025-08-21 22:05:14.613 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:10.369527", "seconds": 10.369527}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 29644, "name": "MainProcess"}, "thread": {"id": 15452, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 22:05:14.613299+05:30", "timestamp": 1755794114.613299}}}
{"text": "2025-08-21 22:05:14.617 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:10.373661", "seconds": 10.373661}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 29644, "name": "MainProcess"}, "thread": {"id": 15452, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 22:05:14.617433+05:30", "timestamp": 1755794114.617433}}}
{"text": "2025-08-21 22:05:15.111 | INFO     | app.services.dhan_client:get_pnl:489 - Starting accurate P&L calculation\n", "record": {"elapsed": {"repr": "0:00:10.867951", "seconds": 10.867951}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 489, "message": "Starting accurate P&L calculation", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 29644, "name": "MainProcess"}, "thread": {"id": 29140, "name": "MainThread"}, "time": {"repr": "2025-08-21 22:05:15.111723+05:30", "timestamp": 1755794115.111723}}}
{"text": "2025-08-21 22:05:15.113 | INFO     | app.services.dhan_client:get_pnl:491 - Fetched 5 positions\n", "record": {"elapsed": {"repr": "0:00:10.869923", "seconds": 10.869923}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 491, "message": "Fetched 5 positions", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 29644, "name": "MainProcess"}, "thread": {"id": 29140, "name": "MainThread"}, "time": {"repr": "2025-08-21 22:05:15.113695+05:30", "timestamp": 1755794115.113695}}}
{"text": "2025-08-21 22:05:15.115 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for RELIANCE: unrealized=129019.2, today=129019.2\n", "record": {"elapsed": {"repr": "0:00:10.872174", "seconds": 10.872174}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for RELIANCE: unrealized=129019.2, today=129019.2", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 29644, "name": "MainProcess"}, "thread": {"id": 29140, "name": "MainThread"}, "time": {"repr": "2025-08-21 22:05:15.115946+05:30", "timestamp": 1755794115.115946}}}
{"text": "2025-08-21 22:05:15.117 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for TCS: unrealized=-25487.46, today=-25487.46\n", "record": {"elapsed": {"repr": "0:00:10.873810", "seconds": 10.87381}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for TCS: unrealized=-25487.46, today=-25487.46", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 29644, "name": "MainProcess"}, "thread": {"id": 29140, "name": "MainThread"}, "time": {"repr": "2025-08-21 22:05:15.117582+05:30", "timestamp": 1755794115.117582}}}
{"text": "2025-08-21 22:05:15.118 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for HDFC: unrealized=1727147.07, today=1727147.07\n", "record": {"elapsed": {"repr": "0:00:10.875225", "seconds": 10.875225}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for HDFC: unrealized=1727147.07, today=1727147.07", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 29644, "name": "MainProcess"}, "thread": {"id": 29140, "name": "MainThread"}, "time": {"repr": "2025-08-21 22:05:15.118997+05:30", "timestamp": 1755794115.118997}}}
{"text": "2025-08-21 22:05:15.121 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for INFY: unrealized=1500998.64, today=1500998.64\n", "record": {"elapsed": {"repr": "0:00:10.877547", "seconds": 10.877547}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for INFY: unrealized=1500998.64, today=1500998.64", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 29644, "name": "MainProcess"}, "thread": {"id": 29140, "name": "MainThread"}, "time": {"repr": "2025-08-21 22:05:15.121319+05:30", "timestamp": 1755794115.121319}}}
{"text": "2025-08-21 22:05:15.124 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for ICICIBANK: unrealized=-1332086.99, today=-1332086.99\n", "record": {"elapsed": {"repr": "0:00:10.880416", "seconds": 10.880416}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for ICICIBANK: unrealized=-1332086.99, today=-1332086.99", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 29644, "name": "MainProcess"}, "thread": {"id": 29140, "name": "MainThread"}, "time": {"repr": "2025-08-21 22:05:15.124188+05:30", "timestamp": 1755794115.124188}}}
{"text": "2025-08-21 22:05:15.125 | INFO     | app.services.dhan_client:get_pnl:545 - Calculated totals - realized: 0.0, unrealized: 1999590.46, day: 1999590.46\n", "record": {"elapsed": {"repr": "0:00:10.882081", "seconds": 10.882081}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 545, "message": "Calculated totals - realized: 0.0, unrealized: 1999590.46, day: 1999590.46", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 29644, "name": "MainProcess"}, "thread": {"id": 29140, "name": "MainThread"}, "time": {"repr": "2025-08-21 22:05:15.125853+05:30", "timestamp": 1755794115.125853}}}
{"text": "2025-08-21 22:05:15.127 | DEBUG    | app.services.dhan_client:get_pnl:554 - PnL consistency check passed: drift=‚Çπ0.00\n", "record": {"elapsed": {"repr": "0:00:10.883773", "seconds": 10.883773}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 554, "message": "PnL consistency check passed: drift=‚Çπ0.00", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 29644, "name": "MainProcess"}, "thread": {"id": 29140, "name": "MainThread"}, "time": {"repr": "2025-08-21 22:05:15.127545+05:30", "timestamp": 1755794115.127545}}}
{"text": "2025-08-21 22:05:15.129 | DEBUG    | app.services.dhan_client:get_pnl:558 - Creating PnLTotals...\n", "record": {"elapsed": {"repr": "0:00:10.885330", "seconds": 10.88533}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 558, "message": "Creating PnLTotals...", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 29644, "name": "MainProcess"}, "thread": {"id": 29140, "name": "MainThread"}, "time": {"repr": "2025-08-21 22:05:15.129102+05:30", "timestamp": 1755794115.129102}}}
{"text": "2025-08-21 22:05:15.130 | DEBUG    | app.services.dhan_client:get_pnl:565 - PnLTotals created successfully\n", "record": {"elapsed": {"repr": "0:00:10.886576", "seconds": 10.886576}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 565, "message": "PnLTotals created successfully", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 29644, "name": "MainProcess"}, "thread": {"id": 29140, "name": "MainThread"}, "time": {"repr": "2025-08-21 22:05:15.130348+05:30", "timestamp": 1755794115.130348}}}
{"text": "2025-08-21 22:05:15.136 | DEBUG    | app.services.dhan_client:get_pnl:574 - Creating PnL model...\n", "record": {"elapsed": {"repr": "0:00:10.892972", "seconds": 10.892972}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 574, "message": "Creating PnL model...", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 29644, "name": "MainProcess"}, "thread": {"id": 29140, "name": "MainThread"}, "time": {"repr": "2025-08-21 22:05:15.136744+05:30", "timestamp": 1755794115.136744}}}
{"text": "2025-08-21 22:05:15.137 | DEBUG    | app.services.dhan_client:get_pnl:575 - Model fields: totals=<class 'app.models.schemas.PnLTotals'>, perSymbol=5, updated_at=2025-08-21 22:05:15.115663+05:30, trading_day=2025-08-21\n", "record": {"elapsed": {"repr": "0:00:10.893962", "seconds": 10.893962}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 575, "message": "Model fields: totals=<class 'app.models.schemas.PnLTotals'>, perSymbol=5, updated_at=2025-08-21 22:05:15.115663+05:30, trading_day=2025-08-21", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 29644, "name": "MainProcess"}, "thread": {"id": 29140, "name": "MainThread"}, "time": {"repr": "2025-08-21 22:05:15.137734+05:30", "timestamp": 1755794115.137734}}}
{"text": "2025-08-21 22:05:15.140 | DEBUG    | app.services.dhan_client:get_pnl:584 - Created PnL model: totals=PnLTotals(realized=0.0, unrealized=1999590.46, day=1999590.46, currency='INR') per_symbol=[PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1596, avg=105.2, ltp=186.04, unrealized=129019.2, today_pnl=129019.2), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=895, avg=965.72, ltp=994.2, unrealized=-25487.46, today_pnl=-25487.46), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=1697, avg=987.4, ltp=2005.16, unrealized=1727147.07, today_pnl=1727147.07), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=1638, avg=1011.79, ltp=95.43, unrealized=1500998.64, today_pnl=1500998.64), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=1535, avg=1230.09, ltp=362.28, unrealized=-1332086.99, today_pnl=-1332086.99)] updated_at=datetime.datetime(2025, 8, 21, 22, 5, 15, 115663, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))) trading_day='2025-08-21'\n", "record": {"elapsed": {"repr": "0:00:10.896297", "seconds": 10.896297}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 584, "message": "Created PnL model: totals=PnLTotals(realized=0.0, unrealized=1999590.46, day=1999590.46, currency='INR') per_symbol=[PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1596, avg=105.2, ltp=186.04, unrealized=129019.2, today_pnl=129019.2), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=895, avg=965.72, ltp=994.2, unrealized=-25487.46, today_pnl=-25487.46), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=1697, avg=987.4, ltp=2005.16, unrealized=1727147.07, today_pnl=1727147.07), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=1638, avg=1011.79, ltp=95.43, unrealized=1500998.64, today_pnl=1500998.64), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=1535, avg=1230.09, ltp=362.28, unrealized=-1332086.99, today_pnl=-1332086.99)] updated_at=datetime.datetime(2025, 8, 21, 22, 5, 15, 115663, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))) trading_day='2025-08-21'", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 29644, "name": "MainProcess"}, "thread": {"id": 29140, "name": "MainThread"}, "time": {"repr": "2025-08-21 22:05:15.140069+05:30", "timestamp": 1755794115.140069}}}
{"text": "2025-08-21 22:05:15.142 | DEBUG    | app.services.dhan_client:get_pnl:585 - PnL model fields: {'totals': PnLTotals(realized=0.0, unrealized=1999590.46, day=1999590.46, currency='INR'), 'per_symbol': [PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1596, avg=105.2, ltp=186.04, unrealized=129019.2, today_pnl=129019.2), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=895, avg=965.72, ltp=994.2, unrealized=-25487.46, today_pnl=-25487.46), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=1697, avg=987.4, ltp=2005.16, unrealized=1727147.07, today_pnl=1727147.07), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=1638, avg=1011.79, ltp=95.43, unrealized=1500998.64, today_pnl=1500998.64), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=1535, avg=1230.09, ltp=362.28, unrealized=-1332086.99, today_pnl=-1332086.99)], 'updated_at': datetime.datetime(2025, 8, 21, 22, 5, 15, 115663, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))), 'trading_day': '2025-08-21'}\n", "record": {"elapsed": {"repr": "0:00:10.898354", "seconds": 10.898354}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 585, "message": "PnL model fields: {'totals': PnLTotals(realized=0.0, unrealized=1999590.46, day=1999590.46, currency='INR'), 'per_symbol': [PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1596, avg=105.2, ltp=186.04, unrealized=129019.2, today_pnl=129019.2), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=895, avg=965.72, ltp=994.2, unrealized=-25487.46, today_pnl=-25487.46), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=1697, avg=987.4, ltp=2005.16, unrealized=1727147.07, today_pnl=1727147.07), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=1638, avg=1011.79, ltp=95.43, unrealized=1500998.64, today_pnl=1500998.64), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=1535, avg=1230.09, ltp=362.28, unrealized=-1332086.99, today_pnl=-1332086.99)], 'updated_at': datetime.datetime(2025, 8, 21, 22, 5, 15, 115663, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))), 'trading_day': '2025-08-21'}", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 29644, "name": "MainProcess"}, "thread": {"id": 29140, "name": "MainThread"}, "time": {"repr": "2025-08-21 22:05:15.142126+05:30", "timestamp": 1755794115.142126}}}
{"text": "2025-08-21 22:05:15.145 | INFO     | app.services.dhan_client:get_pnl:587 - P&L calculation completed successfully: 5 symbols, unrealized=‚Çπ1999590.46\n", "record": {"elapsed": {"repr": "0:00:10.902040", "seconds": 10.90204}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 587, "message": "P&L calculation completed successfully: 5 symbols, unrealized=‚Çπ1999590.46", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 29644, "name": "MainProcess"}, "thread": {"id": 29140, "name": "MainThread"}, "time": {"repr": "2025-08-21 22:05:15.145812+05:30", "timestamp": 1755794115.145812}}}
