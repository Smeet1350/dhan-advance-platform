{"text": "2025-08-21 19:02:54.675 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:01:36.382474", "seconds": 96.382474}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:02:54.675016+05:30", "timestamp": 1755783174.675016}}}
{"text": "2025-08-21 19:02:54.678 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:01:36.385823", "seconds": 96.385823}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:02:54.678365+05:30", "timestamp": 1755783174.678365}}}
{"text": "2025-08-21 19:02:54.679 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:01:36.386695", "seconds": 96.386695}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:02:54.679237+05:30", "timestamp": 1755783174.679237}}}
{"text": "2025-08-21 19:02:54.680 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:01:36.387654", "seconds": 96.387654}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:02:54.680196+05:30", "timestamp": 1755783174.680196}}}
{"text": "2025-08-21 19:02:56.070 | INFO     | app.services.dhan_client:get_pnl:489 - Starting accurate P&L calculation\n", "record": {"elapsed": {"repr": "0:01:37.777807", "seconds": 97.777807}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 489, "message": "Starting accurate P&L calculation", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:02:56.070349+05:30", "timestamp": 1755783176.070349}}}
{"text": "2025-08-21 19:02:56.071 | INFO     | app.services.dhan_client:get_pnl:491 - Fetched 5 positions\n", "record": {"elapsed": {"repr": "0:01:37.778559", "seconds": 97.778559}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 491, "message": "Fetched 5 positions", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:02:56.071101+05:30", "timestamp": 1755783176.071101}}}
{"text": "2025-08-21 19:02:56.071 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for RELIANCE: unrealized=-425389.78, today=-425389.78\n", "record": {"elapsed": {"repr": "0:01:37.779224", "seconds": 97.779224}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for RELIANCE: unrealized=-425389.78, today=-425389.78", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:02:56.071766+05:30", "timestamp": 1755783176.071766}}}
{"text": "2025-08-21 19:02:56.072 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for TCS: unrealized=-45201.95, today=-45201.95\n", "record": {"elapsed": {"repr": "0:01:37.779736", "seconds": 97.779736}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for TCS: unrealized=-45201.95, today=-45201.95", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:02:56.072278+05:30", "timestamp": 1755783176.072278}}}
{"text": "2025-08-21 19:02:56.072 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for HDFC: unrealized=1674358.58, today=1674358.58\n", "record": {"elapsed": {"repr": "0:01:37.780301", "seconds": 97.780301}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for HDFC: unrealized=1674358.58, today=1674358.58", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:02:56.072843+05:30", "timestamp": 1755783176.072843}}}
{"text": "2025-08-21 19:02:56.073 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for INFY: unrealized=24853.84, today=24853.84\n", "record": {"elapsed": {"repr": "0:01:37.781453", "seconds": 97.781453}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for INFY: unrealized=24853.84, today=24853.84", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:02:56.073995+05:30", "timestamp": 1755783176.073995}}}
{"text": "2025-08-21 19:02:56.074 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for ICICIBANK: unrealized=-488017.76, today=-488017.76\n", "record": {"elapsed": {"repr": "0:01:37.782295", "seconds": 97.782295}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for ICICIBANK: unrealized=-488017.76, today=-488017.76", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:02:56.074837+05:30", "timestamp": 1755783176.074837}}}
{"text": "2025-08-21 19:02:56.075 | INFO     | app.services.dhan_client:get_pnl:545 - Calculated totals - realized: 0.0, unrealized: 740602.93, day: 740602.93\n", "record": {"elapsed": {"repr": "0:01:37.782895", "seconds": 97.782895}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 545, "message": "Calculated totals - realized: 0.0, unrealized: 740602.93, day: 740602.93", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:02:56.075437+05:30", "timestamp": 1755783176.075437}}}
{"text": "2025-08-21 19:02:56.076 | DEBUG    | app.services.dhan_client:get_pnl:554 - PnL consistency check passed: drift=‚Çπ0.00\n", "record": {"elapsed": {"repr": "0:01:37.783567", "seconds": 97.783567}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 554, "message": "PnL consistency check passed: drift=‚Çπ0.00", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:02:56.076109+05:30", "timestamp": 1755783176.076109}}}
{"text": "2025-08-21 19:02:56.076 | DEBUG    | app.services.dhan_client:get_pnl:558 - Creating PnLTotals...\n", "record": {"elapsed": {"repr": "0:01:37.784043", "seconds": 97.784043}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 558, "message": "Creating PnLTotals...", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:02:56.076585+05:30", "timestamp": 1755783176.076585}}}
{"text": "2025-08-21 19:02:56.077 | DEBUG    | app.services.dhan_client:get_pnl:565 - PnLTotals created successfully\n", "record": {"elapsed": {"repr": "0:01:37.784582", "seconds": 97.784582}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 565, "message": "PnLTotals created successfully", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:02:56.077124+05:30", "timestamp": 1755783176.077124}}}
{"text": "2025-08-21 19:02:56.077 | DEBUG    | app.services.dhan_client:get_pnl:574 - Creating PnL model...\n", "record": {"elapsed": {"repr": "0:01:37.785143", "seconds": 97.785143}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 574, "message": "Creating PnL model...", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:02:56.077685+05:30", "timestamp": 1755783176.077685}}}
{"text": "2025-08-21 19:02:56.078 | DEBUG    | app.services.dhan_client:get_pnl:575 - Model fields: totals=<class 'app.models.schemas.PnLTotals'>, perSymbol=5, updated_at=2025-08-21 19:02:56.071684+05:30, trading_day=2025-08-21\n", "record": {"elapsed": {"repr": "0:01:37.786122", "seconds": 97.786122}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 575, "message": "Model fields: totals=<class 'app.models.schemas.PnLTotals'>, perSymbol=5, updated_at=2025-08-21 19:02:56.071684+05:30, trading_day=2025-08-21", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:02:56.078664+05:30", "timestamp": 1755783176.078664}}}
{"text": "2025-08-21 19:02:56.079 | DEBUG    | app.services.dhan_client:get_pnl:584 - Created PnL model: totals=PnLTotals(realized=0.0, unrealized=740602.93, day=740602.93, currency='INR') per_symbol=[PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1727, avg=618.93, ltp=372.61, unrealized=-425389.78, today_pnl=-425389.78), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=167, avg=948.57, ltp=1219.24, unrealized=-45201.95, today_pnl=-45201.95), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=1347, avg=801.44, ltp=2044.47, unrealized=1674358.58, today_pnl=1674358.58), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=143, avg=1427.62, ltp=1253.82, unrealized=24853.84, today_pnl=24853.84), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=438, avg=1994.48, ltp=880.28, unrealized=-488017.76, today_pnl=-488017.76)] updated_at=datetime.datetime(2025, 8, 21, 19, 2, 56, 71684, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))) trading_day='2025-08-21'\n", "record": {"elapsed": {"repr": "0:01:37.786875", "seconds": 97.786875}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 584, "message": "Created PnL model: totals=PnLTotals(realized=0.0, unrealized=740602.93, day=740602.93, currency='INR') per_symbol=[PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1727, avg=618.93, ltp=372.61, unrealized=-425389.78, today_pnl=-425389.78), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=167, avg=948.57, ltp=1219.24, unrealized=-45201.95, today_pnl=-45201.95), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=1347, avg=801.44, ltp=2044.47, unrealized=1674358.58, today_pnl=1674358.58), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=143, avg=1427.62, ltp=1253.82, unrealized=24853.84, today_pnl=24853.84), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=438, avg=1994.48, ltp=880.28, unrealized=-488017.76, today_pnl=-488017.76)] updated_at=datetime.datetime(2025, 8, 21, 19, 2, 56, 71684, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))) trading_day='2025-08-21'", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:02:56.079417+05:30", "timestamp": 1755783176.079417}}}
{"text": "2025-08-21 19:02:56.080 | DEBUG    | app.services.dhan_client:get_pnl:585 - PnL model fields: {'totals': PnLTotals(realized=0.0, unrealized=740602.93, day=740602.93, currency='INR'), 'per_symbol': [PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1727, avg=618.93, ltp=372.61, unrealized=-425389.78, today_pnl=-425389.78), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=167, avg=948.57, ltp=1219.24, unrealized=-45201.95, today_pnl=-45201.95), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=1347, avg=801.44, ltp=2044.47, unrealized=1674358.58, today_pnl=1674358.58), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=143, avg=1427.62, ltp=1253.82, unrealized=24853.84, today_pnl=24853.84), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=438, avg=1994.48, ltp=880.28, unrealized=-488017.76, today_pnl=-488017.76)], 'updated_at': datetime.datetime(2025, 8, 21, 19, 2, 56, 71684, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))), 'trading_day': '2025-08-21'}\n", "record": {"elapsed": {"repr": "0:01:37.787615", "seconds": 97.787615}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 585, "message": "PnL model fields: {'totals': PnLTotals(realized=0.0, unrealized=740602.93, day=740602.93, currency='INR'), 'per_symbol': [PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1727, avg=618.93, ltp=372.61, unrealized=-425389.78, today_pnl=-425389.78), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=167, avg=948.57, ltp=1219.24, unrealized=-45201.95, today_pnl=-45201.95), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=1347, avg=801.44, ltp=2044.47, unrealized=1674358.58, today_pnl=1674358.58), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=143, avg=1427.62, ltp=1253.82, unrealized=24853.84, today_pnl=24853.84), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=438, avg=1994.48, ltp=880.28, unrealized=-488017.76, today_pnl=-488017.76)], 'updated_at': datetime.datetime(2025, 8, 21, 19, 2, 56, 71684, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))), 'trading_day': '2025-08-21'}", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:02:56.080157+05:30", "timestamp": 1755783176.080157}}}
{"text": "2025-08-21 19:02:56.081 | INFO     | app.services.dhan_client:get_pnl:587 - P&L calculation completed successfully: 5 symbols, unrealized=‚Çπ740602.93\n", "record": {"elapsed": {"repr": "0:01:37.788590", "seconds": 97.78859}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 587, "message": "P&L calculation completed successfully: 5 symbols, unrealized=‚Çπ740602.93", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:02:56.081132+05:30", "timestamp": 1755783176.081132}}}
{"text": "2025-08-21 19:02:56.082 | DEBUG    | app.ws.live:emit_delta:408 - Emitted pnl delta: seq=107\n", "record": {"elapsed": {"repr": "0:01:37.790064", "seconds": 97.790064}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "emit_delta", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 408, "message": "Emitted pnl delta: seq=107", "module": "live", "name": "app.ws.live", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:02:56.082606+05:30", "timestamp": 1755783176.082606}}}
{"text": "2025-08-21 19:02:56.316 | DEBUG    | app.ws.live:emit_delta:408 - Emitted positions delta: seq=108\n", "record": {"elapsed": {"repr": "0:01:38.023979", "seconds": 98.023979}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "emit_delta", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 408, "message": "Emitted positions delta: seq=108", "module": "live", "name": "app.ws.live", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:02:56.316521+05:30", "timestamp": 1755783176.316521}}}
{"text": "2025-08-21 19:02:56.681 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:01:38.388692", "seconds": 98.388692}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:02:56.681234+05:30", "timestamp": 1755783176.681234}}}
{"text": "2025-08-21 19:02:56.682 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:01:38.389799", "seconds": 98.389799}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:02:56.682341+05:30", "timestamp": 1755783176.682341}}}
{"text": "2025-08-21 19:02:56.682 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:01:38.390408", "seconds": 98.390408}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:02:56.682950+05:30", "timestamp": 1755783176.68295}}}
{"text": "2025-08-21 19:02:56.683 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:01:38.391013", "seconds": 98.391013}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:02:56.683555+05:30", "timestamp": 1755783176.683555}}}
{"text": "2025-08-21 19:02:56.684 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:01:38.391504", "seconds": 98.391504}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:02:56.684046+05:30", "timestamp": 1755783176.684046}}}
{"text": "2025-08-21 19:02:56.684 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:01:38.392051", "seconds": 98.392051}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:02:56.684593+05:30", "timestamp": 1755783176.684593}}}
{"text": "2025-08-21 19:02:56.685 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:01:38.392589", "seconds": 98.392589}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:02:56.685131+05:30", "timestamp": 1755783176.685131}}}
{"text": "2025-08-21 19:02:56.685 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:01:38.393195", "seconds": 98.393195}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:02:56.685737+05:30", "timestamp": 1755783176.685737}}}
{"text": "2025-08-21 19:02:56.686 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:01:38.394266", "seconds": 98.394266}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:02:56.686808+05:30", "timestamp": 1755783176.686808}}}
{"text": "2025-08-21 19:02:56.687 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:01:38.394948", "seconds": 98.394948}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:02:56.687490+05:30", "timestamp": 1755783176.68749}}}
{"text": "2025-08-21 19:02:57.949 | INFO     | app.services.dhan_client:get_pnl:489 - Starting accurate P&L calculation\n", "record": {"elapsed": {"repr": "0:01:39.657344", "seconds": 99.657344}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 489, "message": "Starting accurate P&L calculation", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:02:57.949886+05:30", "timestamp": 1755783177.949886}}}
{"text": "2025-08-21 19:02:57.950 | INFO     | app.services.dhan_client:get_pnl:491 - Fetched 5 positions\n", "record": {"elapsed": {"repr": "0:01:39.657920", "seconds": 99.65792}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 491, "message": "Fetched 5 positions", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:02:57.950462+05:30", "timestamp": 1755783177.950462}}}
{"text": "2025-08-21 19:02:57.950 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for RELIANCE: unrealized=-421950.25, today=-421950.25\n", "record": {"elapsed": {"repr": "0:01:39.658450", "seconds": 99.65845}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for RELIANCE: unrealized=-421950.25, today=-421950.25", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:02:57.950992+05:30", "timestamp": 1755783177.950992}}}
{"text": "2025-08-21 19:02:57.951 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for TCS: unrealized=-44343.03, today=-44343.03\n", "record": {"elapsed": {"repr": "0:01:39.658974", "seconds": 99.658974}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for TCS: unrealized=-44343.03, today=-44343.03", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:02:57.951516+05:30", "timestamp": 1755783177.951516}}}
{"text": "2025-08-21 19:02:57.952 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for HDFC: unrealized=1623986.26, today=1623986.26\n", "record": {"elapsed": {"repr": "0:01:39.659853", "seconds": 99.659853}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for HDFC: unrealized=1623986.26, today=1623986.26", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:02:57.952395+05:30", "timestamp": 1755783177.952395}}}
{"text": "2025-08-21 19:02:57.953 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for INFY: unrealized=25768.97, today=25768.97\n", "record": {"elapsed": {"repr": "0:01:39.660530", "seconds": 99.66053}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for INFY: unrealized=25768.97, today=25768.97", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:02:57.953072+05:30", "timestamp": 1755783177.953072}}}
{"text": "2025-08-21 19:02:57.953 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for ICICIBANK: unrealized=-485970.09, today=-485970.09\n", "record": {"elapsed": {"repr": "0:01:39.661069", "seconds": 99.661069}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for ICICIBANK: unrealized=-485970.09, today=-485970.09", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:02:57.953611+05:30", "timestamp": 1755783177.953611}}}
{"text": "2025-08-21 19:02:57.954 | INFO     | app.services.dhan_client:get_pnl:545 - Calculated totals - realized: 0.0, unrealized: 697491.86, day: 697491.86\n", "record": {"elapsed": {"repr": "0:01:39.661859", "seconds": 99.661859}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 545, "message": "Calculated totals - realized: 0.0, unrealized: 697491.86, day: 697491.86", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:02:57.954401+05:30", "timestamp": 1755783177.954401}}}
{"text": "2025-08-21 19:02:57.955 | DEBUG    | app.services.dhan_client:get_pnl:554 - PnL consistency check passed: drift=‚Çπ0.00\n", "record": {"elapsed": {"repr": "0:01:39.662987", "seconds": 99.662987}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 554, "message": "PnL consistency check passed: drift=‚Çπ0.00", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:02:57.955529+05:30", "timestamp": 1755783177.955529}}}
{"text": "2025-08-21 19:02:57.956 | DEBUG    | app.services.dhan_client:get_pnl:558 - Creating PnLTotals...\n", "record": {"elapsed": {"repr": "0:01:39.663526", "seconds": 99.663526}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 558, "message": "Creating PnLTotals...", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:02:57.956068+05:30", "timestamp": 1755783177.956068}}}
{"text": "2025-08-21 19:02:57.956 | DEBUG    | app.services.dhan_client:get_pnl:565 - PnLTotals created successfully\n", "record": {"elapsed": {"repr": "0:01:39.664054", "seconds": 99.664054}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 565, "message": "PnLTotals created successfully", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:02:57.956596+05:30", "timestamp": 1755783177.956596}}}
{"text": "2025-08-21 19:02:57.957 | DEBUG    | app.services.dhan_client:get_pnl:574 - Creating PnL model...\n", "record": {"elapsed": {"repr": "0:01:39.664522", "seconds": 99.664522}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 574, "message": "Creating PnL model...", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:02:57.957064+05:30", "timestamp": 1755783177.957064}}}
{"text": "2025-08-21 19:02:57.957 | DEBUG    | app.services.dhan_client:get_pnl:575 - Model fields: totals=<class 'app.models.schemas.PnLTotals'>, perSymbol=5, updated_at=2025-08-21 19:02:57.950931+05:30, trading_day=2025-08-21\n", "record": {"elapsed": {"repr": "0:01:39.664879", "seconds": 99.664879}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 575, "message": "Model fields: totals=<class 'app.models.schemas.PnLTotals'>, perSymbol=5, updated_at=2025-08-21 19:02:57.950931+05:30, trading_day=2025-08-21", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:02:57.957421+05:30", "timestamp": 1755783177.957421}}}
{"text": "2025-08-21 19:02:57.957 | DEBUG    | app.services.dhan_client:get_pnl:584 - Created PnL model: totals=PnLTotals(realized=0.0, unrealized=697491.86, day=697491.86, currency='INR') per_symbol=[PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1727, avg=618.93, ltp=374.6, unrealized=-421950.25, today_pnl=-421950.25), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=167, avg=948.57, ltp=1214.1, unrealized=-44343.03, today_pnl=-44343.03), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=1347, avg=801.44, ltp=2007.07, unrealized=1623986.26, today_pnl=1623986.26), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=143, avg=1427.62, ltp=1247.42, unrealized=25768.97, today_pnl=25768.97), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=438, avg=1994.48, ltp=884.96, unrealized=-485970.09, today_pnl=-485970.09)] updated_at=datetime.datetime(2025, 8, 21, 19, 2, 57, 950931, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))) trading_day='2025-08-21'\n", "record": {"elapsed": {"repr": "0:01:39.665385", "seconds": 99.665385}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 584, "message": "Created PnL model: totals=PnLTotals(realized=0.0, unrealized=697491.86, day=697491.86, currency='INR') per_symbol=[PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1727, avg=618.93, ltp=374.6, unrealized=-421950.25, today_pnl=-421950.25), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=167, avg=948.57, ltp=1214.1, unrealized=-44343.03, today_pnl=-44343.03), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=1347, avg=801.44, ltp=2007.07, unrealized=1623986.26, today_pnl=1623986.26), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=143, avg=1427.62, ltp=1247.42, unrealized=25768.97, today_pnl=25768.97), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=438, avg=1994.48, ltp=884.96, unrealized=-485970.09, today_pnl=-485970.09)] updated_at=datetime.datetime(2025, 8, 21, 19, 2, 57, 950931, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))) trading_day='2025-08-21'", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:02:57.957927+05:30", "timestamp": 1755783177.957927}}}
{"text": "2025-08-21 19:02:57.958 | DEBUG    | app.services.dhan_client:get_pnl:585 - PnL model fields: {'totals': PnLTotals(realized=0.0, unrealized=697491.86, day=697491.86, currency='INR'), 'per_symbol': [PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1727, avg=618.93, ltp=374.6, unrealized=-421950.25, today_pnl=-421950.25), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=167, avg=948.57, ltp=1214.1, unrealized=-44343.03, today_pnl=-44343.03), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=1347, avg=801.44, ltp=2007.07, unrealized=1623986.26, today_pnl=1623986.26), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=143, avg=1427.62, ltp=1247.42, unrealized=25768.97, today_pnl=25768.97), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=438, avg=1994.48, ltp=884.96, unrealized=-485970.09, today_pnl=-485970.09)], 'updated_at': datetime.datetime(2025, 8, 21, 19, 2, 57, 950931, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))), 'trading_day': '2025-08-21'}\n", "record": {"elapsed": {"repr": "0:01:39.666065", "seconds": 99.666065}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 585, "message": "PnL model fields: {'totals': PnLTotals(realized=0.0, unrealized=697491.86, day=697491.86, currency='INR'), 'per_symbol': [PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1727, avg=618.93, ltp=374.6, unrealized=-421950.25, today_pnl=-421950.25), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=167, avg=948.57, ltp=1214.1, unrealized=-44343.03, today_pnl=-44343.03), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=1347, avg=801.44, ltp=2007.07, unrealized=1623986.26, today_pnl=1623986.26), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=143, avg=1427.62, ltp=1247.42, unrealized=25768.97, today_pnl=25768.97), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=438, avg=1994.48, ltp=884.96, unrealized=-485970.09, today_pnl=-485970.09)], 'updated_at': datetime.datetime(2025, 8, 21, 19, 2, 57, 950931, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))), 'trading_day': '2025-08-21'}", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:02:57.958607+05:30", "timestamp": 1755783177.958607}}}
{"text": "2025-08-21 19:02:57.959 | INFO     | app.services.dhan_client:get_pnl:587 - P&L calculation completed successfully: 5 symbols, unrealized=‚Çπ697491.86\n", "record": {"elapsed": {"repr": "0:01:39.666779", "seconds": 99.666779}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 587, "message": "P&L calculation completed successfully: 5 symbols, unrealized=‚Çπ697491.86", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:02:57.959321+05:30", "timestamp": 1755783177.959321}}}
{"text": "2025-08-21 19:02:57.960 | DEBUG    | app.ws.live:emit_delta:408 - Emitted pnl delta: seq=109\n", "record": {"elapsed": {"repr": "0:01:39.667483", "seconds": 99.667483}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "emit_delta", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 408, "message": "Emitted pnl delta: seq=109", "module": "live", "name": "app.ws.live", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:02:57.960025+05:30", "timestamp": 1755783177.960025}}}
{"text": "2025-08-21 19:02:58.307 | DEBUG    | app.ws.live:emit_delta:408 - Emitted positions delta: seq=110\n", "record": {"elapsed": {"repr": "0:01:40.014676", "seconds": 100.014676}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "emit_delta", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 408, "message": "Emitted positions delta: seq=110", "module": "live", "name": "app.ws.live", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:02:58.307218+05:30", "timestamp": 1755783178.307218}}}
{"text": "2025-08-21 19:02:58.606 | DEBUG    | app.ws.live:emit_delta:408 - Emitted holdings delta: seq=111\n", "record": {"elapsed": {"repr": "0:01:40.314449", "seconds": 100.314449}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "emit_delta", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 408, "message": "Emitted holdings delta: seq=111", "module": "live", "name": "app.ws.live", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:02:58.606991+05:30", "timestamp": 1755783178.606991}}}
{"text": "2025-08-21 19:02:58.688 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:01:40.396208", "seconds": 100.396208}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:02:58.688750+05:30", "timestamp": 1755783178.68875}}}
{"text": "2025-08-21 19:02:58.689 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:01:40.396925", "seconds": 100.396925}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:02:58.689467+05:30", "timestamp": 1755783178.689467}}}
{"text": "2025-08-21 19:02:58.689 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:01:40.397362", "seconds": 100.397362}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:02:58.689904+05:30", "timestamp": 1755783178.689904}}}
{"text": "2025-08-21 19:02:58.690 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:01:40.397798", "seconds": 100.397798}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:02:58.690340+05:30", "timestamp": 1755783178.69034}}}
{"text": "2025-08-21 19:02:58.690 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:01:40.398201", "seconds": 100.398201}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:02:58.690743+05:30", "timestamp": 1755783178.690743}}}
{"text": "2025-08-21 19:02:58.691 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:01:40.398596", "seconds": 100.398596}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:02:58.691138+05:30", "timestamp": 1755783178.691138}}}
{"text": "2025-08-21 19:02:58.691 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:01:40.398971", "seconds": 100.398971}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:02:58.691513+05:30", "timestamp": 1755783178.691513}}}
{"text": "2025-08-21 19:02:58.691 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:01:40.399340", "seconds": 100.39934}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:02:58.691882+05:30", "timestamp": 1755783178.691882}}}
{"text": "2025-08-21 19:02:58.692 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:01:40.399876", "seconds": 100.399876}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:02:58.692418+05:30", "timestamp": 1755783178.692418}}}
{"text": "2025-08-21 19:02:58.692 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:01:40.400427", "seconds": 100.400427}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:02:58.692969+05:30", "timestamp": 1755783178.692969}}}
{"text": "2025-08-21 19:02:59.771 | INFO     | app.services.dhan_client:get_pnl:489 - Starting accurate P&L calculation\n", "record": {"elapsed": {"repr": "0:01:41.479230", "seconds": 101.47923}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 489, "message": "Starting accurate P&L calculation", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:02:59.771772+05:30", "timestamp": 1755783179.771772}}}
{"text": "2025-08-21 19:02:59.772 | INFO     | app.services.dhan_client:get_pnl:491 - Fetched 5 positions\n", "record": {"elapsed": {"repr": "0:01:41.480026", "seconds": 101.480026}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 491, "message": "Fetched 5 positions", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:02:59.772568+05:30", "timestamp": 1755783179.772568}}}
{"text": "2025-08-21 19:02:59.773 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for RELIANCE: unrealized=-434354.28, today=-434354.28\n", "record": {"elapsed": {"repr": "0:01:41.480493", "seconds": 101.480493}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for RELIANCE: unrealized=-434354.28, today=-434354.28", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:02:59.773035+05:30", "timestamp": 1755783179.773035}}}
{"text": "2025-08-21 19:02:59.773 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for TCS: unrealized=-43145.04, today=-43145.04\n", "record": {"elapsed": {"repr": "0:01:41.481030", "seconds": 101.48103}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for TCS: unrealized=-43145.04, today=-43145.04", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:02:59.773572+05:30", "timestamp": 1755783179.773572}}}
{"text": "2025-08-21 19:02:59.774 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for HDFC: unrealized=1600655.29, today=1600655.29\n", "record": {"elapsed": {"repr": "0:01:41.481645", "seconds": 101.481645}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for HDFC: unrealized=1600655.29, today=1600655.29", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:02:59.774187+05:30", "timestamp": 1755783179.774187}}}
{"text": "2025-08-21 19:02:59.774 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for INFY: unrealized=27325.31, today=27325.31\n", "record": {"elapsed": {"repr": "0:01:41.482343", "seconds": 101.482343}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for INFY: unrealized=27325.31, today=27325.31", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:02:59.774885+05:30", "timestamp": 1755783179.774885}}}
{"text": "2025-08-21 19:02:59.775 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for ICICIBANK: unrealized=-487859.73, today=-487859.73\n", "record": {"elapsed": {"repr": "0:01:41.482981", "seconds": 101.482981}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for ICICIBANK: unrealized=-487859.73, today=-487859.73", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:02:59.775523+05:30", "timestamp": 1755783179.775523}}}
{"text": "2025-08-21 19:02:59.776 | INFO     | app.services.dhan_client:get_pnl:545 - Calculated totals - realized: 0.0, unrealized: 662621.55, day: 662621.55\n", "record": {"elapsed": {"repr": "0:01:41.483755", "seconds": 101.483755}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 545, "message": "Calculated totals - realized: 0.0, unrealized: 662621.55, day: 662621.55", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:02:59.776297+05:30", "timestamp": 1755783179.776297}}}
{"text": "2025-08-21 19:02:59.777 | DEBUG    | app.services.dhan_client:get_pnl:554 - PnL consistency check passed: drift=‚Çπ0.00\n", "record": {"elapsed": {"repr": "0:01:41.484786", "seconds": 101.484786}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 554, "message": "PnL consistency check passed: drift=‚Çπ0.00", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:02:59.777328+05:30", "timestamp": 1755783179.777328}}}
{"text": "2025-08-21 19:02:59.778 | DEBUG    | app.services.dhan_client:get_pnl:558 - Creating PnLTotals...\n", "record": {"elapsed": {"repr": "0:01:41.485695", "seconds": 101.485695}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 558, "message": "Creating PnLTotals...", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:02:59.778237+05:30", "timestamp": 1755783179.778237}}}
{"text": "2025-08-21 19:02:59.778 | DEBUG    | app.services.dhan_client:get_pnl:565 - PnLTotals created successfully\n", "record": {"elapsed": {"repr": "0:01:41.486440", "seconds": 101.48644}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 565, "message": "PnLTotals created successfully", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:02:59.778982+05:30", "timestamp": 1755783179.778982}}}
{"text": "2025-08-21 19:02:59.780 | DEBUG    | app.services.dhan_client:get_pnl:574 - Creating PnL model...\n", "record": {"elapsed": {"repr": "0:01:41.487557", "seconds": 101.487557}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 574, "message": "Creating PnL model...", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:02:59.780099+05:30", "timestamp": 1755783179.780099}}}
{"text": "2025-08-21 19:02:59.780 | DEBUG    | app.services.dhan_client:get_pnl:575 - Model fields: totals=<class 'app.models.schemas.PnLTotals'>, perSymbol=5, updated_at=2025-08-21 19:02:59.772971+05:30, trading_day=2025-08-21\n", "record": {"elapsed": {"repr": "0:01:41.488422", "seconds": 101.488422}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 575, "message": "Model fields: totals=<class 'app.models.schemas.PnLTotals'>, perSymbol=5, updated_at=2025-08-21 19:02:59.772971+05:30, trading_day=2025-08-21", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:02:59.780964+05:30", "timestamp": 1755783179.780964}}}
{"text": "2025-08-21 19:02:59.781 | DEBUG    | app.services.dhan_client:get_pnl:584 - Created PnL model: totals=PnLTotals(realized=0.0, unrealized=662621.55, day=662621.55, currency='INR') per_symbol=[PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1727, avg=618.93, ltp=367.42, unrealized=-434354.28, today_pnl=-434354.28), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=167, avg=948.57, ltp=1206.92, unrealized=-43145.04, today_pnl=-43145.04), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=1347, avg=801.44, ltp=1989.75, unrealized=1600655.29, today_pnl=1600655.29), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=143, avg=1427.62, ltp=1236.53, unrealized=27325.31, today_pnl=27325.31), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=438, avg=1994.48, ltp=880.64, unrealized=-487859.73, today_pnl=-487859.73)] updated_at=datetime.datetime(2025, 8, 21, 19, 2, 59, 772971, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))) trading_day='2025-08-21'\n", "record": {"elapsed": {"repr": "0:01:41.489311", "seconds": 101.489311}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 584, "message": "Created PnL model: totals=PnLTotals(realized=0.0, unrealized=662621.55, day=662621.55, currency='INR') per_symbol=[PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1727, avg=618.93, ltp=367.42, unrealized=-434354.28, today_pnl=-434354.28), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=167, avg=948.57, ltp=1206.92, unrealized=-43145.04, today_pnl=-43145.04), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=1347, avg=801.44, ltp=1989.75, unrealized=1600655.29, today_pnl=1600655.29), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=143, avg=1427.62, ltp=1236.53, unrealized=27325.31, today_pnl=27325.31), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=438, avg=1994.48, ltp=880.64, unrealized=-487859.73, today_pnl=-487859.73)] updated_at=datetime.datetime(2025, 8, 21, 19, 2, 59, 772971, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))) trading_day='2025-08-21'", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:02:59.781853+05:30", "timestamp": 1755783179.781853}}}
{"text": "2025-08-21 19:02:59.782 | DEBUG    | app.services.dhan_client:get_pnl:585 - PnL model fields: {'totals': PnLTotals(realized=0.0, unrealized=662621.55, day=662621.55, currency='INR'), 'per_symbol': [PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1727, avg=618.93, ltp=367.42, unrealized=-434354.28, today_pnl=-434354.28), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=167, avg=948.57, ltp=1206.92, unrealized=-43145.04, today_pnl=-43145.04), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=1347, avg=801.44, ltp=1989.75, unrealized=1600655.29, today_pnl=1600655.29), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=143, avg=1427.62, ltp=1236.53, unrealized=27325.31, today_pnl=27325.31), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=438, avg=1994.48, ltp=880.64, unrealized=-487859.73, today_pnl=-487859.73)], 'updated_at': datetime.datetime(2025, 8, 21, 19, 2, 59, 772971, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))), 'trading_day': '2025-08-21'}\n", "record": {"elapsed": {"repr": "0:01:41.490238", "seconds": 101.490238}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 585, "message": "PnL model fields: {'totals': PnLTotals(realized=0.0, unrealized=662621.55, day=662621.55, currency='INR'), 'per_symbol': [PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1727, avg=618.93, ltp=367.42, unrealized=-434354.28, today_pnl=-434354.28), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=167, avg=948.57, ltp=1206.92, unrealized=-43145.04, today_pnl=-43145.04), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=1347, avg=801.44, ltp=1989.75, unrealized=1600655.29, today_pnl=1600655.29), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=143, avg=1427.62, ltp=1236.53, unrealized=27325.31, today_pnl=27325.31), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=438, avg=1994.48, ltp=880.64, unrealized=-487859.73, today_pnl=-487859.73)], 'updated_at': datetime.datetime(2025, 8, 21, 19, 2, 59, 772971, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))), 'trading_day': '2025-08-21'}", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:02:59.782780+05:30", "timestamp": 1755783179.78278}}}
{"text": "2025-08-21 19:02:59.783 | INFO     | app.services.dhan_client:get_pnl:587 - P&L calculation completed successfully: 5 symbols, unrealized=‚Çπ662621.55\n", "record": {"elapsed": {"repr": "0:01:41.491333", "seconds": 101.491333}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 587, "message": "P&L calculation completed successfully: 5 symbols, unrealized=‚Çπ662621.55", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:02:59.783875+05:30", "timestamp": 1755783179.783875}}}
{"text": "2025-08-21 19:02:59.785 | DEBUG    | app.ws.live:emit_delta:408 - Emitted pnl delta: seq=112\n", "record": {"elapsed": {"repr": "0:01:41.492523", "seconds": 101.492523}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "emit_delta", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 408, "message": "Emitted pnl delta: seq=112", "module": "live", "name": "app.ws.live", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:02:59.785065+05:30", "timestamp": 1755783179.785065}}}
{"text": "2025-08-21 19:03:00.287 | DEBUG    | app.ws.live:emit_delta:408 - Emitted positions delta: seq=113\n", "record": {"elapsed": {"repr": "0:01:41.995004", "seconds": 101.995004}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "emit_delta", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 408, "message": "Emitted positions delta: seq=113", "module": "live", "name": "app.ws.live", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:03:00.287546+05:30", "timestamp": 1755783180.287546}}}
{"text": "2025-08-21 19:03:00.694 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:01:42.402230", "seconds": 102.40223}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:03:00.694772+05:30", "timestamp": 1755783180.694772}}}
{"text": "2025-08-21 19:03:00.695 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:01:42.403279", "seconds": 102.403279}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:03:00.695821+05:30", "timestamp": 1755783180.695821}}}
{"text": "2025-08-21 19:03:00.696 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:01:42.403985", "seconds": 102.403985}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:03:00.696527+05:30", "timestamp": 1755783180.696527}}}
{"text": "2025-08-21 19:03:00.697 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:01:42.404502", "seconds": 102.404502}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:03:00.697044+05:30", "timestamp": 1755783180.697044}}}
{"text": "2025-08-21 19:03:00.697 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:01:42.405008", "seconds": 102.405008}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:03:00.697550+05:30", "timestamp": 1755783180.69755}}}
{"text": "2025-08-21 19:03:00.697 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:01:42.405429", "seconds": 102.405429}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:03:00.697971+05:30", "timestamp": 1755783180.697971}}}
{"text": "2025-08-21 19:03:00.698 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:01:42.405924", "seconds": 102.405924}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:03:00.698466+05:30", "timestamp": 1755783180.698466}}}
{"text": "2025-08-21 19:03:00.698 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:01:42.406438", "seconds": 102.406438}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:03:00.698980+05:30", "timestamp": 1755783180.69898}}}
{"text": "2025-08-21 19:03:00.699 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:01:42.406975", "seconds": 102.406975}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:03:00.699517+05:30", "timestamp": 1755783180.699517}}}
{"text": "2025-08-21 19:03:00.700 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:01:42.407727", "seconds": 102.407727}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:03:00.700269+05:30", "timestamp": 1755783180.700269}}}
{"text": "2025-08-21 19:03:01.507 | INFO     | app.services.dhan_client:get_pnl:489 - Starting accurate P&L calculation\n", "record": {"elapsed": {"repr": "0:01:43.215092", "seconds": 103.215092}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 489, "message": "Starting accurate P&L calculation", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:03:01.507634+05:30", "timestamp": 1755783181.507634}}}
{"text": "2025-08-21 19:03:01.509 | INFO     | app.services.dhan_client:get_pnl:491 - Fetched 5 positions\n", "record": {"elapsed": {"repr": "0:01:43.216667", "seconds": 103.216667}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 491, "message": "Fetched 5 positions", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:03:01.509209+05:30", "timestamp": 1755783181.509209}}}
{"text": "2025-08-21 19:03:01.509 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for RELIANCE: unrealized=-435519.3, today=-435519.3\n", "record": {"elapsed": {"repr": "0:01:43.217388", "seconds": 103.217388}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for RELIANCE: unrealized=-435519.3, today=-435519.3", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:03:01.509930+05:30", "timestamp": 1755783181.50993}}}
{"text": "2025-08-21 19:03:01.510 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for TCS: unrealized=-40997.11, today=-40997.11\n", "record": {"elapsed": {"repr": "0:01:43.218034", "seconds": 103.218034}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for TCS: unrealized=-40997.11, today=-40997.11", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:03:01.510576+05:30", "timestamp": 1755783181.510576}}}
{"text": "2025-08-21 19:03:01.511 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for HDFC: unrealized=1578976.77, today=1578976.77\n", "record": {"elapsed": {"repr": "0:01:43.218998", "seconds": 103.218998}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for HDFC: unrealized=1578976.77, today=1578976.77", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:03:01.511540+05:30", "timestamp": 1755783181.51154}}}
{"text": "2025-08-21 19:03:01.512 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for INFY: unrealized=24897.56, today=24897.56\n", "record": {"elapsed": {"repr": "0:01:43.219922", "seconds": 103.219922}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for INFY: unrealized=24897.56, today=24897.56", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:03:01.512464+05:30", "timestamp": 1755783181.512464}}}
{"text": "2025-08-21 19:03:01.513 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for ICICIBANK: unrealized=-491314.64, today=-491314.64\n", "record": {"elapsed": {"repr": "0:01:43.221254", "seconds": 103.221254}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for ICICIBANK: unrealized=-491314.64, today=-491314.64", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:03:01.513796+05:30", "timestamp": 1755783181.513796}}}
{"text": "2025-08-21 19:03:01.514 | INFO     | app.services.dhan_client:get_pnl:545 - Calculated totals - realized: 0.0, unrealized: 636043.28, day: 636043.28\n", "record": {"elapsed": {"repr": "0:01:43.222300", "seconds": 103.2223}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 545, "message": "Calculated totals - realized: 0.0, unrealized: 636043.28, day: 636043.28", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:03:01.514842+05:30", "timestamp": 1755783181.514842}}}
{"text": "2025-08-21 19:03:01.515 | DEBUG    | app.services.dhan_client:get_pnl:554 - PnL consistency check passed: drift=‚Çπ0.00\n", "record": {"elapsed": {"repr": "0:01:43.223176", "seconds": 103.223176}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 554, "message": "PnL consistency check passed: drift=‚Çπ0.00", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:03:01.515718+05:30", "timestamp": 1755783181.515718}}}
{"text": "2025-08-21 19:03:01.516 | DEBUG    | app.services.dhan_client:get_pnl:558 - Creating PnLTotals...\n", "record": {"elapsed": {"repr": "0:01:43.224010", "seconds": 103.22401}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 558, "message": "Creating PnLTotals...", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:03:01.516552+05:30", "timestamp": 1755783181.516552}}}
{"text": "2025-08-21 19:03:01.517 | DEBUG    | app.services.dhan_client:get_pnl:565 - PnLTotals created successfully\n", "record": {"elapsed": {"repr": "0:01:43.225299", "seconds": 103.225299}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 565, "message": "PnLTotals created successfully", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:03:01.517841+05:30", "timestamp": 1755783181.517841}}}
{"text": "2025-08-21 19:03:01.518 | DEBUG    | app.services.dhan_client:get_pnl:574 - Creating PnL model...\n", "record": {"elapsed": {"repr": "0:01:43.226000", "seconds": 103.226}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 574, "message": "Creating PnL model...", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:03:01.518542+05:30", "timestamp": 1755783181.518542}}}
{"text": "2025-08-21 19:03:01.519 | DEBUG    | app.services.dhan_client:get_pnl:575 - Model fields: totals=<class 'app.models.schemas.PnLTotals'>, perSymbol=5, updated_at=2025-08-21 19:03:01.509826+05:30, trading_day=2025-08-21\n", "record": {"elapsed": {"repr": "0:01:43.226834", "seconds": 103.226834}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 575, "message": "Model fields: totals=<class 'app.models.schemas.PnLTotals'>, perSymbol=5, updated_at=2025-08-21 19:03:01.509826+05:30, trading_day=2025-08-21", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:03:01.519376+05:30", "timestamp": 1755783181.519376}}}
{"text": "2025-08-21 19:03:01.520 | DEBUG    | app.services.dhan_client:get_pnl:584 - Created PnL model: totals=PnLTotals(realized=0.0, unrealized=636043.28, day=636043.28, currency='INR') per_symbol=[PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1727, avg=618.93, ltp=366.75, unrealized=-435519.3, today_pnl=-435519.3), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=167, avg=948.57, ltp=1194.06, unrealized=-40997.11, today_pnl=-40997.11), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=1347, avg=801.44, ltp=1973.66, unrealized=1578976.77, today_pnl=1578976.77), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=143, avg=1427.62, ltp=1253.51, unrealized=24897.56, today_pnl=24897.56), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=438, avg=1994.48, ltp=872.76, unrealized=-491314.64, today_pnl=-491314.64)] updated_at=datetime.datetime(2025, 8, 21, 19, 3, 1, 509826, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))) trading_day='2025-08-21'\n", "record": {"elapsed": {"repr": "0:01:43.227934", "seconds": 103.227934}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 584, "message": "Created PnL model: totals=PnLTotals(realized=0.0, unrealized=636043.28, day=636043.28, currency='INR') per_symbol=[PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1727, avg=618.93, ltp=366.75, unrealized=-435519.3, today_pnl=-435519.3), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=167, avg=948.57, ltp=1194.06, unrealized=-40997.11, today_pnl=-40997.11), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=1347, avg=801.44, ltp=1973.66, unrealized=1578976.77, today_pnl=1578976.77), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=143, avg=1427.62, ltp=1253.51, unrealized=24897.56, today_pnl=24897.56), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=438, avg=1994.48, ltp=872.76, unrealized=-491314.64, today_pnl=-491314.64)] updated_at=datetime.datetime(2025, 8, 21, 19, 3, 1, 509826, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))) trading_day='2025-08-21'", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:03:01.520476+05:30", "timestamp": 1755783181.520476}}}
{"text": "2025-08-21 19:03:01.522 | DEBUG    | app.services.dhan_client:get_pnl:585 - PnL model fields: {'totals': PnLTotals(realized=0.0, unrealized=636043.28, day=636043.28, currency='INR'), 'per_symbol': [PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1727, avg=618.93, ltp=366.75, unrealized=-435519.3, today_pnl=-435519.3), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=167, avg=948.57, ltp=1194.06, unrealized=-40997.11, today_pnl=-40997.11), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=1347, avg=801.44, ltp=1973.66, unrealized=1578976.77, today_pnl=1578976.77), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=143, avg=1427.62, ltp=1253.51, unrealized=24897.56, today_pnl=24897.56), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=438, avg=1994.48, ltp=872.76, unrealized=-491314.64, today_pnl=-491314.64)], 'updated_at': datetime.datetime(2025, 8, 21, 19, 3, 1, 509826, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))), 'trading_day': '2025-08-21'}\n", "record": {"elapsed": {"repr": "0:01:43.229757", "seconds": 103.229757}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 585, "message": "PnL model fields: {'totals': PnLTotals(realized=0.0, unrealized=636043.28, day=636043.28, currency='INR'), 'per_symbol': [PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1727, avg=618.93, ltp=366.75, unrealized=-435519.3, today_pnl=-435519.3), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=167, avg=948.57, ltp=1194.06, unrealized=-40997.11, today_pnl=-40997.11), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=1347, avg=801.44, ltp=1973.66, unrealized=1578976.77, today_pnl=1578976.77), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=143, avg=1427.62, ltp=1253.51, unrealized=24897.56, today_pnl=24897.56), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=438, avg=1994.48, ltp=872.76, unrealized=-491314.64, today_pnl=-491314.64)], 'updated_at': datetime.datetime(2025, 8, 21, 19, 3, 1, 509826, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))), 'trading_day': '2025-08-21'}", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:03:01.522299+05:30", "timestamp": 1755783181.522299}}}
{"text": "2025-08-21 19:03:01.523 | INFO     | app.services.dhan_client:get_pnl:587 - P&L calculation completed successfully: 5 symbols, unrealized=‚Çπ636043.28\n", "record": {"elapsed": {"repr": "0:01:43.231021", "seconds": 103.231021}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 587, "message": "P&L calculation completed successfully: 5 symbols, unrealized=‚Çπ636043.28", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:03:01.523563+05:30", "timestamp": 1755783181.523563}}}
{"text": "2025-08-21 19:03:01.525 | DEBUG    | app.ws.live:emit_delta:408 - Emitted pnl delta: seq=114\n", "record": {"elapsed": {"repr": "0:01:43.232583", "seconds": 103.232583}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "emit_delta", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 408, "message": "Emitted pnl delta: seq=114", "module": "live", "name": "app.ws.live", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:03:01.525125+05:30", "timestamp": 1755783181.525125}}}
{"text": "2025-08-21 19:03:02.271 | DEBUG    | app.ws.live:emit_delta:408 - Emitted positions delta: seq=115\n", "record": {"elapsed": {"repr": "0:01:43.978632", "seconds": 103.978632}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "emit_delta", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 408, "message": "Emitted positions delta: seq=115", "module": "live", "name": "app.ws.live", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:03:02.271174+05:30", "timestamp": 1755783182.271174}}}
{"text": "2025-08-21 19:03:02.701 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:01:44.409394", "seconds": 104.409394}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:03:02.701936+05:30", "timestamp": 1755783182.701936}}}
{"text": "2025-08-21 19:03:02.702 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:01:44.410109", "seconds": 104.410109}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:03:02.702651+05:30", "timestamp": 1755783182.702651}}}
{"text": "2025-08-21 19:03:02.703 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:01:44.410525", "seconds": 104.410525}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:03:02.703067+05:30", "timestamp": 1755783182.703067}}}
{"text": "2025-08-21 19:03:02.703 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:01:44.410985", "seconds": 104.410985}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:03:02.703527+05:30", "timestamp": 1755783182.703527}}}
{"text": "2025-08-21 19:03:02.703 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:01:44.411404", "seconds": 104.411404}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:03:02.703946+05:30", "timestamp": 1755783182.703946}}}
{"text": "2025-08-21 19:03:02.704 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:01:44.411852", "seconds": 104.411852}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:03:02.704394+05:30", "timestamp": 1755783182.704394}}}
{"text": "2025-08-21 19:03:02.704 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:01:44.412269", "seconds": 104.412269}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:03:02.704811+05:30", "timestamp": 1755783182.704811}}}
{"text": "2025-08-21 19:03:02.705 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:01:44.412740", "seconds": 104.41274}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:03:02.705282+05:30", "timestamp": 1755783182.705282}}}
{"text": "2025-08-21 19:03:02.705 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:01:44.413102", "seconds": 104.413102}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:03:02.705644+05:30", "timestamp": 1755783182.705644}}}
{"text": "2025-08-21 19:03:02.706 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:01:44.413488", "seconds": 104.413488}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:03:02.706030+05:30", "timestamp": 1755783182.70603}}}
{"text": "2025-08-21 19:03:03.114 | INFO     | app.services.dhan_client:get_pnl:489 - Starting accurate P&L calculation\n", "record": {"elapsed": {"repr": "0:01:44.822239", "seconds": 104.822239}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 489, "message": "Starting accurate P&L calculation", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:03:03.114781+05:30", "timestamp": 1755783183.114781}}}
{"text": "2025-08-21 19:03:03.115 | INFO     | app.services.dhan_client:get_pnl:491 - Fetched 5 positions\n", "record": {"elapsed": {"repr": "0:01:44.822890", "seconds": 104.82289}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 491, "message": "Fetched 5 positions", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:03:03.115432+05:30", "timestamp": 1755783183.115432}}}
{"text": "2025-08-21 19:03:03.116 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for RELIANCE: unrealized=-441393.8, today=-441393.8\n", "record": {"elapsed": {"repr": "0:01:44.824108", "seconds": 104.824108}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for RELIANCE: unrealized=-441393.8, today=-441393.8", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:03:03.116650+05:30", "timestamp": 1755783183.11665}}}
{"text": "2025-08-21 19:03:03.117 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for TCS: unrealized=-39211.94, today=-39211.94\n", "record": {"elapsed": {"repr": "0:01:44.824658", "seconds": 104.824658}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for TCS: unrealized=-39211.94, today=-39211.94", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:03:03.117200+05:30", "timestamp": 1755783183.1172}}}
{"text": "2025-08-21 19:03:03.117 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for HDFC: unrealized=1596953.82, today=1596953.82\n", "record": {"elapsed": {"repr": "0:01:44.825156", "seconds": 104.825156}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for HDFC: unrealized=1596953.82, today=1596953.82", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:03:03.117698+05:30", "timestamp": 1755783183.117698}}}
{"text": "2025-08-21 19:03:03.118 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for INFY: unrealized=24439.34, today=24439.34\n", "record": {"elapsed": {"repr": "0:01:44.825737", "seconds": 104.825737}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for INFY: unrealized=24439.34, today=24439.34", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:03:03.118279+05:30", "timestamp": 1755783183.118279}}}
{"text": "2025-08-21 19:03:03.119 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for ICICIBANK: unrealized=-492269.18, today=-492269.18\n", "record": {"elapsed": {"repr": "0:01:44.827350", "seconds": 104.82735}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for ICICIBANK: unrealized=-492269.18, today=-492269.18", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:03:03.119892+05:30", "timestamp": 1755783183.119892}}}
{"text": "2025-08-21 19:03:03.120 | INFO     | app.services.dhan_client:get_pnl:545 - Calculated totals - realized: 0.0, unrealized: 648518.24, day: 648518.24\n", "record": {"elapsed": {"repr": "0:01:44.828114", "seconds": 104.828114}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 545, "message": "Calculated totals - realized: 0.0, unrealized: 648518.24, day: 648518.24", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:03:03.120656+05:30", "timestamp": 1755783183.120656}}}
{"text": "2025-08-21 19:03:03.121 | DEBUG    | app.services.dhan_client:get_pnl:554 - PnL consistency check passed: drift=‚Çπ0.00\n", "record": {"elapsed": {"repr": "0:01:44.828748", "seconds": 104.828748}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 554, "message": "PnL consistency check passed: drift=‚Çπ0.00", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:03:03.121290+05:30", "timestamp": 1755783183.12129}}}
{"text": "2025-08-21 19:03:03.121 | DEBUG    | app.services.dhan_client:get_pnl:558 - Creating PnLTotals...\n", "record": {"elapsed": {"repr": "0:01:44.829253", "seconds": 104.829253}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 558, "message": "Creating PnLTotals...", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:03:03.121795+05:30", "timestamp": 1755783183.121795}}}
{"text": "2025-08-21 19:03:03.122 | DEBUG    | app.services.dhan_client:get_pnl:565 - PnLTotals created successfully\n", "record": {"elapsed": {"repr": "0:01:44.829668", "seconds": 104.829668}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 565, "message": "PnLTotals created successfully", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:03:03.122210+05:30", "timestamp": 1755783183.12221}}}
{"text": "2025-08-21 19:03:03.122 | DEBUG    | app.services.dhan_client:get_pnl:574 - Creating PnL model...\n", "record": {"elapsed": {"repr": "0:01:44.830129", "seconds": 104.830129}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 574, "message": "Creating PnL model...", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:03:03.122671+05:30", "timestamp": 1755783183.122671}}}
{"text": "2025-08-21 19:03:03.123 | DEBUG    | app.services.dhan_client:get_pnl:575 - Model fields: totals=<class 'app.models.schemas.PnLTotals'>, perSymbol=5, updated_at=2025-08-21 19:03:03.116562+05:30, trading_day=2025-08-21\n", "record": {"elapsed": {"repr": "0:01:44.830609", "seconds": 104.830609}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 575, "message": "Model fields: totals=<class 'app.models.schemas.PnLTotals'>, perSymbol=5, updated_at=2025-08-21 19:03:03.116562+05:30, trading_day=2025-08-21", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:03:03.123151+05:30", "timestamp": 1755783183.123151}}}
{"text": "2025-08-21 19:03:03.123 | DEBUG    | app.services.dhan_client:get_pnl:584 - Created PnL model: totals=PnLTotals(realized=0.0, unrealized=648518.24, day=648518.24, currency='INR') per_symbol=[PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1727, avg=618.93, ltp=363.35, unrealized=-441393.8, today_pnl=-441393.8), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=167, avg=948.57, ltp=1183.37, unrealized=-39211.94, today_pnl=-39211.94), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=1347, avg=801.44, ltp=1987.0, unrealized=1596953.82, today_pnl=1596953.82), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=143, avg=1427.62, ltp=1256.72, unrealized=24439.34, today_pnl=24439.34), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=438, avg=1994.48, ltp=870.58, unrealized=-492269.18, today_pnl=-492269.18)] updated_at=datetime.datetime(2025, 8, 21, 19, 3, 3, 116562, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))) trading_day='2025-08-21'\n", "record": {"elapsed": {"repr": "0:01:44.831331", "seconds": 104.831331}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 584, "message": "Created PnL model: totals=PnLTotals(realized=0.0, unrealized=648518.24, day=648518.24, currency='INR') per_symbol=[PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1727, avg=618.93, ltp=363.35, unrealized=-441393.8, today_pnl=-441393.8), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=167, avg=948.57, ltp=1183.37, unrealized=-39211.94, today_pnl=-39211.94), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=1347, avg=801.44, ltp=1987.0, unrealized=1596953.82, today_pnl=1596953.82), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=143, avg=1427.62, ltp=1256.72, unrealized=24439.34, today_pnl=24439.34), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=438, avg=1994.48, ltp=870.58, unrealized=-492269.18, today_pnl=-492269.18)] updated_at=datetime.datetime(2025, 8, 21, 19, 3, 3, 116562, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))) trading_day='2025-08-21'", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:03:03.123873+05:30", "timestamp": 1755783183.123873}}}
{"text": "2025-08-21 19:03:03.125 | DEBUG    | app.services.dhan_client:get_pnl:585 - PnL model fields: {'totals': PnLTotals(realized=0.0, unrealized=648518.24, day=648518.24, currency='INR'), 'per_symbol': [PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1727, avg=618.93, ltp=363.35, unrealized=-441393.8, today_pnl=-441393.8), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=167, avg=948.57, ltp=1183.37, unrealized=-39211.94, today_pnl=-39211.94), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=1347, avg=801.44, ltp=1987.0, unrealized=1596953.82, today_pnl=1596953.82), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=143, avg=1427.62, ltp=1256.72, unrealized=24439.34, today_pnl=24439.34), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=438, avg=1994.48, ltp=870.58, unrealized=-492269.18, today_pnl=-492269.18)], 'updated_at': datetime.datetime(2025, 8, 21, 19, 3, 3, 116562, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))), 'trading_day': '2025-08-21'}\n", "record": {"elapsed": {"repr": "0:01:44.832602", "seconds": 104.832602}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 585, "message": "PnL model fields: {'totals': PnLTotals(realized=0.0, unrealized=648518.24, day=648518.24, currency='INR'), 'per_symbol': [PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1727, avg=618.93, ltp=363.35, unrealized=-441393.8, today_pnl=-441393.8), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=167, avg=948.57, ltp=1183.37, unrealized=-39211.94, today_pnl=-39211.94), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=1347, avg=801.44, ltp=1987.0, unrealized=1596953.82, today_pnl=1596953.82), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=143, avg=1427.62, ltp=1256.72, unrealized=24439.34, today_pnl=24439.34), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=438, avg=1994.48, ltp=870.58, unrealized=-492269.18, today_pnl=-492269.18)], 'updated_at': datetime.datetime(2025, 8, 21, 19, 3, 3, 116562, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))), 'trading_day': '2025-08-21'}", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:03:03.125144+05:30", "timestamp": 1755783183.125144}}}
{"text": "2025-08-21 19:03:03.125 | INFO     | app.services.dhan_client:get_pnl:587 - P&L calculation completed successfully: 5 symbols, unrealized=‚Çπ648518.24\n", "record": {"elapsed": {"repr": "0:01:44.833295", "seconds": 104.833295}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 587, "message": "P&L calculation completed successfully: 5 symbols, unrealized=‚Çπ648518.24", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:03:03.125837+05:30", "timestamp": 1755783183.125837}}}
{"text": "2025-08-21 19:03:03.126 | DEBUG    | app.ws.live:emit_delta:408 - Emitted pnl delta: seq=116\n", "record": {"elapsed": {"repr": "0:01:44.834416", "seconds": 104.834416}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "emit_delta", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 408, "message": "Emitted pnl delta: seq=116", "module": "live", "name": "app.ws.live", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:03:03.126958+05:30", "timestamp": 1755783183.126958}}}
{"text": "2025-08-21 19:03:04.232 | DEBUG    | app.ws.live:emit_delta:408 - Emitted positions delta: seq=117\n", "record": {"elapsed": {"repr": "0:01:45.939990", "seconds": 105.93999}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "emit_delta", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 408, "message": "Emitted positions delta: seq=117", "module": "live", "name": "app.ws.live", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:03:04.232532+05:30", "timestamp": 1755783184.232532}}}
{"text": "2025-08-21 19:03:04.706 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:01:46.414224", "seconds": 106.414224}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:03:04.706766+05:30", "timestamp": 1755783184.706766}}}
{"text": "2025-08-21 19:03:04.707 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:01:46.415083", "seconds": 106.415083}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:03:04.707625+05:30", "timestamp": 1755783184.707625}}}
{"text": "2025-08-21 19:03:04.708 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:01:46.415748", "seconds": 106.415748}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:03:04.708290+05:30", "timestamp": 1755783184.70829}}}
{"text": "2025-08-21 19:03:04.709 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:01:46.416850", "seconds": 106.41685}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:03:04.709392+05:30", "timestamp": 1755783184.709392}}}
{"text": "2025-08-21 19:03:04.709 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:01:46.417376", "seconds": 106.417376}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:03:04.709918+05:30", "timestamp": 1755783184.709918}}}
{"text": "2025-08-21 19:03:04.710 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:01:46.418039", "seconds": 106.418039}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:03:04.710581+05:30", "timestamp": 1755783184.710581}}}
{"text": "2025-08-21 19:03:04.711 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:01:46.418656", "seconds": 106.418656}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:03:04.711198+05:30", "timestamp": 1755783184.711198}}}
{"text": "2025-08-21 19:03:04.712 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:01:46.419607", "seconds": 106.419607}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:03:04.712149+05:30", "timestamp": 1755783184.712149}}}
{"text": "2025-08-21 19:03:04.712 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:01:46.420160", "seconds": 106.42016}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:03:04.712702+05:30", "timestamp": 1755783184.712702}}}
{"text": "2025-08-21 19:03:04.713 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:01:46.420746", "seconds": 106.420746}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:03:04.713288+05:30", "timestamp": 1755783184.713288}}}
{"text": "2025-08-21 19:03:05.020 | INFO     | app.services.dhan_client:get_pnl:489 - Starting accurate P&L calculation\n", "record": {"elapsed": {"repr": "0:01:46.728279", "seconds": 106.728279}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 489, "message": "Starting accurate P&L calculation", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:03:05.020821+05:30", "timestamp": 1755783185.020821}}}
{"text": "2025-08-21 19:03:05.021 | INFO     | app.services.dhan_client:get_pnl:491 - Fetched 5 positions\n", "record": {"elapsed": {"repr": "0:01:46.728969", "seconds": 106.728969}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 491, "message": "Fetched 5 positions", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:03:05.021511+05:30", "timestamp": 1755783185.021511}}}
{"text": "2025-08-21 19:03:05.022 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for RELIANCE: unrealized=-446601.46, today=-446601.46\n", "record": {"elapsed": {"repr": "0:01:46.729594", "seconds": 106.729594}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for RELIANCE: unrealized=-446601.46, today=-446601.46", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:03:05.022136+05:30", "timestamp": 1755783185.022136}}}
{"text": "2025-08-21 19:03:05.022 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for TCS: unrealized=-41498.96, today=-41498.96\n", "record": {"elapsed": {"repr": "0:01:46.730190", "seconds": 106.73019}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for TCS: unrealized=-41498.96, today=-41498.96", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:03:05.022732+05:30", "timestamp": 1755783185.022732}}}
{"text": "2025-08-21 19:03:05.023 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for HDFC: unrealized=1622553.33, today=1622553.33\n", "record": {"elapsed": {"repr": "0:01:46.730730", "seconds": 106.73073}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for HDFC: unrealized=1622553.33, today=1622553.33", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:03:05.023272+05:30", "timestamp": 1755783185.023272}}}
{"text": "2025-08-21 19:03:05.023 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for INFY: unrealized=27478.82, today=27478.82\n", "record": {"elapsed": {"repr": "0:01:46.731267", "seconds": 106.731267}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for INFY: unrealized=27478.82, today=27478.82", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:03:05.023809+05:30", "timestamp": 1755783185.023809}}}
{"text": "2025-08-21 19:03:05.024 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for ICICIBANK: unrealized=-494033.59, today=-494033.59\n", "record": {"elapsed": {"repr": "0:01:46.731854", "seconds": 106.731854}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for ICICIBANK: unrealized=-494033.59, today=-494033.59", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:03:05.024396+05:30", "timestamp": 1755783185.024396}}}
{"text": "2025-08-21 19:03:05.025 | INFO     | app.services.dhan_client:get_pnl:545 - Calculated totals - realized: 0.0, unrealized: 667898.14, day: 667898.14\n", "record": {"elapsed": {"repr": "0:01:46.733198", "seconds": 106.733198}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 545, "message": "Calculated totals - realized: 0.0, unrealized: 667898.14, day: 667898.14", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:03:05.025740+05:30", "timestamp": 1755783185.02574}}}
{"text": "2025-08-21 19:03:05.026 | DEBUG    | app.services.dhan_client:get_pnl:554 - PnL consistency check passed: drift=‚Çπ0.00\n", "record": {"elapsed": {"repr": "0:01:46.733983", "seconds": 106.733983}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 554, "message": "PnL consistency check passed: drift=‚Çπ0.00", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:03:05.026525+05:30", "timestamp": 1755783185.026525}}}
{"text": "2025-08-21 19:03:05.027 | DEBUG    | app.services.dhan_client:get_pnl:558 - Creating PnLTotals...\n", "record": {"elapsed": {"repr": "0:01:46.734677", "seconds": 106.734677}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 558, "message": "Creating PnLTotals...", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:03:05.027219+05:30", "timestamp": 1755783185.027219}}}
{"text": "2025-08-21 19:03:05.027 | DEBUG    | app.services.dhan_client:get_pnl:565 - PnLTotals created successfully\n", "record": {"elapsed": {"repr": "0:01:46.735315", "seconds": 106.735315}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 565, "message": "PnLTotals created successfully", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:03:05.027857+05:30", "timestamp": 1755783185.027857}}}
{"text": "2025-08-21 19:03:05.028 | DEBUG    | app.services.dhan_client:get_pnl:574 - Creating PnL model...\n", "record": {"elapsed": {"repr": "0:01:46.735893", "seconds": 106.735893}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 574, "message": "Creating PnL model...", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:03:05.028435+05:30", "timestamp": 1755783185.028435}}}
{"text": "2025-08-21 19:03:05.029 | DEBUG    | app.services.dhan_client:get_pnl:575 - Model fields: totals=<class 'app.models.schemas.PnLTotals'>, perSymbol=5, updated_at=2025-08-21 19:03:05.022051+05:30, trading_day=2025-08-21\n", "record": {"elapsed": {"repr": "0:01:46.736684", "seconds": 106.736684}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 575, "message": "Model fields: totals=<class 'app.models.schemas.PnLTotals'>, perSymbol=5, updated_at=2025-08-21 19:03:05.022051+05:30, trading_day=2025-08-21", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:03:05.029226+05:30", "timestamp": 1755783185.029226}}}
{"text": "2025-08-21 19:03:05.030 | DEBUG    | app.services.dhan_client:get_pnl:584 - Created PnL model: totals=PnLTotals(realized=0.0, unrealized=667898.14, day=667898.14, currency='INR') per_symbol=[PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1727, avg=618.93, ltp=360.33, unrealized=-446601.46, today_pnl=-446601.46), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=167, avg=948.57, ltp=1197.07, unrealized=-41498.96, today_pnl=-41498.96), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=1347, avg=801.44, ltp=2006.01, unrealized=1622553.33, today_pnl=1622553.33), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=143, avg=1427.62, ltp=1235.46, unrealized=27478.82, today_pnl=27478.82), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=438, avg=1994.48, ltp=866.55, unrealized=-494033.59, today_pnl=-494033.59)] updated_at=datetime.datetime(2025, 8, 21, 19, 3, 5, 22051, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))) trading_day='2025-08-21'\n", "record": {"elapsed": {"repr": "0:01:46.737729", "seconds": 106.737729}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 584, "message": "Created PnL model: totals=PnLTotals(realized=0.0, unrealized=667898.14, day=667898.14, currency='INR') per_symbol=[PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1727, avg=618.93, ltp=360.33, unrealized=-446601.46, today_pnl=-446601.46), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=167, avg=948.57, ltp=1197.07, unrealized=-41498.96, today_pnl=-41498.96), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=1347, avg=801.44, ltp=2006.01, unrealized=1622553.33, today_pnl=1622553.33), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=143, avg=1427.62, ltp=1235.46, unrealized=27478.82, today_pnl=27478.82), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=438, avg=1994.48, ltp=866.55, unrealized=-494033.59, today_pnl=-494033.59)] updated_at=datetime.datetime(2025, 8, 21, 19, 3, 5, 22051, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))) trading_day='2025-08-21'", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:03:05.030271+05:30", "timestamp": 1755783185.030271}}}
{"text": "2025-08-21 19:03:05.031 | DEBUG    | app.services.dhan_client:get_pnl:585 - PnL model fields: {'totals': PnLTotals(realized=0.0, unrealized=667898.14, day=667898.14, currency='INR'), 'per_symbol': [PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1727, avg=618.93, ltp=360.33, unrealized=-446601.46, today_pnl=-446601.46), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=167, avg=948.57, ltp=1197.07, unrealized=-41498.96, today_pnl=-41498.96), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=1347, avg=801.44, ltp=2006.01, unrealized=1622553.33, today_pnl=1622553.33), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=143, avg=1427.62, ltp=1235.46, unrealized=27478.82, today_pnl=27478.82), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=438, avg=1994.48, ltp=866.55, unrealized=-494033.59, today_pnl=-494033.59)], 'updated_at': datetime.datetime(2025, 8, 21, 19, 3, 5, 22051, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))), 'trading_day': '2025-08-21'}\n", "record": {"elapsed": {"repr": "0:01:46.738588", "seconds": 106.738588}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 585, "message": "PnL model fields: {'totals': PnLTotals(realized=0.0, unrealized=667898.14, day=667898.14, currency='INR'), 'per_symbol': [PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1727, avg=618.93, ltp=360.33, unrealized=-446601.46, today_pnl=-446601.46), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=167, avg=948.57, ltp=1197.07, unrealized=-41498.96, today_pnl=-41498.96), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=1347, avg=801.44, ltp=2006.01, unrealized=1622553.33, today_pnl=1622553.33), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=143, avg=1427.62, ltp=1235.46, unrealized=27478.82, today_pnl=27478.82), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=438, avg=1994.48, ltp=866.55, unrealized=-494033.59, today_pnl=-494033.59)], 'updated_at': datetime.datetime(2025, 8, 21, 19, 3, 5, 22051, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))), 'trading_day': '2025-08-21'}", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:03:05.031130+05:30", "timestamp": 1755783185.03113}}}
{"text": "2025-08-21 19:03:05.031 | INFO     | app.services.dhan_client:get_pnl:587 - P&L calculation completed successfully: 5 symbols, unrealized=‚Çπ667898.14\n", "record": {"elapsed": {"repr": "0:01:46.739301", "seconds": 106.739301}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 587, "message": "P&L calculation completed successfully: 5 symbols, unrealized=‚Çπ667898.14", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:03:05.031843+05:30", "timestamp": 1755783185.031843}}}
{"text": "2025-08-21 19:03:05.032 | DEBUG    | app.ws.live:emit_delta:408 - Emitted pnl delta: seq=118\n", "record": {"elapsed": {"repr": "0:01:46.740229", "seconds": 106.740229}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "emit_delta", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 408, "message": "Emitted pnl delta: seq=118", "module": "live", "name": "app.ws.live", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:03:05.032771+05:30", "timestamp": 1755783185.032771}}}
{"text": "2025-08-21 19:03:06.185 | DEBUG    | app.ws.live:emit_delta:408 - Emitted positions delta: seq=119\n", "record": {"elapsed": {"repr": "0:01:47.892950", "seconds": 107.89295}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "emit_delta", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 408, "message": "Emitted positions delta: seq=119", "module": "live", "name": "app.ws.live", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:03:06.185492+05:30", "timestamp": 1755783186.185492}}}
{"text": "2025-08-21 19:03:06.714 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:01:48.421734", "seconds": 108.421734}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:03:06.714276+05:30", "timestamp": 1755783186.714276}}}
{"text": "2025-08-21 19:03:06.715 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:01:48.422515", "seconds": 108.422515}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:03:06.715057+05:30", "timestamp": 1755783186.715057}}}
{"text": "2025-08-21 19:03:06.716 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:01:48.423683", "seconds": 108.423683}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:03:06.716225+05:30", "timestamp": 1755783186.716225}}}
{"text": "2025-08-21 19:03:06.716 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:01:48.424253", "seconds": 108.424253}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:03:06.716795+05:30", "timestamp": 1755783186.716795}}}
{"text": "2025-08-21 19:03:06.717 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:01:48.424840", "seconds": 108.42484}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:03:06.717382+05:30", "timestamp": 1755783186.717382}}}
{"text": "2025-08-21 19:03:06.717 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:01:48.425307", "seconds": 108.425307}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:03:06.717849+05:30", "timestamp": 1755783186.717849}}}
{"text": "2025-08-21 19:03:06.718 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:01:48.425713", "seconds": 108.425713}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:03:06.718255+05:30", "timestamp": 1755783186.718255}}}
{"text": "2025-08-21 19:03:06.719 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:01:48.426509", "seconds": 108.426509}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:03:06.719051+05:30", "timestamp": 1755783186.719051}}}
{"text": "2025-08-21 19:03:06.719 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:01:48.426912", "seconds": 108.426912}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:03:06.719454+05:30", "timestamp": 1755783186.719454}}}
{"text": "2025-08-21 19:03:06.720 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:01:48.427463", "seconds": 108.427463}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:03:06.720005+05:30", "timestamp": 1755783186.720005}}}
{"text": "2025-08-21 19:03:06.877 | INFO     | app.services.dhan_client:get_pnl:489 - Starting accurate P&L calculation\n", "record": {"elapsed": {"repr": "0:01:48.584571", "seconds": 108.584571}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 489, "message": "Starting accurate P&L calculation", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:03:06.877113+05:30", "timestamp": 1755783186.877113}}}
{"text": "2025-08-21 19:03:06.877 | INFO     | app.services.dhan_client:get_pnl:491 - Fetched 5 positions\n", "record": {"elapsed": {"repr": "0:01:48.585187", "seconds": 108.585187}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 491, "message": "Fetched 5 positions", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:03:06.877729+05:30", "timestamp": 1755783186.877729}}}
{"text": "2025-08-21 19:03:06.878 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for RELIANCE: unrealized=-441124.24, today=-441124.24\n", "record": {"elapsed": {"repr": "0:01:48.585650", "seconds": 108.58565}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for RELIANCE: unrealized=-441124.24, today=-441124.24", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:03:06.878192+05:30", "timestamp": 1755783186.878192}}}
{"text": "2025-08-21 19:03:06.878 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for TCS: unrealized=-39408.22, today=-39408.22\n", "record": {"elapsed": {"repr": "0:01:48.586164", "seconds": 108.586164}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for TCS: unrealized=-39408.22, today=-39408.22", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:03:06.878706+05:30", "timestamp": 1755783186.878706}}}
{"text": "2025-08-21 19:03:06.879 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for HDFC: unrealized=1623998.93, today=1623998.93\n", "record": {"elapsed": {"repr": "0:01:48.586645", "seconds": 108.586645}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for HDFC: unrealized=1623998.93, today=1623998.93", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:03:06.879187+05:30", "timestamp": 1755783186.879187}}}
{"text": "2025-08-21 19:03:06.879 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for INFY: unrealized=26538.12, today=26538.12\n", "record": {"elapsed": {"repr": "0:01:48.587092", "seconds": 108.587092}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for INFY: unrealized=26538.12, today=26538.12", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:03:06.879634+05:30", "timestamp": 1755783186.879634}}}
{"text": "2025-08-21 19:03:06.880 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for ICICIBANK: unrealized=-496447.43, today=-496447.43\n", "record": {"elapsed": {"repr": "0:01:48.587557", "seconds": 108.587557}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for ICICIBANK: unrealized=-496447.43, today=-496447.43", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:03:06.880099+05:30", "timestamp": 1755783186.880099}}}
{"text": "2025-08-21 19:03:06.880 | INFO     | app.services.dhan_client:get_pnl:545 - Calculated totals - realized: 0.0, unrealized: 673557.16, day: 673557.16\n", "record": {"elapsed": {"repr": "0:01:48.587974", "seconds": 108.587974}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 545, "message": "Calculated totals - realized: 0.0, unrealized: 673557.16, day: 673557.16", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:03:06.880516+05:30", "timestamp": 1755783186.880516}}}
{"text": "2025-08-21 19:03:06.880 | DEBUG    | app.services.dhan_client:get_pnl:554 - PnL consistency check passed: drift=‚Çπ0.00\n", "record": {"elapsed": {"repr": "0:01:48.588436", "seconds": 108.588436}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 554, "message": "PnL consistency check passed: drift=‚Çπ0.00", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:03:06.880978+05:30", "timestamp": 1755783186.880978}}}
{"text": "2025-08-21 19:03:06.881 | DEBUG    | app.services.dhan_client:get_pnl:558 - Creating PnLTotals...\n", "record": {"elapsed": {"repr": "0:01:48.588900", "seconds": 108.5889}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 558, "message": "Creating PnLTotals...", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:03:06.881442+05:30", "timestamp": 1755783186.881442}}}
{"text": "2025-08-21 19:03:06.882 | DEBUG    | app.services.dhan_client:get_pnl:565 - PnLTotals created successfully\n", "record": {"elapsed": {"repr": "0:01:48.589576", "seconds": 108.589576}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 565, "message": "PnLTotals created successfully", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:03:06.882118+05:30", "timestamp": 1755783186.882118}}}
{"text": "2025-08-21 19:03:06.883 | DEBUG    | app.services.dhan_client:get_pnl:574 - Creating PnL model...\n", "record": {"elapsed": {"repr": "0:01:48.590935", "seconds": 108.590935}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 574, "message": "Creating PnL model...", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:03:06.883477+05:30", "timestamp": 1755783186.883477}}}
{"text": "2025-08-21 19:03:06.884 | DEBUG    | app.services.dhan_client:get_pnl:575 - Model fields: totals=<class 'app.models.schemas.PnLTotals'>, perSymbol=5, updated_at=2025-08-21 19:03:06.878120+05:30, trading_day=2025-08-21\n", "record": {"elapsed": {"repr": "0:01:48.591549", "seconds": 108.591549}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 575, "message": "Model fields: totals=<class 'app.models.schemas.PnLTotals'>, perSymbol=5, updated_at=2025-08-21 19:03:06.878120+05:30, trading_day=2025-08-21", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:03:06.884091+05:30", "timestamp": 1755783186.884091}}}
{"text": "2025-08-21 19:03:06.884 | DEBUG    | app.services.dhan_client:get_pnl:584 - Created PnL model: totals=PnLTotals(realized=0.0, unrealized=673557.16, day=673557.16, currency='INR') per_symbol=[PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1727, avg=618.93, ltp=363.5, unrealized=-441124.24, today_pnl=-441124.24), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=167, avg=948.57, ltp=1184.55, unrealized=-39408.22, today_pnl=-39408.22), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=1347, avg=801.44, ltp=2007.08, unrealized=1623998.93, today_pnl=1623998.93), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=143, avg=1427.62, ltp=1242.04, unrealized=26538.12, today_pnl=26538.12), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=438, avg=1994.48, ltp=861.04, unrealized=-496447.43, today_pnl=-496447.43)] updated_at=datetime.datetime(2025, 8, 21, 19, 3, 6, 878120, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))) trading_day='2025-08-21'\n", "record": {"elapsed": {"repr": "0:01:48.592168", "seconds": 108.592168}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 584, "message": "Created PnL model: totals=PnLTotals(realized=0.0, unrealized=673557.16, day=673557.16, currency='INR') per_symbol=[PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1727, avg=618.93, ltp=363.5, unrealized=-441124.24, today_pnl=-441124.24), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=167, avg=948.57, ltp=1184.55, unrealized=-39408.22, today_pnl=-39408.22), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=1347, avg=801.44, ltp=2007.08, unrealized=1623998.93, today_pnl=1623998.93), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=143, avg=1427.62, ltp=1242.04, unrealized=26538.12, today_pnl=26538.12), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=438, avg=1994.48, ltp=861.04, unrealized=-496447.43, today_pnl=-496447.43)] updated_at=datetime.datetime(2025, 8, 21, 19, 3, 6, 878120, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))) trading_day='2025-08-21'", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:03:06.884710+05:30", "timestamp": 1755783186.88471}}}
{"text": "2025-08-21 19:03:06.885 | DEBUG    | app.services.dhan_client:get_pnl:585 - PnL model fields: {'totals': PnLTotals(realized=0.0, unrealized=673557.16, day=673557.16, currency='INR'), 'per_symbol': [PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1727, avg=618.93, ltp=363.5, unrealized=-441124.24, today_pnl=-441124.24), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=167, avg=948.57, ltp=1184.55, unrealized=-39408.22, today_pnl=-39408.22), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=1347, avg=801.44, ltp=2007.08, unrealized=1623998.93, today_pnl=1623998.93), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=143, avg=1427.62, ltp=1242.04, unrealized=26538.12, today_pnl=26538.12), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=438, avg=1994.48, ltp=861.04, unrealized=-496447.43, today_pnl=-496447.43)], 'updated_at': datetime.datetime(2025, 8, 21, 19, 3, 6, 878120, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))), 'trading_day': '2025-08-21'}\n", "record": {"elapsed": {"repr": "0:01:48.592942", "seconds": 108.592942}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 585, "message": "PnL model fields: {'totals': PnLTotals(realized=0.0, unrealized=673557.16, day=673557.16, currency='INR'), 'per_symbol': [PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1727, avg=618.93, ltp=363.5, unrealized=-441124.24, today_pnl=-441124.24), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=167, avg=948.57, ltp=1184.55, unrealized=-39408.22, today_pnl=-39408.22), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=1347, avg=801.44, ltp=2007.08, unrealized=1623998.93, today_pnl=1623998.93), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=143, avg=1427.62, ltp=1242.04, unrealized=26538.12, today_pnl=26538.12), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=438, avg=1994.48, ltp=861.04, unrealized=-496447.43, today_pnl=-496447.43)], 'updated_at': datetime.datetime(2025, 8, 21, 19, 3, 6, 878120, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))), 'trading_day': '2025-08-21'}", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:03:06.885484+05:30", "timestamp": 1755783186.885484}}}
{"text": "2025-08-21 19:03:06.886 | INFO     | app.services.dhan_client:get_pnl:587 - P&L calculation completed successfully: 5 symbols, unrealized=‚Çπ673557.16\n", "record": {"elapsed": {"repr": "0:01:48.593896", "seconds": 108.593896}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 587, "message": "P&L calculation completed successfully: 5 symbols, unrealized=‚Çπ673557.16", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:03:06.886438+05:30", "timestamp": 1755783186.886438}}}
{"text": "2025-08-21 19:03:06.887 | DEBUG    | app.ws.live:emit_delta:408 - Emitted pnl delta: seq=120\n", "record": {"elapsed": {"repr": "0:01:48.594539", "seconds": 108.594539}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "emit_delta", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 408, "message": "Emitted pnl delta: seq=120", "module": "live", "name": "app.ws.live", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:03:06.887081+05:30", "timestamp": 1755783186.887081}}}
{"text": "2025-08-21 19:03:08.103 | DEBUG    | app.ws.live:emit_delta:408 - Emitted positions delta: seq=121\n", "record": {"elapsed": {"repr": "0:01:49.811429", "seconds": 109.811429}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "emit_delta", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 408, "message": "Emitted positions delta: seq=121", "module": "live", "name": "app.ws.live", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:03:08.103971+05:30", "timestamp": 1755783188.103971}}}
{"text": "2025-08-21 19:03:08.658 | INFO     | app.services.dhan_client:get_pnl:489 - Starting accurate P&L calculation\n", "record": {"elapsed": {"repr": "0:01:50.366132", "seconds": 110.366132}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 489, "message": "Starting accurate P&L calculation", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:03:08.658674+05:30", "timestamp": 1755783188.658674}}}
{"text": "2025-08-21 19:03:08.659 | INFO     | app.services.dhan_client:get_pnl:491 - Fetched 5 positions\n", "record": {"elapsed": {"repr": "0:01:50.367036", "seconds": 110.367036}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 491, "message": "Fetched 5 positions", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:03:08.659578+05:30", "timestamp": 1755783188.659578}}}
{"text": "2025-08-21 19:03:08.660 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for RELIANCE: unrealized=-441124.24, today=-441124.24\n", "record": {"elapsed": {"repr": "0:01:50.367524", "seconds": 110.367524}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for RELIANCE: unrealized=-441124.24, today=-441124.24", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:03:08.660066+05:30", "timestamp": 1755783188.660066}}}
{"text": "2025-08-21 19:03:08.660 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for TCS: unrealized=-39408.22, today=-39408.22\n", "record": {"elapsed": {"repr": "0:01:50.368036", "seconds": 110.368036}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for TCS: unrealized=-39408.22, today=-39408.22", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:03:08.660578+05:30", "timestamp": 1755783188.660578}}}
{"text": "2025-08-21 19:03:08.660 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for HDFC: unrealized=1623998.93, today=1623998.93\n", "record": {"elapsed": {"repr": "0:01:50.368440", "seconds": 110.36844}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for HDFC: unrealized=1623998.93, today=1623998.93", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:03:08.660982+05:30", "timestamp": 1755783188.660982}}}
{"text": "2025-08-21 19:03:08.661 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for INFY: unrealized=26538.12, today=26538.12\n", "record": {"elapsed": {"repr": "0:01:50.368862", "seconds": 110.368862}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for INFY: unrealized=26538.12, today=26538.12", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:03:08.661404+05:30", "timestamp": 1755783188.661404}}}
{"text": "2025-08-21 19:03:08.661 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for ICICIBANK: unrealized=-496447.43, today=-496447.43\n", "record": {"elapsed": {"repr": "0:01:50.369358", "seconds": 110.369358}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for ICICIBANK: unrealized=-496447.43, today=-496447.43", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:03:08.661900+05:30", "timestamp": 1755783188.6619}}}
{"text": "2025-08-21 19:03:08.662 | INFO     | app.services.dhan_client:get_pnl:545 - Calculated totals - realized: 0.0, unrealized: 673557.16, day: 673557.16\n", "record": {"elapsed": {"repr": "0:01:50.369778", "seconds": 110.369778}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 545, "message": "Calculated totals - realized: 0.0, unrealized: 673557.16, day: 673557.16", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:03:08.662320+05:30", "timestamp": 1755783188.66232}}}
{"text": "2025-08-21 19:03:08.662 | DEBUG    | app.services.dhan_client:get_pnl:554 - PnL consistency check passed: drift=‚Çπ0.00\n", "record": {"elapsed": {"repr": "0:01:50.370164", "seconds": 110.370164}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 554, "message": "PnL consistency check passed: drift=‚Çπ0.00", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:03:08.662706+05:30", "timestamp": 1755783188.662706}}}
{"text": "2025-08-21 19:03:08.663 | DEBUG    | app.services.dhan_client:get_pnl:558 - Creating PnLTotals...\n", "record": {"elapsed": {"repr": "0:01:50.370576", "seconds": 110.370576}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 558, "message": "Creating PnLTotals...", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:03:08.663118+05:30", "timestamp": 1755783188.663118}}}
{"text": "2025-08-21 19:03:08.663 | DEBUG    | app.services.dhan_client:get_pnl:565 - PnLTotals created successfully\n", "record": {"elapsed": {"repr": "0:01:50.370978", "seconds": 110.370978}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 565, "message": "PnLTotals created successfully", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:03:08.663520+05:30", "timestamp": 1755783188.66352}}}
{"text": "2025-08-21 19:03:08.664 | DEBUG    | app.services.dhan_client:get_pnl:574 - Creating PnL model...\n", "record": {"elapsed": {"repr": "0:01:50.371627", "seconds": 110.371627}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 574, "message": "Creating PnL model...", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:03:08.664169+05:30", "timestamp": 1755783188.664169}}}
{"text": "2025-08-21 19:03:08.665 | DEBUG    | app.services.dhan_client:get_pnl:575 - Model fields: totals=<class 'app.models.schemas.PnLTotals'>, perSymbol=5, updated_at=2025-08-21 19:03:08.659999+05:30, trading_day=2025-08-21\n", "record": {"elapsed": {"repr": "0:01:50.372966", "seconds": 110.372966}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 575, "message": "Model fields: totals=<class 'app.models.schemas.PnLTotals'>, perSymbol=5, updated_at=2025-08-21 19:03:08.659999+05:30, trading_day=2025-08-21", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:03:08.665508+05:30", "timestamp": 1755783188.665508}}}
{"text": "2025-08-21 19:03:08.666 | DEBUG    | app.services.dhan_client:get_pnl:584 - Created PnL model: totals=PnLTotals(realized=0.0, unrealized=673557.16, day=673557.16, currency='INR') per_symbol=[PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1727, avg=618.93, ltp=363.5, unrealized=-441124.24, today_pnl=-441124.24), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=167, avg=948.57, ltp=1184.55, unrealized=-39408.22, today_pnl=-39408.22), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=1347, avg=801.44, ltp=2007.08, unrealized=1623998.93, today_pnl=1623998.93), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=143, avg=1427.62, ltp=1242.04, unrealized=26538.12, today_pnl=26538.12), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=438, avg=1994.48, ltp=861.04, unrealized=-496447.43, today_pnl=-496447.43)] updated_at=datetime.datetime(2025, 8, 21, 19, 3, 8, 659999, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))) trading_day='2025-08-21'\n", "record": {"elapsed": {"repr": "0:01:50.373708", "seconds": 110.373708}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 584, "message": "Created PnL model: totals=PnLTotals(realized=0.0, unrealized=673557.16, day=673557.16, currency='INR') per_symbol=[PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1727, avg=618.93, ltp=363.5, unrealized=-441124.24, today_pnl=-441124.24), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=167, avg=948.57, ltp=1184.55, unrealized=-39408.22, today_pnl=-39408.22), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=1347, avg=801.44, ltp=2007.08, unrealized=1623998.93, today_pnl=1623998.93), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=143, avg=1427.62, ltp=1242.04, unrealized=26538.12, today_pnl=26538.12), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=438, avg=1994.48, ltp=861.04, unrealized=-496447.43, today_pnl=-496447.43)] updated_at=datetime.datetime(2025, 8, 21, 19, 3, 8, 659999, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))) trading_day='2025-08-21'", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:03:08.666250+05:30", "timestamp": 1755783188.66625}}}
{"text": "2025-08-21 19:03:08.666 | DEBUG    | app.services.dhan_client:get_pnl:585 - PnL model fields: {'totals': PnLTotals(realized=0.0, unrealized=673557.16, day=673557.16, currency='INR'), 'per_symbol': [PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1727, avg=618.93, ltp=363.5, unrealized=-441124.24, today_pnl=-441124.24), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=167, avg=948.57, ltp=1184.55, unrealized=-39408.22, today_pnl=-39408.22), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=1347, avg=801.44, ltp=2007.08, unrealized=1623998.93, today_pnl=1623998.93), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=143, avg=1427.62, ltp=1242.04, unrealized=26538.12, today_pnl=26538.12), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=438, avg=1994.48, ltp=861.04, unrealized=-496447.43, today_pnl=-496447.43)], 'updated_at': datetime.datetime(2025, 8, 21, 19, 3, 8, 659999, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))), 'trading_day': '2025-08-21'}\n", "record": {"elapsed": {"repr": "0:01:50.374410", "seconds": 110.37441}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 585, "message": "PnL model fields: {'totals': PnLTotals(realized=0.0, unrealized=673557.16, day=673557.16, currency='INR'), 'per_symbol': [PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1727, avg=618.93, ltp=363.5, unrealized=-441124.24, today_pnl=-441124.24), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=167, avg=948.57, ltp=1184.55, unrealized=-39408.22, today_pnl=-39408.22), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=1347, avg=801.44, ltp=2007.08, unrealized=1623998.93, today_pnl=1623998.93), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=143, avg=1427.62, ltp=1242.04, unrealized=26538.12, today_pnl=26538.12), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=438, avg=1994.48, ltp=861.04, unrealized=-496447.43, today_pnl=-496447.43)], 'updated_at': datetime.datetime(2025, 8, 21, 19, 3, 8, 659999, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))), 'trading_day': '2025-08-21'}", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:03:08.666952+05:30", "timestamp": 1755783188.666952}}}
{"text": "2025-08-21 19:03:08.667 | INFO     | app.services.dhan_client:get_pnl:587 - P&L calculation completed successfully: 5 symbols, unrealized=‚Çπ673557.16\n", "record": {"elapsed": {"repr": "0:01:50.375218", "seconds": 110.375218}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 587, "message": "P&L calculation completed successfully: 5 symbols, unrealized=‚Çπ673557.16", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:03:08.667760+05:30", "timestamp": 1755783188.66776}}}
{"text": "2025-08-21 19:03:08.668 | DEBUG    | app.ws.live:emit_delta:408 - Emitted pnl delta: seq=122\n", "record": {"elapsed": {"repr": "0:01:50.376066", "seconds": 110.376066}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "emit_delta", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 408, "message": "Emitted pnl delta: seq=122", "module": "live", "name": "app.ws.live", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:03:08.668608+05:30", "timestamp": 1755783188.668608}}}
{"text": "2025-08-21 19:03:08.720 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:01:50.428027", "seconds": 110.428027}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:03:08.720569+05:30", "timestamp": 1755783188.720569}}}
{"text": "2025-08-21 19:03:08.721 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:01:50.428571", "seconds": 110.428571}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:03:08.721113+05:30", "timestamp": 1755783188.721113}}}
{"text": "2025-08-21 19:03:08.721 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:01:50.428978", "seconds": 110.428978}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:03:08.721520+05:30", "timestamp": 1755783188.72152}}}
{"text": "2025-08-21 19:03:08.721 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:01:50.429416", "seconds": 110.429416}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:03:08.721958+05:30", "timestamp": 1755783188.721958}}}
{"text": "2025-08-21 19:03:08.722 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:01:50.430279", "seconds": 110.430279}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:03:08.722821+05:30", "timestamp": 1755783188.722821}}}
{"text": "2025-08-21 19:03:08.723 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:01:50.431245", "seconds": 110.431245}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:03:08.723787+05:30", "timestamp": 1755783188.723787}}}
{"text": "2025-08-21 19:03:08.724 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:01:50.431815", "seconds": 110.431815}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:03:08.724357+05:30", "timestamp": 1755783188.724357}}}
{"text": "2025-08-21 19:03:08.724 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:01:50.432252", "seconds": 110.432252}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:03:08.724794+05:30", "timestamp": 1755783188.724794}}}
{"text": "2025-08-21 19:03:08.725 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:01:50.432655", "seconds": 110.432655}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:03:08.725197+05:30", "timestamp": 1755783188.725197}}}
{"text": "2025-08-21 19:03:08.725 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:01:50.433364", "seconds": 110.433364}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:03:08.725906+05:30", "timestamp": 1755783188.725906}}}
{"text": "2025-08-21 19:03:09.994 | DEBUG    | app.ws.live:emit_delta:408 - Emitted positions delta: seq=123\n", "record": {"elapsed": {"repr": "0:01:51.702112", "seconds": 111.702112}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "emit_delta", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 408, "message": "Emitted positions delta: seq=123", "module": "live", "name": "app.ws.live", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:03:09.994654+05:30", "timestamp": 1755783189.994654}}}
{"text": "2025-08-21 19:03:10.334 | INFO     | app.services.dhan_client:get_pnl:489 - Starting accurate P&L calculation\n", "record": {"elapsed": {"repr": "0:01:52.041982", "seconds": 112.041982}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 489, "message": "Starting accurate P&L calculation", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:03:10.334524+05:30", "timestamp": 1755783190.334524}}}
{"text": "2025-08-21 19:03:10.335 | INFO     | app.services.dhan_client:get_pnl:491 - Fetched 5 positions\n", "record": {"elapsed": {"repr": "0:01:52.042523", "seconds": 112.042523}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 491, "message": "Fetched 5 positions", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:03:10.335065+05:30", "timestamp": 1755783190.335065}}}
{"text": "2025-08-21 19:03:10.335 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for RELIANCE: unrealized=-442820.43, today=-442820.43\n", "record": {"elapsed": {"repr": "0:01:52.043026", "seconds": 112.043026}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for RELIANCE: unrealized=-442820.43, today=-442820.43", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:03:10.335568+05:30", "timestamp": 1755783190.335568}}}
{"text": "2025-08-21 19:03:10.336 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for TCS: unrealized=-42805.1, today=-42805.1\n", "record": {"elapsed": {"repr": "0:01:52.043526", "seconds": 112.043526}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for TCS: unrealized=-42805.1, today=-42805.1", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:03:10.336068+05:30", "timestamp": 1755783190.336068}}}
{"text": "2025-08-21 19:03:10.336 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for HDFC: unrealized=1654095.15, today=1654095.15\n", "record": {"elapsed": {"repr": "0:01:52.044343", "seconds": 112.044343}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for HDFC: unrealized=1654095.15, today=1654095.15", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:03:10.336885+05:30", "timestamp": 1755783190.336885}}}
{"text": "2025-08-21 19:03:10.337 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for INFY: unrealized=24132.55, today=24132.55\n", "record": {"elapsed": {"repr": "0:01:52.045091", "seconds": 112.045091}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for INFY: unrealized=24132.55, today=24132.55", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:03:10.337633+05:30", "timestamp": 1755783190.337633}}}
{"text": "2025-08-21 19:03:10.338 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for ICICIBANK: unrealized=-494894.81, today=-494894.81\n", "record": {"elapsed": {"repr": "0:01:52.045569", "seconds": 112.045569}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for ICICIBANK: unrealized=-494894.81, today=-494894.81", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:03:10.338111+05:30", "timestamp": 1755783190.338111}}}
{"text": "2025-08-21 19:03:10.338 | INFO     | app.services.dhan_client:get_pnl:545 - Calculated totals - realized: 0.0, unrealized: 697707.36, day: 697707.36\n", "record": {"elapsed": {"repr": "0:01:52.046072", "seconds": 112.046072}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 545, "message": "Calculated totals - realized: 0.0, unrealized: 697707.36, day: 697707.36", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:03:10.338614+05:30", "timestamp": 1755783190.338614}}}
{"text": "2025-08-21 19:03:10.339 | DEBUG    | app.services.dhan_client:get_pnl:554 - PnL consistency check passed: drift=‚Çπ0.00\n", "record": {"elapsed": {"repr": "0:01:52.046940", "seconds": 112.04694}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 554, "message": "PnL consistency check passed: drift=‚Çπ0.00", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:03:10.339482+05:30", "timestamp": 1755783190.339482}}}
{"text": "2025-08-21 19:03:10.340 | DEBUG    | app.services.dhan_client:get_pnl:558 - Creating PnLTotals...\n", "record": {"elapsed": {"repr": "0:01:52.047904", "seconds": 112.047904}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 558, "message": "Creating PnLTotals...", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:03:10.340446+05:30", "timestamp": 1755783190.340446}}}
{"text": "2025-08-21 19:03:10.340 | DEBUG    | app.services.dhan_client:get_pnl:565 - PnLTotals created successfully\n", "record": {"elapsed": {"repr": "0:01:52.048337", "seconds": 112.048337}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 565, "message": "PnLTotals created successfully", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:03:10.340879+05:30", "timestamp": 1755783190.340879}}}
{"text": "2025-08-21 19:03:10.341 | DEBUG    | app.services.dhan_client:get_pnl:574 - Creating PnL model...\n", "record": {"elapsed": {"repr": "0:01:52.048747", "seconds": 112.048747}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 574, "message": "Creating PnL model...", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:03:10.341289+05:30", "timestamp": 1755783190.341289}}}
{"text": "2025-08-21 19:03:10.341 | DEBUG    | app.services.dhan_client:get_pnl:575 - Model fields: totals=<class 'app.models.schemas.PnLTotals'>, perSymbol=5, updated_at=2025-08-21 19:03:10.335499+05:30, trading_day=2025-08-21\n", "record": {"elapsed": {"repr": "0:01:52.049145", "seconds": 112.049145}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 575, "message": "Model fields: totals=<class 'app.models.schemas.PnLTotals'>, perSymbol=5, updated_at=2025-08-21 19:03:10.335499+05:30, trading_day=2025-08-21", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:03:10.341687+05:30", "timestamp": 1755783190.341687}}}
{"text": "2025-08-21 19:03:10.342 | DEBUG    | app.services.dhan_client:get_pnl:584 - Created PnL model: totals=PnLTotals(realized=0.0, unrealized=697707.36, day=697707.36, currency='INR') per_symbol=[PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1727, avg=618.93, ltp=362.52, unrealized=-442820.43, today_pnl=-442820.43), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=167, avg=948.57, ltp=1204.89, unrealized=-42805.1, today_pnl=-42805.1), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=1347, avg=801.44, ltp=2029.42, unrealized=1654095.15, today_pnl=1654095.15), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=143, avg=1427.62, ltp=1258.86, unrealized=24132.55, today_pnl=24132.55), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=438, avg=1994.48, ltp=864.58, unrealized=-494894.81, today_pnl=-494894.81)] updated_at=datetime.datetime(2025, 8, 21, 19, 3, 10, 335499, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))) trading_day='2025-08-21'\n", "record": {"elapsed": {"repr": "0:01:52.049628", "seconds": 112.049628}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 584, "message": "Created PnL model: totals=PnLTotals(realized=0.0, unrealized=697707.36, day=697707.36, currency='INR') per_symbol=[PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1727, avg=618.93, ltp=362.52, unrealized=-442820.43, today_pnl=-442820.43), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=167, avg=948.57, ltp=1204.89, unrealized=-42805.1, today_pnl=-42805.1), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=1347, avg=801.44, ltp=2029.42, unrealized=1654095.15, today_pnl=1654095.15), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=143, avg=1427.62, ltp=1258.86, unrealized=24132.55, today_pnl=24132.55), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=438, avg=1994.48, ltp=864.58, unrealized=-494894.81, today_pnl=-494894.81)] updated_at=datetime.datetime(2025, 8, 21, 19, 3, 10, 335499, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))) trading_day='2025-08-21'", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:03:10.342170+05:30", "timestamp": 1755783190.34217}}}
{"text": "2025-08-21 19:03:10.342 | DEBUG    | app.services.dhan_client:get_pnl:585 - PnL model fields: {'totals': PnLTotals(realized=0.0, unrealized=697707.36, day=697707.36, currency='INR'), 'per_symbol': [PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1727, avg=618.93, ltp=362.52, unrealized=-442820.43, today_pnl=-442820.43), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=167, avg=948.57, ltp=1204.89, unrealized=-42805.1, today_pnl=-42805.1), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=1347, avg=801.44, ltp=2029.42, unrealized=1654095.15, today_pnl=1654095.15), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=143, avg=1427.62, ltp=1258.86, unrealized=24132.55, today_pnl=24132.55), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=438, avg=1994.48, ltp=864.58, unrealized=-494894.81, today_pnl=-494894.81)], 'updated_at': datetime.datetime(2025, 8, 21, 19, 3, 10, 335499, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))), 'trading_day': '2025-08-21'}\n", "record": {"elapsed": {"repr": "0:01:52.050157", "seconds": 112.050157}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 585, "message": "PnL model fields: {'totals': PnLTotals(realized=0.0, unrealized=697707.36, day=697707.36, currency='INR'), 'per_symbol': [PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1727, avg=618.93, ltp=362.52, unrealized=-442820.43, today_pnl=-442820.43), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=167, avg=948.57, ltp=1204.89, unrealized=-42805.1, today_pnl=-42805.1), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=1347, avg=801.44, ltp=2029.42, unrealized=1654095.15, today_pnl=1654095.15), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=143, avg=1427.62, ltp=1258.86, unrealized=24132.55, today_pnl=24132.55), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=438, avg=1994.48, ltp=864.58, unrealized=-494894.81, today_pnl=-494894.81)], 'updated_at': datetime.datetime(2025, 8, 21, 19, 3, 10, 335499, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))), 'trading_day': '2025-08-21'}", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:03:10.342699+05:30", "timestamp": 1755783190.342699}}}
{"text": "2025-08-21 19:03:10.343 | INFO     | app.services.dhan_client:get_pnl:587 - P&L calculation completed successfully: 5 symbols, unrealized=‚Çπ697707.36\n", "record": {"elapsed": {"repr": "0:01:52.050645", "seconds": 112.050645}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 587, "message": "P&L calculation completed successfully: 5 symbols, unrealized=‚Çπ697707.36", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:03:10.343187+05:30", "timestamp": 1755783190.343187}}}
{"text": "2025-08-21 19:03:10.343 | DEBUG    | app.ws.live:emit_delta:408 - Emitted pnl delta: seq=124\n", "record": {"elapsed": {"repr": "0:01:52.051273", "seconds": 112.051273}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "emit_delta", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 408, "message": "Emitted pnl delta: seq=124", "module": "live", "name": "app.ws.live", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:03:10.343815+05:30", "timestamp": 1755783190.343815}}}
{"text": "2025-08-21 19:03:10.726 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:01:52.434275", "seconds": 112.434275}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:03:10.726817+05:30", "timestamp": 1755783190.726817}}}
{"text": "2025-08-21 19:03:10.727 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:01:52.434923", "seconds": 112.434923}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:03:10.727465+05:30", "timestamp": 1755783190.727465}}}
{"text": "2025-08-21 19:03:10.728 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:01:52.435697", "seconds": 112.435697}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:03:10.728239+05:30", "timestamp": 1755783190.728239}}}
{"text": "2025-08-21 19:03:10.728 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:01:52.436425", "seconds": 112.436425}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:03:10.728967+05:30", "timestamp": 1755783190.728967}}}
{"text": "2025-08-21 19:03:10.729 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:01:52.436866", "seconds": 112.436866}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:03:10.729408+05:30", "timestamp": 1755783190.729408}}}
{"text": "2025-08-21 19:03:10.729 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:01:52.437340", "seconds": 112.43734}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:03:10.729882+05:30", "timestamp": 1755783190.729882}}}
{"text": "2025-08-21 19:03:10.730 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:01:52.437915", "seconds": 112.437915}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:03:10.730457+05:30", "timestamp": 1755783190.730457}}}
{"text": "2025-08-21 19:03:10.731 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:01:52.438928", "seconds": 112.438928}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:03:10.731470+05:30", "timestamp": 1755783190.73147}}}
{"text": "2025-08-21 19:03:10.732 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:01:52.439555", "seconds": 112.439555}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:03:10.732097+05:30", "timestamp": 1755783190.732097}}}
{"text": "2025-08-21 19:03:10.732 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:01:52.439996", "seconds": 112.439996}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:03:10.732538+05:30", "timestamp": 1755783190.732538}}}
{"text": "2025-08-21 19:03:11.817 | DEBUG    | app.ws.live:emit_delta:408 - Emitted positions delta: seq=125\n", "record": {"elapsed": {"repr": "0:01:53.524916", "seconds": 113.524916}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "emit_delta", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 408, "message": "Emitted positions delta: seq=125", "module": "live", "name": "app.ws.live", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:03:11.817458+05:30", "timestamp": 1755783191.817458}}}
{"text": "2025-08-21 19:03:12.341 | INFO     | app.services.dhan_client:get_pnl:489 - Starting accurate P&L calculation\n", "record": {"elapsed": {"repr": "0:01:54.048980", "seconds": 114.04898}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 489, "message": "Starting accurate P&L calculation", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:03:12.341522+05:30", "timestamp": 1755783192.341522}}}
{"text": "2025-08-21 19:03:12.342 | INFO     | app.services.dhan_client:get_pnl:491 - Fetched 5 positions\n", "record": {"elapsed": {"repr": "0:01:54.049532", "seconds": 114.049532}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 491, "message": "Fetched 5 positions", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:03:12.342074+05:30", "timestamp": 1755783192.342074}}}
{"text": "2025-08-21 19:03:12.342 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for RELIANCE: unrealized=-440957.18, today=-440957.18\n", "record": {"elapsed": {"repr": "0:01:54.049915", "seconds": 114.049915}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for RELIANCE: unrealized=-440957.18, today=-440957.18", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:03:12.342457+05:30", "timestamp": 1755783192.342457}}}
{"text": "2025-08-21 19:03:12.342 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for TCS: unrealized=-44501.66, today=-44501.66\n", "record": {"elapsed": {"repr": "0:01:54.050431", "seconds": 114.050431}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for TCS: unrealized=-44501.66, today=-44501.66", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:03:12.342973+05:30", "timestamp": 1755783192.342973}}}
{"text": "2025-08-21 19:03:12.343 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for HDFC: unrealized=1677929.06, today=1677929.06\n", "record": {"elapsed": {"repr": "0:01:54.050901", "seconds": 114.050901}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for HDFC: unrealized=1677929.06, today=1677929.06", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:03:12.343443+05:30", "timestamp": 1755783192.343443}}}
{"text": "2025-08-21 19:03:12.344 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for INFY: unrealized=27447.6, today=27447.6\n", "record": {"elapsed": {"repr": "0:01:54.051835", "seconds": 114.051835}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for INFY: unrealized=27447.6, today=27447.6", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:03:12.344377+05:30", "timestamp": 1755783192.344377}}}
{"text": "2025-08-21 19:03:12.344 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for ICICIBANK: unrealized=-490594.07, today=-490594.07\n", "record": {"elapsed": {"repr": "0:01:54.052395", "seconds": 114.052395}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for ICICIBANK: unrealized=-490594.07, today=-490594.07", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:03:12.344937+05:30", "timestamp": 1755783192.344937}}}
{"text": "2025-08-21 19:03:12.345 | INFO     | app.services.dhan_client:get_pnl:545 - Calculated totals - realized: 0.0, unrealized: 729323.75, day: 729323.75\n", "record": {"elapsed": {"repr": "0:01:54.052776", "seconds": 114.052776}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 545, "message": "Calculated totals - realized: 0.0, unrealized: 729323.75, day: 729323.75", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:03:12.345318+05:30", "timestamp": 1755783192.345318}}}
{"text": "2025-08-21 19:03:12.345 | DEBUG    | app.services.dhan_client:get_pnl:554 - PnL consistency check passed: drift=‚Çπ0.00\n", "record": {"elapsed": {"repr": "0:01:54.053189", "seconds": 114.053189}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 554, "message": "PnL consistency check passed: drift=‚Çπ0.00", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:03:12.345731+05:30", "timestamp": 1755783192.345731}}}
{"text": "2025-08-21 19:03:12.346 | DEBUG    | app.services.dhan_client:get_pnl:558 - Creating PnLTotals...\n", "record": {"elapsed": {"repr": "0:01:54.053677", "seconds": 114.053677}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 558, "message": "Creating PnLTotals...", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:03:12.346219+05:30", "timestamp": 1755783192.346219}}}
{"text": "2025-08-21 19:03:12.346 | DEBUG    | app.services.dhan_client:get_pnl:565 - PnLTotals created successfully\n", "record": {"elapsed": {"repr": "0:01:54.054283", "seconds": 114.054283}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 565, "message": "PnLTotals created successfully", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:03:12.346825+05:30", "timestamp": 1755783192.346825}}}
{"text": "2025-08-21 19:03:12.347 | DEBUG    | app.services.dhan_client:get_pnl:574 - Creating PnL model...\n", "record": {"elapsed": {"repr": "0:01:54.055002", "seconds": 114.055002}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 574, "message": "Creating PnL model...", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:03:12.347544+05:30", "timestamp": 1755783192.347544}}}
{"text": "2025-08-21 19:03:12.348 | DEBUG    | app.services.dhan_client:get_pnl:575 - Model fields: totals=<class 'app.models.schemas.PnLTotals'>, perSymbol=5, updated_at=2025-08-21 19:03:12.342405+05:30, trading_day=2025-08-21\n", "record": {"elapsed": {"repr": "0:01:54.055730", "seconds": 114.05573}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 575, "message": "Model fields: totals=<class 'app.models.schemas.PnLTotals'>, perSymbol=5, updated_at=2025-08-21 19:03:12.342405+05:30, trading_day=2025-08-21", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:03:12.348272+05:30", "timestamp": 1755783192.348272}}}
{"text": "2025-08-21 19:03:12.348 | DEBUG    | app.services.dhan_client:get_pnl:584 - Created PnL model: totals=PnLTotals(realized=0.0, unrealized=729323.75, day=729323.75, currency='INR') per_symbol=[PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1727, avg=618.93, ltp=363.6, unrealized=-440957.18, today_pnl=-440957.18), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=167, avg=948.57, ltp=1215.05, unrealized=-44501.66, today_pnl=-44501.66), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=1347, avg=801.44, ltp=2047.12, unrealized=1677929.06, today_pnl=1677929.06), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=143, avg=1427.62, ltp=1235.68, unrealized=27447.6, today_pnl=27447.6), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=438, avg=1994.48, ltp=874.4, unrealized=-490594.07, today_pnl=-490594.07)] updated_at=datetime.datetime(2025, 8, 21, 19, 3, 12, 342405, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))) trading_day='2025-08-21'\n", "record": {"elapsed": {"repr": "0:01:54.056229", "seconds": 114.056229}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 584, "message": "Created PnL model: totals=PnLTotals(realized=0.0, unrealized=729323.75, day=729323.75, currency='INR') per_symbol=[PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1727, avg=618.93, ltp=363.6, unrealized=-440957.18, today_pnl=-440957.18), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=167, avg=948.57, ltp=1215.05, unrealized=-44501.66, today_pnl=-44501.66), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=1347, avg=801.44, ltp=2047.12, unrealized=1677929.06, today_pnl=1677929.06), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=143, avg=1427.62, ltp=1235.68, unrealized=27447.6, today_pnl=27447.6), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=438, avg=1994.48, ltp=874.4, unrealized=-490594.07, today_pnl=-490594.07)] updated_at=datetime.datetime(2025, 8, 21, 19, 3, 12, 342405, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))) trading_day='2025-08-21'", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:03:12.348771+05:30", "timestamp": 1755783192.348771}}}
{"text": "2025-08-21 19:03:12.349 | DEBUG    | app.services.dhan_client:get_pnl:585 - PnL model fields: {'totals': PnLTotals(realized=0.0, unrealized=729323.75, day=729323.75, currency='INR'), 'per_symbol': [PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1727, avg=618.93, ltp=363.6, unrealized=-440957.18, today_pnl=-440957.18), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=167, avg=948.57, ltp=1215.05, unrealized=-44501.66, today_pnl=-44501.66), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=1347, avg=801.44, ltp=2047.12, unrealized=1677929.06, today_pnl=1677929.06), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=143, avg=1427.62, ltp=1235.68, unrealized=27447.6, today_pnl=27447.6), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=438, avg=1994.48, ltp=874.4, unrealized=-490594.07, today_pnl=-490594.07)], 'updated_at': datetime.datetime(2025, 8, 21, 19, 3, 12, 342405, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))), 'trading_day': '2025-08-21'}\n", "record": {"elapsed": {"repr": "0:01:54.056702", "seconds": 114.056702}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 585, "message": "PnL model fields: {'totals': PnLTotals(realized=0.0, unrealized=729323.75, day=729323.75, currency='INR'), 'per_symbol': [PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1727, avg=618.93, ltp=363.6, unrealized=-440957.18, today_pnl=-440957.18), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=167, avg=948.57, ltp=1215.05, unrealized=-44501.66, today_pnl=-44501.66), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=1347, avg=801.44, ltp=2047.12, unrealized=1677929.06, today_pnl=1677929.06), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=143, avg=1427.62, ltp=1235.68, unrealized=27447.6, today_pnl=27447.6), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=438, avg=1994.48, ltp=874.4, unrealized=-490594.07, today_pnl=-490594.07)], 'updated_at': datetime.datetime(2025, 8, 21, 19, 3, 12, 342405, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))), 'trading_day': '2025-08-21'}", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:03:12.349244+05:30", "timestamp": 1755783192.349244}}}
{"text": "2025-08-21 19:03:12.349 | INFO     | app.services.dhan_client:get_pnl:587 - P&L calculation completed successfully: 5 symbols, unrealized=‚Çπ729323.75\n", "record": {"elapsed": {"repr": "0:01:54.057264", "seconds": 114.057264}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 587, "message": "P&L calculation completed successfully: 5 symbols, unrealized=‚Çπ729323.75", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:03:12.349806+05:30", "timestamp": 1755783192.349806}}}
{"text": "2025-08-21 19:03:12.350 | DEBUG    | app.ws.live:emit_delta:408 - Emitted pnl delta: seq=126\n", "record": {"elapsed": {"repr": "0:01:54.057943", "seconds": 114.057943}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "emit_delta", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 408, "message": "Emitted pnl delta: seq=126", "module": "live", "name": "app.ws.live", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:03:12.350485+05:30", "timestamp": 1755783192.350485}}}
{"text": "2025-08-21 19:03:12.733 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:01:54.441015", "seconds": 114.441015}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:03:12.733557+05:30", "timestamp": 1755783192.733557}}}
{"text": "2025-08-21 19:03:12.734 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:01:54.441690", "seconds": 114.44169}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:03:12.734232+05:30", "timestamp": 1755783192.734232}}}
{"text": "2025-08-21 19:03:12.734 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:01:54.442191", "seconds": 114.442191}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:03:12.734733+05:30", "timestamp": 1755783192.734733}}}
{"text": "2025-08-21 19:03:12.735 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:01:54.442774", "seconds": 114.442774}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:03:12.735316+05:30", "timestamp": 1755783192.735316}}}
{"text": "2025-08-21 19:03:12.736 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:01:54.443582", "seconds": 114.443582}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:03:12.736124+05:30", "timestamp": 1755783192.736124}}}
{"text": "2025-08-21 19:03:12.736 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:01:54.443997", "seconds": 114.443997}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:03:12.736539+05:30", "timestamp": 1755783192.736539}}}
{"text": "2025-08-21 19:03:12.736 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:01:54.444451", "seconds": 114.444451}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:03:12.736993+05:30", "timestamp": 1755783192.736993}}}
{"text": "2025-08-21 19:03:12.737 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:01:54.444873", "seconds": 114.444873}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:03:12.737415+05:30", "timestamp": 1755783192.737415}}}
{"text": "2025-08-21 19:03:12.737 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:01:54.445388", "seconds": 114.445388}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:03:12.737930+05:30", "timestamp": 1755783192.73793}}}
{"text": "2025-08-21 19:03:12.738 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:01:54.445923", "seconds": 114.445923}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:03:12.738465+05:30", "timestamp": 1755783192.738465}}}
{"text": "2025-08-21 19:03:13.557 | DEBUG    | app.ws.live:emit_delta:408 - Emitted positions delta: seq=127\n", "record": {"elapsed": {"repr": "0:01:55.265251", "seconds": 115.265251}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "emit_delta", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 408, "message": "Emitted positions delta: seq=127", "module": "live", "name": "app.ws.live", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:03:13.557793+05:30", "timestamp": 1755783193.557793}}}
{"text": "2025-08-21 19:03:14.360 | INFO     | app.services.dhan_client:get_pnl:489 - Starting accurate P&L calculation\n", "record": {"elapsed": {"repr": "0:01:56.068183", "seconds": 116.068183}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 489, "message": "Starting accurate P&L calculation", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:03:14.360725+05:30", "timestamp": 1755783194.360725}}}
{"text": "2025-08-21 19:03:14.361 | INFO     | app.services.dhan_client:get_pnl:491 - Fetched 5 positions\n", "record": {"elapsed": {"repr": "0:01:56.068854", "seconds": 116.068854}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 491, "message": "Fetched 5 positions", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:03:14.361396+05:30", "timestamp": 1755783194.361396}}}
{"text": "2025-08-21 19:03:14.362 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for RELIANCE: unrealized=-439884.46, today=-439884.46\n", "record": {"elapsed": {"repr": "0:01:56.069472", "seconds": 116.069472}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for RELIANCE: unrealized=-439884.46, today=-439884.46", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:03:14.362014+05:30", "timestamp": 1755783194.362014}}}
{"text": "2025-08-21 19:03:14.362 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for TCS: unrealized=-41133.98, today=-41133.98\n", "record": {"elapsed": {"repr": "0:01:56.070310", "seconds": 116.07031}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for TCS: unrealized=-41133.98, today=-41133.98", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:03:14.362852+05:30", "timestamp": 1755783194.362852}}}
{"text": "2025-08-21 19:03:14.363 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for HDFC: unrealized=1625174.52, today=1625174.52\n", "record": {"elapsed": {"repr": "0:01:56.071208", "seconds": 116.071208}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for HDFC: unrealized=1625174.52, today=1625174.52", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:03:14.363750+05:30", "timestamp": 1755783194.36375}}}
{"text": "2025-08-21 19:03:14.364 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for INFY: unrealized=29322.95, today=29322.95\n", "record": {"elapsed": {"repr": "0:01:56.071774", "seconds": 116.071774}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for INFY: unrealized=29322.95, today=29322.95", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:03:14.364316+05:30", "timestamp": 1755783194.364316}}}
{"text": "2025-08-21 19:03:14.364 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for ICICIBANK: unrealized=-493961.43, today=-493961.43\n", "record": {"elapsed": {"repr": "0:01:56.072267", "seconds": 116.072267}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for ICICIBANK: unrealized=-493961.43, today=-493961.43", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:03:14.364809+05:30", "timestamp": 1755783194.364809}}}
{"text": "2025-08-21 19:03:14.365 | INFO     | app.services.dhan_client:get_pnl:545 - Calculated totals - realized: 0.0, unrealized: 679517.6, day: 679517.6\n", "record": {"elapsed": {"repr": "0:01:56.072686", "seconds": 116.072686}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 545, "message": "Calculated totals - realized: 0.0, unrealized: 679517.6, day: 679517.6", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:03:14.365228+05:30", "timestamp": 1755783194.365228}}}
{"text": "2025-08-21 19:03:14.365 | DEBUG    | app.services.dhan_client:get_pnl:554 - PnL consistency check passed: drift=‚Çπ0.00\n", "record": {"elapsed": {"repr": "0:01:56.073219", "seconds": 116.073219}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 554, "message": "PnL consistency check passed: drift=‚Çπ0.00", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:03:14.365761+05:30", "timestamp": 1755783194.365761}}}
{"text": "2025-08-21 19:03:14.366 | DEBUG    | app.services.dhan_client:get_pnl:558 - Creating PnLTotals...\n", "record": {"elapsed": {"repr": "0:01:56.073645", "seconds": 116.073645}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 558, "message": "Creating PnLTotals...", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:03:14.366187+05:30", "timestamp": 1755783194.366187}}}
{"text": "2025-08-21 19:03:14.366 | DEBUG    | app.services.dhan_client:get_pnl:565 - PnLTotals created successfully\n", "record": {"elapsed": {"repr": "0:01:56.074279", "seconds": 116.074279}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 565, "message": "PnLTotals created successfully", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:03:14.366821+05:30", "timestamp": 1755783194.366821}}}
{"text": "2025-08-21 19:03:14.367 | DEBUG    | app.services.dhan_client:get_pnl:574 - Creating PnL model...\n", "record": {"elapsed": {"repr": "0:01:56.075119", "seconds": 116.075119}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 574, "message": "Creating PnL model...", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:03:14.367661+05:30", "timestamp": 1755783194.367661}}}
{"text": "2025-08-21 19:03:14.368 | DEBUG    | app.services.dhan_client:get_pnl:575 - Model fields: totals=<class 'app.models.schemas.PnLTotals'>, perSymbol=5, updated_at=2025-08-21 19:03:14.361908+05:30, trading_day=2025-08-21\n", "record": {"elapsed": {"repr": "0:01:56.075983", "seconds": 116.075983}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 575, "message": "Model fields: totals=<class 'app.models.schemas.PnLTotals'>, perSymbol=5, updated_at=2025-08-21 19:03:14.361908+05:30, trading_day=2025-08-21", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:03:14.368525+05:30", "timestamp": 1755783194.368525}}}
{"text": "2025-08-21 19:03:14.369 | DEBUG    | app.services.dhan_client:get_pnl:584 - Created PnL model: totals=PnLTotals(realized=0.0, unrealized=679517.6, day=679517.6, currency='INR') per_symbol=[PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1727, avg=618.93, ltp=364.22, unrealized=-439884.46, today_pnl=-439884.46), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=167, avg=948.57, ltp=1194.88, unrealized=-41133.98, today_pnl=-41133.98), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=1347, avg=801.44, ltp=2007.95, unrealized=1625174.52, today_pnl=1625174.52), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=143, avg=1427.62, ltp=1222.56, unrealized=29322.95, today_pnl=29322.95), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=438, avg=1994.48, ltp=866.71, unrealized=-493961.43, today_pnl=-493961.43)] updated_at=datetime.datetime(2025, 8, 21, 19, 3, 14, 361908, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))) trading_day='2025-08-21'\n", "record": {"elapsed": {"repr": "0:01:56.076628", "seconds": 116.076628}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 584, "message": "Created PnL model: totals=PnLTotals(realized=0.0, unrealized=679517.6, day=679517.6, currency='INR') per_symbol=[PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1727, avg=618.93, ltp=364.22, unrealized=-439884.46, today_pnl=-439884.46), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=167, avg=948.57, ltp=1194.88, unrealized=-41133.98, today_pnl=-41133.98), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=1347, avg=801.44, ltp=2007.95, unrealized=1625174.52, today_pnl=1625174.52), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=143, avg=1427.62, ltp=1222.56, unrealized=29322.95, today_pnl=29322.95), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=438, avg=1994.48, ltp=866.71, unrealized=-493961.43, today_pnl=-493961.43)] updated_at=datetime.datetime(2025, 8, 21, 19, 3, 14, 361908, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))) trading_day='2025-08-21'", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:03:14.369170+05:30", "timestamp": 1755783194.36917}}}
{"text": "2025-08-21 19:03:14.370 | DEBUG    | app.services.dhan_client:get_pnl:585 - PnL model fields: {'totals': PnLTotals(realized=0.0, unrealized=679517.6, day=679517.6, currency='INR'), 'per_symbol': [PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1727, avg=618.93, ltp=364.22, unrealized=-439884.46, today_pnl=-439884.46), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=167, avg=948.57, ltp=1194.88, unrealized=-41133.98, today_pnl=-41133.98), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=1347, avg=801.44, ltp=2007.95, unrealized=1625174.52, today_pnl=1625174.52), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=143, avg=1427.62, ltp=1222.56, unrealized=29322.95, today_pnl=29322.95), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=438, avg=1994.48, ltp=866.71, unrealized=-493961.43, today_pnl=-493961.43)], 'updated_at': datetime.datetime(2025, 8, 21, 19, 3, 14, 361908, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))), 'trading_day': '2025-08-21'}\n", "record": {"elapsed": {"repr": "0:01:56.077647", "seconds": 116.077647}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 585, "message": "PnL model fields: {'totals': PnLTotals(realized=0.0, unrealized=679517.6, day=679517.6, currency='INR'), 'per_symbol': [PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1727, avg=618.93, ltp=364.22, unrealized=-439884.46, today_pnl=-439884.46), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=167, avg=948.57, ltp=1194.88, unrealized=-41133.98, today_pnl=-41133.98), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=1347, avg=801.44, ltp=2007.95, unrealized=1625174.52, today_pnl=1625174.52), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=143, avg=1427.62, ltp=1222.56, unrealized=29322.95, today_pnl=29322.95), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=438, avg=1994.48, ltp=866.71, unrealized=-493961.43, today_pnl=-493961.43)], 'updated_at': datetime.datetime(2025, 8, 21, 19, 3, 14, 361908, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))), 'trading_day': '2025-08-21'}", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:03:14.370189+05:30", "timestamp": 1755783194.370189}}}
{"text": "2025-08-21 19:03:14.371 | INFO     | app.services.dhan_client:get_pnl:587 - P&L calculation completed successfully: 5 symbols, unrealized=‚Çπ679517.60\n", "record": {"elapsed": {"repr": "0:01:56.078675", "seconds": 116.078675}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 587, "message": "P&L calculation completed successfully: 5 symbols, unrealized=‚Çπ679517.60", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:03:14.371217+05:30", "timestamp": 1755783194.371217}}}
{"text": "2025-08-21 19:03:14.372 | DEBUG    | app.ws.live:emit_delta:408 - Emitted pnl delta: seq=128\n", "record": {"elapsed": {"repr": "0:01:56.079846", "seconds": 116.079846}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "emit_delta", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 408, "message": "Emitted pnl delta: seq=128", "module": "live", "name": "app.ws.live", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:03:14.372388+05:30", "timestamp": 1755783194.372388}}}
{"text": "2025-08-21 19:03:14.739 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:01:56.447121", "seconds": 116.447121}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:03:14.739663+05:30", "timestamp": 1755783194.739663}}}
{"text": "2025-08-21 19:03:14.740 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:01:56.447770", "seconds": 116.44777}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:03:14.740312+05:30", "timestamp": 1755783194.740312}}}
{"text": "2025-08-21 19:03:14.740 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:01:56.448248", "seconds": 116.448248}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:03:14.740790+05:30", "timestamp": 1755783194.74079}}}
{"text": "2025-08-21 19:03:14.741 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:01:56.448788", "seconds": 116.448788}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:03:14.741330+05:30", "timestamp": 1755783194.74133}}}
{"text": "2025-08-21 19:03:14.741 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:01:56.449291", "seconds": 116.449291}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:03:14.741833+05:30", "timestamp": 1755783194.741833}}}
{"text": "2025-08-21 19:03:14.742 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:01:56.450245", "seconds": 116.450245}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:03:14.742787+05:30", "timestamp": 1755783194.742787}}}
{"text": "2025-08-21 19:03:14.743 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:01:56.450834", "seconds": 116.450834}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:03:14.743376+05:30", "timestamp": 1755783194.743376}}}
{"text": "2025-08-21 19:03:14.743 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:01:56.451296", "seconds": 116.451296}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:03:14.743838+05:30", "timestamp": 1755783194.743838}}}
{"text": "2025-08-21 19:03:14.744 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:01:56.451775", "seconds": 116.451775}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:03:14.744317+05:30", "timestamp": 1755783194.744317}}}
{"text": "2025-08-21 19:03:14.744 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:01:56.452325", "seconds": 116.452325}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:03:14.744867+05:30", "timestamp": 1755783194.744867}}}
{"text": "2025-08-21 19:03:15.165 | DEBUG    | app.ws.live:emit_delta:408 - Emitted positions delta: seq=129\n", "record": {"elapsed": {"repr": "0:01:56.872694", "seconds": 116.872694}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "emit_delta", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 408, "message": "Emitted positions delta: seq=129", "module": "live", "name": "app.ws.live", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:03:15.165236+05:30", "timestamp": 1755783195.165236}}}
{"text": "2025-08-21 19:03:15.889 | INFO     | app.services.dhan_client:get_pnl:489 - Starting accurate P&L calculation\n", "record": {"elapsed": {"repr": "0:01:57.596909", "seconds": 117.596909}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 489, "message": "Starting accurate P&L calculation", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:03:15.889451+05:30", "timestamp": 1755783195.889451}}}
{"text": "2025-08-21 19:03:15.890 | INFO     | app.services.dhan_client:get_pnl:491 - Fetched 5 positions\n", "record": {"elapsed": {"repr": "0:01:57.597480", "seconds": 117.59748}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 491, "message": "Fetched 5 positions", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:03:15.890022+05:30", "timestamp": 1755783195.890022}}}
{"text": "2025-08-21 19:03:15.890 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for RELIANCE: unrealized=-447948.92, today=-447948.92\n", "record": {"elapsed": {"repr": "0:01:57.597825", "seconds": 117.597825}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for RELIANCE: unrealized=-447948.92, today=-447948.92", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:03:15.890367+05:30", "timestamp": 1755783195.890367}}}
{"text": "2025-08-21 19:03:15.890 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for TCS: unrealized=-43030.5, today=-43030.5\n", "record": {"elapsed": {"repr": "0:01:57.598255", "seconds": 117.598255}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for TCS: unrealized=-43030.5, today=-43030.5", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:03:15.890797+05:30", "timestamp": 1755783195.890797}}}
{"text": "2025-08-21 19:03:15.891 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for HDFC: unrealized=1591923.07, today=1591923.07\n", "record": {"elapsed": {"repr": "0:01:57.598689", "seconds": 117.598689}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for HDFC: unrealized=1591923.07, today=1591923.07", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:03:15.891231+05:30", "timestamp": 1755783195.891231}}}
{"text": "2025-08-21 19:03:15.891 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for INFY: unrealized=29183.22, today=29183.22\n", "record": {"elapsed": {"repr": "0:01:57.599183", "seconds": 117.599183}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for INFY: unrealized=29183.22, today=29183.22", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:03:15.891725+05:30", "timestamp": 1755783195.891725}}}
{"text": "2025-08-21 19:03:15.892 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for ICICIBANK: unrealized=-495904.28, today=-495904.28\n", "record": {"elapsed": {"repr": "0:01:57.599935", "seconds": 117.599935}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for ICICIBANK: unrealized=-495904.28, today=-495904.28", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:03:15.892477+05:30", "timestamp": 1755783195.892477}}}
{"text": "2025-08-21 19:03:15.892 | INFO     | app.services.dhan_client:get_pnl:545 - Calculated totals - realized: 0.0, unrealized: 634222.59, day: 634222.59\n", "record": {"elapsed": {"repr": "0:01:57.600388", "seconds": 117.600388}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 545, "message": "Calculated totals - realized: 0.0, unrealized: 634222.59, day: 634222.59", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:03:15.892930+05:30", "timestamp": 1755783195.89293}}}
{"text": "2025-08-21 19:03:15.893 | DEBUG    | app.services.dhan_client:get_pnl:554 - PnL consistency check passed: drift=‚Çπ0.00\n", "record": {"elapsed": {"repr": "0:01:57.600799", "seconds": 117.600799}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 554, "message": "PnL consistency check passed: drift=‚Çπ0.00", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:03:15.893341+05:30", "timestamp": 1755783195.893341}}}
{"text": "2025-08-21 19:03:15.893 | DEBUG    | app.services.dhan_client:get_pnl:558 - Creating PnLTotals...\n", "record": {"elapsed": {"repr": "0:01:57.601262", "seconds": 117.601262}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 558, "message": "Creating PnLTotals...", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:03:15.893804+05:30", "timestamp": 1755783195.893804}}}
{"text": "2025-08-21 19:03:15.894 | DEBUG    | app.services.dhan_client:get_pnl:565 - PnLTotals created successfully\n", "record": {"elapsed": {"repr": "0:01:57.601681", "seconds": 117.601681}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 565, "message": "PnLTotals created successfully", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:03:15.894223+05:30", "timestamp": 1755783195.894223}}}
{"text": "2025-08-21 19:03:15.894 | DEBUG    | app.services.dhan_client:get_pnl:574 - Creating PnL model...\n", "record": {"elapsed": {"repr": "0:01:57.602271", "seconds": 117.602271}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 574, "message": "Creating PnL model...", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:03:15.894813+05:30", "timestamp": 1755783195.894813}}}
{"text": "2025-08-21 19:03:15.895 | DEBUG    | app.services.dhan_client:get_pnl:575 - Model fields: totals=<class 'app.models.schemas.PnLTotals'>, perSymbol=5, updated_at=2025-08-21 19:03:15.890306+05:30, trading_day=2025-08-21\n", "record": {"elapsed": {"repr": "0:01:57.602957", "seconds": 117.602957}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 575, "message": "Model fields: totals=<class 'app.models.schemas.PnLTotals'>, perSymbol=5, updated_at=2025-08-21 19:03:15.890306+05:30, trading_day=2025-08-21", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:03:15.895499+05:30", "timestamp": 1755783195.895499}}}
{"text": "2025-08-21 19:03:15.896 | DEBUG    | app.services.dhan_client:get_pnl:584 - Created PnL model: totals=PnLTotals(realized=0.0, unrealized=634222.59, day=634222.59, currency='INR') per_symbol=[PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1727, avg=618.93, ltp=359.55, unrealized=-447948.92, today_pnl=-447948.92), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=167, avg=948.57, ltp=1206.24, unrealized=-43030.5, today_pnl=-43030.5), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=1347, avg=801.44, ltp=1983.27, unrealized=1591923.07, today_pnl=1591923.07), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=143, avg=1427.62, ltp=1223.54, unrealized=29183.22, today_pnl=29183.22), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=438, avg=1994.48, ltp=862.28, unrealized=-495904.28, today_pnl=-495904.28)] updated_at=datetime.datetime(2025, 8, 21, 19, 3, 15, 890306, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))) trading_day='2025-08-21'\n", "record": {"elapsed": {"repr": "0:01:57.603896", "seconds": 117.603896}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 584, "message": "Created PnL model: totals=PnLTotals(realized=0.0, unrealized=634222.59, day=634222.59, currency='INR') per_symbol=[PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1727, avg=618.93, ltp=359.55, unrealized=-447948.92, today_pnl=-447948.92), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=167, avg=948.57, ltp=1206.24, unrealized=-43030.5, today_pnl=-43030.5), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=1347, avg=801.44, ltp=1983.27, unrealized=1591923.07, today_pnl=1591923.07), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=143, avg=1427.62, ltp=1223.54, unrealized=29183.22, today_pnl=29183.22), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=438, avg=1994.48, ltp=862.28, unrealized=-495904.28, today_pnl=-495904.28)] updated_at=datetime.datetime(2025, 8, 21, 19, 3, 15, 890306, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))) trading_day='2025-08-21'", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:03:15.896438+05:30", "timestamp": 1755783195.896438}}}
{"text": "2025-08-21 19:03:15.897 | DEBUG    | app.services.dhan_client:get_pnl:585 - PnL model fields: {'totals': PnLTotals(realized=0.0, unrealized=634222.59, day=634222.59, currency='INR'), 'per_symbol': [PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1727, avg=618.93, ltp=359.55, unrealized=-447948.92, today_pnl=-447948.92), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=167, avg=948.57, ltp=1206.24, unrealized=-43030.5, today_pnl=-43030.5), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=1347, avg=801.44, ltp=1983.27, unrealized=1591923.07, today_pnl=1591923.07), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=143, avg=1427.62, ltp=1223.54, unrealized=29183.22, today_pnl=29183.22), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=438, avg=1994.48, ltp=862.28, unrealized=-495904.28, today_pnl=-495904.28)], 'updated_at': datetime.datetime(2025, 8, 21, 19, 3, 15, 890306, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))), 'trading_day': '2025-08-21'}\n", "record": {"elapsed": {"repr": "0:01:57.604555", "seconds": 117.604555}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 585, "message": "PnL model fields: {'totals': PnLTotals(realized=0.0, unrealized=634222.59, day=634222.59, currency='INR'), 'per_symbol': [PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1727, avg=618.93, ltp=359.55, unrealized=-447948.92, today_pnl=-447948.92), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=167, avg=948.57, ltp=1206.24, unrealized=-43030.5, today_pnl=-43030.5), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=1347, avg=801.44, ltp=1983.27, unrealized=1591923.07, today_pnl=1591923.07), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=143, avg=1427.62, ltp=1223.54, unrealized=29183.22, today_pnl=29183.22), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=438, avg=1994.48, ltp=862.28, unrealized=-495904.28, today_pnl=-495904.28)], 'updated_at': datetime.datetime(2025, 8, 21, 19, 3, 15, 890306, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))), 'trading_day': '2025-08-21'}", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:03:15.897097+05:30", "timestamp": 1755783195.897097}}}
{"text": "2025-08-21 19:03:15.897 | INFO     | app.services.dhan_client:get_pnl:587 - P&L calculation completed successfully: 5 symbols, unrealized=‚Çπ634222.59\n", "record": {"elapsed": {"repr": "0:01:57.605065", "seconds": 117.605065}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 587, "message": "P&L calculation completed successfully: 5 symbols, unrealized=‚Çπ634222.59", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:03:15.897607+05:30", "timestamp": 1755783195.897607}}}
{"text": "2025-08-21 19:03:15.898 | DEBUG    | app.ws.live:emit_delta:408 - Emitted pnl delta: seq=130\n", "record": {"elapsed": {"repr": "0:01:57.605736", "seconds": 117.605736}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "emit_delta", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 408, "message": "Emitted pnl delta: seq=130", "module": "live", "name": "app.ws.live", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:03:15.898278+05:30", "timestamp": 1755783195.898278}}}
{"text": "2025-08-21 19:03:16.745 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:01:58.453108", "seconds": 118.453108}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:03:16.745650+05:30", "timestamp": 1755783196.74565}}}
{"text": "2025-08-21 19:03:16.746 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:01:58.453789", "seconds": 118.453789}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:03:16.746331+05:30", "timestamp": 1755783196.746331}}}
{"text": "2025-08-21 19:03:16.746 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:01:58.454266", "seconds": 118.454266}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:03:16.746808+05:30", "timestamp": 1755783196.746808}}}
{"text": "2025-08-21 19:03:16.747 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:01:58.454669", "seconds": 118.454669}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:03:16.747211+05:30", "timestamp": 1755783196.747211}}}
{"text": "2025-08-21 19:03:16.747 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:01:58.455128", "seconds": 118.455128}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:03:16.747670+05:30", "timestamp": 1755783196.74767}}}
{"text": "2025-08-21 19:03:16.748 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:01:58.455510", "seconds": 118.45551}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:03:16.748052+05:30", "timestamp": 1755783196.748052}}}
{"text": "2025-08-21 19:03:16.748 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:01:58.455965", "seconds": 118.455965}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:03:16.748507+05:30", "timestamp": 1755783196.748507}}}
{"text": "2025-08-21 19:03:16.748 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:01:58.456410", "seconds": 118.45641}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:03:16.748952+05:30", "timestamp": 1755783196.748952}}}
{"text": "2025-08-21 19:03:16.749 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:01:58.457032", "seconds": 118.457032}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:03:16.749574+05:30", "timestamp": 1755783196.749574}}}
{"text": "2025-08-21 19:03:16.750 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:01:58.457871", "seconds": 118.457871}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:03:16.750413+05:30", "timestamp": 1755783196.750413}}}
{"text": "2025-08-21 19:03:17.080 | DEBUG    | app.ws.live:emit_delta:408 - Emitted positions delta: seq=131\n", "record": {"elapsed": {"repr": "0:01:58.788333", "seconds": 118.788333}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "emit_delta", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 408, "message": "Emitted positions delta: seq=131", "module": "live", "name": "app.ws.live", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:03:17.080875+05:30", "timestamp": 1755783197.080875}}}
{"text": "2025-08-21 19:03:17.671 | INFO     | app.services.dhan_client:get_pnl:489 - Starting accurate P&L calculation\n", "record": {"elapsed": {"repr": "0:01:59.379448", "seconds": 119.379448}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 489, "message": "Starting accurate P&L calculation", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:03:17.671990+05:30", "timestamp": 1755783197.67199}}}
{"text": "2025-08-21 19:03:17.672 | INFO     | app.services.dhan_client:get_pnl:491 - Fetched 5 positions\n", "record": {"elapsed": {"repr": "0:01:59.380073", "seconds": 119.380073}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 491, "message": "Fetched 5 positions", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:03:17.672615+05:30", "timestamp": 1755783197.672615}}}
{"text": "2025-08-21 19:03:17.673 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for RELIANCE: unrealized=-457961.3, today=-457961.3\n", "record": {"elapsed": {"repr": "0:01:59.380573", "seconds": 119.380573}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for RELIANCE: unrealized=-457961.3, today=-457961.3", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:03:17.673115+05:30", "timestamp": 1755783197.673115}}}
{"text": "2025-08-21 19:03:17.673 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for TCS: unrealized=-46077.58, today=-46077.58\n", "record": {"elapsed": {"repr": "0:01:59.381073", "seconds": 119.381073}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for TCS: unrealized=-46077.58, today=-46077.58", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:03:17.673615+05:30", "timestamp": 1755783197.673615}}}
{"text": "2025-08-21 19:03:17.674 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for HDFC: unrealized=1591607.83, today=1591607.83\n", "record": {"elapsed": {"repr": "0:01:59.381840", "seconds": 119.38184}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for HDFC: unrealized=1591607.83, today=1591607.83", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:03:17.674382+05:30", "timestamp": 1755783197.674382}}}
{"text": "2025-08-21 19:03:17.675 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for INFY: unrealized=29002.08, today=29002.08\n", "record": {"elapsed": {"repr": "0:01:59.382622", "seconds": 119.382622}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for INFY: unrealized=29002.08, today=29002.08", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:03:17.675164+05:30", "timestamp": 1755783197.675164}}}
{"text": "2025-08-21 19:03:17.675 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for ICICIBANK: unrealized=-493207.04, today=-493207.04\n", "record": {"elapsed": {"repr": "0:01:59.383108", "seconds": 119.383108}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for ICICIBANK: unrealized=-493207.04, today=-493207.04", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:03:17.675650+05:30", "timestamp": 1755783197.67565}}}
{"text": "2025-08-21 19:03:17.676 | INFO     | app.services.dhan_client:get_pnl:545 - Calculated totals - realized: 0.0, unrealized: 623363.99, day: 623363.99\n", "record": {"elapsed": {"repr": "0:01:59.383540", "seconds": 119.38354}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 545, "message": "Calculated totals - realized: 0.0, unrealized: 623363.99, day: 623363.99", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:03:17.676082+05:30", "timestamp": 1755783197.676082}}}
{"text": "2025-08-21 19:03:17.676 | DEBUG    | app.services.dhan_client:get_pnl:554 - PnL consistency check passed: drift=‚Çπ0.00\n", "record": {"elapsed": {"repr": "0:01:59.384024", "seconds": 119.384024}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 554, "message": "PnL consistency check passed: drift=‚Çπ0.00", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:03:17.676566+05:30", "timestamp": 1755783197.676566}}}
{"text": "2025-08-21 19:03:17.677 | DEBUG    | app.services.dhan_client:get_pnl:558 - Creating PnLTotals...\n", "record": {"elapsed": {"repr": "0:01:59.384572", "seconds": 119.384572}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 558, "message": "Creating PnLTotals...", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:03:17.677114+05:30", "timestamp": 1755783197.677114}}}
{"text": "2025-08-21 19:03:17.677 | DEBUG    | app.services.dhan_client:get_pnl:565 - PnLTotals created successfully\n", "record": {"elapsed": {"repr": "0:01:59.385373", "seconds": 119.385373}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 565, "message": "PnLTotals created successfully", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:03:17.677915+05:30", "timestamp": 1755783197.677915}}}
{"text": "2025-08-21 19:03:17.678 | DEBUG    | app.services.dhan_client:get_pnl:574 - Creating PnL model...\n", "record": {"elapsed": {"repr": "0:01:59.386096", "seconds": 119.386096}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 574, "message": "Creating PnL model...", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:03:17.678638+05:30", "timestamp": 1755783197.678638}}}
{"text": "2025-08-21 19:03:17.679 | DEBUG    | app.services.dhan_client:get_pnl:575 - Model fields: totals=<class 'app.models.schemas.PnLTotals'>, perSymbol=5, updated_at=2025-08-21 19:03:17.673041+05:30, trading_day=2025-08-21\n", "record": {"elapsed": {"repr": "0:01:59.386535", "seconds": 119.386535}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 575, "message": "Model fields: totals=<class 'app.models.schemas.PnLTotals'>, perSymbol=5, updated_at=2025-08-21 19:03:17.673041+05:30, trading_day=2025-08-21", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:03:17.679077+05:30", "timestamp": 1755783197.679077}}}
{"text": "2025-08-21 19:03:17.679 | DEBUG    | app.services.dhan_client:get_pnl:584 - Created PnL model: totals=PnLTotals(realized=0.0, unrealized=623363.99, day=623363.99, currency='INR') per_symbol=[PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1727, avg=618.93, ltp=353.75, unrealized=-457961.3, today_pnl=-457961.3), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=167, avg=948.57, ltp=1224.48, unrealized=-46077.58, today_pnl=-46077.58), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=1347, avg=801.44, ltp=1983.03, unrealized=1591607.83, today_pnl=1591607.83), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=143, avg=1427.62, ltp=1224.81, unrealized=29002.08, today_pnl=29002.08), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=438, avg=1994.48, ltp=868.44, unrealized=-493207.04, today_pnl=-493207.04)] updated_at=datetime.datetime(2025, 8, 21, 19, 3, 17, 673041, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))) trading_day='2025-08-21'\n", "record": {"elapsed": {"repr": "0:01:59.387111", "seconds": 119.387111}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 584, "message": "Created PnL model: totals=PnLTotals(realized=0.0, unrealized=623363.99, day=623363.99, currency='INR') per_symbol=[PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1727, avg=618.93, ltp=353.75, unrealized=-457961.3, today_pnl=-457961.3), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=167, avg=948.57, ltp=1224.48, unrealized=-46077.58, today_pnl=-46077.58), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=1347, avg=801.44, ltp=1983.03, unrealized=1591607.83, today_pnl=1591607.83), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=143, avg=1427.62, ltp=1224.81, unrealized=29002.08, today_pnl=29002.08), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=438, avg=1994.48, ltp=868.44, unrealized=-493207.04, today_pnl=-493207.04)] updated_at=datetime.datetime(2025, 8, 21, 19, 3, 17, 673041, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))) trading_day='2025-08-21'", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:03:17.679653+05:30", "timestamp": 1755783197.679653}}}
{"text": "2025-08-21 19:03:17.680 | DEBUG    | app.services.dhan_client:get_pnl:585 - PnL model fields: {'totals': PnLTotals(realized=0.0, unrealized=623363.99, day=623363.99, currency='INR'), 'per_symbol': [PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1727, avg=618.93, ltp=353.75, unrealized=-457961.3, today_pnl=-457961.3), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=167, avg=948.57, ltp=1224.48, unrealized=-46077.58, today_pnl=-46077.58), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=1347, avg=801.44, ltp=1983.03, unrealized=1591607.83, today_pnl=1591607.83), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=143, avg=1427.62, ltp=1224.81, unrealized=29002.08, today_pnl=29002.08), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=438, avg=1994.48, ltp=868.44, unrealized=-493207.04, today_pnl=-493207.04)], 'updated_at': datetime.datetime(2025, 8, 21, 19, 3, 17, 673041, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))), 'trading_day': '2025-08-21'}\n", "record": {"elapsed": {"repr": "0:01:59.387808", "seconds": 119.387808}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 585, "message": "PnL model fields: {'totals': PnLTotals(realized=0.0, unrealized=623363.99, day=623363.99, currency='INR'), 'per_symbol': [PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1727, avg=618.93, ltp=353.75, unrealized=-457961.3, today_pnl=-457961.3), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=167, avg=948.57, ltp=1224.48, unrealized=-46077.58, today_pnl=-46077.58), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=1347, avg=801.44, ltp=1983.03, unrealized=1591607.83, today_pnl=1591607.83), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=143, avg=1427.62, ltp=1224.81, unrealized=29002.08, today_pnl=29002.08), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=438, avg=1994.48, ltp=868.44, unrealized=-493207.04, today_pnl=-493207.04)], 'updated_at': datetime.datetime(2025, 8, 21, 19, 3, 17, 673041, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))), 'trading_day': '2025-08-21'}", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:03:17.680350+05:30", "timestamp": 1755783197.68035}}}
{"text": "2025-08-21 19:03:17.680 | INFO     | app.services.dhan_client:get_pnl:587 - P&L calculation completed successfully: 5 symbols, unrealized=‚Çπ623363.99\n", "record": {"elapsed": {"repr": "0:01:59.388342", "seconds": 119.388342}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 587, "message": "P&L calculation completed successfully: 5 symbols, unrealized=‚Çπ623363.99", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:03:17.680884+05:30", "timestamp": 1755783197.680884}}}
{"text": "2025-08-21 19:03:17.681 | DEBUG    | app.ws.live:emit_delta:408 - Emitted pnl delta: seq=132\n", "record": {"elapsed": {"repr": "0:01:59.388911", "seconds": 119.388911}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "emit_delta", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 408, "message": "Emitted pnl delta: seq=132", "module": "live", "name": "app.ws.live", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:03:17.681453+05:30", "timestamp": 1755783197.681453}}}
{"text": "2025-08-21 19:03:18.751 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:02:00.458873", "seconds": 120.458873}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:03:18.751415+05:30", "timestamp": 1755783198.751415}}}
{"text": "2025-08-21 19:03:18.752 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:02:00.459765", "seconds": 120.459765}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:03:18.752307+05:30", "timestamp": 1755783198.752307}}}
{"text": "2025-08-21 19:03:18.752 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:02:00.460246", "seconds": 120.460246}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:03:18.752788+05:30", "timestamp": 1755783198.752788}}}
{"text": "2025-08-21 19:03:18.753 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:02:00.460671", "seconds": 120.460671}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:03:18.753213+05:30", "timestamp": 1755783198.753213}}}
{"text": "2025-08-21 19:03:18.753 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:02:00.461145", "seconds": 120.461145}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:03:18.753687+05:30", "timestamp": 1755783198.753687}}}
{"text": "2025-08-21 19:03:18.754 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:02:00.461586", "seconds": 120.461586}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:03:18.754128+05:30", "timestamp": 1755783198.754128}}}
{"text": "2025-08-21 19:03:18.754 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:02:00.461949", "seconds": 120.461949}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:03:18.754491+05:30", "timestamp": 1755783198.754491}}}
{"text": "2025-08-21 19:03:18.754 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:02:00.462289", "seconds": 120.462289}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:03:18.754831+05:30", "timestamp": 1755783198.754831}}}
{"text": "2025-08-21 19:03:18.755 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:02:00.462706", "seconds": 120.462706}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:03:18.755248+05:30", "timestamp": 1755783198.755248}}}
{"text": "2025-08-21 19:03:18.755 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:02:00.463135", "seconds": 120.463135}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:03:18.755677+05:30", "timestamp": 1755783198.755677}}}
{"text": "2025-08-21 19:03:18.946 | DEBUG    | app.ws.live:emit_delta:408 - Emitted positions delta: seq=133\n", "record": {"elapsed": {"repr": "0:02:00.653949", "seconds": 120.653949}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "emit_delta", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 408, "message": "Emitted positions delta: seq=133", "module": "live", "name": "app.ws.live", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:03:18.946491+05:30", "timestamp": 1755783198.946491}}}
{"text": "2025-08-21 19:03:19.354 | INFO     | app.services.dhan_client:get_pnl:489 - Starting accurate P&L calculation\n", "record": {"elapsed": {"repr": "0:02:01.061783", "seconds": 121.061783}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 489, "message": "Starting accurate P&L calculation", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:03:19.354325+05:30", "timestamp": 1755783199.354325}}}
{"text": "2025-08-21 19:03:19.354 | INFO     | app.services.dhan_client:get_pnl:491 - Fetched 5 positions\n", "record": {"elapsed": {"repr": "0:02:01.062339", "seconds": 121.062339}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 491, "message": "Fetched 5 positions", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:03:19.354881+05:30", "timestamp": 1755783199.354881}}}
{"text": "2025-08-21 19:03:19.355 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for RELIANCE: unrealized=-469130.4, today=-469130.4\n", "record": {"elapsed": {"repr": "0:02:01.062883", "seconds": 121.062883}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for RELIANCE: unrealized=-469130.4, today=-469130.4", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:03:19.355425+05:30", "timestamp": 1755783199.355425}}}
{"text": "2025-08-21 19:03:19.355 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for TCS: unrealized=-48477.01, today=-48477.01\n", "record": {"elapsed": {"repr": "0:02:01.063336", "seconds": 121.063336}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for TCS: unrealized=-48477.01, today=-48477.01", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:03:19.355878+05:30", "timestamp": 1755783199.355878}}}
{"text": "2025-08-21 19:03:19.356 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for HDFC: unrealized=1545130.2, today=1545130.2\n", "record": {"elapsed": {"repr": "0:02:01.063994", "seconds": 121.063994}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for HDFC: unrealized=1545130.2, today=1545130.2", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:03:19.356536+05:30", "timestamp": 1755783199.356536}}}
{"text": "2025-08-21 19:03:19.357 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for INFY: unrealized=25532.7, today=25532.7\n", "record": {"elapsed": {"repr": "0:02:01.064750", "seconds": 121.06475}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for INFY: unrealized=25532.7, today=25532.7", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:03:19.357292+05:30", "timestamp": 1755783199.357292}}}
{"text": "2025-08-21 19:03:19.357 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for ICICIBANK: unrealized=-498831.22, today=-498831.22\n", "record": {"elapsed": {"repr": "0:02:01.065281", "seconds": 121.065281}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for ICICIBANK: unrealized=-498831.22, today=-498831.22", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:03:19.357823+05:30", "timestamp": 1755783199.357823}}}
{"text": "2025-08-21 19:03:19.358 | INFO     | app.services.dhan_client:get_pnl:545 - Calculated totals - realized: 0.0, unrealized: 554224.27, day: 554224.27\n", "record": {"elapsed": {"repr": "0:02:01.065797", "seconds": 121.065797}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 545, "message": "Calculated totals - realized: 0.0, unrealized: 554224.27, day: 554224.27", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:03:19.358339+05:30", "timestamp": 1755783199.358339}}}
{"text": "2025-08-21 19:03:19.358 | DEBUG    | app.services.dhan_client:get_pnl:554 - PnL consistency check passed: drift=‚Çπ0.00\n", "record": {"elapsed": {"repr": "0:02:01.066351", "seconds": 121.066351}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 554, "message": "PnL consistency check passed: drift=‚Çπ0.00", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:03:19.358893+05:30", "timestamp": 1755783199.358893}}}
{"text": "2025-08-21 19:03:19.359 | DEBUG    | app.services.dhan_client:get_pnl:558 - Creating PnLTotals...\n", "record": {"elapsed": {"repr": "0:02:01.066907", "seconds": 121.066907}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 558, "message": "Creating PnLTotals...", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:03:19.359449+05:30", "timestamp": 1755783199.359449}}}
{"text": "2025-08-21 19:03:19.360 | DEBUG    | app.services.dhan_client:get_pnl:565 - PnLTotals created successfully\n", "record": {"elapsed": {"repr": "0:02:01.067782", "seconds": 121.067782}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 565, "message": "PnLTotals created successfully", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:03:19.360324+05:30", "timestamp": 1755783199.360324}}}
{"text": "2025-08-21 19:03:19.361 | DEBUG    | app.services.dhan_client:get_pnl:574 - Creating PnL model...\n", "record": {"elapsed": {"repr": "0:02:01.068508", "seconds": 121.068508}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 574, "message": "Creating PnL model...", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:03:19.361050+05:30", "timestamp": 1755783199.36105}}}
{"text": "2025-08-21 19:03:19.361 | DEBUG    | app.services.dhan_client:get_pnl:575 - Model fields: totals=<class 'app.models.schemas.PnLTotals'>, perSymbol=5, updated_at=2025-08-21 19:03:19.355352+05:30, trading_day=2025-08-21\n", "record": {"elapsed": {"repr": "0:02:01.068938", "seconds": 121.068938}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 575, "message": "Model fields: totals=<class 'app.models.schemas.PnLTotals'>, perSymbol=5, updated_at=2025-08-21 19:03:19.355352+05:30, trading_day=2025-08-21", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:03:19.361480+05:30", "timestamp": 1755783199.36148}}}
{"text": "2025-08-21 19:03:19.362 | DEBUG    | app.services.dhan_client:get_pnl:584 - Created PnL model: totals=PnLTotals(realized=0.0, unrealized=554224.27, day=554224.27, currency='INR') per_symbol=[PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1727, avg=618.93, ltp=347.29, unrealized=-469130.4, today_pnl=-469130.4), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=167, avg=948.57, ltp=1238.85, unrealized=-48477.01, today_pnl=-48477.01), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=1347, avg=801.44, ltp=1948.53, unrealized=1545130.2, today_pnl=1545130.2), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=143, avg=1427.62, ltp=1249.07, unrealized=25532.7, today_pnl=25532.7), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=438, avg=1994.48, ltp=855.6, unrealized=-498831.22, today_pnl=-498831.22)] updated_at=datetime.datetime(2025, 8, 21, 19, 3, 19, 355352, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))) trading_day='2025-08-21'\n", "record": {"elapsed": {"repr": "0:02:01.069526", "seconds": 121.069526}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 584, "message": "Created PnL model: totals=PnLTotals(realized=0.0, unrealized=554224.27, day=554224.27, currency='INR') per_symbol=[PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1727, avg=618.93, ltp=347.29, unrealized=-469130.4, today_pnl=-469130.4), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=167, avg=948.57, ltp=1238.85, unrealized=-48477.01, today_pnl=-48477.01), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=1347, avg=801.44, ltp=1948.53, unrealized=1545130.2, today_pnl=1545130.2), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=143, avg=1427.62, ltp=1249.07, unrealized=25532.7, today_pnl=25532.7), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=438, avg=1994.48, ltp=855.6, unrealized=-498831.22, today_pnl=-498831.22)] updated_at=datetime.datetime(2025, 8, 21, 19, 3, 19, 355352, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))) trading_day='2025-08-21'", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:03:19.362068+05:30", "timestamp": 1755783199.362068}}}
{"text": "2025-08-21 19:03:19.362 | DEBUG    | app.services.dhan_client:get_pnl:585 - PnL model fields: {'totals': PnLTotals(realized=0.0, unrealized=554224.27, day=554224.27, currency='INR'), 'per_symbol': [PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1727, avg=618.93, ltp=347.29, unrealized=-469130.4, today_pnl=-469130.4), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=167, avg=948.57, ltp=1238.85, unrealized=-48477.01, today_pnl=-48477.01), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=1347, avg=801.44, ltp=1948.53, unrealized=1545130.2, today_pnl=1545130.2), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=143, avg=1427.62, ltp=1249.07, unrealized=25532.7, today_pnl=25532.7), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=438, avg=1994.48, ltp=855.6, unrealized=-498831.22, today_pnl=-498831.22)], 'updated_at': datetime.datetime(2025, 8, 21, 19, 3, 19, 355352, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))), 'trading_day': '2025-08-21'}\n", "record": {"elapsed": {"repr": "0:02:01.070152", "seconds": 121.070152}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 585, "message": "PnL model fields: {'totals': PnLTotals(realized=0.0, unrealized=554224.27, day=554224.27, currency='INR'), 'per_symbol': [PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1727, avg=618.93, ltp=347.29, unrealized=-469130.4, today_pnl=-469130.4), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=167, avg=948.57, ltp=1238.85, unrealized=-48477.01, today_pnl=-48477.01), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=1347, avg=801.44, ltp=1948.53, unrealized=1545130.2, today_pnl=1545130.2), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=143, avg=1427.62, ltp=1249.07, unrealized=25532.7, today_pnl=25532.7), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=438, avg=1994.48, ltp=855.6, unrealized=-498831.22, today_pnl=-498831.22)], 'updated_at': datetime.datetime(2025, 8, 21, 19, 3, 19, 355352, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))), 'trading_day': '2025-08-21'}", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:03:19.362694+05:30", "timestamp": 1755783199.362694}}}
{"text": "2025-08-21 19:03:19.363 | INFO     | app.services.dhan_client:get_pnl:587 - P&L calculation completed successfully: 5 symbols, unrealized=‚Çπ554224.27\n", "record": {"elapsed": {"repr": "0:02:01.070788", "seconds": 121.070788}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 587, "message": "P&L calculation completed successfully: 5 symbols, unrealized=‚Çπ554224.27", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:03:19.363330+05:30", "timestamp": 1755783199.36333}}}
{"text": "2025-08-21 19:03:19.364 | DEBUG    | app.ws.live:emit_delta:408 - Emitted pnl delta: seq=134\n", "record": {"elapsed": {"repr": "0:02:01.071476", "seconds": 121.071476}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "emit_delta", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 408, "message": "Emitted pnl delta: seq=134", "module": "live", "name": "app.ws.live", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:03:19.364018+05:30", "timestamp": 1755783199.364018}}}
{"text": "2025-08-21 19:03:20.756 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:02:02.464234", "seconds": 122.464234}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:03:20.756776+05:30", "timestamp": 1755783200.756776}}}
{"text": "2025-08-21 19:03:20.757 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:02:02.464859", "seconds": 122.464859}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:03:20.757401+05:30", "timestamp": 1755783200.757401}}}
{"text": "2025-08-21 19:03:20.757 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:02:02.465390", "seconds": 122.46539}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:03:20.757932+05:30", "timestamp": 1755783200.757932}}}
{"text": "2025-08-21 19:03:20.758 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:02:02.466102", "seconds": 122.466102}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:03:20.758644+05:30", "timestamp": 1755783200.758644}}}
{"text": "2025-08-21 19:03:20.759 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:02:02.466847", "seconds": 122.466847}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:03:20.759389+05:30", "timestamp": 1755783200.759389}}}
{"text": "2025-08-21 19:03:20.759 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:02:02.467276", "seconds": 122.467276}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:03:20.759818+05:30", "timestamp": 1755783200.759818}}}
{"text": "2025-08-21 19:03:20.760 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:02:02.467650", "seconds": 122.46765}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:03:20.760192+05:30", "timestamp": 1755783200.760192}}}
{"text": "2025-08-21 19:03:20.760 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:02:02.468049", "seconds": 122.468049}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:03:20.760591+05:30", "timestamp": 1755783200.760591}}}
{"text": "2025-08-21 19:03:20.760 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:02:02.468430", "seconds": 122.46843}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:03:20.760972+05:30", "timestamp": 1755783200.760972}}}
{"text": "2025-08-21 19:03:20.761 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:02:02.468763", "seconds": 122.468763}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:03:20.761305+05:30", "timestamp": 1755783200.761305}}}
{"text": "2025-08-21 19:03:20.877 | INFO     | app.services.dhan_client:get_pnl:489 - Starting accurate P&L calculation\n", "record": {"elapsed": {"repr": "0:02:02.584999", "seconds": 122.584999}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 489, "message": "Starting accurate P&L calculation", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:03:20.877541+05:30", "timestamp": 1755783200.877541}}}
{"text": "2025-08-21 19:03:20.878 | INFO     | app.services.dhan_client:get_pnl:491 - Fetched 5 positions\n", "record": {"elapsed": {"repr": "0:02:02.585617", "seconds": 122.585617}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 491, "message": "Fetched 5 positions", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:03:20.878159+05:30", "timestamp": 1755783200.878159}}}
{"text": "2025-08-21 19:03:20.878 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for RELIANCE: unrealized=-478507.63, today=-478507.63\n", "record": {"elapsed": {"repr": "0:02:02.586052", "seconds": 122.586052}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for RELIANCE: unrealized=-478507.63, today=-478507.63", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:03:20.878594+05:30", "timestamp": 1755783200.878594}}}
{"text": "2025-08-21 19:03:20.879 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for TCS: unrealized=-48122.3, today=-48122.3\n", "record": {"elapsed": {"repr": "0:02:02.586536", "seconds": 122.586536}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for TCS: unrealized=-48122.3, today=-48122.3", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:03:20.879078+05:30", "timestamp": 1755783200.879078}}}
{"text": "2025-08-21 19:03:20.879 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for HDFC: unrealized=1573599.92, today=1573599.92\n", "record": {"elapsed": {"repr": "0:02:02.586995", "seconds": 122.586995}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for HDFC: unrealized=1573599.92, today=1573599.92", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:03:20.879537+05:30", "timestamp": 1755783200.879537}}}
{"text": "2025-08-21 19:03:20.880 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for INFY: unrealized=22132.17, today=22132.17\n", "record": {"elapsed": {"repr": "0:02:02.587492", "seconds": 122.587492}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for INFY: unrealized=22132.17, today=22132.17", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:03:20.880034+05:30", "timestamp": 1755783200.880034}}}
{"text": "2025-08-21 19:03:20.880 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for ICICIBANK: unrealized=-494374.0, today=-494374.0\n", "record": {"elapsed": {"repr": "0:02:02.588296", "seconds": 122.588296}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for ICICIBANK: unrealized=-494374.0, today=-494374.0", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:03:20.880838+05:30", "timestamp": 1755783200.880838}}}
{"text": "2025-08-21 19:03:20.881 | INFO     | app.services.dhan_client:get_pnl:545 - Calculated totals - realized: 0.0, unrealized: 574728.16, day: 574728.16\n", "record": {"elapsed": {"repr": "0:02:02.589009", "seconds": 122.589009}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 545, "message": "Calculated totals - realized: 0.0, unrealized: 574728.16, day: 574728.16", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:03:20.881551+05:30", "timestamp": 1755783200.881551}}}
{"text": "2025-08-21 19:03:20.881 | DEBUG    | app.services.dhan_client:get_pnl:554 - PnL consistency check passed: drift=‚Çπ0.00\n", "record": {"elapsed": {"repr": "0:02:02.589457", "seconds": 122.589457}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 554, "message": "PnL consistency check passed: drift=‚Çπ0.00", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:03:20.881999+05:30", "timestamp": 1755783200.881999}}}
{"text": "2025-08-21 19:03:20.882 | DEBUG    | app.services.dhan_client:get_pnl:558 - Creating PnLTotals...\n", "record": {"elapsed": {"repr": "0:02:02.589942", "seconds": 122.589942}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 558, "message": "Creating PnLTotals...", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:03:20.882484+05:30", "timestamp": 1755783200.882484}}}
{"text": "2025-08-21 19:03:20.883 | DEBUG    | app.services.dhan_client:get_pnl:565 - PnLTotals created successfully\n", "record": {"elapsed": {"repr": "0:02:02.590544", "seconds": 122.590544}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 565, "message": "PnLTotals created successfully", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:03:20.883086+05:30", "timestamp": 1755783200.883086}}}
{"text": "2025-08-21 19:03:20.883 | DEBUG    | app.services.dhan_client:get_pnl:574 - Creating PnL model...\n", "record": {"elapsed": {"repr": "0:02:02.591178", "seconds": 122.591178}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 574, "message": "Creating PnL model...", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:03:20.883720+05:30", "timestamp": 1755783200.88372}}}
{"text": "2025-08-21 19:03:20.884 | DEBUG    | app.services.dhan_client:get_pnl:575 - Model fields: totals=<class 'app.models.schemas.PnLTotals'>, perSymbol=5, updated_at=2025-08-21 19:03:20.878542+05:30, trading_day=2025-08-21\n", "record": {"elapsed": {"repr": "0:02:02.592024", "seconds": 122.592024}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 575, "message": "Model fields: totals=<class 'app.models.schemas.PnLTotals'>, perSymbol=5, updated_at=2025-08-21 19:03:20.878542+05:30, trading_day=2025-08-21", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:03:20.884566+05:30", "timestamp": 1755783200.884566}}}
{"text": "2025-08-21 19:03:20.885 | DEBUG    | app.services.dhan_client:get_pnl:584 - Created PnL model: totals=PnLTotals(realized=0.0, unrealized=574728.16, day=574728.16, currency='INR') per_symbol=[PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1727, avg=618.93, ltp=341.86, unrealized=-478507.63, today_pnl=-478507.63), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=167, avg=948.57, ltp=1236.73, unrealized=-48122.3, today_pnl=-48122.3), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=1347, avg=801.44, ltp=1969.67, unrealized=1573599.92, today_pnl=1573599.92), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=143, avg=1427.62, ltp=1272.85, unrealized=22132.17, today_pnl=22132.17), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=438, avg=1994.48, ltp=865.77, unrealized=-494374.0, today_pnl=-494374.0)] updated_at=datetime.datetime(2025, 8, 21, 19, 3, 20, 878542, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))) trading_day='2025-08-21'\n", "record": {"elapsed": {"repr": "0:02:02.592796", "seconds": 122.592796}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 584, "message": "Created PnL model: totals=PnLTotals(realized=0.0, unrealized=574728.16, day=574728.16, currency='INR') per_symbol=[PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1727, avg=618.93, ltp=341.86, unrealized=-478507.63, today_pnl=-478507.63), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=167, avg=948.57, ltp=1236.73, unrealized=-48122.3, today_pnl=-48122.3), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=1347, avg=801.44, ltp=1969.67, unrealized=1573599.92, today_pnl=1573599.92), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=143, avg=1427.62, ltp=1272.85, unrealized=22132.17, today_pnl=22132.17), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=438, avg=1994.48, ltp=865.77, unrealized=-494374.0, today_pnl=-494374.0)] updated_at=datetime.datetime(2025, 8, 21, 19, 3, 20, 878542, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))) trading_day='2025-08-21'", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:03:20.885338+05:30", "timestamp": 1755783200.885338}}}
{"text": "2025-08-21 19:03:20.885 | DEBUG    | app.services.dhan_client:get_pnl:585 - PnL model fields: {'totals': PnLTotals(realized=0.0, unrealized=574728.16, day=574728.16, currency='INR'), 'per_symbol': [PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1727, avg=618.93, ltp=341.86, unrealized=-478507.63, today_pnl=-478507.63), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=167, avg=948.57, ltp=1236.73, unrealized=-48122.3, today_pnl=-48122.3), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=1347, avg=801.44, ltp=1969.67, unrealized=1573599.92, today_pnl=1573599.92), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=143, avg=1427.62, ltp=1272.85, unrealized=22132.17, today_pnl=22132.17), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=438, avg=1994.48, ltp=865.77, unrealized=-494374.0, today_pnl=-494374.0)], 'updated_at': datetime.datetime(2025, 8, 21, 19, 3, 20, 878542, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))), 'trading_day': '2025-08-21'}\n", "record": {"elapsed": {"repr": "0:02:02.593368", "seconds": 122.593368}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 585, "message": "PnL model fields: {'totals': PnLTotals(realized=0.0, unrealized=574728.16, day=574728.16, currency='INR'), 'per_symbol': [PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1727, avg=618.93, ltp=341.86, unrealized=-478507.63, today_pnl=-478507.63), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=167, avg=948.57, ltp=1236.73, unrealized=-48122.3, today_pnl=-48122.3), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=1347, avg=801.44, ltp=1969.67, unrealized=1573599.92, today_pnl=1573599.92), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=143, avg=1427.62, ltp=1272.85, unrealized=22132.17, today_pnl=22132.17), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=438, avg=1994.48, ltp=865.77, unrealized=-494374.0, today_pnl=-494374.0)], 'updated_at': datetime.datetime(2025, 8, 21, 19, 3, 20, 878542, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))), 'trading_day': '2025-08-21'}", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:03:20.885910+05:30", "timestamp": 1755783200.88591}}}
{"text": "2025-08-21 19:03:20.886 | INFO     | app.services.dhan_client:get_pnl:587 - P&L calculation completed successfully: 5 symbols, unrealized=‚Çπ574728.16\n", "record": {"elapsed": {"repr": "0:02:02.593911", "seconds": 122.593911}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 587, "message": "P&L calculation completed successfully: 5 symbols, unrealized=‚Çπ574728.16", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:03:20.886453+05:30", "timestamp": 1755783200.886453}}}
{"text": "2025-08-21 19:03:20.887 | DEBUG    | app.ws.live:emit_delta:408 - Emitted pnl delta: seq=135\n", "record": {"elapsed": {"repr": "0:02:02.594460", "seconds": 122.59446}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "emit_delta", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 408, "message": "Emitted pnl delta: seq=135", "module": "live", "name": "app.ws.live", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:03:20.887002+05:30", "timestamp": 1755783200.887002}}}
{"text": "2025-08-21 19:03:22.461 | DEBUG    | app.ws.live:emit_delta:408 - Emitted positions delta: seq=136\n", "record": {"elapsed": {"repr": "0:02:04.168479", "seconds": 124.168479}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "emit_delta", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 408, "message": "Emitted positions delta: seq=136", "module": "live", "name": "app.ws.live", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:03:22.461021+05:30", "timestamp": 1755783202.461021}}}
{"text": "2025-08-21 19:03:22.660 | INFO     | app.services.dhan_client:get_pnl:489 - Starting accurate P&L calculation\n", "record": {"elapsed": {"repr": "0:02:04.368287", "seconds": 124.368287}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 489, "message": "Starting accurate P&L calculation", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:03:22.660829+05:30", "timestamp": 1755783202.660829}}}
{"text": "2025-08-21 19:03:22.661 | INFO     | app.services.dhan_client:get_pnl:491 - Fetched 5 positions\n", "record": {"elapsed": {"repr": "0:02:04.368839", "seconds": 124.368839}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 491, "message": "Fetched 5 positions", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:03:22.661381+05:30", "timestamp": 1755783202.661381}}}
{"text": "2025-08-21 19:03:22.661 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for RELIANCE: unrealized=-478507.63, today=-478507.63\n", "record": {"elapsed": {"repr": "0:02:04.369381", "seconds": 124.369381}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for RELIANCE: unrealized=-478507.63, today=-478507.63", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:03:22.661923+05:30", "timestamp": 1755783202.661923}}}
{"text": "2025-08-21 19:03:22.662 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for TCS: unrealized=-48122.3, today=-48122.3\n", "record": {"elapsed": {"repr": "0:02:04.369905", "seconds": 124.369905}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for TCS: unrealized=-48122.3, today=-48122.3", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:03:22.662447+05:30", "timestamp": 1755783202.662447}}}
{"text": "2025-08-21 19:03:22.663 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for HDFC: unrealized=1573599.92, today=1573599.92\n", "record": {"elapsed": {"repr": "0:02:04.370706", "seconds": 124.370706}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for HDFC: unrealized=1573599.92, today=1573599.92", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:03:22.663248+05:30", "timestamp": 1755783202.663248}}}
{"text": "2025-08-21 19:03:22.663 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for INFY: unrealized=22132.17, today=22132.17\n", "record": {"elapsed": {"repr": "0:02:04.371445", "seconds": 124.371445}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for INFY: unrealized=22132.17, today=22132.17", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:03:22.663987+05:30", "timestamp": 1755783202.663987}}}
{"text": "2025-08-21 19:03:22.664 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for ICICIBANK: unrealized=-494374.0, today=-494374.0\n", "record": {"elapsed": {"repr": "0:02:04.371970", "seconds": 124.37197}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for ICICIBANK: unrealized=-494374.0, today=-494374.0", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:03:22.664512+05:30", "timestamp": 1755783202.664512}}}
{"text": "2025-08-21 19:03:22.665 | INFO     | app.services.dhan_client:get_pnl:545 - Calculated totals - realized: 0.0, unrealized: 574728.16, day: 574728.16\n", "record": {"elapsed": {"repr": "0:02:04.372509", "seconds": 124.372509}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 545, "message": "Calculated totals - realized: 0.0, unrealized: 574728.16, day: 574728.16", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:03:22.665051+05:30", "timestamp": 1755783202.665051}}}
{"text": "2025-08-21 19:03:22.665 | DEBUG    | app.services.dhan_client:get_pnl:554 - PnL consistency check passed: drift=‚Çπ0.00\n", "record": {"elapsed": {"repr": "0:02:04.373162", "seconds": 124.373162}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 554, "message": "PnL consistency check passed: drift=‚Çπ0.00", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:03:22.665704+05:30", "timestamp": 1755783202.665704}}}
{"text": "2025-08-21 19:03:22.666 | DEBUG    | app.services.dhan_client:get_pnl:558 - Creating PnLTotals...\n", "record": {"elapsed": {"repr": "0:02:04.373963", "seconds": 124.373963}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 558, "message": "Creating PnLTotals...", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:03:22.666505+05:30", "timestamp": 1755783202.666505}}}
{"text": "2025-08-21 19:03:22.667 | DEBUG    | app.services.dhan_client:get_pnl:565 - PnLTotals created successfully\n", "record": {"elapsed": {"repr": "0:02:04.374775", "seconds": 124.374775}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 565, "message": "PnLTotals created successfully", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:03:22.667317+05:30", "timestamp": 1755783202.667317}}}
{"text": "2025-08-21 19:03:22.667 | DEBUG    | app.services.dhan_client:get_pnl:574 - Creating PnL model...\n", "record": {"elapsed": {"repr": "0:02:04.375336", "seconds": 124.375336}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 574, "message": "Creating PnL model...", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:03:22.667878+05:30", "timestamp": 1755783202.667878}}}
{"text": "2025-08-21 19:03:22.668 | DEBUG    | app.services.dhan_client:get_pnl:575 - Model fields: totals=<class 'app.models.schemas.PnLTotals'>, perSymbol=5, updated_at=2025-08-21 19:03:22.661831+05:30, trading_day=2025-08-21\n", "record": {"elapsed": {"repr": "0:02:04.375768", "seconds": 124.375768}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 575, "message": "Model fields: totals=<class 'app.models.schemas.PnLTotals'>, perSymbol=5, updated_at=2025-08-21 19:03:22.661831+05:30, trading_day=2025-08-21", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:03:22.668310+05:30", "timestamp": 1755783202.66831}}}
{"text": "2025-08-21 19:03:22.668 | DEBUG    | app.services.dhan_client:get_pnl:584 - Created PnL model: totals=PnLTotals(realized=0.0, unrealized=574728.16, day=574728.16, currency='INR') per_symbol=[PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1727, avg=618.93, ltp=341.86, unrealized=-478507.63, today_pnl=-478507.63), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=167, avg=948.57, ltp=1236.73, unrealized=-48122.3, today_pnl=-48122.3), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=1347, avg=801.44, ltp=1969.67, unrealized=1573599.92, today_pnl=1573599.92), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=143, avg=1427.62, ltp=1272.85, unrealized=22132.17, today_pnl=22132.17), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=438, avg=1994.48, ltp=865.77, unrealized=-494374.0, today_pnl=-494374.0)] updated_at=datetime.datetime(2025, 8, 21, 19, 3, 22, 661831, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))) trading_day='2025-08-21'\n", "record": {"elapsed": {"repr": "0:02:04.376319", "seconds": 124.376319}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 584, "message": "Created PnL model: totals=PnLTotals(realized=0.0, unrealized=574728.16, day=574728.16, currency='INR') per_symbol=[PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1727, avg=618.93, ltp=341.86, unrealized=-478507.63, today_pnl=-478507.63), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=167, avg=948.57, ltp=1236.73, unrealized=-48122.3, today_pnl=-48122.3), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=1347, avg=801.44, ltp=1969.67, unrealized=1573599.92, today_pnl=1573599.92), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=143, avg=1427.62, ltp=1272.85, unrealized=22132.17, today_pnl=22132.17), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=438, avg=1994.48, ltp=865.77, unrealized=-494374.0, today_pnl=-494374.0)] updated_at=datetime.datetime(2025, 8, 21, 19, 3, 22, 661831, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))) trading_day='2025-08-21'", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:03:22.668861+05:30", "timestamp": 1755783202.668861}}}
{"text": "2025-08-21 19:03:22.669 | DEBUG    | app.services.dhan_client:get_pnl:585 - PnL model fields: {'totals': PnLTotals(realized=0.0, unrealized=574728.16, day=574728.16, currency='INR'), 'per_symbol': [PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1727, avg=618.93, ltp=341.86, unrealized=-478507.63, today_pnl=-478507.63), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=167, avg=948.57, ltp=1236.73, unrealized=-48122.3, today_pnl=-48122.3), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=1347, avg=801.44, ltp=1969.67, unrealized=1573599.92, today_pnl=1573599.92), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=143, avg=1427.62, ltp=1272.85, unrealized=22132.17, today_pnl=22132.17), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=438, avg=1994.48, ltp=865.77, unrealized=-494374.0, today_pnl=-494374.0)], 'updated_at': datetime.datetime(2025, 8, 21, 19, 3, 22, 661831, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))), 'trading_day': '2025-08-21'}\n", "record": {"elapsed": {"repr": "0:02:04.377016", "seconds": 124.377016}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 585, "message": "PnL model fields: {'totals': PnLTotals(realized=0.0, unrealized=574728.16, day=574728.16, currency='INR'), 'per_symbol': [PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1727, avg=618.93, ltp=341.86, unrealized=-478507.63, today_pnl=-478507.63), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=167, avg=948.57, ltp=1236.73, unrealized=-48122.3, today_pnl=-48122.3), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=1347, avg=801.44, ltp=1969.67, unrealized=1573599.92, today_pnl=1573599.92), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=143, avg=1427.62, ltp=1272.85, unrealized=22132.17, today_pnl=22132.17), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=438, avg=1994.48, ltp=865.77, unrealized=-494374.0, today_pnl=-494374.0)], 'updated_at': datetime.datetime(2025, 8, 21, 19, 3, 22, 661831, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))), 'trading_day': '2025-08-21'}", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:03:22.669558+05:30", "timestamp": 1755783202.669558}}}
{"text": "2025-08-21 19:03:22.670 | INFO     | app.services.dhan_client:get_pnl:587 - P&L calculation completed successfully: 5 symbols, unrealized=‚Çπ574728.16\n", "record": {"elapsed": {"repr": "0:02:04.377599", "seconds": 124.377599}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 587, "message": "P&L calculation completed successfully: 5 symbols, unrealized=‚Çπ574728.16", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:03:22.670141+05:30", "timestamp": 1755783202.670141}}}
{"text": "2025-08-21 19:03:22.670 | DEBUG    | app.ws.live:emit_delta:408 - Emitted pnl delta: seq=137\n", "record": {"elapsed": {"repr": "0:02:04.378290", "seconds": 124.37829}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "emit_delta", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 408, "message": "Emitted pnl delta: seq=137", "module": "live", "name": "app.ws.live", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:03:22.670832+05:30", "timestamp": 1755783202.670832}}}
{"text": "2025-08-21 19:03:22.761 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:02:04.469437", "seconds": 124.469437}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:03:22.761979+05:30", "timestamp": 1755783202.761979}}}
{"text": "2025-08-21 19:03:22.762 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:02:04.470218", "seconds": 124.470218}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:03:22.762760+05:30", "timestamp": 1755783202.76276}}}
{"text": "2025-08-21 19:03:22.763 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:02:04.470984", "seconds": 124.470984}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:03:22.763526+05:30", "timestamp": 1755783202.763526}}}
{"text": "2025-08-21 19:03:22.763 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:02:04.471383", "seconds": 124.471383}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:03:22.763925+05:30", "timestamp": 1755783202.763925}}}
{"text": "2025-08-21 19:03:22.764 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:02:04.471744", "seconds": 124.471744}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:03:22.764286+05:30", "timestamp": 1755783202.764286}}}
{"text": "2025-08-21 19:03:22.764 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:02:04.472174", "seconds": 124.472174}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:03:22.764716+05:30", "timestamp": 1755783202.764716}}}
{"text": "2025-08-21 19:03:22.765 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:02:04.472572", "seconds": 124.472572}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:03:22.765114+05:30", "timestamp": 1755783202.765114}}}
{"text": "2025-08-21 19:03:22.765 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:02:04.473171", "seconds": 124.473171}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:03:22.765713+05:30", "timestamp": 1755783202.765713}}}
{"text": "2025-08-21 19:03:22.766 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:02:04.474048", "seconds": 124.474048}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:03:22.766590+05:30", "timestamp": 1755783202.76659}}}
{"text": "2025-08-21 19:03:22.767 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:02:04.474827", "seconds": 124.474827}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:03:22.767369+05:30", "timestamp": 1755783202.767369}}}
{"text": "2025-08-21 19:03:23.735 | DEBUG    | app.ws.live:emit_delta:408 - Emitted holdings delta: seq=138\n", "record": {"elapsed": {"repr": "0:02:05.442759", "seconds": 125.442759}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "emit_delta", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 408, "message": "Emitted holdings delta: seq=138", "module": "live", "name": "app.ws.live", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:03:23.735301+05:30", "timestamp": 1755783203.735301}}}
{"text": "2025-08-21 19:03:24.017 | DEBUG    | app.ws.live:emit_delta:408 - Emitted positions delta: seq=139\n", "record": {"elapsed": {"repr": "0:02:05.725012", "seconds": 125.725012}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "emit_delta", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 408, "message": "Emitted positions delta: seq=139", "module": "live", "name": "app.ws.live", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:03:24.017554+05:30", "timestamp": 1755783204.017554}}}
{"text": "2025-08-21 19:03:24.334 | INFO     | app.services.dhan_client:get_pnl:489 - Starting accurate P&L calculation\n", "record": {"elapsed": {"repr": "0:02:06.042233", "seconds": 126.042233}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 489, "message": "Starting accurate P&L calculation", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:03:24.334775+05:30", "timestamp": 1755783204.334775}}}
{"text": "2025-08-21 19:03:24.335 | INFO     | app.services.dhan_client:get_pnl:491 - Fetched 5 positions\n", "record": {"elapsed": {"repr": "0:02:06.042824", "seconds": 126.042824}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 491, "message": "Fetched 5 positions", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:03:24.335366+05:30", "timestamp": 1755783204.335366}}}
{"text": "2025-08-21 19:03:24.335 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for RELIANCE: unrealized=-488171.24, today=-488171.24\n", "record": {"elapsed": {"repr": "0:02:06.043358", "seconds": 126.043358}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for RELIANCE: unrealized=-488171.24, today=-488171.24", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:03:24.335900+05:30", "timestamp": 1755783204.3359}}}
{"text": "2025-08-21 19:03:24.336 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for TCS: unrealized=-50020.91, today=-50020.91\n", "record": {"elapsed": {"repr": "0:02:06.043975", "seconds": 126.043975}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for TCS: unrealized=-50020.91, today=-50020.91", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:03:24.336517+05:30", "timestamp": 1755783204.336517}}}
{"text": "2025-08-21 19:03:24.337 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for HDFC: unrealized=1594709.49, today=1594709.49\n", "record": {"elapsed": {"repr": "0:02:06.044943", "seconds": 126.044943}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for HDFC: unrealized=1594709.49, today=1594709.49", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:03:24.337485+05:30", "timestamp": 1755783204.337485}}}
{"text": "2025-08-21 19:03:24.338 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for INFY: unrealized=21801.38, today=21801.38\n", "record": {"elapsed": {"repr": "0:02:06.045502", "seconds": 126.045502}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for INFY: unrealized=21801.38, today=21801.38", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:03:24.338044+05:30", "timestamp": 1755783204.338044}}}
{"text": "2025-08-21 19:03:24.338 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for ICICIBANK: unrealized=-498210.15, today=-498210.15\n", "record": {"elapsed": {"repr": "0:02:06.046012", "seconds": 126.046012}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for ICICIBANK: unrealized=-498210.15, today=-498210.15", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:03:24.338554+05:30", "timestamp": 1755783204.338554}}}
{"text": "2025-08-21 19:03:24.339 | INFO     | app.services.dhan_client:get_pnl:545 - Calculated totals - realized: 0.0, unrealized: 580108.57, day: 580108.57\n", "record": {"elapsed": {"repr": "0:02:06.046521", "seconds": 126.046521}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 545, "message": "Calculated totals - realized: 0.0, unrealized: 580108.57, day: 580108.57", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:03:24.339063+05:30", "timestamp": 1755783204.339063}}}
{"text": "2025-08-21 19:03:24.339 | DEBUG    | app.services.dhan_client:get_pnl:554 - PnL consistency check passed: drift=‚Çπ0.00\n", "record": {"elapsed": {"repr": "0:02:06.047065", "seconds": 126.047065}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 554, "message": "PnL consistency check passed: drift=‚Çπ0.00", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:03:24.339607+05:30", "timestamp": 1755783204.339607}}}
{"text": "2025-08-21 19:03:24.340 | DEBUG    | app.services.dhan_client:get_pnl:558 - Creating PnLTotals...\n", "record": {"elapsed": {"repr": "0:02:06.047661", "seconds": 126.047661}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 558, "message": "Creating PnLTotals...", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:03:24.340203+05:30", "timestamp": 1755783204.340203}}}
{"text": "2025-08-21 19:03:24.341 | DEBUG    | app.services.dhan_client:get_pnl:565 - PnLTotals created successfully\n", "record": {"elapsed": {"repr": "0:02:06.048496", "seconds": 126.048496}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 565, "message": "PnLTotals created successfully", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:03:24.341038+05:30", "timestamp": 1755783204.341038}}}
{"text": "2025-08-21 19:03:24.341 | DEBUG    | app.services.dhan_client:get_pnl:574 - Creating PnL model...\n", "record": {"elapsed": {"repr": "0:02:06.049092", "seconds": 126.049092}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 574, "message": "Creating PnL model...", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:03:24.341634+05:30", "timestamp": 1755783204.341634}}}
{"text": "2025-08-21 19:03:24.342 | DEBUG    | app.services.dhan_client:get_pnl:575 - Model fields: totals=<class 'app.models.schemas.PnLTotals'>, perSymbol=5, updated_at=2025-08-21 19:03:24.335805+05:30, trading_day=2025-08-21\n", "record": {"elapsed": {"repr": "0:02:06.049581", "seconds": 126.049581}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 575, "message": "Model fields: totals=<class 'app.models.schemas.PnLTotals'>, perSymbol=5, updated_at=2025-08-21 19:03:24.335805+05:30, trading_day=2025-08-21", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:03:24.342123+05:30", "timestamp": 1755783204.342123}}}
{"text": "2025-08-21 19:03:24.342 | DEBUG    | app.services.dhan_client:get_pnl:584 - Created PnL model: totals=PnLTotals(realized=0.0, unrealized=580108.57, day=580108.57, currency='INR') per_symbol=[PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1727, avg=618.93, ltp=336.26, unrealized=-488171.24, today_pnl=-488171.24), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=167, avg=948.57, ltp=1248.1, unrealized=-50020.91, today_pnl=-50020.91), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=1347, avg=801.44, ltp=1985.34, unrealized=1594709.49, today_pnl=1594709.49), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=143, avg=1427.62, ltp=1275.16, unrealized=21801.38, today_pnl=21801.38), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=438, avg=1994.48, ltp=857.01, unrealized=-498210.15, today_pnl=-498210.15)] updated_at=datetime.datetime(2025, 8, 21, 19, 3, 24, 335805, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))) trading_day='2025-08-21'\n", "record": {"elapsed": {"repr": "0:02:06.050283", "seconds": 126.050283}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 584, "message": "Created PnL model: totals=PnLTotals(realized=0.0, unrealized=580108.57, day=580108.57, currency='INR') per_symbol=[PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1727, avg=618.93, ltp=336.26, unrealized=-488171.24, today_pnl=-488171.24), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=167, avg=948.57, ltp=1248.1, unrealized=-50020.91, today_pnl=-50020.91), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=1347, avg=801.44, ltp=1985.34, unrealized=1594709.49, today_pnl=1594709.49), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=143, avg=1427.62, ltp=1275.16, unrealized=21801.38, today_pnl=21801.38), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=438, avg=1994.48, ltp=857.01, unrealized=-498210.15, today_pnl=-498210.15)] updated_at=datetime.datetime(2025, 8, 21, 19, 3, 24, 335805, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))) trading_day='2025-08-21'", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:03:24.342825+05:30", "timestamp": 1755783204.342825}}}
{"text": "2025-08-21 19:03:24.343 | DEBUG    | app.services.dhan_client:get_pnl:585 - PnL model fields: {'totals': PnLTotals(realized=0.0, unrealized=580108.57, day=580108.57, currency='INR'), 'per_symbol': [PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1727, avg=618.93, ltp=336.26, unrealized=-488171.24, today_pnl=-488171.24), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=167, avg=948.57, ltp=1248.1, unrealized=-50020.91, today_pnl=-50020.91), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=1347, avg=801.44, ltp=1985.34, unrealized=1594709.49, today_pnl=1594709.49), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=143, avg=1427.62, ltp=1275.16, unrealized=21801.38, today_pnl=21801.38), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=438, avg=1994.48, ltp=857.01, unrealized=-498210.15, today_pnl=-498210.15)], 'updated_at': datetime.datetime(2025, 8, 21, 19, 3, 24, 335805, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))), 'trading_day': '2025-08-21'}\n", "record": {"elapsed": {"repr": "0:02:06.050972", "seconds": 126.050972}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 585, "message": "PnL model fields: {'totals': PnLTotals(realized=0.0, unrealized=580108.57, day=580108.57, currency='INR'), 'per_symbol': [PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1727, avg=618.93, ltp=336.26, unrealized=-488171.24, today_pnl=-488171.24), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=167, avg=948.57, ltp=1248.1, unrealized=-50020.91, today_pnl=-50020.91), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=1347, avg=801.44, ltp=1985.34, unrealized=1594709.49, today_pnl=1594709.49), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=143, avg=1427.62, ltp=1275.16, unrealized=21801.38, today_pnl=21801.38), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=438, avg=1994.48, ltp=857.01, unrealized=-498210.15, today_pnl=-498210.15)], 'updated_at': datetime.datetime(2025, 8, 21, 19, 3, 24, 335805, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))), 'trading_day': '2025-08-21'}", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:03:24.343514+05:30", "timestamp": 1755783204.343514}}}
{"text": "2025-08-21 19:03:24.344 | INFO     | app.services.dhan_client:get_pnl:587 - P&L calculation completed successfully: 5 symbols, unrealized=‚Çπ580108.57\n", "record": {"elapsed": {"repr": "0:02:06.051600", "seconds": 126.0516}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 587, "message": "P&L calculation completed successfully: 5 symbols, unrealized=‚Çπ580108.57", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:03:24.344142+05:30", "timestamp": 1755783204.344142}}}
{"text": "2025-08-21 19:03:24.344 | DEBUG    | app.ws.live:emit_delta:408 - Emitted pnl delta: seq=140\n", "record": {"elapsed": {"repr": "0:02:06.052337", "seconds": 126.052337}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "emit_delta", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 408, "message": "Emitted pnl delta: seq=140", "module": "live", "name": "app.ws.live", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:03:24.344879+05:30", "timestamp": 1755783204.344879}}}
{"text": "2025-08-21 19:03:24.768 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:02:06.475966", "seconds": 126.475966}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:03:24.768508+05:30", "timestamp": 1755783204.768508}}}
{"text": "2025-08-21 19:03:24.769 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:02:06.476637", "seconds": 126.476637}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:03:24.769179+05:30", "timestamp": 1755783204.769179}}}
{"text": "2025-08-21 19:03:24.769 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:02:06.477189", "seconds": 126.477189}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:03:24.769731+05:30", "timestamp": 1755783204.769731}}}
{"text": "2025-08-21 19:03:24.770 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:02:06.478211", "seconds": 126.478211}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:03:24.770753+05:30", "timestamp": 1755783204.770753}}}
{"text": "2025-08-21 19:03:24.771 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:02:06.478796", "seconds": 126.478796}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:03:24.771338+05:30", "timestamp": 1755783204.771338}}}
{"text": "2025-08-21 19:03:24.771 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:02:06.479346", "seconds": 126.479346}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:03:24.771888+05:30", "timestamp": 1755783204.771888}}}
{"text": "2025-08-21 19:03:24.772 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:02:06.479899", "seconds": 126.479899}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:03:24.772441+05:30", "timestamp": 1755783204.772441}}}
{"text": "2025-08-21 19:03:24.773 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:02:06.480662", "seconds": 126.480662}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:03:24.773204+05:30", "timestamp": 1755783204.773204}}}
{"text": "2025-08-21 19:03:24.774 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:02:06.481826", "seconds": 126.481826}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:03:24.774368+05:30", "timestamp": 1755783204.774368}}}
{"text": "2025-08-21 19:03:24.775 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:02:06.482665", "seconds": 126.482665}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:03:24.775207+05:30", "timestamp": 1755783204.775207}}}
{"text": "2025-08-21 19:03:25.858 | DEBUG    | app.ws.live:emit_delta:408 - Emitted positions delta: seq=141\n", "record": {"elapsed": {"repr": "0:02:07.566197", "seconds": 127.566197}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "emit_delta", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 408, "message": "Emitted positions delta: seq=141", "module": "live", "name": "app.ws.live", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:03:25.858739+05:30", "timestamp": 1755783205.858739}}}
{"text": "2025-08-21 19:03:26.347 | INFO     | app.services.dhan_client:get_pnl:489 - Starting accurate P&L calculation\n", "record": {"elapsed": {"repr": "0:02:08.054639", "seconds": 128.054639}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 489, "message": "Starting accurate P&L calculation", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:03:26.347181+05:30", "timestamp": 1755783206.347181}}}
{"text": "2025-08-21 19:03:26.348 | INFO     | app.services.dhan_client:get_pnl:491 - Fetched 5 positions\n", "record": {"elapsed": {"repr": "0:02:08.055576", "seconds": 128.055576}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 491, "message": "Fetched 5 positions", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:03:26.348118+05:30", "timestamp": 1755783206.348118}}}
{"text": "2025-08-21 19:03:26.348 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for RELIANCE: unrealized=-477712.94, today=-477712.94\n", "record": {"elapsed": {"repr": "0:02:08.056149", "seconds": 128.056149}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for RELIANCE: unrealized=-477712.94, today=-477712.94", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:03:26.348691+05:30", "timestamp": 1755783206.348691}}}
{"text": "2025-08-21 19:03:26.349 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for TCS: unrealized=-49088.71, today=-49088.71\n", "record": {"elapsed": {"repr": "0:02:08.056663", "seconds": 128.056663}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for TCS: unrealized=-49088.71, today=-49088.71", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:03:26.349205+05:30", "timestamp": 1755783206.349205}}}
{"text": "2025-08-21 19:03:26.349 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for HDFC: unrealized=1552229.24, today=1552229.24\n", "record": {"elapsed": {"repr": "0:02:08.057140", "seconds": 128.05714}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for HDFC: unrealized=1552229.24, today=1552229.24", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:03:26.349682+05:30", "timestamp": 1755783206.349682}}}
{"text": "2025-08-21 19:03:26.350 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for INFY: unrealized=21348.0, today=21348.0\n", "record": {"elapsed": {"repr": "0:02:08.057617", "seconds": 128.057617}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for INFY: unrealized=21348.0, today=21348.0", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:03:26.350159+05:30", "timestamp": 1755783206.350159}}}
{"text": "2025-08-21 19:03:26.350 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for ICICIBANK: unrealized=-494604.2, today=-494604.2\n", "record": {"elapsed": {"repr": "0:02:08.058158", "seconds": 128.058158}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for ICICIBANK: unrealized=-494604.2, today=-494604.2", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:03:26.350700+05:30", "timestamp": 1755783206.3507}}}
{"text": "2025-08-21 19:03:26.351 | INFO     | app.services.dhan_client:get_pnl:545 - Calculated totals - realized: 0.0, unrealized: 552171.39, day: 552171.39\n", "record": {"elapsed": {"repr": "0:02:08.058725", "seconds": 128.058725}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 545, "message": "Calculated totals - realized: 0.0, unrealized: 552171.39, day: 552171.39", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:03:26.351267+05:30", "timestamp": 1755783206.351267}}}
{"text": "2025-08-21 19:03:26.351 | DEBUG    | app.services.dhan_client:get_pnl:554 - PnL consistency check passed: drift=‚Çπ0.00\n", "record": {"elapsed": {"repr": "0:02:08.059275", "seconds": 128.059275}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 554, "message": "PnL consistency check passed: drift=‚Çπ0.00", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:03:26.351817+05:30", "timestamp": 1755783206.351817}}}
{"text": "2025-08-21 19:03:26.352 | DEBUG    | app.services.dhan_client:get_pnl:558 - Creating PnLTotals...\n", "record": {"elapsed": {"repr": "0:02:08.060221", "seconds": 128.060221}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 558, "message": "Creating PnLTotals...", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:03:26.352763+05:30", "timestamp": 1755783206.352763}}}
{"text": "2025-08-21 19:03:26.353 | DEBUG    | app.services.dhan_client:get_pnl:565 - PnLTotals created successfully\n", "record": {"elapsed": {"repr": "0:02:08.060914", "seconds": 128.060914}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 565, "message": "PnLTotals created successfully", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:03:26.353456+05:30", "timestamp": 1755783206.353456}}}
{"text": "2025-08-21 19:03:26.354 | DEBUG    | app.services.dhan_client:get_pnl:574 - Creating PnL model...\n", "record": {"elapsed": {"repr": "0:02:08.061483", "seconds": 128.061483}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 574, "message": "Creating PnL model...", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:03:26.354025+05:30", "timestamp": 1755783206.354025}}}
{"text": "2025-08-21 19:03:26.354 | DEBUG    | app.services.dhan_client:get_pnl:575 - Model fields: totals=<class 'app.models.schemas.PnLTotals'>, perSymbol=5, updated_at=2025-08-21 19:03:26.348618+05:30, trading_day=2025-08-21\n", "record": {"elapsed": {"repr": "0:02:08.061997", "seconds": 128.061997}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 575, "message": "Model fields: totals=<class 'app.models.schemas.PnLTotals'>, perSymbol=5, updated_at=2025-08-21 19:03:26.348618+05:30, trading_day=2025-08-21", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:03:26.354539+05:30", "timestamp": 1755783206.354539}}}
{"text": "2025-08-21 19:03:26.355 | DEBUG    | app.services.dhan_client:get_pnl:584 - Created PnL model: totals=PnLTotals(realized=0.0, unrealized=552171.39, day=552171.39, currency='INR') per_symbol=[PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1727, avg=618.93, ltp=342.32, unrealized=-477712.94, today_pnl=-477712.94), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=167, avg=948.57, ltp=1242.51, unrealized=-49088.71, today_pnl=-49088.71), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=1347, avg=801.44, ltp=1953.8, unrealized=1552229.24, today_pnl=1552229.24), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=143, avg=1427.62, ltp=1278.33, unrealized=21348.0, today_pnl=21348.0), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=438, avg=1994.48, ltp=865.25, unrealized=-494604.2, today_pnl=-494604.2)] updated_at=datetime.datetime(2025, 8, 21, 19, 3, 26, 348618, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))) trading_day='2025-08-21'\n", "record": {"elapsed": {"repr": "0:02:08.062812", "seconds": 128.062812}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 584, "message": "Created PnL model: totals=PnLTotals(realized=0.0, unrealized=552171.39, day=552171.39, currency='INR') per_symbol=[PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1727, avg=618.93, ltp=342.32, unrealized=-477712.94, today_pnl=-477712.94), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=167, avg=948.57, ltp=1242.51, unrealized=-49088.71, today_pnl=-49088.71), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=1347, avg=801.44, ltp=1953.8, unrealized=1552229.24, today_pnl=1552229.24), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=143, avg=1427.62, ltp=1278.33, unrealized=21348.0, today_pnl=21348.0), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=438, avg=1994.48, ltp=865.25, unrealized=-494604.2, today_pnl=-494604.2)] updated_at=datetime.datetime(2025, 8, 21, 19, 3, 26, 348618, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))) trading_day='2025-08-21'", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:03:26.355354+05:30", "timestamp": 1755783206.355354}}}
{"text": "2025-08-21 19:03:26.356 | DEBUG    | app.services.dhan_client:get_pnl:585 - PnL model fields: {'totals': PnLTotals(realized=0.0, unrealized=552171.39, day=552171.39, currency='INR'), 'per_symbol': [PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1727, avg=618.93, ltp=342.32, unrealized=-477712.94, today_pnl=-477712.94), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=167, avg=948.57, ltp=1242.51, unrealized=-49088.71, today_pnl=-49088.71), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=1347, avg=801.44, ltp=1953.8, unrealized=1552229.24, today_pnl=1552229.24), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=143, avg=1427.62, ltp=1278.33, unrealized=21348.0, today_pnl=21348.0), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=438, avg=1994.48, ltp=865.25, unrealized=-494604.2, today_pnl=-494604.2)], 'updated_at': datetime.datetime(2025, 8, 21, 19, 3, 26, 348618, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))), 'trading_day': '2025-08-21'}\n", "record": {"elapsed": {"repr": "0:02:08.064061", "seconds": 128.064061}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 585, "message": "PnL model fields: {'totals': PnLTotals(realized=0.0, unrealized=552171.39, day=552171.39, currency='INR'), 'per_symbol': [PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1727, avg=618.93, ltp=342.32, unrealized=-477712.94, today_pnl=-477712.94), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=167, avg=948.57, ltp=1242.51, unrealized=-49088.71, today_pnl=-49088.71), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=1347, avg=801.44, ltp=1953.8, unrealized=1552229.24, today_pnl=1552229.24), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=143, avg=1427.62, ltp=1278.33, unrealized=21348.0, today_pnl=21348.0), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=438, avg=1994.48, ltp=865.25, unrealized=-494604.2, today_pnl=-494604.2)], 'updated_at': datetime.datetime(2025, 8, 21, 19, 3, 26, 348618, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))), 'trading_day': '2025-08-21'}", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:03:26.356603+05:30", "timestamp": 1755783206.356603}}}
{"text": "2025-08-21 19:03:26.357 | INFO     | app.services.dhan_client:get_pnl:587 - P&L calculation completed successfully: 5 symbols, unrealized=‚Çπ552171.39\n", "record": {"elapsed": {"repr": "0:02:08.064931", "seconds": 128.064931}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 587, "message": "P&L calculation completed successfully: 5 symbols, unrealized=‚Çπ552171.39", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:03:26.357473+05:30", "timestamp": 1755783206.357473}}}
{"text": "2025-08-21 19:03:26.358 | DEBUG    | app.ws.live:emit_delta:408 - Emitted pnl delta: seq=142\n", "record": {"elapsed": {"repr": "0:02:08.065837", "seconds": 128.065837}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "emit_delta", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 408, "message": "Emitted pnl delta: seq=142", "module": "live", "name": "app.ws.live", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:03:26.358379+05:30", "timestamp": 1755783206.358379}}}
{"text": "2025-08-21 19:03:26.776 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:02:08.483800", "seconds": 128.4838}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:03:26.776342+05:30", "timestamp": 1755783206.776342}}}
{"text": "2025-08-21 19:03:26.777 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:02:08.484980", "seconds": 128.48498}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:03:26.777522+05:30", "timestamp": 1755783206.777522}}}
{"text": "2025-08-21 19:03:26.778 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:02:08.485752", "seconds": 128.485752}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:03:26.778294+05:30", "timestamp": 1755783206.778294}}}
{"text": "2025-08-21 19:03:26.778 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:02:08.486306", "seconds": 128.486306}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:03:26.778848+05:30", "timestamp": 1755783206.778848}}}
{"text": "2025-08-21 19:03:26.779 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:02:08.487177", "seconds": 128.487177}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:03:26.779719+05:30", "timestamp": 1755783206.779719}}}
{"text": "2025-08-21 19:03:26.780 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:02:08.488077", "seconds": 128.488077}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:03:26.780619+05:30", "timestamp": 1755783206.780619}}}
{"text": "2025-08-21 19:03:26.781 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:02:08.489159", "seconds": 128.489159}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:03:26.781701+05:30", "timestamp": 1755783206.781701}}}
{"text": "2025-08-21 19:03:26.782 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:02:08.489932", "seconds": 128.489932}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:03:26.782474+05:30", "timestamp": 1755783206.782474}}}
{"text": "2025-08-21 19:03:26.783 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:02:08.490482", "seconds": 128.490482}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:03:26.783024+05:30", "timestamp": 1755783206.783024}}}
{"text": "2025-08-21 19:03:26.783 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:02:08.491025", "seconds": 128.491025}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:03:26.783567+05:30", "timestamp": 1755783206.783567}}}
{"text": "2025-08-21 19:03:27.617 | DEBUG    | app.ws.live:emit_delta:408 - Emitted positions delta: seq=143\n", "record": {"elapsed": {"repr": "0:02:09.325272", "seconds": 129.325272}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "emit_delta", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 408, "message": "Emitted positions delta: seq=143", "module": "live", "name": "app.ws.live", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:03:27.617814+05:30", "timestamp": 1755783207.617814}}}
{"text": "2025-08-21 19:03:27.867 | INFO     | app.services.dhan_client:get_pnl:489 - Starting accurate P&L calculation\n", "record": {"elapsed": {"repr": "0:02:09.575231", "seconds": 129.575231}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 489, "message": "Starting accurate P&L calculation", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:03:27.867773+05:30", "timestamp": 1755783207.867773}}}
{"text": "2025-08-21 19:03:27.869 | INFO     | app.services.dhan_client:get_pnl:491 - Fetched 5 positions\n", "record": {"elapsed": {"repr": "0:02:09.576512", "seconds": 129.576512}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 491, "message": "Fetched 5 positions", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:03:27.869054+05:30", "timestamp": 1755783207.869054}}}
{"text": "2025-08-21 19:03:27.869 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for RELIANCE: unrealized=-484047.42, today=-484047.42\n", "record": {"elapsed": {"repr": "0:02:09.577138", "seconds": 129.577138}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for RELIANCE: unrealized=-484047.42, today=-484047.42", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:03:27.869680+05:30", "timestamp": 1755783207.86968}}}
{"text": "2025-08-21 19:03:27.870 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for TCS: unrealized=-49199.75, today=-49199.75\n", "record": {"elapsed": {"repr": "0:02:09.577750", "seconds": 129.57775}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for TCS: unrealized=-49199.75, today=-49199.75", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:03:27.870292+05:30", "timestamp": 1755783207.870292}}}
{"text": "2025-08-21 19:03:27.871 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for HDFC: unrealized=1521850.67, today=1521850.67\n", "record": {"elapsed": {"repr": "0:02:09.578550", "seconds": 129.57855}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for HDFC: unrealized=1521850.67, today=1521850.67", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:03:27.871092+05:30", "timestamp": 1755783207.871092}}}
{"text": "2025-08-21 19:03:27.871 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for INFY: unrealized=21199.87, today=21199.87\n", "record": {"elapsed": {"repr": "0:02:09.579145", "seconds": 129.579145}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for INFY: unrealized=21199.87, today=21199.87", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:03:27.871687+05:30", "timestamp": 1755783207.871687}}}
{"text": "2025-08-21 19:03:27.872 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for ICICIBANK: unrealized=-500040.13, today=-500040.13\n", "record": {"elapsed": {"repr": "0:02:09.580265", "seconds": 129.580265}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for ICICIBANK: unrealized=-500040.13, today=-500040.13", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:03:27.872807+05:30", "timestamp": 1755783207.872807}}}
{"text": "2025-08-21 19:03:27.873 | INFO     | app.services.dhan_client:get_pnl:545 - Calculated totals - realized: 0.0, unrealized: 509763.24, day: 509763.24\n", "record": {"elapsed": {"repr": "0:02:09.581057", "seconds": 129.581057}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 545, "message": "Calculated totals - realized: 0.0, unrealized: 509763.24, day: 509763.24", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:03:27.873599+05:30", "timestamp": 1755783207.873599}}}
{"text": "2025-08-21 19:03:27.874 | DEBUG    | app.services.dhan_client:get_pnl:554 - PnL consistency check passed: drift=‚Çπ0.00\n", "record": {"elapsed": {"repr": "0:02:09.581801", "seconds": 129.581801}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 554, "message": "PnL consistency check passed: drift=‚Çπ0.00", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:03:27.874343+05:30", "timestamp": 1755783207.874343}}}
{"text": "2025-08-21 19:03:27.874 | DEBUG    | app.services.dhan_client:get_pnl:558 - Creating PnLTotals...\n", "record": {"elapsed": {"repr": "0:02:09.582429", "seconds": 129.582429}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 558, "message": "Creating PnLTotals...", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:03:27.874971+05:30", "timestamp": 1755783207.874971}}}
{"text": "2025-08-21 19:03:27.875 | DEBUG    | app.services.dhan_client:get_pnl:565 - PnLTotals created successfully\n", "record": {"elapsed": {"repr": "0:02:09.583129", "seconds": 129.583129}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 565, "message": "PnLTotals created successfully", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:03:27.875671+05:30", "timestamp": 1755783207.875671}}}
{"text": "2025-08-21 19:03:27.876 | DEBUG    | app.services.dhan_client:get_pnl:574 - Creating PnL model...\n", "record": {"elapsed": {"repr": "0:02:09.584115", "seconds": 129.584115}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 574, "message": "Creating PnL model...", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:03:27.876657+05:30", "timestamp": 1755783207.876657}}}
{"text": "2025-08-21 19:03:27.877 | DEBUG    | app.services.dhan_client:get_pnl:575 - Model fields: totals=<class 'app.models.schemas.PnLTotals'>, perSymbol=5, updated_at=2025-08-21 19:03:27.869592+05:30, trading_day=2025-08-21\n", "record": {"elapsed": {"repr": "0:02:09.584984", "seconds": 129.584984}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 575, "message": "Model fields: totals=<class 'app.models.schemas.PnLTotals'>, perSymbol=5, updated_at=2025-08-21 19:03:27.869592+05:30, trading_day=2025-08-21", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:03:27.877526+05:30", "timestamp": 1755783207.877526}}}
{"text": "2025-08-21 19:03:27.878 | DEBUG    | app.services.dhan_client:get_pnl:584 - Created PnL model: totals=PnLTotals(realized=0.0, unrealized=509763.24, day=509763.24, currency='INR') per_symbol=[PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1727, avg=618.93, ltp=338.65, unrealized=-484047.42, today_pnl=-484047.42), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=167, avg=948.57, ltp=1243.18, unrealized=-49199.75, today_pnl=-49199.75), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=1347, avg=801.44, ltp=1931.25, unrealized=1521850.67, today_pnl=1521850.67), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=143, avg=1427.62, ltp=1279.37, unrealized=21199.87, today_pnl=21199.87), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=438, avg=1994.48, ltp=852.84, unrealized=-500040.13, today_pnl=-500040.13)] updated_at=datetime.datetime(2025, 8, 21, 19, 3, 27, 869592, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))) trading_day='2025-08-21'\n", "record": {"elapsed": {"repr": "0:02:09.585843", "seconds": 129.585843}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 584, "message": "Created PnL model: totals=PnLTotals(realized=0.0, unrealized=509763.24, day=509763.24, currency='INR') per_symbol=[PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1727, avg=618.93, ltp=338.65, unrealized=-484047.42, today_pnl=-484047.42), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=167, avg=948.57, ltp=1243.18, unrealized=-49199.75, today_pnl=-49199.75), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=1347, avg=801.44, ltp=1931.25, unrealized=1521850.67, today_pnl=1521850.67), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=143, avg=1427.62, ltp=1279.37, unrealized=21199.87, today_pnl=21199.87), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=438, avg=1994.48, ltp=852.84, unrealized=-500040.13, today_pnl=-500040.13)] updated_at=datetime.datetime(2025, 8, 21, 19, 3, 27, 869592, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))) trading_day='2025-08-21'", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:03:27.878385+05:30", "timestamp": 1755783207.878385}}}
{"text": "2025-08-21 19:03:27.879 | DEBUG    | app.services.dhan_client:get_pnl:585 - PnL model fields: {'totals': PnLTotals(realized=0.0, unrealized=509763.24, day=509763.24, currency='INR'), 'per_symbol': [PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1727, avg=618.93, ltp=338.65, unrealized=-484047.42, today_pnl=-484047.42), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=167, avg=948.57, ltp=1243.18, unrealized=-49199.75, today_pnl=-49199.75), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=1347, avg=801.44, ltp=1931.25, unrealized=1521850.67, today_pnl=1521850.67), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=143, avg=1427.62, ltp=1279.37, unrealized=21199.87, today_pnl=21199.87), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=438, avg=1994.48, ltp=852.84, unrealized=-500040.13, today_pnl=-500040.13)], 'updated_at': datetime.datetime(2025, 8, 21, 19, 3, 27, 869592, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))), 'trading_day': '2025-08-21'}\n", "record": {"elapsed": {"repr": "0:02:09.587275", "seconds": 129.587275}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 585, "message": "PnL model fields: {'totals': PnLTotals(realized=0.0, unrealized=509763.24, day=509763.24, currency='INR'), 'per_symbol': [PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1727, avg=618.93, ltp=338.65, unrealized=-484047.42, today_pnl=-484047.42), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=167, avg=948.57, ltp=1243.18, unrealized=-49199.75, today_pnl=-49199.75), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=1347, avg=801.44, ltp=1931.25, unrealized=1521850.67, today_pnl=1521850.67), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=143, avg=1427.62, ltp=1279.37, unrealized=21199.87, today_pnl=21199.87), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=438, avg=1994.48, ltp=852.84, unrealized=-500040.13, today_pnl=-500040.13)], 'updated_at': datetime.datetime(2025, 8, 21, 19, 3, 27, 869592, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))), 'trading_day': '2025-08-21'}", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:03:27.879817+05:30", "timestamp": 1755783207.879817}}}
{"text": "2025-08-21 19:03:27.881 | INFO     | app.services.dhan_client:get_pnl:587 - P&L calculation completed successfully: 5 symbols, unrealized=‚Çπ509763.24\n", "record": {"elapsed": {"repr": "0:02:09.588619", "seconds": 129.588619}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 587, "message": "P&L calculation completed successfully: 5 symbols, unrealized=‚Çπ509763.24", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:03:27.881161+05:30", "timestamp": 1755783207.881161}}}
{"text": "2025-08-21 19:03:27.882 | DEBUG    | app.ws.live:emit_delta:408 - Emitted pnl delta: seq=144\n", "record": {"elapsed": {"repr": "0:02:09.589692", "seconds": 129.589692}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "emit_delta", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 408, "message": "Emitted pnl delta: seq=144", "module": "live", "name": "app.ws.live", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:03:27.882234+05:30", "timestamp": 1755783207.882234}}}
{"text": "2025-08-21 19:03:28.784 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:02:10.492367", "seconds": 130.492367}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:03:28.784909+05:30", "timestamp": 1755783208.784909}}}
{"text": "2025-08-21 19:03:28.785 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:02:10.493265", "seconds": 130.493265}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:03:28.785807+05:30", "timestamp": 1755783208.785807}}}
{"text": "2025-08-21 19:03:28.786 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:02:10.494129", "seconds": 130.494129}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:03:28.786671+05:30", "timestamp": 1755783208.786671}}}
{"text": "2025-08-21 19:03:28.787 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:02:10.494952", "seconds": 130.494952}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:03:28.787494+05:30", "timestamp": 1755783208.787494}}}
{"text": "2025-08-21 19:03:28.788 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:02:10.496199", "seconds": 130.496199}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:03:28.788741+05:30", "timestamp": 1755783208.788741}}}
{"text": "2025-08-21 19:03:28.789 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:02:10.497041", "seconds": 130.497041}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:03:28.789583+05:30", "timestamp": 1755783208.789583}}}
{"text": "2025-08-21 19:03:28.790 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:02:10.497613", "seconds": 130.497613}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:03:28.790155+05:30", "timestamp": 1755783208.790155}}}
{"text": "2025-08-21 19:03:28.790 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:02:10.498216", "seconds": 130.498216}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:03:28.790758+05:30", "timestamp": 1755783208.790758}}}
{"text": "2025-08-21 19:03:28.791 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:02:10.498812", "seconds": 130.498812}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:03:28.791354+05:30", "timestamp": 1755783208.791354}}}
{"text": "2025-08-21 19:03:28.791 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:02:10.499436", "seconds": 130.499436}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:03:28.791978+05:30", "timestamp": 1755783208.791978}}}
{"text": "2025-08-21 19:03:29.253 | DEBUG    | app.ws.live:emit_delta:408 - Emitted positions delta: seq=145\n", "record": {"elapsed": {"repr": "0:02:10.961295", "seconds": 130.961295}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "emit_delta", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 408, "message": "Emitted positions delta: seq=145", "module": "live", "name": "app.ws.live", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:03:29.253837+05:30", "timestamp": 1755783209.253837}}}
{"text": "2025-08-21 19:03:29.658 | INFO     | app.services.dhan_client:get_pnl:489 - Starting accurate P&L calculation\n", "record": {"elapsed": {"repr": "0:02:11.366192", "seconds": 131.366192}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 489, "message": "Starting accurate P&L calculation", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:03:29.658734+05:30", "timestamp": 1755783209.658734}}}
{"text": "2025-08-21 19:03:29.659 | INFO     | app.services.dhan_client:get_pnl:491 - Fetched 5 positions\n", "record": {"elapsed": {"repr": "0:02:11.367324", "seconds": 131.367324}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 491, "message": "Fetched 5 positions", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:03:29.659866+05:30", "timestamp": 1755783209.659866}}}
{"text": "2025-08-21 19:03:29.660 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for RELIANCE: unrealized=-476023.9, today=-476023.9\n", "record": {"elapsed": {"repr": "0:02:11.368106", "seconds": 131.368106}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for RELIANCE: unrealized=-476023.9, today=-476023.9", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:03:29.660648+05:30", "timestamp": 1755783209.660648}}}
{"text": "2025-08-21 19:03:29.661 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for TCS: unrealized=-50603.86, today=-50603.86\n", "record": {"elapsed": {"repr": "0:02:11.368739", "seconds": 131.368739}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for TCS: unrealized=-50603.86, today=-50603.86", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:03:29.661281+05:30", "timestamp": 1755783209.661281}}}
{"text": "2025-08-21 19:03:29.661 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for HDFC: unrealized=1525846.72, today=1525846.72\n", "record": {"elapsed": {"repr": "0:02:11.369424", "seconds": 131.369424}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for HDFC: unrealized=1525846.72, today=1525846.72", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:03:29.661966+05:30", "timestamp": 1755783209.661966}}}
{"text": "2025-08-21 19:03:29.662 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for INFY: unrealized=19278.14, today=19278.14\n", "record": {"elapsed": {"repr": "0:02:11.370342", "seconds": 131.370342}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for INFY: unrealized=19278.14, today=19278.14", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:03:29.662884+05:30", "timestamp": 1755783209.662884}}}
{"text": "2025-08-21 19:03:29.663 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for ICICIBANK: unrealized=-501767.27, today=-501767.27\n", "record": {"elapsed": {"repr": "0:02:11.371032", "seconds": 131.371032}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for ICICIBANK: unrealized=-501767.27, today=-501767.27", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:03:29.663574+05:30", "timestamp": 1755783209.663574}}}
{"text": "2025-08-21 19:03:29.664 | INFO     | app.services.dhan_client:get_pnl:545 - Calculated totals - realized: 0.0, unrealized: 516729.83, day: 516729.83\n", "record": {"elapsed": {"repr": "0:02:11.372298", "seconds": 131.372298}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 545, "message": "Calculated totals - realized: 0.0, unrealized: 516729.83, day: 516729.83", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:03:29.664840+05:30", "timestamp": 1755783209.66484}}}
{"text": "2025-08-21 19:03:29.666 | DEBUG    | app.services.dhan_client:get_pnl:554 - PnL consistency check passed: drift=‚Çπ0.00\n", "record": {"elapsed": {"repr": "0:02:11.373600", "seconds": 131.3736}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 554, "message": "PnL consistency check passed: drift=‚Çπ0.00", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:03:29.666142+05:30", "timestamp": 1755783209.666142}}}
{"text": "2025-08-21 19:03:29.666 | DEBUG    | app.services.dhan_client:get_pnl:558 - Creating PnLTotals...\n", "record": {"elapsed": {"repr": "0:02:11.374284", "seconds": 131.374284}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 558, "message": "Creating PnLTotals...", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:03:29.666826+05:30", "timestamp": 1755783209.666826}}}
{"text": "2025-08-21 19:03:29.668 | DEBUG    | app.services.dhan_client:get_pnl:565 - PnLTotals created successfully\n", "record": {"elapsed": {"repr": "0:02:11.375562", "seconds": 131.375562}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 565, "message": "PnLTotals created successfully", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:03:29.668104+05:30", "timestamp": 1755783209.668104}}}
{"text": "2025-08-21 19:03:29.668 | DEBUG    | app.services.dhan_client:get_pnl:574 - Creating PnL model...\n", "record": {"elapsed": {"repr": "0:02:11.376173", "seconds": 131.376173}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 574, "message": "Creating PnL model...", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:03:29.668715+05:30", "timestamp": 1755783209.668715}}}
{"text": "2025-08-21 19:03:29.669 | DEBUG    | app.services.dhan_client:get_pnl:575 - Model fields: totals=<class 'app.models.schemas.PnLTotals'>, perSymbol=5, updated_at=2025-08-21 19:03:29.660557+05:30, trading_day=2025-08-21\n", "record": {"elapsed": {"repr": "0:02:11.376754", "seconds": 131.376754}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 575, "message": "Model fields: totals=<class 'app.models.schemas.PnLTotals'>, perSymbol=5, updated_at=2025-08-21 19:03:29.660557+05:30, trading_day=2025-08-21", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:03:29.669296+05:30", "timestamp": 1755783209.669296}}}
{"text": "2025-08-21 19:03:29.670 | DEBUG    | app.services.dhan_client:get_pnl:584 - Created PnL model: totals=PnLTotals(realized=0.0, unrealized=516729.83, day=516729.83, currency='INR') per_symbol=[PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1727, avg=618.93, ltp=343.29, unrealized=-476023.9, today_pnl=-476023.9), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=167, avg=948.57, ltp=1251.59, unrealized=-50603.86, today_pnl=-50603.86), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=1347, avg=801.44, ltp=1934.21, unrealized=1525846.72, today_pnl=1525846.72), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=143, avg=1427.62, ltp=1292.81, unrealized=19278.14, today_pnl=19278.14), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=438, avg=1994.48, ltp=848.89, unrealized=-501767.27, today_pnl=-501767.27)] updated_at=datetime.datetime(2025, 8, 21, 19, 3, 29, 660557, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))) trading_day='2025-08-21'\n", "record": {"elapsed": {"repr": "0:02:11.377858", "seconds": 131.377858}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 584, "message": "Created PnL model: totals=PnLTotals(realized=0.0, unrealized=516729.83, day=516729.83, currency='INR') per_symbol=[PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1727, avg=618.93, ltp=343.29, unrealized=-476023.9, today_pnl=-476023.9), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=167, avg=948.57, ltp=1251.59, unrealized=-50603.86, today_pnl=-50603.86), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=1347, avg=801.44, ltp=1934.21, unrealized=1525846.72, today_pnl=1525846.72), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=143, avg=1427.62, ltp=1292.81, unrealized=19278.14, today_pnl=19278.14), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=438, avg=1994.48, ltp=848.89, unrealized=-501767.27, today_pnl=-501767.27)] updated_at=datetime.datetime(2025, 8, 21, 19, 3, 29, 660557, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))) trading_day='2025-08-21'", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:03:29.670400+05:30", "timestamp": 1755783209.6704}}}
{"text": "2025-08-21 19:03:29.672 | DEBUG    | app.services.dhan_client:get_pnl:585 - PnL model fields: {'totals': PnLTotals(realized=0.0, unrealized=516729.83, day=516729.83, currency='INR'), 'per_symbol': [PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1727, avg=618.93, ltp=343.29, unrealized=-476023.9, today_pnl=-476023.9), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=167, avg=948.57, ltp=1251.59, unrealized=-50603.86, today_pnl=-50603.86), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=1347, avg=801.44, ltp=1934.21, unrealized=1525846.72, today_pnl=1525846.72), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=143, avg=1427.62, ltp=1292.81, unrealized=19278.14, today_pnl=19278.14), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=438, avg=1994.48, ltp=848.89, unrealized=-501767.27, today_pnl=-501767.27)], 'updated_at': datetime.datetime(2025, 8, 21, 19, 3, 29, 660557, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))), 'trading_day': '2025-08-21'}\n", "record": {"elapsed": {"repr": "0:02:11.379714", "seconds": 131.379714}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 585, "message": "PnL model fields: {'totals': PnLTotals(realized=0.0, unrealized=516729.83, day=516729.83, currency='INR'), 'per_symbol': [PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1727, avg=618.93, ltp=343.29, unrealized=-476023.9, today_pnl=-476023.9), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=167, avg=948.57, ltp=1251.59, unrealized=-50603.86, today_pnl=-50603.86), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=1347, avg=801.44, ltp=1934.21, unrealized=1525846.72, today_pnl=1525846.72), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=143, avg=1427.62, ltp=1292.81, unrealized=19278.14, today_pnl=19278.14), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=438, avg=1994.48, ltp=848.89, unrealized=-501767.27, today_pnl=-501767.27)], 'updated_at': datetime.datetime(2025, 8, 21, 19, 3, 29, 660557, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))), 'trading_day': '2025-08-21'}", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:03:29.672256+05:30", "timestamp": 1755783209.672256}}}
{"text": "2025-08-21 19:03:29.673 | INFO     | app.services.dhan_client:get_pnl:587 - P&L calculation completed successfully: 5 symbols, unrealized=‚Çπ516729.83\n", "record": {"elapsed": {"repr": "0:02:11.380974", "seconds": 131.380974}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 587, "message": "P&L calculation completed successfully: 5 symbols, unrealized=‚Çπ516729.83", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:03:29.673516+05:30", "timestamp": 1755783209.673516}}}
{"text": "2025-08-21 19:03:29.674 | DEBUG    | app.ws.live:emit_delta:408 - Emitted pnl delta: seq=146\n", "record": {"elapsed": {"repr": "0:02:11.382139", "seconds": 131.382139}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "emit_delta", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 408, "message": "Emitted pnl delta: seq=146", "module": "live", "name": "app.ws.live", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:03:29.674681+05:30", "timestamp": 1755783209.674681}}}
{"text": "2025-08-21 19:03:30.793 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:02:12.500732", "seconds": 132.500732}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:03:30.793274+05:30", "timestamp": 1755783210.793274}}}
{"text": "2025-08-21 19:03:30.794 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:02:12.502075", "seconds": 132.502075}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:03:30.794617+05:30", "timestamp": 1755783210.794617}}}
{"text": "2025-08-21 19:03:30.795 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:02:12.502732", "seconds": 132.502732}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:03:30.795274+05:30", "timestamp": 1755783210.795274}}}
{"text": "2025-08-21 19:03:30.795 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:02:12.503240", "seconds": 132.50324}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:03:30.795782+05:30", "timestamp": 1755783210.795782}}}
{"text": "2025-08-21 19:03:30.796 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:02:12.503696", "seconds": 132.503696}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:03:30.796238+05:30", "timestamp": 1755783210.796238}}}
{"text": "2025-08-21 19:03:30.796 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:02:12.504092", "seconds": 132.504092}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:03:30.796634+05:30", "timestamp": 1755783210.796634}}}
{"text": "2025-08-21 19:03:30.797 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:02:12.504518", "seconds": 132.504518}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:03:30.797060+05:30", "timestamp": 1755783210.79706}}}
{"text": "2025-08-21 19:03:30.797 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:02:12.504997", "seconds": 132.504997}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:03:30.797539+05:30", "timestamp": 1755783210.797539}}}
{"text": "2025-08-21 19:03:30.797 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:02:12.505382", "seconds": 132.505382}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:03:30.797924+05:30", "timestamp": 1755783210.797924}}}
{"text": "2025-08-21 19:03:30.798 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:02:12.505853", "seconds": 132.505853}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:03:30.798395+05:30", "timestamp": 1755783210.798395}}}
{"text": "2025-08-21 19:03:31.211 | DEBUG    | app.ws.live:emit_delta:408 - Emitted positions delta: seq=147\n", "record": {"elapsed": {"repr": "0:02:12.918535", "seconds": 132.918535}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "emit_delta", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 408, "message": "Emitted positions delta: seq=147", "module": "live", "name": "app.ws.live", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:03:31.211077+05:30", "timestamp": 1755783211.211077}}}
{"text": "2025-08-21 19:03:31.350 | INFO     | app.services.dhan_client:get_pnl:489 - Starting accurate P&L calculation\n", "record": {"elapsed": {"repr": "0:02:13.057458", "seconds": 133.057458}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 489, "message": "Starting accurate P&L calculation", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:03:31.350000+05:30", "timestamp": 1755783211.35}}}
{"text": "2025-08-21 19:03:31.350 | INFO     | app.services.dhan_client:get_pnl:491 - Fetched 5 positions\n", "record": {"elapsed": {"repr": "0:02:13.057998", "seconds": 133.057998}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 491, "message": "Fetched 5 positions", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:03:31.350540+05:30", "timestamp": 1755783211.35054}}}
{"text": "2025-08-21 19:03:31.351 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for RELIANCE: unrealized=-468667.44, today=-468667.44\n", "record": {"elapsed": {"repr": "0:02:13.058509", "seconds": 133.058509}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for RELIANCE: unrealized=-468667.44, today=-468667.44", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:03:31.351051+05:30", "timestamp": 1755783211.351051}}}
{"text": "2025-08-21 19:03:31.351 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for TCS: unrealized=-48042.87, today=-48042.87\n", "record": {"elapsed": {"repr": "0:02:13.059119", "seconds": 133.059119}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for TCS: unrealized=-48042.87, today=-48042.87", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:03:31.351661+05:30", "timestamp": 1755783211.351661}}}
{"text": "2025-08-21 19:03:31.353 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for HDFC: unrealized=1518534.6, today=1518534.6\n", "record": {"elapsed": {"repr": "0:02:13.060480", "seconds": 133.06048}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for HDFC: unrealized=1518534.6, today=1518534.6", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:03:31.353022+05:30", "timestamp": 1755783211.353022}}}
{"text": "2025-08-21 19:03:31.353 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for INFY: unrealized=17251.27, today=17251.27\n", "record": {"elapsed": {"repr": "0:02:13.061290", "seconds": 133.06129}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for INFY: unrealized=17251.27, today=17251.27", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:03:31.353832+05:30", "timestamp": 1755783211.353832}}}
{"text": "2025-08-21 19:03:31.354 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for ICICIBANK: unrealized=-503621.67, today=-503621.67\n", "record": {"elapsed": {"repr": "0:02:13.061824", "seconds": 133.061824}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for ICICIBANK: unrealized=-503621.67, today=-503621.67", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:03:31.354366+05:30", "timestamp": 1755783211.354366}}}
{"text": "2025-08-21 19:03:31.354 | INFO     | app.services.dhan_client:get_pnl:545 - Calculated totals - realized: 0.0, unrealized: 515453.89, day: 515453.89\n", "record": {"elapsed": {"repr": "0:02:13.062268", "seconds": 133.062268}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 545, "message": "Calculated totals - realized: 0.0, unrealized: 515453.89, day: 515453.89", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:03:31.354810+05:30", "timestamp": 1755783211.35481}}}
{"text": "2025-08-21 19:03:31.355 | DEBUG    | app.services.dhan_client:get_pnl:554 - PnL consistency check passed: drift=‚Çπ0.00\n", "record": {"elapsed": {"repr": "0:02:13.062713", "seconds": 133.062713}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 554, "message": "PnL consistency check passed: drift=‚Çπ0.00", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:03:31.355255+05:30", "timestamp": 1755783211.355255}}}
{"text": "2025-08-21 19:03:31.355 | DEBUG    | app.services.dhan_client:get_pnl:558 - Creating PnLTotals...\n", "record": {"elapsed": {"repr": "0:02:13.063186", "seconds": 133.063186}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 558, "message": "Creating PnLTotals...", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:03:31.355728+05:30", "timestamp": 1755783211.355728}}}
{"text": "2025-08-21 19:03:31.356 | DEBUG    | app.services.dhan_client:get_pnl:565 - PnLTotals created successfully\n", "record": {"elapsed": {"repr": "0:02:13.063634", "seconds": 133.063634}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 565, "message": "PnLTotals created successfully", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:03:31.356176+05:30", "timestamp": 1755783211.356176}}}
{"text": "2025-08-21 19:03:31.356 | DEBUG    | app.services.dhan_client:get_pnl:574 - Creating PnL model...\n", "record": {"elapsed": {"repr": "0:02:13.064047", "seconds": 133.064047}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 574, "message": "Creating PnL model...", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:03:31.356589+05:30", "timestamp": 1755783211.356589}}}
{"text": "2025-08-21 19:03:31.357 | DEBUG    | app.services.dhan_client:get_pnl:575 - Model fields: totals=<class 'app.models.schemas.PnLTotals'>, perSymbol=5, updated_at=2025-08-21 19:03:31.350979+05:30, trading_day=2025-08-21\n", "record": {"elapsed": {"repr": "0:02:13.064477", "seconds": 133.064477}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 575, "message": "Model fields: totals=<class 'app.models.schemas.PnLTotals'>, perSymbol=5, updated_at=2025-08-21 19:03:31.350979+05:30, trading_day=2025-08-21", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:03:31.357019+05:30", "timestamp": 1755783211.357019}}}
{"text": "2025-08-21 19:03:31.357 | DEBUG    | app.services.dhan_client:get_pnl:584 - Created PnL model: totals=PnLTotals(realized=0.0, unrealized=515453.89, day=515453.89, currency='INR') per_symbol=[PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1727, avg=618.93, ltp=347.55, unrealized=-468667.44, today_pnl=-468667.44), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=167, avg=948.57, ltp=1236.25, unrealized=-48042.87, today_pnl=-48042.87), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=1347, avg=801.44, ltp=1928.79, unrealized=1518534.6, today_pnl=1518534.6), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=143, avg=1427.62, ltp=1306.98, unrealized=17251.27, today_pnl=17251.27), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=438, avg=1994.48, ltp=844.66, unrealized=-503621.67, today_pnl=-503621.67)] updated_at=datetime.datetime(2025, 8, 21, 19, 3, 31, 350979, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))) trading_day='2025-08-21'\n", "record": {"elapsed": {"repr": "0:02:13.065214", "seconds": 133.065214}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 584, "message": "Created PnL model: totals=PnLTotals(realized=0.0, unrealized=515453.89, day=515453.89, currency='INR') per_symbol=[PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1727, avg=618.93, ltp=347.55, unrealized=-468667.44, today_pnl=-468667.44), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=167, avg=948.57, ltp=1236.25, unrealized=-48042.87, today_pnl=-48042.87), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=1347, avg=801.44, ltp=1928.79, unrealized=1518534.6, today_pnl=1518534.6), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=143, avg=1427.62, ltp=1306.98, unrealized=17251.27, today_pnl=17251.27), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=438, avg=1994.48, ltp=844.66, unrealized=-503621.67, today_pnl=-503621.67)] updated_at=datetime.datetime(2025, 8, 21, 19, 3, 31, 350979, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))) trading_day='2025-08-21'", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:03:31.357756+05:30", "timestamp": 1755783211.357756}}}
{"text": "2025-08-21 19:03:31.358 | DEBUG    | app.services.dhan_client:get_pnl:585 - PnL model fields: {'totals': PnLTotals(realized=0.0, unrealized=515453.89, day=515453.89, currency='INR'), 'per_symbol': [PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1727, avg=618.93, ltp=347.55, unrealized=-468667.44, today_pnl=-468667.44), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=167, avg=948.57, ltp=1236.25, unrealized=-48042.87, today_pnl=-48042.87), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=1347, avg=801.44, ltp=1928.79, unrealized=1518534.6, today_pnl=1518534.6), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=143, avg=1427.62, ltp=1306.98, unrealized=17251.27, today_pnl=17251.27), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=438, avg=1994.48, ltp=844.66, unrealized=-503621.67, today_pnl=-503621.67)], 'updated_at': datetime.datetime(2025, 8, 21, 19, 3, 31, 350979, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))), 'trading_day': '2025-08-21'}\n", "record": {"elapsed": {"repr": "0:02:13.066437", "seconds": 133.066437}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 585, "message": "PnL model fields: {'totals': PnLTotals(realized=0.0, unrealized=515453.89, day=515453.89, currency='INR'), 'per_symbol': [PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1727, avg=618.93, ltp=347.55, unrealized=-468667.44, today_pnl=-468667.44), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=167, avg=948.57, ltp=1236.25, unrealized=-48042.87, today_pnl=-48042.87), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=1347, avg=801.44, ltp=1928.79, unrealized=1518534.6, today_pnl=1518534.6), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=143, avg=1427.62, ltp=1306.98, unrealized=17251.27, today_pnl=17251.27), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=438, avg=1994.48, ltp=844.66, unrealized=-503621.67, today_pnl=-503621.67)], 'updated_at': datetime.datetime(2025, 8, 21, 19, 3, 31, 350979, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))), 'trading_day': '2025-08-21'}", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:03:31.358979+05:30", "timestamp": 1755783211.358979}}}
{"text": "2025-08-21 19:03:31.359 | INFO     | app.services.dhan_client:get_pnl:587 - P&L calculation completed successfully: 5 symbols, unrealized=‚Çπ515453.89\n", "record": {"elapsed": {"repr": "0:02:13.067267", "seconds": 133.067267}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 587, "message": "P&L calculation completed successfully: 5 symbols, unrealized=‚Çπ515453.89", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:03:31.359809+05:30", "timestamp": 1755783211.359809}}}
{"text": "2025-08-21 19:03:31.361 | DEBUG    | app.ws.live:emit_delta:408 - Emitted pnl delta: seq=148\n", "record": {"elapsed": {"repr": "0:02:13.069153", "seconds": 133.069153}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "emit_delta", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 408, "message": "Emitted pnl delta: seq=148", "module": "live", "name": "app.ws.live", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:03:31.361695+05:30", "timestamp": 1755783211.361695}}}
{"text": "2025-08-21 19:03:32.799 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:02:14.506984", "seconds": 134.506984}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:03:32.799526+05:30", "timestamp": 1755783212.799526}}}
{"text": "2025-08-21 19:03:32.800 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:02:14.507657", "seconds": 134.507657}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:03:32.800199+05:30", "timestamp": 1755783212.800199}}}
{"text": "2025-08-21 19:03:32.800 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:02:14.508350", "seconds": 134.50835}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:03:32.800892+05:30", "timestamp": 1755783212.800892}}}
{"text": "2025-08-21 19:03:32.801 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:02:14.509376", "seconds": 134.509376}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:03:32.801918+05:30", "timestamp": 1755783212.801918}}}
{"text": "2025-08-21 19:03:32.802 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:02:14.510184", "seconds": 134.510184}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:03:32.802726+05:30", "timestamp": 1755783212.802726}}}
{"text": "2025-08-21 19:03:32.803 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:02:14.510677", "seconds": 134.510677}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:03:32.803219+05:30", "timestamp": 1755783212.803219}}}
{"text": "2025-08-21 19:03:32.803 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:02:14.511132", "seconds": 134.511132}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:03:32.803674+05:30", "timestamp": 1755783212.803674}}}
{"text": "2025-08-21 19:03:32.804 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:02:14.511520", "seconds": 134.51152}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:03:32.804062+05:30", "timestamp": 1755783212.804062}}}
{"text": "2025-08-21 19:03:32.804 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:02:14.511954", "seconds": 134.511954}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:03:32.804496+05:30", "timestamp": 1755783212.804496}}}
{"text": "2025-08-21 19:03:32.804 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:02:14.512374", "seconds": 134.512374}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:03:32.804916+05:30", "timestamp": 1755783212.804916}}}
{"text": "2025-08-21 19:03:32.868 | INFO     | app.services.dhan_client:get_pnl:489 - Starting accurate P&L calculation\n", "record": {"elapsed": {"repr": "0:02:14.576273", "seconds": 134.576273}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 489, "message": "Starting accurate P&L calculation", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:03:32.868815+05:30", "timestamp": 1755783212.868815}}}
{"text": "2025-08-21 19:03:32.869 | INFO     | app.services.dhan_client:get_pnl:491 - Fetched 5 positions\n", "record": {"elapsed": {"repr": "0:02:14.577042", "seconds": 134.577042}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 491, "message": "Fetched 5 positions", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:03:32.869584+05:30", "timestamp": 1755783212.869584}}}
{"text": "2025-08-21 19:03:32.870 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for RELIANCE: unrealized=-470659.45, today=-470659.45\n", "record": {"elapsed": {"repr": "0:02:14.577542", "seconds": 134.577542}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for RELIANCE: unrealized=-470659.45, today=-470659.45", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:03:32.870084+05:30", "timestamp": 1755783212.870084}}}
{"text": "2025-08-21 19:03:32.870 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for TCS: unrealized=-47016.56, today=-47016.56\n", "record": {"elapsed": {"repr": "0:02:14.578005", "seconds": 134.578005}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for TCS: unrealized=-47016.56, today=-47016.56", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:03:32.870547+05:30", "timestamp": 1755783212.870547}}}
{"text": "2025-08-21 19:03:32.870 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for HDFC: unrealized=1536147.08, today=1536147.08\n", "record": {"elapsed": {"repr": "0:02:14.578419", "seconds": 134.578419}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for HDFC: unrealized=1536147.08, today=1536147.08", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:03:32.870961+05:30", "timestamp": 1755783212.870961}}}
{"text": "2025-08-21 19:03:32.871 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for INFY: unrealized=20910.67, today=20910.67\n", "record": {"elapsed": {"repr": "0:02:14.578854", "seconds": 134.578854}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for INFY: unrealized=20910.67, today=20910.67", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:03:32.871396+05:30", "timestamp": 1755783212.871396}}}
{"text": "2025-08-21 19:03:32.871 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for ICICIBANK: unrealized=-497410.58, today=-497410.58\n", "record": {"elapsed": {"repr": "0:02:14.579251", "seconds": 134.579251}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for ICICIBANK: unrealized=-497410.58, today=-497410.58", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:03:32.871793+05:30", "timestamp": 1755783212.871793}}}
{"text": "2025-08-21 19:03:32.872 | INFO     | app.services.dhan_client:get_pnl:545 - Calculated totals - realized: 0.0, unrealized: 541971.16, day: 541971.16\n", "record": {"elapsed": {"repr": "0:02:14.579665", "seconds": 134.579665}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 545, "message": "Calculated totals - realized: 0.0, unrealized: 541971.16, day: 541971.16", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:03:32.872207+05:30", "timestamp": 1755783212.872207}}}
{"text": "2025-08-21 19:03:32.872 | DEBUG    | app.services.dhan_client:get_pnl:554 - PnL consistency check passed: drift=‚Çπ0.00\n", "record": {"elapsed": {"repr": "0:02:14.580105", "seconds": 134.580105}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 554, "message": "PnL consistency check passed: drift=‚Çπ0.00", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:03:32.872647+05:30", "timestamp": 1755783212.872647}}}
{"text": "2025-08-21 19:03:32.873 | DEBUG    | app.services.dhan_client:get_pnl:558 - Creating PnLTotals...\n", "record": {"elapsed": {"repr": "0:02:14.580596", "seconds": 134.580596}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 558, "message": "Creating PnLTotals...", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:03:32.873138+05:30", "timestamp": 1755783212.873138}}}
{"text": "2025-08-21 19:03:32.873 | DEBUG    | app.services.dhan_client:get_pnl:565 - PnLTotals created successfully\n", "record": {"elapsed": {"repr": "0:02:14.581119", "seconds": 134.581119}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 565, "message": "PnLTotals created successfully", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:03:32.873661+05:30", "timestamp": 1755783212.873661}}}
{"text": "2025-08-21 19:03:32.874 | DEBUG    | app.services.dhan_client:get_pnl:574 - Creating PnL model...\n", "record": {"elapsed": {"repr": "0:02:14.582052", "seconds": 134.582052}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 574, "message": "Creating PnL model...", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:03:32.874594+05:30", "timestamp": 1755783212.874594}}}
{"text": "2025-08-21 19:03:32.875 | DEBUG    | app.services.dhan_client:get_pnl:575 - Model fields: totals=<class 'app.models.schemas.PnLTotals'>, perSymbol=5, updated_at=2025-08-21 19:03:32.870016+05:30, trading_day=2025-08-21\n", "record": {"elapsed": {"repr": "0:02:14.582615", "seconds": 134.582615}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 575, "message": "Model fields: totals=<class 'app.models.schemas.PnLTotals'>, perSymbol=5, updated_at=2025-08-21 19:03:32.870016+05:30, trading_day=2025-08-21", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:03:32.875157+05:30", "timestamp": 1755783212.875157}}}
{"text": "2025-08-21 19:03:32.875 | DEBUG    | app.services.dhan_client:get_pnl:584 - Created PnL model: totals=PnLTotals(realized=0.0, unrealized=541971.16, day=541971.16, currency='INR') per_symbol=[PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1727, avg=618.93, ltp=346.4, unrealized=-470659.45, today_pnl=-470659.45), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=167, avg=948.57, ltp=1230.11, unrealized=-47016.56, today_pnl=-47016.56), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=1347, avg=801.44, ltp=1941.86, unrealized=1536147.08, today_pnl=1536147.08), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=143, avg=1427.62, ltp=1281.39, unrealized=20910.67, today_pnl=20910.67), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=438, avg=1994.48, ltp=858.84, unrealized=-497410.58, today_pnl=-497410.58)] updated_at=datetime.datetime(2025, 8, 21, 19, 3, 32, 870016, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))) trading_day='2025-08-21'\n", "record": {"elapsed": {"repr": "0:02:14.583278", "seconds": 134.583278}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 584, "message": "Created PnL model: totals=PnLTotals(realized=0.0, unrealized=541971.16, day=541971.16, currency='INR') per_symbol=[PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1727, avg=618.93, ltp=346.4, unrealized=-470659.45, today_pnl=-470659.45), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=167, avg=948.57, ltp=1230.11, unrealized=-47016.56, today_pnl=-47016.56), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=1347, avg=801.44, ltp=1941.86, unrealized=1536147.08, today_pnl=1536147.08), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=143, avg=1427.62, ltp=1281.39, unrealized=20910.67, today_pnl=20910.67), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=438, avg=1994.48, ltp=858.84, unrealized=-497410.58, today_pnl=-497410.58)] updated_at=datetime.datetime(2025, 8, 21, 19, 3, 32, 870016, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))) trading_day='2025-08-21'", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:03:32.875820+05:30", "timestamp": 1755783212.87582}}}
{"text": "2025-08-21 19:03:32.876 | DEBUG    | app.services.dhan_client:get_pnl:585 - PnL model fields: {'totals': PnLTotals(realized=0.0, unrealized=541971.16, day=541971.16, currency='INR'), 'per_symbol': [PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1727, avg=618.93, ltp=346.4, unrealized=-470659.45, today_pnl=-470659.45), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=167, avg=948.57, ltp=1230.11, unrealized=-47016.56, today_pnl=-47016.56), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=1347, avg=801.44, ltp=1941.86, unrealized=1536147.08, today_pnl=1536147.08), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=143, avg=1427.62, ltp=1281.39, unrealized=20910.67, today_pnl=20910.67), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=438, avg=1994.48, ltp=858.84, unrealized=-497410.58, today_pnl=-497410.58)], 'updated_at': datetime.datetime(2025, 8, 21, 19, 3, 32, 870016, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))), 'trading_day': '2025-08-21'}\n", "record": {"elapsed": {"repr": "0:02:14.584076", "seconds": 134.584076}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 585, "message": "PnL model fields: {'totals': PnLTotals(realized=0.0, unrealized=541971.16, day=541971.16, currency='INR'), 'per_symbol': [PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1727, avg=618.93, ltp=346.4, unrealized=-470659.45, today_pnl=-470659.45), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=167, avg=948.57, ltp=1230.11, unrealized=-47016.56, today_pnl=-47016.56), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=1347, avg=801.44, ltp=1941.86, unrealized=1536147.08, today_pnl=1536147.08), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=143, avg=1427.62, ltp=1281.39, unrealized=20910.67, today_pnl=20910.67), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=438, avg=1994.48, ltp=858.84, unrealized=-497410.58, today_pnl=-497410.58)], 'updated_at': datetime.datetime(2025, 8, 21, 19, 3, 32, 870016, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))), 'trading_day': '2025-08-21'}", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:03:32.876618+05:30", "timestamp": 1755783212.876618}}}
{"text": "2025-08-21 19:03:32.877 | INFO     | app.services.dhan_client:get_pnl:587 - P&L calculation completed successfully: 5 symbols, unrealized=‚Çπ541971.16\n", "record": {"elapsed": {"repr": "0:02:14.585311", "seconds": 134.585311}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 587, "message": "P&L calculation completed successfully: 5 symbols, unrealized=‚Çπ541971.16", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:03:32.877853+05:30", "timestamp": 1755783212.877853}}}
{"text": "2025-08-21 19:03:32.879 | DEBUG    | app.ws.live:emit_delta:408 - Emitted pnl delta: seq=149\n", "record": {"elapsed": {"repr": "0:02:14.586593", "seconds": 134.586593}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "emit_delta", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 408, "message": "Emitted pnl delta: seq=149", "module": "live", "name": "app.ws.live", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:03:32.879135+05:30", "timestamp": 1755783212.879135}}}
{"text": "2025-08-21 19:03:33.154 | DEBUG    | app.ws.live:emit_delta:408 - Emitted positions delta: seq=150\n", "record": {"elapsed": {"repr": "0:02:14.861557", "seconds": 134.861557}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "emit_delta", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 408, "message": "Emitted positions delta: seq=150", "module": "live", "name": "app.ws.live", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:03:33.154099+05:30", "timestamp": 1755783213.154099}}}
{"text": "2025-08-21 19:03:34.652 | INFO     | app.services.dhan_client:get_pnl:489 - Starting accurate P&L calculation\n", "record": {"elapsed": {"repr": "0:02:16.360400", "seconds": 136.3604}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 489, "message": "Starting accurate P&L calculation", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:03:34.652942+05:30", "timestamp": 1755783214.652942}}}
{"text": "2025-08-21 19:03:34.653 | INFO     | app.services.dhan_client:get_pnl:491 - Fetched 5 positions\n", "record": {"elapsed": {"repr": "0:02:16.360991", "seconds": 136.360991}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 491, "message": "Fetched 5 positions", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:03:34.653533+05:30", "timestamp": 1755783214.653533}}}
{"text": "2025-08-21 19:03:34.654 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for RELIANCE: unrealized=-470659.45, today=-470659.45\n", "record": {"elapsed": {"repr": "0:02:16.361471", "seconds": 136.361471}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for RELIANCE: unrealized=-470659.45, today=-470659.45", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:03:34.654013+05:30", "timestamp": 1755783214.654013}}}
{"text": "2025-08-21 19:03:34.654 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for TCS: unrealized=-47016.56, today=-47016.56\n", "record": {"elapsed": {"repr": "0:02:16.361919", "seconds": 136.361919}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for TCS: unrealized=-47016.56, today=-47016.56", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:03:34.654461+05:30", "timestamp": 1755783214.654461}}}
{"text": "2025-08-21 19:03:34.654 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for HDFC: unrealized=1536147.08, today=1536147.08\n", "record": {"elapsed": {"repr": "0:02:16.362451", "seconds": 136.362451}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for HDFC: unrealized=1536147.08, today=1536147.08", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:03:34.654993+05:30", "timestamp": 1755783214.654993}}}
{"text": "2025-08-21 19:03:34.655 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for INFY: unrealized=20910.67, today=20910.67\n", "record": {"elapsed": {"repr": "0:02:16.362947", "seconds": 136.362947}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for INFY: unrealized=20910.67, today=20910.67", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:03:34.655489+05:30", "timestamp": 1755783214.655489}}}
{"text": "2025-08-21 19:03:34.656 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for ICICIBANK: unrealized=-497410.58, today=-497410.58\n", "record": {"elapsed": {"repr": "0:02:16.363819", "seconds": 136.363819}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for ICICIBANK: unrealized=-497410.58, today=-497410.58", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:03:34.656361+05:30", "timestamp": 1755783214.656361}}}
{"text": "2025-08-21 19:03:34.657 | INFO     | app.services.dhan_client:get_pnl:545 - Calculated totals - realized: 0.0, unrealized: 541971.16, day: 541971.16\n", "record": {"elapsed": {"repr": "0:02:16.364468", "seconds": 136.364468}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 545, "message": "Calculated totals - realized: 0.0, unrealized: 541971.16, day: 541971.16", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:03:34.657010+05:30", "timestamp": 1755783214.65701}}}
{"text": "2025-08-21 19:03:34.657 | DEBUG    | app.services.dhan_client:get_pnl:554 - PnL consistency check passed: drift=‚Çπ0.00\n", "record": {"elapsed": {"repr": "0:02:16.364935", "seconds": 136.364935}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 554, "message": "PnL consistency check passed: drift=‚Çπ0.00", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:03:34.657477+05:30", "timestamp": 1755783214.657477}}}
{"text": "2025-08-21 19:03:34.657 | DEBUG    | app.services.dhan_client:get_pnl:558 - Creating PnLTotals...\n", "record": {"elapsed": {"repr": "0:02:16.365449", "seconds": 136.365449}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 558, "message": "Creating PnLTotals...", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:03:34.657991+05:30", "timestamp": 1755783214.657991}}}
{"text": "2025-08-21 19:03:34.658 | DEBUG    | app.services.dhan_client:get_pnl:565 - PnLTotals created successfully\n", "record": {"elapsed": {"repr": "0:02:16.366121", "seconds": 136.366121}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 565, "message": "PnLTotals created successfully", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:03:34.658663+05:30", "timestamp": 1755783214.658663}}}
{"text": "2025-08-21 19:03:34.659 | DEBUG    | app.services.dhan_client:get_pnl:574 - Creating PnL model...\n", "record": {"elapsed": {"repr": "0:02:16.367352", "seconds": 136.367352}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 574, "message": "Creating PnL model...", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:03:34.659894+05:30", "timestamp": 1755783214.659894}}}
{"text": "2025-08-21 19:03:34.660 | DEBUG    | app.services.dhan_client:get_pnl:575 - Model fields: totals=<class 'app.models.schemas.PnLTotals'>, perSymbol=5, updated_at=2025-08-21 19:03:34.653957+05:30, trading_day=2025-08-21\n", "record": {"elapsed": {"repr": "0:02:16.367905", "seconds": 136.367905}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 575, "message": "Model fields: totals=<class 'app.models.schemas.PnLTotals'>, perSymbol=5, updated_at=2025-08-21 19:03:34.653957+05:30, trading_day=2025-08-21", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:03:34.660447+05:30", "timestamp": 1755783214.660447}}}
{"text": "2025-08-21 19:03:34.661 | DEBUG    | app.services.dhan_client:get_pnl:584 - Created PnL model: totals=PnLTotals(realized=0.0, unrealized=541971.16, day=541971.16, currency='INR') per_symbol=[PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1727, avg=618.93, ltp=346.4, unrealized=-470659.45, today_pnl=-470659.45), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=167, avg=948.57, ltp=1230.11, unrealized=-47016.56, today_pnl=-47016.56), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=1347, avg=801.44, ltp=1941.86, unrealized=1536147.08, today_pnl=1536147.08), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=143, avg=1427.62, ltp=1281.39, unrealized=20910.67, today_pnl=20910.67), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=438, avg=1994.48, ltp=858.84, unrealized=-497410.58, today_pnl=-497410.58)] updated_at=datetime.datetime(2025, 8, 21, 19, 3, 34, 653957, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))) trading_day='2025-08-21'\n", "record": {"elapsed": {"repr": "0:02:16.368577", "seconds": 136.368577}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 584, "message": "Created PnL model: totals=PnLTotals(realized=0.0, unrealized=541971.16, day=541971.16, currency='INR') per_symbol=[PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1727, avg=618.93, ltp=346.4, unrealized=-470659.45, today_pnl=-470659.45), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=167, avg=948.57, ltp=1230.11, unrealized=-47016.56, today_pnl=-47016.56), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=1347, avg=801.44, ltp=1941.86, unrealized=1536147.08, today_pnl=1536147.08), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=143, avg=1427.62, ltp=1281.39, unrealized=20910.67, today_pnl=20910.67), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=438, avg=1994.48, ltp=858.84, unrealized=-497410.58, today_pnl=-497410.58)] updated_at=datetime.datetime(2025, 8, 21, 19, 3, 34, 653957, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))) trading_day='2025-08-21'", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:03:34.661119+05:30", "timestamp": 1755783214.661119}}}
{"text": "2025-08-21 19:03:34.662 | DEBUG    | app.services.dhan_client:get_pnl:585 - PnL model fields: {'totals': PnLTotals(realized=0.0, unrealized=541971.16, day=541971.16, currency='INR'), 'per_symbol': [PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1727, avg=618.93, ltp=346.4, unrealized=-470659.45, today_pnl=-470659.45), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=167, avg=948.57, ltp=1230.11, unrealized=-47016.56, today_pnl=-47016.56), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=1347, avg=801.44, ltp=1941.86, unrealized=1536147.08, today_pnl=1536147.08), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=143, avg=1427.62, ltp=1281.39, unrealized=20910.67, today_pnl=20910.67), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=438, avg=1994.48, ltp=858.84, unrealized=-497410.58, today_pnl=-497410.58)], 'updated_at': datetime.datetime(2025, 8, 21, 19, 3, 34, 653957, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))), 'trading_day': '2025-08-21'}\n", "record": {"elapsed": {"repr": "0:02:16.369550", "seconds": 136.36955}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 585, "message": "PnL model fields: {'totals': PnLTotals(realized=0.0, unrealized=541971.16, day=541971.16, currency='INR'), 'per_symbol': [PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1727, avg=618.93, ltp=346.4, unrealized=-470659.45, today_pnl=-470659.45), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=167, avg=948.57, ltp=1230.11, unrealized=-47016.56, today_pnl=-47016.56), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=1347, avg=801.44, ltp=1941.86, unrealized=1536147.08, today_pnl=1536147.08), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=143, avg=1427.62, ltp=1281.39, unrealized=20910.67, today_pnl=20910.67), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=438, avg=1994.48, ltp=858.84, unrealized=-497410.58, today_pnl=-497410.58)], 'updated_at': datetime.datetime(2025, 8, 21, 19, 3, 34, 653957, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))), 'trading_day': '2025-08-21'}", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:03:34.662092+05:30", "timestamp": 1755783214.662092}}}
{"text": "2025-08-21 19:03:34.662 | INFO     | app.services.dhan_client:get_pnl:587 - P&L calculation completed successfully: 5 symbols, unrealized=‚Çπ541971.16\n", "record": {"elapsed": {"repr": "0:02:16.370142", "seconds": 136.370142}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 587, "message": "P&L calculation completed successfully: 5 symbols, unrealized=‚Çπ541971.16", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:03:34.662684+05:30", "timestamp": 1755783214.662684}}}
{"text": "2025-08-21 19:03:34.663 | DEBUG    | app.ws.live:emit_delta:408 - Emitted pnl delta: seq=151\n", "record": {"elapsed": {"repr": "0:02:16.370706", "seconds": 136.370706}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "emit_delta", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 408, "message": "Emitted pnl delta: seq=151", "module": "live", "name": "app.ws.live", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:03:34.663248+05:30", "timestamp": 1755783214.663248}}}
{"text": "2025-08-21 19:03:34.806 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:02:16.513787", "seconds": 136.513787}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:03:34.806329+05:30", "timestamp": 1755783214.806329}}}
{"text": "2025-08-21 19:03:34.806 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:02:16.514391", "seconds": 136.514391}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:03:34.806933+05:30", "timestamp": 1755783214.806933}}}
{"text": "2025-08-21 19:03:34.807 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:02:16.514895", "seconds": 136.514895}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:03:34.807437+05:30", "timestamp": 1755783214.807437}}}
{"text": "2025-08-21 19:03:34.807 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:02:16.515292", "seconds": 136.515292}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:03:34.807834+05:30", "timestamp": 1755783214.807834}}}
{"text": "2025-08-21 19:03:34.808 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:02:16.515952", "seconds": 136.515952}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:03:34.808494+05:30", "timestamp": 1755783214.808494}}}
{"text": "2025-08-21 19:03:34.809 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:02:16.516933", "seconds": 136.516933}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:03:34.809475+05:30", "timestamp": 1755783214.809475}}}
{"text": "2025-08-21 19:03:34.810 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:02:16.517568", "seconds": 136.517568}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:03:34.810110+05:30", "timestamp": 1755783214.81011}}}
{"text": "2025-08-21 19:03:34.810 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:02:16.518027", "seconds": 136.518027}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:03:34.810569+05:30", "timestamp": 1755783214.810569}}}
{"text": "2025-08-21 19:03:34.811 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:02:16.518467", "seconds": 136.518467}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:03:34.811009+05:30", "timestamp": 1755783214.811009}}}
{"text": "2025-08-21 19:03:34.811 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:02:16.518823", "seconds": 136.518823}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:03:34.811365+05:30", "timestamp": 1755783214.811365}}}
{"text": "2025-08-21 19:03:35.056 | DEBUG    | app.ws.live:emit_delta:408 - Emitted positions delta: seq=152\n", "record": {"elapsed": {"repr": "0:02:16.764072", "seconds": 136.764072}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "emit_delta", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 408, "message": "Emitted positions delta: seq=152", "module": "live", "name": "app.ws.live", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:03:35.056614+05:30", "timestamp": 1755783215.056614}}}
{"text": "2025-08-21 19:03:36.326 | INFO     | app.services.dhan_client:get_pnl:489 - Starting accurate P&L calculation\n", "record": {"elapsed": {"repr": "0:02:18.034443", "seconds": 138.034443}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 489, "message": "Starting accurate P&L calculation", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:03:36.326985+05:30", "timestamp": 1755783216.326985}}}
{"text": "2025-08-21 19:03:36.327 | INFO     | app.services.dhan_client:get_pnl:491 - Fetched 5 positions\n", "record": {"elapsed": {"repr": "0:02:18.035103", "seconds": 138.035103}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 491, "message": "Fetched 5 positions", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:03:36.327645+05:30", "timestamp": 1755783216.327645}}}
{"text": "2025-08-21 19:03:36.328 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for RELIANCE: unrealized=-473030.97, today=-473030.97\n", "record": {"elapsed": {"repr": "0:02:18.035600", "seconds": 138.0356}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for RELIANCE: unrealized=-473030.97, today=-473030.97", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:03:36.328142+05:30", "timestamp": 1755783216.328142}}}
{"text": "2025-08-21 19:03:36.328 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for TCS: unrealized=-45233.01, today=-45233.01\n", "record": {"elapsed": {"repr": "0:02:18.036131", "seconds": 138.036131}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for TCS: unrealized=-45233.01, today=-45233.01", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:03:36.328673+05:30", "timestamp": 1755783216.328673}}}
{"text": "2025-08-21 19:03:36.329 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for HDFC: unrealized=1529019.84, today=1529019.84\n", "record": {"elapsed": {"repr": "0:02:18.036617", "seconds": 138.036617}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for HDFC: unrealized=1529019.84, today=1529019.84", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:03:36.329159+05:30", "timestamp": 1755783216.329159}}}
{"text": "2025-08-21 19:03:36.329 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for INFY: unrealized=19743.43, today=19743.43\n", "record": {"elapsed": {"repr": "0:02:18.037047", "seconds": 138.037047}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for INFY: unrealized=19743.43, today=19743.43", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:03:36.329589+05:30", "timestamp": 1755783216.329589}}}
{"text": "2025-08-21 19:03:36.330 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for ICICIBANK: unrealized=-496345.35, today=-496345.35\n", "record": {"elapsed": {"repr": "0:02:18.037920", "seconds": 138.03792}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for ICICIBANK: unrealized=-496345.35, today=-496345.35", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:03:36.330462+05:30", "timestamp": 1755783216.330462}}}
{"text": "2025-08-21 19:03:36.331 | INFO     | app.services.dhan_client:get_pnl:545 - Calculated totals - realized: 0.0, unrealized: 534153.94, day: 534153.94\n", "record": {"elapsed": {"repr": "0:02:18.038521", "seconds": 138.038521}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 545, "message": "Calculated totals - realized: 0.0, unrealized: 534153.94, day: 534153.94", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:03:36.331063+05:30", "timestamp": 1755783216.331063}}}
{"text": "2025-08-21 19:03:36.331 | DEBUG    | app.services.dhan_client:get_pnl:554 - PnL consistency check passed: drift=‚Çπ0.00\n", "record": {"elapsed": {"repr": "0:02:18.038984", "seconds": 138.038984}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 554, "message": "PnL consistency check passed: drift=‚Çπ0.00", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:03:36.331526+05:30", "timestamp": 1755783216.331526}}}
{"text": "2025-08-21 19:03:36.331 | DEBUG    | app.services.dhan_client:get_pnl:558 - Creating PnLTotals...\n", "record": {"elapsed": {"repr": "0:02:18.039421", "seconds": 138.039421}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 558, "message": "Creating PnLTotals...", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:03:36.331963+05:30", "timestamp": 1755783216.331963}}}
{"text": "2025-08-21 19:03:36.332 | DEBUG    | app.services.dhan_client:get_pnl:565 - PnLTotals created successfully\n", "record": {"elapsed": {"repr": "0:02:18.039915", "seconds": 138.039915}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 565, "message": "PnLTotals created successfully", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:03:36.332457+05:30", "timestamp": 1755783216.332457}}}
{"text": "2025-08-21 19:03:36.333 | DEBUG    | app.services.dhan_client:get_pnl:574 - Creating PnL model...\n", "record": {"elapsed": {"repr": "0:02:18.040667", "seconds": 138.040667}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 574, "message": "Creating PnL model...", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:03:36.333209+05:30", "timestamp": 1755783216.333209}}}
{"text": "2025-08-21 19:03:36.334 | DEBUG    | app.services.dhan_client:get_pnl:575 - Model fields: totals=<class 'app.models.schemas.PnLTotals'>, perSymbol=5, updated_at=2025-08-21 19:03:36.328082+05:30, trading_day=2025-08-21\n", "record": {"elapsed": {"repr": "0:02:18.041466", "seconds": 138.041466}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 575, "message": "Model fields: totals=<class 'app.models.schemas.PnLTotals'>, perSymbol=5, updated_at=2025-08-21 19:03:36.328082+05:30, trading_day=2025-08-21", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:03:36.334008+05:30", "timestamp": 1755783216.334008}}}
{"text": "2025-08-21 19:03:36.334 | DEBUG    | app.services.dhan_client:get_pnl:584 - Created PnL model: totals=PnLTotals(realized=0.0, unrealized=534153.94, day=534153.94, currency='INR') per_symbol=[PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1727, avg=618.93, ltp=345.03, unrealized=-473030.97, today_pnl=-473030.97), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=167, avg=948.57, ltp=1219.43, unrealized=-45233.01, today_pnl=-45233.01), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=1347, avg=801.44, ltp=1936.57, unrealized=1529019.84, today_pnl=1529019.84), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=143, avg=1427.62, ltp=1289.55, unrealized=19743.43, today_pnl=19743.43), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=438, avg=1994.48, ltp=861.27, unrealized=-496345.35, today_pnl=-496345.35)] updated_at=datetime.datetime(2025, 8, 21, 19, 3, 36, 328082, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))) trading_day='2025-08-21'\n", "record": {"elapsed": {"repr": "0:02:18.042279", "seconds": 138.042279}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 584, "message": "Created PnL model: totals=PnLTotals(realized=0.0, unrealized=534153.94, day=534153.94, currency='INR') per_symbol=[PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1727, avg=618.93, ltp=345.03, unrealized=-473030.97, today_pnl=-473030.97), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=167, avg=948.57, ltp=1219.43, unrealized=-45233.01, today_pnl=-45233.01), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=1347, avg=801.44, ltp=1936.57, unrealized=1529019.84, today_pnl=1529019.84), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=143, avg=1427.62, ltp=1289.55, unrealized=19743.43, today_pnl=19743.43), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=438, avg=1994.48, ltp=861.27, unrealized=-496345.35, today_pnl=-496345.35)] updated_at=datetime.datetime(2025, 8, 21, 19, 3, 36, 328082, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))) trading_day='2025-08-21'", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:03:36.334821+05:30", "timestamp": 1755783216.334821}}}
{"text": "2025-08-21 19:03:36.335 | DEBUG    | app.services.dhan_client:get_pnl:585 - PnL model fields: {'totals': PnLTotals(realized=0.0, unrealized=534153.94, day=534153.94, currency='INR'), 'per_symbol': [PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1727, avg=618.93, ltp=345.03, unrealized=-473030.97, today_pnl=-473030.97), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=167, avg=948.57, ltp=1219.43, unrealized=-45233.01, today_pnl=-45233.01), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=1347, avg=801.44, ltp=1936.57, unrealized=1529019.84, today_pnl=1529019.84), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=143, avg=1427.62, ltp=1289.55, unrealized=19743.43, today_pnl=19743.43), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=438, avg=1994.48, ltp=861.27, unrealized=-496345.35, today_pnl=-496345.35)], 'updated_at': datetime.datetime(2025, 8, 21, 19, 3, 36, 328082, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))), 'trading_day': '2025-08-21'}\n", "record": {"elapsed": {"repr": "0:02:18.043005", "seconds": 138.043005}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 585, "message": "PnL model fields: {'totals': PnLTotals(realized=0.0, unrealized=534153.94, day=534153.94, currency='INR'), 'per_symbol': [PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1727, avg=618.93, ltp=345.03, unrealized=-473030.97, today_pnl=-473030.97), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=167, avg=948.57, ltp=1219.43, unrealized=-45233.01, today_pnl=-45233.01), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=1347, avg=801.44, ltp=1936.57, unrealized=1529019.84, today_pnl=1529019.84), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=143, avg=1427.62, ltp=1289.55, unrealized=19743.43, today_pnl=19743.43), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=438, avg=1994.48, ltp=861.27, unrealized=-496345.35, today_pnl=-496345.35)], 'updated_at': datetime.datetime(2025, 8, 21, 19, 3, 36, 328082, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))), 'trading_day': '2025-08-21'}", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:03:36.335547+05:30", "timestamp": 1755783216.335547}}}
{"text": "2025-08-21 19:03:36.336 | INFO     | app.services.dhan_client:get_pnl:587 - P&L calculation completed successfully: 5 symbols, unrealized=‚Çπ534153.94\n", "record": {"elapsed": {"repr": "0:02:18.043642", "seconds": 138.043642}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 587, "message": "P&L calculation completed successfully: 5 symbols, unrealized=‚Çπ534153.94", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:03:36.336184+05:30", "timestamp": 1755783216.336184}}}
{"text": "2025-08-21 19:03:36.336 | DEBUG    | app.ws.live:emit_delta:408 - Emitted pnl delta: seq=153\n", "record": {"elapsed": {"repr": "0:02:18.044171", "seconds": 138.044171}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "emit_delta", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 408, "message": "Emitted pnl delta: seq=153", "module": "live", "name": "app.ws.live", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:03:36.336713+05:30", "timestamp": 1755783216.336713}}}
{"text": "2025-08-21 19:03:36.811 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:02:18.519373", "seconds": 138.519373}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:03:36.811915+05:30", "timestamp": 1755783216.811915}}}
{"text": "2025-08-21 19:03:36.812 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:02:18.520037", "seconds": 138.520037}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:03:36.812579+05:30", "timestamp": 1755783216.812579}}}
{"text": "2025-08-21 19:03:36.813 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:02:18.520946", "seconds": 138.520946}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:03:36.813488+05:30", "timestamp": 1755783216.813488}}}
{"text": "2025-08-21 19:03:36.814 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:02:18.521516", "seconds": 138.521516}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:03:36.814058+05:30", "timestamp": 1755783216.814058}}}
{"text": "2025-08-21 19:03:36.814 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:02:18.521907", "seconds": 138.521907}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:03:36.814449+05:30", "timestamp": 1755783216.814449}}}
{"text": "2025-08-21 19:03:36.814 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:02:18.522345", "seconds": 138.522345}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:03:36.814887+05:30", "timestamp": 1755783216.814887}}}
{"text": "2025-08-21 19:03:36.815 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:02:18.522770", "seconds": 138.52277}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:03:36.815312+05:30", "timestamp": 1755783216.815312}}}
{"text": "2025-08-21 19:03:36.815 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:02:18.523339", "seconds": 138.523339}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:03:36.815881+05:30", "timestamp": 1755783216.815881}}}
{"text": "2025-08-21 19:03:36.816 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:02:18.523998", "seconds": 138.523998}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:03:36.816540+05:30", "timestamp": 1755783216.81654}}}
{"text": "2025-08-21 19:03:36.817 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:02:18.524752", "seconds": 138.524752}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:03:36.817294+05:30", "timestamp": 1755783216.817294}}}
{"text": "2025-08-21 19:03:36.912 | DEBUG    | app.ws.live:emit_delta:408 - Emitted positions delta: seq=154\n", "record": {"elapsed": {"repr": "0:02:18.620051", "seconds": 138.620051}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "emit_delta", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 408, "message": "Emitted positions delta: seq=154", "module": "live", "name": "app.ws.live", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:03:36.912593+05:30", "timestamp": 1755783216.912593}}}
{"text": "2025-08-21 19:03:38.333 | INFO     | app.services.dhan_client:get_pnl:489 - Starting accurate P&L calculation\n", "record": {"elapsed": {"repr": "0:02:20.041330", "seconds": 140.04133}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 489, "message": "Starting accurate P&L calculation", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:03:38.333872+05:30", "timestamp": 1755783218.333872}}}
{"text": "2025-08-21 19:03:38.334 | INFO     | app.services.dhan_client:get_pnl:491 - Fetched 5 positions\n", "record": {"elapsed": {"repr": "0:02:20.042003", "seconds": 140.042003}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 491, "message": "Fetched 5 positions", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:03:38.334545+05:30", "timestamp": 1755783218.334545}}}
{"text": "2025-08-21 19:03:38.335 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for RELIANCE: unrealized=-463790.7, today=-463790.7\n", "record": {"elapsed": {"repr": "0:02:20.042684", "seconds": 140.042684}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for RELIANCE: unrealized=-463790.7, today=-463790.7", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:03:38.335226+05:30", "timestamp": 1755783218.335226}}}
{"text": "2025-08-21 19:03:38.335 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for TCS: unrealized=-42479.15, today=-42479.15\n", "record": {"elapsed": {"repr": "0:02:20.043375", "seconds": 140.043375}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for TCS: unrealized=-42479.15, today=-42479.15", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:03:38.335917+05:30", "timestamp": 1755783218.335917}}}
{"text": "2025-08-21 19:03:38.336 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for HDFC: unrealized=1579808.02, today=1579808.02\n", "record": {"elapsed": {"repr": "0:02:20.043878", "seconds": 140.043878}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for HDFC: unrealized=1579808.02, today=1579808.02", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:03:38.336420+05:30", "timestamp": 1755783218.33642}}}
{"text": "2025-08-21 19:03:38.337 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for INFY: unrealized=17300.58, today=17300.58\n", "record": {"elapsed": {"repr": "0:02:20.044683", "seconds": 140.044683}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for INFY: unrealized=17300.58, today=17300.58", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:03:38.337225+05:30", "timestamp": 1755783218.337225}}}
{"text": "2025-08-21 19:03:38.338 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for ICICIBANK: unrealized=-500765.32, today=-500765.32\n", "record": {"elapsed": {"repr": "0:02:20.045564", "seconds": 140.045564}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for ICICIBANK: unrealized=-500765.32, today=-500765.32", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:03:38.338106+05:30", "timestamp": 1755783218.338106}}}
{"text": "2025-08-21 19:03:38.338 | INFO     | app.services.dhan_client:get_pnl:545 - Calculated totals - realized: 0.0, unrealized: 590073.43, day: 590073.43\n", "record": {"elapsed": {"repr": "0:02:20.046075", "seconds": 140.046075}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 545, "message": "Calculated totals - realized: 0.0, unrealized: 590073.43, day: 590073.43", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:03:38.338617+05:30", "timestamp": 1755783218.338617}}}
{"text": "2025-08-21 19:03:38.339 | DEBUG    | app.services.dhan_client:get_pnl:554 - PnL consistency check passed: drift=‚Çπ0.00\n", "record": {"elapsed": {"repr": "0:02:20.046574", "seconds": 140.046574}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 554, "message": "PnL consistency check passed: drift=‚Çπ0.00", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:03:38.339116+05:30", "timestamp": 1755783218.339116}}}
{"text": "2025-08-21 19:03:38.339 | DEBUG    | app.services.dhan_client:get_pnl:558 - Creating PnLTotals...\n", "record": {"elapsed": {"repr": "0:02:20.047084", "seconds": 140.047084}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 558, "message": "Creating PnLTotals...", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:03:38.339626+05:30", "timestamp": 1755783218.339626}}}
{"text": "2025-08-21 19:03:38.340 | DEBUG    | app.services.dhan_client:get_pnl:565 - PnLTotals created successfully\n", "record": {"elapsed": {"repr": "0:02:20.047950", "seconds": 140.04795}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 565, "message": "PnLTotals created successfully", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:03:38.340492+05:30", "timestamp": 1755783218.340492}}}
{"text": "2025-08-21 19:03:38.341 | DEBUG    | app.services.dhan_client:get_pnl:574 - Creating PnL model...\n", "record": {"elapsed": {"repr": "0:02:20.049049", "seconds": 140.049049}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 574, "message": "Creating PnL model...", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:03:38.341591+05:30", "timestamp": 1755783218.341591}}}
{"text": "2025-08-21 19:03:38.342 | DEBUG    | app.services.dhan_client:get_pnl:575 - Model fields: totals=<class 'app.models.schemas.PnLTotals'>, perSymbol=5, updated_at=2025-08-21 19:03:38.335137+05:30, trading_day=2025-08-21\n", "record": {"elapsed": {"repr": "0:02:20.049679", "seconds": 140.049679}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 575, "message": "Model fields: totals=<class 'app.models.schemas.PnLTotals'>, perSymbol=5, updated_at=2025-08-21 19:03:38.335137+05:30, trading_day=2025-08-21", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:03:38.342221+05:30", "timestamp": 1755783218.342221}}}
{"text": "2025-08-21 19:03:38.342 | DEBUG    | app.services.dhan_client:get_pnl:584 - Created PnL model: totals=PnLTotals(realized=0.0, unrealized=590073.43, day=590073.43, currency='INR') per_symbol=[PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1727, avg=618.93, ltp=350.38, unrealized=-463790.7, today_pnl=-463790.7), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=167, avg=948.57, ltp=1202.94, unrealized=-42479.15, today_pnl=-42479.15), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=1347, avg=801.44, ltp=1974.27, unrealized=1579808.02, today_pnl=1579808.02), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=143, avg=1427.62, ltp=1306.64, unrealized=17300.58, today_pnl=17300.58), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=438, avg=1994.48, ltp=851.18, unrealized=-500765.32, today_pnl=-500765.32)] updated_at=datetime.datetime(2025, 8, 21, 19, 3, 38, 335137, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))) trading_day='2025-08-21'\n", "record": {"elapsed": {"repr": "0:02:20.050337", "seconds": 140.050337}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 584, "message": "Created PnL model: totals=PnLTotals(realized=0.0, unrealized=590073.43, day=590073.43, currency='INR') per_symbol=[PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1727, avg=618.93, ltp=350.38, unrealized=-463790.7, today_pnl=-463790.7), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=167, avg=948.57, ltp=1202.94, unrealized=-42479.15, today_pnl=-42479.15), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=1347, avg=801.44, ltp=1974.27, unrealized=1579808.02, today_pnl=1579808.02), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=143, avg=1427.62, ltp=1306.64, unrealized=17300.58, today_pnl=17300.58), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=438, avg=1994.48, ltp=851.18, unrealized=-500765.32, today_pnl=-500765.32)] updated_at=datetime.datetime(2025, 8, 21, 19, 3, 38, 335137, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))) trading_day='2025-08-21'", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:03:38.342879+05:30", "timestamp": 1755783218.342879}}}
{"text": "2025-08-21 19:03:38.343 | DEBUG    | app.services.dhan_client:get_pnl:585 - PnL model fields: {'totals': PnLTotals(realized=0.0, unrealized=590073.43, day=590073.43, currency='INR'), 'per_symbol': [PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1727, avg=618.93, ltp=350.38, unrealized=-463790.7, today_pnl=-463790.7), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=167, avg=948.57, ltp=1202.94, unrealized=-42479.15, today_pnl=-42479.15), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=1347, avg=801.44, ltp=1974.27, unrealized=1579808.02, today_pnl=1579808.02), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=143, avg=1427.62, ltp=1306.64, unrealized=17300.58, today_pnl=17300.58), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=438, avg=1994.48, ltp=851.18, unrealized=-500765.32, today_pnl=-500765.32)], 'updated_at': datetime.datetime(2025, 8, 21, 19, 3, 38, 335137, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))), 'trading_day': '2025-08-21'}\n", "record": {"elapsed": {"repr": "0:02:20.051105", "seconds": 140.051105}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 585, "message": "PnL model fields: {'totals': PnLTotals(realized=0.0, unrealized=590073.43, day=590073.43, currency='INR'), 'per_symbol': [PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1727, avg=618.93, ltp=350.38, unrealized=-463790.7, today_pnl=-463790.7), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=167, avg=948.57, ltp=1202.94, unrealized=-42479.15, today_pnl=-42479.15), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=1347, avg=801.44, ltp=1974.27, unrealized=1579808.02, today_pnl=1579808.02), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=143, avg=1427.62, ltp=1306.64, unrealized=17300.58, today_pnl=17300.58), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=438, avg=1994.48, ltp=851.18, unrealized=-500765.32, today_pnl=-500765.32)], 'updated_at': datetime.datetime(2025, 8, 21, 19, 3, 38, 335137, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))), 'trading_day': '2025-08-21'}", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:03:38.343647+05:30", "timestamp": 1755783218.343647}}}
{"text": "2025-08-21 19:03:38.344 | INFO     | app.services.dhan_client:get_pnl:587 - P&L calculation completed successfully: 5 symbols, unrealized=‚Çπ590073.43\n", "record": {"elapsed": {"repr": "0:02:20.051933", "seconds": 140.051933}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 587, "message": "P&L calculation completed successfully: 5 symbols, unrealized=‚Çπ590073.43", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:03:38.344475+05:30", "timestamp": 1755783218.344475}}}
{"text": "2025-08-21 19:03:38.345 | DEBUG    | app.ws.live:emit_delta:408 - Emitted pnl delta: seq=155\n", "record": {"elapsed": {"repr": "0:02:20.053193", "seconds": 140.053193}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "emit_delta", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 408, "message": "Emitted pnl delta: seq=155", "module": "live", "name": "app.ws.live", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:03:38.345735+05:30", "timestamp": 1755783218.345735}}}
{"text": "2025-08-21 19:03:38.818 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:02:20.525526", "seconds": 140.525526}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:03:38.818068+05:30", "timestamp": 1755783218.818068}}}
{"text": "2025-08-21 19:03:38.818 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:02:20.526245", "seconds": 140.526245}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:03:38.818787+05:30", "timestamp": 1755783218.818787}}}
{"text": "2025-08-21 19:03:38.819 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:02:20.526863", "seconds": 140.526863}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:03:38.819405+05:30", "timestamp": 1755783218.819405}}}
{"text": "2025-08-21 19:03:38.820 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:02:20.527570", "seconds": 140.52757}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:03:38.820112+05:30", "timestamp": 1755783218.820112}}}
{"text": "2025-08-21 19:03:38.821 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:02:20.528624", "seconds": 140.528624}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:03:38.821166+05:30", "timestamp": 1755783218.821166}}}
{"text": "2025-08-21 19:03:38.821 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:02:20.529250", "seconds": 140.52925}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:03:38.821792+05:30", "timestamp": 1755783218.821792}}}
{"text": "2025-08-21 19:03:38.822 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:02:20.529874", "seconds": 140.529874}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:03:38.822416+05:30", "timestamp": 1755783218.822416}}}
{"text": "2025-08-21 19:03:38.823 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:02:20.530546", "seconds": 140.530546}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:03:38.823088+05:30", "timestamp": 1755783218.823088}}}
{"text": "2025-08-21 19:03:38.823 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:02:20.531422", "seconds": 140.531422}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:03:38.823964+05:30", "timestamp": 1755783218.823964}}}
{"text": "2025-08-21 19:03:38.824 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:02:20.532305", "seconds": 140.532305}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:03:38.824847+05:30", "timestamp": 1755783218.824847}}}
{"text": "2025-08-21 19:03:40.343 | INFO     | app.services.dhan_client:get_pnl:489 - Starting accurate P&L calculation\n", "record": {"elapsed": {"repr": "0:02:22.051151", "seconds": 142.051151}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 489, "message": "Starting accurate P&L calculation", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:03:40.343693+05:30", "timestamp": 1755783220.343693}}}
{"text": "2025-08-21 19:03:40.344 | INFO     | app.services.dhan_client:get_pnl:491 - Fetched 5 positions\n", "record": {"elapsed": {"repr": "0:02:22.052392", "seconds": 142.052392}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 491, "message": "Fetched 5 positions", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:03:40.344934+05:30", "timestamp": 1755783220.344934}}}
{"text": "2025-08-21 19:03:40.345 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for RELIANCE: unrealized=-473425.56, today=-473425.56\n", "record": {"elapsed": {"repr": "0:02:22.053085", "seconds": 142.053085}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for RELIANCE: unrealized=-473425.56, today=-473425.56", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:03:40.345627+05:30", "timestamp": 1755783220.345627}}}
{"text": "2025-08-21 19:03:40.346 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for TCS: unrealized=-42420.9, today=-42420.9\n", "record": {"elapsed": {"repr": "0:02:22.053650", "seconds": 142.05365}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for TCS: unrealized=-42420.9, today=-42420.9", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:03:40.346192+05:30", "timestamp": 1755783220.346192}}}
{"text": "2025-08-21 19:03:40.346 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for HDFC: unrealized=1561495.99, today=1561495.99\n", "record": {"elapsed": {"repr": "0:02:22.054245", "seconds": 142.054245}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for HDFC: unrealized=1561495.99, today=1561495.99", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:03:40.346787+05:30", "timestamp": 1755783220.346787}}}
{"text": "2025-08-21 19:03:40.347 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for INFY: unrealized=14950.98, today=14950.98\n", "record": {"elapsed": {"repr": "0:02:22.055014", "seconds": 142.055014}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for INFY: unrealized=14950.98, today=14950.98", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:03:40.347556+05:30", "timestamp": 1755783220.347556}}}
{"text": "2025-08-21 19:03:40.348 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for ICICIBANK: unrealized=-495995.87, today=-495995.87\n", "record": {"elapsed": {"repr": "0:02:22.056045", "seconds": 142.056045}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for ICICIBANK: unrealized=-495995.87, today=-495995.87", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:03:40.348587+05:30", "timestamp": 1755783220.348587}}}
{"text": "2025-08-21 19:03:40.349 | INFO     | app.services.dhan_client:get_pnl:545 - Calculated totals - realized: 0.0, unrealized: 564604.64, day: 564604.64\n", "record": {"elapsed": {"repr": "0:02:22.056779", "seconds": 142.056779}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 545, "message": "Calculated totals - realized: 0.0, unrealized: 564604.64, day: 564604.64", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:03:40.349321+05:30", "timestamp": 1755783220.349321}}}
{"text": "2025-08-21 19:03:40.349 | DEBUG    | app.services.dhan_client:get_pnl:554 - PnL consistency check passed: drift=‚Çπ0.00\n", "record": {"elapsed": {"repr": "0:02:22.057319", "seconds": 142.057319}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 554, "message": "PnL consistency check passed: drift=‚Çπ0.00", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:03:40.349861+05:30", "timestamp": 1755783220.349861}}}
{"text": "2025-08-21 19:03:40.350 | DEBUG    | app.services.dhan_client:get_pnl:558 - Creating PnLTotals...\n", "record": {"elapsed": {"repr": "0:02:22.057913", "seconds": 142.057913}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 558, "message": "Creating PnLTotals...", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:03:40.350455+05:30", "timestamp": 1755783220.350455}}}
{"text": "2025-08-21 19:03:40.350 | DEBUG    | app.services.dhan_client:get_pnl:565 - PnLTotals created successfully\n", "record": {"elapsed": {"repr": "0:02:22.058379", "seconds": 142.058379}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 565, "message": "PnLTotals created successfully", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:03:40.350921+05:30", "timestamp": 1755783220.350921}}}
{"text": "2025-08-21 19:03:40.351 | DEBUG    | app.services.dhan_client:get_pnl:574 - Creating PnL model...\n", "record": {"elapsed": {"repr": "0:02:22.058868", "seconds": 142.058868}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 574, "message": "Creating PnL model...", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:03:40.351410+05:30", "timestamp": 1755783220.35141}}}
{"text": "2025-08-21 19:03:40.352 | DEBUG    | app.services.dhan_client:get_pnl:575 - Model fields: totals=<class 'app.models.schemas.PnLTotals'>, perSymbol=5, updated_at=2025-08-21 19:03:40.345543+05:30, trading_day=2025-08-21\n", "record": {"elapsed": {"repr": "0:02:22.059487", "seconds": 142.059487}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 575, "message": "Model fields: totals=<class 'app.models.schemas.PnLTotals'>, perSymbol=5, updated_at=2025-08-21 19:03:40.345543+05:30, trading_day=2025-08-21", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:03:40.352029+05:30", "timestamp": 1755783220.352029}}}
{"text": "2025-08-21 19:03:40.353 | DEBUG    | app.services.dhan_client:get_pnl:584 - Created PnL model: totals=PnLTotals(realized=0.0, unrealized=564604.64, day=564604.64, currency='INR') per_symbol=[PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1727, avg=618.93, ltp=344.8, unrealized=-473425.56, today_pnl=-473425.56), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=167, avg=948.57, ltp=1202.59, unrealized=-42420.9, today_pnl=-42420.9), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=1347, avg=801.44, ltp=1960.68, unrealized=1561495.99, today_pnl=1561495.99), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=143, avg=1427.62, ltp=1323.07, unrealized=14950.98, today_pnl=14950.98), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=438, avg=1994.48, ltp=862.07, unrealized=-495995.87, today_pnl=-495995.87)] updated_at=datetime.datetime(2025, 8, 21, 19, 3, 40, 345543, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))) trading_day='2025-08-21'\n", "record": {"elapsed": {"repr": "0:02:22.060711", "seconds": 142.060711}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 584, "message": "Created PnL model: totals=PnLTotals(realized=0.0, unrealized=564604.64, day=564604.64, currency='INR') per_symbol=[PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1727, avg=618.93, ltp=344.8, unrealized=-473425.56, today_pnl=-473425.56), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=167, avg=948.57, ltp=1202.59, unrealized=-42420.9, today_pnl=-42420.9), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=1347, avg=801.44, ltp=1960.68, unrealized=1561495.99, today_pnl=1561495.99), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=143, avg=1427.62, ltp=1323.07, unrealized=14950.98, today_pnl=14950.98), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=438, avg=1994.48, ltp=862.07, unrealized=-495995.87, today_pnl=-495995.87)] updated_at=datetime.datetime(2025, 8, 21, 19, 3, 40, 345543, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))) trading_day='2025-08-21'", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:03:40.353253+05:30", "timestamp": 1755783220.353253}}}
{"text": "2025-08-21 19:03:40.354 | DEBUG    | app.services.dhan_client:get_pnl:585 - PnL model fields: {'totals': PnLTotals(realized=0.0, unrealized=564604.64, day=564604.64, currency='INR'), 'per_symbol': [PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1727, avg=618.93, ltp=344.8, unrealized=-473425.56, today_pnl=-473425.56), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=167, avg=948.57, ltp=1202.59, unrealized=-42420.9, today_pnl=-42420.9), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=1347, avg=801.44, ltp=1960.68, unrealized=1561495.99, today_pnl=1561495.99), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=143, avg=1427.62, ltp=1323.07, unrealized=14950.98, today_pnl=14950.98), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=438, avg=1994.48, ltp=862.07, unrealized=-495995.87, today_pnl=-495995.87)], 'updated_at': datetime.datetime(2025, 8, 21, 19, 3, 40, 345543, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))), 'trading_day': '2025-08-21'}\n", "record": {"elapsed": {"repr": "0:02:22.061731", "seconds": 142.061731}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 585, "message": "PnL model fields: {'totals': PnLTotals(realized=0.0, unrealized=564604.64, day=564604.64, currency='INR'), 'per_symbol': [PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1727, avg=618.93, ltp=344.8, unrealized=-473425.56, today_pnl=-473425.56), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=167, avg=948.57, ltp=1202.59, unrealized=-42420.9, today_pnl=-42420.9), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=1347, avg=801.44, ltp=1960.68, unrealized=1561495.99, today_pnl=1561495.99), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=143, avg=1427.62, ltp=1323.07, unrealized=14950.98, today_pnl=14950.98), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=438, avg=1994.48, ltp=862.07, unrealized=-495995.87, today_pnl=-495995.87)], 'updated_at': datetime.datetime(2025, 8, 21, 19, 3, 40, 345543, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))), 'trading_day': '2025-08-21'}", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:03:40.354273+05:30", "timestamp": 1755783220.354273}}}
{"text": "2025-08-21 19:03:40.354 | INFO     | app.services.dhan_client:get_pnl:587 - P&L calculation completed successfully: 5 symbols, unrealized=‚Çπ564604.64\n", "record": {"elapsed": {"repr": "0:02:22.062384", "seconds": 142.062384}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 587, "message": "P&L calculation completed successfully: 5 symbols, unrealized=‚Çπ564604.64", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:03:40.354926+05:30", "timestamp": 1755783220.354926}}}
{"text": "2025-08-21 19:03:40.356 | DEBUG    | app.ws.live:emit_delta:408 - Emitted pnl delta: seq=156\n", "record": {"elapsed": {"repr": "0:02:22.063618", "seconds": 142.063618}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "emit_delta", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 408, "message": "Emitted pnl delta: seq=156", "module": "live", "name": "app.ws.live", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:03:40.356160+05:30", "timestamp": 1755783220.35616}}}
{"text": "2025-08-21 19:03:40.366 | DEBUG    | app.ws.live:emit_delta:408 - Emitted positions delta: seq=157\n", "record": {"elapsed": {"repr": "0:02:22.074427", "seconds": 142.074427}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "emit_delta", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 408, "message": "Emitted positions delta: seq=157", "module": "live", "name": "app.ws.live", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:03:40.366969+05:30", "timestamp": 1755783220.366969}}}
{"text": "2025-08-21 19:03:40.826 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:02:22.533478", "seconds": 142.533478}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:03:40.826020+05:30", "timestamp": 1755783220.82602}}}
{"text": "2025-08-21 19:03:40.826 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:02:22.534289", "seconds": 142.534289}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:03:40.826831+05:30", "timestamp": 1755783220.826831}}}
{"text": "2025-08-21 19:03:40.827 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:02:22.535266", "seconds": 142.535266}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:03:40.827808+05:30", "timestamp": 1755783220.827808}}}
{"text": "2025-08-21 19:03:40.828 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:02:22.536090", "seconds": 142.53609}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:03:40.828632+05:30", "timestamp": 1755783220.828632}}}
{"text": "2025-08-21 19:03:40.829 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:02:22.536530", "seconds": 142.53653}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:03:40.829072+05:30", "timestamp": 1755783220.829072}}}
{"text": "2025-08-21 19:03:40.829 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:02:22.536950", "seconds": 142.53695}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:03:40.829492+05:30", "timestamp": 1755783220.829492}}}
{"text": "2025-08-21 19:03:40.830 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:02:22.537469", "seconds": 142.537469}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:03:40.830011+05:30", "timestamp": 1755783220.830011}}}
{"text": "2025-08-21 19:03:40.830 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:02:22.538095", "seconds": 142.538095}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:03:40.830637+05:30", "timestamp": 1755783220.830637}}}
{"text": "2025-08-21 19:03:40.831 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:02:22.539029", "seconds": 142.539029}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:03:40.831571+05:30", "timestamp": 1755783220.831571}}}
{"text": "2025-08-21 19:03:40.832 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:02:22.540034", "seconds": 142.540034}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:03:40.832576+05:30", "timestamp": 1755783220.832576}}}
{"text": "2025-08-21 19:03:41.861 | INFO     | app.services.dhan_client:get_pnl:489 - Starting accurate P&L calculation\n", "record": {"elapsed": {"repr": "0:02:23.569306", "seconds": 143.569306}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 489, "message": "Starting accurate P&L calculation", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:03:41.861848+05:30", "timestamp": 1755783221.861848}}}
{"text": "2025-08-21 19:03:41.862 | INFO     | app.services.dhan_client:get_pnl:491 - Fetched 5 positions\n", "record": {"elapsed": {"repr": "0:02:23.569987", "seconds": 143.569987}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 491, "message": "Fetched 5 positions", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:03:41.862529+05:30", "timestamp": 1755783221.862529}}}
{"text": "2025-08-21 19:03:41.863 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for RELIANCE: unrealized=-475995.06, today=-475995.06\n", "record": {"elapsed": {"repr": "0:02:23.570863", "seconds": 143.570863}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for RELIANCE: unrealized=-475995.06, today=-475995.06", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:03:41.863405+05:30", "timestamp": 1755783221.863405}}}
{"text": "2025-08-21 19:03:41.864 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for TCS: unrealized=-43146.59, today=-43146.59\n", "record": {"elapsed": {"repr": "0:02:23.571872", "seconds": 143.571872}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for TCS: unrealized=-43146.59, today=-43146.59", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:03:41.864414+05:30", "timestamp": 1755783221.864414}}}
{"text": "2025-08-21 19:03:41.865 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for HDFC: unrealized=1557030.16, today=1557030.16\n", "record": {"elapsed": {"repr": "0:02:23.572506", "seconds": 143.572506}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for HDFC: unrealized=1557030.16, today=1557030.16", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:03:41.865048+05:30", "timestamp": 1755783221.865048}}}
{"text": "2025-08-21 19:03:41.865 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for INFY: unrealized=17253.59, today=17253.59\n", "record": {"elapsed": {"repr": "0:02:23.573046", "seconds": 143.573046}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for INFY: unrealized=17253.59, today=17253.59", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:03:41.865588+05:30", "timestamp": 1755783221.865588}}}
{"text": "2025-08-21 19:03:41.866 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for ICICIBANK: unrealized=-497026.08, today=-497026.08\n", "record": {"elapsed": {"repr": "0:02:23.573556", "seconds": 143.573556}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for ICICIBANK: unrealized=-497026.08, today=-497026.08", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:03:41.866098+05:30", "timestamp": 1755783221.866098}}}
{"text": "2025-08-21 19:03:41.866 | INFO     | app.services.dhan_client:get_pnl:545 - Calculated totals - realized: 0.0, unrealized: 558116.02, day: 558116.02\n", "record": {"elapsed": {"repr": "0:02:23.574073", "seconds": 143.574073}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 545, "message": "Calculated totals - realized: 0.0, unrealized: 558116.02, day: 558116.02", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:03:41.866615+05:30", "timestamp": 1755783221.866615}}}
{"text": "2025-08-21 19:03:41.867 | DEBUG    | app.services.dhan_client:get_pnl:554 - PnL consistency check passed: drift=‚Çπ0.00\n", "record": {"elapsed": {"repr": "0:02:23.574629", "seconds": 143.574629}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 554, "message": "PnL consistency check passed: drift=‚Çπ0.00", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:03:41.867171+05:30", "timestamp": 1755783221.867171}}}
{"text": "2025-08-21 19:03:41.867 | DEBUG    | app.services.dhan_client:get_pnl:558 - Creating PnLTotals...\n", "record": {"elapsed": {"repr": "0:02:23.575163", "seconds": 143.575163}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 558, "message": "Creating PnLTotals...", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:03:41.867705+05:30", "timestamp": 1755783221.867705}}}
{"text": "2025-08-21 19:03:41.868 | DEBUG    | app.services.dhan_client:get_pnl:565 - PnLTotals created successfully\n", "record": {"elapsed": {"repr": "0:02:23.576366", "seconds": 143.576366}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 565, "message": "PnLTotals created successfully", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:03:41.868908+05:30", "timestamp": 1755783221.868908}}}
{"text": "2025-08-21 19:03:41.869 | DEBUG    | app.services.dhan_client:get_pnl:574 - Creating PnL model...\n", "record": {"elapsed": {"repr": "0:02:23.577011", "seconds": 143.577011}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 574, "message": "Creating PnL model...", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:03:41.869553+05:30", "timestamp": 1755783221.869553}}}
{"text": "2025-08-21 19:03:41.870 | DEBUG    | app.services.dhan_client:get_pnl:575 - Model fields: totals=<class 'app.models.schemas.PnLTotals'>, perSymbol=5, updated_at=2025-08-21 19:03:41.863285+05:30, trading_day=2025-08-21\n", "record": {"elapsed": {"repr": "0:02:23.577483", "seconds": 143.577483}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 575, "message": "Model fields: totals=<class 'app.models.schemas.PnLTotals'>, perSymbol=5, updated_at=2025-08-21 19:03:41.863285+05:30, trading_day=2025-08-21", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:03:41.870025+05:30", "timestamp": 1755783221.870025}}}
{"text": "2025-08-21 19:03:41.870 | DEBUG    | app.services.dhan_client:get_pnl:584 - Created PnL model: totals=PnLTotals(realized=0.0, unrealized=558116.02, day=558116.02, currency='INR') per_symbol=[PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1727, avg=618.93, ltp=343.31, unrealized=-475995.06, today_pnl=-475995.06), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=167, avg=948.57, ltp=1206.93, unrealized=-43146.59, today_pnl=-43146.59), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=1347, avg=801.44, ltp=1957.36, unrealized=1557030.16, today_pnl=1557030.16), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=143, avg=1427.62, ltp=1306.97, unrealized=17253.59, today_pnl=17253.59), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=438, avg=1994.48, ltp=859.72, unrealized=-497026.08, today_pnl=-497026.08)] updated_at=datetime.datetime(2025, 8, 21, 19, 3, 41, 863285, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))) trading_day='2025-08-21'\n", "record": {"elapsed": {"repr": "0:02:23.578071", "seconds": 143.578071}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 584, "message": "Created PnL model: totals=PnLTotals(realized=0.0, unrealized=558116.02, day=558116.02, currency='INR') per_symbol=[PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1727, avg=618.93, ltp=343.31, unrealized=-475995.06, today_pnl=-475995.06), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=167, avg=948.57, ltp=1206.93, unrealized=-43146.59, today_pnl=-43146.59), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=1347, avg=801.44, ltp=1957.36, unrealized=1557030.16, today_pnl=1557030.16), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=143, avg=1427.62, ltp=1306.97, unrealized=17253.59, today_pnl=17253.59), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=438, avg=1994.48, ltp=859.72, unrealized=-497026.08, today_pnl=-497026.08)] updated_at=datetime.datetime(2025, 8, 21, 19, 3, 41, 863285, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))) trading_day='2025-08-21'", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:03:41.870613+05:30", "timestamp": 1755783221.870613}}}
{"text": "2025-08-21 19:03:41.871 | DEBUG    | app.services.dhan_client:get_pnl:585 - PnL model fields: {'totals': PnLTotals(realized=0.0, unrealized=558116.02, day=558116.02, currency='INR'), 'per_symbol': [PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1727, avg=618.93, ltp=343.31, unrealized=-475995.06, today_pnl=-475995.06), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=167, avg=948.57, ltp=1206.93, unrealized=-43146.59, today_pnl=-43146.59), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=1347, avg=801.44, ltp=1957.36, unrealized=1557030.16, today_pnl=1557030.16), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=143, avg=1427.62, ltp=1306.97, unrealized=17253.59, today_pnl=17253.59), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=438, avg=1994.48, ltp=859.72, unrealized=-497026.08, today_pnl=-497026.08)], 'updated_at': datetime.datetime(2025, 8, 21, 19, 3, 41, 863285, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))), 'trading_day': '2025-08-21'}\n", "record": {"elapsed": {"repr": "0:02:23.579187", "seconds": 143.579187}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 585, "message": "PnL model fields: {'totals': PnLTotals(realized=0.0, unrealized=558116.02, day=558116.02, currency='INR'), 'per_symbol': [PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1727, avg=618.93, ltp=343.31, unrealized=-475995.06, today_pnl=-475995.06), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=167, avg=948.57, ltp=1206.93, unrealized=-43146.59, today_pnl=-43146.59), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=1347, avg=801.44, ltp=1957.36, unrealized=1557030.16, today_pnl=1557030.16), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=143, avg=1427.62, ltp=1306.97, unrealized=17253.59, today_pnl=17253.59), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=438, avg=1994.48, ltp=859.72, unrealized=-497026.08, today_pnl=-497026.08)], 'updated_at': datetime.datetime(2025, 8, 21, 19, 3, 41, 863285, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))), 'trading_day': '2025-08-21'}", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:03:41.871729+05:30", "timestamp": 1755783221.871729}}}
{"text": "2025-08-21 19:03:41.872 | INFO     | app.services.dhan_client:get_pnl:587 - P&L calculation completed successfully: 5 symbols, unrealized=‚Çπ558116.02\n", "record": {"elapsed": {"repr": "0:02:23.580403", "seconds": 143.580403}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 587, "message": "P&L calculation completed successfully: 5 symbols, unrealized=‚Çπ558116.02", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:03:41.872945+05:30", "timestamp": 1755783221.872945}}}
{"text": "2025-08-21 19:03:41.873 | DEBUG    | app.ws.live:emit_delta:408 - Emitted pnl delta: seq=158\n", "record": {"elapsed": {"repr": "0:02:23.581386", "seconds": 143.581386}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "emit_delta", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 408, "message": "Emitted pnl delta: seq=158", "module": "live", "name": "app.ws.live", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:03:41.873928+05:30", "timestamp": 1755783221.873928}}}
{"text": "2025-08-21 19:03:41.874 | DEBUG    | app.ws.live:emit_delta:408 - Emitted positions delta: seq=159\n", "record": {"elapsed": {"repr": "0:02:23.582225", "seconds": 143.582225}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "emit_delta", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 408, "message": "Emitted positions delta: seq=159", "module": "live", "name": "app.ws.live", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:03:41.874767+05:30", "timestamp": 1755783221.874767}}}
{"text": "2025-08-21 19:03:42.833 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:02:24.540972", "seconds": 144.540972}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:03:42.833514+05:30", "timestamp": 1755783222.833514}}}
{"text": "2025-08-21 19:03:42.834 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:02:24.541740", "seconds": 144.54174}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:03:42.834282+05:30", "timestamp": 1755783222.834282}}}
{"text": "2025-08-21 19:03:42.835 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:02:24.542791", "seconds": 144.542791}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:03:42.835333+05:30", "timestamp": 1755783222.835333}}}
{"text": "2025-08-21 19:03:42.835 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:02:24.543361", "seconds": 144.543361}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:03:42.835903+05:30", "timestamp": 1755783222.835903}}}
{"text": "2025-08-21 19:03:42.836 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:02:24.543865", "seconds": 144.543865}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:03:42.836407+05:30", "timestamp": 1755783222.836407}}}
{"text": "2025-08-21 19:03:42.836 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:02:24.544403", "seconds": 144.544403}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:03:42.836945+05:30", "timestamp": 1755783222.836945}}}
{"text": "2025-08-21 19:03:42.837 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:02:24.544982", "seconds": 144.544982}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:03:42.837524+05:30", "timestamp": 1755783222.837524}}}
{"text": "2025-08-21 19:03:42.838 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:02:24.545701", "seconds": 144.545701}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:03:42.838243+05:30", "timestamp": 1755783222.838243}}}
{"text": "2025-08-21 19:03:42.839 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:02:24.546559", "seconds": 144.546559}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:03:42.839101+05:30", "timestamp": 1755783222.839101}}}
{"text": "2025-08-21 19:03:42.839 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:02:24.547141", "seconds": 144.547141}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:03:42.839683+05:30", "timestamp": 1755783222.839683}}}
{"text": "2025-08-21 19:03:43.648 | INFO     | app.services.dhan_client:get_pnl:489 - Starting accurate P&L calculation\n", "record": {"elapsed": {"repr": "0:02:25.356264", "seconds": 145.356264}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 489, "message": "Starting accurate P&L calculation", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:03:43.648806+05:30", "timestamp": 1755783223.648806}}}
{"text": "2025-08-21 19:03:43.649 | INFO     | app.services.dhan_client:get_pnl:491 - Fetched 5 positions\n", "record": {"elapsed": {"repr": "0:02:25.356944", "seconds": 145.356944}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 491, "message": "Fetched 5 positions", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:03:43.649486+05:30", "timestamp": 1755783223.649486}}}
{"text": "2025-08-21 19:03:43.650 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for RELIANCE: unrealized=-468355.71, today=-468355.71\n", "record": {"elapsed": {"repr": "0:02:25.357475", "seconds": 145.357475}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for RELIANCE: unrealized=-468355.71, today=-468355.71", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:03:43.650017+05:30", "timestamp": 1755783223.650017}}}
{"text": "2025-08-21 19:03:43.650 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for TCS: unrealized=-44610.27, today=-44610.27\n", "record": {"elapsed": {"repr": "0:02:25.357986", "seconds": 145.357986}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for TCS: unrealized=-44610.27, today=-44610.27", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:03:43.650528+05:30", "timestamp": 1755783223.650528}}}
{"text": "2025-08-21 19:03:43.651 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for HDFC: unrealized=1579556.42, today=1579556.42\n", "record": {"elapsed": {"repr": "0:02:25.358934", "seconds": 145.358934}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for HDFC: unrealized=1579556.42, today=1579556.42", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:03:43.651476+05:30", "timestamp": 1755783223.651476}}}
{"text": "2025-08-21 19:03:43.652 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for INFY: unrealized=17538.84, today=17538.84\n", "record": {"elapsed": {"repr": "0:02:25.359483", "seconds": 145.359483}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for INFY: unrealized=17538.84, today=17538.84", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:03:43.652025+05:30", "timestamp": 1755783223.652025}}}
{"text": "2025-08-21 19:03:43.652 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for ICICIBANK: unrealized=-499068.37, today=-499068.37\n", "record": {"elapsed": {"repr": "0:02:25.359963", "seconds": 145.359963}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for ICICIBANK: unrealized=-499068.37, today=-499068.37", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:03:43.652505+05:30", "timestamp": 1755783223.652505}}}
{"text": "2025-08-21 19:03:43.652 | INFO     | app.services.dhan_client:get_pnl:545 - Calculated totals - realized: 0.0, unrealized: 585060.91, day: 585060.91\n", "record": {"elapsed": {"repr": "0:02:25.360398", "seconds": 145.360398}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 545, "message": "Calculated totals - realized: 0.0, unrealized: 585060.91, day: 585060.91", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:03:43.652940+05:30", "timestamp": 1755783223.65294}}}
{"text": "2025-08-21 19:03:43.653 | DEBUG    | app.services.dhan_client:get_pnl:554 - PnL consistency check passed: drift=‚Çπ0.00\n", "record": {"elapsed": {"repr": "0:02:25.360880", "seconds": 145.36088}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 554, "message": "PnL consistency check passed: drift=‚Çπ0.00", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:03:43.653422+05:30", "timestamp": 1755783223.653422}}}
{"text": "2025-08-21 19:03:43.654 | DEBUG    | app.services.dhan_client:get_pnl:558 - Creating PnLTotals...\n", "record": {"elapsed": {"repr": "0:02:25.361505", "seconds": 145.361505}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 558, "message": "Creating PnLTotals...", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:03:43.654047+05:30", "timestamp": 1755783223.654047}}}
{"text": "2025-08-21 19:03:43.654 | DEBUG    | app.services.dhan_client:get_pnl:565 - PnLTotals created successfully\n", "record": {"elapsed": {"repr": "0:02:25.362308", "seconds": 145.362308}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 565, "message": "PnLTotals created successfully", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:03:43.654850+05:30", "timestamp": 1755783223.65485}}}
{"text": "2025-08-21 19:03:43.655 | DEBUG    | app.services.dhan_client:get_pnl:574 - Creating PnL model...\n", "record": {"elapsed": {"repr": "0:02:25.363112", "seconds": 145.363112}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 574, "message": "Creating PnL model...", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:03:43.655654+05:30", "timestamp": 1755783223.655654}}}
{"text": "2025-08-21 19:03:43.656 | DEBUG    | app.services.dhan_client:get_pnl:575 - Model fields: totals=<class 'app.models.schemas.PnLTotals'>, perSymbol=5, updated_at=2025-08-21 19:03:43.649947+05:30, trading_day=2025-08-21\n", "record": {"elapsed": {"repr": "0:02:25.363521", "seconds": 145.363521}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 575, "message": "Model fields: totals=<class 'app.models.schemas.PnLTotals'>, perSymbol=5, updated_at=2025-08-21 19:03:43.649947+05:30, trading_day=2025-08-21", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:03:43.656063+05:30", "timestamp": 1755783223.656063}}}
{"text": "2025-08-21 19:03:43.656 | DEBUG    | app.services.dhan_client:get_pnl:584 - Created PnL model: totals=PnLTotals(realized=0.0, unrealized=585060.91, day=585060.91, currency='INR') per_symbol=[PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1727, avg=618.93, ltp=347.73, unrealized=-468355.71, today_pnl=-468355.71), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=167, avg=948.57, ltp=1215.7, unrealized=-44610.27, today_pnl=-44610.27), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=1347, avg=801.44, ltp=1974.09, unrealized=1579556.42, today_pnl=1579556.42), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=143, avg=1427.62, ltp=1304.97, unrealized=17538.84, today_pnl=17538.84), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=438, avg=1994.48, ltp=855.05, unrealized=-499068.37, today_pnl=-499068.37)] updated_at=datetime.datetime(2025, 8, 21, 19, 3, 43, 649947, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))) trading_day='2025-08-21'\n", "record": {"elapsed": {"repr": "0:02:25.364131", "seconds": 145.364131}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 584, "message": "Created PnL model: totals=PnLTotals(realized=0.0, unrealized=585060.91, day=585060.91, currency='INR') per_symbol=[PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1727, avg=618.93, ltp=347.73, unrealized=-468355.71, today_pnl=-468355.71), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=167, avg=948.57, ltp=1215.7, unrealized=-44610.27, today_pnl=-44610.27), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=1347, avg=801.44, ltp=1974.09, unrealized=1579556.42, today_pnl=1579556.42), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=143, avg=1427.62, ltp=1304.97, unrealized=17538.84, today_pnl=17538.84), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=438, avg=1994.48, ltp=855.05, unrealized=-499068.37, today_pnl=-499068.37)] updated_at=datetime.datetime(2025, 8, 21, 19, 3, 43, 649947, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))) trading_day='2025-08-21'", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:03:43.656673+05:30", "timestamp": 1755783223.656673}}}
{"text": "2025-08-21 19:03:43.657 | DEBUG    | app.services.dhan_client:get_pnl:585 - PnL model fields: {'totals': PnLTotals(realized=0.0, unrealized=585060.91, day=585060.91, currency='INR'), 'per_symbol': [PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1727, avg=618.93, ltp=347.73, unrealized=-468355.71, today_pnl=-468355.71), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=167, avg=948.57, ltp=1215.7, unrealized=-44610.27, today_pnl=-44610.27), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=1347, avg=801.44, ltp=1974.09, unrealized=1579556.42, today_pnl=1579556.42), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=143, avg=1427.62, ltp=1304.97, unrealized=17538.84, today_pnl=17538.84), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=438, avg=1994.48, ltp=855.05, unrealized=-499068.37, today_pnl=-499068.37)], 'updated_at': datetime.datetime(2025, 8, 21, 19, 3, 43, 649947, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))), 'trading_day': '2025-08-21'}\n", "record": {"elapsed": {"repr": "0:02:25.364967", "seconds": 145.364967}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 585, "message": "PnL model fields: {'totals': PnLTotals(realized=0.0, unrealized=585060.91, day=585060.91, currency='INR'), 'per_symbol': [PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1727, avg=618.93, ltp=347.73, unrealized=-468355.71, today_pnl=-468355.71), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=167, avg=948.57, ltp=1215.7, unrealized=-44610.27, today_pnl=-44610.27), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=1347, avg=801.44, ltp=1974.09, unrealized=1579556.42, today_pnl=1579556.42), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=143, avg=1427.62, ltp=1304.97, unrealized=17538.84, today_pnl=17538.84), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=438, avg=1994.48, ltp=855.05, unrealized=-499068.37, today_pnl=-499068.37)], 'updated_at': datetime.datetime(2025, 8, 21, 19, 3, 43, 649947, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))), 'trading_day': '2025-08-21'}", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:03:43.657509+05:30", "timestamp": 1755783223.657509}}}
{"text": "2025-08-21 19:03:43.658 | INFO     | app.services.dhan_client:get_pnl:587 - P&L calculation completed successfully: 5 symbols, unrealized=‚Çπ585060.91\n", "record": {"elapsed": {"repr": "0:02:25.365598", "seconds": 145.365598}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 587, "message": "P&L calculation completed successfully: 5 symbols, unrealized=‚Çπ585060.91", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:03:43.658140+05:30", "timestamp": 1755783223.65814}}}
{"text": "2025-08-21 19:03:43.658 | DEBUG    | app.ws.live:emit_delta:408 - Emitted pnl delta: seq=160\n", "record": {"elapsed": {"repr": "0:02:25.366277", "seconds": 145.366277}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "emit_delta", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 408, "message": "Emitted pnl delta: seq=160", "module": "live", "name": "app.ws.live", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:03:43.658819+05:30", "timestamp": 1755783223.658819}}}
{"text": "2025-08-21 19:03:43.660 | DEBUG    | app.ws.live:emit_delta:408 - Emitted positions delta: seq=161\n", "record": {"elapsed": {"repr": "0:02:25.367494", "seconds": 145.367494}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "emit_delta", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 408, "message": "Emitted positions delta: seq=161", "module": "live", "name": "app.ws.live", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:03:43.660036+05:30", "timestamp": 1755783223.660036}}}
{"text": "2025-08-21 19:03:44.840 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:02:26.547953", "seconds": 146.547953}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:03:44.840495+05:30", "timestamp": 1755783224.840495}}}
{"text": "2025-08-21 19:03:44.841 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:02:26.548807", "seconds": 146.548807}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:03:44.841349+05:30", "timestamp": 1755783224.841349}}}
{"text": "2025-08-21 19:03:44.842 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:02:26.550044", "seconds": 146.550044}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:03:44.842586+05:30", "timestamp": 1755783224.842586}}}
{"text": "2025-08-21 19:03:44.843 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:02:26.550754", "seconds": 146.550754}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:03:44.843296+05:30", "timestamp": 1755783224.843296}}}
{"text": "2025-08-21 19:03:44.843 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:02:26.551261", "seconds": 146.551261}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:03:44.843803+05:30", "timestamp": 1755783224.843803}}}
{"text": "2025-08-21 19:03:44.844 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:02:26.551765", "seconds": 146.551765}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:03:44.844307+05:30", "timestamp": 1755783224.844307}}}
{"text": "2025-08-21 19:03:44.844 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:02:26.552289", "seconds": 146.552289}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:03:44.844831+05:30", "timestamp": 1755783224.844831}}}
{"text": "2025-08-21 19:03:44.845 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:02:26.552792", "seconds": 146.552792}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:03:44.845334+05:30", "timestamp": 1755783224.845334}}}
{"text": "2025-08-21 19:03:44.846 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:02:26.553485", "seconds": 146.553485}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:03:44.846027+05:30", "timestamp": 1755783224.846027}}}
{"text": "2025-08-21 19:03:44.846 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:02:26.554397", "seconds": 146.554397}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:03:44.846939+05:30", "timestamp": 1755783224.846939}}}
{"text": "2025-08-21 19:03:45.315 | INFO     | app.services.dhan_client:get_pnl:489 - Starting accurate P&L calculation\n", "record": {"elapsed": {"repr": "0:02:27.023237", "seconds": 147.023237}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 489, "message": "Starting accurate P&L calculation", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:03:45.315779+05:30", "timestamp": 1755783225.315779}}}
{"text": "2025-08-21 19:03:45.316 | INFO     | app.services.dhan_client:get_pnl:491 - Fetched 5 positions\n", "record": {"elapsed": {"repr": "0:02:27.024428", "seconds": 147.024428}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 491, "message": "Fetched 5 positions", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:03:45.316970+05:30", "timestamp": 1755783225.31697}}}
{"text": "2025-08-21 19:03:45.317 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for RELIANCE: unrealized=-467882.56, today=-467882.56\n", "record": {"elapsed": {"repr": "0:02:27.025162", "seconds": 147.025162}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for RELIANCE: unrealized=-467882.56, today=-467882.56", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:03:45.317704+05:30", "timestamp": 1755783225.317704}}}
{"text": "2025-08-21 19:03:45.318 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for TCS: unrealized=-42618.77, today=-42618.77\n", "record": {"elapsed": {"repr": "0:02:27.025729", "seconds": 147.025729}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for TCS: unrealized=-42618.77, today=-42618.77", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:03:45.318271+05:30", "timestamp": 1755783225.318271}}}
{"text": "2025-08-21 19:03:45.318 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for HDFC: unrealized=1560408.55, today=1560408.55\n", "record": {"elapsed": {"repr": "0:02:27.026296", "seconds": 147.026296}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for HDFC: unrealized=1560408.55, today=1560408.55", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:03:45.318838+05:30", "timestamp": 1755783225.318838}}}
{"text": "2025-08-21 19:03:45.319 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for INFY: unrealized=16602.72, today=16602.72\n", "record": {"elapsed": {"repr": "0:02:27.026990", "seconds": 147.02699}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for INFY: unrealized=16602.72, today=16602.72", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:03:45.319532+05:30", "timestamp": 1755783225.319532}}}
{"text": "2025-08-21 19:03:45.320 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for ICICIBANK: unrealized=-501123.14, today=-501123.14\n", "record": {"elapsed": {"repr": "0:02:27.027957", "seconds": 147.027957}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for ICICIBANK: unrealized=-501123.14, today=-501123.14", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:03:45.320499+05:30", "timestamp": 1755783225.320499}}}
{"text": "2025-08-21 19:03:45.321 | INFO     | app.services.dhan_client:get_pnl:545 - Calculated totals - realized: 0.0, unrealized: 565386.8, day: 565386.8\n", "record": {"elapsed": {"repr": "0:02:27.028909", "seconds": 147.028909}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 545, "message": "Calculated totals - realized: 0.0, unrealized: 565386.8, day: 565386.8", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:03:45.321451+05:30", "timestamp": 1755783225.321451}}}
{"text": "2025-08-21 19:03:45.322 | DEBUG    | app.services.dhan_client:get_pnl:554 - PnL consistency check passed: drift=‚Çπ0.00\n", "record": {"elapsed": {"repr": "0:02:27.029531", "seconds": 147.029531}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 554, "message": "PnL consistency check passed: drift=‚Çπ0.00", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:03:45.322073+05:30", "timestamp": 1755783225.322073}}}
{"text": "2025-08-21 19:03:45.322 | DEBUG    | app.services.dhan_client:get_pnl:558 - Creating PnLTotals...\n", "record": {"elapsed": {"repr": "0:02:27.029995", "seconds": 147.029995}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 558, "message": "Creating PnLTotals...", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:03:45.322537+05:30", "timestamp": 1755783225.322537}}}
{"text": "2025-08-21 19:03:45.323 | DEBUG    | app.services.dhan_client:get_pnl:565 - PnLTotals created successfully\n", "record": {"elapsed": {"repr": "0:02:27.030612", "seconds": 147.030612}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 565, "message": "PnLTotals created successfully", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:03:45.323154+05:30", "timestamp": 1755783225.323154}}}
{"text": "2025-08-21 19:03:45.323 | DEBUG    | app.services.dhan_client:get_pnl:574 - Creating PnL model...\n", "record": {"elapsed": {"repr": "0:02:27.031093", "seconds": 147.031093}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 574, "message": "Creating PnL model...", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:03:45.323635+05:30", "timestamp": 1755783225.323635}}}
{"text": "2025-08-21 19:03:45.324 | DEBUG    | app.services.dhan_client:get_pnl:575 - Model fields: totals=<class 'app.models.schemas.PnLTotals'>, perSymbol=5, updated_at=2025-08-21 19:03:45.317626+05:30, trading_day=2025-08-21\n", "record": {"elapsed": {"repr": "0:02:27.031566", "seconds": 147.031566}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 575, "message": "Model fields: totals=<class 'app.models.schemas.PnLTotals'>, perSymbol=5, updated_at=2025-08-21 19:03:45.317626+05:30, trading_day=2025-08-21", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:03:45.324108+05:30", "timestamp": 1755783225.324108}}}
{"text": "2025-08-21 19:03:45.325 | DEBUG    | app.services.dhan_client:get_pnl:584 - Created PnL model: totals=PnLTotals(realized=0.0, unrealized=565386.8, day=565386.8, currency='INR') per_symbol=[PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1727, avg=618.93, ltp=348.01, unrealized=-467882.56, today_pnl=-467882.56), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=167, avg=948.57, ltp=1203.77, unrealized=-42618.77, today_pnl=-42618.77), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=1347, avg=801.44, ltp=1959.87, unrealized=1560408.55, today_pnl=1560408.55), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=143, avg=1427.62, ltp=1311.52, unrealized=16602.72, today_pnl=16602.72), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=438, avg=1994.48, ltp=850.36, unrealized=-501123.14, today_pnl=-501123.14)] updated_at=datetime.datetime(2025, 8, 21, 19, 3, 45, 317626, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))) trading_day='2025-08-21'\n", "record": {"elapsed": {"repr": "0:02:27.032656", "seconds": 147.032656}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 584, "message": "Created PnL model: totals=PnLTotals(realized=0.0, unrealized=565386.8, day=565386.8, currency='INR') per_symbol=[PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1727, avg=618.93, ltp=348.01, unrealized=-467882.56, today_pnl=-467882.56), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=167, avg=948.57, ltp=1203.77, unrealized=-42618.77, today_pnl=-42618.77), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=1347, avg=801.44, ltp=1959.87, unrealized=1560408.55, today_pnl=1560408.55), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=143, avg=1427.62, ltp=1311.52, unrealized=16602.72, today_pnl=16602.72), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=438, avg=1994.48, ltp=850.36, unrealized=-501123.14, today_pnl=-501123.14)] updated_at=datetime.datetime(2025, 8, 21, 19, 3, 45, 317626, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))) trading_day='2025-08-21'", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:03:45.325198+05:30", "timestamp": 1755783225.325198}}}
{"text": "2025-08-21 19:03:45.326 | DEBUG    | app.services.dhan_client:get_pnl:585 - PnL model fields: {'totals': PnLTotals(realized=0.0, unrealized=565386.8, day=565386.8, currency='INR'), 'per_symbol': [PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1727, avg=618.93, ltp=348.01, unrealized=-467882.56, today_pnl=-467882.56), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=167, avg=948.57, ltp=1203.77, unrealized=-42618.77, today_pnl=-42618.77), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=1347, avg=801.44, ltp=1959.87, unrealized=1560408.55, today_pnl=1560408.55), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=143, avg=1427.62, ltp=1311.52, unrealized=16602.72, today_pnl=16602.72), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=438, avg=1994.48, ltp=850.36, unrealized=-501123.14, today_pnl=-501123.14)], 'updated_at': datetime.datetime(2025, 8, 21, 19, 3, 45, 317626, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))), 'trading_day': '2025-08-21'}\n", "record": {"elapsed": {"repr": "0:02:27.033815", "seconds": 147.033815}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 585, "message": "PnL model fields: {'totals': PnLTotals(realized=0.0, unrealized=565386.8, day=565386.8, currency='INR'), 'per_symbol': [PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1727, avg=618.93, ltp=348.01, unrealized=-467882.56, today_pnl=-467882.56), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=167, avg=948.57, ltp=1203.77, unrealized=-42618.77, today_pnl=-42618.77), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=1347, avg=801.44, ltp=1959.87, unrealized=1560408.55, today_pnl=1560408.55), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=143, avg=1427.62, ltp=1311.52, unrealized=16602.72, today_pnl=16602.72), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=438, avg=1994.48, ltp=850.36, unrealized=-501123.14, today_pnl=-501123.14)], 'updated_at': datetime.datetime(2025, 8, 21, 19, 3, 45, 317626, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))), 'trading_day': '2025-08-21'}", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:03:45.326357+05:30", "timestamp": 1755783225.326357}}}
{"text": "2025-08-21 19:03:45.327 | INFO     | app.services.dhan_client:get_pnl:587 - P&L calculation completed successfully: 5 symbols, unrealized=‚Çπ565386.80\n", "record": {"elapsed": {"repr": "0:02:27.034653", "seconds": 147.034653}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 587, "message": "P&L calculation completed successfully: 5 symbols, unrealized=‚Çπ565386.80", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:03:45.327195+05:30", "timestamp": 1755783225.327195}}}
{"text": "2025-08-21 19:03:45.328 | DEBUG    | app.ws.live:emit_delta:408 - Emitted pnl delta: seq=162\n", "record": {"elapsed": {"repr": "0:02:27.035562", "seconds": 147.035562}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "emit_delta", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 408, "message": "Emitted pnl delta: seq=162", "module": "live", "name": "app.ws.live", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:03:45.328104+05:30", "timestamp": 1755783225.328104}}}
{"text": "2025-08-21 19:03:45.329 | DEBUG    | app.ws.live:emit_delta:408 - Emitted positions delta: seq=163\n", "record": {"elapsed": {"repr": "0:02:27.037223", "seconds": 147.037223}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "emit_delta", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 408, "message": "Emitted positions delta: seq=163", "module": "live", "name": "app.ws.live", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:03:45.329765+05:30", "timestamp": 1755783225.329765}}}
{"text": "2025-08-21 19:03:46.848 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:02:28.555704", "seconds": 148.555704}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:03:46.848246+05:30", "timestamp": 1755783226.848246}}}
{"text": "2025-08-21 19:03:46.849 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:02:28.557108", "seconds": 148.557108}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:03:46.849650+05:30", "timestamp": 1755783226.84965}}}
{"text": "2025-08-21 19:03:46.850 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:02:28.557788", "seconds": 148.557788}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:03:46.850330+05:30", "timestamp": 1755783226.85033}}}
{"text": "2025-08-21 19:03:46.850 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:02:28.558341", "seconds": 148.558341}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:03:46.850883+05:30", "timestamp": 1755783226.850883}}}
{"text": "2025-08-21 19:03:46.851 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:02:28.558865", "seconds": 148.558865}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:03:46.851407+05:30", "timestamp": 1755783226.851407}}}
{"text": "2025-08-21 19:03:46.852 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:02:28.559523", "seconds": 148.559523}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:03:46.852065+05:30", "timestamp": 1755783226.852065}}}
{"text": "2025-08-21 19:03:46.852 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:02:28.560402", "seconds": 148.560402}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:03:46.852944+05:30", "timestamp": 1755783226.852944}}}
{"text": "2025-08-21 19:03:46.854 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:02:28.561570", "seconds": 148.56157}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:03:46.854112+05:30", "timestamp": 1755783226.854112}}}
{"text": "2025-08-21 19:03:46.854 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:02:28.562132", "seconds": 148.562132}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:03:46.854674+05:30", "timestamp": 1755783226.854674}}}
{"text": "2025-08-21 19:03:46.855 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:02:28.562708", "seconds": 148.562708}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:03:46.855250+05:30", "timestamp": 1755783226.85525}}}
{"text": "2025-08-21 19:03:47.316 | INFO     | app.services.dhan_client:get_pnl:489 - Starting accurate P&L calculation\n", "record": {"elapsed": {"repr": "0:02:29.024455", "seconds": 149.024455}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 489, "message": "Starting accurate P&L calculation", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:03:47.316997+05:30", "timestamp": 1755783227.316997}}}
{"text": "2025-08-21 19:03:47.317 | INFO     | app.services.dhan_client:get_pnl:491 - Fetched 5 positions\n", "record": {"elapsed": {"repr": "0:02:29.025439", "seconds": 149.025439}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 491, "message": "Fetched 5 positions", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:03:47.317981+05:30", "timestamp": 1755783227.317981}}}
{"text": "2025-08-21 19:03:47.318 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for RELIANCE: unrealized=-475248.63, today=-475248.63\n", "record": {"elapsed": {"repr": "0:02:29.026317", "seconds": 149.026317}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for RELIANCE: unrealized=-475248.63, today=-475248.63", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:03:47.318859+05:30", "timestamp": 1755783227.318859}}}
{"text": "2025-08-21 19:03:47.319 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for TCS: unrealized=-40959.73, today=-40959.73\n", "record": {"elapsed": {"repr": "0:02:29.027037", "seconds": 149.027037}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for TCS: unrealized=-40959.73, today=-40959.73", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:03:47.319579+05:30", "timestamp": 1755783227.319579}}}
{"text": "2025-08-21 19:03:47.319 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for HDFC: unrealized=1511986.25, today=1511986.25\n", "record": {"elapsed": {"repr": "0:02:29.027447", "seconds": 149.027447}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for HDFC: unrealized=1511986.25, today=1511986.25", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:03:47.319989+05:30", "timestamp": 1755783227.319989}}}
{"text": "2025-08-21 19:03:47.320 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for INFY: unrealized=16635.66, today=16635.66\n", "record": {"elapsed": {"repr": "0:02:29.027872", "seconds": 149.027872}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for INFY: unrealized=16635.66, today=16635.66", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:03:47.320414+05:30", "timestamp": 1755783227.320414}}}
{"text": "2025-08-21 19:03:47.320 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for ICICIBANK: unrealized=-493773.18, today=-493773.18\n", "record": {"elapsed": {"repr": "0:02:29.028375", "seconds": 149.028375}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for ICICIBANK: unrealized=-493773.18, today=-493773.18", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:03:47.320917+05:30", "timestamp": 1755783227.320917}}}
{"text": "2025-08-21 19:03:47.321 | INFO     | app.services.dhan_client:get_pnl:545 - Calculated totals - realized: 0.0, unrealized: 518640.37, day: 518640.37\n", "record": {"elapsed": {"repr": "0:02:29.028822", "seconds": 149.028822}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 545, "message": "Calculated totals - realized: 0.0, unrealized: 518640.37, day: 518640.37", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:03:47.321364+05:30", "timestamp": 1755783227.321364}}}
{"text": "2025-08-21 19:03:47.321 | DEBUG    | app.services.dhan_client:get_pnl:554 - PnL consistency check passed: drift=‚Çπ0.00\n", "record": {"elapsed": {"repr": "0:02:29.029257", "seconds": 149.029257}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 554, "message": "PnL consistency check passed: drift=‚Çπ0.00", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:03:47.321799+05:30", "timestamp": 1755783227.321799}}}
{"text": "2025-08-21 19:03:47.322 | DEBUG    | app.services.dhan_client:get_pnl:558 - Creating PnLTotals...\n", "record": {"elapsed": {"repr": "0:02:29.029644", "seconds": 149.029644}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 558, "message": "Creating PnLTotals...", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:03:47.322186+05:30", "timestamp": 1755783227.322186}}}
{"text": "2025-08-21 19:03:47.322 | DEBUG    | app.services.dhan_client:get_pnl:565 - PnLTotals created successfully\n", "record": {"elapsed": {"repr": "0:02:29.030150", "seconds": 149.03015}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 565, "message": "PnLTotals created successfully", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:03:47.322692+05:30", "timestamp": 1755783227.322692}}}
{"text": "2025-08-21 19:03:47.323 | DEBUG    | app.services.dhan_client:get_pnl:574 - Creating PnL model...\n", "record": {"elapsed": {"repr": "0:02:29.030669", "seconds": 149.030669}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 574, "message": "Creating PnL model...", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:03:47.323211+05:30", "timestamp": 1755783227.323211}}}
{"text": "2025-08-21 19:03:47.324 | DEBUG    | app.services.dhan_client:get_pnl:575 - Model fields: totals=<class 'app.models.schemas.PnLTotals'>, perSymbol=5, updated_at=2025-08-21 19:03:47.318725+05:30, trading_day=2025-08-21\n", "record": {"elapsed": {"repr": "0:02:29.031552", "seconds": 149.031552}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 575, "message": "Model fields: totals=<class 'app.models.schemas.PnLTotals'>, perSymbol=5, updated_at=2025-08-21 19:03:47.318725+05:30, trading_day=2025-08-21", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:03:47.324094+05:30", "timestamp": 1755783227.324094}}}
{"text": "2025-08-21 19:03:47.324 | DEBUG    | app.services.dhan_client:get_pnl:584 - Created PnL model: totals=PnLTotals(realized=0.0, unrealized=518640.37, day=518640.37, currency='INR') per_symbol=[PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1727, avg=618.93, ltp=343.74, unrealized=-475248.63, today_pnl=-475248.63), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=167, avg=948.57, ltp=1193.84, unrealized=-40959.73, today_pnl=-40959.73), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=1347, avg=801.44, ltp=1923.92, unrealized=1511986.25, today_pnl=1511986.25), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=143, avg=1427.62, ltp=1311.29, unrealized=16635.66, today_pnl=16635.66), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=438, avg=1994.48, ltp=867.14, unrealized=-493773.18, today_pnl=-493773.18)] updated_at=datetime.datetime(2025, 8, 21, 19, 3, 47, 318725, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))) trading_day='2025-08-21'\n", "record": {"elapsed": {"repr": "0:02:29.032378", "seconds": 149.032378}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 584, "message": "Created PnL model: totals=PnLTotals(realized=0.0, unrealized=518640.37, day=518640.37, currency='INR') per_symbol=[PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1727, avg=618.93, ltp=343.74, unrealized=-475248.63, today_pnl=-475248.63), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=167, avg=948.57, ltp=1193.84, unrealized=-40959.73, today_pnl=-40959.73), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=1347, avg=801.44, ltp=1923.92, unrealized=1511986.25, today_pnl=1511986.25), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=143, avg=1427.62, ltp=1311.29, unrealized=16635.66, today_pnl=16635.66), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=438, avg=1994.48, ltp=867.14, unrealized=-493773.18, today_pnl=-493773.18)] updated_at=datetime.datetime(2025, 8, 21, 19, 3, 47, 318725, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))) trading_day='2025-08-21'", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:03:47.324920+05:30", "timestamp": 1755783227.32492}}}
{"text": "2025-08-21 19:03:47.325 | DEBUG    | app.services.dhan_client:get_pnl:585 - PnL model fields: {'totals': PnLTotals(realized=0.0, unrealized=518640.37, day=518640.37, currency='INR'), 'per_symbol': [PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1727, avg=618.93, ltp=343.74, unrealized=-475248.63, today_pnl=-475248.63), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=167, avg=948.57, ltp=1193.84, unrealized=-40959.73, today_pnl=-40959.73), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=1347, avg=801.44, ltp=1923.92, unrealized=1511986.25, today_pnl=1511986.25), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=143, avg=1427.62, ltp=1311.29, unrealized=16635.66, today_pnl=16635.66), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=438, avg=1994.48, ltp=867.14, unrealized=-493773.18, today_pnl=-493773.18)], 'updated_at': datetime.datetime(2025, 8, 21, 19, 3, 47, 318725, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))), 'trading_day': '2025-08-21'}\n", "record": {"elapsed": {"repr": "0:02:29.033149", "seconds": 149.033149}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 585, "message": "PnL model fields: {'totals': PnLTotals(realized=0.0, unrealized=518640.37, day=518640.37, currency='INR'), 'per_symbol': [PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1727, avg=618.93, ltp=343.74, unrealized=-475248.63, today_pnl=-475248.63), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=167, avg=948.57, ltp=1193.84, unrealized=-40959.73, today_pnl=-40959.73), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=1347, avg=801.44, ltp=1923.92, unrealized=1511986.25, today_pnl=1511986.25), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=143, avg=1427.62, ltp=1311.29, unrealized=16635.66, today_pnl=16635.66), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=438, avg=1994.48, ltp=867.14, unrealized=-493773.18, today_pnl=-493773.18)], 'updated_at': datetime.datetime(2025, 8, 21, 19, 3, 47, 318725, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))), 'trading_day': '2025-08-21'}", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:03:47.325691+05:30", "timestamp": 1755783227.325691}}}
{"text": "2025-08-21 19:03:47.326 | INFO     | app.services.dhan_client:get_pnl:587 - P&L calculation completed successfully: 5 symbols, unrealized=‚Çπ518640.37\n", "record": {"elapsed": {"repr": "0:02:29.033873", "seconds": 149.033873}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 587, "message": "P&L calculation completed successfully: 5 symbols, unrealized=‚Çπ518640.37", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:03:47.326415+05:30", "timestamp": 1755783227.326415}}}
{"text": "2025-08-21 19:03:47.327 | DEBUG    | app.ws.live:emit_delta:408 - Emitted pnl delta: seq=164\n", "record": {"elapsed": {"repr": "0:02:29.034867", "seconds": 149.034867}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "emit_delta", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 408, "message": "Emitted pnl delta: seq=164", "module": "live", "name": "app.ws.live", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:03:47.327409+05:30", "timestamp": 1755783227.327409}}}
{"text": "2025-08-21 19:03:47.328 | DEBUG    | app.ws.live:emit_delta:408 - Emitted positions delta: seq=165\n", "record": {"elapsed": {"repr": "0:02:29.036110", "seconds": 149.03611}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "emit_delta", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 408, "message": "Emitted positions delta: seq=165", "module": "live", "name": "app.ws.live", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:03:47.328652+05:30", "timestamp": 1755783227.328652}}}
{"text": "2025-08-21 19:03:48.856 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:02:30.563796", "seconds": 150.563796}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:03:48.856338+05:30", "timestamp": 1755783228.856338}}}
{"text": "2025-08-21 19:03:48.857 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:02:30.564656", "seconds": 150.564656}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:03:48.857198+05:30", "timestamp": 1755783228.857198}}}
{"text": "2025-08-21 19:03:48.857 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:02:30.565171", "seconds": 150.565171}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:03:48.857713+05:30", "timestamp": 1755783228.857713}}}
{"text": "2025-08-21 19:03:48.858 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:02:30.565780", "seconds": 150.56578}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:03:48.858322+05:30", "timestamp": 1755783228.858322}}}
{"text": "2025-08-21 19:03:48.859 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:02:30.566529", "seconds": 150.566529}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:03:48.859071+05:30", "timestamp": 1755783228.859071}}}
{"text": "2025-08-21 19:03:48.859 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:02:30.567341", "seconds": 150.567341}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:03:48.859883+05:30", "timestamp": 1755783228.859883}}}
{"text": "2025-08-21 19:03:48.861 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:02:30.568475", "seconds": 150.568475}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:03:48.861017+05:30", "timestamp": 1755783228.861017}}}
{"text": "2025-08-21 19:03:48.861 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:02:30.569084", "seconds": 150.569084}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:03:48.861626+05:30", "timestamp": 1755783228.861626}}}
{"text": "2025-08-21 19:03:48.862 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:02:30.569676", "seconds": 150.569676}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:03:48.862218+05:30", "timestamp": 1755783228.862218}}}
{"text": "2025-08-21 19:03:48.862 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:02:30.570236", "seconds": 150.570236}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:03:48.862778+05:30", "timestamp": 1755783228.862778}}}
{"text": "2025-08-21 19:03:48.931 | DEBUG    | app.ws.live:emit_delta:408 - Emitted holdings delta: seq=166\n", "record": {"elapsed": {"repr": "0:02:30.638780", "seconds": 150.63878}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "emit_delta", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 408, "message": "Emitted holdings delta: seq=166", "module": "live", "name": "app.ws.live", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:03:48.931322+05:30", "timestamp": 1755783228.931322}}}
{"text": "2025-08-21 19:03:49.326 | INFO     | app.services.dhan_client:get_pnl:489 - Starting accurate P&L calculation\n", "record": {"elapsed": {"repr": "0:02:31.034006", "seconds": 151.034006}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 489, "message": "Starting accurate P&L calculation", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:03:49.326548+05:30", "timestamp": 1755783229.326548}}}
{"text": "2025-08-21 19:03:49.337 | INFO     | app.services.dhan_client:get_pnl:491 - Fetched 5 positions\n", "record": {"elapsed": {"repr": "0:02:31.045265", "seconds": 151.045265}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 491, "message": "Fetched 5 positions", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:03:49.337807+05:30", "timestamp": 1755783229.337807}}}
{"text": "2025-08-21 19:03:49.344 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for RELIANCE: unrealized=-470717.51, today=-470717.51\n", "record": {"elapsed": {"repr": "0:02:31.052449", "seconds": 151.052449}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for RELIANCE: unrealized=-470717.51, today=-470717.51", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:03:49.344991+05:30", "timestamp": 1755783229.344991}}}
{"text": "2025-08-21 19:03:49.348 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for TCS: unrealized=-41769.68, today=-41769.68\n", "record": {"elapsed": {"repr": "0:02:31.056013", "seconds": 151.056013}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for TCS: unrealized=-41769.68, today=-41769.68", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:03:49.348555+05:30", "timestamp": 1755783229.348555}}}
{"text": "2025-08-21 19:03:49.353 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for HDFC: unrealized=1475248.44, today=1475248.44\n", "record": {"elapsed": {"repr": "0:02:31.060812", "seconds": 151.060812}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for HDFC: unrealized=1475248.44, today=1475248.44", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:03:49.353354+05:30", "timestamp": 1755783229.353354}}}
{"text": "2025-08-21 19:03:49.367 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for INFY: unrealized=14734.92, today=14734.92\n", "record": {"elapsed": {"repr": "0:02:31.074918", "seconds": 151.074918}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for INFY: unrealized=14734.92, today=14734.92", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:03:49.367460+05:30", "timestamp": 1755783229.36746}}}
{"text": "2025-08-21 19:03:49.373 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for ICICIBANK: unrealized=-492759.3, today=-492759.3\n", "record": {"elapsed": {"repr": "0:02:31.080738", "seconds": 151.080738}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for ICICIBANK: unrealized=-492759.3, today=-492759.3", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:03:49.373280+05:30", "timestamp": 1755783229.37328}}}
{"text": "2025-08-21 19:03:49.378 | INFO     | app.services.dhan_client:get_pnl:545 - Calculated totals - realized: 0.0, unrealized: 484736.87, day: 484736.87\n", "record": {"elapsed": {"repr": "0:02:31.085796", "seconds": 151.085796}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 545, "message": "Calculated totals - realized: 0.0, unrealized: 484736.87, day: 484736.87", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:03:49.378338+05:30", "timestamp": 1755783229.378338}}}
{"text": "2025-08-21 19:03:49.387 | DEBUG    | app.services.dhan_client:get_pnl:554 - PnL consistency check passed: drift=‚Çπ0.00\n", "record": {"elapsed": {"repr": "0:02:31.094569", "seconds": 151.094569}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 554, "message": "PnL consistency check passed: drift=‚Çπ0.00", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:03:49.387111+05:30", "timestamp": 1755783229.387111}}}
{"text": "2025-08-21 19:03:49.390 | DEBUG    | app.services.dhan_client:get_pnl:558 - Creating PnLTotals...\n", "record": {"elapsed": {"repr": "0:02:31.097576", "seconds": 151.097576}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 558, "message": "Creating PnLTotals...", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:03:49.390118+05:30", "timestamp": 1755783229.390118}}}
{"text": "2025-08-21 19:03:49.405 | DEBUG    | app.services.dhan_client:get_pnl:565 - PnLTotals created successfully\n", "record": {"elapsed": {"repr": "0:02:31.113451", "seconds": 151.113451}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 565, "message": "PnLTotals created successfully", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:03:49.405993+05:30", "timestamp": 1755783229.405993}}}
{"text": "2025-08-21 19:03:49.412 | DEBUG    | app.services.dhan_client:get_pnl:574 - Creating PnL model...\n", "record": {"elapsed": {"repr": "0:02:31.120326", "seconds": 151.120326}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 574, "message": "Creating PnL model...", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:03:49.412868+05:30", "timestamp": 1755783229.412868}}}
{"text": "2025-08-21 19:03:49.433 | DEBUG    | app.services.dhan_client:get_pnl:575 - Model fields: totals=<class 'app.models.schemas.PnLTotals'>, perSymbol=5, updated_at=2025-08-21 19:03:49.344891+05:30, trading_day=2025-08-21\n", "record": {"elapsed": {"repr": "0:02:31.141028", "seconds": 151.141028}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 575, "message": "Model fields: totals=<class 'app.models.schemas.PnLTotals'>, perSymbol=5, updated_at=2025-08-21 19:03:49.344891+05:30, trading_day=2025-08-21", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:03:49.433570+05:30", "timestamp": 1755783229.43357}}}
{"text": "2025-08-21 19:03:49.453 | DEBUG    | app.services.dhan_client:get_pnl:584 - Created PnL model: totals=PnLTotals(realized=0.0, unrealized=484736.87, day=484736.87, currency='INR') per_symbol=[PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1727, avg=618.93, ltp=346.37, unrealized=-470717.51, today_pnl=-470717.51), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=167, avg=948.57, ltp=1198.69, unrealized=-41769.68, today_pnl=-41769.68), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=1347, avg=801.44, ltp=1896.65, unrealized=1475248.44, today_pnl=1475248.44), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=143, avg=1427.62, ltp=1324.58, unrealized=14734.92, today_pnl=14734.92), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=438, avg=1994.48, ltp=869.46, unrealized=-492759.3, today_pnl=-492759.3)] updated_at=datetime.datetime(2025, 8, 21, 19, 3, 49, 344891, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))) trading_day='2025-08-21'\n", "record": {"elapsed": {"repr": "0:02:31.160993", "seconds": 151.160993}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 584, "message": "Created PnL model: totals=PnLTotals(realized=0.0, unrealized=484736.87, day=484736.87, currency='INR') per_symbol=[PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1727, avg=618.93, ltp=346.37, unrealized=-470717.51, today_pnl=-470717.51), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=167, avg=948.57, ltp=1198.69, unrealized=-41769.68, today_pnl=-41769.68), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=1347, avg=801.44, ltp=1896.65, unrealized=1475248.44, today_pnl=1475248.44), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=143, avg=1427.62, ltp=1324.58, unrealized=14734.92, today_pnl=14734.92), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=438, avg=1994.48, ltp=869.46, unrealized=-492759.3, today_pnl=-492759.3)] updated_at=datetime.datetime(2025, 8, 21, 19, 3, 49, 344891, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))) trading_day='2025-08-21'", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:03:49.453535+05:30", "timestamp": 1755783229.453535}}}
{"text": "2025-08-21 19:03:49.469 | DEBUG    | app.services.dhan_client:get_pnl:585 - PnL model fields: {'totals': PnLTotals(realized=0.0, unrealized=484736.87, day=484736.87, currency='INR'), 'per_symbol': [PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1727, avg=618.93, ltp=346.37, unrealized=-470717.51, today_pnl=-470717.51), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=167, avg=948.57, ltp=1198.69, unrealized=-41769.68, today_pnl=-41769.68), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=1347, avg=801.44, ltp=1896.65, unrealized=1475248.44, today_pnl=1475248.44), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=143, avg=1427.62, ltp=1324.58, unrealized=14734.92, today_pnl=14734.92), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=438, avg=1994.48, ltp=869.46, unrealized=-492759.3, today_pnl=-492759.3)], 'updated_at': datetime.datetime(2025, 8, 21, 19, 3, 49, 344891, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))), 'trading_day': '2025-08-21'}\n", "record": {"elapsed": {"repr": "0:02:31.177084", "seconds": 151.177084}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 585, "message": "PnL model fields: {'totals': PnLTotals(realized=0.0, unrealized=484736.87, day=484736.87, currency='INR'), 'per_symbol': [PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1727, avg=618.93, ltp=346.37, unrealized=-470717.51, today_pnl=-470717.51), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=167, avg=948.57, ltp=1198.69, unrealized=-41769.68, today_pnl=-41769.68), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=1347, avg=801.44, ltp=1896.65, unrealized=1475248.44, today_pnl=1475248.44), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=143, avg=1427.62, ltp=1324.58, unrealized=14734.92, today_pnl=14734.92), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=438, avg=1994.48, ltp=869.46, unrealized=-492759.3, today_pnl=-492759.3)], 'updated_at': datetime.datetime(2025, 8, 21, 19, 3, 49, 344891, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))), 'trading_day': '2025-08-21'}", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:03:49.469626+05:30", "timestamp": 1755783229.469626}}}
{"text": "2025-08-21 19:03:49.480 | INFO     | app.services.dhan_client:get_pnl:587 - P&L calculation completed successfully: 5 symbols, unrealized=‚Çπ484736.87\n", "record": {"elapsed": {"repr": "0:02:31.187934", "seconds": 151.187934}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 587, "message": "P&L calculation completed successfully: 5 symbols, unrealized=‚Çπ484736.87", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:03:49.480476+05:30", "timestamp": 1755783229.480476}}}
{"text": "2025-08-21 19:03:49.499 | DEBUG    | app.ws.live:emit_delta:408 - Emitted pnl delta: seq=167\n", "record": {"elapsed": {"repr": "0:02:31.206581", "seconds": 151.206581}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "emit_delta", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 408, "message": "Emitted pnl delta: seq=167", "module": "live", "name": "app.ws.live", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:03:49.499123+05:30", "timestamp": 1755783229.499123}}}
{"text": "2025-08-21 19:03:49.517 | DEBUG    | app.ws.live:emit_delta:408 - Emitted positions delta: seq=168\n", "record": {"elapsed": {"repr": "0:02:31.224459", "seconds": 151.224459}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "emit_delta", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 408, "message": "Emitted positions delta: seq=168", "module": "live", "name": "app.ws.live", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:03:49.517001+05:30", "timestamp": 1755783229.517001}}}
{"text": "2025-08-21 19:03:50.864 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:02:32.571516", "seconds": 152.571516}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:03:50.864058+05:30", "timestamp": 1755783230.864058}}}
{"text": "2025-08-21 19:03:50.864 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:02:32.572123", "seconds": 152.572123}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:03:50.864665+05:30", "timestamp": 1755783230.864665}}}
{"text": "2025-08-21 19:03:50.865 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:02:32.572507", "seconds": 152.572507}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:03:50.865049+05:30", "timestamp": 1755783230.865049}}}
{"text": "2025-08-21 19:03:50.865 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:02:32.573088", "seconds": 152.573088}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:03:50.865630+05:30", "timestamp": 1755783230.86563}}}
{"text": "2025-08-21 19:03:50.866 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:02:32.573773", "seconds": 152.573773}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:03:50.866315+05:30", "timestamp": 1755783230.866315}}}
{"text": "2025-08-21 19:03:50.867 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:02:32.574477", "seconds": 152.574477}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:03:50.867019+05:30", "timestamp": 1755783230.867019}}}
{"text": "2025-08-21 19:03:50.867 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:02:32.575001", "seconds": 152.575001}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:03:50.867543+05:30", "timestamp": 1755783230.867543}}}
{"text": "2025-08-21 19:03:50.867 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:02:32.575408", "seconds": 152.575408}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:03:50.867950+05:30", "timestamp": 1755783230.86795}}}
{"text": "2025-08-21 19:03:50.868 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:02:32.575781", "seconds": 152.575781}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:03:50.868323+05:30", "timestamp": 1755783230.868323}}}
{"text": "2025-08-21 19:03:50.868 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:02:32.576168", "seconds": 152.576168}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:03:50.868710+05:30", "timestamp": 1755783230.86871}}}
{"text": "2025-08-21 19:03:51.104 | INFO     | app.services.dhan_client:get_pnl:489 - Starting accurate P&L calculation\n", "record": {"elapsed": {"repr": "0:02:32.812040", "seconds": 152.81204}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 489, "message": "Starting accurate P&L calculation", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:03:51.104582+05:30", "timestamp": 1755783231.104582}}}
{"text": "2025-08-21 19:03:51.105 | INFO     | app.services.dhan_client:get_pnl:491 - Fetched 5 positions\n", "record": {"elapsed": {"repr": "0:02:32.813088", "seconds": 152.813088}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 491, "message": "Fetched 5 positions", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:03:51.105630+05:30", "timestamp": 1755783231.10563}}}
{"text": "2025-08-21 19:03:51.106 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for RELIANCE: unrealized=-475032.32, today=-475032.32\n", "record": {"elapsed": {"repr": "0:02:32.813595", "seconds": 152.813595}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for RELIANCE: unrealized=-475032.32, today=-475032.32", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:03:51.106137+05:30", "timestamp": 1755783231.106137}}}
{"text": "2025-08-21 19:03:51.106 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for TCS: unrealized=-42481.43, today=-42481.43\n", "record": {"elapsed": {"repr": "0:02:32.814098", "seconds": 152.814098}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for TCS: unrealized=-42481.43, today=-42481.43", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:03:51.106640+05:30", "timestamp": 1755783231.10664}}}
{"text": "2025-08-21 19:03:51.107 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for HDFC: unrealized=1524894.07, today=1524894.07\n", "record": {"elapsed": {"repr": "0:02:32.814591", "seconds": 152.814591}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for HDFC: unrealized=1524894.07, today=1524894.07", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:03:51.107133+05:30", "timestamp": 1755783231.107133}}}
{"text": "2025-08-21 19:03:51.107 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for INFY: unrealized=14927.98, today=14927.98\n", "record": {"elapsed": {"repr": "0:02:32.815110", "seconds": 152.81511}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for INFY: unrealized=14927.98, today=14927.98", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:03:51.107652+05:30", "timestamp": 1755783231.107652}}}
{"text": "2025-08-21 19:03:51.108 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for ICICIBANK: unrealized=-490209.55, today=-490209.55\n", "record": {"elapsed": {"repr": "0:02:32.815842", "seconds": 152.815842}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for ICICIBANK: unrealized=-490209.55, today=-490209.55", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:03:51.108384+05:30", "timestamp": 1755783231.108384}}}
{"text": "2025-08-21 19:03:51.109 | INFO     | app.services.dhan_client:get_pnl:545 - Calculated totals - realized: 0.0, unrealized: 532098.75, day: 532098.75\n", "record": {"elapsed": {"repr": "0:02:32.816586", "seconds": 152.816586}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 545, "message": "Calculated totals - realized: 0.0, unrealized: 532098.75, day: 532098.75", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:03:51.109128+05:30", "timestamp": 1755783231.109128}}}
{"text": "2025-08-21 19:03:51.109 | DEBUG    | app.services.dhan_client:get_pnl:554 - PnL consistency check passed: drift=‚Çπ0.00\n", "record": {"elapsed": {"repr": "0:02:32.817173", "seconds": 152.817173}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 554, "message": "PnL consistency check passed: drift=‚Çπ0.00", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:03:51.109715+05:30", "timestamp": 1755783231.109715}}}
{"text": "2025-08-21 19:03:51.110 | DEBUG    | app.services.dhan_client:get_pnl:558 - Creating PnLTotals...\n", "record": {"elapsed": {"repr": "0:02:32.817623", "seconds": 152.817623}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 558, "message": "Creating PnLTotals...", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:03:51.110165+05:30", "timestamp": 1755783231.110165}}}
{"text": "2025-08-21 19:03:51.110 | DEBUG    | app.services.dhan_client:get_pnl:565 - PnLTotals created successfully\n", "record": {"elapsed": {"repr": "0:02:32.817998", "seconds": 152.817998}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 565, "message": "PnLTotals created successfully", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:03:51.110540+05:30", "timestamp": 1755783231.11054}}}
{"text": "2025-08-21 19:03:51.111 | DEBUG    | app.services.dhan_client:get_pnl:574 - Creating PnL model...\n", "record": {"elapsed": {"repr": "0:02:32.818510", "seconds": 152.81851}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 574, "message": "Creating PnL model...", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:03:51.111052+05:30", "timestamp": 1755783231.111052}}}
{"text": "2025-08-21 19:03:51.111 | DEBUG    | app.services.dhan_client:get_pnl:575 - Model fields: totals=<class 'app.models.schemas.PnLTotals'>, perSymbol=5, updated_at=2025-08-21 19:03:51.106065+05:30, trading_day=2025-08-21\n", "record": {"elapsed": {"repr": "0:02:32.818992", "seconds": 152.818992}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 575, "message": "Model fields: totals=<class 'app.models.schemas.PnLTotals'>, perSymbol=5, updated_at=2025-08-21 19:03:51.106065+05:30, trading_day=2025-08-21", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:03:51.111534+05:30", "timestamp": 1755783231.111534}}}
{"text": "2025-08-21 19:03:51.112 | DEBUG    | app.services.dhan_client:get_pnl:584 - Created PnL model: totals=PnLTotals(realized=0.0, unrealized=532098.75, day=532098.75, currency='INR') per_symbol=[PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1727, avg=618.93, ltp=343.87, unrealized=-475032.32, today_pnl=-475032.32), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=167, avg=948.57, ltp=1202.95, unrealized=-42481.43, today_pnl=-42481.43), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=1347, avg=801.44, ltp=1933.51, unrealized=1524894.07, today_pnl=1524894.07), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=143, avg=1427.62, ltp=1323.23, unrealized=14927.98, today_pnl=14927.98), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=438, avg=1994.48, ltp=875.28, unrealized=-490209.55, today_pnl=-490209.55)] updated_at=datetime.datetime(2025, 8, 21, 19, 3, 51, 106065, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))) trading_day='2025-08-21'\n", "record": {"elapsed": {"repr": "0:02:32.819613", "seconds": 152.819613}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 584, "message": "Created PnL model: totals=PnLTotals(realized=0.0, unrealized=532098.75, day=532098.75, currency='INR') per_symbol=[PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1727, avg=618.93, ltp=343.87, unrealized=-475032.32, today_pnl=-475032.32), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=167, avg=948.57, ltp=1202.95, unrealized=-42481.43, today_pnl=-42481.43), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=1347, avg=801.44, ltp=1933.51, unrealized=1524894.07, today_pnl=1524894.07), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=143, avg=1427.62, ltp=1323.23, unrealized=14927.98, today_pnl=14927.98), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=438, avg=1994.48, ltp=875.28, unrealized=-490209.55, today_pnl=-490209.55)] updated_at=datetime.datetime(2025, 8, 21, 19, 3, 51, 106065, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))) trading_day='2025-08-21'", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:03:51.112155+05:30", "timestamp": 1755783231.112155}}}
{"text": "2025-08-21 19:03:51.112 | DEBUG    | app.services.dhan_client:get_pnl:585 - PnL model fields: {'totals': PnLTotals(realized=0.0, unrealized=532098.75, day=532098.75, currency='INR'), 'per_symbol': [PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1727, avg=618.93, ltp=343.87, unrealized=-475032.32, today_pnl=-475032.32), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=167, avg=948.57, ltp=1202.95, unrealized=-42481.43, today_pnl=-42481.43), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=1347, avg=801.44, ltp=1933.51, unrealized=1524894.07, today_pnl=1524894.07), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=143, avg=1427.62, ltp=1323.23, unrealized=14927.98, today_pnl=14927.98), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=438, avg=1994.48, ltp=875.28, unrealized=-490209.55, today_pnl=-490209.55)], 'updated_at': datetime.datetime(2025, 8, 21, 19, 3, 51, 106065, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))), 'trading_day': '2025-08-21'}\n", "record": {"elapsed": {"repr": "0:02:32.820430", "seconds": 152.82043}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 585, "message": "PnL model fields: {'totals': PnLTotals(realized=0.0, unrealized=532098.75, day=532098.75, currency='INR'), 'per_symbol': [PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1727, avg=618.93, ltp=343.87, unrealized=-475032.32, today_pnl=-475032.32), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=167, avg=948.57, ltp=1202.95, unrealized=-42481.43, today_pnl=-42481.43), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=1347, avg=801.44, ltp=1933.51, unrealized=1524894.07, today_pnl=1524894.07), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=143, avg=1427.62, ltp=1323.23, unrealized=14927.98, today_pnl=14927.98), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=438, avg=1994.48, ltp=875.28, unrealized=-490209.55, today_pnl=-490209.55)], 'updated_at': datetime.datetime(2025, 8, 21, 19, 3, 51, 106065, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))), 'trading_day': '2025-08-21'}", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:03:51.112972+05:30", "timestamp": 1755783231.112972}}}
{"text": "2025-08-21 19:03:51.114 | INFO     | app.services.dhan_client:get_pnl:587 - P&L calculation completed successfully: 5 symbols, unrealized=‚Çπ532098.75\n", "record": {"elapsed": {"repr": "0:02:32.821842", "seconds": 152.821842}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 587, "message": "P&L calculation completed successfully: 5 symbols, unrealized=‚Çπ532098.75", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:03:51.114384+05:30", "timestamp": 1755783231.114384}}}
{"text": "2025-08-21 19:03:51.115 | DEBUG    | app.ws.live:emit_delta:408 - Emitted pnl delta: seq=169\n", "record": {"elapsed": {"repr": "0:02:32.822618", "seconds": 152.822618}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "emit_delta", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 408, "message": "Emitted pnl delta: seq=169", "module": "live", "name": "app.ws.live", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:03:51.115160+05:30", "timestamp": 1755783231.11516}}}
{"text": "2025-08-21 19:03:51.116 | DEBUG    | app.ws.live:emit_delta:408 - Emitted positions delta: seq=170\n", "record": {"elapsed": {"repr": "0:02:32.823617", "seconds": 152.823617}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "emit_delta", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 408, "message": "Emitted positions delta: seq=170", "module": "live", "name": "app.ws.live", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:03:51.116159+05:30", "timestamp": 1755783231.116159}}}
{"text": "2025-08-21 19:03:52.869 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:02:34.576810", "seconds": 154.57681}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:03:52.869352+05:30", "timestamp": 1755783232.869352}}}
{"text": "2025-08-21 19:03:52.869 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:02:34.577425", "seconds": 154.577425}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:03:52.869967+05:30", "timestamp": 1755783232.869967}}}
{"text": "2025-08-21 19:03:52.870 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:02:34.578165", "seconds": 154.578165}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:03:52.870707+05:30", "timestamp": 1755783232.870707}}}
{"text": "2025-08-21 19:03:52.871 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:02:34.578856", "seconds": 154.578856}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:03:52.871398+05:30", "timestamp": 1755783232.871398}}}
{"text": "2025-08-21 19:03:52.871 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:02:34.579321", "seconds": 154.579321}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:03:52.871863+05:30", "timestamp": 1755783232.871863}}}
{"text": "2025-08-21 19:03:52.872 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:02:34.579721", "seconds": 154.579721}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:03:52.872263+05:30", "timestamp": 1755783232.872263}}}
{"text": "2025-08-21 19:03:52.872 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:02:34.580113", "seconds": 154.580113}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:03:52.872655+05:30", "timestamp": 1755783232.872655}}}
{"text": "2025-08-21 19:03:52.873 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:02:34.580500", "seconds": 154.5805}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:03:52.873042+05:30", "timestamp": 1755783232.873042}}}
{"text": "2025-08-21 19:03:52.873 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:02:34.581069", "seconds": 154.581069}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:03:52.873611+05:30", "timestamp": 1755783232.873611}}}
{"text": "2025-08-21 19:03:52.874 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:02:34.582017", "seconds": 154.582017}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:03:52.874559+05:30", "timestamp": 1755783232.874559}}}
{"text": "2025-08-21 19:03:52.997 | INFO     | app.services.dhan_client:get_pnl:489 - Starting accurate P&L calculation\n", "record": {"elapsed": {"repr": "0:02:34.704928", "seconds": 154.704928}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 489, "message": "Starting accurate P&L calculation", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:03:52.997470+05:30", "timestamp": 1755783232.99747}}}
{"text": "2025-08-21 19:03:52.998 | INFO     | app.services.dhan_client:get_pnl:491 - Fetched 5 positions\n", "record": {"elapsed": {"repr": "0:02:34.705601", "seconds": 154.705601}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 491, "message": "Fetched 5 positions", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:03:52.998143+05:30", "timestamp": 1755783232.998143}}}
{"text": "2025-08-21 19:03:52.998 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for RELIANCE: unrealized=-484915.82, today=-484915.82\n", "record": {"elapsed": {"repr": "0:02:34.706194", "seconds": 154.706194}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for RELIANCE: unrealized=-484915.82, today=-484915.82", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:03:52.998736+05:30", "timestamp": 1755783232.998736}}}
{"text": "2025-08-21 19:03:52.999 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for TCS: unrealized=-44456.22, today=-44456.22\n", "record": {"elapsed": {"repr": "0:02:34.706884", "seconds": 154.706884}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for TCS: unrealized=-44456.22, today=-44456.22", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:03:52.999426+05:30", "timestamp": 1755783232.999426}}}
{"text": "2025-08-21 19:03:53.000 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for HDFC: unrealized=1550351.16, today=1550351.16\n", "record": {"elapsed": {"repr": "0:02:34.707678", "seconds": 154.707678}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for HDFC: unrealized=1550351.16, today=1550351.16", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:03:53.000220+05:30", "timestamp": 1755783233.00022}}}
{"text": "2025-08-21 19:03:53.000 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for INFY: unrealized=12641.77, today=12641.77\n", "record": {"elapsed": {"repr": "0:02:34.708317", "seconds": 154.708317}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for INFY: unrealized=12641.77, today=12641.77", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:03:53.000859+05:30", "timestamp": 1755783233.000859}}}
{"text": "2025-08-21 19:03:53.001 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for ICICIBANK: unrealized=-484249.18, today=-484249.18\n", "record": {"elapsed": {"repr": "0:02:34.708773", "seconds": 154.708773}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for ICICIBANK: unrealized=-484249.18, today=-484249.18", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:03:53.001315+05:30", "timestamp": 1755783233.001315}}}
{"text": "2025-08-21 19:03:53.001 | INFO     | app.services.dhan_client:get_pnl:545 - Calculated totals - realized: 0.0, unrealized: 549371.71, day: 549371.71\n", "record": {"elapsed": {"repr": "0:02:34.709293", "seconds": 154.709293}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 545, "message": "Calculated totals - realized: 0.0, unrealized: 549371.71, day: 549371.71", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:03:53.001835+05:30", "timestamp": 1755783233.001835}}}
{"text": "2025-08-21 19:03:53.002 | DEBUG    | app.services.dhan_client:get_pnl:554 - PnL consistency check passed: drift=‚Çπ0.00\n", "record": {"elapsed": {"repr": "0:02:34.709775", "seconds": 154.709775}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 554, "message": "PnL consistency check passed: drift=‚Çπ0.00", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:03:53.002317+05:30", "timestamp": 1755783233.002317}}}
{"text": "2025-08-21 19:03:53.002 | DEBUG    | app.services.dhan_client:get_pnl:558 - Creating PnLTotals...\n", "record": {"elapsed": {"repr": "0:02:34.710279", "seconds": 154.710279}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 558, "message": "Creating PnLTotals...", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:03:53.002821+05:30", "timestamp": 1755783233.002821}}}
{"text": "2025-08-21 19:03:53.003 | DEBUG    | app.services.dhan_client:get_pnl:565 - PnLTotals created successfully\n", "record": {"elapsed": {"repr": "0:02:34.710853", "seconds": 154.710853}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 565, "message": "PnLTotals created successfully", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:03:53.003395+05:30", "timestamp": 1755783233.003395}}}
{"text": "2025-08-21 19:03:53.004 | DEBUG    | app.services.dhan_client:get_pnl:574 - Creating PnL model...\n", "record": {"elapsed": {"repr": "0:02:34.711515", "seconds": 154.711515}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 574, "message": "Creating PnL model...", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:03:53.004057+05:30", "timestamp": 1755783233.004057}}}
{"text": "2025-08-21 19:03:53.004 | DEBUG    | app.services.dhan_client:get_pnl:575 - Model fields: totals=<class 'app.models.schemas.PnLTotals'>, perSymbol=5, updated_at=2025-08-21 19:03:52.998657+05:30, trading_day=2025-08-21\n", "record": {"elapsed": {"repr": "0:02:34.712230", "seconds": 154.71223}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 575, "message": "Model fields: totals=<class 'app.models.schemas.PnLTotals'>, perSymbol=5, updated_at=2025-08-21 19:03:52.998657+05:30, trading_day=2025-08-21", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:03:53.004772+05:30", "timestamp": 1755783233.004772}}}
{"text": "2025-08-21 19:03:53.005 | DEBUG    | app.services.dhan_client:get_pnl:584 - Created PnL model: totals=PnLTotals(realized=0.0, unrealized=549371.71, day=549371.71, currency='INR') per_symbol=[PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1727, avg=618.93, ltp=338.14, unrealized=-484915.82, today_pnl=-484915.82), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=167, avg=948.57, ltp=1214.77, unrealized=-44456.22, today_pnl=-44456.22), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=1347, avg=801.44, ltp=1952.41, unrealized=1550351.16, today_pnl=1550351.16), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=143, avg=1427.62, ltp=1339.22, unrealized=12641.77, today_pnl=12641.77), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=438, avg=1994.48, ltp=888.89, unrealized=-484249.18, today_pnl=-484249.18)] updated_at=datetime.datetime(2025, 8, 21, 19, 3, 52, 998657, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))) trading_day='2025-08-21'\n", "record": {"elapsed": {"repr": "0:02:34.712879", "seconds": 154.712879}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 584, "message": "Created PnL model: totals=PnLTotals(realized=0.0, unrealized=549371.71, day=549371.71, currency='INR') per_symbol=[PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1727, avg=618.93, ltp=338.14, unrealized=-484915.82, today_pnl=-484915.82), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=167, avg=948.57, ltp=1214.77, unrealized=-44456.22, today_pnl=-44456.22), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=1347, avg=801.44, ltp=1952.41, unrealized=1550351.16, today_pnl=1550351.16), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=143, avg=1427.62, ltp=1339.22, unrealized=12641.77, today_pnl=12641.77), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=438, avg=1994.48, ltp=888.89, unrealized=-484249.18, today_pnl=-484249.18)] updated_at=datetime.datetime(2025, 8, 21, 19, 3, 52, 998657, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))) trading_day='2025-08-21'", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:03:53.005421+05:30", "timestamp": 1755783233.005421}}}
{"text": "2025-08-21 19:03:53.006 | DEBUG    | app.services.dhan_client:get_pnl:585 - PnL model fields: {'totals': PnLTotals(realized=0.0, unrealized=549371.71, day=549371.71, currency='INR'), 'per_symbol': [PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1727, avg=618.93, ltp=338.14, unrealized=-484915.82, today_pnl=-484915.82), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=167, avg=948.57, ltp=1214.77, unrealized=-44456.22, today_pnl=-44456.22), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=1347, avg=801.44, ltp=1952.41, unrealized=1550351.16, today_pnl=1550351.16), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=143, avg=1427.62, ltp=1339.22, unrealized=12641.77, today_pnl=12641.77), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=438, avg=1994.48, ltp=888.89, unrealized=-484249.18, today_pnl=-484249.18)], 'updated_at': datetime.datetime(2025, 8, 21, 19, 3, 52, 998657, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))), 'trading_day': '2025-08-21'}\n", "record": {"elapsed": {"repr": "0:02:34.713659", "seconds": 154.713659}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 585, "message": "PnL model fields: {'totals': PnLTotals(realized=0.0, unrealized=549371.71, day=549371.71, currency='INR'), 'per_symbol': [PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1727, avg=618.93, ltp=338.14, unrealized=-484915.82, today_pnl=-484915.82), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=167, avg=948.57, ltp=1214.77, unrealized=-44456.22, today_pnl=-44456.22), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=1347, avg=801.44, ltp=1952.41, unrealized=1550351.16, today_pnl=1550351.16), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=143, avg=1427.62, ltp=1339.22, unrealized=12641.77, today_pnl=12641.77), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=438, avg=1994.48, ltp=888.89, unrealized=-484249.18, today_pnl=-484249.18)], 'updated_at': datetime.datetime(2025, 8, 21, 19, 3, 52, 998657, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))), 'trading_day': '2025-08-21'}", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:03:53.006201+05:30", "timestamp": 1755783233.006201}}}
{"text": "2025-08-21 19:03:53.007 | INFO     | app.services.dhan_client:get_pnl:587 - P&L calculation completed successfully: 5 symbols, unrealized=‚Çπ549371.71\n", "record": {"elapsed": {"repr": "0:02:34.714507", "seconds": 154.714507}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 587, "message": "P&L calculation completed successfully: 5 symbols, unrealized=‚Çπ549371.71", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:03:53.007049+05:30", "timestamp": 1755783233.007049}}}
{"text": "2025-08-21 19:03:53.008 | DEBUG    | app.ws.live:emit_delta:408 - Emitted pnl delta: seq=171\n", "record": {"elapsed": {"repr": "0:02:34.715695", "seconds": 154.715695}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "emit_delta", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 408, "message": "Emitted pnl delta: seq=171", "module": "live", "name": "app.ws.live", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:03:53.008237+05:30", "timestamp": 1755783233.008237}}}
{"text": "2025-08-21 19:03:53.009 | DEBUG    | app.ws.live:emit_delta:408 - Emitted positions delta: seq=172\n", "record": {"elapsed": {"repr": "0:02:34.716559", "seconds": 154.716559}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "emit_delta", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 408, "message": "Emitted positions delta: seq=172", "module": "live", "name": "app.ws.live", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:03:53.009101+05:30", "timestamp": 1755783233.009101}}}
{"text": "2025-08-21 19:03:54.842 | INFO     | app.services.dhan_client:get_pnl:489 - Starting accurate P&L calculation\n", "record": {"elapsed": {"repr": "0:02:36.549841", "seconds": 156.549841}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 489, "message": "Starting accurate P&L calculation", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:03:54.842383+05:30", "timestamp": 1755783234.842383}}}
{"text": "2025-08-21 19:03:54.843 | INFO     | app.services.dhan_client:get_pnl:491 - Fetched 5 positions\n", "record": {"elapsed": {"repr": "0:02:36.550477", "seconds": 156.550477}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 491, "message": "Fetched 5 positions", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:03:54.843019+05:30", "timestamp": 1755783234.843019}}}
{"text": "2025-08-21 19:03:54.843 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for RELIANCE: unrealized=-484915.82, today=-484915.82\n", "record": {"elapsed": {"repr": "0:02:36.551024", "seconds": 156.551024}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for RELIANCE: unrealized=-484915.82, today=-484915.82", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:03:54.843566+05:30", "timestamp": 1755783234.843566}}}
{"text": "2025-08-21 19:03:54.844 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for TCS: unrealized=-44456.22, today=-44456.22\n", "record": {"elapsed": {"repr": "0:02:36.551621", "seconds": 156.551621}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for TCS: unrealized=-44456.22, today=-44456.22", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:03:54.844163+05:30", "timestamp": 1755783234.844163}}}
{"text": "2025-08-21 19:03:54.845 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for HDFC: unrealized=1550351.16, today=1550351.16\n", "record": {"elapsed": {"repr": "0:02:36.552484", "seconds": 156.552484}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for HDFC: unrealized=1550351.16, today=1550351.16", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:03:54.845026+05:30", "timestamp": 1755783234.845026}}}
{"text": "2025-08-21 19:03:54.845 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for INFY: unrealized=12641.77, today=12641.77\n", "record": {"elapsed": {"repr": "0:02:36.552960", "seconds": 156.55296}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for INFY: unrealized=12641.77, today=12641.77", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:03:54.845502+05:30", "timestamp": 1755783234.845502}}}
{"text": "2025-08-21 19:03:54.845 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for ICICIBANK: unrealized=-484249.18, today=-484249.18\n", "record": {"elapsed": {"repr": "0:02:36.553394", "seconds": 156.553394}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for ICICIBANK: unrealized=-484249.18, today=-484249.18", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:03:54.845936+05:30", "timestamp": 1755783234.845936}}}
{"text": "2025-08-21 19:03:54.846 | INFO     | app.services.dhan_client:get_pnl:545 - Calculated totals - realized: 0.0, unrealized: 549371.71, day: 549371.71\n", "record": {"elapsed": {"repr": "0:02:36.553838", "seconds": 156.553838}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 545, "message": "Calculated totals - realized: 0.0, unrealized: 549371.71, day: 549371.71", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:03:54.846380+05:30", "timestamp": 1755783234.84638}}}
{"text": "2025-08-21 19:03:54.846 | DEBUG    | app.services.dhan_client:get_pnl:554 - PnL consistency check passed: drift=‚Çπ0.00\n", "record": {"elapsed": {"repr": "0:02:36.554268", "seconds": 156.554268}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 554, "message": "PnL consistency check passed: drift=‚Çπ0.00", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:03:54.846810+05:30", "timestamp": 1755783234.84681}}}
{"text": "2025-08-21 19:03:54.847 | DEBUG    | app.services.dhan_client:get_pnl:558 - Creating PnLTotals...\n", "record": {"elapsed": {"repr": "0:02:36.554830", "seconds": 156.55483}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 558, "message": "Creating PnLTotals...", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:03:54.847372+05:30", "timestamp": 1755783234.847372}}}
{"text": "2025-08-21 19:03:54.848 | DEBUG    | app.services.dhan_client:get_pnl:565 - PnLTotals created successfully\n", "record": {"elapsed": {"repr": "0:02:36.555774", "seconds": 156.555774}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 565, "message": "PnLTotals created successfully", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:03:54.848316+05:30", "timestamp": 1755783234.848316}}}
{"text": "2025-08-21 19:03:54.849 | DEBUG    | app.services.dhan_client:get_pnl:574 - Creating PnL model...\n", "record": {"elapsed": {"repr": "0:02:36.556488", "seconds": 156.556488}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 574, "message": "Creating PnL model...", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:03:54.849030+05:30", "timestamp": 1755783234.84903}}}
{"text": "2025-08-21 19:03:54.849 | DEBUG    | app.services.dhan_client:get_pnl:575 - Model fields: totals=<class 'app.models.schemas.PnLTotals'>, perSymbol=5, updated_at=2025-08-21 19:03:54.843493+05:30, trading_day=2025-08-21\n", "record": {"elapsed": {"repr": "0:02:36.556942", "seconds": 156.556942}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 575, "message": "Model fields: totals=<class 'app.models.schemas.PnLTotals'>, perSymbol=5, updated_at=2025-08-21 19:03:54.843493+05:30, trading_day=2025-08-21", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:03:54.849484+05:30", "timestamp": 1755783234.849484}}}
{"text": "2025-08-21 19:03:54.850 | DEBUG    | app.services.dhan_client:get_pnl:584 - Created PnL model: totals=PnLTotals(realized=0.0, unrealized=549371.71, day=549371.71, currency='INR') per_symbol=[PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1727, avg=618.93, ltp=338.14, unrealized=-484915.82, today_pnl=-484915.82), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=167, avg=948.57, ltp=1214.77, unrealized=-44456.22, today_pnl=-44456.22), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=1347, avg=801.44, ltp=1952.41, unrealized=1550351.16, today_pnl=1550351.16), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=143, avg=1427.62, ltp=1339.22, unrealized=12641.77, today_pnl=12641.77), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=438, avg=1994.48, ltp=888.89, unrealized=-484249.18, today_pnl=-484249.18)] updated_at=datetime.datetime(2025, 8, 21, 19, 3, 54, 843493, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))) trading_day='2025-08-21'\n", "record": {"elapsed": {"repr": "0:02:36.557514", "seconds": 156.557514}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 584, "message": "Created PnL model: totals=PnLTotals(realized=0.0, unrealized=549371.71, day=549371.71, currency='INR') per_symbol=[PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1727, avg=618.93, ltp=338.14, unrealized=-484915.82, today_pnl=-484915.82), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=167, avg=948.57, ltp=1214.77, unrealized=-44456.22, today_pnl=-44456.22), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=1347, avg=801.44, ltp=1952.41, unrealized=1550351.16, today_pnl=1550351.16), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=143, avg=1427.62, ltp=1339.22, unrealized=12641.77, today_pnl=12641.77), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=438, avg=1994.48, ltp=888.89, unrealized=-484249.18, today_pnl=-484249.18)] updated_at=datetime.datetime(2025, 8, 21, 19, 3, 54, 843493, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))) trading_day='2025-08-21'", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:03:54.850056+05:30", "timestamp": 1755783234.850056}}}
{"text": "2025-08-21 19:03:54.850 | DEBUG    | app.services.dhan_client:get_pnl:585 - PnL model fields: {'totals': PnLTotals(realized=0.0, unrealized=549371.71, day=549371.71, currency='INR'), 'per_symbol': [PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1727, avg=618.93, ltp=338.14, unrealized=-484915.82, today_pnl=-484915.82), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=167, avg=948.57, ltp=1214.77, unrealized=-44456.22, today_pnl=-44456.22), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=1347, avg=801.44, ltp=1952.41, unrealized=1550351.16, today_pnl=1550351.16), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=143, avg=1427.62, ltp=1339.22, unrealized=12641.77, today_pnl=12641.77), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=438, avg=1994.48, ltp=888.89, unrealized=-484249.18, today_pnl=-484249.18)], 'updated_at': datetime.datetime(2025, 8, 21, 19, 3, 54, 843493, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))), 'trading_day': '2025-08-21'}\n", "record": {"elapsed": {"repr": "0:02:36.558246", "seconds": 156.558246}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 585, "message": "PnL model fields: {'totals': PnLTotals(realized=0.0, unrealized=549371.71, day=549371.71, currency='INR'), 'per_symbol': [PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1727, avg=618.93, ltp=338.14, unrealized=-484915.82, today_pnl=-484915.82), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=167, avg=948.57, ltp=1214.77, unrealized=-44456.22, today_pnl=-44456.22), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=1347, avg=801.44, ltp=1952.41, unrealized=1550351.16, today_pnl=1550351.16), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=143, avg=1427.62, ltp=1339.22, unrealized=12641.77, today_pnl=12641.77), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=438, avg=1994.48, ltp=888.89, unrealized=-484249.18, today_pnl=-484249.18)], 'updated_at': datetime.datetime(2025, 8, 21, 19, 3, 54, 843493, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))), 'trading_day': '2025-08-21'}", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:03:54.850788+05:30", "timestamp": 1755783234.850788}}}
{"text": "2025-08-21 19:03:54.851 | INFO     | app.services.dhan_client:get_pnl:587 - P&L calculation completed successfully: 5 symbols, unrealized=‚Çπ549371.71\n", "record": {"elapsed": {"repr": "0:02:36.558887", "seconds": 156.558887}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 587, "message": "P&L calculation completed successfully: 5 symbols, unrealized=‚Çπ549371.71", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:03:54.851429+05:30", "timestamp": 1755783234.851429}}}
{"text": "2025-08-21 19:03:54.852 | DEBUG    | app.ws.live:emit_delta:408 - Emitted pnl delta: seq=173\n", "record": {"elapsed": {"repr": "0:02:36.559560", "seconds": 156.55956}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "emit_delta", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 408, "message": "Emitted pnl delta: seq=173", "module": "live", "name": "app.ws.live", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:03:54.852102+05:30", "timestamp": 1755783234.852102}}}
{"text": "2025-08-21 19:03:54.875 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:02:36.582942", "seconds": 156.582942}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:03:54.875484+05:30", "timestamp": 1755783234.875484}}}
{"text": "2025-08-21 19:03:54.876 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:02:36.583667", "seconds": 156.583667}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:03:54.876209+05:30", "timestamp": 1755783234.876209}}}
{"text": "2025-08-21 19:03:54.876 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:02:36.584145", "seconds": 156.584145}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:03:54.876687+05:30", "timestamp": 1755783234.876687}}}
{"text": "2025-08-21 19:03:54.877 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:02:36.584625", "seconds": 156.584625}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:03:54.877167+05:30", "timestamp": 1755783234.877167}}}
{"text": "2025-08-21 19:03:54.878 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:02:36.585542", "seconds": 156.585542}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:03:54.878084+05:30", "timestamp": 1755783234.878084}}}
{"text": "2025-08-21 19:03:54.878 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:02:36.586193", "seconds": 156.586193}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:03:54.878735+05:30", "timestamp": 1755783234.878735}}}
{"text": "2025-08-21 19:03:54.879 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:02:36.586592", "seconds": 156.586592}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:03:54.879134+05:30", "timestamp": 1755783234.879134}}}
{"text": "2025-08-21 19:03:54.879 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:02:36.586987", "seconds": 156.586987}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:03:54.879529+05:30", "timestamp": 1755783234.879529}}}
{"text": "2025-08-21 19:03:54.879 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:02:36.587419", "seconds": 156.587419}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:03:54.879961+05:30", "timestamp": 1755783234.879961}}}
{"text": "2025-08-21 19:03:54.880 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:02:36.587838", "seconds": 156.587838}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:03:54.880380+05:30", "timestamp": 1755783234.88038}}}
{"text": "2025-08-21 19:03:56.607 | INFO     | app.services.dhan_client:get_pnl:489 - Starting accurate P&L calculation\n", "record": {"elapsed": {"repr": "0:02:38.314493", "seconds": 158.314493}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 489, "message": "Starting accurate P&L calculation", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:03:56.607035+05:30", "timestamp": 1755783236.607035}}}
{"text": "2025-08-21 19:03:56.607 | INFO     | app.services.dhan_client:get_pnl:491 - Fetched 5 positions\n", "record": {"elapsed": {"repr": "0:02:38.315148", "seconds": 158.315148}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 491, "message": "Fetched 5 positions", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:03:56.607690+05:30", "timestamp": 1755783236.60769}}}
{"text": "2025-08-21 19:03:56.608 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for RELIANCE: unrealized=-478858.06, today=-478858.06\n", "record": {"elapsed": {"repr": "0:02:38.315660", "seconds": 158.31566}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for RELIANCE: unrealized=-478858.06, today=-478858.06", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:03:56.608202+05:30", "timestamp": 1755783236.608202}}}
{"text": "2025-08-21 19:03:56.608 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for TCS: unrealized=-40762.71, today=-40762.71\n", "record": {"elapsed": {"repr": "0:02:38.316095", "seconds": 158.316095}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for TCS: unrealized=-40762.71, today=-40762.71", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:03:56.608637+05:30", "timestamp": 1755783236.608637}}}
{"text": "2025-08-21 19:03:56.609 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for HDFC: unrealized=1540610.41, today=1540610.41\n", "record": {"elapsed": {"repr": "0:02:38.316530", "seconds": 158.31653}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for HDFC: unrealized=1540610.41, today=1540610.41", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:03:56.609072+05:30", "timestamp": 1755783236.609072}}}
{"text": "2025-08-21 19:03:56.609 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for INFY: unrealized=9756.55, today=9756.55\n", "record": {"elapsed": {"repr": "0:02:38.316964", "seconds": 158.316964}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for INFY: unrealized=9756.55, today=9756.55", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:03:56.609506+05:30", "timestamp": 1755783236.609506}}}
{"text": "2025-08-21 19:03:56.610 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for ICICIBANK: unrealized=-481319.47, today=-481319.47\n", "record": {"elapsed": {"repr": "0:02:38.317539", "seconds": 158.317539}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for ICICIBANK: unrealized=-481319.47, today=-481319.47", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:03:56.610081+05:30", "timestamp": 1755783236.610081}}}
{"text": "2025-08-21 19:03:56.610 | INFO     | app.services.dhan_client:get_pnl:545 - Calculated totals - realized: 0.0, unrealized: 549426.72, day: 549426.72\n", "record": {"elapsed": {"repr": "0:02:38.318376", "seconds": 158.318376}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 545, "message": "Calculated totals - realized: 0.0, unrealized: 549426.72, day: 549426.72", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:03:56.610918+05:30", "timestamp": 1755783236.610918}}}
{"text": "2025-08-21 19:03:56.611 | DEBUG    | app.services.dhan_client:get_pnl:554 - PnL consistency check passed: drift=‚Çπ0.00\n", "record": {"elapsed": {"repr": "0:02:38.318849", "seconds": 158.318849}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 554, "message": "PnL consistency check passed: drift=‚Çπ0.00", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:03:56.611391+05:30", "timestamp": 1755783236.611391}}}
{"text": "2025-08-21 19:03:56.611 | DEBUG    | app.services.dhan_client:get_pnl:558 - Creating PnLTotals...\n", "record": {"elapsed": {"repr": "0:02:38.319314", "seconds": 158.319314}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 558, "message": "Creating PnLTotals...", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:03:56.611856+05:30", "timestamp": 1755783236.611856}}}
{"text": "2025-08-21 19:03:56.612 | DEBUG    | app.services.dhan_client:get_pnl:565 - PnLTotals created successfully\n", "record": {"elapsed": {"repr": "0:02:38.319807", "seconds": 158.319807}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 565, "message": "PnLTotals created successfully", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:03:56.612349+05:30", "timestamp": 1755783236.612349}}}
{"text": "2025-08-21 19:03:56.613 | DEBUG    | app.services.dhan_client:get_pnl:574 - Creating PnL model...\n", "record": {"elapsed": {"repr": "0:02:38.320469", "seconds": 158.320469}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 574, "message": "Creating PnL model...", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:03:56.613011+05:30", "timestamp": 1755783236.613011}}}
{"text": "2025-08-21 19:03:56.613 | DEBUG    | app.services.dhan_client:get_pnl:575 - Model fields: totals=<class 'app.models.schemas.PnLTotals'>, perSymbol=5, updated_at=2025-08-21 19:03:56.608130+05:30, trading_day=2025-08-21\n", "record": {"elapsed": {"repr": "0:02:38.321207", "seconds": 158.321207}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 575, "message": "Model fields: totals=<class 'app.models.schemas.PnLTotals'>, perSymbol=5, updated_at=2025-08-21 19:03:56.608130+05:30, trading_day=2025-08-21", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:03:56.613749+05:30", "timestamp": 1755783236.613749}}}
{"text": "2025-08-21 19:03:56.614 | DEBUG    | app.services.dhan_client:get_pnl:584 - Created PnL model: totals=PnLTotals(realized=0.0, unrealized=549426.72, day=549426.72, currency='INR') per_symbol=[PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1727, avg=618.93, ltp=341.65, unrealized=-478858.06, today_pnl=-478858.06), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=167, avg=948.57, ltp=1192.66, unrealized=-40762.71, today_pnl=-40762.71), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=1347, avg=801.44, ltp=1945.17, unrealized=1540610.41, today_pnl=1540610.41), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=143, avg=1427.62, ltp=1359.39, unrealized=9756.55, today_pnl=9756.55), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=438, avg=1994.48, ltp=895.58, unrealized=-481319.47, today_pnl=-481319.47)] updated_at=datetime.datetime(2025, 8, 21, 19, 3, 56, 608130, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))) trading_day='2025-08-21'\n", "record": {"elapsed": {"repr": "0:02:38.322122", "seconds": 158.322122}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 584, "message": "Created PnL model: totals=PnLTotals(realized=0.0, unrealized=549426.72, day=549426.72, currency='INR') per_symbol=[PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1727, avg=618.93, ltp=341.65, unrealized=-478858.06, today_pnl=-478858.06), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=167, avg=948.57, ltp=1192.66, unrealized=-40762.71, today_pnl=-40762.71), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=1347, avg=801.44, ltp=1945.17, unrealized=1540610.41, today_pnl=1540610.41), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=143, avg=1427.62, ltp=1359.39, unrealized=9756.55, today_pnl=9756.55), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=438, avg=1994.48, ltp=895.58, unrealized=-481319.47, today_pnl=-481319.47)] updated_at=datetime.datetime(2025, 8, 21, 19, 3, 56, 608130, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))) trading_day='2025-08-21'", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:03:56.614664+05:30", "timestamp": 1755783236.614664}}}
{"text": "2025-08-21 19:03:56.615 | DEBUG    | app.services.dhan_client:get_pnl:585 - PnL model fields: {'totals': PnLTotals(realized=0.0, unrealized=549426.72, day=549426.72, currency='INR'), 'per_symbol': [PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1727, avg=618.93, ltp=341.65, unrealized=-478858.06, today_pnl=-478858.06), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=167, avg=948.57, ltp=1192.66, unrealized=-40762.71, today_pnl=-40762.71), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=1347, avg=801.44, ltp=1945.17, unrealized=1540610.41, today_pnl=1540610.41), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=143, avg=1427.62, ltp=1359.39, unrealized=9756.55, today_pnl=9756.55), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=438, avg=1994.48, ltp=895.58, unrealized=-481319.47, today_pnl=-481319.47)], 'updated_at': datetime.datetime(2025, 8, 21, 19, 3, 56, 608130, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))), 'trading_day': '2025-08-21'}\n", "record": {"elapsed": {"repr": "0:02:38.322887", "seconds": 158.322887}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 585, "message": "PnL model fields: {'totals': PnLTotals(realized=0.0, unrealized=549426.72, day=549426.72, currency='INR'), 'per_symbol': [PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1727, avg=618.93, ltp=341.65, unrealized=-478858.06, today_pnl=-478858.06), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=167, avg=948.57, ltp=1192.66, unrealized=-40762.71, today_pnl=-40762.71), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=1347, avg=801.44, ltp=1945.17, unrealized=1540610.41, today_pnl=1540610.41), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=143, avg=1427.62, ltp=1359.39, unrealized=9756.55, today_pnl=9756.55), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=438, avg=1994.48, ltp=895.58, unrealized=-481319.47, today_pnl=-481319.47)], 'updated_at': datetime.datetime(2025, 8, 21, 19, 3, 56, 608130, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))), 'trading_day': '2025-08-21'}", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:03:56.615429+05:30", "timestamp": 1755783236.615429}}}
{"text": "2025-08-21 19:03:56.615 | INFO     | app.services.dhan_client:get_pnl:587 - P&L calculation completed successfully: 5 symbols, unrealized=‚Çπ549426.72\n", "record": {"elapsed": {"repr": "0:02:38.323429", "seconds": 158.323429}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 587, "message": "P&L calculation completed successfully: 5 symbols, unrealized=‚Çπ549426.72", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:03:56.615971+05:30", "timestamp": 1755783236.615971}}}
{"text": "2025-08-21 19:03:56.616 | DEBUG    | app.ws.live:emit_delta:408 - Emitted pnl delta: seq=174\n", "record": {"elapsed": {"repr": "0:02:38.324023", "seconds": 158.324023}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "emit_delta", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 408, "message": "Emitted pnl delta: seq=174", "module": "live", "name": "app.ws.live", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:03:56.616565+05:30", "timestamp": 1755783236.616565}}}
{"text": "2025-08-21 19:03:56.617 | DEBUG    | app.ws.live:emit_delta:408 - Emitted positions delta: seq=175\n", "record": {"elapsed": {"repr": "0:02:38.324764", "seconds": 158.324764}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "emit_delta", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 408, "message": "Emitted positions delta: seq=175", "module": "live", "name": "app.ws.live", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:03:56.617306+05:30", "timestamp": 1755783236.617306}}}
{"text": "2025-08-21 19:03:56.881 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:02:38.588903", "seconds": 158.588903}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:03:56.881445+05:30", "timestamp": 1755783236.881445}}}
{"text": "2025-08-21 19:03:56.882 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:02:38.589619", "seconds": 158.589619}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:03:56.882161+05:30", "timestamp": 1755783236.882161}}}
{"text": "2025-08-21 19:03:56.882 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:02:38.590036", "seconds": 158.590036}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:03:56.882578+05:30", "timestamp": 1755783236.882578}}}
{"text": "2025-08-21 19:03:56.882 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:02:38.590417", "seconds": 158.590417}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:03:56.882959+05:30", "timestamp": 1755783236.882959}}}
{"text": "2025-08-21 19:03:56.883 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:02:38.590793", "seconds": 158.590793}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:03:56.883335+05:30", "timestamp": 1755783236.883335}}}
{"text": "2025-08-21 19:03:56.883 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:02:38.591218", "seconds": 158.591218}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:03:56.883760+05:30", "timestamp": 1755783236.88376}}}
{"text": "2025-08-21 19:03:56.884 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:02:38.591974", "seconds": 158.591974}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:03:56.884516+05:30", "timestamp": 1755783236.884516}}}
{"text": "2025-08-21 19:03:56.885 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:02:38.592910", "seconds": 158.59291}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:03:56.885452+05:30", "timestamp": 1755783236.885452}}}
{"text": "2025-08-21 19:03:56.886 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:02:38.593514", "seconds": 158.593514}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:03:56.886056+05:30", "timestamp": 1755783236.886056}}}
{"text": "2025-08-21 19:03:56.886 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:02:38.594000", "seconds": 158.594}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:03:56.886542+05:30", "timestamp": 1755783236.886542}}}
{"text": "2025-08-21 19:03:58.256 | INFO     | app.services.dhan_client:get_pnl:489 - Starting accurate P&L calculation\n", "record": {"elapsed": {"repr": "0:02:39.963521", "seconds": 159.963521}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 489, "message": "Starting accurate P&L calculation", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:03:58.256063+05:30", "timestamp": 1755783238.256063}}}
{"text": "2025-08-21 19:03:58.256 | INFO     | app.services.dhan_client:get_pnl:491 - Fetched 5 positions\n", "record": {"elapsed": {"repr": "0:02:39.964093", "seconds": 159.964093}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 491, "message": "Fetched 5 positions", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:03:58.256635+05:30", "timestamp": 1755783238.256635}}}
{"text": "2025-08-21 19:03:58.257 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for RELIANCE: unrealized=-469156.4, today=-469156.4\n", "record": {"elapsed": {"repr": "0:02:39.964618", "seconds": 159.964618}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for RELIANCE: unrealized=-469156.4, today=-469156.4", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:03:58.257160+05:30", "timestamp": 1755783238.25716}}}
{"text": "2025-08-21 19:03:58.257 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for TCS: unrealized=-40891.66, today=-40891.66\n", "record": {"elapsed": {"repr": "0:02:39.965065", "seconds": 159.965065}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for TCS: unrealized=-40891.66, today=-40891.66", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:03:58.257607+05:30", "timestamp": 1755783238.257607}}}
{"text": "2025-08-21 19:03:58.258 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for HDFC: unrealized=1532503.76, today=1532503.76\n", "record": {"elapsed": {"repr": "0:02:39.965566", "seconds": 159.965566}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for HDFC: unrealized=1532503.76, today=1532503.76", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:03:58.258108+05:30", "timestamp": 1755783238.258108}}}
{"text": "2025-08-21 19:03:58.258 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for INFY: unrealized=9644.23, today=9644.23\n", "record": {"elapsed": {"repr": "0:02:39.966098", "seconds": 159.966098}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for INFY: unrealized=9644.23, today=9644.23", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:03:58.258640+05:30", "timestamp": 1755783238.25864}}}
{"text": "2025-08-21 19:03:58.259 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for ICICIBANK: unrealized=-475608.57, today=-475608.57\n", "record": {"elapsed": {"repr": "0:02:39.966783", "seconds": 159.966783}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for ICICIBANK: unrealized=-475608.57, today=-475608.57", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:03:58.259325+05:30", "timestamp": 1755783238.259325}}}
{"text": "2025-08-21 19:03:58.260 | INFO     | app.services.dhan_client:get_pnl:545 - Calculated totals - realized: 0.0, unrealized: 556491.36, day: 556491.36\n", "record": {"elapsed": {"repr": "0:02:39.967532", "seconds": 159.967532}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 545, "message": "Calculated totals - realized: 0.0, unrealized: 556491.36, day: 556491.36", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:03:58.260074+05:30", "timestamp": 1755783238.260074}}}
{"text": "2025-08-21 19:03:58.260 | DEBUG    | app.services.dhan_client:get_pnl:554 - PnL consistency check passed: drift=‚Çπ0.00\n", "record": {"elapsed": {"repr": "0:02:39.968011", "seconds": 159.968011}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 554, "message": "PnL consistency check passed: drift=‚Çπ0.00", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:03:58.260553+05:30", "timestamp": 1755783238.260553}}}
{"text": "2025-08-21 19:03:58.261 | DEBUG    | app.services.dhan_client:get_pnl:558 - Creating PnLTotals...\n", "record": {"elapsed": {"repr": "0:02:39.968492", "seconds": 159.968492}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 558, "message": "Creating PnLTotals...", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:03:58.261034+05:30", "timestamp": 1755783238.261034}}}
{"text": "2025-08-21 19:03:58.261 | DEBUG    | app.services.dhan_client:get_pnl:565 - PnLTotals created successfully\n", "record": {"elapsed": {"repr": "0:02:39.968964", "seconds": 159.968964}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 565, "message": "PnLTotals created successfully", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:03:58.261506+05:30", "timestamp": 1755783238.261506}}}
{"text": "2025-08-21 19:03:58.262 | DEBUG    | app.services.dhan_client:get_pnl:574 - Creating PnL model...\n", "record": {"elapsed": {"repr": "0:02:39.969644", "seconds": 159.969644}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 574, "message": "Creating PnL model...", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:03:58.262186+05:30", "timestamp": 1755783238.262186}}}
{"text": "2025-08-21 19:03:58.262 | DEBUG    | app.services.dhan_client:get_pnl:575 - Model fields: totals=<class 'app.models.schemas.PnLTotals'>, perSymbol=5, updated_at=2025-08-21 19:03:58.257095+05:30, trading_day=2025-08-21\n", "record": {"elapsed": {"repr": "0:02:39.970334", "seconds": 159.970334}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 575, "message": "Model fields: totals=<class 'app.models.schemas.PnLTotals'>, perSymbol=5, updated_at=2025-08-21 19:03:58.257095+05:30, trading_day=2025-08-21", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:03:58.262876+05:30", "timestamp": 1755783238.262876}}}
{"text": "2025-08-21 19:03:58.263 | DEBUG    | app.services.dhan_client:get_pnl:584 - Created PnL model: totals=PnLTotals(realized=0.0, unrealized=556491.36, day=556491.36, currency='INR') per_symbol=[PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1727, avg=618.93, ltp=347.27, unrealized=-469156.4, today_pnl=-469156.4), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=167, avg=948.57, ltp=1193.43, unrealized=-40891.66, today_pnl=-40891.66), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=1347, avg=801.44, ltp=1939.16, unrealized=1532503.76, today_pnl=1532503.76), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=143, avg=1427.62, ltp=1360.18, unrealized=9644.23, today_pnl=9644.23), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=438, avg=1994.48, ltp=908.62, unrealized=-475608.57, today_pnl=-475608.57)] updated_at=datetime.datetime(2025, 8, 21, 19, 3, 58, 257095, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))) trading_day='2025-08-21'\n", "record": {"elapsed": {"repr": "0:02:39.971222", "seconds": 159.971222}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 584, "message": "Created PnL model: totals=PnLTotals(realized=0.0, unrealized=556491.36, day=556491.36, currency='INR') per_symbol=[PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1727, avg=618.93, ltp=347.27, unrealized=-469156.4, today_pnl=-469156.4), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=167, avg=948.57, ltp=1193.43, unrealized=-40891.66, today_pnl=-40891.66), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=1347, avg=801.44, ltp=1939.16, unrealized=1532503.76, today_pnl=1532503.76), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=143, avg=1427.62, ltp=1360.18, unrealized=9644.23, today_pnl=9644.23), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=438, avg=1994.48, ltp=908.62, unrealized=-475608.57, today_pnl=-475608.57)] updated_at=datetime.datetime(2025, 8, 21, 19, 3, 58, 257095, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))) trading_day='2025-08-21'", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:03:58.263764+05:30", "timestamp": 1755783238.263764}}}
{"text": "2025-08-21 19:03:58.264 | DEBUG    | app.services.dhan_client:get_pnl:585 - PnL model fields: {'totals': PnLTotals(realized=0.0, unrealized=556491.36, day=556491.36, currency='INR'), 'per_symbol': [PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1727, avg=618.93, ltp=347.27, unrealized=-469156.4, today_pnl=-469156.4), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=167, avg=948.57, ltp=1193.43, unrealized=-40891.66, today_pnl=-40891.66), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=1347, avg=801.44, ltp=1939.16, unrealized=1532503.76, today_pnl=1532503.76), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=143, avg=1427.62, ltp=1360.18, unrealized=9644.23, today_pnl=9644.23), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=438, avg=1994.48, ltp=908.62, unrealized=-475608.57, today_pnl=-475608.57)], 'updated_at': datetime.datetime(2025, 8, 21, 19, 3, 58, 257095, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))), 'trading_day': '2025-08-21'}\n", "record": {"elapsed": {"repr": "0:02:39.972027", "seconds": 159.972027}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 585, "message": "PnL model fields: {'totals': PnLTotals(realized=0.0, unrealized=556491.36, day=556491.36, currency='INR'), 'per_symbol': [PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1727, avg=618.93, ltp=347.27, unrealized=-469156.4, today_pnl=-469156.4), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=167, avg=948.57, ltp=1193.43, unrealized=-40891.66, today_pnl=-40891.66), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=1347, avg=801.44, ltp=1939.16, unrealized=1532503.76, today_pnl=1532503.76), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=143, avg=1427.62, ltp=1360.18, unrealized=9644.23, today_pnl=9644.23), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=438, avg=1994.48, ltp=908.62, unrealized=-475608.57, today_pnl=-475608.57)], 'updated_at': datetime.datetime(2025, 8, 21, 19, 3, 58, 257095, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))), 'trading_day': '2025-08-21'}", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:03:58.264569+05:30", "timestamp": 1755783238.264569}}}
{"text": "2025-08-21 19:03:58.265 | INFO     | app.services.dhan_client:get_pnl:587 - P&L calculation completed successfully: 5 symbols, unrealized=‚Çπ556491.36\n", "record": {"elapsed": {"repr": "0:02:39.972642", "seconds": 159.972642}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 587, "message": "P&L calculation completed successfully: 5 symbols, unrealized=‚Çπ556491.36", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:03:58.265184+05:30", "timestamp": 1755783238.265184}}}
{"text": "2025-08-21 19:03:58.265 | DEBUG    | app.ws.live:emit_delta:408 - Emitted pnl delta: seq=176\n", "record": {"elapsed": {"repr": "0:02:39.973216", "seconds": 159.973216}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "emit_delta", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 408, "message": "Emitted pnl delta: seq=176", "module": "live", "name": "app.ws.live", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:03:58.265758+05:30", "timestamp": 1755783238.265758}}}
{"text": "2025-08-21 19:03:58.266 | DEBUG    | app.ws.live:emit_delta:408 - Emitted positions delta: seq=177\n", "record": {"elapsed": {"repr": "0:02:39.973854", "seconds": 159.973854}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "emit_delta", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 408, "message": "Emitted positions delta: seq=177", "module": "live", "name": "app.ws.live", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:03:58.266396+05:30", "timestamp": 1755783238.266396}}}
{"text": "2025-08-21 19:03:58.887 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:02:40.595036", "seconds": 160.595036}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:03:58.887578+05:30", "timestamp": 1755783238.887578}}}
{"text": "2025-08-21 19:03:58.888 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:02:40.595735", "seconds": 160.595735}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:03:58.888277+05:30", "timestamp": 1755783238.888277}}}
{"text": "2025-08-21 19:03:58.888 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:02:40.596303", "seconds": 160.596303}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:03:58.888845+05:30", "timestamp": 1755783238.888845}}}
{"text": "2025-08-21 19:03:58.889 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:02:40.596751", "seconds": 160.596751}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:03:58.889293+05:30", "timestamp": 1755783238.889293}}}
{"text": "2025-08-21 19:03:58.889 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:02:40.597172", "seconds": 160.597172}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:03:58.889714+05:30", "timestamp": 1755783238.889714}}}
{"text": "2025-08-21 19:03:58.890 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:02:40.597535", "seconds": 160.597535}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:03:58.890077+05:30", "timestamp": 1755783238.890077}}}
{"text": "2025-08-21 19:03:58.890 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:02:40.597906", "seconds": 160.597906}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:03:58.890448+05:30", "timestamp": 1755783238.890448}}}
{"text": "2025-08-21 19:03:58.890 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:02:40.598274", "seconds": 160.598274}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:03:58.890816+05:30", "timestamp": 1755783238.890816}}}
{"text": "2025-08-21 19:03:58.891 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:02:40.598717", "seconds": 160.598717}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:03:58.891259+05:30", "timestamp": 1755783238.891259}}}
{"text": "2025-08-21 19:03:58.891 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:02:40.599157", "seconds": 160.599157}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:03:58.891699+05:30", "timestamp": 1755783238.891699}}}
{"text": "2025-08-21 19:04:00.237 | INFO     | app.services.dhan_client:get_pnl:489 - Starting accurate P&L calculation\n", "record": {"elapsed": {"repr": "0:02:41.944741", "seconds": 161.944741}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 489, "message": "Starting accurate P&L calculation", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:04:00.237283+05:30", "timestamp": 1755783240.237283}}}
{"text": "2025-08-21 19:04:00.237 | INFO     | app.services.dhan_client:get_pnl:491 - Fetched 5 positions\n", "record": {"elapsed": {"repr": "0:02:41.945362", "seconds": 161.945362}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 491, "message": "Fetched 5 positions", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:04:00.237904+05:30", "timestamp": 1755783240.237904}}}
{"text": "2025-08-21 19:04:00.238 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for RELIANCE: unrealized=-465623.81, today=-465623.81\n", "record": {"elapsed": {"repr": "0:02:41.945906", "seconds": 161.945906}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for RELIANCE: unrealized=-465623.81, today=-465623.81", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:04:00.238448+05:30", "timestamp": 1755783240.238448}}}
{"text": "2025-08-21 19:04:00.238 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for TCS: unrealized=-38239.83, today=-38239.83\n", "record": {"elapsed": {"repr": "0:02:41.946322", "seconds": 161.946322}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for TCS: unrealized=-38239.83, today=-38239.83", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:04:00.238864+05:30", "timestamp": 1755783240.238864}}}
{"text": "2025-08-21 19:04:00.239 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for HDFC: unrealized=1519044.68, today=1519044.68\n", "record": {"elapsed": {"repr": "0:02:41.946716", "seconds": 161.946716}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for HDFC: unrealized=1519044.68, today=1519044.68", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:04:00.239258+05:30", "timestamp": 1755783240.239258}}}
{"text": "2025-08-21 19:04:00.239 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for INFY: unrealized=12709.47, today=12709.47\n", "record": {"elapsed": {"repr": "0:02:41.947180", "seconds": 161.94718}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for INFY: unrealized=12709.47, today=12709.47", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:04:00.239722+05:30", "timestamp": 1755783240.239722}}}
{"text": "2025-08-21 19:04:00.240 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for ICICIBANK: unrealized=-474072.49, today=-474072.49\n", "record": {"elapsed": {"repr": "0:02:41.947571", "seconds": 161.947571}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for ICICIBANK: unrealized=-474072.49, today=-474072.49", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:04:00.240113+05:30", "timestamp": 1755783240.240113}}}
{"text": "2025-08-21 19:04:00.240 | INFO     | app.services.dhan_client:get_pnl:545 - Calculated totals - realized: 0.0, unrealized: 553818.02, day: 553818.02\n", "record": {"elapsed": {"repr": "0:02:41.948040", "seconds": 161.94804}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 545, "message": "Calculated totals - realized: 0.0, unrealized: 553818.02, day: 553818.02", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:04:00.240582+05:30", "timestamp": 1755783240.240582}}}
{"text": "2025-08-21 19:04:00.241 | DEBUG    | app.services.dhan_client:get_pnl:554 - PnL consistency check passed: drift=‚Çπ0.00\n", "record": {"elapsed": {"repr": "0:02:41.948549", "seconds": 161.948549}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 554, "message": "PnL consistency check passed: drift=‚Çπ0.00", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:04:00.241091+05:30", "timestamp": 1755783240.241091}}}
{"text": "2025-08-21 19:04:00.241 | DEBUG    | app.services.dhan_client:get_pnl:558 - Creating PnLTotals...\n", "record": {"elapsed": {"repr": "0:02:41.949432", "seconds": 161.949432}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 558, "message": "Creating PnLTotals...", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:04:00.241974+05:30", "timestamp": 1755783240.241974}}}
{"text": "2025-08-21 19:04:00.242 | DEBUG    | app.services.dhan_client:get_pnl:565 - PnLTotals created successfully\n", "record": {"elapsed": {"repr": "0:02:41.949912", "seconds": 161.949912}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 565, "message": "PnLTotals created successfully", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:04:00.242454+05:30", "timestamp": 1755783240.242454}}}
{"text": "2025-08-21 19:04:00.242 | DEBUG    | app.services.dhan_client:get_pnl:574 - Creating PnL model...\n", "record": {"elapsed": {"repr": "0:02:41.950346", "seconds": 161.950346}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 574, "message": "Creating PnL model...", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:04:00.242888+05:30", "timestamp": 1755783240.242888}}}
{"text": "2025-08-21 19:04:00.243 | DEBUG    | app.services.dhan_client:get_pnl:575 - Model fields: totals=<class 'app.models.schemas.PnLTotals'>, perSymbol=5, updated_at=2025-08-21 19:04:00.238380+05:30, trading_day=2025-08-21\n", "record": {"elapsed": {"repr": "0:02:41.950819", "seconds": 161.950819}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 575, "message": "Model fields: totals=<class 'app.models.schemas.PnLTotals'>, perSymbol=5, updated_at=2025-08-21 19:04:00.238380+05:30, trading_day=2025-08-21", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:04:00.243361+05:30", "timestamp": 1755783240.243361}}}
{"text": "2025-08-21 19:04:00.244 | DEBUG    | app.services.dhan_client:get_pnl:584 - Created PnL model: totals=PnLTotals(realized=0.0, unrealized=553818.02, day=553818.02, currency='INR') per_symbol=[PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1727, avg=618.93, ltp=349.32, unrealized=-465623.81, today_pnl=-465623.81), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=167, avg=948.57, ltp=1177.55, unrealized=-38239.83, today_pnl=-38239.83), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=1347, avg=801.44, ltp=1929.16, unrealized=1519044.68, today_pnl=1519044.68), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=143, avg=1427.62, ltp=1338.74, unrealized=12709.47, today_pnl=12709.47), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=438, avg=1994.48, ltp=912.12, unrealized=-474072.49, today_pnl=-474072.49)] updated_at=datetime.datetime(2025, 8, 21, 19, 4, 0, 238380, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))) trading_day='2025-08-21'\n", "record": {"elapsed": {"repr": "0:02:41.951480", "seconds": 161.95148}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 584, "message": "Created PnL model: totals=PnLTotals(realized=0.0, unrealized=553818.02, day=553818.02, currency='INR') per_symbol=[PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1727, avg=618.93, ltp=349.32, unrealized=-465623.81, today_pnl=-465623.81), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=167, avg=948.57, ltp=1177.55, unrealized=-38239.83, today_pnl=-38239.83), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=1347, avg=801.44, ltp=1929.16, unrealized=1519044.68, today_pnl=1519044.68), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=143, avg=1427.62, ltp=1338.74, unrealized=12709.47, today_pnl=12709.47), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=438, avg=1994.48, ltp=912.12, unrealized=-474072.49, today_pnl=-474072.49)] updated_at=datetime.datetime(2025, 8, 21, 19, 4, 0, 238380, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))) trading_day='2025-08-21'", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:04:00.244022+05:30", "timestamp": 1755783240.244022}}}
{"text": "2025-08-21 19:04:00.244 | DEBUG    | app.services.dhan_client:get_pnl:585 - PnL model fields: {'totals': PnLTotals(realized=0.0, unrealized=553818.02, day=553818.02, currency='INR'), 'per_symbol': [PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1727, avg=618.93, ltp=349.32, unrealized=-465623.81, today_pnl=-465623.81), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=167, avg=948.57, ltp=1177.55, unrealized=-38239.83, today_pnl=-38239.83), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=1347, avg=801.44, ltp=1929.16, unrealized=1519044.68, today_pnl=1519044.68), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=143, avg=1427.62, ltp=1338.74, unrealized=12709.47, today_pnl=12709.47), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=438, avg=1994.48, ltp=912.12, unrealized=-474072.49, today_pnl=-474072.49)], 'updated_at': datetime.datetime(2025, 8, 21, 19, 4, 0, 238380, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))), 'trading_day': '2025-08-21'}\n", "record": {"elapsed": {"repr": "0:02:41.952415", "seconds": 161.952415}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 585, "message": "PnL model fields: {'totals': PnLTotals(realized=0.0, unrealized=553818.02, day=553818.02, currency='INR'), 'per_symbol': [PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1727, avg=618.93, ltp=349.32, unrealized=-465623.81, today_pnl=-465623.81), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=167, avg=948.57, ltp=1177.55, unrealized=-38239.83, today_pnl=-38239.83), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=1347, avg=801.44, ltp=1929.16, unrealized=1519044.68, today_pnl=1519044.68), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=143, avg=1427.62, ltp=1338.74, unrealized=12709.47, today_pnl=12709.47), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=438, avg=1994.48, ltp=912.12, unrealized=-474072.49, today_pnl=-474072.49)], 'updated_at': datetime.datetime(2025, 8, 21, 19, 4, 0, 238380, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))), 'trading_day': '2025-08-21'}", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:04:00.244957+05:30", "timestamp": 1755783240.244957}}}
{"text": "2025-08-21 19:04:00.245 | INFO     | app.services.dhan_client:get_pnl:587 - P&L calculation completed successfully: 5 symbols, unrealized=‚Çπ553818.02\n", "record": {"elapsed": {"repr": "0:02:41.953280", "seconds": 161.95328}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 587, "message": "P&L calculation completed successfully: 5 symbols, unrealized=‚Çπ553818.02", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:04:00.245822+05:30", "timestamp": 1755783240.245822}}}
{"text": "2025-08-21 19:04:00.246 | DEBUG    | app.ws.live:emit_delta:408 - Emitted pnl delta: seq=178\n", "record": {"elapsed": {"repr": "0:02:41.954045", "seconds": 161.954045}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "emit_delta", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 408, "message": "Emitted pnl delta: seq=178", "module": "live", "name": "app.ws.live", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:04:00.246587+05:30", "timestamp": 1755783240.246587}}}
{"text": "2025-08-21 19:04:00.247 | DEBUG    | app.ws.live:emit_delta:408 - Emitted positions delta: seq=179\n", "record": {"elapsed": {"repr": "0:02:41.954709", "seconds": 161.954709}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "emit_delta", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 408, "message": "Emitted positions delta: seq=179", "module": "live", "name": "app.ws.live", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:04:00.247251+05:30", "timestamp": 1755783240.247251}}}
{"text": "2025-08-21 19:04:00.892 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:02:42.600175", "seconds": 162.600175}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:04:00.892717+05:30", "timestamp": 1755783240.892717}}}
{"text": "2025-08-21 19:04:00.893 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:02:42.601130", "seconds": 162.60113}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:04:00.893672+05:30", "timestamp": 1755783240.893672}}}
{"text": "2025-08-21 19:04:00.894 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:02:42.602032", "seconds": 162.602032}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:04:00.894574+05:30", "timestamp": 1755783240.894574}}}
{"text": "2025-08-21 19:04:00.895 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:02:42.602743", "seconds": 162.602743}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:04:00.895285+05:30", "timestamp": 1755783240.895285}}}
{"text": "2025-08-21 19:04:00.895 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:02:42.603340", "seconds": 162.60334}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:04:00.895882+05:30", "timestamp": 1755783240.895882}}}
{"text": "2025-08-21 19:04:00.896 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:02:42.603790", "seconds": 162.60379}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:04:00.896332+05:30", "timestamp": 1755783240.896332}}}
{"text": "2025-08-21 19:04:00.896 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:02:42.604438", "seconds": 162.604438}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:04:00.896980+05:30", "timestamp": 1755783240.89698}}}
{"text": "2025-08-21 19:04:00.897 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:02:42.604997", "seconds": 162.604997}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:04:00.897539+05:30", "timestamp": 1755783240.897539}}}
{"text": "2025-08-21 19:04:00.898 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:02:42.605586", "seconds": 162.605586}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:04:00.898128+05:30", "timestamp": 1755783240.898128}}}
{"text": "2025-08-21 19:04:00.898 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:02:42.606285", "seconds": 162.606285}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:04:00.898827+05:30", "timestamp": 1755783240.898827}}}
{"text": "2025-08-21 19:04:02.194 | INFO     | app.services.dhan_client:get_pnl:489 - Starting accurate P&L calculation\n", "record": {"elapsed": {"repr": "0:02:43.902002", "seconds": 163.902002}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 489, "message": "Starting accurate P&L calculation", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:04:02.194544+05:30", "timestamp": 1755783242.194544}}}
{"text": "2025-08-21 19:04:02.195 | INFO     | app.services.dhan_client:get_pnl:491 - Fetched 5 positions\n", "record": {"elapsed": {"repr": "0:02:43.902809", "seconds": 163.902809}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 491, "message": "Fetched 5 positions", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:04:02.195351+05:30", "timestamp": 1755783242.195351}}}
{"text": "2025-08-21 19:04:02.195 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for RELIANCE: unrealized=-466123.28, today=-466123.28\n", "record": {"elapsed": {"repr": "0:02:43.903409", "seconds": 163.903409}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for RELIANCE: unrealized=-466123.28, today=-466123.28", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:04:02.195951+05:30", "timestamp": 1755783242.195951}}}
{"text": "2025-08-21 19:04:02.196 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for TCS: unrealized=-41909.6, today=-41909.6\n", "record": {"elapsed": {"repr": "0:02:43.903953", "seconds": 163.903953}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for TCS: unrealized=-41909.6, today=-41909.6", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:04:02.196495+05:30", "timestamp": 1755783242.196495}}}
{"text": "2025-08-21 19:04:02.197 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for HDFC: unrealized=1499547.87, today=1499547.87\n", "record": {"elapsed": {"repr": "0:02:43.904470", "seconds": 163.90447}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for HDFC: unrealized=1499547.87, today=1499547.87", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:04:02.197012+05:30", "timestamp": 1755783242.197012}}}
{"text": "2025-08-21 19:04:02.197 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for INFY: unrealized=14122.9, today=14122.9\n", "record": {"elapsed": {"repr": "0:02:43.905101", "seconds": 163.905101}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for INFY: unrealized=14122.9, today=14122.9", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:04:02.197643+05:30", "timestamp": 1755783242.197643}}}
{"text": "2025-08-21 19:04:02.198 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for ICICIBANK: unrealized=-469623.79, today=-469623.79\n", "record": {"elapsed": {"repr": "0:02:43.905711", "seconds": 163.905711}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for ICICIBANK: unrealized=-469623.79, today=-469623.79", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:04:02.198253+05:30", "timestamp": 1755783242.198253}}}
{"text": "2025-08-21 19:04:02.199 | INFO     | app.services.dhan_client:get_pnl:545 - Calculated totals - realized: 0.0, unrealized: 536014.1, day: 536014.1\n", "record": {"elapsed": {"repr": "0:02:43.906607", "seconds": 163.906607}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 545, "message": "Calculated totals - realized: 0.0, unrealized: 536014.1, day: 536014.1", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:04:02.199149+05:30", "timestamp": 1755783242.199149}}}
{"text": "2025-08-21 19:04:02.199 | DEBUG    | app.services.dhan_client:get_pnl:554 - PnL consistency check passed: drift=‚Çπ0.00\n", "record": {"elapsed": {"repr": "0:02:43.907257", "seconds": 163.907257}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 554, "message": "PnL consistency check passed: drift=‚Çπ0.00", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:04:02.199799+05:30", "timestamp": 1755783242.199799}}}
{"text": "2025-08-21 19:04:02.200 | DEBUG    | app.services.dhan_client:get_pnl:558 - Creating PnLTotals...\n", "record": {"elapsed": {"repr": "0:02:43.907744", "seconds": 163.907744}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 558, "message": "Creating PnLTotals...", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:04:02.200286+05:30", "timestamp": 1755783242.200286}}}
{"text": "2025-08-21 19:04:02.200 | DEBUG    | app.services.dhan_client:get_pnl:565 - PnLTotals created successfully\n", "record": {"elapsed": {"repr": "0:02:43.908242", "seconds": 163.908242}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 565, "message": "PnLTotals created successfully", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:04:02.200784+05:30", "timestamp": 1755783242.200784}}}
{"text": "2025-08-21 19:04:02.201 | DEBUG    | app.services.dhan_client:get_pnl:574 - Creating PnL model...\n", "record": {"elapsed": {"repr": "0:02:43.908887", "seconds": 163.908887}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 574, "message": "Creating PnL model...", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:04:02.201429+05:30", "timestamp": 1755783242.201429}}}
{"text": "2025-08-21 19:04:02.202 | DEBUG    | app.services.dhan_client:get_pnl:575 - Model fields: totals=<class 'app.models.schemas.PnLTotals'>, perSymbol=5, updated_at=2025-08-21 19:04:02.195882+05:30, trading_day=2025-08-21\n", "record": {"elapsed": {"repr": "0:02:43.909697", "seconds": 163.909697}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 575, "message": "Model fields: totals=<class 'app.models.schemas.PnLTotals'>, perSymbol=5, updated_at=2025-08-21 19:04:02.195882+05:30, trading_day=2025-08-21", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:04:02.202239+05:30", "timestamp": 1755783242.202239}}}
{"text": "2025-08-21 19:04:02.203 | DEBUG    | app.services.dhan_client:get_pnl:584 - Created PnL model: totals=PnLTotals(realized=0.0, unrealized=536014.1, day=536014.1, currency='INR') per_symbol=[PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1727, avg=618.93, ltp=349.03, unrealized=-466123.28, today_pnl=-466123.28), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=167, avg=948.57, ltp=1199.53, unrealized=-41909.6, today_pnl=-41909.6), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=1347, avg=801.44, ltp=1914.69, unrealized=1499547.87, today_pnl=1499547.87), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=143, avg=1427.62, ltp=1328.86, unrealized=14122.9, today_pnl=14122.9), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=438, avg=1994.48, ltp=922.28, unrealized=-469623.79, today_pnl=-469623.79)] updated_at=datetime.datetime(2025, 8, 21, 19, 4, 2, 195882, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))) trading_day='2025-08-21'\n", "record": {"elapsed": {"repr": "0:02:43.910960", "seconds": 163.91096}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 584, "message": "Created PnL model: totals=PnLTotals(realized=0.0, unrealized=536014.1, day=536014.1, currency='INR') per_symbol=[PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1727, avg=618.93, ltp=349.03, unrealized=-466123.28, today_pnl=-466123.28), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=167, avg=948.57, ltp=1199.53, unrealized=-41909.6, today_pnl=-41909.6), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=1347, avg=801.44, ltp=1914.69, unrealized=1499547.87, today_pnl=1499547.87), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=143, avg=1427.62, ltp=1328.86, unrealized=14122.9, today_pnl=14122.9), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=438, avg=1994.48, ltp=922.28, unrealized=-469623.79, today_pnl=-469623.79)] updated_at=datetime.datetime(2025, 8, 21, 19, 4, 2, 195882, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))) trading_day='2025-08-21'", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:04:02.203502+05:30", "timestamp": 1755783242.203502}}}
{"text": "2025-08-21 19:04:02.204 | DEBUG    | app.services.dhan_client:get_pnl:585 - PnL model fields: {'totals': PnLTotals(realized=0.0, unrealized=536014.1, day=536014.1, currency='INR'), 'per_symbol': [PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1727, avg=618.93, ltp=349.03, unrealized=-466123.28, today_pnl=-466123.28), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=167, avg=948.57, ltp=1199.53, unrealized=-41909.6, today_pnl=-41909.6), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=1347, avg=801.44, ltp=1914.69, unrealized=1499547.87, today_pnl=1499547.87), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=143, avg=1427.62, ltp=1328.86, unrealized=14122.9, today_pnl=14122.9), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=438, avg=1994.48, ltp=922.28, unrealized=-469623.79, today_pnl=-469623.79)], 'updated_at': datetime.datetime(2025, 8, 21, 19, 4, 2, 195882, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))), 'trading_day': '2025-08-21'}\n", "record": {"elapsed": {"repr": "0:02:43.911838", "seconds": 163.911838}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 585, "message": "PnL model fields: {'totals': PnLTotals(realized=0.0, unrealized=536014.1, day=536014.1, currency='INR'), 'per_symbol': [PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1727, avg=618.93, ltp=349.03, unrealized=-466123.28, today_pnl=-466123.28), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=167, avg=948.57, ltp=1199.53, unrealized=-41909.6, today_pnl=-41909.6), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=1347, avg=801.44, ltp=1914.69, unrealized=1499547.87, today_pnl=1499547.87), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=143, avg=1427.62, ltp=1328.86, unrealized=14122.9, today_pnl=14122.9), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=438, avg=1994.48, ltp=922.28, unrealized=-469623.79, today_pnl=-469623.79)], 'updated_at': datetime.datetime(2025, 8, 21, 19, 4, 2, 195882, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))), 'trading_day': '2025-08-21'}", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:04:02.204380+05:30", "timestamp": 1755783242.20438}}}
{"text": "2025-08-21 19:04:02.205 | INFO     | app.services.dhan_client:get_pnl:587 - P&L calculation completed successfully: 5 symbols, unrealized=‚Çπ536014.10\n", "record": {"elapsed": {"repr": "0:02:43.912867", "seconds": 163.912867}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 587, "message": "P&L calculation completed successfully: 5 symbols, unrealized=‚Çπ536014.10", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:04:02.205409+05:30", "timestamp": 1755783242.205409}}}
{"text": "2025-08-21 19:04:02.207 | DEBUG    | app.ws.live:emit_delta:408 - Emitted pnl delta: seq=180\n", "record": {"elapsed": {"repr": "0:02:43.914927", "seconds": 163.914927}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "emit_delta", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 408, "message": "Emitted pnl delta: seq=180", "module": "live", "name": "app.ws.live", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:04:02.207469+05:30", "timestamp": 1755783242.207469}}}
{"text": "2025-08-21 19:04:02.208 | DEBUG    | app.ws.live:emit_delta:408 - Emitted positions delta: seq=181\n", "record": {"elapsed": {"repr": "0:02:43.915898", "seconds": 163.915898}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "emit_delta", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 408, "message": "Emitted positions delta: seq=181", "module": "live", "name": "app.ws.live", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:04:02.208440+05:30", "timestamp": 1755783242.20844}}}
{"text": "2025-08-21 19:04:02.900 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:02:44.607885", "seconds": 164.607885}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:04:02.900427+05:30", "timestamp": 1755783242.900427}}}
{"text": "2025-08-21 19:04:02.901 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:02:44.608807", "seconds": 164.608807}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:04:02.901349+05:30", "timestamp": 1755783242.901349}}}
{"text": "2025-08-21 19:04:02.902 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:02:44.609468", "seconds": 164.609468}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:04:02.902010+05:30", "timestamp": 1755783242.90201}}}
{"text": "2025-08-21 19:04:02.902 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:02:44.609982", "seconds": 164.609982}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:04:02.902524+05:30", "timestamp": 1755783242.902524}}}
{"text": "2025-08-21 19:04:02.902 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:02:44.610431", "seconds": 164.610431}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:04:02.902973+05:30", "timestamp": 1755783242.902973}}}
{"text": "2025-08-21 19:04:02.903 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:02:44.610859", "seconds": 164.610859}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:04:02.903401+05:30", "timestamp": 1755783242.903401}}}
{"text": "2025-08-21 19:04:02.903 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:02:44.611285", "seconds": 164.611285}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:04:02.903827+05:30", "timestamp": 1755783242.903827}}}
{"text": "2025-08-21 19:04:02.904 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:02:44.611709", "seconds": 164.611709}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:04:02.904251+05:30", "timestamp": 1755783242.904251}}}
{"text": "2025-08-21 19:04:02.904 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:02:44.612088", "seconds": 164.612088}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:04:02.904630+05:30", "timestamp": 1755783242.90463}}}
{"text": "2025-08-21 19:04:02.905 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:02:44.612594", "seconds": 164.612594}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:04:02.905136+05:30", "timestamp": 1755783242.905136}}}
{"text": "2025-08-21 19:04:04.137 | INFO     | app.services.dhan_client:get_pnl:489 - Starting accurate P&L calculation\n", "record": {"elapsed": {"repr": "0:02:45.844563", "seconds": 165.844563}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 489, "message": "Starting accurate P&L calculation", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:04:04.137105+05:30", "timestamp": 1755783244.137105}}}
{"text": "2025-08-21 19:04:04.137 | INFO     | app.services.dhan_client:get_pnl:491 - Fetched 5 positions\n", "record": {"elapsed": {"repr": "0:02:45.845103", "seconds": 165.845103}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 491, "message": "Fetched 5 positions", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:04:04.137645+05:30", "timestamp": 1755783244.137645}}}
{"text": "2025-08-21 19:04:04.138 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for RELIANCE: unrealized=-454445.52, today=-454445.52\n", "record": {"elapsed": {"repr": "0:02:45.845658", "seconds": 165.845658}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for RELIANCE: unrealized=-454445.52, today=-454445.52", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:04:04.138200+05:30", "timestamp": 1755783244.1382}}}
{"text": "2025-08-21 19:04:04.138 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for TCS: unrealized=-44641.3, today=-44641.3\n", "record": {"elapsed": {"repr": "0:02:45.846308", "seconds": 165.846308}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for TCS: unrealized=-44641.3, today=-44641.3", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:04:04.138850+05:30", "timestamp": 1755783244.13885}}}
{"text": "2025-08-21 19:04:04.139 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for HDFC: unrealized=1546266.18, today=1546266.18\n", "record": {"elapsed": {"repr": "0:02:45.847121", "seconds": 165.847121}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for HDFC: unrealized=1546266.18, today=1546266.18", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:04:04.139663+05:30", "timestamp": 1755783244.139663}}}
{"text": "2025-08-21 19:04:04.140 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for INFY: unrealized=13180.07, today=13180.07\n", "record": {"elapsed": {"repr": "0:02:45.847654", "seconds": 165.847654}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for INFY: unrealized=13180.07, today=13180.07", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:04:04.140196+05:30", "timestamp": 1755783244.140196}}}
{"text": "2025-08-21 19:04:04.140 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for ICICIBANK: unrealized=-465198.23, today=-465198.23\n", "record": {"elapsed": {"repr": "0:02:45.848078", "seconds": 165.848078}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for ICICIBANK: unrealized=-465198.23, today=-465198.23", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:04:04.140620+05:30", "timestamp": 1755783244.14062}}}
{"text": "2025-08-21 19:04:04.141 | INFO     | app.services.dhan_client:get_pnl:545 - Calculated totals - realized: 0.0, unrealized: 595161.2, day: 595161.2\n", "record": {"elapsed": {"repr": "0:02:45.848597", "seconds": 165.848597}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 545, "message": "Calculated totals - realized: 0.0, unrealized: 595161.2, day: 595161.2", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:04:04.141139+05:30", "timestamp": 1755783244.141139}}}
{"text": "2025-08-21 19:04:04.141 | DEBUG    | app.services.dhan_client:get_pnl:554 - PnL consistency check passed: drift=‚Çπ0.00\n", "record": {"elapsed": {"repr": "0:02:45.849061", "seconds": 165.849061}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 554, "message": "PnL consistency check passed: drift=‚Çπ0.00", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:04:04.141603+05:30", "timestamp": 1755783244.141603}}}
{"text": "2025-08-21 19:04:04.142 | DEBUG    | app.services.dhan_client:get_pnl:558 - Creating PnLTotals...\n", "record": {"elapsed": {"repr": "0:02:45.849729", "seconds": 165.849729}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 558, "message": "Creating PnLTotals...", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:04:04.142271+05:30", "timestamp": 1755783244.142271}}}
{"text": "2025-08-21 19:04:04.143 | DEBUG    | app.services.dhan_client:get_pnl:565 - PnLTotals created successfully\n", "record": {"elapsed": {"repr": "0:02:45.850670", "seconds": 165.85067}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 565, "message": "PnLTotals created successfully", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:04:04.143212+05:30", "timestamp": 1755783244.143212}}}
{"text": "2025-08-21 19:04:04.143 | DEBUG    | app.services.dhan_client:get_pnl:574 - Creating PnL model...\n", "record": {"elapsed": {"repr": "0:02:45.851259", "seconds": 165.851259}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 574, "message": "Creating PnL model...", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:04:04.143801+05:30", "timestamp": 1755783244.143801}}}
{"text": "2025-08-21 19:04:04.144 | DEBUG    | app.services.dhan_client:get_pnl:575 - Model fields: totals=<class 'app.models.schemas.PnLTotals'>, perSymbol=5, updated_at=2025-08-21 19:04:04.138127+05:30, trading_day=2025-08-21\n", "record": {"elapsed": {"repr": "0:02:45.851717", "seconds": 165.851717}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 575, "message": "Model fields: totals=<class 'app.models.schemas.PnLTotals'>, perSymbol=5, updated_at=2025-08-21 19:04:04.138127+05:30, trading_day=2025-08-21", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:04:04.144259+05:30", "timestamp": 1755783244.144259}}}
{"text": "2025-08-21 19:04:04.144 | DEBUG    | app.services.dhan_client:get_pnl:584 - Created PnL model: totals=PnLTotals(realized=0.0, unrealized=595161.2, day=595161.2, currency='INR') per_symbol=[PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1727, avg=618.93, ltp=355.79, unrealized=-454445.52, today_pnl=-454445.52), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=167, avg=948.57, ltp=1215.88, unrealized=-44641.3, today_pnl=-44641.3), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=1347, avg=801.44, ltp=1949.37, unrealized=1546266.18, today_pnl=1546266.18), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=143, avg=1427.62, ltp=1335.45, unrealized=13180.07, today_pnl=13180.07), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=438, avg=1994.48, ltp=932.38, unrealized=-465198.23, today_pnl=-465198.23)] updated_at=datetime.datetime(2025, 8, 21, 19, 4, 4, 138127, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))) trading_day='2025-08-21'\n", "record": {"elapsed": {"repr": "0:02:45.852400", "seconds": 165.8524}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 584, "message": "Created PnL model: totals=PnLTotals(realized=0.0, unrealized=595161.2, day=595161.2, currency='INR') per_symbol=[PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1727, avg=618.93, ltp=355.79, unrealized=-454445.52, today_pnl=-454445.52), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=167, avg=948.57, ltp=1215.88, unrealized=-44641.3, today_pnl=-44641.3), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=1347, avg=801.44, ltp=1949.37, unrealized=1546266.18, today_pnl=1546266.18), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=143, avg=1427.62, ltp=1335.45, unrealized=13180.07, today_pnl=13180.07), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=438, avg=1994.48, ltp=932.38, unrealized=-465198.23, today_pnl=-465198.23)] updated_at=datetime.datetime(2025, 8, 21, 19, 4, 4, 138127, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))) trading_day='2025-08-21'", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:04:04.144942+05:30", "timestamp": 1755783244.144942}}}
{"text": "2025-08-21 19:04:04.145 | DEBUG    | app.services.dhan_client:get_pnl:585 - PnL model fields: {'totals': PnLTotals(realized=0.0, unrealized=595161.2, day=595161.2, currency='INR'), 'per_symbol': [PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1727, avg=618.93, ltp=355.79, unrealized=-454445.52, today_pnl=-454445.52), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=167, avg=948.57, ltp=1215.88, unrealized=-44641.3, today_pnl=-44641.3), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=1347, avg=801.44, ltp=1949.37, unrealized=1546266.18, today_pnl=1546266.18), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=143, avg=1427.62, ltp=1335.45, unrealized=13180.07, today_pnl=13180.07), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=438, avg=1994.48, ltp=932.38, unrealized=-465198.23, today_pnl=-465198.23)], 'updated_at': datetime.datetime(2025, 8, 21, 19, 4, 4, 138127, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))), 'trading_day': '2025-08-21'}\n", "record": {"elapsed": {"repr": "0:02:45.853118", "seconds": 165.853118}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 585, "message": "PnL model fields: {'totals': PnLTotals(realized=0.0, unrealized=595161.2, day=595161.2, currency='INR'), 'per_symbol': [PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1727, avg=618.93, ltp=355.79, unrealized=-454445.52, today_pnl=-454445.52), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=167, avg=948.57, ltp=1215.88, unrealized=-44641.3, today_pnl=-44641.3), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=1347, avg=801.44, ltp=1949.37, unrealized=1546266.18, today_pnl=1546266.18), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=143, avg=1427.62, ltp=1335.45, unrealized=13180.07, today_pnl=13180.07), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=438, avg=1994.48, ltp=932.38, unrealized=-465198.23, today_pnl=-465198.23)], 'updated_at': datetime.datetime(2025, 8, 21, 19, 4, 4, 138127, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))), 'trading_day': '2025-08-21'}", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:04:04.145660+05:30", "timestamp": 1755783244.14566}}}
{"text": "2025-08-21 19:04:04.146 | INFO     | app.services.dhan_client:get_pnl:587 - P&L calculation completed successfully: 5 symbols, unrealized=‚Çπ595161.20\n", "record": {"elapsed": {"repr": "0:02:45.853851", "seconds": 165.853851}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 587, "message": "P&L calculation completed successfully: 5 symbols, unrealized=‚Çπ595161.20", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:04:04.146393+05:30", "timestamp": 1755783244.146393}}}
{"text": "2025-08-21 19:04:04.147 | DEBUG    | app.ws.live:emit_delta:408 - Emitted pnl delta: seq=182\n", "record": {"elapsed": {"repr": "0:02:45.854672", "seconds": 165.854672}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "emit_delta", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 408, "message": "Emitted pnl delta: seq=182", "module": "live", "name": "app.ws.live", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:04:04.147214+05:30", "timestamp": 1755783244.147214}}}
{"text": "2025-08-21 19:04:04.148 | DEBUG    | app.ws.live:emit_delta:408 - Emitted positions delta: seq=183\n", "record": {"elapsed": {"repr": "0:02:45.855758", "seconds": 165.855758}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "emit_delta", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 408, "message": "Emitted positions delta: seq=183", "module": "live", "name": "app.ws.live", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:04:04.148300+05:30", "timestamp": 1755783244.1483}}}
{"text": "2025-08-21 19:04:04.906 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:02:46.613729", "seconds": 166.613729}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:04:04.906271+05:30", "timestamp": 1755783244.906271}}}
{"text": "2025-08-21 19:04:04.907 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:02:46.614540", "seconds": 166.61454}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:04:04.907082+05:30", "timestamp": 1755783244.907082}}}
{"text": "2025-08-21 19:04:04.907 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:02:46.615297", "seconds": 166.615297}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:04:04.907839+05:30", "timestamp": 1755783244.907839}}}
{"text": "2025-08-21 19:04:04.909 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:02:46.616524", "seconds": 166.616524}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:04:04.909066+05:30", "timestamp": 1755783244.909066}}}
{"text": "2025-08-21 19:04:04.909 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:02:46.617326", "seconds": 166.617326}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:04:04.909868+05:30", "timestamp": 1755783244.909868}}}
{"text": "2025-08-21 19:04:04.910 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:02:46.618064", "seconds": 166.618064}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:04:04.910606+05:30", "timestamp": 1755783244.910606}}}
{"text": "2025-08-21 19:04:04.911 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:02:46.618636", "seconds": 166.618636}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:04:04.911178+05:30", "timestamp": 1755783244.911178}}}
{"text": "2025-08-21 19:04:04.911 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:02:46.619147", "seconds": 166.619147}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:04:04.911689+05:30", "timestamp": 1755783244.911689}}}
{"text": "2025-08-21 19:04:04.912 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:02:46.619726", "seconds": 166.619726}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:04:04.912268+05:30", "timestamp": 1755783244.912268}}}
{"text": "2025-08-21 19:04:04.912 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:02:46.620417", "seconds": 166.620417}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:04:04.912959+05:30", "timestamp": 1755783244.912959}}}
{"text": "2025-08-21 19:04:06.046 | INFO     | app.services.dhan_client:get_pnl:489 - Starting accurate P&L calculation\n", "record": {"elapsed": {"repr": "0:02:47.753709", "seconds": 167.753709}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 489, "message": "Starting accurate P&L calculation", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:04:06.046251+05:30", "timestamp": 1755783246.046251}}}
{"text": "2025-08-21 19:04:06.047 | INFO     | app.services.dhan_client:get_pnl:491 - Fetched 5 positions\n", "record": {"elapsed": {"repr": "0:02:47.754871", "seconds": 167.754871}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 491, "message": "Fetched 5 positions", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:04:06.047413+05:30", "timestamp": 1755783246.047413}}}
{"text": "2025-08-21 19:04:06.047 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for RELIANCE: unrealized=-466342.76, today=-466342.76\n", "record": {"elapsed": {"repr": "0:02:47.755403", "seconds": 167.755403}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for RELIANCE: unrealized=-466342.76, today=-466342.76", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:04:06.047945+05:30", "timestamp": 1755783246.047945}}}
{"text": "2025-08-21 19:04:06.048 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for TCS: unrealized=-41746.11, today=-41746.11\n", "record": {"elapsed": {"repr": "0:02:47.755879", "seconds": 167.755879}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for TCS: unrealized=-41746.11, today=-41746.11", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:04:06.048421+05:30", "timestamp": 1755783246.048421}}}
{"text": "2025-08-21 19:04:06.048 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for HDFC: unrealized=1518881.17, today=1518881.17\n", "record": {"elapsed": {"repr": "0:02:47.756450", "seconds": 167.75645}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for HDFC: unrealized=1518881.17, today=1518881.17", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:04:06.048992+05:30", "timestamp": 1755783246.048992}}}
{"text": "2025-08-21 19:04:06.049 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for INFY: unrealized=14115.35, today=14115.35\n", "record": {"elapsed": {"repr": "0:02:47.757219", "seconds": 167.757219}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for INFY: unrealized=14115.35, today=14115.35", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:04:06.049761+05:30", "timestamp": 1755783246.049761}}}
{"text": "2025-08-21 19:04:06.050 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for ICICIBANK: unrealized=-468764.1, today=-468764.1\n", "record": {"elapsed": {"repr": "0:02:47.758421", "seconds": 167.758421}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for ICICIBANK: unrealized=-468764.1, today=-468764.1", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:04:06.050963+05:30", "timestamp": 1755783246.050963}}}
{"text": "2025-08-21 19:04:06.051 | INFO     | app.services.dhan_client:get_pnl:545 - Calculated totals - realized: 0.0, unrealized: 556143.55, day: 556143.55\n", "record": {"elapsed": {"repr": "0:02:47.758952", "seconds": 167.758952}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 545, "message": "Calculated totals - realized: 0.0, unrealized: 556143.55, day: 556143.55", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:04:06.051494+05:30", "timestamp": 1755783246.051494}}}
{"text": "2025-08-21 19:04:06.052 | DEBUG    | app.services.dhan_client:get_pnl:554 - PnL consistency check passed: drift=‚Çπ0.00\n", "record": {"elapsed": {"repr": "0:02:47.759498", "seconds": 167.759498}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 554, "message": "PnL consistency check passed: drift=‚Çπ0.00", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:04:06.052040+05:30", "timestamp": 1755783246.05204}}}
{"text": "2025-08-21 19:04:06.052 | DEBUG    | app.services.dhan_client:get_pnl:558 - Creating PnLTotals...\n", "record": {"elapsed": {"repr": "0:02:47.760058", "seconds": 167.760058}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 558, "message": "Creating PnLTotals...", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:04:06.052600+05:30", "timestamp": 1755783246.0526}}}
{"text": "2025-08-21 19:04:06.053 | DEBUG    | app.services.dhan_client:get_pnl:565 - PnLTotals created successfully\n", "record": {"elapsed": {"repr": "0:02:47.760607", "seconds": 167.760607}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 565, "message": "PnLTotals created successfully", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:04:06.053149+05:30", "timestamp": 1755783246.053149}}}
{"text": "2025-08-21 19:04:06.053 | DEBUG    | app.services.dhan_client:get_pnl:574 - Creating PnL model...\n", "record": {"elapsed": {"repr": "0:02:47.761095", "seconds": 167.761095}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 574, "message": "Creating PnL model...", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:04:06.053637+05:30", "timestamp": 1755783246.053637}}}
{"text": "2025-08-21 19:04:06.054 | DEBUG    | app.services.dhan_client:get_pnl:575 - Model fields: totals=<class 'app.models.schemas.PnLTotals'>, perSymbol=5, updated_at=2025-08-21 19:04:06.047883+05:30, trading_day=2025-08-21\n", "record": {"elapsed": {"repr": "0:02:47.761560", "seconds": 167.76156}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 575, "message": "Model fields: totals=<class 'app.models.schemas.PnLTotals'>, perSymbol=5, updated_at=2025-08-21 19:04:06.047883+05:30, trading_day=2025-08-21", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:04:06.054102+05:30", "timestamp": 1755783246.054102}}}
{"text": "2025-08-21 19:04:06.055 | DEBUG    | app.services.dhan_client:get_pnl:584 - Created PnL model: totals=PnLTotals(realized=0.0, unrealized=556143.55, day=556143.55, currency='INR') per_symbol=[PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1727, avg=618.93, ltp=348.9, unrealized=-466342.76, today_pnl=-466342.76), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=167, avg=948.57, ltp=1198.55, unrealized=-41746.11, today_pnl=-41746.11), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=1347, avg=801.44, ltp=1929.04, unrealized=1518881.17, today_pnl=1518881.17), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=143, avg=1427.62, ltp=1328.91, unrealized=14115.35, today_pnl=14115.35), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=438, avg=1994.48, ltp=924.24, unrealized=-468764.1, today_pnl=-468764.1)] updated_at=datetime.datetime(2025, 8, 21, 19, 4, 6, 47883, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))) trading_day='2025-08-21'\n", "record": {"elapsed": {"repr": "0:02:47.762469", "seconds": 167.762469}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 584, "message": "Created PnL model: totals=PnLTotals(realized=0.0, unrealized=556143.55, day=556143.55, currency='INR') per_symbol=[PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1727, avg=618.93, ltp=348.9, unrealized=-466342.76, today_pnl=-466342.76), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=167, avg=948.57, ltp=1198.55, unrealized=-41746.11, today_pnl=-41746.11), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=1347, avg=801.44, ltp=1929.04, unrealized=1518881.17, today_pnl=1518881.17), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=143, avg=1427.62, ltp=1328.91, unrealized=14115.35, today_pnl=14115.35), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=438, avg=1994.48, ltp=924.24, unrealized=-468764.1, today_pnl=-468764.1)] updated_at=datetime.datetime(2025, 8, 21, 19, 4, 6, 47883, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))) trading_day='2025-08-21'", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:04:06.055011+05:30", "timestamp": 1755783246.055011}}}
{"text": "2025-08-21 19:04:06.056 | DEBUG    | app.services.dhan_client:get_pnl:585 - PnL model fields: {'totals': PnLTotals(realized=0.0, unrealized=556143.55, day=556143.55, currency='INR'), 'per_symbol': [PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1727, avg=618.93, ltp=348.9, unrealized=-466342.76, today_pnl=-466342.76), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=167, avg=948.57, ltp=1198.55, unrealized=-41746.11, today_pnl=-41746.11), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=1347, avg=801.44, ltp=1929.04, unrealized=1518881.17, today_pnl=1518881.17), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=143, avg=1427.62, ltp=1328.91, unrealized=14115.35, today_pnl=14115.35), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=438, avg=1994.48, ltp=924.24, unrealized=-468764.1, today_pnl=-468764.1)], 'updated_at': datetime.datetime(2025, 8, 21, 19, 4, 6, 47883, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))), 'trading_day': '2025-08-21'}\n", "record": {"elapsed": {"repr": "0:02:47.763745", "seconds": 167.763745}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 585, "message": "PnL model fields: {'totals': PnLTotals(realized=0.0, unrealized=556143.55, day=556143.55, currency='INR'), 'per_symbol': [PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1727, avg=618.93, ltp=348.9, unrealized=-466342.76, today_pnl=-466342.76), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=167, avg=948.57, ltp=1198.55, unrealized=-41746.11, today_pnl=-41746.11), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=1347, avg=801.44, ltp=1929.04, unrealized=1518881.17, today_pnl=1518881.17), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=143, avg=1427.62, ltp=1328.91, unrealized=14115.35, today_pnl=14115.35), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=438, avg=1994.48, ltp=924.24, unrealized=-468764.1, today_pnl=-468764.1)], 'updated_at': datetime.datetime(2025, 8, 21, 19, 4, 6, 47883, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))), 'trading_day': '2025-08-21'}", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:04:06.056287+05:30", "timestamp": 1755783246.056287}}}
{"text": "2025-08-21 19:04:06.057 | INFO     | app.services.dhan_client:get_pnl:587 - P&L calculation completed successfully: 5 symbols, unrealized=‚Çπ556143.55\n", "record": {"elapsed": {"repr": "0:02:47.764778", "seconds": 167.764778}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 587, "message": "P&L calculation completed successfully: 5 symbols, unrealized=‚Çπ556143.55", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:04:06.057320+05:30", "timestamp": 1755783246.05732}}}
{"text": "2025-08-21 19:04:06.058 | DEBUG    | app.ws.live:emit_delta:408 - Emitted pnl delta: seq=184\n", "record": {"elapsed": {"repr": "0:02:47.765790", "seconds": 167.76579}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "emit_delta", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 408, "message": "Emitted pnl delta: seq=184", "module": "live", "name": "app.ws.live", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:04:06.058332+05:30", "timestamp": 1755783246.058332}}}
{"text": "2025-08-21 19:04:06.059 | DEBUG    | app.ws.live:emit_delta:408 - Emitted positions delta: seq=185\n", "record": {"elapsed": {"repr": "0:02:47.767211", "seconds": 167.767211}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "emit_delta", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 408, "message": "Emitted positions delta: seq=185", "module": "live", "name": "app.ws.live", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:04:06.059753+05:30", "timestamp": 1755783246.059753}}}
{"text": "2025-08-21 19:04:06.913 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:02:48.621457", "seconds": 168.621457}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:04:06.913999+05:30", "timestamp": 1755783246.913999}}}
{"text": "2025-08-21 19:04:06.915 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:02:48.622590", "seconds": 168.62259}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:04:06.915132+05:30", "timestamp": 1755783246.915132}}}
{"text": "2025-08-21 19:04:06.916 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:02:48.623674", "seconds": 168.623674}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:04:06.916216+05:30", "timestamp": 1755783246.916216}}}
{"text": "2025-08-21 19:04:06.916 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:02:48.624208", "seconds": 168.624208}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:04:06.916750+05:30", "timestamp": 1755783246.91675}}}
{"text": "2025-08-21 19:04:06.917 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:02:48.624607", "seconds": 168.624607}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:04:06.917149+05:30", "timestamp": 1755783246.917149}}}
{"text": "2025-08-21 19:04:06.917 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:02:48.625000", "seconds": 168.625}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:04:06.917542+05:30", "timestamp": 1755783246.917542}}}
{"text": "2025-08-21 19:04:06.917 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:02:48.625386", "seconds": 168.625386}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:04:06.917928+05:30", "timestamp": 1755783246.917928}}}
{"text": "2025-08-21 19:04:06.918 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:02:48.625785", "seconds": 168.625785}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:04:06.918327+05:30", "timestamp": 1755783246.918327}}}
{"text": "2025-08-21 19:04:06.918 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:02:48.626176", "seconds": 168.626176}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:04:06.918718+05:30", "timestamp": 1755783246.918718}}}
{"text": "2025-08-21 19:04:06.919 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:02:48.626552", "seconds": 168.626552}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 25328, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 19:04:06.919094+05:30", "timestamp": 1755783246.919094}}}
{"text": "2025-08-21 19:04:07.919 | INFO     | app.services.dhan_client:get_pnl:489 - Starting accurate P&L calculation\n", "record": {"elapsed": {"repr": "0:02:49.627164", "seconds": 169.627164}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 489, "message": "Starting accurate P&L calculation", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:04:07.919706+05:30", "timestamp": 1755783247.919706}}}
{"text": "2025-08-21 19:04:07.920 | INFO     | app.services.dhan_client:get_pnl:491 - Fetched 5 positions\n", "record": {"elapsed": {"repr": "0:02:49.628257", "seconds": 169.628257}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 491, "message": "Fetched 5 positions", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:04:07.920799+05:30", "timestamp": 1755783247.920799}}}
{"text": "2025-08-21 19:04:07.921 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for RELIANCE: unrealized=-457165.0, today=-457165.0\n", "record": {"elapsed": {"repr": "0:02:49.628957", "seconds": 169.628957}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for RELIANCE: unrealized=-457165.0, today=-457165.0", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:04:07.921499+05:30", "timestamp": 1755783247.921499}}}
{"text": "2025-08-21 19:04:07.922 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for TCS: unrealized=-38517.41, today=-38517.41\n", "record": {"elapsed": {"repr": "0:02:49.629512", "seconds": 169.629512}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for TCS: unrealized=-38517.41, today=-38517.41", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:04:07.922054+05:30", "timestamp": 1755783247.922054}}}
{"text": "2025-08-21 19:04:07.922 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for HDFC: unrealized=1570778.9, today=1570778.9\n", "record": {"elapsed": {"repr": "0:02:49.630234", "seconds": 169.630234}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for HDFC: unrealized=1570778.9, today=1570778.9", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:04:07.922776+05:30", "timestamp": 1755783247.922776}}}
{"text": "2025-08-21 19:04:07.924 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for INFY: unrealized=15782.84, today=15782.84\n", "record": {"elapsed": {"repr": "0:02:49.631491", "seconds": 169.631491}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for INFY: unrealized=15782.84, today=15782.84", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:04:07.924033+05:30", "timestamp": 1755783247.924033}}}
{"text": "2025-08-21 19:04:07.924 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for ICICIBANK: unrealized=-472392.48, today=-472392.48\n", "record": {"elapsed": {"repr": "0:02:49.632206", "seconds": 169.632206}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for ICICIBANK: unrealized=-472392.48, today=-472392.48", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 16348, "name": "MainProcess"}, "thread": {"id": 26428, "name": "MainThread"}, "time": {"repr": "2025-08-21 19:04:07.924748+05:30", "timestamp": 1755783247.924748}}}
