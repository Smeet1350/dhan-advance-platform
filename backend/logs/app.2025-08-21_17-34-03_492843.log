{"text": "2025-08-21 17:34:03.482 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:16.537184", "seconds": 16.537184}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27372, "name": "MainProcess"}, "thread": {"id": 4988, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 17:34:03.482881+05:30", "timestamp": 1755777843.482881}}}
{"text": "2025-08-21 17:34:03.494 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:16.548781", "seconds": 16.548781}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27372, "name": "MainProcess"}, "thread": {"id": 4988, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 17:34:03.494478+05:30", "timestamp": 1755777843.494478}}}
{"text": "2025-08-21 17:34:03.496 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:16.550471", "seconds": 16.550471}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27372, "name": "MainProcess"}, "thread": {"id": 4988, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 17:34:03.496168+05:30", "timestamp": 1755777843.496168}}}
{"text": "2025-08-21 17:34:03.497 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:16.551884", "seconds": 16.551884}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27372, "name": "MainProcess"}, "thread": {"id": 4988, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 17:34:03.497581+05:30", "timestamp": 1755777843.497581}}}
{"text": "2025-08-21 17:34:03.498 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:16.553117", "seconds": 16.553117}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27372, "name": "MainProcess"}, "thread": {"id": 4988, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 17:34:03.498814+05:30", "timestamp": 1755777843.498814}}}
{"text": "2025-08-21 17:34:04.899 | INFO     | app.services.dhan_client:get_pnl:489 - Starting accurate P&L calculation\n", "record": {"elapsed": {"repr": "0:00:17.953463", "seconds": 17.953463}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 489, "message": "Starting accurate P&L calculation", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27372, "name": "MainProcess"}, "thread": {"id": 26004, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:34:04.899160+05:30", "timestamp": 1755777844.89916}}}
{"text": "2025-08-21 17:34:04.900 | INFO     | app.services.dhan_client:get_pnl:491 - Fetched 5 positions\n", "record": {"elapsed": {"repr": "0:00:17.955029", "seconds": 17.955029}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 491, "message": "Fetched 5 positions", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27372, "name": "MainProcess"}, "thread": {"id": 26004, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:34:04.900726+05:30", "timestamp": 1755777844.900726}}}
{"text": "2025-08-21 17:34:04.904 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for RELIANCE: unrealized=-1360971.17, today=-1360971.17\n", "record": {"elapsed": {"repr": "0:00:17.958686", "seconds": 17.958686}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for RELIANCE: unrealized=-1360971.17, today=-1360971.17", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27372, "name": "MainProcess"}, "thread": {"id": 26004, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:34:04.904383+05:30", "timestamp": 1755777844.904383}}}
{"text": "2025-08-21 17:34:04.906 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for TCS: unrealized=-1077413.69, today=-1077413.69\n", "record": {"elapsed": {"repr": "0:00:17.960500", "seconds": 17.9605}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for TCS: unrealized=-1077413.69, today=-1077413.69", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27372, "name": "MainProcess"}, "thread": {"id": 26004, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:34:04.906197+05:30", "timestamp": 1755777844.906197}}}
{"text": "2025-08-21 17:34:04.908 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for HDFC: unrealized=-599122.3, today=-599122.3\n", "record": {"elapsed": {"repr": "0:00:17.963245", "seconds": 17.963245}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for HDFC: unrealized=-599122.3, today=-599122.3", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27372, "name": "MainProcess"}, "thread": {"id": 26004, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:34:04.908942+05:30", "timestamp": 1755777844.908942}}}
{"text": "2025-08-21 17:34:04.911 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for INFY: unrealized=533695.59, today=533695.59\n", "record": {"elapsed": {"repr": "0:00:17.965843", "seconds": 17.965843}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for INFY: unrealized=533695.59, today=533695.59", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27372, "name": "MainProcess"}, "thread": {"id": 26004, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:34:04.911540+05:30", "timestamp": 1755777844.91154}}}
{"text": "2025-08-21 17:34:04.914 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for ICICIBANK: unrealized=-3143721.31, today=-3143721.31\n", "record": {"elapsed": {"repr": "0:00:17.968886", "seconds": 17.968886}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for ICICIBANK: unrealized=-3143721.31, today=-3143721.31", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27372, "name": "MainProcess"}, "thread": {"id": 26004, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:34:04.914583+05:30", "timestamp": 1755777844.914583}}}
{"text": "2025-08-21 17:34:04.916 | INFO     | app.services.dhan_client:get_pnl:545 - Calculated totals - realized: 0.0, unrealized: -5647532.88, day: -5647532.88\n", "record": {"elapsed": {"repr": "0:00:17.970484", "seconds": 17.970484}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 545, "message": "Calculated totals - realized: 0.0, unrealized: -5647532.88, day: -5647532.88", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27372, "name": "MainProcess"}, "thread": {"id": 26004, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:34:04.916181+05:30", "timestamp": 1755777844.916181}}}
{"text": "2025-08-21 17:34:04.918 | DEBUG    | app.services.dhan_client:get_pnl:554 - PnL consistency check passed: drift=‚Çπ0.00\n", "record": {"elapsed": {"repr": "0:00:17.972911", "seconds": 17.972911}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 554, "message": "PnL consistency check passed: drift=‚Çπ0.00", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27372, "name": "MainProcess"}, "thread": {"id": 26004, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:34:04.918608+05:30", "timestamp": 1755777844.918608}}}
{"text": "2025-08-21 17:34:04.920 | DEBUG    | app.services.dhan_client:get_pnl:558 - Creating PnLTotals...\n", "record": {"elapsed": {"repr": "0:00:17.974990", "seconds": 17.97499}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 558, "message": "Creating PnLTotals...", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27372, "name": "MainProcess"}, "thread": {"id": 26004, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:34:04.920687+05:30", "timestamp": 1755777844.920687}}}
{"text": "2025-08-21 17:34:04.923 | DEBUG    | app.services.dhan_client:get_pnl:565 - PnLTotals created successfully\n", "record": {"elapsed": {"repr": "0:00:17.977500", "seconds": 17.9775}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 565, "message": "PnLTotals created successfully", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27372, "name": "MainProcess"}, "thread": {"id": 26004, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:34:04.923197+05:30", "timestamp": 1755777844.923197}}}
{"text": "2025-08-21 17:34:04.925 | DEBUG    | app.services.dhan_client:get_pnl:574 - Creating PnL model...\n", "record": {"elapsed": {"repr": "0:00:17.979530", "seconds": 17.97953}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 574, "message": "Creating PnL model...", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27372, "name": "MainProcess"}, "thread": {"id": 26004, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:34:04.925227+05:30", "timestamp": 1755777844.925227}}}
{"text": "2025-08-21 17:34:04.928 | DEBUG    | app.services.dhan_client:get_pnl:575 - Model fields: totals=<class 'app.models.schemas.PnLTotals'>, perSymbol=5, updated_at=2025-08-21 17:34:04.904089+05:30, trading_day=2025-08-21\n", "record": {"elapsed": {"repr": "0:00:17.983171", "seconds": 17.983171}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 575, "message": "Model fields: totals=<class 'app.models.schemas.PnLTotals'>, perSymbol=5, updated_at=2025-08-21 17:34:04.904089+05:30, trading_day=2025-08-21", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27372, "name": "MainProcess"}, "thread": {"id": 26004, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:34:04.928868+05:30", "timestamp": 1755777844.928868}}}
{"text": "2025-08-21 17:34:04.931 | DEBUG    | app.services.dhan_client:get_pnl:584 - Created PnL model: totals=PnLTotals(realized=0.0, unrealized=-5647532.88, day=-5647532.88, currency='INR') per_symbol=[PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1250, avg=1445.94, ltp=357.16, unrealized=-1360971.17, today_pnl=-1360971.17), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=1814, avg=1005.68, ltp=1599.62, unrealized=-1077413.69, today_pnl=-1077413.69), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=734, avg=1197.77, ltp=381.53, unrealized=-599122.3, today_pnl=-599122.3), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=1135, avg=1757.83, ltp=1287.61, unrealized=533695.59, today_pnl=533695.59), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=1874, avg=1965.49, ltp=287.94, unrealized=-3143721.31, today_pnl=-3143721.31)] updated_at=datetime.datetime(2025, 8, 21, 17, 34, 4, 904089, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))) trading_day='2025-08-21'\n", "record": {"elapsed": {"repr": "0:00:17.986137", "seconds": 17.986137}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 584, "message": "Created PnL model: totals=PnLTotals(realized=0.0, unrealized=-5647532.88, day=-5647532.88, currency='INR') per_symbol=[PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1250, avg=1445.94, ltp=357.16, unrealized=-1360971.17, today_pnl=-1360971.17), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=1814, avg=1005.68, ltp=1599.62, unrealized=-1077413.69, today_pnl=-1077413.69), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=734, avg=1197.77, ltp=381.53, unrealized=-599122.3, today_pnl=-599122.3), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=1135, avg=1757.83, ltp=1287.61, unrealized=533695.59, today_pnl=533695.59), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=1874, avg=1965.49, ltp=287.94, unrealized=-3143721.31, today_pnl=-3143721.31)] updated_at=datetime.datetime(2025, 8, 21, 17, 34, 4, 904089, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))) trading_day='2025-08-21'", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27372, "name": "MainProcess"}, "thread": {"id": 26004, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:34:04.931834+05:30", "timestamp": 1755777844.931834}}}
{"text": "2025-08-21 17:34:04.934 | DEBUG    | app.services.dhan_client:get_pnl:585 - PnL model fields: {'totals': PnLTotals(realized=0.0, unrealized=-5647532.88, day=-5647532.88, currency='INR'), 'per_symbol': [PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1250, avg=1445.94, ltp=357.16, unrealized=-1360971.17, today_pnl=-1360971.17), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=1814, avg=1005.68, ltp=1599.62, unrealized=-1077413.69, today_pnl=-1077413.69), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=734, avg=1197.77, ltp=381.53, unrealized=-599122.3, today_pnl=-599122.3), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=1135, avg=1757.83, ltp=1287.61, unrealized=533695.59, today_pnl=533695.59), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=1874, avg=1965.49, ltp=287.94, unrealized=-3143721.31, today_pnl=-3143721.31)], 'updated_at': datetime.datetime(2025, 8, 21, 17, 34, 4, 904089, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))), 'trading_day': '2025-08-21'}\n", "record": {"elapsed": {"repr": "0:00:17.989119", "seconds": 17.989119}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 585, "message": "PnL model fields: {'totals': PnLTotals(realized=0.0, unrealized=-5647532.88, day=-5647532.88, currency='INR'), 'per_symbol': [PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1250, avg=1445.94, ltp=357.16, unrealized=-1360971.17, today_pnl=-1360971.17), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=1814, avg=1005.68, ltp=1599.62, unrealized=-1077413.69, today_pnl=-1077413.69), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=734, avg=1197.77, ltp=381.53, unrealized=-599122.3, today_pnl=-599122.3), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=1135, avg=1757.83, ltp=1287.61, unrealized=533695.59, today_pnl=533695.59), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=1874, avg=1965.49, ltp=287.94, unrealized=-3143721.31, today_pnl=-3143721.31)], 'updated_at': datetime.datetime(2025, 8, 21, 17, 34, 4, 904089, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))), 'trading_day': '2025-08-21'}", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27372, "name": "MainProcess"}, "thread": {"id": 26004, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:34:04.934816+05:30", "timestamp": 1755777844.934816}}}
{"text": "2025-08-21 17:34:04.937 | INFO     | app.services.dhan_client:get_pnl:587 - P&L calculation completed successfully: 5 symbols, unrealized=‚Çπ-5647532.88\n", "record": {"elapsed": {"repr": "0:00:17.991323", "seconds": 17.991323}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 587, "message": "P&L calculation completed successfully: 5 symbols, unrealized=‚Çπ-5647532.88", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27372, "name": "MainProcess"}, "thread": {"id": 26004, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:34:04.937020+05:30", "timestamp": 1755777844.93702}}}
{"text": "2025-08-21 17:34:04.939 | DEBUG    | app.ws.live:emit_delta:408 - Emitted pnl delta: seq=19\n", "record": {"elapsed": {"repr": "0:00:17.993553", "seconds": 17.993553}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "emit_delta", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 408, "message": "Emitted pnl delta: seq=19", "module": "live", "name": "app.ws.live", "process": {"id": 27372, "name": "MainProcess"}, "thread": {"id": 26004, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:34:04.939250+05:30", "timestamp": 1755777844.93925}}}
{"text": "2025-08-21 17:34:05.096 | DEBUG    | app.ws.live:emit_delta:408 - Emitted positions delta: seq=20\n", "record": {"elapsed": {"repr": "0:00:18.150626", "seconds": 18.150626}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "emit_delta", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 408, "message": "Emitted positions delta: seq=20", "module": "live", "name": "app.ws.live", "process": {"id": 27372, "name": "MainProcess"}, "thread": {"id": 26004, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:34:05.096323+05:30", "timestamp": 1755777845.096323}}}
{"text": "2025-08-21 17:34:05.501 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:18.555730", "seconds": 18.55573}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27372, "name": "MainProcess"}, "thread": {"id": 4988, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 17:34:05.501427+05:30", "timestamp": 1755777845.501427}}}
{"text": "2025-08-21 17:34:05.503 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:18.557615", "seconds": 18.557615}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27372, "name": "MainProcess"}, "thread": {"id": 4988, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 17:34:05.503312+05:30", "timestamp": 1755777845.503312}}}
{"text": "2025-08-21 17:34:05.506 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:18.561152", "seconds": 18.561152}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27372, "name": "MainProcess"}, "thread": {"id": 4988, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 17:34:05.506849+05:30", "timestamp": 1755777845.506849}}}
{"text": "2025-08-21 17:34:05.507 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:18.562210", "seconds": 18.56221}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27372, "name": "MainProcess"}, "thread": {"id": 4988, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 17:34:05.507907+05:30", "timestamp": 1755777845.507907}}}
{"text": "2025-08-21 17:34:05.510 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:18.564963", "seconds": 18.564963}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27372, "name": "MainProcess"}, "thread": {"id": 4988, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 17:34:05.510660+05:30", "timestamp": 1755777845.51066}}}
{"text": "2025-08-21 17:34:05.512 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:18.566329", "seconds": 18.566329}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27372, "name": "MainProcess"}, "thread": {"id": 4988, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 17:34:05.512026+05:30", "timestamp": 1755777845.512026}}}
{"text": "2025-08-21 17:34:05.514 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:18.569021", "seconds": 18.569021}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27372, "name": "MainProcess"}, "thread": {"id": 4988, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 17:34:05.514718+05:30", "timestamp": 1755777845.514718}}}
{"text": "2025-08-21 17:34:05.515 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:18.570215", "seconds": 18.570215}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27372, "name": "MainProcess"}, "thread": {"id": 4988, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 17:34:05.515912+05:30", "timestamp": 1755777845.515912}}}
{"text": "2025-08-21 17:34:05.517 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:18.571719", "seconds": 18.571719}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27372, "name": "MainProcess"}, "thread": {"id": 4988, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 17:34:05.517416+05:30", "timestamp": 1755777845.517416}}}
{"text": "2025-08-21 17:34:05.518 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:18.573005", "seconds": 18.573005}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27372, "name": "MainProcess"}, "thread": {"id": 4988, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 17:34:05.518702+05:30", "timestamp": 1755777845.518702}}}
{"text": "2025-08-21 17:34:06.741 | INFO     | app.services.dhan_client:get_pnl:489 - Starting accurate P&L calculation\n", "record": {"elapsed": {"repr": "0:00:19.795795", "seconds": 19.795795}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 489, "message": "Starting accurate P&L calculation", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27372, "name": "MainProcess"}, "thread": {"id": 26004, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:34:06.741492+05:30", "timestamp": 1755777846.741492}}}
{"text": "2025-08-21 17:34:06.742 | INFO     | app.services.dhan_client:get_pnl:491 - Fetched 5 positions\n", "record": {"elapsed": {"repr": "0:00:19.797200", "seconds": 19.7972}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 491, "message": "Fetched 5 positions", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27372, "name": "MainProcess"}, "thread": {"id": 26004, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:34:06.742897+05:30", "timestamp": 1755777846.742897}}}
{"text": "2025-08-21 17:34:06.744 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for RELIANCE: unrealized=-1364863.57, today=-1364863.57\n", "record": {"elapsed": {"repr": "0:00:19.798914", "seconds": 19.798914}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for RELIANCE: unrealized=-1364863.57, today=-1364863.57", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27372, "name": "MainProcess"}, "thread": {"id": 26004, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:34:06.744611+05:30", "timestamp": 1755777846.744611}}}
{"text": "2025-08-21 17:34:06.745 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for TCS: unrealized=-1033071.85, today=-1033071.85\n", "record": {"elapsed": {"repr": "0:00:19.799917", "seconds": 19.799917}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for TCS: unrealized=-1033071.85, today=-1033071.85", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27372, "name": "MainProcess"}, "thread": {"id": 26004, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:34:06.745614+05:30", "timestamp": 1755777846.745614}}}
{"text": "2025-08-21 17:34:06.746 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for HDFC: unrealized=-594712.86, today=-594712.86\n", "record": {"elapsed": {"repr": "0:00:19.800961", "seconds": 19.800961}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for HDFC: unrealized=-594712.86, today=-594712.86", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27372, "name": "MainProcess"}, "thread": {"id": 26004, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:34:06.746658+05:30", "timestamp": 1755777846.746658}}}
{"text": "2025-08-21 17:34:06.747 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for INFY: unrealized=549066.7, today=549066.7\n", "record": {"elapsed": {"repr": "0:00:19.801975", "seconds": 19.801975}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for INFY: unrealized=549066.7, today=549066.7", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27372, "name": "MainProcess"}, "thread": {"id": 26004, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:34:06.747672+05:30", "timestamp": 1755777846.747672}}}
{"text": "2025-08-21 17:34:06.749 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for ICICIBANK: unrealized=-3149623.53, today=-3149623.53\n", "record": {"elapsed": {"repr": "0:00:19.803482", "seconds": 19.803482}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for ICICIBANK: unrealized=-3149623.53, today=-3149623.53", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27372, "name": "MainProcess"}, "thread": {"id": 26004, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:34:06.749179+05:30", "timestamp": 1755777846.749179}}}
{"text": "2025-08-21 17:34:06.751 | INFO     | app.services.dhan_client:get_pnl:545 - Calculated totals - realized: 0.0, unrealized: -5593205.11, day: -5593205.11\n", "record": {"elapsed": {"repr": "0:00:19.805973", "seconds": 19.805973}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 545, "message": "Calculated totals - realized: 0.0, unrealized: -5593205.11, day: -5593205.11", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27372, "name": "MainProcess"}, "thread": {"id": 26004, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:34:06.751670+05:30", "timestamp": 1755777846.75167}}}
{"text": "2025-08-21 17:34:06.753 | DEBUG    | app.services.dhan_client:get_pnl:554 - PnL consistency check passed: drift=‚Çπ0.00\n", "record": {"elapsed": {"repr": "0:00:19.807765", "seconds": 19.807765}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 554, "message": "PnL consistency check passed: drift=‚Çπ0.00", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27372, "name": "MainProcess"}, "thread": {"id": 26004, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:34:06.753462+05:30", "timestamp": 1755777846.753462}}}
{"text": "2025-08-21 17:34:06.755 | DEBUG    | app.services.dhan_client:get_pnl:558 - Creating PnLTotals...\n", "record": {"elapsed": {"repr": "0:00:19.809566", "seconds": 19.809566}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 558, "message": "Creating PnLTotals...", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27372, "name": "MainProcess"}, "thread": {"id": 26004, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:34:06.755263+05:30", "timestamp": 1755777846.755263}}}
{"text": "2025-08-21 17:34:06.756 | DEBUG    | app.services.dhan_client:get_pnl:565 - PnLTotals created successfully\n", "record": {"elapsed": {"repr": "0:00:19.810662", "seconds": 19.810662}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 565, "message": "PnLTotals created successfully", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27372, "name": "MainProcess"}, "thread": {"id": 26004, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:34:06.756359+05:30", "timestamp": 1755777846.756359}}}
{"text": "2025-08-21 17:34:06.757 | DEBUG    | app.services.dhan_client:get_pnl:574 - Creating PnL model...\n", "record": {"elapsed": {"repr": "0:00:19.811723", "seconds": 19.811723}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 574, "message": "Creating PnL model...", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27372, "name": "MainProcess"}, "thread": {"id": 26004, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:34:06.757420+05:30", "timestamp": 1755777846.75742}}}
{"text": "2025-08-21 17:34:06.758 | DEBUG    | app.services.dhan_client:get_pnl:575 - Model fields: totals=<class 'app.models.schemas.PnLTotals'>, perSymbol=5, updated_at=2025-08-21 17:34:06.744371+05:30, trading_day=2025-08-21\n", "record": {"elapsed": {"repr": "0:00:19.813277", "seconds": 19.813277}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 575, "message": "Model fields: totals=<class 'app.models.schemas.PnLTotals'>, perSymbol=5, updated_at=2025-08-21 17:34:06.744371+05:30, trading_day=2025-08-21", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27372, "name": "MainProcess"}, "thread": {"id": 26004, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:34:06.758974+05:30", "timestamp": 1755777846.758974}}}
{"text": "2025-08-21 17:34:06.761 | DEBUG    | app.services.dhan_client:get_pnl:584 - Created PnL model: totals=PnLTotals(realized=0.0, unrealized=-5593205.11, day=-5593205.11, currency='INR') per_symbol=[PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1250, avg=1445.94, ltp=354.05, unrealized=-1364863.57, today_pnl=-1364863.57), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=1814, avg=1005.68, ltp=1575.18, unrealized=-1033071.85, today_pnl=-1033071.85), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=734, avg=1197.77, ltp=387.53, unrealized=-594712.86, today_pnl=-594712.86), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=1135, avg=1757.83, ltp=1274.07, unrealized=549066.7, today_pnl=549066.7), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=1874, avg=1965.49, ltp=284.79, unrealized=-3149623.53, today_pnl=-3149623.53)] updated_at=datetime.datetime(2025, 8, 21, 17, 34, 6, 744371, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))) trading_day='2025-08-21'\n", "record": {"elapsed": {"repr": "0:00:19.815577", "seconds": 19.815577}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 584, "message": "Created PnL model: totals=PnLTotals(realized=0.0, unrealized=-5593205.11, day=-5593205.11, currency='INR') per_symbol=[PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1250, avg=1445.94, ltp=354.05, unrealized=-1364863.57, today_pnl=-1364863.57), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=1814, avg=1005.68, ltp=1575.18, unrealized=-1033071.85, today_pnl=-1033071.85), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=734, avg=1197.77, ltp=387.53, unrealized=-594712.86, today_pnl=-594712.86), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=1135, avg=1757.83, ltp=1274.07, unrealized=549066.7, today_pnl=549066.7), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=1874, avg=1965.49, ltp=284.79, unrealized=-3149623.53, today_pnl=-3149623.53)] updated_at=datetime.datetime(2025, 8, 21, 17, 34, 6, 744371, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))) trading_day='2025-08-21'", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27372, "name": "MainProcess"}, "thread": {"id": 26004, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:34:06.761274+05:30", "timestamp": 1755777846.761274}}}
{"text": "2025-08-21 17:34:06.763 | DEBUG    | app.services.dhan_client:get_pnl:585 - PnL model fields: {'totals': PnLTotals(realized=0.0, unrealized=-5593205.11, day=-5593205.11, currency='INR'), 'per_symbol': [PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1250, avg=1445.94, ltp=354.05, unrealized=-1364863.57, today_pnl=-1364863.57), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=1814, avg=1005.68, ltp=1575.18, unrealized=-1033071.85, today_pnl=-1033071.85), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=734, avg=1197.77, ltp=387.53, unrealized=-594712.86, today_pnl=-594712.86), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=1135, avg=1757.83, ltp=1274.07, unrealized=549066.7, today_pnl=549066.7), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=1874, avg=1965.49, ltp=284.79, unrealized=-3149623.53, today_pnl=-3149623.53)], 'updated_at': datetime.datetime(2025, 8, 21, 17, 34, 6, 744371, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))), 'trading_day': '2025-08-21'}\n", "record": {"elapsed": {"repr": "0:00:19.817830", "seconds": 19.81783}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 585, "message": "PnL model fields: {'totals': PnLTotals(realized=0.0, unrealized=-5593205.11, day=-5593205.11, currency='INR'), 'per_symbol': [PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1250, avg=1445.94, ltp=354.05, unrealized=-1364863.57, today_pnl=-1364863.57), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=1814, avg=1005.68, ltp=1575.18, unrealized=-1033071.85, today_pnl=-1033071.85), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=734, avg=1197.77, ltp=387.53, unrealized=-594712.86, today_pnl=-594712.86), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=1135, avg=1757.83, ltp=1274.07, unrealized=549066.7, today_pnl=549066.7), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=1874, avg=1965.49, ltp=284.79, unrealized=-3149623.53, today_pnl=-3149623.53)], 'updated_at': datetime.datetime(2025, 8, 21, 17, 34, 6, 744371, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))), 'trading_day': '2025-08-21'}", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27372, "name": "MainProcess"}, "thread": {"id": 26004, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:34:06.763527+05:30", "timestamp": 1755777846.763527}}}
{"text": "2025-08-21 17:34:06.764 | INFO     | app.services.dhan_client:get_pnl:587 - P&L calculation completed successfully: 5 symbols, unrealized=‚Çπ-5593205.11\n", "record": {"elapsed": {"repr": "0:00:19.819222", "seconds": 19.819222}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 587, "message": "P&L calculation completed successfully: 5 symbols, unrealized=‚Çπ-5593205.11", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27372, "name": "MainProcess"}, "thread": {"id": 26004, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:34:06.764919+05:30", "timestamp": 1755777846.764919}}}
{"text": "2025-08-21 17:34:06.766 | DEBUG    | app.ws.live:emit_delta:408 - Emitted pnl delta: seq=21\n", "record": {"elapsed": {"repr": "0:00:19.820772", "seconds": 19.820772}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "emit_delta", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 408, "message": "Emitted pnl delta: seq=21", "module": "live", "name": "app.ws.live", "process": {"id": 27372, "name": "MainProcess"}, "thread": {"id": 26004, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:34:06.766469+05:30", "timestamp": 1755777846.766469}}}
{"text": "2025-08-21 17:34:06.974 | DEBUG    | app.ws.live:emit_delta:408 - Emitted positions delta: seq=22\n", "record": {"elapsed": {"repr": "0:00:20.028998", "seconds": 20.028998}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "emit_delta", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 408, "message": "Emitted positions delta: seq=22", "module": "live", "name": "app.ws.live", "process": {"id": 27372, "name": "MainProcess"}, "thread": {"id": 26004, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:34:06.974695+05:30", "timestamp": 1755777846.974695}}}
{"text": "2025-08-21 17:34:07.520 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:20.574810", "seconds": 20.57481}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27372, "name": "MainProcess"}, "thread": {"id": 4988, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 17:34:07.520507+05:30", "timestamp": 1755777847.520507}}}
{"text": "2025-08-21 17:34:07.521 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:20.576063", "seconds": 20.576063}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27372, "name": "MainProcess"}, "thread": {"id": 4988, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 17:34:07.521760+05:30", "timestamp": 1755777847.52176}}}
{"text": "2025-08-21 17:34:07.522 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:20.577234", "seconds": 20.577234}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27372, "name": "MainProcess"}, "thread": {"id": 4988, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 17:34:07.522931+05:30", "timestamp": 1755777847.522931}}}
{"text": "2025-08-21 17:34:07.524 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:20.579004", "seconds": 20.579004}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27372, "name": "MainProcess"}, "thread": {"id": 4988, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 17:34:07.524701+05:30", "timestamp": 1755777847.524701}}}
{"text": "2025-08-21 17:34:07.525 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:20.580268", "seconds": 20.580268}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27372, "name": "MainProcess"}, "thread": {"id": 4988, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 17:34:07.525965+05:30", "timestamp": 1755777847.525965}}}
{"text": "2025-08-21 17:34:07.526 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:20.581288", "seconds": 20.581288}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27372, "name": "MainProcess"}, "thread": {"id": 4988, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 17:34:07.526985+05:30", "timestamp": 1755777847.526985}}}
{"text": "2025-08-21 17:34:07.528 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:20.582433", "seconds": 20.582433}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27372, "name": "MainProcess"}, "thread": {"id": 4988, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 17:34:07.528130+05:30", "timestamp": 1755777847.52813}}}
{"text": "2025-08-21 17:34:07.529 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:20.583897", "seconds": 20.583897}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27372, "name": "MainProcess"}, "thread": {"id": 4988, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 17:34:07.529594+05:30", "timestamp": 1755777847.529594}}}
{"text": "2025-08-21 17:34:07.530 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:20.585165", "seconds": 20.585165}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27372, "name": "MainProcess"}, "thread": {"id": 4988, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 17:34:07.530862+05:30", "timestamp": 1755777847.530862}}}
{"text": "2025-08-21 17:34:07.532 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:20.586541", "seconds": 20.586541}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27372, "name": "MainProcess"}, "thread": {"id": 4988, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 17:34:07.532238+05:30", "timestamp": 1755777847.532238}}}
{"text": "2025-08-21 17:34:08.482 | INFO     | app.services.dhan_client:get_pnl:489 - Starting accurate P&L calculation\n", "record": {"elapsed": {"repr": "0:00:21.537034", "seconds": 21.537034}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 489, "message": "Starting accurate P&L calculation", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27372, "name": "MainProcess"}, "thread": {"id": 26004, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:34:08.482731+05:30", "timestamp": 1755777848.482731}}}
{"text": "2025-08-21 17:34:08.484 | INFO     | app.services.dhan_client:get_pnl:491 - Fetched 5 positions\n", "record": {"elapsed": {"repr": "0:00:21.538758", "seconds": 21.538758}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 491, "message": "Fetched 5 positions", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27372, "name": "MainProcess"}, "thread": {"id": 26004, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:34:08.484455+05:30", "timestamp": 1755777848.484455}}}
{"text": "2025-08-21 17:34:08.485 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for RELIANCE: unrealized=-1358131.9, today=-1358131.9\n", "record": {"elapsed": {"repr": "0:00:21.540092", "seconds": 21.540092}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for RELIANCE: unrealized=-1358131.9, today=-1358131.9", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27372, "name": "MainProcess"}, "thread": {"id": 26004, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:34:08.485789+05:30", "timestamp": 1755777848.485789}}}
{"text": "2025-08-21 17:34:08.486 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for TCS: unrealized=-983354.64, today=-983354.64\n", "record": {"elapsed": {"repr": "0:00:21.540935", "seconds": 21.540935}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for TCS: unrealized=-983354.64, today=-983354.64", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27372, "name": "MainProcess"}, "thread": {"id": 26004, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:34:08.486632+05:30", "timestamp": 1755777848.486632}}}
{"text": "2025-08-21 17:34:08.487 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for HDFC: unrealized=-590745.0, today=-590745.0\n", "record": {"elapsed": {"repr": "0:00:21.541928", "seconds": 21.541928}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for HDFC: unrealized=-590745.0, today=-590745.0", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27372, "name": "MainProcess"}, "thread": {"id": 26004, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:34:08.487625+05:30", "timestamp": 1755777848.487625}}}
{"text": "2025-08-21 17:34:08.488 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for INFY: unrealized=553268.3, today=553268.3\n", "record": {"elapsed": {"repr": "0:00:21.542825", "seconds": 21.542825}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for INFY: unrealized=553268.3, today=553268.3", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27372, "name": "MainProcess"}, "thread": {"id": 26004, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:34:08.488522+05:30", "timestamp": 1755777848.488522}}}
{"text": "2025-08-21 17:34:08.489 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for ICICIBANK: unrealized=-3158188.06, today=-3158188.06\n", "record": {"elapsed": {"repr": "0:00:21.544058", "seconds": 21.544058}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for ICICIBANK: unrealized=-3158188.06, today=-3158188.06", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27372, "name": "MainProcess"}, "thread": {"id": 26004, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:34:08.489755+05:30", "timestamp": 1755777848.489755}}}
{"text": "2025-08-21 17:34:08.491 | INFO     | app.services.dhan_client:get_pnl:545 - Calculated totals - realized: 0.0, unrealized: -5537151.3, day: -5537151.3\n", "record": {"elapsed": {"repr": "0:00:21.545516", "seconds": 21.545516}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 545, "message": "Calculated totals - realized: 0.0, unrealized: -5537151.3, day: -5537151.3", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27372, "name": "MainProcess"}, "thread": {"id": 26004, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:34:08.491213+05:30", "timestamp": 1755777848.491213}}}
{"text": "2025-08-21 17:34:08.492 | DEBUG    | app.services.dhan_client:get_pnl:554 - PnL consistency check passed: drift=‚Çπ0.00\n", "record": {"elapsed": {"repr": "0:00:21.546692", "seconds": 21.546692}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 554, "message": "PnL consistency check passed: drift=‚Çπ0.00", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27372, "name": "MainProcess"}, "thread": {"id": 26004, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:34:08.492389+05:30", "timestamp": 1755777848.492389}}}
{"text": "2025-08-21 17:34:08.493 | DEBUG    | app.services.dhan_client:get_pnl:558 - Creating PnLTotals...\n", "record": {"elapsed": {"repr": "0:00:21.547760", "seconds": 21.54776}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 558, "message": "Creating PnLTotals...", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27372, "name": "MainProcess"}, "thread": {"id": 26004, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:34:08.493457+05:30", "timestamp": 1755777848.493457}}}
{"text": "2025-08-21 17:34:08.494 | DEBUG    | app.services.dhan_client:get_pnl:565 - PnLTotals created successfully\n", "record": {"elapsed": {"repr": "0:00:21.549139", "seconds": 21.549139}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 565, "message": "PnLTotals created successfully", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27372, "name": "MainProcess"}, "thread": {"id": 26004, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:34:08.494836+05:30", "timestamp": 1755777848.494836}}}
{"text": "2025-08-21 17:34:08.496 | DEBUG    | app.services.dhan_client:get_pnl:574 - Creating PnL model...\n", "record": {"elapsed": {"repr": "0:00:21.550313", "seconds": 21.550313}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 574, "message": "Creating PnL model...", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27372, "name": "MainProcess"}, "thread": {"id": 26004, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:34:08.496010+05:30", "timestamp": 1755777848.49601}}}
{"text": "2025-08-21 17:34:08.496 | DEBUG    | app.services.dhan_client:get_pnl:575 - Model fields: totals=<class 'app.models.schemas.PnLTotals'>, perSymbol=5, updated_at=2025-08-21 17:34:08.485617+05:30, trading_day=2025-08-21\n", "record": {"elapsed": {"repr": "0:00:21.551279", "seconds": 21.551279}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 575, "message": "Model fields: totals=<class 'app.models.schemas.PnLTotals'>, perSymbol=5, updated_at=2025-08-21 17:34:08.485617+05:30, trading_day=2025-08-21", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27372, "name": "MainProcess"}, "thread": {"id": 26004, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:34:08.496976+05:30", "timestamp": 1755777848.496976}}}
{"text": "2025-08-21 17:34:08.498 | DEBUG    | app.services.dhan_client:get_pnl:584 - Created PnL model: totals=PnLTotals(realized=0.0, unrealized=-5537151.3, day=-5537151.3, currency='INR') per_symbol=[PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1250, avg=1445.94, ltp=359.43, unrealized=-1358131.9, today_pnl=-1358131.9), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=1814, avg=1005.68, ltp=1547.77, unrealized=-983354.64, today_pnl=-983354.64), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=734, avg=1197.77, ltp=392.94, unrealized=-590745.0, today_pnl=-590745.0), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=1135, avg=1757.83, ltp=1270.37, unrealized=553268.3, today_pnl=553268.3), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=1874, avg=1965.49, ltp=280.22, unrealized=-3158188.06, today_pnl=-3158188.06)] updated_at=datetime.datetime(2025, 8, 21, 17, 34, 8, 485617, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))) trading_day='2025-08-21'\n", "record": {"elapsed": {"repr": "0:00:21.553215", "seconds": 21.553215}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 584, "message": "Created PnL model: totals=PnLTotals(realized=0.0, unrealized=-5537151.3, day=-5537151.3, currency='INR') per_symbol=[PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1250, avg=1445.94, ltp=359.43, unrealized=-1358131.9, today_pnl=-1358131.9), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=1814, avg=1005.68, ltp=1547.77, unrealized=-983354.64, today_pnl=-983354.64), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=734, avg=1197.77, ltp=392.94, unrealized=-590745.0, today_pnl=-590745.0), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=1135, avg=1757.83, ltp=1270.37, unrealized=553268.3, today_pnl=553268.3), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=1874, avg=1965.49, ltp=280.22, unrealized=-3158188.06, today_pnl=-3158188.06)] updated_at=datetime.datetime(2025, 8, 21, 17, 34, 8, 485617, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))) trading_day='2025-08-21'", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27372, "name": "MainProcess"}, "thread": {"id": 26004, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:34:08.498912+05:30", "timestamp": 1755777848.498912}}}
{"text": "2025-08-21 17:34:08.501 | DEBUG    | app.services.dhan_client:get_pnl:585 - PnL model fields: {'totals': PnLTotals(realized=0.0, unrealized=-5537151.3, day=-5537151.3, currency='INR'), 'per_symbol': [PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1250, avg=1445.94, ltp=359.43, unrealized=-1358131.9, today_pnl=-1358131.9), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=1814, avg=1005.68, ltp=1547.77, unrealized=-983354.64, today_pnl=-983354.64), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=734, avg=1197.77, ltp=392.94, unrealized=-590745.0, today_pnl=-590745.0), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=1135, avg=1757.83, ltp=1270.37, unrealized=553268.3, today_pnl=553268.3), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=1874, avg=1965.49, ltp=280.22, unrealized=-3158188.06, today_pnl=-3158188.06)], 'updated_at': datetime.datetime(2025, 8, 21, 17, 34, 8, 485617, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))), 'trading_day': '2025-08-21'}\n", "record": {"elapsed": {"repr": "0:00:21.555421", "seconds": 21.555421}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 585, "message": "PnL model fields: {'totals': PnLTotals(realized=0.0, unrealized=-5537151.3, day=-5537151.3, currency='INR'), 'per_symbol': [PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=1250, avg=1445.94, ltp=359.43, unrealized=-1358131.9, today_pnl=-1358131.9), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=1814, avg=1005.68, ltp=1547.77, unrealized=-983354.64, today_pnl=-983354.64), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=734, avg=1197.77, ltp=392.94, unrealized=-590745.0, today_pnl=-590745.0), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=1135, avg=1757.83, ltp=1270.37, unrealized=553268.3, today_pnl=553268.3), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=1874, avg=1965.49, ltp=280.22, unrealized=-3158188.06, today_pnl=-3158188.06)], 'updated_at': datetime.datetime(2025, 8, 21, 17, 34, 8, 485617, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))), 'trading_day': '2025-08-21'}", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27372, "name": "MainProcess"}, "thread": {"id": 26004, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:34:08.501118+05:30", "timestamp": 1755777848.501118}}}
{"text": "2025-08-21 17:34:08.504 | INFO     | app.services.dhan_client:get_pnl:587 - P&L calculation completed successfully: 5 symbols, unrealized=‚Çπ-5537151.30\n", "record": {"elapsed": {"repr": "0:00:21.558615", "seconds": 21.558615}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 587, "message": "P&L calculation completed successfully: 5 symbols, unrealized=‚Çπ-5537151.30", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 27372, "name": "MainProcess"}, "thread": {"id": 26004, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:34:08.504312+05:30", "timestamp": 1755777848.504312}}}
{"text": "2025-08-21 17:34:08.505 | DEBUG    | app.ws.live:emit_delta:408 - Emitted pnl delta: seq=23\n", "record": {"elapsed": {"repr": "0:00:21.560019", "seconds": 21.560019}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "emit_delta", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 408, "message": "Emitted pnl delta: seq=23", "module": "live", "name": "app.ws.live", "process": {"id": 27372, "name": "MainProcess"}, "thread": {"id": 26004, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:34:08.505716+05:30", "timestamp": 1755777848.505716}}}
{"text": "2025-08-21 17:34:08.791 | DEBUG    | app.ws.live:emit_delta:408 - Emitted positions delta: seq=24\n", "record": {"elapsed": {"repr": "0:00:21.846284", "seconds": 21.846284}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "emit_delta", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 408, "message": "Emitted positions delta: seq=24", "module": "live", "name": "app.ws.live", "process": {"id": 27372, "name": "MainProcess"}, "thread": {"id": 26004, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:34:08.791981+05:30", "timestamp": 1755777848.791981}}}
{"text": "2025-08-21 17:34:09.505 | INFO     | app.ws.live:shutdown_event:557 - Stopping WebSocket polling...\n", "record": {"elapsed": {"repr": "0:00:22.559512", "seconds": 22.559512}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "shutdown_event", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 557, "message": "Stopping WebSocket polling...", "module": "live", "name": "app.ws.live", "process": {"id": 27372, "name": "MainProcess"}, "thread": {"id": 26004, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:34:09.505209+05:30", "timestamp": 1755777849.505209}}}
{"text": "2025-08-21 17:34:09.506 | INFO     | app.ws.live:shutdown_event:557 - Stopping WebSocket polling...\n", "record": {"elapsed": {"repr": "0:00:22.560891", "seconds": 22.560891}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "shutdown_event", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 557, "message": "Stopping WebSocket polling...", "module": "live", "name": "app.ws.live", "process": {"id": 27372, "name": "MainProcess"}, "thread": {"id": 26004, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:34:09.506588+05:30", "timestamp": 1755777849.506588}}}
{"text": "2025-08-21 17:34:09.507 | INFO     | app.main:shutdown_event:35 - Dhan Automation Backend Application shutting down\n", "record": {"elapsed": {"repr": "0:00:22.561965", "seconds": 22.561965}, "exception": null, "extra": {}, "file": {"name": "main.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\main.py"}, "function": "shutdown_event", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 35, "message": "Dhan Automation Backend Application shutting down", "module": "main", "name": "app.main", "process": {"id": 27372, "name": "MainProcess"}, "thread": {"id": 26004, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:34:09.507662+05:30", "timestamp": 1755777849.507662}}}
{"text": "2025-08-21 17:34:34.817 | INFO     | app.services.dhan_client:_initialize_mock_data:53 - Initializing mock data...\n", "record": {"elapsed": {"repr": "0:00:00.045043", "seconds": 0.045043}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_initialize_mock_data", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 53, "message": "Initializing mock data...", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:34:34.817997+05:30", "timestamp": 1755777874.817997}}}
{"text": "2025-08-21 17:34:34.819 | INFO     | app.services.dhan_client:_initialize_mock_data:75 - Created mock holding for RELIANCE: qty=4111, avg_price=561.6407232848076, ltp=579.0534727090961\n", "record": {"elapsed": {"repr": "0:00:00.046178", "seconds": 0.046178}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_initialize_mock_data", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 75, "message": "Created mock holding for RELIANCE: qty=4111, avg_price=561.6407232848076, ltp=579.0534727090961", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:34:34.819132+05:30", "timestamp": 1755777874.819132}}}
{"text": "2025-08-21 17:34:34.819 | INFO     | app.services.dhan_client:_initialize_mock_data:75 - Created mock holding for TCS: qty=2136, avg_price=370.34169506621726, ltp=368.43895653407486\n", "record": {"elapsed": {"repr": "0:00:00.046831", "seconds": 0.046831}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_initialize_mock_data", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 75, "message": "Created mock holding for TCS: qty=2136, avg_price=370.34169506621726, ltp=368.43895653407486", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:34:34.819785+05:30", "timestamp": 1755777874.819785}}}
{"text": "2025-08-21 17:34:34.820 | INFO     | app.services.dhan_client:_initialize_mock_data:75 - Created mock holding for HDFC: qty=251, avg_price=338.05203764833425, ltp=345.8716669987995\n", "record": {"elapsed": {"repr": "0:00:00.047593", "seconds": 0.047593}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_initialize_mock_data", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 75, "message": "Created mock holding for HDFC: qty=251, avg_price=338.05203764833425, ltp=345.8716669987995", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:34:34.820547+05:30", "timestamp": 1755777874.820547}}}
{"text": "2025-08-21 17:34:34.821 | INFO     | app.services.dhan_client:_initialize_mock_data:75 - Created mock holding for INFY: qty=2058, avg_price=1660.6732318760892, ltp=1955.7667453901909\n", "record": {"elapsed": {"repr": "0:00:00.048562", "seconds": 0.048562}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_initialize_mock_data", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 75, "message": "Created mock holding for INFY: qty=2058, avg_price=1660.6732318760892, ltp=1955.7667453901909", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:34:34.821516+05:30", "timestamp": 1755777874.821516}}}
{"text": "2025-08-21 17:34:34.822 | INFO     | app.services.dhan_client:_initialize_mock_data:75 - Created mock holding for ICICIBANK: qty=3517, avg_price=372.05879903599293, ltp=326.0136815874033\n", "record": {"elapsed": {"repr": "0:00:00.049349", "seconds": 0.049349}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_initialize_mock_data", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 75, "message": "Created mock holding for ICICIBANK: qty=3517, avg_price=372.05879903599293, ltp=326.0136815874033", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:34:34.822303+05:30", "timestamp": 1755777874.822303}}}
{"text": "2025-08-21 17:34:34.823 | INFO     | app.services.dhan_client:_initialize_mock_data:75 - Created mock holding for HINDUNILVR: qty=3239, avg_price=1824.3627841257853, ltp=2188.4003697153694\n", "record": {"elapsed": {"repr": "0:00:00.050068", "seconds": 0.050068}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_initialize_mock_data", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 75, "message": "Created mock holding for HINDUNILVR: qty=3239, avg_price=1824.3627841257853, ltp=2188.4003697153694", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:34:34.823022+05:30", "timestamp": 1755777874.823022}}}
{"text": "2025-08-21 17:34:34.823 | INFO     | app.services.dhan_client:_initialize_mock_data:75 - Created mock holding for ITC: qty=4854, avg_price=1860.930694126625, ltp=2114.6358364673156\n", "record": {"elapsed": {"repr": "0:00:00.050717", "seconds": 0.050717}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_initialize_mock_data", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 75, "message": "Created mock holding for ITC: qty=4854, avg_price=1860.930694126625, ltp=2114.6358364673156", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:34:34.823671+05:30", "timestamp": 1755777874.823671}}}
{"text": "2025-08-21 17:34:34.824 | INFO     | app.services.dhan_client:_initialize_mock_data:75 - Created mock holding for SBIN: qty=3922, avg_price=1273.8292847821867, ltp=1451.6138443148313\n", "record": {"elapsed": {"repr": "0:00:00.051432", "seconds": 0.051432}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_initialize_mock_data", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 75, "message": "Created mock holding for SBIN: qty=3922, avg_price=1273.8292847821867, ltp=1451.6138443148313", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:34:34.824386+05:30", "timestamp": 1755777874.824386}}}
{"text": "2025-08-21 17:34:34.825 | INFO     | app.services.dhan_client:_initialize_mock_data:75 - Created mock holding for BHARTIARTL: qty=2276, avg_price=511.60557267215194, ltp=512.6689547369849\n", "record": {"elapsed": {"repr": "0:00:00.052469", "seconds": 0.052469}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_initialize_mock_data", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 75, "message": "Created mock holding for BHARTIARTL: qty=2276, avg_price=511.60557267215194, ltp=512.6689547369849", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:34:34.825423+05:30", "timestamp": 1755777874.825423}}}
{"text": "2025-08-21 17:34:34.826 | INFO     | app.services.dhan_client:_initialize_mock_data:75 - Created mock holding for KOTAKBANK: qty=538, avg_price=1077.9641799561427, ltp=888.2730248686124\n", "record": {"elapsed": {"repr": "0:00:00.053247", "seconds": 0.053247}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_initialize_mock_data", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 75, "message": "Created mock holding for KOTAKBANK: qty=538, avg_price=1077.9641799561427, ltp=888.2730248686124", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:34:34.826201+05:30", "timestamp": 1755777874.826201}}}
{"text": "2025-08-21 17:34:34.826 | INFO     | app.services.dhan_client:_initialize_mock_data:77 - Created 10 mock holdings\n", "record": {"elapsed": {"repr": "0:00:00.054041", "seconds": 0.054041}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_initialize_mock_data", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 77, "message": "Created 10 mock holdings", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:34:34.826995+05:30", "timestamp": 1755777874.826995}}}
{"text": "2025-08-21 17:34:34.827 | INFO     | app.services.dhan_client:_initialize_mock_data:91 - Created mock position for RELIANCE: id=pos_001, qty=913, avg_price=1944.27\n", "record": {"elapsed": {"repr": "0:00:00.054840", "seconds": 0.05484}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_initialize_mock_data", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 91, "message": "Created mock position for RELIANCE: id=pos_001, qty=913, avg_price=1944.27", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:34:34.827794+05:30", "timestamp": 1755777874.827794}}}
{"text": "2025-08-21 17:34:34.828 | INFO     | app.services.dhan_client:_initialize_mock_data:91 - Created mock position for TCS: id=pos_002, qty=457, avg_price=1390.48\n", "record": {"elapsed": {"repr": "0:00:00.055605", "seconds": 0.055605}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_initialize_mock_data", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 91, "message": "Created mock position for TCS: id=pos_002, qty=457, avg_price=1390.48", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:34:34.828559+05:30", "timestamp": 1755777874.828559}}}
{"text": "2025-08-21 17:34:34.829 | INFO     | app.services.dhan_client:_initialize_mock_data:91 - Created mock position for HDFC: id=pos_003, qty=196, avg_price=1021.99\n", "record": {"elapsed": {"repr": "0:00:00.056381", "seconds": 0.056381}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_initialize_mock_data", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 91, "message": "Created mock position for HDFC: id=pos_003, qty=196, avg_price=1021.99", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:34:34.829335+05:30", "timestamp": 1755777874.829335}}}
{"text": "2025-08-21 17:34:34.829 | INFO     | app.services.dhan_client:_initialize_mock_data:91 - Created mock position for INFY: id=pos_004, qty=1708, avg_price=426.15\n", "record": {"elapsed": {"repr": "0:00:00.056947", "seconds": 0.056947}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_initialize_mock_data", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 91, "message": "Created mock position for INFY: id=pos_004, qty=1708, avg_price=426.15", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:34:34.829901+05:30", "timestamp": 1755777874.829901}}}
{"text": "2025-08-21 17:34:34.830 | INFO     | app.services.dhan_client:_initialize_mock_data:91 - Created mock position for ICICIBANK: id=pos_005, qty=931, avg_price=756.68\n", "record": {"elapsed": {"repr": "0:00:00.057621", "seconds": 0.057621}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_initialize_mock_data", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 91, "message": "Created mock position for ICICIBANK: id=pos_005, qty=931, avg_price=756.68", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:34:34.830575+05:30", "timestamp": 1755777874.830575}}}
{"text": "2025-08-21 17:34:34.831 | INFO     | app.services.dhan_client:_initialize_mock_data:93 - Created 5 mock positions\n", "record": {"elapsed": {"repr": "0:00:00.058253", "seconds": 0.058253}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_initialize_mock_data", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 93, "message": "Created 5 mock positions", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:34:34.831207+05:30", "timestamp": 1755777874.831207}}}
{"text": "2025-08-21 17:34:34.832 | INFO     | app.services.dhan_client:_initialize_mock_data:111 - Created 10 mock orders\n", "record": {"elapsed": {"repr": "0:00:00.059793", "seconds": 0.059793}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_initialize_mock_data", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 111, "message": "Created 10 mock orders", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:34:34.832747+05:30", "timestamp": 1755777874.832747}}}
{"text": "2025-08-21 17:34:34.834 | INFO     | app.services.dhan_client:_initialize_mock_data:127 - Created 20 mock trades\n", "record": {"elapsed": {"repr": "0:00:00.061768", "seconds": 0.061768}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_initialize_mock_data", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 127, "message": "Created 20 mock trades", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:34:34.834722+05:30", "timestamp": 1755777874.834722}}}
{"text": "2025-08-21 17:34:34.835 | INFO     | app.services.dhan_client:_initialize_mock_data:128 - Mock data initialization completed successfully\n", "record": {"elapsed": {"repr": "0:00:00.062484", "seconds": 0.062484}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_initialize_mock_data", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 128, "message": "Mock data initialization completed successfully", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:34:34.835438+05:30", "timestamp": 1755777874.835438}}}
{"text": "2025-08-21 17:34:34.861 | INFO     | app.main:<module>:38 - Starting Dhan Automation Backend Application\n", "record": {"elapsed": {"repr": "0:00:00.088758", "seconds": 0.088758}, "exception": null, "extra": {}, "file": {"name": "main.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\main.py"}, "function": "<module>", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 38, "message": "Starting Dhan Automation Backend Application", "module": "main", "name": "app.main", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:34:34.861712+05:30", "timestamp": 1755777874.861712}}}
{"text": "2025-08-21 17:34:34.864 | INFO     | app.ws.live:startup_event:551 - Starting WebSocket polling...\n", "record": {"elapsed": {"repr": "0:00:00.091906", "seconds": 0.091906}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "startup_event", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 551, "message": "Starting WebSocket polling...", "module": "live", "name": "app.ws.live", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:34:34.864860+05:30", "timestamp": 1755777874.86486}}}
{"text": "2025-08-21 17:34:34.865 | INFO     | app.main:startup_event:30 - Dhan Automation Backend Application started successfully\n", "record": {"elapsed": {"repr": "0:00:00.092722", "seconds": 0.092722}, "exception": null, "extra": {}, "file": {"name": "main.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\main.py"}, "function": "startup_event", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 30, "message": "Dhan Automation Backend Application started successfully", "module": "main", "name": "app.main", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:34:34.865676+05:30", "timestamp": 1755777874.865676}}}
{"text": "2025-08-21 17:34:34.866 | INFO     | app.main:startup_event:31 - Using MOCK data mode\n", "record": {"elapsed": {"repr": "0:00:00.093346", "seconds": 0.093346}, "exception": null, "extra": {}, "file": {"name": "main.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\main.py"}, "function": "startup_event", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 31, "message": "Using MOCK data mode", "module": "main", "name": "app.main", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:34:34.866300+05:30", "timestamp": 1755777874.8663}}}
{"text": "2025-08-21 17:34:34.866 | INFO     | app.ws.live:startup_event:551 - Starting WebSocket polling...\n", "record": {"elapsed": {"repr": "0:00:00.094036", "seconds": 0.094036}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "startup_event", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 551, "message": "Starting WebSocket polling...", "module": "live", "name": "app.ws.live", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:34:34.866990+05:30", "timestamp": 1755777874.86699}}}
{"text": "2025-08-21 17:34:36.629 | DEBUG    | app.ws.live:emit_delta:408 - Emitted positions delta: seq=1\n", "record": {"elapsed": {"repr": "0:00:01.856350", "seconds": 1.85635}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "emit_delta", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 408, "message": "Emitted positions delta: seq=1", "module": "live", "name": "app.ws.live", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:34:36.629304+05:30", "timestamp": 1755777876.629304}}}
{"text": "2025-08-21 17:34:36.630 | INFO     | app.services.dhan_client:get_pnl:489 - Starting accurate P&L calculation\n", "record": {"elapsed": {"repr": "0:00:01.857210", "seconds": 1.85721}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 489, "message": "Starting accurate P&L calculation", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:34:36.630164+05:30", "timestamp": 1755777876.630164}}}
{"text": "2025-08-21 17:34:36.630 | INFO     | app.services.dhan_client:get_pnl:491 - Fetched 5 positions\n", "record": {"elapsed": {"repr": "0:00:01.857874", "seconds": 1.857874}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 491, "message": "Fetched 5 positions", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:34:36.630828+05:30", "timestamp": 1755777876.630828}}}
{"text": "2025-08-21 17:34:36.631 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for RELIANCE: unrealized=-1246442.69, today=-1246442.69\n", "record": {"elapsed": {"repr": "0:00:01.858700", "seconds": 1.8587}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for RELIANCE: unrealized=-1246442.69, today=-1246442.69", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:34:36.631654+05:30", "timestamp": 1755777876.631654}}}
{"text": "2025-08-21 17:34:36.632 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for TCS: unrealized=467072.76, today=467072.76\n", "record": {"elapsed": {"repr": "0:00:01.859371", "seconds": 1.859371}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for TCS: unrealized=467072.76, today=467072.76", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:34:36.632325+05:30", "timestamp": 1755777876.632325}}}
{"text": "2025-08-21 17:34:36.632 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for HDFC: unrealized=-132519.19, today=-132519.19\n", "record": {"elapsed": {"repr": "0:00:01.860012", "seconds": 1.860012}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for HDFC: unrealized=-132519.19, today=-132519.19", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:34:36.632966+05:30", "timestamp": 1755777876.632966}}}
{"text": "2025-08-21 17:34:36.633 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for INFY: unrealized=-2612585.4, today=-2612585.4\n", "record": {"elapsed": {"repr": "0:00:01.860733", "seconds": 1.860733}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for INFY: unrealized=-2612585.4, today=-2612585.4", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:34:36.633687+05:30", "timestamp": 1755777876.633687}}}
{"text": "2025-08-21 17:34:36.634 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for ICICIBANK: unrealized=-400950.34, today=-400950.34\n", "record": {"elapsed": {"repr": "0:00:01.861551", "seconds": 1.861551}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for ICICIBANK: unrealized=-400950.34, today=-400950.34", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:34:36.634505+05:30", "timestamp": 1755777876.634505}}}
{"text": "2025-08-21 17:34:36.635 | INFO     | app.services.dhan_client:get_pnl:545 - Calculated totals - realized: 0.0, unrealized: -3925424.86, day: -3925424.86\n", "record": {"elapsed": {"repr": "0:00:01.862195", "seconds": 1.862195}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 545, "message": "Calculated totals - realized: 0.0, unrealized: -3925424.86, day: -3925424.86", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:34:36.635149+05:30", "timestamp": 1755777876.635149}}}
{"text": "2025-08-21 17:34:36.635 | DEBUG    | app.services.dhan_client:get_pnl:554 - PnL consistency check passed: drift=‚Çπ0.00\n", "record": {"elapsed": {"repr": "0:00:01.862886", "seconds": 1.862886}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 554, "message": "PnL consistency check passed: drift=‚Çπ0.00", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:34:36.635840+05:30", "timestamp": 1755777876.63584}}}
{"text": "2025-08-21 17:34:36.636 | DEBUG    | app.services.dhan_client:get_pnl:558 - Creating PnLTotals...\n", "record": {"elapsed": {"repr": "0:00:01.863463", "seconds": 1.863463}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 558, "message": "Creating PnLTotals...", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:34:36.636417+05:30", "timestamp": 1755777876.636417}}}
{"text": "2025-08-21 17:34:36.637 | DEBUG    | app.services.dhan_client:get_pnl:565 - PnLTotals created successfully\n", "record": {"elapsed": {"repr": "0:00:01.864237", "seconds": 1.864237}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 565, "message": "PnLTotals created successfully", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:34:36.637191+05:30", "timestamp": 1755777876.637191}}}
{"text": "2025-08-21 17:34:36.637 | DEBUG    | app.services.dhan_client:get_pnl:574 - Creating PnL model...\n", "record": {"elapsed": {"repr": "0:00:01.864833", "seconds": 1.864833}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 574, "message": "Creating PnL model...", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:34:36.637787+05:30", "timestamp": 1755777876.637787}}}
{"text": "2025-08-21 17:34:36.638 | DEBUG    | app.services.dhan_client:get_pnl:575 - Model fields: totals=<class 'app.models.schemas.PnLTotals'>, perSymbol=5, updated_at=2025-08-21 17:34:36.631556+05:30, trading_day=2025-08-21\n", "record": {"elapsed": {"repr": "0:00:01.865658", "seconds": 1.865658}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 575, "message": "Model fields: totals=<class 'app.models.schemas.PnLTotals'>, perSymbol=5, updated_at=2025-08-21 17:34:36.631556+05:30, trading_day=2025-08-21", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:34:36.638612+05:30", "timestamp": 1755777876.638612}}}
{"text": "2025-08-21 17:34:36.639 | DEBUG    | app.services.dhan_client:get_pnl:584 - Created PnL model: totals=PnLTotals(realized=0.0, unrealized=-3925424.86, day=-3925424.86, currency='INR') per_symbol=[PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=913, avg=1944.27, ltp=579.05, unrealized=-1246442.69, today_pnl=-1246442.69), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=457, avg=1390.48, ltp=368.44, unrealized=467072.76, today_pnl=467072.76), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=196, avg=1021.99, ltp=345.87, unrealized=-132519.19, today_pnl=-132519.19), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=1708, avg=426.15, ltp=1955.77, unrealized=-2612585.4, today_pnl=-2612585.4), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=931, avg=756.68, ltp=326.01, unrealized=-400950.34, today_pnl=-400950.34)] updated_at=datetime.datetime(2025, 8, 21, 17, 34, 36, 631556, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))) trading_day='2025-08-21'\n", "record": {"elapsed": {"repr": "0:00:01.866706", "seconds": 1.866706}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 584, "message": "Created PnL model: totals=PnLTotals(realized=0.0, unrealized=-3925424.86, day=-3925424.86, currency='INR') per_symbol=[PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=913, avg=1944.27, ltp=579.05, unrealized=-1246442.69, today_pnl=-1246442.69), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=457, avg=1390.48, ltp=368.44, unrealized=467072.76, today_pnl=467072.76), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=196, avg=1021.99, ltp=345.87, unrealized=-132519.19, today_pnl=-132519.19), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=1708, avg=426.15, ltp=1955.77, unrealized=-2612585.4, today_pnl=-2612585.4), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=931, avg=756.68, ltp=326.01, unrealized=-400950.34, today_pnl=-400950.34)] updated_at=datetime.datetime(2025, 8, 21, 17, 34, 36, 631556, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))) trading_day='2025-08-21'", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:34:36.639660+05:30", "timestamp": 1755777876.63966}}}
{"text": "2025-08-21 17:34:36.641 | DEBUG    | app.services.dhan_client:get_pnl:585 - PnL model fields: {'totals': PnLTotals(realized=0.0, unrealized=-3925424.86, day=-3925424.86, currency='INR'), 'per_symbol': [PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=913, avg=1944.27, ltp=579.05, unrealized=-1246442.69, today_pnl=-1246442.69), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=457, avg=1390.48, ltp=368.44, unrealized=467072.76, today_pnl=467072.76), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=196, avg=1021.99, ltp=345.87, unrealized=-132519.19, today_pnl=-132519.19), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=1708, avg=426.15, ltp=1955.77, unrealized=-2612585.4, today_pnl=-2612585.4), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=931, avg=756.68, ltp=326.01, unrealized=-400950.34, today_pnl=-400950.34)], 'updated_at': datetime.datetime(2025, 8, 21, 17, 34, 36, 631556, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))), 'trading_day': '2025-08-21'}\n", "record": {"elapsed": {"repr": "0:00:01.868277", "seconds": 1.868277}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 585, "message": "PnL model fields: {'totals': PnLTotals(realized=0.0, unrealized=-3925424.86, day=-3925424.86, currency='INR'), 'per_symbol': [PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=913, avg=1944.27, ltp=579.05, unrealized=-1246442.69, today_pnl=-1246442.69), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=457, avg=1390.48, ltp=368.44, unrealized=467072.76, today_pnl=467072.76), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=196, avg=1021.99, ltp=345.87, unrealized=-132519.19, today_pnl=-132519.19), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=1708, avg=426.15, ltp=1955.77, unrealized=-2612585.4, today_pnl=-2612585.4), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=931, avg=756.68, ltp=326.01, unrealized=-400950.34, today_pnl=-400950.34)], 'updated_at': datetime.datetime(2025, 8, 21, 17, 34, 36, 631556, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))), 'trading_day': '2025-08-21'}", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:34:36.641231+05:30", "timestamp": 1755777876.641231}}}
{"text": "2025-08-21 17:34:36.642 | INFO     | app.services.dhan_client:get_pnl:587 - P&L calculation completed successfully: 5 symbols, unrealized=‚Çπ-3925424.86\n", "record": {"elapsed": {"repr": "0:00:01.869409", "seconds": 1.869409}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 587, "message": "P&L calculation completed successfully: 5 symbols, unrealized=‚Çπ-3925424.86", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:34:36.642363+05:30", "timestamp": 1755777876.642363}}}
{"text": "2025-08-21 17:34:36.643 | DEBUG    | app.ws.live:emit_delta:408 - Emitted pnl delta: seq=2\n", "record": {"elapsed": {"repr": "0:00:01.870583", "seconds": 1.870583}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "emit_delta", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 408, "message": "Emitted pnl delta: seq=2", "module": "live", "name": "app.ws.live", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:34:36.643537+05:30", "timestamp": 1755777876.643537}}}
{"text": "2025-08-21 17:34:36.838 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:02.065883", "seconds": 2.065883}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 22636, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 17:34:36.838837+05:30", "timestamp": 1755777876.838837}}}
{"text": "2025-08-21 17:34:36.840 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:02.067268", "seconds": 2.067268}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 22636, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 17:34:36.840222+05:30", "timestamp": 1755777876.840222}}}
{"text": "2025-08-21 17:34:36.841 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:02.068504", "seconds": 2.068504}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 22636, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 17:34:36.841458+05:30", "timestamp": 1755777876.841458}}}
{"text": "2025-08-21 17:34:36.842 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:02.069590", "seconds": 2.06959}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 22636, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 17:34:36.842544+05:30", "timestamp": 1755777876.842544}}}
{"text": "2025-08-21 17:34:36.844 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:02.071070", "seconds": 2.07107}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 22636, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 17:34:36.844024+05:30", "timestamp": 1755777876.844024}}}
{"text": "2025-08-21 17:34:36.845 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:02.072427", "seconds": 2.072427}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 22636, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 17:34:36.845381+05:30", "timestamp": 1755777876.845381}}}
{"text": "2025-08-21 17:34:36.846 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:02.073781", "seconds": 2.073781}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 22636, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 17:34:36.846735+05:30", "timestamp": 1755777876.846735}}}
{"text": "2025-08-21 17:34:36.848 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:02.075123", "seconds": 2.075123}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 22636, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 17:34:36.848077+05:30", "timestamp": 1755777876.848077}}}
{"text": "2025-08-21 17:34:36.849 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:02.076547", "seconds": 2.076547}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 22636, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 17:34:36.849501+05:30", "timestamp": 1755777876.849501}}}
{"text": "2025-08-21 17:34:36.850 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:02.077926", "seconds": 2.077926}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 22636, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 17:34:36.850880+05:30", "timestamp": 1755777876.85088}}}
{"text": "2025-08-21 17:34:37.632 | DEBUG    | app.ws.live:emit_delta:408 - Emitted orders delta: seq=3\n", "record": {"elapsed": {"repr": "0:00:02.859687", "seconds": 2.859687}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "emit_delta", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 408, "message": "Emitted orders delta: seq=3", "module": "live", "name": "app.ws.live", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:34:37.632641+05:30", "timestamp": 1755777877.632641}}}
{"text": "2025-08-21 17:34:38.273 | DEBUG    | app.ws.live:emit_delta:408 - Emitted positions delta: seq=4\n", "record": {"elapsed": {"repr": "0:00:03.500949", "seconds": 3.500949}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "emit_delta", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 408, "message": "Emitted positions delta: seq=4", "module": "live", "name": "app.ws.live", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:34:38.273903+05:30", "timestamp": 1755777878.273903}}}
{"text": "2025-08-21 17:34:38.305 | INFO     | app.services.dhan_client:get_pnl:489 - Starting accurate P&L calculation\n", "record": {"elapsed": {"repr": "0:00:03.532851", "seconds": 3.532851}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 489, "message": "Starting accurate P&L calculation", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:34:38.305805+05:30", "timestamp": 1755777878.305805}}}
{"text": "2025-08-21 17:34:38.307 | INFO     | app.services.dhan_client:get_pnl:491 - Fetched 5 positions\n", "record": {"elapsed": {"repr": "0:00:03.534123", "seconds": 3.534123}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 491, "message": "Fetched 5 positions", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:34:38.307077+05:30", "timestamp": 1755777878.307077}}}
{"text": "2025-08-21 17:34:38.308 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for RELIANCE: unrealized=-1240774.8, today=-1240774.8\n", "record": {"elapsed": {"repr": "0:00:03.535088", "seconds": 3.535088}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for RELIANCE: unrealized=-1240774.8, today=-1240774.8", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:34:38.308042+05:30", "timestamp": 1755777878.308042}}}
{"text": "2025-08-21 17:34:38.308 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for TCS: unrealized=465153.17, today=465153.17\n", "record": {"elapsed": {"repr": "0:00:03.535823", "seconds": 3.535823}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for TCS: unrealized=465153.17, today=465153.17", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:34:38.308777+05:30", "timestamp": 1755777878.308777}}}
{"text": "2025-08-21 17:34:38.309 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for HDFC: unrealized=-132817.38, today=-132817.38\n", "record": {"elapsed": {"repr": "0:00:03.536531", "seconds": 3.536531}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for HDFC: unrealized=-132817.38, today=-132817.38", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:34:38.309485+05:30", "timestamp": 1755777878.309485}}}
{"text": "2025-08-21 17:34:38.310 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for INFY: unrealized=-2656888.23, today=-2656888.23\n", "record": {"elapsed": {"repr": "0:00:03.537199", "seconds": 3.537199}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for INFY: unrealized=-2656888.23, today=-2656888.23", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:34:38.310153+05:30", "timestamp": 1755777878.310153}}}
{"text": "2025-08-21 17:34:38.311 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for ICICIBANK: unrealized=-395989.39, today=-395989.39\n", "record": {"elapsed": {"repr": "0:00:03.538053", "seconds": 3.538053}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for ICICIBANK: unrealized=-395989.39, today=-395989.39", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:34:38.311007+05:30", "timestamp": 1755777878.311007}}}
{"text": "2025-08-21 17:34:38.312 | INFO     | app.services.dhan_client:get_pnl:545 - Calculated totals - realized: 0.0, unrealized: -3961316.63, day: -3961316.63\n", "record": {"elapsed": {"repr": "0:00:03.539110", "seconds": 3.53911}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 545, "message": "Calculated totals - realized: 0.0, unrealized: -3961316.63, day: -3961316.63", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:34:38.312064+05:30", "timestamp": 1755777878.312064}}}
{"text": "2025-08-21 17:34:38.313 | DEBUG    | app.services.dhan_client:get_pnl:554 - PnL consistency check passed: drift=‚Çπ0.00\n", "record": {"elapsed": {"repr": "0:00:03.540673", "seconds": 3.540673}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 554, "message": "PnL consistency check passed: drift=‚Çπ0.00", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:34:38.313627+05:30", "timestamp": 1755777878.313627}}}
{"text": "2025-08-21 17:34:38.315 | DEBUG    | app.services.dhan_client:get_pnl:558 - Creating PnLTotals...\n", "record": {"elapsed": {"repr": "0:00:03.542839", "seconds": 3.542839}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 558, "message": "Creating PnLTotals...", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:34:38.315793+05:30", "timestamp": 1755777878.315793}}}
{"text": "2025-08-21 17:34:38.316 | DEBUG    | app.services.dhan_client:get_pnl:565 - PnLTotals created successfully\n", "record": {"elapsed": {"repr": "0:00:03.543857", "seconds": 3.543857}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 565, "message": "PnLTotals created successfully", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:34:38.316811+05:30", "timestamp": 1755777878.316811}}}
{"text": "2025-08-21 17:34:38.318 | DEBUG    | app.services.dhan_client:get_pnl:574 - Creating PnL model...\n", "record": {"elapsed": {"repr": "0:00:03.545103", "seconds": 3.545103}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 574, "message": "Creating PnL model...", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:34:38.318057+05:30", "timestamp": 1755777878.318057}}}
{"text": "2025-08-21 17:34:38.318 | DEBUG    | app.services.dhan_client:get_pnl:575 - Model fields: totals=<class 'app.models.schemas.PnLTotals'>, perSymbol=5, updated_at=2025-08-21 17:34:38.307924+05:30, trading_day=2025-08-21\n", "record": {"elapsed": {"repr": "0:00:03.545969", "seconds": 3.545969}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 575, "message": "Model fields: totals=<class 'app.models.schemas.PnLTotals'>, perSymbol=5, updated_at=2025-08-21 17:34:38.307924+05:30, trading_day=2025-08-21", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:34:38.318923+05:30", "timestamp": 1755777878.318923}}}
{"text": "2025-08-21 17:34:38.320 | DEBUG    | app.services.dhan_client:get_pnl:584 - Created PnL model: totals=PnLTotals(realized=0.0, unrealized=-3961316.63, day=-3961316.63, currency='INR') per_symbol=[PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=913, avg=1944.27, ltp=585.26, unrealized=-1240774.8, today_pnl=-1240774.8), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=457, avg=1390.48, ltp=372.64, unrealized=465153.17, today_pnl=465153.17), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=196, avg=1021.99, ltp=344.35, unrealized=-132817.38, today_pnl=-132817.38), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=1708, avg=426.15, ltp=1981.71, unrealized=-2656888.23, today_pnl=-2656888.23), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=931, avg=756.68, ltp=331.34, unrealized=-395989.39, today_pnl=-395989.39)] updated_at=datetime.datetime(2025, 8, 21, 17, 34, 38, 307924, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))) trading_day='2025-08-21'\n", "record": {"elapsed": {"repr": "0:00:03.547197", "seconds": 3.547197}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 584, "message": "Created PnL model: totals=PnLTotals(realized=0.0, unrealized=-3961316.63, day=-3961316.63, currency='INR') per_symbol=[PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=913, avg=1944.27, ltp=585.26, unrealized=-1240774.8, today_pnl=-1240774.8), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=457, avg=1390.48, ltp=372.64, unrealized=465153.17, today_pnl=465153.17), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=196, avg=1021.99, ltp=344.35, unrealized=-132817.38, today_pnl=-132817.38), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=1708, avg=426.15, ltp=1981.71, unrealized=-2656888.23, today_pnl=-2656888.23), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=931, avg=756.68, ltp=331.34, unrealized=-395989.39, today_pnl=-395989.39)] updated_at=datetime.datetime(2025, 8, 21, 17, 34, 38, 307924, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))) trading_day='2025-08-21'", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:34:38.320151+05:30", "timestamp": 1755777878.320151}}}
{"text": "2025-08-21 17:34:38.322 | DEBUG    | app.services.dhan_client:get_pnl:585 - PnL model fields: {'totals': PnLTotals(realized=0.0, unrealized=-3961316.63, day=-3961316.63, currency='INR'), 'per_symbol': [PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=913, avg=1944.27, ltp=585.26, unrealized=-1240774.8, today_pnl=-1240774.8), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=457, avg=1390.48, ltp=372.64, unrealized=465153.17, today_pnl=465153.17), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=196, avg=1021.99, ltp=344.35, unrealized=-132817.38, today_pnl=-132817.38), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=1708, avg=426.15, ltp=1981.71, unrealized=-2656888.23, today_pnl=-2656888.23), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=931, avg=756.68, ltp=331.34, unrealized=-395989.39, today_pnl=-395989.39)], 'updated_at': datetime.datetime(2025, 8, 21, 17, 34, 38, 307924, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))), 'trading_day': '2025-08-21'}\n", "record": {"elapsed": {"repr": "0:00:03.549913", "seconds": 3.549913}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 585, "message": "PnL model fields: {'totals': PnLTotals(realized=0.0, unrealized=-3961316.63, day=-3961316.63, currency='INR'), 'per_symbol': [PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=913, avg=1944.27, ltp=585.26, unrealized=-1240774.8, today_pnl=-1240774.8), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=457, avg=1390.48, ltp=372.64, unrealized=465153.17, today_pnl=465153.17), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=196, avg=1021.99, ltp=344.35, unrealized=-132817.38, today_pnl=-132817.38), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=1708, avg=426.15, ltp=1981.71, unrealized=-2656888.23, today_pnl=-2656888.23), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=931, avg=756.68, ltp=331.34, unrealized=-395989.39, today_pnl=-395989.39)], 'updated_at': datetime.datetime(2025, 8, 21, 17, 34, 38, 307924, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))), 'trading_day': '2025-08-21'}", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:34:38.322867+05:30", "timestamp": 1755777878.322867}}}
{"text": "2025-08-21 17:34:38.324 | INFO     | app.services.dhan_client:get_pnl:587 - P&L calculation completed successfully: 5 symbols, unrealized=‚Çπ-3961316.63\n", "record": {"elapsed": {"repr": "0:00:03.551145", "seconds": 3.551145}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 587, "message": "P&L calculation completed successfully: 5 symbols, unrealized=‚Çπ-3961316.63", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:34:38.324099+05:30", "timestamp": 1755777878.324099}}}
{"text": "2025-08-21 17:34:38.325 | DEBUG    | app.ws.live:emit_delta:408 - Emitted pnl delta: seq=5\n", "record": {"elapsed": {"repr": "0:00:03.552413", "seconds": 3.552413}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "emit_delta", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 408, "message": "Emitted pnl delta: seq=5", "module": "live", "name": "app.ws.live", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:34:38.325367+05:30", "timestamp": 1755777878.325367}}}
{"text": "2025-08-21 17:34:38.852 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:04.079895", "seconds": 4.079895}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 22636, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 17:34:38.852849+05:30", "timestamp": 1755777878.852849}}}
{"text": "2025-08-21 17:34:38.853 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:04.080814", "seconds": 4.080814}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 22636, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 17:34:38.853768+05:30", "timestamp": 1755777878.853768}}}
{"text": "2025-08-21 17:34:38.854 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:04.081481", "seconds": 4.081481}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 22636, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 17:34:38.854435+05:30", "timestamp": 1755777878.854435}}}
{"text": "2025-08-21 17:34:38.855 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:04.082083", "seconds": 4.082083}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 22636, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 17:34:38.855037+05:30", "timestamp": 1755777878.855037}}}
{"text": "2025-08-21 17:34:38.855 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:04.082720", "seconds": 4.08272}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 22636, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 17:34:38.855674+05:30", "timestamp": 1755777878.855674}}}
{"text": "2025-08-21 17:34:38.856 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:04.083446", "seconds": 4.083446}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 22636, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 17:34:38.856400+05:30", "timestamp": 1755777878.8564}}}
{"text": "2025-08-21 17:34:38.857 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:04.084111", "seconds": 4.084111}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 22636, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 17:34:38.857065+05:30", "timestamp": 1755777878.857065}}}
{"text": "2025-08-21 17:34:38.857 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:04.084771", "seconds": 4.084771}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 22636, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 17:34:38.857725+05:30", "timestamp": 1755777878.857725}}}
{"text": "2025-08-21 17:34:38.858 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:04.085423", "seconds": 4.085423}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 22636, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 17:34:38.858377+05:30", "timestamp": 1755777878.858377}}}
{"text": "2025-08-21 17:34:38.859 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:04.086179", "seconds": 4.086179}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 22636, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 17:34:38.859133+05:30", "timestamp": 1755777878.859133}}}
{"text": "2025-08-21 17:34:40.236 | DEBUG    | app.ws.live:emit_delta:408 - Emitted positions delta: seq=6\n", "record": {"elapsed": {"repr": "0:00:05.463344", "seconds": 5.463344}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "emit_delta", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 408, "message": "Emitted positions delta: seq=6", "module": "live", "name": "app.ws.live", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:34:40.236298+05:30", "timestamp": 1755777880.236298}}}
{"text": "2025-08-21 17:34:40.314 | INFO     | app.services.dhan_client:get_pnl:489 - Starting accurate P&L calculation\n", "record": {"elapsed": {"repr": "0:00:05.541463", "seconds": 5.541463}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 489, "message": "Starting accurate P&L calculation", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:34:40.314417+05:30", "timestamp": 1755777880.314417}}}
{"text": "2025-08-21 17:34:40.315 | INFO     | app.services.dhan_client:get_pnl:491 - Fetched 5 positions\n", "record": {"elapsed": {"repr": "0:00:05.542971", "seconds": 5.542971}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 491, "message": "Fetched 5 positions", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:34:40.315925+05:30", "timestamp": 1755777880.315925}}}
{"text": "2025-08-21 17:34:40.317 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for RELIANCE: unrealized=-1247748.69, today=-1247748.69\n", "record": {"elapsed": {"repr": "0:00:05.544406", "seconds": 5.544406}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for RELIANCE: unrealized=-1247748.69, today=-1247748.69", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:34:40.317360+05:30", "timestamp": 1755777880.31736}}}
{"text": "2025-08-21 17:34:40.318 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for TCS: unrealized=464844.64, today=464844.64\n", "record": {"elapsed": {"repr": "0:00:05.545927", "seconds": 5.545927}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for TCS: unrealized=464844.64, today=464844.64", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:34:40.318881+05:30", "timestamp": 1755777880.318881}}}
{"text": "2025-08-21 17:34:40.320 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for HDFC: unrealized=-131817.86, today=-131817.86\n", "record": {"elapsed": {"repr": "0:00:05.547291", "seconds": 5.547291}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for HDFC: unrealized=-131817.86, today=-131817.86", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:34:40.320245+05:30", "timestamp": 1755777880.320245}}}
{"text": "2025-08-21 17:34:40.322 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for INFY: unrealized=-2615649.15, today=-2615649.15\n", "record": {"elapsed": {"repr": "0:00:05.549393", "seconds": 5.549393}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for INFY: unrealized=-2615649.15, today=-2615649.15", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:34:40.322347+05:30", "timestamp": 1755777880.322347}}}
{"text": "2025-08-21 17:34:40.324 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for ICICIBANK: unrealized=-398384.92, today=-398384.92\n", "record": {"elapsed": {"repr": "0:00:05.551615", "seconds": 5.551615}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for ICICIBANK: unrealized=-398384.92, today=-398384.92", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:34:40.324569+05:30", "timestamp": 1755777880.324569}}}
{"text": "2025-08-21 17:34:40.326 | INFO     | app.services.dhan_client:get_pnl:545 - Calculated totals - realized: 0.0, unrealized: -3928755.98, day: -3928755.98\n", "record": {"elapsed": {"repr": "0:00:05.553887", "seconds": 5.553887}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 545, "message": "Calculated totals - realized: 0.0, unrealized: -3928755.98, day: -3928755.98", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:34:40.326841+05:30", "timestamp": 1755777880.326841}}}
{"text": "2025-08-21 17:34:40.329 | DEBUG    | app.services.dhan_client:get_pnl:554 - PnL consistency check passed: drift=‚Çπ0.00\n", "record": {"elapsed": {"repr": "0:00:05.556139", "seconds": 5.556139}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 554, "message": "PnL consistency check passed: drift=‚Çπ0.00", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:34:40.329093+05:30", "timestamp": 1755777880.329093}}}
{"text": "2025-08-21 17:34:40.331 | DEBUG    | app.services.dhan_client:get_pnl:558 - Creating PnLTotals...\n", "record": {"elapsed": {"repr": "0:00:05.558491", "seconds": 5.558491}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 558, "message": "Creating PnLTotals...", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:34:40.331445+05:30", "timestamp": 1755777880.331445}}}
{"text": "2025-08-21 17:34:40.333 | DEBUG    | app.services.dhan_client:get_pnl:565 - PnLTotals created successfully\n", "record": {"elapsed": {"repr": "0:00:05.560704", "seconds": 5.560704}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 565, "message": "PnLTotals created successfully", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:34:40.333658+05:30", "timestamp": 1755777880.333658}}}
{"text": "2025-08-21 17:34:40.335 | DEBUG    | app.services.dhan_client:get_pnl:574 - Creating PnL model...\n", "record": {"elapsed": {"repr": "0:00:05.562742", "seconds": 5.562742}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 574, "message": "Creating PnL model...", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:34:40.335696+05:30", "timestamp": 1755777880.335696}}}
{"text": "2025-08-21 17:34:40.337 | DEBUG    | app.services.dhan_client:get_pnl:575 - Model fields: totals=<class 'app.models.schemas.PnLTotals'>, perSymbol=5, updated_at=2025-08-21 17:34:40.317164+05:30, trading_day=2025-08-21\n", "record": {"elapsed": {"repr": "0:00:05.564508", "seconds": 5.564508}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 575, "message": "Model fields: totals=<class 'app.models.schemas.PnLTotals'>, perSymbol=5, updated_at=2025-08-21 17:34:40.317164+05:30, trading_day=2025-08-21", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:34:40.337462+05:30", "timestamp": 1755777880.337462}}}
{"text": "2025-08-21 17:34:40.340 | DEBUG    | app.services.dhan_client:get_pnl:584 - Created PnL model: totals=PnLTotals(realized=0.0, unrealized=-3928755.98, day=-3928755.98, currency='INR') per_symbol=[PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=913, avg=1944.27, ltp=577.62, unrealized=-1247748.69, today_pnl=-1247748.69), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=457, avg=1390.48, ltp=373.31, unrealized=464844.64, today_pnl=464844.64), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=196, avg=1021.99, ltp=349.45, unrealized=-131817.86, today_pnl=-131817.86), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=1708, avg=426.15, ltp=1957.56, unrealized=-2615649.15, today_pnl=-2615649.15), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=931, avg=756.68, ltp=328.77, unrealized=-398384.92, today_pnl=-398384.92)] updated_at=datetime.datetime(2025, 8, 21, 17, 34, 40, 317164, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))) trading_day='2025-08-21'\n", "record": {"elapsed": {"repr": "0:00:05.567765", "seconds": 5.567765}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 584, "message": "Created PnL model: totals=PnLTotals(realized=0.0, unrealized=-3928755.98, day=-3928755.98, currency='INR') per_symbol=[PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=913, avg=1944.27, ltp=577.62, unrealized=-1247748.69, today_pnl=-1247748.69), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=457, avg=1390.48, ltp=373.31, unrealized=464844.64, today_pnl=464844.64), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=196, avg=1021.99, ltp=349.45, unrealized=-131817.86, today_pnl=-131817.86), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=1708, avg=426.15, ltp=1957.56, unrealized=-2615649.15, today_pnl=-2615649.15), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=931, avg=756.68, ltp=328.77, unrealized=-398384.92, today_pnl=-398384.92)] updated_at=datetime.datetime(2025, 8, 21, 17, 34, 40, 317164, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))) trading_day='2025-08-21'", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:34:40.340719+05:30", "timestamp": 1755777880.340719}}}
{"text": "2025-08-21 17:34:40.344 | DEBUG    | app.services.dhan_client:get_pnl:585 - PnL model fields: {'totals': PnLTotals(realized=0.0, unrealized=-3928755.98, day=-3928755.98, currency='INR'), 'per_symbol': [PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=913, avg=1944.27, ltp=577.62, unrealized=-1247748.69, today_pnl=-1247748.69), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=457, avg=1390.48, ltp=373.31, unrealized=464844.64, today_pnl=464844.64), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=196, avg=1021.99, ltp=349.45, unrealized=-131817.86, today_pnl=-131817.86), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=1708, avg=426.15, ltp=1957.56, unrealized=-2615649.15, today_pnl=-2615649.15), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=931, avg=756.68, ltp=328.77, unrealized=-398384.92, today_pnl=-398384.92)], 'updated_at': datetime.datetime(2025, 8, 21, 17, 34, 40, 317164, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))), 'trading_day': '2025-08-21'}\n", "record": {"elapsed": {"repr": "0:00:05.571144", "seconds": 5.571144}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 585, "message": "PnL model fields: {'totals': PnLTotals(realized=0.0, unrealized=-3928755.98, day=-3928755.98, currency='INR'), 'per_symbol': [PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=913, avg=1944.27, ltp=577.62, unrealized=-1247748.69, today_pnl=-1247748.69), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=457, avg=1390.48, ltp=373.31, unrealized=464844.64, today_pnl=464844.64), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=196, avg=1021.99, ltp=349.45, unrealized=-131817.86, today_pnl=-131817.86), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=1708, avg=426.15, ltp=1957.56, unrealized=-2615649.15, today_pnl=-2615649.15), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=931, avg=756.68, ltp=328.77, unrealized=-398384.92, today_pnl=-398384.92)], 'updated_at': datetime.datetime(2025, 8, 21, 17, 34, 40, 317164, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))), 'trading_day': '2025-08-21'}", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:34:40.344098+05:30", "timestamp": 1755777880.344098}}}
{"text": "2025-08-21 17:34:40.348 | INFO     | app.services.dhan_client:get_pnl:587 - P&L calculation completed successfully: 5 symbols, unrealized=‚Çπ-3928755.98\n", "record": {"elapsed": {"repr": "0:00:05.575687", "seconds": 5.575687}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 587, "message": "P&L calculation completed successfully: 5 symbols, unrealized=‚Çπ-3928755.98", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:34:40.348641+05:30", "timestamp": 1755777880.348641}}}
{"text": "2025-08-21 17:34:40.351 | DEBUG    | app.ws.live:emit_delta:408 - Emitted pnl delta: seq=7\n", "record": {"elapsed": {"repr": "0:00:05.578902", "seconds": 5.578902}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "emit_delta", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 408, "message": "Emitted pnl delta: seq=7", "module": "live", "name": "app.ws.live", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:34:40.351856+05:30", "timestamp": 1755777880.351856}}}
{"text": "2025-08-21 17:34:40.860 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:06.087388", "seconds": 6.087388}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 22636, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 17:34:40.860342+05:30", "timestamp": 1755777880.860342}}}
{"text": "2025-08-21 17:34:40.862 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:06.089640", "seconds": 6.08964}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 22636, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 17:34:40.862594+05:30", "timestamp": 1755777880.862594}}}
{"text": "2025-08-21 17:34:40.864 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:06.091430", "seconds": 6.09143}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 22636, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 17:34:40.864384+05:30", "timestamp": 1755777880.864384}}}
{"text": "2025-08-21 17:34:40.866 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:06.093246", "seconds": 6.093246}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 22636, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 17:34:40.866200+05:30", "timestamp": 1755777880.8662}}}
{"text": "2025-08-21 17:34:40.868 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:06.095088", "seconds": 6.095088}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 22636, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 17:34:40.868042+05:30", "timestamp": 1755777880.868042}}}
{"text": "2025-08-21 17:34:40.869 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:06.096893", "seconds": 6.096893}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 22636, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 17:34:40.869847+05:30", "timestamp": 1755777880.869847}}}
{"text": "2025-08-21 17:34:40.872 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:06.099217", "seconds": 6.099217}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 22636, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 17:34:40.872171+05:30", "timestamp": 1755777880.872171}}}
{"text": "2025-08-21 17:34:40.874 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:06.101283", "seconds": 6.101283}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 22636, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 17:34:40.874237+05:30", "timestamp": 1755777880.874237}}}
{"text": "2025-08-21 17:34:40.876 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:06.103181", "seconds": 6.103181}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 22636, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 17:34:40.876135+05:30", "timestamp": 1755777880.876135}}}
{"text": "2025-08-21 17:34:40.877 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:06.105028", "seconds": 6.105028}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 22636, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 17:34:40.877982+05:30", "timestamp": 1755777880.877982}}}
{"text": "2025-08-21 17:34:42.185 | DEBUG    | app.ws.live:emit_delta:408 - Emitted positions delta: seq=8\n", "record": {"elapsed": {"repr": "0:00:07.412739", "seconds": 7.412739}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "emit_delta", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 408, "message": "Emitted positions delta: seq=8", "module": "live", "name": "app.ws.live", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:34:42.185693+05:30", "timestamp": 1755777882.185693}}}
{"text": "2025-08-21 17:34:42.354 | INFO     | app.services.dhan_client:get_pnl:489 - Starting accurate P&L calculation\n", "record": {"elapsed": {"repr": "0:00:07.581140", "seconds": 7.58114}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 489, "message": "Starting accurate P&L calculation", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:34:42.354094+05:30", "timestamp": 1755777882.354094}}}
{"text": "2025-08-21 17:34:42.355 | INFO     | app.services.dhan_client:get_pnl:491 - Fetched 5 positions\n", "record": {"elapsed": {"repr": "0:00:07.582114", "seconds": 7.582114}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 491, "message": "Fetched 5 positions", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:34:42.355068+05:30", "timestamp": 1755777882.355068}}}
{"text": "2025-08-21 17:34:42.356 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for RELIANCE: unrealized=-1253643.27, today=-1253643.27\n", "record": {"elapsed": {"repr": "0:00:07.583125", "seconds": 7.583125}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for RELIANCE: unrealized=-1253643.27, today=-1253643.27", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:34:42.356079+05:30", "timestamp": 1755777882.356079}}}
{"text": "2025-08-21 17:34:42.357 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for TCS: unrealized=465049.37, today=465049.37\n", "record": {"elapsed": {"repr": "0:00:07.584099", "seconds": 7.584099}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for TCS: unrealized=465049.37, today=465049.37", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:34:42.357053+05:30", "timestamp": 1755777882.357053}}}
{"text": "2025-08-21 17:34:42.357 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for HDFC: unrealized=-131077.29, today=-131077.29\n", "record": {"elapsed": {"repr": "0:00:07.585044", "seconds": 7.585044}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for HDFC: unrealized=-131077.29, today=-131077.29", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:34:42.357998+05:30", "timestamp": 1755777882.357998}}}
{"text": "2025-08-21 17:34:42.358 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for INFY: unrealized=-2606036.79, today=-2606036.79\n", "record": {"elapsed": {"repr": "0:00:07.585985", "seconds": 7.585985}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for INFY: unrealized=-2606036.79, today=-2606036.79", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:34:42.358939+05:30", "timestamp": 1755777882.358939}}}
{"text": "2025-08-21 17:34:42.359 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for ICICIBANK: unrealized=-395899.55, today=-395899.55\n", "record": {"elapsed": {"repr": "0:00:07.586765", "seconds": 7.586765}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for ICICIBANK: unrealized=-395899.55, today=-395899.55", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:34:42.359719+05:30", "timestamp": 1755777882.359719}}}
{"text": "2025-08-21 17:34:42.360 | INFO     | app.services.dhan_client:get_pnl:545 - Calculated totals - realized: 0.0, unrealized: -3921607.53, day: -3921607.53\n", "record": {"elapsed": {"repr": "0:00:07.587656", "seconds": 7.587656}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 545, "message": "Calculated totals - realized: 0.0, unrealized: -3921607.53, day: -3921607.53", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:34:42.360610+05:30", "timestamp": 1755777882.36061}}}
{"text": "2025-08-21 17:34:42.361 | DEBUG    | app.services.dhan_client:get_pnl:554 - PnL consistency check passed: drift=‚Çπ0.00\n", "record": {"elapsed": {"repr": "0:00:07.588412", "seconds": 7.588412}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 554, "message": "PnL consistency check passed: drift=‚Çπ0.00", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:34:42.361366+05:30", "timestamp": 1755777882.361366}}}
{"text": "2025-08-21 17:34:42.362 | DEBUG    | app.services.dhan_client:get_pnl:558 - Creating PnLTotals...\n", "record": {"elapsed": {"repr": "0:00:07.589254", "seconds": 7.589254}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 558, "message": "Creating PnLTotals...", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:34:42.362208+05:30", "timestamp": 1755777882.362208}}}
{"text": "2025-08-21 17:34:42.363 | DEBUG    | app.services.dhan_client:get_pnl:565 - PnLTotals created successfully\n", "record": {"elapsed": {"repr": "0:00:07.590151", "seconds": 7.590151}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 565, "message": "PnLTotals created successfully", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:34:42.363105+05:30", "timestamp": 1755777882.363105}}}
{"text": "2025-08-21 17:34:42.363 | DEBUG    | app.services.dhan_client:get_pnl:574 - Creating PnL model...\n", "record": {"elapsed": {"repr": "0:00:07.590961", "seconds": 7.590961}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 574, "message": "Creating PnL model...", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:34:42.363915+05:30", "timestamp": 1755777882.363915}}}
{"text": "2025-08-21 17:34:42.364 | DEBUG    | app.services.dhan_client:get_pnl:575 - Model fields: totals=<class 'app.models.schemas.PnLTotals'>, perSymbol=5, updated_at=2025-08-21 17:34:42.355944+05:30, trading_day=2025-08-21\n", "record": {"elapsed": {"repr": "0:00:07.591656", "seconds": 7.591656}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 575, "message": "Model fields: totals=<class 'app.models.schemas.PnLTotals'>, perSymbol=5, updated_at=2025-08-21 17:34:42.355944+05:30, trading_day=2025-08-21", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:34:42.364610+05:30", "timestamp": 1755777882.36461}}}
{"text": "2025-08-21 17:34:42.365 | DEBUG    | app.services.dhan_client:get_pnl:584 - Created PnL model: totals=PnLTotals(realized=0.0, unrealized=-3921607.53, day=-3921607.53, currency='INR') per_symbol=[PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=913, avg=1944.27, ltp=571.17, unrealized=-1253643.27, today_pnl=-1253643.27), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=457, avg=1390.48, ltp=372.87, unrealized=465049.37, today_pnl=465049.37), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=196, avg=1021.99, ltp=353.23, unrealized=-131077.29, today_pnl=-131077.29), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=1708, avg=426.15, ltp=1951.93, unrealized=-2606036.79, today_pnl=-2606036.79), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=931, avg=756.68, ltp=331.44, unrealized=-395899.55, today_pnl=-395899.55)] updated_at=datetime.datetime(2025, 8, 21, 17, 34, 42, 355944, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))) trading_day='2025-08-21'\n", "record": {"elapsed": {"repr": "0:00:07.592703", "seconds": 7.592703}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 584, "message": "Created PnL model: totals=PnLTotals(realized=0.0, unrealized=-3921607.53, day=-3921607.53, currency='INR') per_symbol=[PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=913, avg=1944.27, ltp=571.17, unrealized=-1253643.27, today_pnl=-1253643.27), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=457, avg=1390.48, ltp=372.87, unrealized=465049.37, today_pnl=465049.37), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=196, avg=1021.99, ltp=353.23, unrealized=-131077.29, today_pnl=-131077.29), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=1708, avg=426.15, ltp=1951.93, unrealized=-2606036.79, today_pnl=-2606036.79), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=931, avg=756.68, ltp=331.44, unrealized=-395899.55, today_pnl=-395899.55)] updated_at=datetime.datetime(2025, 8, 21, 17, 34, 42, 355944, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))) trading_day='2025-08-21'", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:34:42.365657+05:30", "timestamp": 1755777882.365657}}}
{"text": "2025-08-21 17:34:42.367 | DEBUG    | app.services.dhan_client:get_pnl:585 - PnL model fields: {'totals': PnLTotals(realized=0.0, unrealized=-3921607.53, day=-3921607.53, currency='INR'), 'per_symbol': [PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=913, avg=1944.27, ltp=571.17, unrealized=-1253643.27, today_pnl=-1253643.27), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=457, avg=1390.48, ltp=372.87, unrealized=465049.37, today_pnl=465049.37), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=196, avg=1021.99, ltp=353.23, unrealized=-131077.29, today_pnl=-131077.29), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=1708, avg=426.15, ltp=1951.93, unrealized=-2606036.79, today_pnl=-2606036.79), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=931, avg=756.68, ltp=331.44, unrealized=-395899.55, today_pnl=-395899.55)], 'updated_at': datetime.datetime(2025, 8, 21, 17, 34, 42, 355944, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))), 'trading_day': '2025-08-21'}\n", "record": {"elapsed": {"repr": "0:00:07.594623", "seconds": 7.594623}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 585, "message": "PnL model fields: {'totals': PnLTotals(realized=0.0, unrealized=-3921607.53, day=-3921607.53, currency='INR'), 'per_symbol': [PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=913, avg=1944.27, ltp=571.17, unrealized=-1253643.27, today_pnl=-1253643.27), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=457, avg=1390.48, ltp=372.87, unrealized=465049.37, today_pnl=465049.37), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=196, avg=1021.99, ltp=353.23, unrealized=-131077.29, today_pnl=-131077.29), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=1708, avg=426.15, ltp=1951.93, unrealized=-2606036.79, today_pnl=-2606036.79), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=931, avg=756.68, ltp=331.44, unrealized=-395899.55, today_pnl=-395899.55)], 'updated_at': datetime.datetime(2025, 8, 21, 17, 34, 42, 355944, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))), 'trading_day': '2025-08-21'}", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:34:42.367577+05:30", "timestamp": 1755777882.367577}}}
{"text": "2025-08-21 17:34:42.369 | INFO     | app.services.dhan_client:get_pnl:587 - P&L calculation completed successfully: 5 symbols, unrealized=‚Çπ-3921607.53\n", "record": {"elapsed": {"repr": "0:00:07.596136", "seconds": 7.596136}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 587, "message": "P&L calculation completed successfully: 5 symbols, unrealized=‚Çπ-3921607.53", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:34:42.369090+05:30", "timestamp": 1755777882.36909}}}
{"text": "2025-08-21 17:34:42.370 | DEBUG    | app.ws.live:emit_delta:408 - Emitted pnl delta: seq=9\n", "record": {"elapsed": {"repr": "0:00:07.597737", "seconds": 7.597737}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "emit_delta", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 408, "message": "Emitted pnl delta: seq=9", "module": "live", "name": "app.ws.live", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:34:42.370691+05:30", "timestamp": 1755777882.370691}}}
{"text": "2025-08-21 17:34:42.880 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:08.107111", "seconds": 8.107111}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 22636, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 17:34:42.880065+05:30", "timestamp": 1755777882.880065}}}
{"text": "2025-08-21 17:34:42.881 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:08.109017", "seconds": 8.109017}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 22636, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 17:34:42.881971+05:30", "timestamp": 1755777882.881971}}}
{"text": "2025-08-21 17:34:42.883 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:08.110473", "seconds": 8.110473}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 22636, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 17:34:42.883427+05:30", "timestamp": 1755777882.883427}}}
{"text": "2025-08-21 17:34:42.885 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:08.112327", "seconds": 8.112327}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 22636, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 17:34:42.885281+05:30", "timestamp": 1755777882.885281}}}
{"text": "2025-08-21 17:34:42.887 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:08.114354", "seconds": 8.114354}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 22636, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 17:34:42.887308+05:30", "timestamp": 1755777882.887308}}}
{"text": "2025-08-21 17:34:42.889 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:08.116500", "seconds": 8.1165}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 22636, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 17:34:42.889454+05:30", "timestamp": 1755777882.889454}}}
{"text": "2025-08-21 17:34:42.891 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:08.118302", "seconds": 8.118302}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 22636, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 17:34:42.891256+05:30", "timestamp": 1755777882.891256}}}
{"text": "2025-08-21 17:34:42.892 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:08.119832", "seconds": 8.119832}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 22636, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 17:34:42.892786+05:30", "timestamp": 1755777882.892786}}}
{"text": "2025-08-21 17:34:42.894 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:08.121741", "seconds": 8.121741}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 22636, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 17:34:42.894695+05:30", "timestamp": 1755777882.894695}}}
{"text": "2025-08-21 17:34:42.897 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:08.124611", "seconds": 8.124611}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 22636, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 17:34:42.897565+05:30", "timestamp": 1755777882.897565}}}
{"text": "2025-08-21 17:34:43.884 | INFO     | app.services.dhan_client:get_pnl:489 - Starting accurate P&L calculation\n", "record": {"elapsed": {"repr": "0:00:09.111491", "seconds": 9.111491}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 489, "message": "Starting accurate P&L calculation", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:34:43.884445+05:30", "timestamp": 1755777883.884445}}}
{"text": "2025-08-21 17:34:43.885 | INFO     | app.services.dhan_client:get_pnl:491 - Fetched 5 positions\n", "record": {"elapsed": {"repr": "0:00:09.112469", "seconds": 9.112469}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 491, "message": "Fetched 5 positions", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:34:43.885423+05:30", "timestamp": 1755777883.885423}}}
{"text": "2025-08-21 17:34:43.886 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for RELIANCE: unrealized=-1252007.19, today=-1252007.19\n", "record": {"elapsed": {"repr": "0:00:09.113401", "seconds": 9.113401}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for RELIANCE: unrealized=-1252007.19, today=-1252007.19", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:34:43.886355+05:30", "timestamp": 1755777883.886355}}}
{"text": "2025-08-21 17:34:43.887 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for TCS: unrealized=461834.64, today=461834.64\n", "record": {"elapsed": {"repr": "0:00:09.114273", "seconds": 9.114273}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for TCS: unrealized=461834.64, today=461834.64", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:34:43.887227+05:30", "timestamp": 1755777883.887227}}}
{"text": "2025-08-21 17:34:43.888 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for HDFC: unrealized=-131110.1, today=-131110.1\n", "record": {"elapsed": {"repr": "0:00:09.115243", "seconds": 9.115243}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for HDFC: unrealized=-131110.1, today=-131110.1", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:34:43.888197+05:30", "timestamp": 1755777883.888197}}}
{"text": "2025-08-21 17:34:43.889 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for INFY: unrealized=-2651240.09, today=-2651240.09\n", "record": {"elapsed": {"repr": "0:00:09.116078", "seconds": 9.116078}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for INFY: unrealized=-2651240.09, today=-2651240.09", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:34:43.889032+05:30", "timestamp": 1755777883.889032}}}
{"text": "2025-08-21 17:34:43.889 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for ICICIBANK: unrealized=-391570.57, today=-391570.57\n", "record": {"elapsed": {"repr": "0:00:09.117024", "seconds": 9.117024}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for ICICIBANK: unrealized=-391570.57, today=-391570.57", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:34:43.889978+05:30", "timestamp": 1755777883.889978}}}
{"text": "2025-08-21 17:34:43.890 | INFO     | app.services.dhan_client:get_pnl:545 - Calculated totals - realized: 0.0, unrealized: -3964093.31, day: -3964093.31\n", "record": {"elapsed": {"repr": "0:00:09.117900", "seconds": 9.1179}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 545, "message": "Calculated totals - realized: 0.0, unrealized: -3964093.31, day: -3964093.31", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:34:43.890854+05:30", "timestamp": 1755777883.890854}}}
{"text": "2025-08-21 17:34:43.891 | DEBUG    | app.services.dhan_client:get_pnl:554 - PnL consistency check passed: drift=‚Çπ0.00\n", "record": {"elapsed": {"repr": "0:00:09.118842", "seconds": 9.118842}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 554, "message": "PnL consistency check passed: drift=‚Çπ0.00", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:34:43.891796+05:30", "timestamp": 1755777883.891796}}}
{"text": "2025-08-21 17:34:43.892 | DEBUG    | app.services.dhan_client:get_pnl:558 - Creating PnLTotals...\n", "record": {"elapsed": {"repr": "0:00:09.119810", "seconds": 9.11981}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 558, "message": "Creating PnLTotals...", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:34:43.892764+05:30", "timestamp": 1755777883.892764}}}
{"text": "2025-08-21 17:34:43.893 | DEBUG    | app.services.dhan_client:get_pnl:565 - PnLTotals created successfully\n", "record": {"elapsed": {"repr": "0:00:09.120736", "seconds": 9.120736}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 565, "message": "PnLTotals created successfully", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:34:43.893690+05:30", "timestamp": 1755777883.89369}}}
{"text": "2025-08-21 17:34:43.894 | DEBUG    | app.services.dhan_client:get_pnl:574 - Creating PnL model...\n", "record": {"elapsed": {"repr": "0:00:09.121609", "seconds": 9.121609}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 574, "message": "Creating PnL model...", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:34:43.894563+05:30", "timestamp": 1755777883.894563}}}
{"text": "2025-08-21 17:34:43.895 | DEBUG    | app.services.dhan_client:get_pnl:575 - Model fields: totals=<class 'app.models.schemas.PnLTotals'>, perSymbol=5, updated_at=2025-08-21 17:34:43.886210+05:30, trading_day=2025-08-21\n", "record": {"elapsed": {"repr": "0:00:09.122522", "seconds": 9.122522}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 575, "message": "Model fields: totals=<class 'app.models.schemas.PnLTotals'>, perSymbol=5, updated_at=2025-08-21 17:34:43.886210+05:30, trading_day=2025-08-21", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:34:43.895476+05:30", "timestamp": 1755777883.895476}}}
{"text": "2025-08-21 17:34:43.896 | DEBUG    | app.services.dhan_client:get_pnl:584 - Created PnL model: totals=PnLTotals(realized=0.0, unrealized=-3964093.31, day=-3964093.31, currency='INR') per_symbol=[PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=913, avg=1944.27, ltp=572.96, unrealized=-1252007.19, today_pnl=-1252007.19), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=457, avg=1390.48, ltp=379.9, unrealized=461834.64, today_pnl=461834.64), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=196, avg=1021.99, ltp=353.06, unrealized=-131110.1, today_pnl=-131110.1), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=1708, avg=426.15, ltp=1978.4, unrealized=-2651240.09, today_pnl=-2651240.09), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=931, avg=756.68, ltp=336.09, unrealized=-391570.57, today_pnl=-391570.57)] updated_at=datetime.datetime(2025, 8, 21, 17, 34, 43, 886210, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))) trading_day='2025-08-21'\n", "record": {"elapsed": {"repr": "0:00:09.123960", "seconds": 9.12396}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 584, "message": "Created PnL model: totals=PnLTotals(realized=0.0, unrealized=-3964093.31, day=-3964093.31, currency='INR') per_symbol=[PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=913, avg=1944.27, ltp=572.96, unrealized=-1252007.19, today_pnl=-1252007.19), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=457, avg=1390.48, ltp=379.9, unrealized=461834.64, today_pnl=461834.64), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=196, avg=1021.99, ltp=353.06, unrealized=-131110.1, today_pnl=-131110.1), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=1708, avg=426.15, ltp=1978.4, unrealized=-2651240.09, today_pnl=-2651240.09), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=931, avg=756.68, ltp=336.09, unrealized=-391570.57, today_pnl=-391570.57)] updated_at=datetime.datetime(2025, 8, 21, 17, 34, 43, 886210, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))) trading_day='2025-08-21'", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:34:43.896914+05:30", "timestamp": 1755777883.896914}}}
{"text": "2025-08-21 17:34:43.898 | DEBUG    | app.services.dhan_client:get_pnl:585 - PnL model fields: {'totals': PnLTotals(realized=0.0, unrealized=-3964093.31, day=-3964093.31, currency='INR'), 'per_symbol': [PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=913, avg=1944.27, ltp=572.96, unrealized=-1252007.19, today_pnl=-1252007.19), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=457, avg=1390.48, ltp=379.9, unrealized=461834.64, today_pnl=461834.64), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=196, avg=1021.99, ltp=353.06, unrealized=-131110.1, today_pnl=-131110.1), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=1708, avg=426.15, ltp=1978.4, unrealized=-2651240.09, today_pnl=-2651240.09), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=931, avg=756.68, ltp=336.09, unrealized=-391570.57, today_pnl=-391570.57)], 'updated_at': datetime.datetime(2025, 8, 21, 17, 34, 43, 886210, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))), 'trading_day': '2025-08-21'}\n", "record": {"elapsed": {"repr": "0:00:09.125237", "seconds": 9.125237}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 585, "message": "PnL model fields: {'totals': PnLTotals(realized=0.0, unrealized=-3964093.31, day=-3964093.31, currency='INR'), 'per_symbol': [PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=913, avg=1944.27, ltp=572.96, unrealized=-1252007.19, today_pnl=-1252007.19), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=457, avg=1390.48, ltp=379.9, unrealized=461834.64, today_pnl=461834.64), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=196, avg=1021.99, ltp=353.06, unrealized=-131110.1, today_pnl=-131110.1), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=1708, avg=426.15, ltp=1978.4, unrealized=-2651240.09, today_pnl=-2651240.09), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=931, avg=756.68, ltp=336.09, unrealized=-391570.57, today_pnl=-391570.57)], 'updated_at': datetime.datetime(2025, 8, 21, 17, 34, 43, 886210, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))), 'trading_day': '2025-08-21'}", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:34:43.898191+05:30", "timestamp": 1755777883.898191}}}
{"text": "2025-08-21 17:34:43.899 | INFO     | app.services.dhan_client:get_pnl:587 - P&L calculation completed successfully: 5 symbols, unrealized=‚Çπ-3964093.31\n", "record": {"elapsed": {"repr": "0:00:09.126644", "seconds": 9.126644}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 587, "message": "P&L calculation completed successfully: 5 symbols, unrealized=‚Çπ-3964093.31", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:34:43.899598+05:30", "timestamp": 1755777883.899598}}}
{"text": "2025-08-21 17:34:43.900 | DEBUG    | app.ws.live:emit_delta:408 - Emitted pnl delta: seq=10\n", "record": {"elapsed": {"repr": "0:00:09.127780", "seconds": 9.12778}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "emit_delta", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 408, "message": "Emitted pnl delta: seq=10", "module": "live", "name": "app.ws.live", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:34:43.900734+05:30", "timestamp": 1755777883.900734}}}
{"text": "2025-08-21 17:34:44.121 | DEBUG    | app.ws.live:emit_delta:408 - Emitted positions delta: seq=11\n", "record": {"elapsed": {"repr": "0:00:09.348651", "seconds": 9.348651}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "emit_delta", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 408, "message": "Emitted positions delta: seq=11", "module": "live", "name": "app.ws.live", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:34:44.121605+05:30", "timestamp": 1755777884.121605}}}
{"text": "2025-08-21 17:34:44.899 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:10.126900", "seconds": 10.1269}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 22636, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 17:34:44.899854+05:30", "timestamp": 1755777884.899854}}}
{"text": "2025-08-21 17:34:44.900 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:10.127743", "seconds": 10.127743}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 22636, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 17:34:44.900697+05:30", "timestamp": 1755777884.900697}}}
{"text": "2025-08-21 17:34:44.901 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:10.128477", "seconds": 10.128477}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 22636, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 17:34:44.901431+05:30", "timestamp": 1755777884.901431}}}
{"text": "2025-08-21 17:34:44.902 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:10.129311", "seconds": 10.129311}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 22636, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 17:34:44.902265+05:30", "timestamp": 1755777884.902265}}}
{"text": "2025-08-21 17:34:44.902 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:10.129932", "seconds": 10.129932}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 22636, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 17:34:44.902886+05:30", "timestamp": 1755777884.902886}}}
{"text": "2025-08-21 17:34:44.903 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:10.130677", "seconds": 10.130677}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 22636, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 17:34:44.903631+05:30", "timestamp": 1755777884.903631}}}
{"text": "2025-08-21 17:34:44.904 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:10.131492", "seconds": 10.131492}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 22636, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 17:34:44.904446+05:30", "timestamp": 1755777884.904446}}}
{"text": "2025-08-21 17:34:44.905 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:10.132216", "seconds": 10.132216}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 22636, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 17:34:44.905170+05:30", "timestamp": 1755777884.90517}}}
{"text": "2025-08-21 17:34:44.905 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:10.132882", "seconds": 10.132882}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 22636, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 17:34:44.905836+05:30", "timestamp": 1755777884.905836}}}
{"text": "2025-08-21 17:34:44.906 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:10.133615", "seconds": 10.133615}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 22636, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 17:34:44.906569+05:30", "timestamp": 1755777884.906569}}}
{"text": "2025-08-21 17:34:45.682 | INFO     | app.services.dhan_client:get_pnl:489 - Starting accurate P&L calculation\n", "record": {"elapsed": {"repr": "0:00:10.909727", "seconds": 10.909727}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 489, "message": "Starting accurate P&L calculation", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:34:45.682681+05:30", "timestamp": 1755777885.682681}}}
{"text": "2025-08-21 17:34:45.683 | INFO     | app.services.dhan_client:get_pnl:491 - Fetched 5 positions\n", "record": {"elapsed": {"repr": "0:00:10.910733", "seconds": 10.910733}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 491, "message": "Fetched 5 positions", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:34:45.683687+05:30", "timestamp": 1755777885.683687}}}
{"text": "2025-08-21 17:34:45.684 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for RELIANCE: unrealized=-1253747.38, today=-1253747.38\n", "record": {"elapsed": {"repr": "0:00:10.911599", "seconds": 10.911599}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for RELIANCE: unrealized=-1253747.38, today=-1253747.38", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:34:45.684553+05:30", "timestamp": 1755777885.684553}}}
{"text": "2025-08-21 17:34:45.685 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for TCS: unrealized=463408.75, today=463408.75\n", "record": {"elapsed": {"repr": "0:00:10.912385", "seconds": 10.912385}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for TCS: unrealized=463408.75, today=463408.75", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:34:45.685339+05:30", "timestamp": 1755777885.685339}}}
{"text": "2025-08-21 17:34:45.686 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for HDFC: unrealized=-130559.27, today=-130559.27\n", "record": {"elapsed": {"repr": "0:00:10.913210", "seconds": 10.91321}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for HDFC: unrealized=-130559.27, today=-130559.27", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:34:45.686164+05:30", "timestamp": 1755777885.686164}}}
{"text": "2025-08-21 17:34:45.686 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for INFY: unrealized=-2666675.8, today=-2666675.8\n", "record": {"elapsed": {"repr": "0:00:10.914037", "seconds": 10.914037}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for INFY: unrealized=-2666675.8, today=-2666675.8", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:34:45.686991+05:30", "timestamp": 1755777885.686991}}}
{"text": "2025-08-21 17:34:45.687 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for ICICIBANK: unrealized=-395303.9, today=-395303.9\n", "record": {"elapsed": {"repr": "0:00:10.914860", "seconds": 10.91486}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for ICICIBANK: unrealized=-395303.9, today=-395303.9", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:34:45.687814+05:30", "timestamp": 1755777885.687814}}}
{"text": "2025-08-21 17:34:45.688 | INFO     | app.services.dhan_client:get_pnl:545 - Calculated totals - realized: 0.0, unrealized: -3982877.6, day: -3982877.6\n", "record": {"elapsed": {"repr": "0:00:10.915578", "seconds": 10.915578}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 545, "message": "Calculated totals - realized: 0.0, unrealized: -3982877.6, day: -3982877.6", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:34:45.688532+05:30", "timestamp": 1755777885.688532}}}
{"text": "2025-08-21 17:34:45.689 | DEBUG    | app.services.dhan_client:get_pnl:554 - PnL consistency check passed: drift=‚Çπ0.00\n", "record": {"elapsed": {"repr": "0:00:10.916432", "seconds": 10.916432}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 554, "message": "PnL consistency check passed: drift=‚Çπ0.00", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:34:45.689386+05:30", "timestamp": 1755777885.689386}}}
{"text": "2025-08-21 17:34:45.690 | DEBUG    | app.services.dhan_client:get_pnl:558 - Creating PnLTotals...\n", "record": {"elapsed": {"repr": "0:00:10.917229", "seconds": 10.917229}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 558, "message": "Creating PnLTotals...", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:34:45.690183+05:30", "timestamp": 1755777885.690183}}}
{"text": "2025-08-21 17:34:45.690 | DEBUG    | app.services.dhan_client:get_pnl:565 - PnLTotals created successfully\n", "record": {"elapsed": {"repr": "0:00:10.917791", "seconds": 10.917791}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 565, "message": "PnLTotals created successfully", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:34:45.690745+05:30", "timestamp": 1755777885.690745}}}
{"text": "2025-08-21 17:34:45.691 | DEBUG    | app.services.dhan_client:get_pnl:574 - Creating PnL model...\n", "record": {"elapsed": {"repr": "0:00:10.918296", "seconds": 10.918296}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 574, "message": "Creating PnL model...", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:34:45.691250+05:30", "timestamp": 1755777885.69125}}}
{"text": "2025-08-21 17:34:45.691 | DEBUG    | app.services.dhan_client:get_pnl:575 - Model fields: totals=<class 'app.models.schemas.PnLTotals'>, perSymbol=5, updated_at=2025-08-21 17:34:45.684464+05:30, trading_day=2025-08-21\n", "record": {"elapsed": {"repr": "0:00:10.918848", "seconds": 10.918848}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 575, "message": "Model fields: totals=<class 'app.models.schemas.PnLTotals'>, perSymbol=5, updated_at=2025-08-21 17:34:45.684464+05:30, trading_day=2025-08-21", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:34:45.691802+05:30", "timestamp": 1755777885.691802}}}
{"text": "2025-08-21 17:34:45.692 | DEBUG    | app.services.dhan_client:get_pnl:584 - Created PnL model: totals=PnLTotals(realized=0.0, unrealized=-3982877.6, day=-3982877.6, currency='INR') per_symbol=[PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=913, avg=1944.27, ltp=571.05, unrealized=-1253747.38, today_pnl=-1253747.38), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=457, avg=1390.48, ltp=376.46, unrealized=463408.75, today_pnl=463408.75), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=196, avg=1021.99, ltp=355.87, unrealized=-130559.27, today_pnl=-130559.27), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=1708, avg=426.15, ltp=1987.44, unrealized=-2666675.8, today_pnl=-2666675.8), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=931, avg=756.68, ltp=332.08, unrealized=-395303.9, today_pnl=-395303.9)] updated_at=datetime.datetime(2025, 8, 21, 17, 34, 45, 684464, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))) trading_day='2025-08-21'\n", "record": {"elapsed": {"repr": "0:00:10.919949", "seconds": 10.919949}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 584, "message": "Created PnL model: totals=PnLTotals(realized=0.0, unrealized=-3982877.6, day=-3982877.6, currency='INR') per_symbol=[PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=913, avg=1944.27, ltp=571.05, unrealized=-1253747.38, today_pnl=-1253747.38), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=457, avg=1390.48, ltp=376.46, unrealized=463408.75, today_pnl=463408.75), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=196, avg=1021.99, ltp=355.87, unrealized=-130559.27, today_pnl=-130559.27), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=1708, avg=426.15, ltp=1987.44, unrealized=-2666675.8, today_pnl=-2666675.8), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=931, avg=756.68, ltp=332.08, unrealized=-395303.9, today_pnl=-395303.9)] updated_at=datetime.datetime(2025, 8, 21, 17, 34, 45, 684464, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))) trading_day='2025-08-21'", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:34:45.692903+05:30", "timestamp": 1755777885.692903}}}
{"text": "2025-08-21 17:34:45.694 | DEBUG    | app.services.dhan_client:get_pnl:585 - PnL model fields: {'totals': PnLTotals(realized=0.0, unrealized=-3982877.6, day=-3982877.6, currency='INR'), 'per_symbol': [PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=913, avg=1944.27, ltp=571.05, unrealized=-1253747.38, today_pnl=-1253747.38), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=457, avg=1390.48, ltp=376.46, unrealized=463408.75, today_pnl=463408.75), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=196, avg=1021.99, ltp=355.87, unrealized=-130559.27, today_pnl=-130559.27), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=1708, avg=426.15, ltp=1987.44, unrealized=-2666675.8, today_pnl=-2666675.8), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=931, avg=756.68, ltp=332.08, unrealized=-395303.9, today_pnl=-395303.9)], 'updated_at': datetime.datetime(2025, 8, 21, 17, 34, 45, 684464, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))), 'trading_day': '2025-08-21'}\n", "record": {"elapsed": {"repr": "0:00:10.921280", "seconds": 10.92128}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 585, "message": "PnL model fields: {'totals': PnLTotals(realized=0.0, unrealized=-3982877.6, day=-3982877.6, currency='INR'), 'per_symbol': [PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=913, avg=1944.27, ltp=571.05, unrealized=-1253747.38, today_pnl=-1253747.38), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=457, avg=1390.48, ltp=376.46, unrealized=463408.75, today_pnl=463408.75), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=196, avg=1021.99, ltp=355.87, unrealized=-130559.27, today_pnl=-130559.27), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=1708, avg=426.15, ltp=1987.44, unrealized=-2666675.8, today_pnl=-2666675.8), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=931, avg=756.68, ltp=332.08, unrealized=-395303.9, today_pnl=-395303.9)], 'updated_at': datetime.datetime(2025, 8, 21, 17, 34, 45, 684464, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))), 'trading_day': '2025-08-21'}", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:34:45.694234+05:30", "timestamp": 1755777885.694234}}}
{"text": "2025-08-21 17:34:45.695 | INFO     | app.services.dhan_client:get_pnl:587 - P&L calculation completed successfully: 5 symbols, unrealized=‚Çπ-3982877.60\n", "record": {"elapsed": {"repr": "0:00:10.922361", "seconds": 10.922361}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 587, "message": "P&L calculation completed successfully: 5 symbols, unrealized=‚Çπ-3982877.60", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:34:45.695315+05:30", "timestamp": 1755777885.695315}}}
{"text": "2025-08-21 17:34:45.696 | DEBUG    | app.ws.live:emit_delta:408 - Emitted pnl delta: seq=12\n", "record": {"elapsed": {"repr": "0:00:10.923404", "seconds": 10.923404}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "emit_delta", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 408, "message": "Emitted pnl delta: seq=12", "module": "live", "name": "app.ws.live", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:34:45.696358+05:30", "timestamp": 1755777885.696358}}}
{"text": "2025-08-21 17:34:46.089 | DEBUG    | app.ws.live:emit_delta:408 - Emitted positions delta: seq=13\n", "record": {"elapsed": {"repr": "0:00:11.317000", "seconds": 11.317}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "emit_delta", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 408, "message": "Emitted positions delta: seq=13", "module": "live", "name": "app.ws.live", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:34:46.089954+05:30", "timestamp": 1755777886.089954}}}
{"text": "2025-08-21 17:34:46.907 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:12.134656", "seconds": 12.134656}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 22636, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 17:34:46.907610+05:30", "timestamp": 1755777886.90761}}}
{"text": "2025-08-21 17:34:46.909 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:12.136818", "seconds": 12.136818}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 22636, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 17:34:46.909772+05:30", "timestamp": 1755777886.909772}}}
{"text": "2025-08-21 17:34:46.912 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:12.139100", "seconds": 12.1391}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 22636, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 17:34:46.912054+05:30", "timestamp": 1755777886.912054}}}
{"text": "2025-08-21 17:34:46.913 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:12.141025", "seconds": 12.141025}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 22636, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 17:34:46.913979+05:30", "timestamp": 1755777886.913979}}}
{"text": "2025-08-21 17:34:46.915 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:12.143027", "seconds": 12.143027}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 22636, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 17:34:46.915981+05:30", "timestamp": 1755777886.915981}}}
{"text": "2025-08-21 17:34:46.917 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:12.144740", "seconds": 12.14474}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 22636, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 17:34:46.917694+05:30", "timestamp": 1755777886.917694}}}
{"text": "2025-08-21 17:34:46.919 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:12.146580", "seconds": 12.14658}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 22636, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 17:34:46.919534+05:30", "timestamp": 1755777886.919534}}}
{"text": "2025-08-21 17:34:46.921 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:12.148546", "seconds": 12.148546}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 22636, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 17:34:46.921500+05:30", "timestamp": 1755777886.9215}}}
{"text": "2025-08-21 17:34:46.923 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:12.150137", "seconds": 12.150137}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 22636, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 17:34:46.923091+05:30", "timestamp": 1755777886.923091}}}
{"text": "2025-08-21 17:34:46.924 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:12.151862", "seconds": 12.151862}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 22636, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 17:34:46.924816+05:30", "timestamp": 1755777886.924816}}}
{"text": "2025-08-21 17:34:47.368 | INFO     | app.services.dhan_client:get_pnl:489 - Starting accurate P&L calculation\n", "record": {"elapsed": {"repr": "0:00:12.595983", "seconds": 12.595983}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 489, "message": "Starting accurate P&L calculation", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:34:47.368937+05:30", "timestamp": 1755777887.368937}}}
{"text": "2025-08-21 17:34:47.371 | INFO     | app.services.dhan_client:get_pnl:491 - Fetched 5 positions\n", "record": {"elapsed": {"repr": "0:00:12.598128", "seconds": 12.598128}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 491, "message": "Fetched 5 positions", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:34:47.371082+05:30", "timestamp": 1755777887.371082}}}
{"text": "2025-08-21 17:34:47.373 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for RELIANCE: unrealized=-1249772.28, today=-1249772.28\n", "record": {"elapsed": {"repr": "0:00:12.600214", "seconds": 12.600214}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for RELIANCE: unrealized=-1249772.28, today=-1249772.28", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:34:47.373168+05:30", "timestamp": 1755777887.373168}}}
{"text": "2025-08-21 17:34:47.375 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for TCS: unrealized=466229.73, today=466229.73\n", "record": {"elapsed": {"repr": "0:00:12.602174", "seconds": 12.602174}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for TCS: unrealized=466229.73, today=466229.73", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:34:47.375128+05:30", "timestamp": 1755777887.375128}}}
{"text": "2025-08-21 17:34:47.377 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for HDFC: unrealized=-130770.11, today=-130770.11\n", "record": {"elapsed": {"repr": "0:00:12.604194", "seconds": 12.604194}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for HDFC: unrealized=-130770.11, today=-130770.11", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:34:47.377148+05:30", "timestamp": 1755777887.377148}}}
{"text": "2025-08-21 17:34:47.379 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for INFY: unrealized=-2602547.47, today=-2602547.47\n", "record": {"elapsed": {"repr": "0:00:12.606160", "seconds": 12.60616}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for INFY: unrealized=-2602547.47, today=-2602547.47", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:34:47.379114+05:30", "timestamp": 1755777887.379114}}}
{"text": "2025-08-21 17:34:47.381 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for ICICIBANK: unrealized=-392885.76, today=-392885.76\n", "record": {"elapsed": {"repr": "0:00:12.608166", "seconds": 12.608166}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for ICICIBANK: unrealized=-392885.76, today=-392885.76", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:34:47.381120+05:30", "timestamp": 1755777887.38112}}}
{"text": "2025-08-21 17:34:47.382 | INFO     | app.services.dhan_client:get_pnl:545 - Calculated totals - realized: 0.0, unrealized: -3909745.89, day: -3909745.89\n", "record": {"elapsed": {"repr": "0:00:12.609930", "seconds": 12.60993}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 545, "message": "Calculated totals - realized: 0.0, unrealized: -3909745.89, day: -3909745.89", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:34:47.382884+05:30", "timestamp": 1755777887.382884}}}
{"text": "2025-08-21 17:34:47.384 | DEBUG    | app.services.dhan_client:get_pnl:554 - PnL consistency check passed: drift=‚Çπ0.00\n", "record": {"elapsed": {"repr": "0:00:12.611816", "seconds": 12.611816}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 554, "message": "PnL consistency check passed: drift=‚Çπ0.00", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:34:47.384770+05:30", "timestamp": 1755777887.38477}}}
{"text": "2025-08-21 17:34:47.387 | DEBUG    | app.services.dhan_client:get_pnl:558 - Creating PnLTotals...\n", "record": {"elapsed": {"repr": "0:00:12.614048", "seconds": 12.614048}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 558, "message": "Creating PnLTotals...", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:34:47.387002+05:30", "timestamp": 1755777887.387002}}}
{"text": "2025-08-21 17:34:47.388 | DEBUG    | app.services.dhan_client:get_pnl:565 - PnLTotals created successfully\n", "record": {"elapsed": {"repr": "0:00:12.615691", "seconds": 12.615691}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 565, "message": "PnLTotals created successfully", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:34:47.388645+05:30", "timestamp": 1755777887.388645}}}
{"text": "2025-08-21 17:34:47.390 | DEBUG    | app.services.dhan_client:get_pnl:574 - Creating PnL model...\n", "record": {"elapsed": {"repr": "0:00:12.617165", "seconds": 12.617165}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 574, "message": "Creating PnL model...", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:34:47.390119+05:30", "timestamp": 1755777887.390119}}}
{"text": "2025-08-21 17:34:47.391 | DEBUG    | app.services.dhan_client:get_pnl:575 - Model fields: totals=<class 'app.models.schemas.PnLTotals'>, perSymbol=5, updated_at=2025-08-21 17:34:47.372895+05:30, trading_day=2025-08-21\n", "record": {"elapsed": {"repr": "0:00:12.618872", "seconds": 12.618872}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 575, "message": "Model fields: totals=<class 'app.models.schemas.PnLTotals'>, perSymbol=5, updated_at=2025-08-21 17:34:47.372895+05:30, trading_day=2025-08-21", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:34:47.391826+05:30", "timestamp": 1755777887.391826}}}
{"text": "2025-08-21 17:34:47.394 | DEBUG    | app.services.dhan_client:get_pnl:584 - Created PnL model: totals=PnLTotals(realized=0.0, unrealized=-3909745.89, day=-3909745.89, currency='INR') per_symbol=[PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=913, avg=1944.27, ltp=575.41, unrealized=-1249772.28, today_pnl=-1249772.28), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=457, avg=1390.48, ltp=370.28, unrealized=466229.73, today_pnl=466229.73), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=196, avg=1021.99, ltp=354.8, unrealized=-130770.11, today_pnl=-130770.11), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=1708, avg=426.15, ltp=1949.89, unrealized=-2602547.47, today_pnl=-2602547.47), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=931, avg=756.68, ltp=334.68, unrealized=-392885.76, today_pnl=-392885.76)] updated_at=datetime.datetime(2025, 8, 21, 17, 34, 47, 372895, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))) trading_day='2025-08-21'\n", "record": {"elapsed": {"repr": "0:00:12.621649", "seconds": 12.621649}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 584, "message": "Created PnL model: totals=PnLTotals(realized=0.0, unrealized=-3909745.89, day=-3909745.89, currency='INR') per_symbol=[PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=913, avg=1944.27, ltp=575.41, unrealized=-1249772.28, today_pnl=-1249772.28), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=457, avg=1390.48, ltp=370.28, unrealized=466229.73, today_pnl=466229.73), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=196, avg=1021.99, ltp=354.8, unrealized=-130770.11, today_pnl=-130770.11), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=1708, avg=426.15, ltp=1949.89, unrealized=-2602547.47, today_pnl=-2602547.47), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=931, avg=756.68, ltp=334.68, unrealized=-392885.76, today_pnl=-392885.76)] updated_at=datetime.datetime(2025, 8, 21, 17, 34, 47, 372895, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))) trading_day='2025-08-21'", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:34:47.394603+05:30", "timestamp": 1755777887.394603}}}
{"text": "2025-08-21 17:34:47.399 | DEBUG    | app.services.dhan_client:get_pnl:585 - PnL model fields: {'totals': PnLTotals(realized=0.0, unrealized=-3909745.89, day=-3909745.89, currency='INR'), 'per_symbol': [PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=913, avg=1944.27, ltp=575.41, unrealized=-1249772.28, today_pnl=-1249772.28), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=457, avg=1390.48, ltp=370.28, unrealized=466229.73, today_pnl=466229.73), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=196, avg=1021.99, ltp=354.8, unrealized=-130770.11, today_pnl=-130770.11), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=1708, avg=426.15, ltp=1949.89, unrealized=-2602547.47, today_pnl=-2602547.47), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=931, avg=756.68, ltp=334.68, unrealized=-392885.76, today_pnl=-392885.76)], 'updated_at': datetime.datetime(2025, 8, 21, 17, 34, 47, 372895, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))), 'trading_day': '2025-08-21'}\n", "record": {"elapsed": {"repr": "0:00:12.626432", "seconds": 12.626432}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 585, "message": "PnL model fields: {'totals': PnLTotals(realized=0.0, unrealized=-3909745.89, day=-3909745.89, currency='INR'), 'per_symbol': [PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=913, avg=1944.27, ltp=575.41, unrealized=-1249772.28, today_pnl=-1249772.28), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=457, avg=1390.48, ltp=370.28, unrealized=466229.73, today_pnl=466229.73), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=196, avg=1021.99, ltp=354.8, unrealized=-130770.11, today_pnl=-130770.11), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=1708, avg=426.15, ltp=1949.89, unrealized=-2602547.47, today_pnl=-2602547.47), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=931, avg=756.68, ltp=334.68, unrealized=-392885.76, today_pnl=-392885.76)], 'updated_at': datetime.datetime(2025, 8, 21, 17, 34, 47, 372895, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))), 'trading_day': '2025-08-21'}", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:34:47.399386+05:30", "timestamp": 1755777887.399386}}}
{"text": "2025-08-21 17:34:47.402 | INFO     | app.services.dhan_client:get_pnl:587 - P&L calculation completed successfully: 5 symbols, unrealized=‚Çπ-3909745.89\n", "record": {"elapsed": {"repr": "0:00:12.629161", "seconds": 12.629161}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 587, "message": "P&L calculation completed successfully: 5 symbols, unrealized=‚Çπ-3909745.89", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:34:47.402115+05:30", "timestamp": 1755777887.402115}}}
{"text": "2025-08-21 17:34:47.405 | DEBUG    | app.ws.live:emit_delta:408 - Emitted pnl delta: seq=14\n", "record": {"elapsed": {"repr": "0:00:12.632480", "seconds": 12.63248}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "emit_delta", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 408, "message": "Emitted pnl delta: seq=14", "module": "live", "name": "app.ws.live", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:34:47.405434+05:30", "timestamp": 1755777887.405434}}}
{"text": "2025-08-21 17:34:47.960 | DEBUG    | app.ws.live:emit_delta:408 - Emitted positions delta: seq=15\n", "record": {"elapsed": {"repr": "0:00:13.188044", "seconds": 13.188044}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "emit_delta", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 408, "message": "Emitted positions delta: seq=15", "module": "live", "name": "app.ws.live", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:34:47.960998+05:30", "timestamp": 1755777887.960998}}}
{"text": "2025-08-21 17:34:48.927 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:14.155043", "seconds": 14.155043}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 22636, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 17:34:48.927997+05:30", "timestamp": 1755777888.927997}}}
{"text": "2025-08-21 17:34:48.930 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:14.157153", "seconds": 14.157153}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 22636, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 17:34:48.930107+05:30", "timestamp": 1755777888.930107}}}
{"text": "2025-08-21 17:34:48.931 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:14.158997", "seconds": 14.158997}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 22636, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 17:34:48.931951+05:30", "timestamp": 1755777888.931951}}}
{"text": "2025-08-21 17:34:48.934 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:14.161198", "seconds": 14.161198}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 22636, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 17:34:48.934152+05:30", "timestamp": 1755777888.934152}}}
{"text": "2025-08-21 17:34:48.936 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:14.163618", "seconds": 14.163618}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 22636, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 17:34:48.936572+05:30", "timestamp": 1755777888.936572}}}
{"text": "2025-08-21 17:34:48.938 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:14.165341", "seconds": 14.165341}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 22636, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 17:34:48.938295+05:30", "timestamp": 1755777888.938295}}}
{"text": "2025-08-21 17:34:48.940 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:14.167349", "seconds": 14.167349}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 22636, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 17:34:48.940303+05:30", "timestamp": 1755777888.940303}}}
{"text": "2025-08-21 17:34:48.942 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:14.169265", "seconds": 14.169265}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 22636, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 17:34:48.942219+05:30", "timestamp": 1755777888.942219}}}
{"text": "2025-08-21 17:34:48.943 | INFO     | app.services.dhan_client:get_pnl:489 - Starting accurate P&L calculation\n", "record": {"elapsed": {"repr": "0:00:14.170389", "seconds": 14.170389}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 489, "message": "Starting accurate P&L calculation", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:34:48.943343+05:30", "timestamp": 1755777888.943343}}}
{"text": "2025-08-21 17:34:48.945 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:14.172225", "seconds": 14.172225}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 22636, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 17:34:48.945179+05:30", "timestamp": 1755777888.945179}}}
{"text": "2025-08-21 17:34:48.948 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:14.175252", "seconds": 14.175252}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 22636, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 17:34:48.948206+05:30", "timestamp": 1755777888.948206}}}
{"text": "2025-08-21 17:34:48.950 | INFO     | app.services.dhan_client:get_pnl:491 - Fetched 5 positions\n", "record": {"elapsed": {"repr": "0:00:14.177181", "seconds": 14.177181}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 491, "message": "Fetched 5 positions", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:34:48.950135+05:30", "timestamp": 1755777888.950135}}}
{"text": "2025-08-21 17:34:48.952 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for RELIANCE: unrealized=-1245923.3, today=-1245923.3\n", "record": {"elapsed": {"repr": "0:00:14.179285", "seconds": 14.179285}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for RELIANCE: unrealized=-1245923.3, today=-1245923.3", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:34:48.952239+05:30", "timestamp": 1755777888.952239}}}
{"text": "2025-08-21 17:34:48.954 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for TCS: unrealized=468077.73, today=468077.73\n", "record": {"elapsed": {"repr": "0:00:14.181378", "seconds": 14.181378}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for TCS: unrealized=468077.73, today=468077.73", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:34:48.954332+05:30", "timestamp": 1755777888.954332}}}
{"text": "2025-08-21 17:34:48.956 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for HDFC: unrealized=-130359.68, today=-130359.68\n", "record": {"elapsed": {"repr": "0:00:14.183878", "seconds": 14.183878}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for HDFC: unrealized=-130359.68, today=-130359.68", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:34:48.956832+05:30", "timestamp": 1755777888.956832}}}
{"text": "2025-08-21 17:34:48.959 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for INFY: unrealized=-2561024.26, today=-2561024.26\n", "record": {"elapsed": {"repr": "0:00:14.186280", "seconds": 14.18628}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for INFY: unrealized=-2561024.26, today=-2561024.26", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:34:48.959234+05:30", "timestamp": 1755777888.959234}}}
{"text": "2025-08-21 17:34:48.961 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for ICICIBANK: unrealized=-390950.4, today=-390950.4\n", "record": {"elapsed": {"repr": "0:00:14.188128", "seconds": 14.188128}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for ICICIBANK: unrealized=-390950.4, today=-390950.4", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:34:48.961082+05:30", "timestamp": 1755777888.961082}}}
{"text": "2025-08-21 17:34:48.962 | INFO     | app.services.dhan_client:get_pnl:545 - Calculated totals - realized: 0.0, unrealized: -3860179.91, day: -3860179.91\n", "record": {"elapsed": {"repr": "0:00:14.189801", "seconds": 14.189801}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 545, "message": "Calculated totals - realized: 0.0, unrealized: -3860179.91, day: -3860179.91", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:34:48.962755+05:30", "timestamp": 1755777888.962755}}}
{"text": "2025-08-21 17:34:48.964 | DEBUG    | app.services.dhan_client:get_pnl:554 - PnL consistency check passed: drift=‚Çπ0.00\n", "record": {"elapsed": {"repr": "0:00:14.191342", "seconds": 14.191342}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 554, "message": "PnL consistency check passed: drift=‚Çπ0.00", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:34:48.964296+05:30", "timestamp": 1755777888.964296}}}
{"text": "2025-08-21 17:34:48.967 | DEBUG    | app.services.dhan_client:get_pnl:558 - Creating PnLTotals...\n", "record": {"elapsed": {"repr": "0:00:14.194286", "seconds": 14.194286}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 558, "message": "Creating PnLTotals...", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:34:48.967240+05:30", "timestamp": 1755777888.96724}}}
{"text": "2025-08-21 17:34:48.968 | DEBUG    | app.services.dhan_client:get_pnl:565 - PnLTotals created successfully\n", "record": {"elapsed": {"repr": "0:00:14.195972", "seconds": 14.195972}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 565, "message": "PnLTotals created successfully", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:34:48.968926+05:30", "timestamp": 1755777888.968926}}}
{"text": "2025-08-21 17:34:48.970 | DEBUG    | app.services.dhan_client:get_pnl:574 - Creating PnL model...\n", "record": {"elapsed": {"repr": "0:00:14.197714", "seconds": 14.197714}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 574, "message": "Creating PnL model...", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:34:48.970668+05:30", "timestamp": 1755777888.970668}}}
{"text": "2025-08-21 17:34:48.972 | DEBUG    | app.services.dhan_client:get_pnl:575 - Model fields: totals=<class 'app.models.schemas.PnLTotals'>, perSymbol=5, updated_at=2025-08-21 17:34:48.951982+05:30, trading_day=2025-08-21\n", "record": {"elapsed": {"repr": "0:00:14.199298", "seconds": 14.199298}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 575, "message": "Model fields: totals=<class 'app.models.schemas.PnLTotals'>, perSymbol=5, updated_at=2025-08-21 17:34:48.951982+05:30, trading_day=2025-08-21", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:34:48.972252+05:30", "timestamp": 1755777888.972252}}}
{"text": "2025-08-21 17:34:48.974 | DEBUG    | app.services.dhan_client:get_pnl:584 - Created PnL model: totals=PnLTotals(realized=0.0, unrealized=-3860179.91, day=-3860179.91, currency='INR') per_symbol=[PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=913, avg=1944.27, ltp=579.62, unrealized=-1245923.3, today_pnl=-1245923.3), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=457, avg=1390.48, ltp=366.24, unrealized=468077.73, today_pnl=468077.73), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=196, avg=1021.99, ltp=356.89, unrealized=-130359.68, today_pnl=-130359.68), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=1708, avg=426.15, ltp=1925.58, unrealized=-2561024.26, today_pnl=-2561024.26), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=931, avg=756.68, ltp=336.75, unrealized=-390950.4, today_pnl=-390950.4)] updated_at=datetime.datetime(2025, 8, 21, 17, 34, 48, 951982, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))) trading_day='2025-08-21'\n", "record": {"elapsed": {"repr": "0:00:14.201549", "seconds": 14.201549}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 584, "message": "Created PnL model: totals=PnLTotals(realized=0.0, unrealized=-3860179.91, day=-3860179.91, currency='INR') per_symbol=[PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=913, avg=1944.27, ltp=579.62, unrealized=-1245923.3, today_pnl=-1245923.3), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=457, avg=1390.48, ltp=366.24, unrealized=468077.73, today_pnl=468077.73), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=196, avg=1021.99, ltp=356.89, unrealized=-130359.68, today_pnl=-130359.68), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=1708, avg=426.15, ltp=1925.58, unrealized=-2561024.26, today_pnl=-2561024.26), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=931, avg=756.68, ltp=336.75, unrealized=-390950.4, today_pnl=-390950.4)] updated_at=datetime.datetime(2025, 8, 21, 17, 34, 48, 951982, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))) trading_day='2025-08-21'", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:34:48.974503+05:30", "timestamp": 1755777888.974503}}}
{"text": "2025-08-21 17:34:48.977 | DEBUG    | app.services.dhan_client:get_pnl:585 - PnL model fields: {'totals': PnLTotals(realized=0.0, unrealized=-3860179.91, day=-3860179.91, currency='INR'), 'per_symbol': [PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=913, avg=1944.27, ltp=579.62, unrealized=-1245923.3, today_pnl=-1245923.3), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=457, avg=1390.48, ltp=366.24, unrealized=468077.73, today_pnl=468077.73), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=196, avg=1021.99, ltp=356.89, unrealized=-130359.68, today_pnl=-130359.68), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=1708, avg=426.15, ltp=1925.58, unrealized=-2561024.26, today_pnl=-2561024.26), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=931, avg=756.68, ltp=336.75, unrealized=-390950.4, today_pnl=-390950.4)], 'updated_at': datetime.datetime(2025, 8, 21, 17, 34, 48, 951982, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))), 'trading_day': '2025-08-21'}\n", "record": {"elapsed": {"repr": "0:00:14.204227", "seconds": 14.204227}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 585, "message": "PnL model fields: {'totals': PnLTotals(realized=0.0, unrealized=-3860179.91, day=-3860179.91, currency='INR'), 'per_symbol': [PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=913, avg=1944.27, ltp=579.62, unrealized=-1245923.3, today_pnl=-1245923.3), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=457, avg=1390.48, ltp=366.24, unrealized=468077.73, today_pnl=468077.73), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=196, avg=1021.99, ltp=356.89, unrealized=-130359.68, today_pnl=-130359.68), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=1708, avg=426.15, ltp=1925.58, unrealized=-2561024.26, today_pnl=-2561024.26), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=931, avg=756.68, ltp=336.75, unrealized=-390950.4, today_pnl=-390950.4)], 'updated_at': datetime.datetime(2025, 8, 21, 17, 34, 48, 951982, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))), 'trading_day': '2025-08-21'}", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:34:48.977181+05:30", "timestamp": 1755777888.977181}}}
{"text": "2025-08-21 17:34:48.978 | INFO     | app.services.dhan_client:get_pnl:587 - P&L calculation completed successfully: 5 symbols, unrealized=‚Çπ-3860179.91\n", "record": {"elapsed": {"repr": "0:00:14.205709", "seconds": 14.205709}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 587, "message": "P&L calculation completed successfully: 5 symbols, unrealized=‚Çπ-3860179.91", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:34:48.978663+05:30", "timestamp": 1755777888.978663}}}
{"text": "2025-08-21 17:34:48.980 | DEBUG    | app.ws.live:emit_delta:408 - Emitted pnl delta: seq=16\n", "record": {"elapsed": {"repr": "0:00:14.207490", "seconds": 14.20749}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "emit_delta", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 408, "message": "Emitted pnl delta: seq=16", "module": "live", "name": "app.ws.live", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:34:48.980444+05:30", "timestamp": 1755777888.980444}}}
{"text": "2025-08-21 17:34:49.767 | DEBUG    | app.ws.live:emit_delta:408 - Emitted positions delta: seq=17\n", "record": {"elapsed": {"repr": "0:00:14.994916", "seconds": 14.994916}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "emit_delta", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 408, "message": "Emitted positions delta: seq=17", "module": "live", "name": "app.ws.live", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:34:49.767870+05:30", "timestamp": 1755777889.76787}}}
{"text": "2025-08-21 17:34:50.796 | INFO     | app.services.dhan_client:get_pnl:489 - Starting accurate P&L calculation\n", "record": {"elapsed": {"repr": "0:00:16.023071", "seconds": 16.023071}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 489, "message": "Starting accurate P&L calculation", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:34:50.796025+05:30", "timestamp": 1755777890.796025}}}
{"text": "2025-08-21 17:34:50.797 | INFO     | app.services.dhan_client:get_pnl:491 - Fetched 5 positions\n", "record": {"elapsed": {"repr": "0:00:16.024140", "seconds": 16.02414}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 491, "message": "Fetched 5 positions", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:34:50.797094+05:30", "timestamp": 1755777890.797094}}}
{"text": "2025-08-21 17:34:50.798 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for RELIANCE: unrealized=-1245923.3, today=-1245923.3\n", "record": {"elapsed": {"repr": "0:00:16.025153", "seconds": 16.025153}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for RELIANCE: unrealized=-1245923.3, today=-1245923.3", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:34:50.798107+05:30", "timestamp": 1755777890.798107}}}
{"text": "2025-08-21 17:34:50.799 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for TCS: unrealized=468077.73, today=468077.73\n", "record": {"elapsed": {"repr": "0:00:16.026276", "seconds": 16.026276}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for TCS: unrealized=468077.73, today=468077.73", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:34:50.799230+05:30", "timestamp": 1755777890.79923}}}
{"text": "2025-08-21 17:34:50.800 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for HDFC: unrealized=-130359.68, today=-130359.68\n", "record": {"elapsed": {"repr": "0:00:16.027231", "seconds": 16.027231}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for HDFC: unrealized=-130359.68, today=-130359.68", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:34:50.800185+05:30", "timestamp": 1755777890.800185}}}
{"text": "2025-08-21 17:34:50.801 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for INFY: unrealized=-2561024.26, today=-2561024.26\n", "record": {"elapsed": {"repr": "0:00:16.028078", "seconds": 16.028078}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for INFY: unrealized=-2561024.26, today=-2561024.26", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:34:50.801032+05:30", "timestamp": 1755777890.801032}}}
{"text": "2025-08-21 17:34:50.801 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for ICICIBANK: unrealized=-390950.4, today=-390950.4\n", "record": {"elapsed": {"repr": "0:00:16.028952", "seconds": 16.028952}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for ICICIBANK: unrealized=-390950.4, today=-390950.4", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:34:50.801906+05:30", "timestamp": 1755777890.801906}}}
{"text": "2025-08-21 17:34:50.802 | INFO     | app.services.dhan_client:get_pnl:545 - Calculated totals - realized: 0.0, unrealized: -3860179.91, day: -3860179.91\n", "record": {"elapsed": {"repr": "0:00:16.029762", "seconds": 16.029762}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 545, "message": "Calculated totals - realized: 0.0, unrealized: -3860179.91, day: -3860179.91", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:34:50.802716+05:30", "timestamp": 1755777890.802716}}}
{"text": "2025-08-21 17:34:50.803 | DEBUG    | app.services.dhan_client:get_pnl:554 - PnL consistency check passed: drift=‚Çπ0.00\n", "record": {"elapsed": {"repr": "0:00:16.030684", "seconds": 16.030684}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 554, "message": "PnL consistency check passed: drift=‚Çπ0.00", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:34:50.803638+05:30", "timestamp": 1755777890.803638}}}
{"text": "2025-08-21 17:34:50.804 | DEBUG    | app.services.dhan_client:get_pnl:558 - Creating PnLTotals...\n", "record": {"elapsed": {"repr": "0:00:16.031468", "seconds": 16.031468}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 558, "message": "Creating PnLTotals...", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:34:50.804422+05:30", "timestamp": 1755777890.804422}}}
{"text": "2025-08-21 17:34:50.805 | DEBUG    | app.services.dhan_client:get_pnl:565 - PnLTotals created successfully\n", "record": {"elapsed": {"repr": "0:00:16.032237", "seconds": 16.032237}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 565, "message": "PnLTotals created successfully", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:34:50.805191+05:30", "timestamp": 1755777890.805191}}}
{"text": "2025-08-21 17:34:50.806 | DEBUG    | app.services.dhan_client:get_pnl:574 - Creating PnL model...\n", "record": {"elapsed": {"repr": "0:00:16.033094", "seconds": 16.033094}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 574, "message": "Creating PnL model...", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:34:50.806048+05:30", "timestamp": 1755777890.806048}}}
{"text": "2025-08-21 17:34:50.806 | DEBUG    | app.services.dhan_client:get_pnl:575 - Model fields: totals=<class 'app.models.schemas.PnLTotals'>, perSymbol=5, updated_at=2025-08-21 17:34:50.797969+05:30, trading_day=2025-08-21\n", "record": {"elapsed": {"repr": "0:00:16.033967", "seconds": 16.033967}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 575, "message": "Model fields: totals=<class 'app.models.schemas.PnLTotals'>, perSymbol=5, updated_at=2025-08-21 17:34:50.797969+05:30, trading_day=2025-08-21", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:34:50.806921+05:30", "timestamp": 1755777890.806921}}}
{"text": "2025-08-21 17:34:50.808 | DEBUG    | app.services.dhan_client:get_pnl:584 - Created PnL model: totals=PnLTotals(realized=0.0, unrealized=-3860179.91, day=-3860179.91, currency='INR') per_symbol=[PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=913, avg=1944.27, ltp=579.62, unrealized=-1245923.3, today_pnl=-1245923.3), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=457, avg=1390.48, ltp=366.24, unrealized=468077.73, today_pnl=468077.73), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=196, avg=1021.99, ltp=356.89, unrealized=-130359.68, today_pnl=-130359.68), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=1708, avg=426.15, ltp=1925.58, unrealized=-2561024.26, today_pnl=-2561024.26), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=931, avg=756.68, ltp=336.75, unrealized=-390950.4, today_pnl=-390950.4)] updated_at=datetime.datetime(2025, 8, 21, 17, 34, 50, 797969, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))) trading_day='2025-08-21'\n", "record": {"elapsed": {"repr": "0:00:16.035467", "seconds": 16.035467}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 584, "message": "Created PnL model: totals=PnLTotals(realized=0.0, unrealized=-3860179.91, day=-3860179.91, currency='INR') per_symbol=[PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=913, avg=1944.27, ltp=579.62, unrealized=-1245923.3, today_pnl=-1245923.3), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=457, avg=1390.48, ltp=366.24, unrealized=468077.73, today_pnl=468077.73), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=196, avg=1021.99, ltp=356.89, unrealized=-130359.68, today_pnl=-130359.68), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=1708, avg=426.15, ltp=1925.58, unrealized=-2561024.26, today_pnl=-2561024.26), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=931, avg=756.68, ltp=336.75, unrealized=-390950.4, today_pnl=-390950.4)] updated_at=datetime.datetime(2025, 8, 21, 17, 34, 50, 797969, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))) trading_day='2025-08-21'", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:34:50.808421+05:30", "timestamp": 1755777890.808421}}}
{"text": "2025-08-21 17:34:50.810 | DEBUG    | app.services.dhan_client:get_pnl:585 - PnL model fields: {'totals': PnLTotals(realized=0.0, unrealized=-3860179.91, day=-3860179.91, currency='INR'), 'per_symbol': [PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=913, avg=1944.27, ltp=579.62, unrealized=-1245923.3, today_pnl=-1245923.3), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=457, avg=1390.48, ltp=366.24, unrealized=468077.73, today_pnl=468077.73), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=196, avg=1021.99, ltp=356.89, unrealized=-130359.68, today_pnl=-130359.68), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=1708, avg=426.15, ltp=1925.58, unrealized=-2561024.26, today_pnl=-2561024.26), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=931, avg=756.68, ltp=336.75, unrealized=-390950.4, today_pnl=-390950.4)], 'updated_at': datetime.datetime(2025, 8, 21, 17, 34, 50, 797969, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))), 'trading_day': '2025-08-21'}\n", "record": {"elapsed": {"repr": "0:00:16.037185", "seconds": 16.037185}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 585, "message": "PnL model fields: {'totals': PnLTotals(realized=0.0, unrealized=-3860179.91, day=-3860179.91, currency='INR'), 'per_symbol': [PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=913, avg=1944.27, ltp=579.62, unrealized=-1245923.3, today_pnl=-1245923.3), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=457, avg=1390.48, ltp=366.24, unrealized=468077.73, today_pnl=468077.73), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=196, avg=1021.99, ltp=356.89, unrealized=-130359.68, today_pnl=-130359.68), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=1708, avg=426.15, ltp=1925.58, unrealized=-2561024.26, today_pnl=-2561024.26), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=931, avg=756.68, ltp=336.75, unrealized=-390950.4, today_pnl=-390950.4)], 'updated_at': datetime.datetime(2025, 8, 21, 17, 34, 50, 797969, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))), 'trading_day': '2025-08-21'}", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:34:50.810139+05:30", "timestamp": 1755777890.810139}}}
{"text": "2025-08-21 17:34:50.811 | INFO     | app.services.dhan_client:get_pnl:587 - P&L calculation completed successfully: 5 symbols, unrealized=‚Çπ-3860179.91\n", "record": {"elapsed": {"repr": "0:00:16.038465", "seconds": 16.038465}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 587, "message": "P&L calculation completed successfully: 5 symbols, unrealized=‚Çπ-3860179.91", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:34:50.811419+05:30", "timestamp": 1755777890.811419}}}
{"text": "2025-08-21 17:34:50.812 | DEBUG    | app.ws.live:emit_delta:408 - Emitted pnl delta: seq=18\n", "record": {"elapsed": {"repr": "0:00:16.039761", "seconds": 16.039761}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "emit_delta", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 408, "message": "Emitted pnl delta: seq=18", "module": "live", "name": "app.ws.live", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:34:50.812715+05:30", "timestamp": 1755777890.812715}}}
{"text": "2025-08-21 17:34:50.950 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:16.177469", "seconds": 16.177469}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 22636, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 17:34:50.950423+05:30", "timestamp": 1755777890.950423}}}
{"text": "2025-08-21 17:34:50.951 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:16.178531", "seconds": 16.178531}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 22636, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 17:34:50.951485+05:30", "timestamp": 1755777890.951485}}}
{"text": "2025-08-21 17:34:50.952 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:16.179224", "seconds": 16.179224}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 22636, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 17:34:50.952178+05:30", "timestamp": 1755777890.952178}}}
{"text": "2025-08-21 17:34:50.953 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:16.180080", "seconds": 16.18008}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 22636, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 17:34:50.953034+05:30", "timestamp": 1755777890.953034}}}
{"text": "2025-08-21 17:34:50.953 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:16.180921", "seconds": 16.180921}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 22636, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 17:34:50.953875+05:30", "timestamp": 1755777890.953875}}}
{"text": "2025-08-21 17:34:50.954 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:16.181819", "seconds": 16.181819}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 22636, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 17:34:50.954773+05:30", "timestamp": 1755777890.954773}}}
{"text": "2025-08-21 17:34:50.955 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:16.182756", "seconds": 16.182756}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 22636, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 17:34:50.955710+05:30", "timestamp": 1755777890.95571}}}
{"text": "2025-08-21 17:34:50.956 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:16.183625", "seconds": 16.183625}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 22636, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 17:34:50.956579+05:30", "timestamp": 1755777890.956579}}}
{"text": "2025-08-21 17:34:50.957 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:16.184709", "seconds": 16.184709}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 22636, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 17:34:50.957663+05:30", "timestamp": 1755777890.957663}}}
{"text": "2025-08-21 17:34:50.958 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:16.185643", "seconds": 16.185643}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 22636, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 17:34:50.958597+05:30", "timestamp": 1755777890.958597}}}
{"text": "2025-08-21 17:34:51.482 | DEBUG    | app.ws.live:emit_delta:408 - Emitted positions delta: seq=19\n", "record": {"elapsed": {"repr": "0:00:16.710005", "seconds": 16.710005}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "emit_delta", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 408, "message": "Emitted positions delta: seq=19", "module": "live", "name": "app.ws.live", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:34:51.482959+05:30", "timestamp": 1755777891.482959}}}
{"text": "2025-08-21 17:34:52.548 | INFO     | app.services.dhan_client:get_pnl:489 - Starting accurate P&L calculation\n", "record": {"elapsed": {"repr": "0:00:17.775636", "seconds": 17.775636}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 489, "message": "Starting accurate P&L calculation", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:34:52.548590+05:30", "timestamp": 1755777892.54859}}}
{"text": "2025-08-21 17:34:52.549 | INFO     | app.services.dhan_client:get_pnl:491 - Fetched 5 positions\n", "record": {"elapsed": {"repr": "0:00:17.776680", "seconds": 17.77668}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 491, "message": "Fetched 5 positions", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:34:52.549634+05:30", "timestamp": 1755777892.549634}}}
{"text": "2025-08-21 17:34:52.550 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for RELIANCE: unrealized=-1255879.8, today=-1255879.8\n", "record": {"elapsed": {"repr": "0:00:17.777609", "seconds": 17.777609}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for RELIANCE: unrealized=-1255879.8, today=-1255879.8", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:34:52.550563+05:30", "timestamp": 1755777892.550563}}}
{"text": "2025-08-21 17:34:52.551 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for TCS: unrealized=467989.1, today=467989.1\n", "record": {"elapsed": {"repr": "0:00:17.778529", "seconds": 17.778529}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for TCS: unrealized=467989.1, today=467989.1", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:34:52.551483+05:30", "timestamp": 1755777892.551483}}}
{"text": "2025-08-21 17:34:52.552 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for HDFC: unrealized=-130224.48, today=-130224.48\n", "record": {"elapsed": {"repr": "0:00:17.779364", "seconds": 17.779364}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for HDFC: unrealized=-130224.48, today=-130224.48", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:34:52.552318+05:30", "timestamp": 1755777892.552318}}}
{"text": "2025-08-21 17:34:52.553 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for INFY: unrealized=-2582000.92, today=-2582000.92\n", "record": {"elapsed": {"repr": "0:00:17.780289", "seconds": 17.780289}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for INFY: unrealized=-2582000.92, today=-2582000.92", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:34:52.553243+05:30", "timestamp": 1755777892.553243}}}
{"text": "2025-08-21 17:34:52.554 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for ICICIBANK: unrealized=-396882.11, today=-396882.11\n", "record": {"elapsed": {"repr": "0:00:17.781263", "seconds": 17.781263}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for ICICIBANK: unrealized=-396882.11, today=-396882.11", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:34:52.554217+05:30", "timestamp": 1755777892.554217}}}
{"text": "2025-08-21 17:34:52.555 | INFO     | app.services.dhan_client:get_pnl:545 - Calculated totals - realized: 0.0, unrealized: -3896998.21, day: -3896998.21\n", "record": {"elapsed": {"repr": "0:00:17.782170", "seconds": 17.78217}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 545, "message": "Calculated totals - realized: 0.0, unrealized: -3896998.21, day: -3896998.21", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:34:52.555124+05:30", "timestamp": 1755777892.555124}}}
{"text": "2025-08-21 17:34:52.555 | DEBUG    | app.services.dhan_client:get_pnl:554 - PnL consistency check passed: drift=‚Çπ0.00\n", "record": {"elapsed": {"repr": "0:00:17.782862", "seconds": 17.782862}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 554, "message": "PnL consistency check passed: drift=‚Çπ0.00", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:34:52.555816+05:30", "timestamp": 1755777892.555816}}}
{"text": "2025-08-21 17:34:52.556 | DEBUG    | app.services.dhan_client:get_pnl:558 - Creating PnLTotals...\n", "record": {"elapsed": {"repr": "0:00:17.783748", "seconds": 17.783748}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 558, "message": "Creating PnLTotals...", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:34:52.556702+05:30", "timestamp": 1755777892.556702}}}
{"text": "2025-08-21 17:34:52.557 | DEBUG    | app.services.dhan_client:get_pnl:565 - PnLTotals created successfully\n", "record": {"elapsed": {"repr": "0:00:17.784667", "seconds": 17.784667}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 565, "message": "PnLTotals created successfully", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:34:52.557621+05:30", "timestamp": 1755777892.557621}}}
{"text": "2025-08-21 17:34:52.558 | DEBUG    | app.services.dhan_client:get_pnl:574 - Creating PnL model...\n", "record": {"elapsed": {"repr": "0:00:17.785415", "seconds": 17.785415}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 574, "message": "Creating PnL model...", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:34:52.558369+05:30", "timestamp": 1755777892.558369}}}
{"text": "2025-08-21 17:34:52.559 | DEBUG    | app.services.dhan_client:get_pnl:575 - Model fields: totals=<class 'app.models.schemas.PnLTotals'>, perSymbol=5, updated_at=2025-08-21 17:34:52.550463+05:30, trading_day=2025-08-21\n", "record": {"elapsed": {"repr": "0:00:17.786100", "seconds": 17.7861}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 575, "message": "Model fields: totals=<class 'app.models.schemas.PnLTotals'>, perSymbol=5, updated_at=2025-08-21 17:34:52.550463+05:30, trading_day=2025-08-21", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:34:52.559054+05:30", "timestamp": 1755777892.559054}}}
{"text": "2025-08-21 17:34:52.560 | DEBUG    | app.services.dhan_client:get_pnl:584 - Created PnL model: totals=PnLTotals(realized=0.0, unrealized=-3896998.21, day=-3896998.21, currency='INR') per_symbol=[PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=913, avg=1944.27, ltp=568.72, unrealized=-1255879.8, today_pnl=-1255879.8), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=457, avg=1390.48, ltp=366.43, unrealized=467989.1, today_pnl=467989.1), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=196, avg=1021.99, ltp=357.58, unrealized=-130224.48, today_pnl=-130224.48), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=1708, avg=426.15, ltp=1937.86, unrealized=-2582000.92, today_pnl=-2582000.92), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=931, avg=756.68, ltp=330.38, unrealized=-396882.11, today_pnl=-396882.11)] updated_at=datetime.datetime(2025, 8, 21, 17, 34, 52, 550463, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))) trading_day='2025-08-21'\n", "record": {"elapsed": {"repr": "0:00:17.787384", "seconds": 17.787384}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 584, "message": "Created PnL model: totals=PnLTotals(realized=0.0, unrealized=-3896998.21, day=-3896998.21, currency='INR') per_symbol=[PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=913, avg=1944.27, ltp=568.72, unrealized=-1255879.8, today_pnl=-1255879.8), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=457, avg=1390.48, ltp=366.43, unrealized=467989.1, today_pnl=467989.1), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=196, avg=1021.99, ltp=357.58, unrealized=-130224.48, today_pnl=-130224.48), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=1708, avg=426.15, ltp=1937.86, unrealized=-2582000.92, today_pnl=-2582000.92), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=931, avg=756.68, ltp=330.38, unrealized=-396882.11, today_pnl=-396882.11)] updated_at=datetime.datetime(2025, 8, 21, 17, 34, 52, 550463, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))) trading_day='2025-08-21'", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:34:52.560338+05:30", "timestamp": 1755777892.560338}}}
{"text": "2025-08-21 17:34:52.561 | DEBUG    | app.services.dhan_client:get_pnl:585 - PnL model fields: {'totals': PnLTotals(realized=0.0, unrealized=-3896998.21, day=-3896998.21, currency='INR'), 'per_symbol': [PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=913, avg=1944.27, ltp=568.72, unrealized=-1255879.8, today_pnl=-1255879.8), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=457, avg=1390.48, ltp=366.43, unrealized=467989.1, today_pnl=467989.1), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=196, avg=1021.99, ltp=357.58, unrealized=-130224.48, today_pnl=-130224.48), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=1708, avg=426.15, ltp=1937.86, unrealized=-2582000.92, today_pnl=-2582000.92), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=931, avg=756.68, ltp=330.38, unrealized=-396882.11, today_pnl=-396882.11)], 'updated_at': datetime.datetime(2025, 8, 21, 17, 34, 52, 550463, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))), 'trading_day': '2025-08-21'}\n", "record": {"elapsed": {"repr": "0:00:17.788622", "seconds": 17.788622}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 585, "message": "PnL model fields: {'totals': PnLTotals(realized=0.0, unrealized=-3896998.21, day=-3896998.21, currency='INR'), 'per_symbol': [PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=913, avg=1944.27, ltp=568.72, unrealized=-1255879.8, today_pnl=-1255879.8), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=457, avg=1390.48, ltp=366.43, unrealized=467989.1, today_pnl=467989.1), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=196, avg=1021.99, ltp=357.58, unrealized=-130224.48, today_pnl=-130224.48), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=1708, avg=426.15, ltp=1937.86, unrealized=-2582000.92, today_pnl=-2582000.92), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=931, avg=756.68, ltp=330.38, unrealized=-396882.11, today_pnl=-396882.11)], 'updated_at': datetime.datetime(2025, 8, 21, 17, 34, 52, 550463, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))), 'trading_day': '2025-08-21'}", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:34:52.561576+05:30", "timestamp": 1755777892.561576}}}
{"text": "2025-08-21 17:34:52.562 | INFO     | app.services.dhan_client:get_pnl:587 - P&L calculation completed successfully: 5 symbols, unrealized=‚Çπ-3896998.21\n", "record": {"elapsed": {"repr": "0:00:17.789686", "seconds": 17.789686}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 587, "message": "P&L calculation completed successfully: 5 symbols, unrealized=‚Çπ-3896998.21", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:34:52.562640+05:30", "timestamp": 1755777892.56264}}}
{"text": "2025-08-21 17:34:52.563 | DEBUG    | app.ws.live:emit_delta:408 - Emitted pnl delta: seq=20\n", "record": {"elapsed": {"repr": "0:00:17.790683", "seconds": 17.790683}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "emit_delta", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 408, "message": "Emitted pnl delta: seq=20", "module": "live", "name": "app.ws.live", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:34:52.563637+05:30", "timestamp": 1755777892.563637}}}
{"text": "2025-08-21 17:34:52.959 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:18.186966", "seconds": 18.186966}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 22636, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 17:34:52.959920+05:30", "timestamp": 1755777892.95992}}}
{"text": "2025-08-21 17:34:52.960 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:18.187993", "seconds": 18.187993}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 22636, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 17:34:52.960947+05:30", "timestamp": 1755777892.960947}}}
{"text": "2025-08-21 17:34:52.961 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:18.188795", "seconds": 18.188795}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 22636, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 17:34:52.961749+05:30", "timestamp": 1755777892.961749}}}
{"text": "2025-08-21 17:34:52.962 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:18.189800", "seconds": 18.1898}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 22636, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 17:34:52.962754+05:30", "timestamp": 1755777892.962754}}}
{"text": "2025-08-21 17:34:52.964 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:18.191128", "seconds": 18.191128}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 22636, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 17:34:52.964082+05:30", "timestamp": 1755777892.964082}}}
{"text": "2025-08-21 17:34:52.964 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:18.191947", "seconds": 18.191947}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 22636, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 17:34:52.964901+05:30", "timestamp": 1755777892.964901}}}
{"text": "2025-08-21 17:34:52.965 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:18.192799", "seconds": 18.192799}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 22636, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 17:34:52.965753+05:30", "timestamp": 1755777892.965753}}}
{"text": "2025-08-21 17:34:52.966 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:18.193571", "seconds": 18.193571}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 22636, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 17:34:52.966525+05:30", "timestamp": 1755777892.966525}}}
{"text": "2025-08-21 17:34:52.967 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:18.194358", "seconds": 18.194358}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 22636, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 17:34:52.967312+05:30", "timestamp": 1755777892.967312}}}
{"text": "2025-08-21 17:34:52.968 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:18.195261", "seconds": 18.195261}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 22636, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 17:34:52.968215+05:30", "timestamp": 1755777892.968215}}}
{"text": "2025-08-21 17:34:53.064 | DEBUG    | app.ws.live:emit_delta:408 - Emitted positions delta: seq=21\n", "record": {"elapsed": {"repr": "0:00:18.291910", "seconds": 18.29191}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "emit_delta", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 408, "message": "Emitted positions delta: seq=21", "module": "live", "name": "app.ws.live", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:34:53.064864+05:30", "timestamp": 1755777893.064864}}}
{"text": "2025-08-21 17:34:54.172 | INFO     | app.services.dhan_client:get_pnl:489 - Starting accurate P&L calculation\n", "record": {"elapsed": {"repr": "0:00:19.399782", "seconds": 19.399782}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 489, "message": "Starting accurate P&L calculation", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:34:54.172736+05:30", "timestamp": 1755777894.172736}}}
{"text": "2025-08-21 17:34:54.173 | INFO     | app.services.dhan_client:get_pnl:491 - Fetched 5 positions\n", "record": {"elapsed": {"repr": "0:00:19.400895", "seconds": 19.400895}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 491, "message": "Fetched 5 positions", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:34:54.173849+05:30", "timestamp": 1755777894.173849}}}
{"text": "2025-08-21 17:34:54.174 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for RELIANCE: unrealized=-1246941.87, today=-1246941.87\n", "record": {"elapsed": {"repr": "0:00:19.401794", "seconds": 19.401794}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for RELIANCE: unrealized=-1246941.87, today=-1246941.87", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:34:54.174748+05:30", "timestamp": 1755777894.174748}}}
{"text": "2025-08-21 17:34:54.175 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for TCS: unrealized=465019.3, today=465019.3\n", "record": {"elapsed": {"repr": "0:00:19.402529", "seconds": 19.402529}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for TCS: unrealized=465019.3, today=465019.3", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:34:54.175483+05:30", "timestamp": 1755777894.175483}}}
{"text": "2025-08-21 17:34:54.176 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for HDFC: unrealized=-131137.67, today=-131137.67\n", "record": {"elapsed": {"repr": "0:00:19.403412", "seconds": 19.403412}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for HDFC: unrealized=-131137.67, today=-131137.67", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:34:54.176366+05:30", "timestamp": 1755777894.176366}}}
{"text": "2025-08-21 17:34:54.177 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for INFY: unrealized=-2577307.65, today=-2577307.65\n", "record": {"elapsed": {"repr": "0:00:19.404400", "seconds": 19.4044}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for INFY: unrealized=-2577307.65, today=-2577307.65", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:34:54.177354+05:30", "timestamp": 1755777894.177354}}}
{"text": "2025-08-21 17:34:54.178 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for ICICIBANK: unrealized=-391111.06, today=-391111.06\n", "record": {"elapsed": {"repr": "0:00:19.405308", "seconds": 19.405308}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for ICICIBANK: unrealized=-391111.06, today=-391111.06", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:34:54.178262+05:30", "timestamp": 1755777894.178262}}}
{"text": "2025-08-21 17:34:54.179 | INFO     | app.services.dhan_client:get_pnl:545 - Calculated totals - realized: 0.0, unrealized: -3881478.95, day: -3881478.95\n", "record": {"elapsed": {"repr": "0:00:19.406158", "seconds": 19.406158}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 545, "message": "Calculated totals - realized: 0.0, unrealized: -3881478.95, day: -3881478.95", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:34:54.179112+05:30", "timestamp": 1755777894.179112}}}
{"text": "2025-08-21 17:34:54.179 | DEBUG    | app.services.dhan_client:get_pnl:554 - PnL consistency check passed: drift=‚Çπ0.00\n", "record": {"elapsed": {"repr": "0:00:19.406936", "seconds": 19.406936}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 554, "message": "PnL consistency check passed: drift=‚Çπ0.00", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:34:54.179890+05:30", "timestamp": 1755777894.17989}}}
{"text": "2025-08-21 17:34:54.180 | DEBUG    | app.services.dhan_client:get_pnl:558 - Creating PnLTotals...\n", "record": {"elapsed": {"repr": "0:00:19.407890", "seconds": 19.40789}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 558, "message": "Creating PnLTotals...", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:34:54.180844+05:30", "timestamp": 1755777894.180844}}}
{"text": "2025-08-21 17:34:54.181 | DEBUG    | app.services.dhan_client:get_pnl:565 - PnLTotals created successfully\n", "record": {"elapsed": {"repr": "0:00:19.408670", "seconds": 19.40867}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 565, "message": "PnLTotals created successfully", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:34:54.181624+05:30", "timestamp": 1755777894.181624}}}
{"text": "2025-08-21 17:34:54.182 | DEBUG    | app.services.dhan_client:get_pnl:574 - Creating PnL model...\n", "record": {"elapsed": {"repr": "0:00:19.409464", "seconds": 19.409464}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 574, "message": "Creating PnL model...", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:34:54.182418+05:30", "timestamp": 1755777894.182418}}}
{"text": "2025-08-21 17:34:54.183 | DEBUG    | app.services.dhan_client:get_pnl:575 - Model fields: totals=<class 'app.models.schemas.PnLTotals'>, perSymbol=5, updated_at=2025-08-21 17:34:54.174648+05:30, trading_day=2025-08-21\n", "record": {"elapsed": {"repr": "0:00:19.410222", "seconds": 19.410222}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 575, "message": "Model fields: totals=<class 'app.models.schemas.PnLTotals'>, perSymbol=5, updated_at=2025-08-21 17:34:54.174648+05:30, trading_day=2025-08-21", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:34:54.183176+05:30", "timestamp": 1755777894.183176}}}
{"text": "2025-08-21 17:34:54.184 | DEBUG    | app.services.dhan_client:get_pnl:584 - Created PnL model: totals=PnLTotals(realized=0.0, unrealized=-3881478.95, day=-3881478.95, currency='INR') per_symbol=[PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=913, avg=1944.27, ltp=578.51, unrealized=-1246941.87, today_pnl=-1246941.87), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=457, avg=1390.48, ltp=372.93, unrealized=465019.3, today_pnl=465019.3), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=196, avg=1021.99, ltp=352.92, unrealized=-131137.67, today_pnl=-131137.67), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=1708, avg=426.15, ltp=1935.11, unrealized=-2577307.65, today_pnl=-2577307.65), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=931, avg=756.68, ltp=336.58, unrealized=-391111.06, today_pnl=-391111.06)] updated_at=datetime.datetime(2025, 8, 21, 17, 34, 54, 174648, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))) trading_day='2025-08-21'\n", "record": {"elapsed": {"repr": "0:00:19.411400", "seconds": 19.4114}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 584, "message": "Created PnL model: totals=PnLTotals(realized=0.0, unrealized=-3881478.95, day=-3881478.95, currency='INR') per_symbol=[PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=913, avg=1944.27, ltp=578.51, unrealized=-1246941.87, today_pnl=-1246941.87), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=457, avg=1390.48, ltp=372.93, unrealized=465019.3, today_pnl=465019.3), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=196, avg=1021.99, ltp=352.92, unrealized=-131137.67, today_pnl=-131137.67), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=1708, avg=426.15, ltp=1935.11, unrealized=-2577307.65, today_pnl=-2577307.65), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=931, avg=756.68, ltp=336.58, unrealized=-391111.06, today_pnl=-391111.06)] updated_at=datetime.datetime(2025, 8, 21, 17, 34, 54, 174648, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))) trading_day='2025-08-21'", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:34:54.184354+05:30", "timestamp": 1755777894.184354}}}
{"text": "2025-08-21 17:34:54.185 | DEBUG    | app.services.dhan_client:get_pnl:585 - PnL model fields: {'totals': PnLTotals(realized=0.0, unrealized=-3881478.95, day=-3881478.95, currency='INR'), 'per_symbol': [PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=913, avg=1944.27, ltp=578.51, unrealized=-1246941.87, today_pnl=-1246941.87), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=457, avg=1390.48, ltp=372.93, unrealized=465019.3, today_pnl=465019.3), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=196, avg=1021.99, ltp=352.92, unrealized=-131137.67, today_pnl=-131137.67), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=1708, avg=426.15, ltp=1935.11, unrealized=-2577307.65, today_pnl=-2577307.65), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=931, avg=756.68, ltp=336.58, unrealized=-391111.06, today_pnl=-391111.06)], 'updated_at': datetime.datetime(2025, 8, 21, 17, 34, 54, 174648, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))), 'trading_day': '2025-08-21'}\n", "record": {"elapsed": {"repr": "0:00:19.412837", "seconds": 19.412837}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 585, "message": "PnL model fields: {'totals': PnLTotals(realized=0.0, unrealized=-3881478.95, day=-3881478.95, currency='INR'), 'per_symbol': [PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=913, avg=1944.27, ltp=578.51, unrealized=-1246941.87, today_pnl=-1246941.87), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=457, avg=1390.48, ltp=372.93, unrealized=465019.3, today_pnl=465019.3), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=196, avg=1021.99, ltp=352.92, unrealized=-131137.67, today_pnl=-131137.67), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=1708, avg=426.15, ltp=1935.11, unrealized=-2577307.65, today_pnl=-2577307.65), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=931, avg=756.68, ltp=336.58, unrealized=-391111.06, today_pnl=-391111.06)], 'updated_at': datetime.datetime(2025, 8, 21, 17, 34, 54, 174648, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))), 'trading_day': '2025-08-21'}", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:34:54.185791+05:30", "timestamp": 1755777894.185791}}}
{"text": "2025-08-21 17:34:54.186 | INFO     | app.services.dhan_client:get_pnl:587 - P&L calculation completed successfully: 5 symbols, unrealized=‚Çπ-3881478.95\n", "record": {"elapsed": {"repr": "0:00:19.414005", "seconds": 19.414005}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 587, "message": "P&L calculation completed successfully: 5 symbols, unrealized=‚Çπ-3881478.95", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:34:54.186959+05:30", "timestamp": 1755777894.186959}}}
{"text": "2025-08-21 17:34:54.188 | DEBUG    | app.ws.live:emit_delta:408 - Emitted pnl delta: seq=22\n", "record": {"elapsed": {"repr": "0:00:19.415316", "seconds": 19.415316}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "emit_delta", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 408, "message": "Emitted pnl delta: seq=22", "module": "live", "name": "app.ws.live", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:34:54.188270+05:30", "timestamp": 1755777894.18827}}}
{"text": "2025-08-21 17:34:54.969 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:20.196576", "seconds": 20.196576}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 22636, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 17:34:54.969530+05:30", "timestamp": 1755777894.96953}}}
{"text": "2025-08-21 17:34:54.970 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:20.197700", "seconds": 20.1977}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 22636, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 17:34:54.970654+05:30", "timestamp": 1755777894.970654}}}
{"text": "2025-08-21 17:34:54.971 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:20.198512", "seconds": 20.198512}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 22636, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 17:34:54.971466+05:30", "timestamp": 1755777894.971466}}}
{"text": "2025-08-21 17:34:54.972 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:20.199318", "seconds": 20.199318}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 22636, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 17:34:54.972272+05:30", "timestamp": 1755777894.972272}}}
{"text": "2025-08-21 17:34:54.972 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:20.199962", "seconds": 20.199962}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 22636, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 17:34:54.972916+05:30", "timestamp": 1755777894.972916}}}
{"text": "2025-08-21 17:34:54.973 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:20.200664", "seconds": 20.200664}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 22636, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 17:34:54.973618+05:30", "timestamp": 1755777894.973618}}}
{"text": "2025-08-21 17:34:54.974 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:20.201396", "seconds": 20.201396}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 22636, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 17:34:54.974350+05:30", "timestamp": 1755777894.97435}}}
{"text": "2025-08-21 17:34:54.975 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:20.202059", "seconds": 20.202059}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 22636, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 17:34:54.975013+05:30", "timestamp": 1755777894.975013}}}
{"text": "2025-08-21 17:34:54.975 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:20.202660", "seconds": 20.20266}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 22636, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 17:34:54.975614+05:30", "timestamp": 1755777894.975614}}}
{"text": "2025-08-21 17:34:54.976 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:20.203456", "seconds": 20.203456}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 22636, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 17:34:54.976410+05:30", "timestamp": 1755777894.97641}}}
{"text": "2025-08-21 17:34:56.112 | INFO     | app.services.dhan_client:get_pnl:489 - Starting accurate P&L calculation\n", "record": {"elapsed": {"repr": "0:00:21.339553", "seconds": 21.339553}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 489, "message": "Starting accurate P&L calculation", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:34:56.112507+05:30", "timestamp": 1755777896.112507}}}
{"text": "2025-08-21 17:34:56.113 | INFO     | app.services.dhan_client:get_pnl:491 - Fetched 5 positions\n", "record": {"elapsed": {"repr": "0:00:21.340570", "seconds": 21.34057}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 491, "message": "Fetched 5 positions", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:34:56.113524+05:30", "timestamp": 1755777896.113524}}}
{"text": "2025-08-21 17:34:56.114 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for RELIANCE: unrealized=-1247228.68, today=-1247228.68\n", "record": {"elapsed": {"repr": "0:00:21.341334", "seconds": 21.341334}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for RELIANCE: unrealized=-1247228.68, today=-1247228.68", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:34:56.114288+05:30", "timestamp": 1755777896.114288}}}
{"text": "2025-08-21 17:34:56.115 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for TCS: unrealized=466406.01, today=466406.01\n", "record": {"elapsed": {"repr": "0:00:21.342093", "seconds": 21.342093}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for TCS: unrealized=466406.01, today=466406.01", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:34:56.115047+05:30", "timestamp": 1755777896.115047}}}
{"text": "2025-08-21 17:34:56.115 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for HDFC: unrealized=-132065.66, today=-132065.66\n", "record": {"elapsed": {"repr": "0:00:21.342867", "seconds": 21.342867}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for HDFC: unrealized=-132065.66, today=-132065.66", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:34:56.115821+05:30", "timestamp": 1755777896.115821}}}
{"text": "2025-08-21 17:34:56.116 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for INFY: unrealized=-2550895.0, today=-2550895.0\n", "record": {"elapsed": {"repr": "0:00:21.343692", "seconds": 21.343692}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for INFY: unrealized=-2550895.0, today=-2550895.0", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:34:56.116646+05:30", "timestamp": 1755777896.116646}}}
{"text": "2025-08-21 17:34:56.117 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for ICICIBANK: unrealized=-388611.09, today=-388611.09\n", "record": {"elapsed": {"repr": "0:00:21.344471", "seconds": 21.344471}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for ICICIBANK: unrealized=-388611.09, today=-388611.09", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:34:56.117425+05:30", "timestamp": 1755777896.117425}}}
{"text": "2025-08-21 17:34:56.118 | INFO     | app.services.dhan_client:get_pnl:545 - Calculated totals - realized: 0.0, unrealized: -3852394.42, day: -3852394.42\n", "record": {"elapsed": {"repr": "0:00:21.345271", "seconds": 21.345271}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 545, "message": "Calculated totals - realized: 0.0, unrealized: -3852394.42, day: -3852394.42", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:34:56.118225+05:30", "timestamp": 1755777896.118225}}}
{"text": "2025-08-21 17:34:56.119 | DEBUG    | app.services.dhan_client:get_pnl:554 - PnL consistency check passed: drift=‚Çπ0.00\n", "record": {"elapsed": {"repr": "0:00:21.346173", "seconds": 21.346173}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 554, "message": "PnL consistency check passed: drift=‚Çπ0.00", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:34:56.119127+05:30", "timestamp": 1755777896.119127}}}
{"text": "2025-08-21 17:34:56.119 | DEBUG    | app.services.dhan_client:get_pnl:558 - Creating PnLTotals...\n", "record": {"elapsed": {"repr": "0:00:21.346965", "seconds": 21.346965}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 558, "message": "Creating PnLTotals...", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:34:56.119919+05:30", "timestamp": 1755777896.119919}}}
{"text": "2025-08-21 17:34:56.120 | DEBUG    | app.services.dhan_client:get_pnl:565 - PnLTotals created successfully\n", "record": {"elapsed": {"repr": "0:00:21.347797", "seconds": 21.347797}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 565, "message": "PnLTotals created successfully", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:34:56.120751+05:30", "timestamp": 1755777896.120751}}}
{"text": "2025-08-21 17:34:56.121 | DEBUG    | app.services.dhan_client:get_pnl:574 - Creating PnL model...\n", "record": {"elapsed": {"repr": "0:00:21.348559", "seconds": 21.348559}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 574, "message": "Creating PnL model...", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:34:56.121513+05:30", "timestamp": 1755777896.121513}}}
{"text": "2025-08-21 17:34:56.122 | DEBUG    | app.services.dhan_client:get_pnl:575 - Model fields: totals=<class 'app.models.schemas.PnLTotals'>, perSymbol=5, updated_at=2025-08-21 17:34:56.114198+05:30, trading_day=2025-08-21\n", "record": {"elapsed": {"repr": "0:00:21.349374", "seconds": 21.349374}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 575, "message": "Model fields: totals=<class 'app.models.schemas.PnLTotals'>, perSymbol=5, updated_at=2025-08-21 17:34:56.114198+05:30, trading_day=2025-08-21", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:34:56.122328+05:30", "timestamp": 1755777896.122328}}}
{"text": "2025-08-21 17:34:56.123 | DEBUG    | app.services.dhan_client:get_pnl:584 - Created PnL model: totals=PnLTotals(realized=0.0, unrealized=-3852394.42, day=-3852394.42, currency='INR') per_symbol=[PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=913, avg=1944.27, ltp=578.19, unrealized=-1247228.68, today_pnl=-1247228.68), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=457, avg=1390.48, ltp=369.9, unrealized=466406.01, today_pnl=466406.01), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=196, avg=1021.99, ltp=348.19, unrealized=-132065.66, today_pnl=-132065.66), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=1708, avg=426.15, ltp=1919.65, unrealized=-2550895.0, today_pnl=-2550895.0), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=931, avg=756.68, ltp=339.27, unrealized=-388611.09, today_pnl=-388611.09)] updated_at=datetime.datetime(2025, 8, 21, 17, 34, 56, 114198, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))) trading_day='2025-08-21'\n", "record": {"elapsed": {"repr": "0:00:21.350609", "seconds": 21.350609}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 584, "message": "Created PnL model: totals=PnLTotals(realized=0.0, unrealized=-3852394.42, day=-3852394.42, currency='INR') per_symbol=[PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=913, avg=1944.27, ltp=578.19, unrealized=-1247228.68, today_pnl=-1247228.68), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=457, avg=1390.48, ltp=369.9, unrealized=466406.01, today_pnl=466406.01), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=196, avg=1021.99, ltp=348.19, unrealized=-132065.66, today_pnl=-132065.66), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=1708, avg=426.15, ltp=1919.65, unrealized=-2550895.0, today_pnl=-2550895.0), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=931, avg=756.68, ltp=339.27, unrealized=-388611.09, today_pnl=-388611.09)] updated_at=datetime.datetime(2025, 8, 21, 17, 34, 56, 114198, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))) trading_day='2025-08-21'", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:34:56.123563+05:30", "timestamp": 1755777896.123563}}}
{"text": "2025-08-21 17:34:56.125 | DEBUG    | app.services.dhan_client:get_pnl:585 - PnL model fields: {'totals': PnLTotals(realized=0.0, unrealized=-3852394.42, day=-3852394.42, currency='INR'), 'per_symbol': [PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=913, avg=1944.27, ltp=578.19, unrealized=-1247228.68, today_pnl=-1247228.68), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=457, avg=1390.48, ltp=369.9, unrealized=466406.01, today_pnl=466406.01), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=196, avg=1021.99, ltp=348.19, unrealized=-132065.66, today_pnl=-132065.66), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=1708, avg=426.15, ltp=1919.65, unrealized=-2550895.0, today_pnl=-2550895.0), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=931, avg=756.68, ltp=339.27, unrealized=-388611.09, today_pnl=-388611.09)], 'updated_at': datetime.datetime(2025, 8, 21, 17, 34, 56, 114198, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))), 'trading_day': '2025-08-21'}\n", "record": {"elapsed": {"repr": "0:00:21.352087", "seconds": 21.352087}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 585, "message": "PnL model fields: {'totals': PnLTotals(realized=0.0, unrealized=-3852394.42, day=-3852394.42, currency='INR'), 'per_symbol': [PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=913, avg=1944.27, ltp=578.19, unrealized=-1247228.68, today_pnl=-1247228.68), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=457, avg=1390.48, ltp=369.9, unrealized=466406.01, today_pnl=466406.01), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=196, avg=1021.99, ltp=348.19, unrealized=-132065.66, today_pnl=-132065.66), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=1708, avg=426.15, ltp=1919.65, unrealized=-2550895.0, today_pnl=-2550895.0), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=931, avg=756.68, ltp=339.27, unrealized=-388611.09, today_pnl=-388611.09)], 'updated_at': datetime.datetime(2025, 8, 21, 17, 34, 56, 114198, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))), 'trading_day': '2025-08-21'}", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:34:56.125041+05:30", "timestamp": 1755777896.125041}}}
{"text": "2025-08-21 17:34:56.126 | INFO     | app.services.dhan_client:get_pnl:587 - P&L calculation completed successfully: 5 symbols, unrealized=‚Çπ-3852394.42\n", "record": {"elapsed": {"repr": "0:00:21.353052", "seconds": 21.353052}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 587, "message": "P&L calculation completed successfully: 5 symbols, unrealized=‚Çπ-3852394.42", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:34:56.126006+05:30", "timestamp": 1755777896.126006}}}
{"text": "2025-08-21 17:34:56.127 | DEBUG    | app.ws.live:emit_delta:408 - Emitted pnl delta: seq=23\n", "record": {"elapsed": {"repr": "0:00:21.354201", "seconds": 21.354201}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "emit_delta", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 408, "message": "Emitted pnl delta: seq=23", "module": "live", "name": "app.ws.live", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:34:56.127155+05:30", "timestamp": 1755777896.127155}}}
{"text": "2025-08-21 17:34:56.712 | DEBUG    | app.ws.live:emit_delta:408 - Emitted positions delta: seq=24\n", "record": {"elapsed": {"repr": "0:00:21.939933", "seconds": 21.939933}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "emit_delta", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 408, "message": "Emitted positions delta: seq=24", "module": "live", "name": "app.ws.live", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:34:56.712887+05:30", "timestamp": 1755777896.712887}}}
{"text": "2025-08-21 17:34:56.977 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:22.204939", "seconds": 22.204939}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 22636, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 17:34:56.977893+05:30", "timestamp": 1755777896.977893}}}
{"text": "2025-08-21 17:34:56.978 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:22.205941", "seconds": 22.205941}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 22636, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 17:34:56.978895+05:30", "timestamp": 1755777896.978895}}}
{"text": "2025-08-21 17:34:56.979 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:22.206824", "seconds": 22.206824}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 22636, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 17:34:56.979778+05:30", "timestamp": 1755777896.979778}}}
{"text": "2025-08-21 17:34:56.980 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:22.207724", "seconds": 22.207724}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 22636, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 17:34:56.980678+05:30", "timestamp": 1755777896.980678}}}
{"text": "2025-08-21 17:34:56.981 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:22.208604", "seconds": 22.208604}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 22636, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 17:34:56.981558+05:30", "timestamp": 1755777896.981558}}}
{"text": "2025-08-21 17:34:56.982 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:22.209574", "seconds": 22.209574}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 22636, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 17:34:56.982528+05:30", "timestamp": 1755777896.982528}}}
{"text": "2025-08-21 17:34:56.983 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:22.210355", "seconds": 22.210355}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 22636, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 17:34:56.983309+05:30", "timestamp": 1755777896.983309}}}
{"text": "2025-08-21 17:34:56.984 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:22.211383", "seconds": 22.211383}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 22636, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 17:34:56.984337+05:30", "timestamp": 1755777896.984337}}}
{"text": "2025-08-21 17:34:56.985 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:22.212535", "seconds": 22.212535}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 22636, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 17:34:56.985489+05:30", "timestamp": 1755777896.985489}}}
{"text": "2025-08-21 17:34:56.986 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:22.213539", "seconds": 22.213539}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 22636, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 17:34:56.986493+05:30", "timestamp": 1755777896.986493}}}
{"text": "2025-08-21 17:34:58.019 | INFO     | app.services.dhan_client:get_pnl:489 - Starting accurate P&L calculation\n", "record": {"elapsed": {"repr": "0:00:23.246624", "seconds": 23.246624}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 489, "message": "Starting accurate P&L calculation", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:34:58.019578+05:30", "timestamp": 1755777898.019578}}}
{"text": "2025-08-21 17:34:58.020 | INFO     | app.services.dhan_client:get_pnl:491 - Fetched 5 positions\n", "record": {"elapsed": {"repr": "0:00:23.247914", "seconds": 23.247914}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 491, "message": "Fetched 5 positions", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:34:58.020868+05:30", "timestamp": 1755777898.020868}}}
{"text": "2025-08-21 17:34:58.021 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for RELIANCE: unrealized=-1247573.02, today=-1247573.02\n", "record": {"elapsed": {"repr": "0:00:23.248984", "seconds": 23.248984}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for RELIANCE: unrealized=-1247573.02, today=-1247573.02", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:34:58.021938+05:30", "timestamp": 1755777898.021938}}}
{"text": "2025-08-21 17:34:58.023 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for TCS: unrealized=464540.55, today=464540.55\n", "record": {"elapsed": {"repr": "0:00:23.250344", "seconds": 23.250344}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for TCS: unrealized=464540.55, today=464540.55", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:34:58.023298+05:30", "timestamp": 1755777898.023298}}}
{"text": "2025-08-21 17:34:58.024 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for HDFC: unrealized=-132740.46, today=-132740.46\n", "record": {"elapsed": {"repr": "0:00:23.251523", "seconds": 23.251523}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for HDFC: unrealized=-132740.46, today=-132740.46", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:34:58.024477+05:30", "timestamp": 1755777898.024477}}}
{"text": "2025-08-21 17:34:58.025 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for INFY: unrealized=-2616282.49, today=-2616282.49\n", "record": {"elapsed": {"repr": "0:00:23.252447", "seconds": 23.252447}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for INFY: unrealized=-2616282.49, today=-2616282.49", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:34:58.025401+05:30", "timestamp": 1755777898.025401}}}
{"text": "2025-08-21 17:34:58.026 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for ICICIBANK: unrealized=-383220.58, today=-383220.58\n", "record": {"elapsed": {"repr": "0:00:23.253624", "seconds": 23.253624}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for ICICIBANK: unrealized=-383220.58, today=-383220.58", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:34:58.026578+05:30", "timestamp": 1755777898.026578}}}
{"text": "2025-08-21 17:34:58.027 | INFO     | app.services.dhan_client:get_pnl:545 - Calculated totals - realized: 0.0, unrealized: -3915276.0, day: -3915276.0\n", "record": {"elapsed": {"repr": "0:00:23.254713", "seconds": 23.254713}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 545, "message": "Calculated totals - realized: 0.0, unrealized: -3915276.0, day: -3915276.0", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:34:58.027667+05:30", "timestamp": 1755777898.027667}}}
{"text": "2025-08-21 17:34:58.029 | DEBUG    | app.services.dhan_client:get_pnl:554 - PnL consistency check passed: drift=‚Çπ0.00\n", "record": {"elapsed": {"repr": "0:00:23.256186", "seconds": 23.256186}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 554, "message": "PnL consistency check passed: drift=‚Çπ0.00", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:34:58.029140+05:30", "timestamp": 1755777898.02914}}}
{"text": "2025-08-21 17:34:58.030 | DEBUG    | app.services.dhan_client:get_pnl:558 - Creating PnLTotals...\n", "record": {"elapsed": {"repr": "0:00:23.257342", "seconds": 23.257342}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 558, "message": "Creating PnLTotals...", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:34:58.030296+05:30", "timestamp": 1755777898.030296}}}
{"text": "2025-08-21 17:34:58.031 | DEBUG    | app.services.dhan_client:get_pnl:565 - PnLTotals created successfully\n", "record": {"elapsed": {"repr": "0:00:23.258524", "seconds": 23.258524}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 565, "message": "PnLTotals created successfully", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:34:58.031478+05:30", "timestamp": 1755777898.031478}}}
{"text": "2025-08-21 17:34:58.032 | DEBUG    | app.services.dhan_client:get_pnl:574 - Creating PnL model...\n", "record": {"elapsed": {"repr": "0:00:23.259745", "seconds": 23.259745}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 574, "message": "Creating PnL model...", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:34:58.032699+05:30", "timestamp": 1755777898.032699}}}
{"text": "2025-08-21 17:34:58.033 | DEBUG    | app.services.dhan_client:get_pnl:575 - Model fields: totals=<class 'app.models.schemas.PnLTotals'>, perSymbol=5, updated_at=2025-08-21 17:34:58.021815+05:30, trading_day=2025-08-21\n", "record": {"elapsed": {"repr": "0:00:23.260790", "seconds": 23.26079}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 575, "message": "Model fields: totals=<class 'app.models.schemas.PnLTotals'>, perSymbol=5, updated_at=2025-08-21 17:34:58.021815+05:30, trading_day=2025-08-21", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:34:58.033744+05:30", "timestamp": 1755777898.033744}}}
{"text": "2025-08-21 17:34:58.035 | DEBUG    | app.services.dhan_client:get_pnl:584 - Created PnL model: totals=PnLTotals(realized=0.0, unrealized=-3915276.0, day=-3915276.0, currency='INR') per_symbol=[PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=913, avg=1944.27, ltp=577.82, unrealized=-1247573.02, today_pnl=-1247573.02), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=457, avg=1390.48, ltp=373.98, unrealized=464540.55, today_pnl=464540.55), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=196, avg=1021.99, ltp=344.74, unrealized=-132740.46, today_pnl=-132740.46), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=1708, avg=426.15, ltp=1957.93, unrealized=-2616282.49, today_pnl=-2616282.49), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=931, avg=756.68, ltp=345.06, unrealized=-383220.58, today_pnl=-383220.58)] updated_at=datetime.datetime(2025, 8, 21, 17, 34, 58, 21815, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))) trading_day='2025-08-21'\n", "record": {"elapsed": {"repr": "0:00:23.262265", "seconds": 23.262265}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 584, "message": "Created PnL model: totals=PnLTotals(realized=0.0, unrealized=-3915276.0, day=-3915276.0, currency='INR') per_symbol=[PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=913, avg=1944.27, ltp=577.82, unrealized=-1247573.02, today_pnl=-1247573.02), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=457, avg=1390.48, ltp=373.98, unrealized=464540.55, today_pnl=464540.55), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=196, avg=1021.99, ltp=344.74, unrealized=-132740.46, today_pnl=-132740.46), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=1708, avg=426.15, ltp=1957.93, unrealized=-2616282.49, today_pnl=-2616282.49), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=931, avg=756.68, ltp=345.06, unrealized=-383220.58, today_pnl=-383220.58)] updated_at=datetime.datetime(2025, 8, 21, 17, 34, 58, 21815, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))) trading_day='2025-08-21'", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:34:58.035219+05:30", "timestamp": 1755777898.035219}}}
{"text": "2025-08-21 17:34:58.037 | DEBUG    | app.services.dhan_client:get_pnl:585 - PnL model fields: {'totals': PnLTotals(realized=0.0, unrealized=-3915276.0, day=-3915276.0, currency='INR'), 'per_symbol': [PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=913, avg=1944.27, ltp=577.82, unrealized=-1247573.02, today_pnl=-1247573.02), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=457, avg=1390.48, ltp=373.98, unrealized=464540.55, today_pnl=464540.55), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=196, avg=1021.99, ltp=344.74, unrealized=-132740.46, today_pnl=-132740.46), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=1708, avg=426.15, ltp=1957.93, unrealized=-2616282.49, today_pnl=-2616282.49), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=931, avg=756.68, ltp=345.06, unrealized=-383220.58, today_pnl=-383220.58)], 'updated_at': datetime.datetime(2025, 8, 21, 17, 34, 58, 21815, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))), 'trading_day': '2025-08-21'}\n", "record": {"elapsed": {"repr": "0:00:23.264693", "seconds": 23.264693}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 585, "message": "PnL model fields: {'totals': PnLTotals(realized=0.0, unrealized=-3915276.0, day=-3915276.0, currency='INR'), 'per_symbol': [PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=913, avg=1944.27, ltp=577.82, unrealized=-1247573.02, today_pnl=-1247573.02), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=457, avg=1390.48, ltp=373.98, unrealized=464540.55, today_pnl=464540.55), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=196, avg=1021.99, ltp=344.74, unrealized=-132740.46, today_pnl=-132740.46), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=1708, avg=426.15, ltp=1957.93, unrealized=-2616282.49, today_pnl=-2616282.49), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=931, avg=756.68, ltp=345.06, unrealized=-383220.58, today_pnl=-383220.58)], 'updated_at': datetime.datetime(2025, 8, 21, 17, 34, 58, 21815, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))), 'trading_day': '2025-08-21'}", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:34:58.037647+05:30", "timestamp": 1755777898.037647}}}
{"text": "2025-08-21 17:34:58.039 | INFO     | app.services.dhan_client:get_pnl:587 - P&L calculation completed successfully: 5 symbols, unrealized=‚Çπ-3915276.00\n", "record": {"elapsed": {"repr": "0:00:23.266430", "seconds": 23.26643}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 587, "message": "P&L calculation completed successfully: 5 symbols, unrealized=‚Çπ-3915276.00", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:34:58.039384+05:30", "timestamp": 1755777898.039384}}}
{"text": "2025-08-21 17:34:58.041 | DEBUG    | app.ws.live:emit_delta:408 - Emitted pnl delta: seq=25\n", "record": {"elapsed": {"repr": "0:00:23.268303", "seconds": 23.268303}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "emit_delta", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 408, "message": "Emitted pnl delta: seq=25", "module": "live", "name": "app.ws.live", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:34:58.041257+05:30", "timestamp": 1755777898.041257}}}
{"text": "2025-08-21 17:34:58.394 | DEBUG    | app.ws.live:emit_delta:408 - Emitted positions delta: seq=26\n", "record": {"elapsed": {"repr": "0:00:23.621833", "seconds": 23.621833}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "emit_delta", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 408, "message": "Emitted positions delta: seq=26", "module": "live", "name": "app.ws.live", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:34:58.394787+05:30", "timestamp": 1755777898.394787}}}
{"text": "2025-08-21 17:34:58.987 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:24.214838", "seconds": 24.214838}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 22636, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 17:34:58.987792+05:30", "timestamp": 1755777898.987792}}}
{"text": "2025-08-21 17:34:58.988 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:24.215741", "seconds": 24.215741}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 22636, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 17:34:58.988695+05:30", "timestamp": 1755777898.988695}}}
{"text": "2025-08-21 17:34:58.989 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:24.216555", "seconds": 24.216555}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 22636, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 17:34:58.989509+05:30", "timestamp": 1755777898.989509}}}
{"text": "2025-08-21 17:34:58.990 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:24.217357", "seconds": 24.217357}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 22636, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 17:34:58.990311+05:30", "timestamp": 1755777898.990311}}}
{"text": "2025-08-21 17:34:58.991 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:24.218117", "seconds": 24.218117}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 22636, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 17:34:58.991071+05:30", "timestamp": 1755777898.991071}}}
{"text": "2025-08-21 17:34:58.991 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:24.218872", "seconds": 24.218872}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 22636, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 17:34:58.991826+05:30", "timestamp": 1755777898.991826}}}
{"text": "2025-08-21 17:34:58.992 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:24.219554", "seconds": 24.219554}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 22636, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 17:34:58.992508+05:30", "timestamp": 1755777898.992508}}}
{"text": "2025-08-21 17:34:58.993 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:24.220427", "seconds": 24.220427}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 22636, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 17:34:58.993381+05:30", "timestamp": 1755777898.993381}}}
{"text": "2025-08-21 17:34:58.994 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:24.221250", "seconds": 24.22125}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 22636, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 17:34:58.994204+05:30", "timestamp": 1755777898.994204}}}
{"text": "2025-08-21 17:34:58.995 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:24.222294", "seconds": 24.222294}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 22636, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 17:34:58.995248+05:30", "timestamp": 1755777898.995248}}}
{"text": "2025-08-21 17:34:59.895 | INFO     | app.services.dhan_client:get_pnl:489 - Starting accurate P&L calculation\n", "record": {"elapsed": {"repr": "0:00:25.122454", "seconds": 25.122454}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 489, "message": "Starting accurate P&L calculation", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:34:59.895408+05:30", "timestamp": 1755777899.895408}}}
{"text": "2025-08-21 17:34:59.896 | INFO     | app.services.dhan_client:get_pnl:491 - Fetched 5 positions\n", "record": {"elapsed": {"repr": "0:00:25.123237", "seconds": 25.123237}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 491, "message": "Fetched 5 positions", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:34:59.896191+05:30", "timestamp": 1755777899.896191}}}
{"text": "2025-08-21 17:34:59.897 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for RELIANCE: unrealized=-1247053.77, today=-1247053.77\n", "record": {"elapsed": {"repr": "0:00:25.124227", "seconds": 25.124227}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for RELIANCE: unrealized=-1247053.77, today=-1247053.77", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:34:59.897181+05:30", "timestamp": 1755777899.897181}}}
{"text": "2025-08-21 17:34:59.898 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for TCS: unrealized=464862.14, today=464862.14\n", "record": {"elapsed": {"repr": "0:00:25.125138", "seconds": 25.125138}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for TCS: unrealized=464862.14, today=464862.14", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:34:59.898092+05:30", "timestamp": 1755777899.898092}}}
{"text": "2025-08-21 17:34:59.899 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for HDFC: unrealized=-132167.69, today=-132167.69\n", "record": {"elapsed": {"repr": "0:00:25.126124", "seconds": 25.126124}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for HDFC: unrealized=-132167.69, today=-132167.69", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:34:59.899078+05:30", "timestamp": 1755777899.899078}}}
{"text": "2025-08-21 17:34:59.899 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for INFY: unrealized=-2670049.54, today=-2670049.54\n", "record": {"elapsed": {"repr": "0:00:25.127037", "seconds": 25.127037}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for INFY: unrealized=-2670049.54, today=-2670049.54", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:34:59.899991+05:30", "timestamp": 1755777899.899991}}}
{"text": "2025-08-21 17:34:59.900 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for ICICIBANK: unrealized=-388967.06, today=-388967.06\n", "record": {"elapsed": {"repr": "0:00:25.127925", "seconds": 25.127925}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for ICICIBANK: unrealized=-388967.06, today=-388967.06", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:34:59.900879+05:30", "timestamp": 1755777899.900879}}}
{"text": "2025-08-21 17:34:59.902 | INFO     | app.services.dhan_client:get_pnl:545 - Calculated totals - realized: 0.0, unrealized: -3973375.92, day: -3973375.92\n", "record": {"elapsed": {"repr": "0:00:25.129174", "seconds": 25.129174}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 545, "message": "Calculated totals - realized: 0.0, unrealized: -3973375.92, day: -3973375.92", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:34:59.902128+05:30", "timestamp": 1755777899.902128}}}
{"text": "2025-08-21 17:34:59.903 | DEBUG    | app.services.dhan_client:get_pnl:554 - PnL consistency check passed: drift=‚Çπ0.00\n", "record": {"elapsed": {"repr": "0:00:25.130120", "seconds": 25.13012}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 554, "message": "PnL consistency check passed: drift=‚Çπ0.00", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:34:59.903074+05:30", "timestamp": 1755777899.903074}}}
{"text": "2025-08-21 17:34:59.903 | DEBUG    | app.services.dhan_client:get_pnl:558 - Creating PnLTotals...\n", "record": {"elapsed": {"repr": "0:00:25.130728", "seconds": 25.130728}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 558, "message": "Creating PnLTotals...", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:34:59.903682+05:30", "timestamp": 1755777899.903682}}}
{"text": "2025-08-21 17:34:59.904 | DEBUG    | app.services.dhan_client:get_pnl:565 - PnLTotals created successfully\n", "record": {"elapsed": {"repr": "0:00:25.131410", "seconds": 25.13141}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 565, "message": "PnLTotals created successfully", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:34:59.904364+05:30", "timestamp": 1755777899.904364}}}
{"text": "2025-08-21 17:34:59.905 | DEBUG    | app.services.dhan_client:get_pnl:574 - Creating PnL model...\n", "record": {"elapsed": {"repr": "0:00:25.132245", "seconds": 25.132245}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 574, "message": "Creating PnL model...", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:34:59.905199+05:30", "timestamp": 1755777899.905199}}}
{"text": "2025-08-21 17:34:59.906 | DEBUG    | app.services.dhan_client:get_pnl:575 - Model fields: totals=<class 'app.models.schemas.PnLTotals'>, perSymbol=5, updated_at=2025-08-21 17:34:59.897065+05:30, trading_day=2025-08-21\n", "record": {"elapsed": {"repr": "0:00:25.133159", "seconds": 25.133159}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 575, "message": "Model fields: totals=<class 'app.models.schemas.PnLTotals'>, perSymbol=5, updated_at=2025-08-21 17:34:59.897065+05:30, trading_day=2025-08-21", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:34:59.906113+05:30", "timestamp": 1755777899.906113}}}
{"text": "2025-08-21 17:34:59.908 | DEBUG    | app.services.dhan_client:get_pnl:584 - Created PnL model: totals=PnLTotals(realized=0.0, unrealized=-3973375.92, day=-3973375.92, currency='INR') per_symbol=[PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=913, avg=1944.27, ltp=578.38, unrealized=-1247053.77, today_pnl=-1247053.77), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=457, avg=1390.48, ltp=373.28, unrealized=464862.14, today_pnl=464862.14), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=196, avg=1021.99, ltp=347.67, unrealized=-132167.69, today_pnl=-132167.69), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=1708, avg=426.15, ltp=1989.41, unrealized=-2670049.54, today_pnl=-2670049.54), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=931, avg=756.68, ltp=338.89, unrealized=-388967.06, today_pnl=-388967.06)] updated_at=datetime.datetime(2025, 8, 21, 17, 34, 59, 897065, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))) trading_day='2025-08-21'\n", "record": {"elapsed": {"repr": "0:00:25.135284", "seconds": 25.135284}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 584, "message": "Created PnL model: totals=PnLTotals(realized=0.0, unrealized=-3973375.92, day=-3973375.92, currency='INR') per_symbol=[PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=913, avg=1944.27, ltp=578.38, unrealized=-1247053.77, today_pnl=-1247053.77), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=457, avg=1390.48, ltp=373.28, unrealized=464862.14, today_pnl=464862.14), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=196, avg=1021.99, ltp=347.67, unrealized=-132167.69, today_pnl=-132167.69), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=1708, avg=426.15, ltp=1989.41, unrealized=-2670049.54, today_pnl=-2670049.54), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=931, avg=756.68, ltp=338.89, unrealized=-388967.06, today_pnl=-388967.06)] updated_at=datetime.datetime(2025, 8, 21, 17, 34, 59, 897065, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))) trading_day='2025-08-21'", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:34:59.908238+05:30", "timestamp": 1755777899.908238}}}
{"text": "2025-08-21 17:34:59.909 | DEBUG    | app.services.dhan_client:get_pnl:585 - PnL model fields: {'totals': PnLTotals(realized=0.0, unrealized=-3973375.92, day=-3973375.92, currency='INR'), 'per_symbol': [PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=913, avg=1944.27, ltp=578.38, unrealized=-1247053.77, today_pnl=-1247053.77), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=457, avg=1390.48, ltp=373.28, unrealized=464862.14, today_pnl=464862.14), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=196, avg=1021.99, ltp=347.67, unrealized=-132167.69, today_pnl=-132167.69), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=1708, avg=426.15, ltp=1989.41, unrealized=-2670049.54, today_pnl=-2670049.54), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=931, avg=756.68, ltp=338.89, unrealized=-388967.06, today_pnl=-388967.06)], 'updated_at': datetime.datetime(2025, 8, 21, 17, 34, 59, 897065, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))), 'trading_day': '2025-08-21'}\n", "record": {"elapsed": {"repr": "0:00:25.136803", "seconds": 25.136803}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 585, "message": "PnL model fields: {'totals': PnLTotals(realized=0.0, unrealized=-3973375.92, day=-3973375.92, currency='INR'), 'per_symbol': [PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=913, avg=1944.27, ltp=578.38, unrealized=-1247053.77, today_pnl=-1247053.77), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=457, avg=1390.48, ltp=373.28, unrealized=464862.14, today_pnl=464862.14), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=196, avg=1021.99, ltp=347.67, unrealized=-132167.69, today_pnl=-132167.69), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=1708, avg=426.15, ltp=1989.41, unrealized=-2670049.54, today_pnl=-2670049.54), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=931, avg=756.68, ltp=338.89, unrealized=-388967.06, today_pnl=-388967.06)], 'updated_at': datetime.datetime(2025, 8, 21, 17, 34, 59, 897065, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))), 'trading_day': '2025-08-21'}", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:34:59.909757+05:30", "timestamp": 1755777899.909757}}}
{"text": "2025-08-21 17:34:59.913 | INFO     | app.services.dhan_client:get_pnl:587 - P&L calculation completed successfully: 5 symbols, unrealized=‚Çπ-3973375.92\n", "record": {"elapsed": {"repr": "0:00:25.140466", "seconds": 25.140466}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 587, "message": "P&L calculation completed successfully: 5 symbols, unrealized=‚Çπ-3973375.92", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:34:59.913420+05:30", "timestamp": 1755777899.91342}}}
{"text": "2025-08-21 17:34:59.915 | DEBUG    | app.ws.live:emit_delta:408 - Emitted pnl delta: seq=27\n", "record": {"elapsed": {"repr": "0:00:25.142419", "seconds": 25.142419}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "emit_delta", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 408, "message": "Emitted pnl delta: seq=27", "module": "live", "name": "app.ws.live", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:34:59.915373+05:30", "timestamp": 1755777899.915373}}}
{"text": "2025-08-21 17:34:59.916 | DEBUG    | app.ws.live:emit_delta:408 - Emitted positions delta: seq=28\n", "record": {"elapsed": {"repr": "0:00:25.143736", "seconds": 25.143736}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "emit_delta", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 408, "message": "Emitted positions delta: seq=28", "module": "live", "name": "app.ws.live", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:34:59.916690+05:30", "timestamp": 1755777899.91669}}}
{"text": "2025-08-21 17:35:00.127 | DEBUG    | app.ws.live:emit_delta:408 - Emitted holdings delta: seq=29\n", "record": {"elapsed": {"repr": "0:00:25.354940", "seconds": 25.35494}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "emit_delta", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 408, "message": "Emitted holdings delta: seq=29", "module": "live", "name": "app.ws.live", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:35:00.127894+05:30", "timestamp": 1755777900.127894}}}
{"text": "2025-08-21 17:35:00.996 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:26.223415", "seconds": 26.223415}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 22636, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 17:35:00.996369+05:30", "timestamp": 1755777900.996369}}}
{"text": "2025-08-21 17:35:00.997 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:26.224357", "seconds": 26.224357}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 22636, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 17:35:00.997311+05:30", "timestamp": 1755777900.997311}}}
{"text": "2025-08-21 17:35:00.998 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:26.225133", "seconds": 26.225133}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 22636, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 17:35:00.998087+05:30", "timestamp": 1755777900.998087}}}
{"text": "2025-08-21 17:35:00.998 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:26.225801", "seconds": 26.225801}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 22636, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 17:35:00.998755+05:30", "timestamp": 1755777900.998755}}}
{"text": "2025-08-21 17:35:00.999 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:26.226545", "seconds": 26.226545}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 22636, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 17:35:00.999499+05:30", "timestamp": 1755777900.999499}}}
{"text": "2025-08-21 17:35:01.000 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:26.227353", "seconds": 26.227353}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 22636, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 17:35:01.000307+05:30", "timestamp": 1755777901.000307}}}
{"text": "2025-08-21 17:35:01.001 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:26.228179", "seconds": 26.228179}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 22636, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 17:35:01.001133+05:30", "timestamp": 1755777901.001133}}}
{"text": "2025-08-21 17:35:01.002 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:26.229114", "seconds": 26.229114}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 22636, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 17:35:01.002068+05:30", "timestamp": 1755777901.002068}}}
{"text": "2025-08-21 17:35:01.002 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:26.229980", "seconds": 26.22998}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 22636, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 17:35:01.002934+05:30", "timestamp": 1755777901.002934}}}
{"text": "2025-08-21 17:35:01.003 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:26.230752", "seconds": 26.230752}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 22636, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 17:35:01.003706+05:30", "timestamp": 1755777901.003706}}}
{"text": "2025-08-21 17:35:01.698 | INFO     | app.services.dhan_client:get_pnl:489 - Starting accurate P&L calculation\n", "record": {"elapsed": {"repr": "0:00:26.925165", "seconds": 26.925165}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 489, "message": "Starting accurate P&L calculation", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:35:01.698119+05:30", "timestamp": 1755777901.698119}}}
{"text": "2025-08-21 17:35:01.699 | INFO     | app.services.dhan_client:get_pnl:491 - Fetched 5 positions\n", "record": {"elapsed": {"repr": "0:00:26.926701", "seconds": 26.926701}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 491, "message": "Fetched 5 positions", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:35:01.699655+05:30", "timestamp": 1755777901.699655}}}
{"text": "2025-08-21 17:35:01.700 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for RELIANCE: unrealized=-1246648.1, today=-1246648.1\n", "record": {"elapsed": {"repr": "0:00:26.927950", "seconds": 26.92795}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for RELIANCE: unrealized=-1246648.1, today=-1246648.1", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:35:01.700904+05:30", "timestamp": 1755777901.700904}}}
{"text": "2025-08-21 17:35:01.701 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for TCS: unrealized=467154.74, today=467154.74\n", "record": {"elapsed": {"repr": "0:00:26.928905", "seconds": 26.928905}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for TCS: unrealized=467154.74, today=467154.74", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:35:01.701859+05:30", "timestamp": 1755777901.701859}}}
{"text": "2025-08-21 17:35:01.702 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for HDFC: unrealized=-131853.05, today=-131853.05\n", "record": {"elapsed": {"repr": "0:00:26.929824", "seconds": 26.929824}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for HDFC: unrealized=-131853.05, today=-131853.05", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:35:01.702778+05:30", "timestamp": 1755777901.702778}}}
{"text": "2025-08-21 17:35:01.703 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for INFY: unrealized=-2719779.67, today=-2719779.67\n", "record": {"elapsed": {"repr": "0:00:26.930681", "seconds": 26.930681}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for INFY: unrealized=-2719779.67, today=-2719779.67", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:35:01.703635+05:30", "timestamp": 1755777901.703635}}}
{"text": "2025-08-21 17:35:01.704 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for ICICIBANK: unrealized=-384598.15, today=-384598.15\n", "record": {"elapsed": {"repr": "0:00:26.931759", "seconds": 26.931759}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for ICICIBANK: unrealized=-384598.15, today=-384598.15", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:35:01.704713+05:30", "timestamp": 1755777901.704713}}}
{"text": "2025-08-21 17:35:01.705 | INFO     | app.services.dhan_client:get_pnl:545 - Calculated totals - realized: 0.0, unrealized: -4015724.23, day: -4015724.23\n", "record": {"elapsed": {"repr": "0:00:26.932691", "seconds": 26.932691}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 545, "message": "Calculated totals - realized: 0.0, unrealized: -4015724.23, day: -4015724.23", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:35:01.705645+05:30", "timestamp": 1755777901.705645}}}
{"text": "2025-08-21 17:35:01.706 | DEBUG    | app.services.dhan_client:get_pnl:554 - PnL consistency check passed: drift=‚Çπ0.00\n", "record": {"elapsed": {"repr": "0:00:26.933565", "seconds": 26.933565}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 554, "message": "PnL consistency check passed: drift=‚Çπ0.00", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:35:01.706519+05:30", "timestamp": 1755777901.706519}}}
{"text": "2025-08-21 17:35:01.707 | DEBUG    | app.services.dhan_client:get_pnl:558 - Creating PnLTotals...\n", "record": {"elapsed": {"repr": "0:00:26.934493", "seconds": 26.934493}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 558, "message": "Creating PnLTotals...", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:35:01.707447+05:30", "timestamp": 1755777901.707447}}}
{"text": "2025-08-21 17:35:01.708 | DEBUG    | app.services.dhan_client:get_pnl:565 - PnLTotals created successfully\n", "record": {"elapsed": {"repr": "0:00:26.935315", "seconds": 26.935315}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 565, "message": "PnLTotals created successfully", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:35:01.708269+05:30", "timestamp": 1755777901.708269}}}
{"text": "2025-08-21 17:35:01.709 | DEBUG    | app.services.dhan_client:get_pnl:574 - Creating PnL model...\n", "record": {"elapsed": {"repr": "0:00:26.936316", "seconds": 26.936316}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 574, "message": "Creating PnL model...", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:35:01.709270+05:30", "timestamp": 1755777901.70927}}}
{"text": "2025-08-21 17:35:01.710 | DEBUG    | app.services.dhan_client:get_pnl:575 - Model fields: totals=<class 'app.models.schemas.PnLTotals'>, perSymbol=5, updated_at=2025-08-21 17:35:01.700764+05:30, trading_day=2025-08-21\n", "record": {"elapsed": {"repr": "0:00:26.937105", "seconds": 26.937105}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 575, "message": "Model fields: totals=<class 'app.models.schemas.PnLTotals'>, perSymbol=5, updated_at=2025-08-21 17:35:01.700764+05:30, trading_day=2025-08-21", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:35:01.710059+05:30", "timestamp": 1755777901.710059}}}
{"text": "2025-08-21 17:35:01.711 | DEBUG    | app.services.dhan_client:get_pnl:584 - Created PnL model: totals=PnLTotals(realized=0.0, unrealized=-4015724.23, day=-4015724.23, currency='INR') per_symbol=[PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=913, avg=1944.27, ltp=578.83, unrealized=-1246648.1, today_pnl=-1246648.1), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=457, avg=1390.48, ltp=368.26, unrealized=467154.74, today_pnl=467154.74), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=196, avg=1021.99, ltp=349.27, unrealized=-131853.05, today_pnl=-131853.05), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=1708, avg=426.15, ltp=2018.53, unrealized=-2719779.67, today_pnl=-2719779.67), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=931, avg=756.68, ltp=343.58, unrealized=-384598.15, today_pnl=-384598.15)] updated_at=datetime.datetime(2025, 8, 21, 17, 35, 1, 700764, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))) trading_day='2025-08-21'\n", "record": {"elapsed": {"repr": "0:00:26.938545", "seconds": 26.938545}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 584, "message": "Created PnL model: totals=PnLTotals(realized=0.0, unrealized=-4015724.23, day=-4015724.23, currency='INR') per_symbol=[PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=913, avg=1944.27, ltp=578.83, unrealized=-1246648.1, today_pnl=-1246648.1), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=457, avg=1390.48, ltp=368.26, unrealized=467154.74, today_pnl=467154.74), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=196, avg=1021.99, ltp=349.27, unrealized=-131853.05, today_pnl=-131853.05), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=1708, avg=426.15, ltp=2018.53, unrealized=-2719779.67, today_pnl=-2719779.67), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=931, avg=756.68, ltp=343.58, unrealized=-384598.15, today_pnl=-384598.15)] updated_at=datetime.datetime(2025, 8, 21, 17, 35, 1, 700764, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))) trading_day='2025-08-21'", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:35:01.711499+05:30", "timestamp": 1755777901.711499}}}
{"text": "2025-08-21 17:35:01.712 | DEBUG    | app.services.dhan_client:get_pnl:585 - PnL model fields: {'totals': PnLTotals(realized=0.0, unrealized=-4015724.23, day=-4015724.23, currency='INR'), 'per_symbol': [PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=913, avg=1944.27, ltp=578.83, unrealized=-1246648.1, today_pnl=-1246648.1), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=457, avg=1390.48, ltp=368.26, unrealized=467154.74, today_pnl=467154.74), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=196, avg=1021.99, ltp=349.27, unrealized=-131853.05, today_pnl=-131853.05), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=1708, avg=426.15, ltp=2018.53, unrealized=-2719779.67, today_pnl=-2719779.67), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=931, avg=756.68, ltp=343.58, unrealized=-384598.15, today_pnl=-384598.15)], 'updated_at': datetime.datetime(2025, 8, 21, 17, 35, 1, 700764, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))), 'trading_day': '2025-08-21'}\n", "record": {"elapsed": {"repr": "0:00:26.939995", "seconds": 26.939995}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 585, "message": "PnL model fields: {'totals': PnLTotals(realized=0.0, unrealized=-4015724.23, day=-4015724.23, currency='INR'), 'per_symbol': [PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=913, avg=1944.27, ltp=578.83, unrealized=-1246648.1, today_pnl=-1246648.1), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=457, avg=1390.48, ltp=368.26, unrealized=467154.74, today_pnl=467154.74), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=196, avg=1021.99, ltp=349.27, unrealized=-131853.05, today_pnl=-131853.05), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=1708, avg=426.15, ltp=2018.53, unrealized=-2719779.67, today_pnl=-2719779.67), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=931, avg=756.68, ltp=343.58, unrealized=-384598.15, today_pnl=-384598.15)], 'updated_at': datetime.datetime(2025, 8, 21, 17, 35, 1, 700764, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))), 'trading_day': '2025-08-21'}", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:35:01.712949+05:30", "timestamp": 1755777901.712949}}}
{"text": "2025-08-21 17:35:01.713 | INFO     | app.services.dhan_client:get_pnl:587 - P&L calculation completed successfully: 5 symbols, unrealized=‚Çπ-4015724.23\n", "record": {"elapsed": {"repr": "0:00:26.940923", "seconds": 26.940923}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 587, "message": "P&L calculation completed successfully: 5 symbols, unrealized=‚Çπ-4015724.23", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:35:01.713877+05:30", "timestamp": 1755777901.713877}}}
{"text": "2025-08-21 17:35:01.714 | DEBUG    | app.ws.live:emit_delta:408 - Emitted pnl delta: seq=30\n", "record": {"elapsed": {"repr": "0:00:26.941958", "seconds": 26.941958}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "emit_delta", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 408, "message": "Emitted pnl delta: seq=30", "module": "live", "name": "app.ws.live", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:35:01.714912+05:30", "timestamp": 1755777901.714912}}}
{"text": "2025-08-21 17:35:01.716 | DEBUG    | app.ws.live:emit_delta:408 - Emitted positions delta: seq=31\n", "record": {"elapsed": {"repr": "0:00:26.943060", "seconds": 26.94306}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "emit_delta", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 408, "message": "Emitted positions delta: seq=31", "module": "live", "name": "app.ws.live", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:35:01.716014+05:30", "timestamp": 1755777901.716014}}}
{"text": "2025-08-21 17:35:03.005 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:28.232049", "seconds": 28.232049}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 22636, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 17:35:03.005003+05:30", "timestamp": 1755777903.005003}}}
{"text": "2025-08-21 17:35:03.006 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:28.233655", "seconds": 28.233655}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 22636, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 17:35:03.006609+05:30", "timestamp": 1755777903.006609}}}
{"text": "2025-08-21 17:35:03.008 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:28.235339", "seconds": 28.235339}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 22636, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 17:35:03.008293+05:30", "timestamp": 1755777903.008293}}}
{"text": "2025-08-21 17:35:03.010 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:28.237759", "seconds": 28.237759}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 22636, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 17:35:03.010713+05:30", "timestamp": 1755777903.010713}}}
{"text": "2025-08-21 17:35:03.011 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:28.238962", "seconds": 28.238962}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 22636, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 17:35:03.011916+05:30", "timestamp": 1755777903.011916}}}
{"text": "2025-08-21 17:35:03.012 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:28.239912", "seconds": 28.239912}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 22636, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 17:35:03.012866+05:30", "timestamp": 1755777903.012866}}}
{"text": "2025-08-21 17:35:03.013 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:28.240608", "seconds": 28.240608}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 22636, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 17:35:03.013562+05:30", "timestamp": 1755777903.013562}}}
{"text": "2025-08-21 17:35:03.014 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:28.241344", "seconds": 28.241344}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 22636, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 17:35:03.014298+05:30", "timestamp": 1755777903.014298}}}
{"text": "2025-08-21 17:35:03.015 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:28.242081", "seconds": 28.242081}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 22636, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 17:35:03.015035+05:30", "timestamp": 1755777903.015035}}}
{"text": "2025-08-21 17:35:03.015 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:28.242799", "seconds": 28.242799}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 22636, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 17:35:03.015753+05:30", "timestamp": 1755777903.015753}}}
{"text": "2025-08-21 17:35:03.402 | INFO     | app.services.dhan_client:get_pnl:489 - Starting accurate P&L calculation\n", "record": {"elapsed": {"repr": "0:00:28.629185", "seconds": 28.629185}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 489, "message": "Starting accurate P&L calculation", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:35:03.402139+05:30", "timestamp": 1755777903.402139}}}
{"text": "2025-08-21 17:35:03.404 | INFO     | app.services.dhan_client:get_pnl:491 - Fetched 5 positions\n", "record": {"elapsed": {"repr": "0:00:28.631643", "seconds": 28.631643}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 491, "message": "Fetched 5 positions", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:35:03.404597+05:30", "timestamp": 1755777903.404597}}}
{"text": "2025-08-21 17:35:03.406 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for RELIANCE: unrealized=-1256309.99, today=-1256309.99\n", "record": {"elapsed": {"repr": "0:00:28.633100", "seconds": 28.6331}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for RELIANCE: unrealized=-1256309.99, today=-1256309.99", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:35:03.406054+05:30", "timestamp": 1755777903.406054}}}
{"text": "2025-08-21 17:35:03.407 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for TCS: unrealized=468460.0, today=468460.0\n", "record": {"elapsed": {"repr": "0:00:28.634801", "seconds": 28.634801}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for TCS: unrealized=468460.0, today=468460.0", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:35:03.407755+05:30", "timestamp": 1755777903.407755}}}
{"text": "2025-08-21 17:35:03.409 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for HDFC: unrealized=-131208.61, today=-131208.61\n", "record": {"elapsed": {"repr": "0:00:28.636750", "seconds": 28.63675}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for HDFC: unrealized=-131208.61, today=-131208.61", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:35:03.409704+05:30", "timestamp": 1755777903.409704}}}
{"text": "2025-08-21 17:35:03.413 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for INFY: unrealized=-2726284.22, today=-2726284.22\n", "record": {"elapsed": {"repr": "0:00:28.640139", "seconds": 28.640139}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for INFY: unrealized=-2726284.22, today=-2726284.22", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:35:03.413093+05:30", "timestamp": 1755777903.413093}}}
{"text": "2025-08-21 17:35:03.415 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for ICICIBANK: unrealized=-384409.08, today=-384409.08\n", "record": {"elapsed": {"repr": "0:00:28.642673", "seconds": 28.642673}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for ICICIBANK: unrealized=-384409.08, today=-384409.08", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:35:03.415627+05:30", "timestamp": 1755777903.415627}}}
{"text": "2025-08-21 17:35:03.420 | INFO     | app.services.dhan_client:get_pnl:545 - Calculated totals - realized: 0.0, unrealized: -4029751.9, day: -4029751.9\n", "record": {"elapsed": {"repr": "0:00:28.647121", "seconds": 28.647121}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 545, "message": "Calculated totals - realized: 0.0, unrealized: -4029751.9, day: -4029751.9", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:35:03.420075+05:30", "timestamp": 1755777903.420075}}}
{"text": "2025-08-21 17:35:03.422 | DEBUG    | app.services.dhan_client:get_pnl:554 - PnL consistency check passed: drift=‚Çπ0.00\n", "record": {"elapsed": {"repr": "0:00:28.649556", "seconds": 28.649556}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 554, "message": "PnL consistency check passed: drift=‚Çπ0.00", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:35:03.422510+05:30", "timestamp": 1755777903.42251}}}
{"text": "2025-08-21 17:35:03.423 | DEBUG    | app.services.dhan_client:get_pnl:558 - Creating PnLTotals...\n", "record": {"elapsed": {"repr": "0:00:28.650537", "seconds": 28.650537}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 558, "message": "Creating PnLTotals...", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:35:03.423491+05:30", "timestamp": 1755777903.423491}}}
{"text": "2025-08-21 17:35:03.424 | DEBUG    | app.services.dhan_client:get_pnl:565 - PnLTotals created successfully\n", "record": {"elapsed": {"repr": "0:00:28.651930", "seconds": 28.65193}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 565, "message": "PnLTotals created successfully", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:35:03.424884+05:30", "timestamp": 1755777903.424884}}}
{"text": "2025-08-21 17:35:03.427 | DEBUG    | app.services.dhan_client:get_pnl:574 - Creating PnL model...\n", "record": {"elapsed": {"repr": "0:00:28.654932", "seconds": 28.654932}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 574, "message": "Creating PnL model...", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:35:03.427886+05:30", "timestamp": 1755777903.427886}}}
{"text": "2025-08-21 17:35:03.430 | DEBUG    | app.services.dhan_client:get_pnl:575 - Model fields: totals=<class 'app.models.schemas.PnLTotals'>, perSymbol=5, updated_at=2025-08-21 17:35:03.405885+05:30, trading_day=2025-08-21\n", "record": {"elapsed": {"repr": "0:00:28.658024", "seconds": 28.658024}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 575, "message": "Model fields: totals=<class 'app.models.schemas.PnLTotals'>, perSymbol=5, updated_at=2025-08-21 17:35:03.405885+05:30, trading_day=2025-08-21", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:35:03.430978+05:30", "timestamp": 1755777903.430978}}}
{"text": "2025-08-21 17:35:03.443 | DEBUG    | app.services.dhan_client:get_pnl:584 - Created PnL model: totals=PnLTotals(realized=0.0, unrealized=-4029751.9, day=-4029751.9, currency='INR') per_symbol=[PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=913, avg=1944.27, ltp=568.25, unrealized=-1256309.99, today_pnl=-1256309.99), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=457, avg=1390.48, ltp=365.4, unrealized=468460.0, today_pnl=468460.0), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=196, avg=1021.99, ltp=352.56, unrealized=-131208.61, today_pnl=-131208.61), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=1708, avg=426.15, ltp=2022.34, unrealized=-2726284.22, today_pnl=-2726284.22), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=931, avg=756.68, ltp=343.78, unrealized=-384409.08, today_pnl=-384409.08)] updated_at=datetime.datetime(2025, 8, 21, 17, 35, 3, 405885, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))) trading_day='2025-08-21'\n", "record": {"elapsed": {"repr": "0:00:28.670267", "seconds": 28.670267}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 584, "message": "Created PnL model: totals=PnLTotals(realized=0.0, unrealized=-4029751.9, day=-4029751.9, currency='INR') per_symbol=[PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=913, avg=1944.27, ltp=568.25, unrealized=-1256309.99, today_pnl=-1256309.99), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=457, avg=1390.48, ltp=365.4, unrealized=468460.0, today_pnl=468460.0), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=196, avg=1021.99, ltp=352.56, unrealized=-131208.61, today_pnl=-131208.61), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=1708, avg=426.15, ltp=2022.34, unrealized=-2726284.22, today_pnl=-2726284.22), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=931, avg=756.68, ltp=343.78, unrealized=-384409.08, today_pnl=-384409.08)] updated_at=datetime.datetime(2025, 8, 21, 17, 35, 3, 405885, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))) trading_day='2025-08-21'", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:35:03.443221+05:30", "timestamp": 1755777903.443221}}}
{"text": "2025-08-21 17:35:03.446 | DEBUG    | app.services.dhan_client:get_pnl:585 - PnL model fields: {'totals': PnLTotals(realized=0.0, unrealized=-4029751.9, day=-4029751.9, currency='INR'), 'per_symbol': [PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=913, avg=1944.27, ltp=568.25, unrealized=-1256309.99, today_pnl=-1256309.99), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=457, avg=1390.48, ltp=365.4, unrealized=468460.0, today_pnl=468460.0), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=196, avg=1021.99, ltp=352.56, unrealized=-131208.61, today_pnl=-131208.61), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=1708, avg=426.15, ltp=2022.34, unrealized=-2726284.22, today_pnl=-2726284.22), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=931, avg=756.68, ltp=343.78, unrealized=-384409.08, today_pnl=-384409.08)], 'updated_at': datetime.datetime(2025, 8, 21, 17, 35, 3, 405885, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))), 'trading_day': '2025-08-21'}\n", "record": {"elapsed": {"repr": "0:00:28.673715", "seconds": 28.673715}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 585, "message": "PnL model fields: {'totals': PnLTotals(realized=0.0, unrealized=-4029751.9, day=-4029751.9, currency='INR'), 'per_symbol': [PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=913, avg=1944.27, ltp=568.25, unrealized=-1256309.99, today_pnl=-1256309.99), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=457, avg=1390.48, ltp=365.4, unrealized=468460.0, today_pnl=468460.0), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=196, avg=1021.99, ltp=352.56, unrealized=-131208.61, today_pnl=-131208.61), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=1708, avg=426.15, ltp=2022.34, unrealized=-2726284.22, today_pnl=-2726284.22), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=931, avg=756.68, ltp=343.78, unrealized=-384409.08, today_pnl=-384409.08)], 'updated_at': datetime.datetime(2025, 8, 21, 17, 35, 3, 405885, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))), 'trading_day': '2025-08-21'}", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:35:03.446669+05:30", "timestamp": 1755777903.446669}}}
{"text": "2025-08-21 17:35:03.457 | INFO     | app.services.dhan_client:get_pnl:587 - P&L calculation completed successfully: 5 symbols, unrealized=‚Çπ-4029751.90\n", "record": {"elapsed": {"repr": "0:00:28.684422", "seconds": 28.684422}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 587, "message": "P&L calculation completed successfully: 5 symbols, unrealized=‚Çπ-4029751.90", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:35:03.457376+05:30", "timestamp": 1755777903.457376}}}
{"text": "2025-08-21 17:35:03.463 | DEBUG    | app.ws.live:emit_delta:408 - Emitted pnl delta: seq=32\n", "record": {"elapsed": {"repr": "0:00:28.690196", "seconds": 28.690196}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "emit_delta", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 408, "message": "Emitted pnl delta: seq=32", "module": "live", "name": "app.ws.live", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:35:03.463150+05:30", "timestamp": 1755777903.46315}}}
{"text": "2025-08-21 17:35:03.469 | DEBUG    | app.ws.live:emit_delta:408 - Emitted positions delta: seq=33\n", "record": {"elapsed": {"repr": "0:00:28.696985", "seconds": 28.696985}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "emit_delta", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 408, "message": "Emitted positions delta: seq=33", "module": "live", "name": "app.ws.live", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:35:03.469939+05:30", "timestamp": 1755777903.469939}}}
{"text": "2025-08-21 17:35:05.017 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:30.244078", "seconds": 30.244078}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 22636, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 17:35:05.017032+05:30", "timestamp": 1755777905.017032}}}
{"text": "2025-08-21 17:35:05.018 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:30.245176", "seconds": 30.245176}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 22636, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 17:35:05.018130+05:30", "timestamp": 1755777905.01813}}}
{"text": "2025-08-21 17:35:05.019 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:30.246117", "seconds": 30.246117}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 22636, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 17:35:05.019071+05:30", "timestamp": 1755777905.019071}}}
{"text": "2025-08-21 17:35:05.019 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:30.247024", "seconds": 30.247024}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 22636, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 17:35:05.019978+05:30", "timestamp": 1755777905.019978}}}
{"text": "2025-08-21 17:35:05.021 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:30.248160", "seconds": 30.24816}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 22636, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 17:35:05.021114+05:30", "timestamp": 1755777905.021114}}}
{"text": "2025-08-21 17:35:05.021 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:30.248997", "seconds": 30.248997}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 22636, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 17:35:05.021951+05:30", "timestamp": 1755777905.021951}}}
{"text": "2025-08-21 17:35:05.022 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:30.249749", "seconds": 30.249749}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 22636, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 17:35:05.022703+05:30", "timestamp": 1755777905.022703}}}
{"text": "2025-08-21 17:35:05.023 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:30.250689", "seconds": 30.250689}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 22636, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 17:35:05.023643+05:30", "timestamp": 1755777905.023643}}}
{"text": "2025-08-21 17:35:05.024 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:30.251374", "seconds": 30.251374}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 22636, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 17:35:05.024328+05:30", "timestamp": 1755777905.024328}}}
{"text": "2025-08-21 17:35:05.025 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:30.252186", "seconds": 30.252186}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 22636, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 17:35:05.025140+05:30", "timestamp": 1755777905.02514}}}
{"text": "2025-08-21 17:35:05.035 | INFO     | app.services.dhan_client:get_pnl:489 - Starting accurate P&L calculation\n", "record": {"elapsed": {"repr": "0:00:30.262627", "seconds": 30.262627}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 489, "message": "Starting accurate P&L calculation", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:35:05.035581+05:30", "timestamp": 1755777905.035581}}}
{"text": "2025-08-21 17:35:05.036 | INFO     | app.services.dhan_client:get_pnl:491 - Fetched 5 positions\n", "record": {"elapsed": {"repr": "0:00:30.263549", "seconds": 30.263549}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 491, "message": "Fetched 5 positions", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:35:05.036503+05:30", "timestamp": 1755777905.036503}}}
{"text": "2025-08-21 17:35:05.037 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for RELIANCE: unrealized=-1255931.05, today=-1255931.05\n", "record": {"elapsed": {"repr": "0:00:30.264346", "seconds": 30.264346}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for RELIANCE: unrealized=-1255931.05, today=-1255931.05", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:35:05.037300+05:30", "timestamp": 1755777905.0373}}}
{"text": "2025-08-21 17:35:05.038 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for TCS: unrealized=468366.96, today=468366.96\n", "record": {"elapsed": {"repr": "0:00:30.265075", "seconds": 30.265075}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for TCS: unrealized=468366.96, today=468366.96", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:35:05.038029+05:30", "timestamp": 1755777905.038029}}}
{"text": "2025-08-21 17:35:05.038 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for HDFC: unrealized=-130668.35, today=-130668.35\n", "record": {"elapsed": {"repr": "0:00:30.265819", "seconds": 30.265819}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for HDFC: unrealized=-130668.35, today=-130668.35", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:35:05.038773+05:30", "timestamp": 1755777905.038773}}}
{"text": "2025-08-21 17:35:05.039 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for INFY: unrealized=-2737698.08, today=-2737698.08\n", "record": {"elapsed": {"repr": "0:00:30.266519", "seconds": 30.266519}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for INFY: unrealized=-2737698.08, today=-2737698.08", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:35:05.039473+05:30", "timestamp": 1755777905.039473}}}
{"text": "2025-08-21 17:35:05.040 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for ICICIBANK: unrealized=-390707.74, today=-390707.74\n", "record": {"elapsed": {"repr": "0:00:30.267353", "seconds": 30.267353}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for ICICIBANK: unrealized=-390707.74, today=-390707.74", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:35:05.040307+05:30", "timestamp": 1755777905.040307}}}
{"text": "2025-08-21 17:35:05.041 | INFO     | app.services.dhan_client:get_pnl:545 - Calculated totals - realized: 0.0, unrealized: -4046638.26, day: -4046638.26\n", "record": {"elapsed": {"repr": "0:00:30.268905", "seconds": 30.268905}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 545, "message": "Calculated totals - realized: 0.0, unrealized: -4046638.26, day: -4046638.26", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:35:05.041859+05:30", "timestamp": 1755777905.041859}}}
{"text": "2025-08-21 17:35:05.042 | DEBUG    | app.services.dhan_client:get_pnl:554 - PnL consistency check passed: drift=‚Çπ0.00\n", "record": {"elapsed": {"repr": "0:00:30.269844", "seconds": 30.269844}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 554, "message": "PnL consistency check passed: drift=‚Çπ0.00", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:35:05.042798+05:30", "timestamp": 1755777905.042798}}}
{"text": "2025-08-21 17:35:05.043 | DEBUG    | app.services.dhan_client:get_pnl:558 - Creating PnLTotals...\n", "record": {"elapsed": {"repr": "0:00:30.270846", "seconds": 30.270846}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 558, "message": "Creating PnLTotals...", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:35:05.043800+05:30", "timestamp": 1755777905.0438}}}
{"text": "2025-08-21 17:35:05.045 | DEBUG    | app.services.dhan_client:get_pnl:565 - PnLTotals created successfully\n", "record": {"elapsed": {"repr": "0:00:30.272341", "seconds": 30.272341}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 565, "message": "PnLTotals created successfully", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:35:05.045295+05:30", "timestamp": 1755777905.045295}}}
{"text": "2025-08-21 17:35:05.046 | DEBUG    | app.services.dhan_client:get_pnl:574 - Creating PnL model...\n", "record": {"elapsed": {"repr": "0:00:30.273578", "seconds": 30.273578}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 574, "message": "Creating PnL model...", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:35:05.046532+05:30", "timestamp": 1755777905.046532}}}
{"text": "2025-08-21 17:35:05.047 | DEBUG    | app.services.dhan_client:get_pnl:575 - Model fields: totals=<class 'app.models.schemas.PnLTotals'>, perSymbol=5, updated_at=2025-08-21 17:35:05.037196+05:30, trading_day=2025-08-21\n", "record": {"elapsed": {"repr": "0:00:30.274529", "seconds": 30.274529}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 575, "message": "Model fields: totals=<class 'app.models.schemas.PnLTotals'>, perSymbol=5, updated_at=2025-08-21 17:35:05.037196+05:30, trading_day=2025-08-21", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:35:05.047483+05:30", "timestamp": 1755777905.047483}}}
{"text": "2025-08-21 17:35:05.048 | DEBUG    | app.services.dhan_client:get_pnl:584 - Created PnL model: totals=PnLTotals(realized=0.0, unrealized=-4046638.26, day=-4046638.26, currency='INR') per_symbol=[PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=913, avg=1944.27, ltp=568.66, unrealized=-1255931.05, today_pnl=-1255931.05), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=457, avg=1390.48, ltp=365.61, unrealized=468366.96, today_pnl=468366.96), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=196, avg=1021.99, ltp=355.31, unrealized=-130668.35, today_pnl=-130668.35), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=1708, avg=426.15, ltp=2029.02, unrealized=-2737698.08, today_pnl=-2737698.08), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=931, avg=756.68, ltp=337.02, unrealized=-390707.74, today_pnl=-390707.74)] updated_at=datetime.datetime(2025, 8, 21, 17, 35, 5, 37196, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))) trading_day='2025-08-21'\n", "record": {"elapsed": {"repr": "0:00:30.275814", "seconds": 30.275814}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 584, "message": "Created PnL model: totals=PnLTotals(realized=0.0, unrealized=-4046638.26, day=-4046638.26, currency='INR') per_symbol=[PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=913, avg=1944.27, ltp=568.66, unrealized=-1255931.05, today_pnl=-1255931.05), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=457, avg=1390.48, ltp=365.61, unrealized=468366.96, today_pnl=468366.96), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=196, avg=1021.99, ltp=355.31, unrealized=-130668.35, today_pnl=-130668.35), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=1708, avg=426.15, ltp=2029.02, unrealized=-2737698.08, today_pnl=-2737698.08), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=931, avg=756.68, ltp=337.02, unrealized=-390707.74, today_pnl=-390707.74)] updated_at=datetime.datetime(2025, 8, 21, 17, 35, 5, 37196, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))) trading_day='2025-08-21'", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:35:05.048768+05:30", "timestamp": 1755777905.048768}}}
{"text": "2025-08-21 17:35:05.050 | DEBUG    | app.services.dhan_client:get_pnl:585 - PnL model fields: {'totals': PnLTotals(realized=0.0, unrealized=-4046638.26, day=-4046638.26, currency='INR'), 'per_symbol': [PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=913, avg=1944.27, ltp=568.66, unrealized=-1255931.05, today_pnl=-1255931.05), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=457, avg=1390.48, ltp=365.61, unrealized=468366.96, today_pnl=468366.96), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=196, avg=1021.99, ltp=355.31, unrealized=-130668.35, today_pnl=-130668.35), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=1708, avg=426.15, ltp=2029.02, unrealized=-2737698.08, today_pnl=-2737698.08), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=931, avg=756.68, ltp=337.02, unrealized=-390707.74, today_pnl=-390707.74)], 'updated_at': datetime.datetime(2025, 8, 21, 17, 35, 5, 37196, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))), 'trading_day': '2025-08-21'}\n", "record": {"elapsed": {"repr": "0:00:30.277414", "seconds": 30.277414}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 585, "message": "PnL model fields: {'totals': PnLTotals(realized=0.0, unrealized=-4046638.26, day=-4046638.26, currency='INR'), 'per_symbol': [PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=913, avg=1944.27, ltp=568.66, unrealized=-1255931.05, today_pnl=-1255931.05), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=457, avg=1390.48, ltp=365.61, unrealized=468366.96, today_pnl=468366.96), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=196, avg=1021.99, ltp=355.31, unrealized=-130668.35, today_pnl=-130668.35), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=1708, avg=426.15, ltp=2029.02, unrealized=-2737698.08, today_pnl=-2737698.08), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=931, avg=756.68, ltp=337.02, unrealized=-390707.74, today_pnl=-390707.74)], 'updated_at': datetime.datetime(2025, 8, 21, 17, 35, 5, 37196, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))), 'trading_day': '2025-08-21'}", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:35:05.050368+05:30", "timestamp": 1755777905.050368}}}
{"text": "2025-08-21 17:35:05.051 | INFO     | app.services.dhan_client:get_pnl:587 - P&L calculation completed successfully: 5 symbols, unrealized=‚Çπ-4046638.26\n", "record": {"elapsed": {"repr": "0:00:30.278437", "seconds": 30.278437}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 587, "message": "P&L calculation completed successfully: 5 symbols, unrealized=‚Çπ-4046638.26", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:35:05.051391+05:30", "timestamp": 1755777905.051391}}}
{"text": "2025-08-21 17:35:05.052 | DEBUG    | app.ws.live:emit_delta:408 - Emitted pnl delta: seq=34\n", "record": {"elapsed": {"repr": "0:00:30.279611", "seconds": 30.279611}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "emit_delta", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 408, "message": "Emitted pnl delta: seq=34", "module": "live", "name": "app.ws.live", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:35:05.052565+05:30", "timestamp": 1755777905.052565}}}
{"text": "2025-08-21 17:35:05.053 | DEBUG    | app.ws.live:emit_delta:408 - Emitted positions delta: seq=35\n", "record": {"elapsed": {"repr": "0:00:30.280829", "seconds": 30.280829}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "emit_delta", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 408, "message": "Emitted positions delta: seq=35", "module": "live", "name": "app.ws.live", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:35:05.053783+05:30", "timestamp": 1755777905.053783}}}
{"text": "2025-08-21 17:35:05.678 | INFO     | app.main:add_trace_id:43 - Request started - Method: GET, Path: /pnl, Trace ID: a2326fc3-4794-40ec-bf3b-8a7cfa24bf74\n", "record": {"elapsed": {"repr": "0:00:30.905287", "seconds": 30.905287}, "exception": null, "extra": {}, "file": {"name": "main.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\main.py"}, "function": "add_trace_id", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 43, "message": "Request started - Method: GET, Path: /pnl, Trace ID: a2326fc3-4794-40ec-bf3b-8a7cfa24bf74", "module": "main", "name": "app.main", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:35:05.678241+05:30", "timestamp": 1755777905.678241}}}
{"text": "2025-08-21 17:35:05.688 | INFO     | app.routes.data:pnl:69 - PnL endpoint called\n", "record": {"elapsed": {"repr": "0:00:30.915082", "seconds": 30.915082}, "exception": null, "extra": {}, "file": {"name": "data.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\routes\\data.py"}, "function": "pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 69, "message": "PnL endpoint called", "module": "data", "name": "app.routes.data", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 27388, "name": "AnyIO worker thread"}, "time": {"repr": "2025-08-21 17:35:05.688036+05:30", "timestamp": 1755777905.688036}}}
{"text": "2025-08-21 17:35:05.689 | INFO     | app.services.dhan_client:get_pnl:489 - Starting accurate P&L calculation\n", "record": {"elapsed": {"repr": "0:00:30.916280", "seconds": 30.91628}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 489, "message": "Starting accurate P&L calculation", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 27388, "name": "AnyIO worker thread"}, "time": {"repr": "2025-08-21 17:35:05.689234+05:30", "timestamp": 1755777905.689234}}}
{"text": "2025-08-21 17:35:05.692 | INFO     | app.ws.live:connect:226 - WebSocket connected: 127.0.0.1\n", "record": {"elapsed": {"repr": "0:00:30.919318", "seconds": 30.919318}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "connect", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 226, "message": "WebSocket connected: 127.0.0.1", "module": "live", "name": "app.ws.live", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:35:05.692272+05:30", "timestamp": 1755777905.692272}}}
{"text": "2025-08-21 17:35:05.693 | INFO     | app.main:add_trace_id:43 - Request started - Method: GET, Path: /positions, Trace ID: 78d26401-70ab-48dd-a8e1-5582c125c2a6\n", "record": {"elapsed": {"repr": "0:00:30.920928", "seconds": 30.920928}, "exception": null, "extra": {}, "file": {"name": "main.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\main.py"}, "function": "add_trace_id", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 43, "message": "Request started - Method: GET, Path: /positions, Trace ID: 78d26401-70ab-48dd-a8e1-5582c125c2a6", "module": "main", "name": "app.main", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:35:05.693882+05:30", "timestamp": 1755777905.693882}}}
{"text": "2025-08-21 17:35:05.692 | INFO     | app.services.dhan_client:get_pnl:491 - Fetched 5 positions\n", "record": {"elapsed": {"repr": "0:00:30.919675", "seconds": 30.919675}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 491, "message": "Fetched 5 positions", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 27388, "name": "AnyIO worker thread"}, "time": {"repr": "2025-08-21 17:35:05.692629+05:30", "timestamp": 1755777905.692629}}}
{"text": "2025-08-21 17:35:05.696 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for RELIANCE: unrealized=-1255931.05, today=-1255931.05\n", "record": {"elapsed": {"repr": "0:00:30.923770", "seconds": 30.92377}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for RELIANCE: unrealized=-1255931.05, today=-1255931.05", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 27388, "name": "AnyIO worker thread"}, "time": {"repr": "2025-08-21 17:35:05.696724+05:30", "timestamp": 1755777905.696724}}}
{"text": "2025-08-21 17:35:05.698 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for TCS: unrealized=468366.96, today=468366.96\n", "record": {"elapsed": {"repr": "0:00:30.925814", "seconds": 30.925814}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for TCS: unrealized=468366.96, today=468366.96", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 27388, "name": "AnyIO worker thread"}, "time": {"repr": "2025-08-21 17:35:05.698768+05:30", "timestamp": 1755777905.698768}}}
{"text": "2025-08-21 17:35:05.697 | INFO     | app.main:add_trace_id:43 - Request started - Method: GET, Path: /holdings, Trace ID: 5d655cb2-b0c4-408e-85cb-bef385ac6d68\n", "record": {"elapsed": {"repr": "0:00:30.925036", "seconds": 30.925036}, "exception": null, "extra": {}, "file": {"name": "main.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\main.py"}, "function": "add_trace_id", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 43, "message": "Request started - Method: GET, Path: /holdings, Trace ID: 5d655cb2-b0c4-408e-85cb-bef385ac6d68", "module": "main", "name": "app.main", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:35:05.697990+05:30", "timestamp": 1755777905.69799}}}
{"text": "2025-08-21 17:35:05.700 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for HDFC: unrealized=-130668.35, today=-130668.35\n", "record": {"elapsed": {"repr": "0:00:30.927245", "seconds": 30.927245}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for HDFC: unrealized=-130668.35, today=-130668.35", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 27388, "name": "AnyIO worker thread"}, "time": {"repr": "2025-08-21 17:35:05.700199+05:30", "timestamp": 1755777905.700199}}}
{"text": "2025-08-21 17:35:05.702 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for INFY: unrealized=-2737698.08, today=-2737698.08\n", "record": {"elapsed": {"repr": "0:00:30.929394", "seconds": 30.929394}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for INFY: unrealized=-2737698.08, today=-2737698.08", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 27388, "name": "AnyIO worker thread"}, "time": {"repr": "2025-08-21 17:35:05.702348+05:30", "timestamp": 1755777905.702348}}}
{"text": "2025-08-21 17:35:05.703 | INFO     | app.main:add_trace_id:43 - Request started - Method: GET, Path: /orders, Trace ID: 429858a8-019b-48ca-a1c6-957b565f28dd\n", "record": {"elapsed": {"repr": "0:00:30.930329", "seconds": 30.930329}, "exception": null, "extra": {}, "file": {"name": "main.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\main.py"}, "function": "add_trace_id", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 43, "message": "Request started - Method: GET, Path: /orders, Trace ID: 429858a8-019b-48ca-a1c6-957b565f28dd", "module": "main", "name": "app.main", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:35:05.703283+05:30", "timestamp": 1755777905.703283}}}
{"text": "2025-08-21 17:35:05.704 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for ICICIBANK: unrealized=-390707.74, today=-390707.74\n", "record": {"elapsed": {"repr": "0:00:30.931191", "seconds": 30.931191}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for ICICIBANK: unrealized=-390707.74, today=-390707.74", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 27388, "name": "AnyIO worker thread"}, "time": {"repr": "2025-08-21 17:35:05.704145+05:30", "timestamp": 1755777905.704145}}}
{"text": "2025-08-21 17:35:05.707 | INFO     | app.services.dhan_client:get_pnl:545 - Calculated totals - realized: 0.0, unrealized: -4046638.26, day: -4046638.26\n", "record": {"elapsed": {"repr": "0:00:30.934431", "seconds": 30.934431}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 545, "message": "Calculated totals - realized: 0.0, unrealized: -4046638.26, day: -4046638.26", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 27388, "name": "AnyIO worker thread"}, "time": {"repr": "2025-08-21 17:35:05.707385+05:30", "timestamp": 1755777905.707385}}}
{"text": "2025-08-21 17:35:05.709 | INFO     | app.main:add_trace_id:43 - Request started - Method: GET, Path: /trades, Trace ID: 8492b173-f589-4b21-9674-47afee7368c7\n", "record": {"elapsed": {"repr": "0:00:30.936234", "seconds": 30.936234}, "exception": null, "extra": {}, "file": {"name": "main.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\main.py"}, "function": "add_trace_id", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 43, "message": "Request started - Method: GET, Path: /trades, Trace ID: 8492b173-f589-4b21-9674-47afee7368c7", "module": "main", "name": "app.main", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:35:05.709188+05:30", "timestamp": 1755777905.709188}}}
{"text": "2025-08-21 17:35:05.710 | DEBUG    | app.services.dhan_client:get_pnl:554 - PnL consistency check passed: drift=‚Çπ0.00\n", "record": {"elapsed": {"repr": "0:00:30.937443", "seconds": 30.937443}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 554, "message": "PnL consistency check passed: drift=‚Çπ0.00", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 27388, "name": "AnyIO worker thread"}, "time": {"repr": "2025-08-21 17:35:05.710397+05:30", "timestamp": 1755777905.710397}}}
{"text": "2025-08-21 17:35:05.712 | DEBUG    | app.services.dhan_client:get_pnl:558 - Creating PnLTotals...\n", "record": {"elapsed": {"repr": "0:00:30.939136", "seconds": 30.939136}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 558, "message": "Creating PnLTotals...", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 27388, "name": "AnyIO worker thread"}, "time": {"repr": "2025-08-21 17:35:05.712090+05:30", "timestamp": 1755777905.71209}}}
{"text": "2025-08-21 17:35:05.720 | DEBUG    | app.services.dhan_client:get_pnl:565 - PnLTotals created successfully\n", "record": {"elapsed": {"repr": "0:00:30.947142", "seconds": 30.947142}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 565, "message": "PnLTotals created successfully", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 27388, "name": "AnyIO worker thread"}, "time": {"repr": "2025-08-21 17:35:05.720096+05:30", "timestamp": 1755777905.720096}}}
{"text": "2025-08-21 17:35:05.723 | DEBUG    | app.services.dhan_client:get_pnl:574 - Creating PnL model...\n", "record": {"elapsed": {"repr": "0:00:30.950663", "seconds": 30.950663}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 574, "message": "Creating PnL model...", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 27388, "name": "AnyIO worker thread"}, "time": {"repr": "2025-08-21 17:35:05.723617+05:30", "timestamp": 1755777905.723617}}}
{"text": "2025-08-21 17:35:05.726 | DEBUG    | app.services.dhan_client:get_pnl:575 - Model fields: totals=<class 'app.models.schemas.PnLTotals'>, perSymbol=5, updated_at=2025-08-21 17:35:05.696550+05:30, trading_day=2025-08-21\n", "record": {"elapsed": {"repr": "0:00:30.953304", "seconds": 30.953304}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 575, "message": "Model fields: totals=<class 'app.models.schemas.PnLTotals'>, perSymbol=5, updated_at=2025-08-21 17:35:05.696550+05:30, trading_day=2025-08-21", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 27388, "name": "AnyIO worker thread"}, "time": {"repr": "2025-08-21 17:35:05.726258+05:30", "timestamp": 1755777905.726258}}}
{"text": "2025-08-21 17:35:05.727 | INFO     | app.main:add_trace_id:47 - Request completed - Method: GET, Path: /positions, Status: 200, Trace ID: 78d26401-70ab-48dd-a8e1-5582c125c2a6\n", "record": {"elapsed": {"repr": "0:00:30.954088", "seconds": 30.954088}, "exception": null, "extra": {}, "file": {"name": "main.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\main.py"}, "function": "add_trace_id", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 47, "message": "Request completed - Method: GET, Path: /positions, Status: 200, Trace ID: 78d26401-70ab-48dd-a8e1-5582c125c2a6", "module": "main", "name": "app.main", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:35:05.727042+05:30", "timestamp": 1755777905.727042}}}
{"text": "2025-08-21 17:35:05.728 | DEBUG    | app.services.dhan_client:get_pnl:584 - Created PnL model: totals=PnLTotals(realized=0.0, unrealized=-4046638.26, day=-4046638.26, currency='INR') per_symbol=[PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=913, avg=1944.27, ltp=568.66, unrealized=-1255931.05, today_pnl=-1255931.05), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=457, avg=1390.48, ltp=365.61, unrealized=468366.96, today_pnl=468366.96), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=196, avg=1021.99, ltp=355.31, unrealized=-130668.35, today_pnl=-130668.35), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=1708, avg=426.15, ltp=2029.02, unrealized=-2737698.08, today_pnl=-2737698.08), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=931, avg=756.68, ltp=337.02, unrealized=-390707.74, today_pnl=-390707.74)] updated_at=datetime.datetime(2025, 8, 21, 17, 35, 5, 696550, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))) trading_day='2025-08-21'\n", "record": {"elapsed": {"repr": "0:00:30.955498", "seconds": 30.955498}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 584, "message": "Created PnL model: totals=PnLTotals(realized=0.0, unrealized=-4046638.26, day=-4046638.26, currency='INR') per_symbol=[PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=913, avg=1944.27, ltp=568.66, unrealized=-1255931.05, today_pnl=-1255931.05), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=457, avg=1390.48, ltp=365.61, unrealized=468366.96, today_pnl=468366.96), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=196, avg=1021.99, ltp=355.31, unrealized=-130668.35, today_pnl=-130668.35), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=1708, avg=426.15, ltp=2029.02, unrealized=-2737698.08, today_pnl=-2737698.08), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=931, avg=756.68, ltp=337.02, unrealized=-390707.74, today_pnl=-390707.74)] updated_at=datetime.datetime(2025, 8, 21, 17, 35, 5, 696550, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))) trading_day='2025-08-21'", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 27388, "name": "AnyIO worker thread"}, "time": {"repr": "2025-08-21 17:35:05.728452+05:30", "timestamp": 1755777905.728452}}}
{"text": "2025-08-21 17:35:05.738 | INFO     | app.ws.live:connect:226 - WebSocket connected: 127.0.0.1\n", "record": {"elapsed": {"repr": "0:00:30.965503", "seconds": 30.965503}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "connect", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 226, "message": "WebSocket connected: 127.0.0.1", "module": "live", "name": "app.ws.live", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:35:05.738457+05:30", "timestamp": 1755777905.738457}}}
{"text": "2025-08-21 17:35:05.739 | DEBUG    | app.services.dhan_client:get_pnl:585 - PnL model fields: {'totals': PnLTotals(realized=0.0, unrealized=-4046638.26, day=-4046638.26, currency='INR'), 'per_symbol': [PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=913, avg=1944.27, ltp=568.66, unrealized=-1255931.05, today_pnl=-1255931.05), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=457, avg=1390.48, ltp=365.61, unrealized=468366.96, today_pnl=468366.96), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=196, avg=1021.99, ltp=355.31, unrealized=-130668.35, today_pnl=-130668.35), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=1708, avg=426.15, ltp=2029.02, unrealized=-2737698.08, today_pnl=-2737698.08), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=931, avg=756.68, ltp=337.02, unrealized=-390707.74, today_pnl=-390707.74)], 'updated_at': datetime.datetime(2025, 8, 21, 17, 35, 5, 696550, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))), 'trading_day': '2025-08-21'}\n", "record": {"elapsed": {"repr": "0:00:30.966183", "seconds": 30.966183}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 585, "message": "PnL model fields: {'totals': PnLTotals(realized=0.0, unrealized=-4046638.26, day=-4046638.26, currency='INR'), 'per_symbol': [PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=913, avg=1944.27, ltp=568.66, unrealized=-1255931.05, today_pnl=-1255931.05), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=457, avg=1390.48, ltp=365.61, unrealized=468366.96, today_pnl=468366.96), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=196, avg=1021.99, ltp=355.31, unrealized=-130668.35, today_pnl=-130668.35), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=1708, avg=426.15, ltp=2029.02, unrealized=-2737698.08, today_pnl=-2737698.08), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=931, avg=756.68, ltp=337.02, unrealized=-390707.74, today_pnl=-390707.74)], 'updated_at': datetime.datetime(2025, 8, 21, 17, 35, 5, 696550, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))), 'trading_day': '2025-08-21'}", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 27388, "name": "AnyIO worker thread"}, "time": {"repr": "2025-08-21 17:35:05.739137+05:30", "timestamp": 1755777905.739137}}}
{"text": "2025-08-21 17:35:05.743 | INFO     | app.services.dhan_client:get_pnl:587 - P&L calculation completed successfully: 5 symbols, unrealized=‚Çπ-4046638.26\n", "record": {"elapsed": {"repr": "0:00:30.970449", "seconds": 30.970449}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 587, "message": "P&L calculation completed successfully: 5 symbols, unrealized=‚Çπ-4046638.26", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 27388, "name": "AnyIO worker thread"}, "time": {"repr": "2025-08-21 17:35:05.743403+05:30", "timestamp": 1755777905.743403}}}
{"text": "2025-08-21 17:35:05.744 | INFO     | app.main:add_trace_id:47 - Request completed - Method: GET, Path: /holdings, Status: 200, Trace ID: 5d655cb2-b0c4-408e-85cb-bef385ac6d68\n", "record": {"elapsed": {"repr": "0:00:30.971088", "seconds": 30.971088}, "exception": null, "extra": {}, "file": {"name": "main.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\main.py"}, "function": "add_trace_id", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 47, "message": "Request completed - Method: GET, Path: /holdings, Status: 200, Trace ID: 5d655cb2-b0c4-408e-85cb-bef385ac6d68", "module": "main", "name": "app.main", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:35:05.744042+05:30", "timestamp": 1755777905.744042}}}
{"text": "2025-08-21 17:35:05.744 | INFO     | app.routes.data:pnl:71 - PnL data returned: True\n", "record": {"elapsed": {"repr": "0:00:30.971875", "seconds": 30.971875}, "exception": null, "extra": {}, "file": {"name": "data.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\routes\\data.py"}, "function": "pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 71, "message": "PnL data returned: True", "module": "data", "name": "app.routes.data", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 27388, "name": "AnyIO worker thread"}, "time": {"repr": "2025-08-21 17:35:05.744829+05:30", "timestamp": 1755777905.744829}}}
{"text": "2025-08-21 17:35:05.746 | INFO     | app.main:add_trace_id:47 - Request completed - Method: GET, Path: /orders, Status: 200, Trace ID: 429858a8-019b-48ca-a1c6-957b565f28dd\n", "record": {"elapsed": {"repr": "0:00:30.973580", "seconds": 30.97358}, "exception": null, "extra": {}, "file": {"name": "main.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\main.py"}, "function": "add_trace_id", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 47, "message": "Request completed - Method: GET, Path: /orders, Status: 200, Trace ID: 429858a8-019b-48ca-a1c6-957b565f28dd", "module": "main", "name": "app.main", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:35:05.746534+05:30", "timestamp": 1755777905.746534}}}
{"text": "2025-08-21 17:35:05.749 | INFO     | app.main:add_trace_id:47 - Request completed - Method: GET, Path: /trades, Status: 200, Trace ID: 8492b173-f589-4b21-9674-47afee7368c7\n", "record": {"elapsed": {"repr": "0:00:30.976910", "seconds": 30.97691}, "exception": null, "extra": {}, "file": {"name": "main.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\main.py"}, "function": "add_trace_id", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 47, "message": "Request completed - Method: GET, Path: /trades, Status: 200, Trace ID: 8492b173-f589-4b21-9674-47afee7368c7", "module": "main", "name": "app.main", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:35:05.749864+05:30", "timestamp": 1755777905.749864}}}
{"text": "2025-08-21 17:35:05.760 | INFO     | app.ws.live:connect:226 - WebSocket connected: 127.0.0.1\n", "record": {"elapsed": {"repr": "0:00:30.987347", "seconds": 30.987347}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "connect", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 226, "message": "WebSocket connected: 127.0.0.1", "module": "live", "name": "app.ws.live", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:35:05.760301+05:30", "timestamp": 1755777905.760301}}}
{"text": "2025-08-21 17:35:05.761 | INFO     | app.main:add_trace_id:47 - Request completed - Method: GET, Path: /pnl, Status: 200, Trace ID: a2326fc3-4794-40ec-bf3b-8a7cfa24bf74\n", "record": {"elapsed": {"repr": "0:00:30.988675", "seconds": 30.988675}, "exception": null, "extra": {}, "file": {"name": "main.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\main.py"}, "function": "add_trace_id", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 47, "message": "Request completed - Method: GET, Path: /pnl, Status: 200, Trace ID: a2326fc3-4794-40ec-bf3b-8a7cfa24bf74", "module": "main", "name": "app.main", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:35:05.761629+05:30", "timestamp": 1755777905.761629}}}
{"text": "2025-08-21 17:35:05.774 | INFO     | app.ws.live:connect:226 - WebSocket connected: 127.0.0.1\n", "record": {"elapsed": {"repr": "0:00:31.001888", "seconds": 31.001888}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "connect", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 226, "message": "WebSocket connected: 127.0.0.1", "module": "live", "name": "app.ws.live", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:35:05.774842+05:30", "timestamp": 1755777905.774842}}}
{"text": "2025-08-21 17:35:05.794 | INFO     | app.ws.live:connect:226 - WebSocket connected: 127.0.0.1\n", "record": {"elapsed": {"repr": "0:00:31.021925", "seconds": 31.021925}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "connect", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 226, "message": "WebSocket connected: 127.0.0.1", "module": "live", "name": "app.ws.live", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:35:05.794879+05:30", "timestamp": 1755777905.794879}}}
{"text": "2025-08-21 17:35:05.817 | INFO     | app.ws.live:connect:226 - WebSocket connected: 127.0.0.1\n", "record": {"elapsed": {"repr": "0:00:31.044173", "seconds": 31.044173}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "connect", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 226, "message": "WebSocket connected: 127.0.0.1", "module": "live", "name": "app.ws.live", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:35:05.817127+05:30", "timestamp": 1755777905.817127}}}
{"text": "2025-08-21 17:35:05.837 | INFO     | app.ws.live:connect:226 - WebSocket connected: 127.0.0.1\n", "record": {"elapsed": {"repr": "0:00:31.064090", "seconds": 31.06409}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "connect", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 226, "message": "WebSocket connected: 127.0.0.1", "module": "live", "name": "app.ws.live", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:35:05.837044+05:30", "timestamp": 1755777905.837044}}}
{"text": "2025-08-21 17:35:05.856 | INFO     | app.ws.live:connect:226 - WebSocket connected: 127.0.0.1\n", "record": {"elapsed": {"repr": "0:00:31.083460", "seconds": 31.08346}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "connect", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 226, "message": "WebSocket connected: 127.0.0.1", "module": "live", "name": "app.ws.live", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:35:05.856414+05:30", "timestamp": 1755777905.856414}}}
{"text": "2025-08-21 17:35:05.879 | INFO     | app.ws.live:connect:226 - WebSocket connected: 127.0.0.1\n", "record": {"elapsed": {"repr": "0:00:31.106692", "seconds": 31.106692}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "connect", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 226, "message": "WebSocket connected: 127.0.0.1", "module": "live", "name": "app.ws.live", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:35:05.879646+05:30", "timestamp": 1755777905.879646}}}
{"text": "2025-08-21 17:35:06.041 | INFO     | app.ws.live:connect:226 - WebSocket connected: 127.0.0.1\n", "record": {"elapsed": {"repr": "0:00:31.268072", "seconds": 31.268072}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "connect", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 226, "message": "WebSocket connected: 127.0.0.1", "module": "live", "name": "app.ws.live", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:35:06.041026+05:30", "timestamp": 1755777906.041026}}}
{"text": "2025-08-21 17:35:06.089 | INFO     | app.ws.live:connect:226 - WebSocket connected: 127.0.0.1\n", "record": {"elapsed": {"repr": "0:00:31.317025", "seconds": 31.317025}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "connect", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 226, "message": "WebSocket connected: 127.0.0.1", "module": "live", "name": "app.ws.live", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:35:06.089979+05:30", "timestamp": 1755777906.089979}}}
{"text": "2025-08-21 17:35:06.121 | INFO     | app.ws.live:connect:226 - WebSocket connected: 127.0.0.1\n", "record": {"elapsed": {"repr": "0:00:31.348804", "seconds": 31.348804}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "connect", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 226, "message": "WebSocket connected: 127.0.0.1", "module": "live", "name": "app.ws.live", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:35:06.121758+05:30", "timestamp": 1755777906.121758}}}
{"text": "2025-08-21 17:35:06.151 | INFO     | app.ws.live:connect:226 - WebSocket connected: 127.0.0.1\n", "record": {"elapsed": {"repr": "0:00:31.378715", "seconds": 31.378715}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "connect", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 226, "message": "WebSocket connected: 127.0.0.1", "module": "live", "name": "app.ws.live", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:35:06.151669+05:30", "timestamp": 1755777906.151669}}}
{"text": "2025-08-21 17:35:06.178 | INFO     | app.ws.live:connect:226 - WebSocket connected: 127.0.0.1\n", "record": {"elapsed": {"repr": "0:00:31.405501", "seconds": 31.405501}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "connect", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 226, "message": "WebSocket connected: 127.0.0.1", "module": "live", "name": "app.ws.live", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:35:06.178455+05:30", "timestamp": 1755777906.178455}}}
{"text": "2025-08-21 17:35:06.245 | INFO     | app.ws.live:connect:226 - WebSocket connected: 127.0.0.1\n", "record": {"elapsed": {"repr": "0:00:31.472143", "seconds": 31.472143}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "connect", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 226, "message": "WebSocket connected: 127.0.0.1", "module": "live", "name": "app.ws.live", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:35:06.245097+05:30", "timestamp": 1755777906.245097}}}
{"text": "2025-08-21 17:35:06.264 | INFO     | app.ws.live:connect:226 - WebSocket connected: 127.0.0.1\n", "record": {"elapsed": {"repr": "0:00:31.491643", "seconds": 31.491643}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "connect", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 226, "message": "WebSocket connected: 127.0.0.1", "module": "live", "name": "app.ws.live", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:35:06.264597+05:30", "timestamp": 1755777906.264597}}}
{"text": "2025-08-21 17:35:06.286 | INFO     | app.ws.live:connect:226 - WebSocket connected: 127.0.0.1\n", "record": {"elapsed": {"repr": "0:00:31.513271", "seconds": 31.513271}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "connect", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 226, "message": "WebSocket connected: 127.0.0.1", "module": "live", "name": "app.ws.live", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:35:06.286225+05:30", "timestamp": 1755777906.286225}}}
{"text": "2025-08-21 17:35:06.312 | DEBUG    | app.ws.live:emit_summary:430 - Emitted orders summary: seq=36\n", "record": {"elapsed": {"repr": "0:00:31.539276", "seconds": 31.539276}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "emit_summary", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 430, "message": "Emitted orders summary: seq=36", "module": "live", "name": "app.ws.live", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:35:06.312230+05:30", "timestamp": 1755777906.31223}}}
{"text": "2025-08-21 17:35:06.330 | INFO     | app.ws.live:connect:226 - WebSocket connected: 127.0.0.1\n", "record": {"elapsed": {"repr": "0:00:31.557138", "seconds": 31.557138}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "connect", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 226, "message": "WebSocket connected: 127.0.0.1", "module": "live", "name": "app.ws.live", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:35:06.330092+05:30", "timestamp": 1755777906.330092}}}
{"text": "2025-08-21 17:35:06.346 | INFO     | app.ws.live:connect:226 - WebSocket connected: 127.0.0.1\n", "record": {"elapsed": {"repr": "0:00:31.573208", "seconds": 31.573208}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "connect", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 226, "message": "WebSocket connected: 127.0.0.1", "module": "live", "name": "app.ws.live", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:35:06.346162+05:30", "timestamp": 1755777906.346162}}}
{"text": "2025-08-21 17:35:06.367 | INFO     | app.ws.live:connect:226 - WebSocket connected: 127.0.0.1\n", "record": {"elapsed": {"repr": "0:00:31.594401", "seconds": 31.594401}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "connect", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 226, "message": "WebSocket connected: 127.0.0.1", "module": "live", "name": "app.ws.live", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:35:06.367355+05:30", "timestamp": 1755777906.367355}}}
{"text": "2025-08-21 17:35:06.614 | INFO     | app.ws.live:connect:226 - WebSocket connected: 127.0.0.1\n", "record": {"elapsed": {"repr": "0:00:31.841388", "seconds": 31.841388}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "connect", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 226, "message": "WebSocket connected: 127.0.0.1", "module": "live", "name": "app.ws.live", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:35:06.614342+05:30", "timestamp": 1755777906.614342}}}
{"text": "2025-08-21 17:35:06.663 | DEBUG    | app.ws.live:websocket_endpoint:517 - Received WebSocket message: {'type': 'subscribe', 'channels': ['positions', 'orders', 'holdings', 'trades', 'pnl']}\n", "record": {"elapsed": {"repr": "0:00:31.890448", "seconds": 31.890448}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "websocket_endpoint", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 517, "message": "Received WebSocket message: {'type': 'subscribe', 'channels': ['positions', 'orders', 'holdings', 'trades', 'pnl']}", "module": "live", "name": "app.ws.live", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:35:06.663402+05:30", "timestamp": 1755777906.663402}}}
{"text": "2025-08-21 17:35:06.669 | INFO     | app.ws.live:handle_message:281 - Client 127.0.0.1 subscribed to: ['positions', 'orders', 'holdings', 'trades', 'pnl']\n", "record": {"elapsed": {"repr": "0:00:31.896358", "seconds": 31.896358}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "handle_message", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 281, "message": "Client 127.0.0.1 subscribed to: ['positions', 'orders', 'holdings', 'trades', 'pnl']", "module": "live", "name": "app.ws.live", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:35:06.669312+05:30", "timestamp": 1755777906.669312}}}
{"text": "2025-08-21 17:35:06.672 | DEBUG    | app.ws.live:websocket_endpoint:517 - Received WebSocket message: {'type': 'subscribe', 'channels': ['positions', 'orders', 'holdings', 'trades', 'pnl']}\n", "record": {"elapsed": {"repr": "0:00:31.899097", "seconds": 31.899097}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "websocket_endpoint", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 517, "message": "Received WebSocket message: {'type': 'subscribe', 'channels': ['positions', 'orders', 'holdings', 'trades', 'pnl']}", "module": "live", "name": "app.ws.live", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:35:06.672051+05:30", "timestamp": 1755777906.672051}}}
{"text": "2025-08-21 17:35:06.674 | INFO     | app.ws.live:handle_message:281 - Client 127.0.0.1 subscribed to: ['positions', 'orders', 'holdings', 'trades', 'pnl']\n", "record": {"elapsed": {"repr": "0:00:31.901260", "seconds": 31.90126}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "handle_message", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 281, "message": "Client 127.0.0.1 subscribed to: ['positions', 'orders', 'holdings', 'trades', 'pnl']", "module": "live", "name": "app.ws.live", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:35:06.674214+05:30", "timestamp": 1755777906.674214}}}
{"text": "2025-08-21 17:35:06.775 | INFO     | app.ws.live:connect:226 - WebSocket connected: 127.0.0.1\n", "record": {"elapsed": {"repr": "0:00:32.003011", "seconds": 32.003011}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "connect", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 226, "message": "WebSocket connected: 127.0.0.1", "module": "live", "name": "app.ws.live", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:35:06.775965+05:30", "timestamp": 1755777906.775965}}}
{"text": "2025-08-21 17:35:06.911 | INFO     | app.services.dhan_client:get_pnl:489 - Starting accurate P&L calculation\n", "record": {"elapsed": {"repr": "0:00:32.138454", "seconds": 32.138454}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 489, "message": "Starting accurate P&L calculation", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:35:06.911408+05:30", "timestamp": 1755777906.911408}}}
{"text": "2025-08-21 17:35:06.913 | INFO     | app.services.dhan_client:get_pnl:491 - Fetched 5 positions\n", "record": {"elapsed": {"repr": "0:00:32.140697", "seconds": 32.140697}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 491, "message": "Fetched 5 positions", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:35:06.913651+05:30", "timestamp": 1755777906.913651}}}
{"text": "2025-08-21 17:35:06.915 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for RELIANCE: unrealized=-1255931.05, today=-1255931.05\n", "record": {"elapsed": {"repr": "0:00:32.142667", "seconds": 32.142667}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for RELIANCE: unrealized=-1255931.05, today=-1255931.05", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:35:06.915621+05:30", "timestamp": 1755777906.915621}}}
{"text": "2025-08-21 17:35:06.916 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for TCS: unrealized=468366.96, today=468366.96\n", "record": {"elapsed": {"repr": "0:00:32.143873", "seconds": 32.143873}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for TCS: unrealized=468366.96, today=468366.96", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:35:06.916827+05:30", "timestamp": 1755777906.916827}}}
{"text": "2025-08-21 17:35:06.918 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for HDFC: unrealized=-130668.35, today=-130668.35\n", "record": {"elapsed": {"repr": "0:00:32.145472", "seconds": 32.145472}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for HDFC: unrealized=-130668.35, today=-130668.35", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:35:06.918426+05:30", "timestamp": 1755777906.918426}}}
{"text": "2025-08-21 17:35:06.920 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for INFY: unrealized=-2737698.08, today=-2737698.08\n", "record": {"elapsed": {"repr": "0:00:32.147232", "seconds": 32.147232}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for INFY: unrealized=-2737698.08, today=-2737698.08", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:35:06.920186+05:30", "timestamp": 1755777906.920186}}}
{"text": "2025-08-21 17:35:06.921 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for ICICIBANK: unrealized=-390707.74, today=-390707.74\n", "record": {"elapsed": {"repr": "0:00:32.148818", "seconds": 32.148818}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for ICICIBANK: unrealized=-390707.74, today=-390707.74", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:35:06.921772+05:30", "timestamp": 1755777906.921772}}}
{"text": "2025-08-21 17:35:06.923 | INFO     | app.services.dhan_client:get_pnl:545 - Calculated totals - realized: 0.0, unrealized: -4046638.26, day: -4046638.26\n", "record": {"elapsed": {"repr": "0:00:32.150687", "seconds": 32.150687}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 545, "message": "Calculated totals - realized: 0.0, unrealized: -4046638.26, day: -4046638.26", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:35:06.923641+05:30", "timestamp": 1755777906.923641}}}
{"text": "2025-08-21 17:35:06.926 | DEBUG    | app.services.dhan_client:get_pnl:554 - PnL consistency check passed: drift=‚Çπ0.00\n", "record": {"elapsed": {"repr": "0:00:32.153147", "seconds": 32.153147}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 554, "message": "PnL consistency check passed: drift=‚Çπ0.00", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:35:06.926101+05:30", "timestamp": 1755777906.926101}}}
{"text": "2025-08-21 17:35:06.928 | DEBUG    | app.services.dhan_client:get_pnl:558 - Creating PnLTotals...\n", "record": {"elapsed": {"repr": "0:00:32.155480", "seconds": 32.15548}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 558, "message": "Creating PnLTotals...", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:35:06.928434+05:30", "timestamp": 1755777906.928434}}}
{"text": "2025-08-21 17:35:06.929 | DEBUG    | app.services.dhan_client:get_pnl:565 - PnLTotals created successfully\n", "record": {"elapsed": {"repr": "0:00:32.156246", "seconds": 32.156246}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 565, "message": "PnLTotals created successfully", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:35:06.929200+05:30", "timestamp": 1755777906.9292}}}
{"text": "2025-08-21 17:35:06.929 | DEBUG    | app.services.dhan_client:get_pnl:574 - Creating PnL model...\n", "record": {"elapsed": {"repr": "0:00:32.157023", "seconds": 32.157023}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 574, "message": "Creating PnL model...", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:35:06.929977+05:30", "timestamp": 1755777906.929977}}}
{"text": "2025-08-21 17:35:06.930 | DEBUG    | app.services.dhan_client:get_pnl:575 - Model fields: totals=<class 'app.models.schemas.PnLTotals'>, perSymbol=5, updated_at=2025-08-21 17:35:06.915139+05:30, trading_day=2025-08-21\n", "record": {"elapsed": {"repr": "0:00:32.157814", "seconds": 32.157814}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 575, "message": "Model fields: totals=<class 'app.models.schemas.PnLTotals'>, perSymbol=5, updated_at=2025-08-21 17:35:06.915139+05:30, trading_day=2025-08-21", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:35:06.930768+05:30", "timestamp": 1755777906.930768}}}
{"text": "2025-08-21 17:35:06.932 | DEBUG    | app.services.dhan_client:get_pnl:584 - Created PnL model: totals=PnLTotals(realized=0.0, unrealized=-4046638.26, day=-4046638.26, currency='INR') per_symbol=[PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=913, avg=1944.27, ltp=568.66, unrealized=-1255931.05, today_pnl=-1255931.05), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=457, avg=1390.48, ltp=365.61, unrealized=468366.96, today_pnl=468366.96), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=196, avg=1021.99, ltp=355.31, unrealized=-130668.35, today_pnl=-130668.35), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=1708, avg=426.15, ltp=2029.02, unrealized=-2737698.08, today_pnl=-2737698.08), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=931, avg=756.68, ltp=337.02, unrealized=-390707.74, today_pnl=-390707.74)] updated_at=datetime.datetime(2025, 8, 21, 17, 35, 6, 915139, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))) trading_day='2025-08-21'\n", "record": {"elapsed": {"repr": "0:00:32.159604", "seconds": 32.159604}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 584, "message": "Created PnL model: totals=PnLTotals(realized=0.0, unrealized=-4046638.26, day=-4046638.26, currency='INR') per_symbol=[PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=913, avg=1944.27, ltp=568.66, unrealized=-1255931.05, today_pnl=-1255931.05), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=457, avg=1390.48, ltp=365.61, unrealized=468366.96, today_pnl=468366.96), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=196, avg=1021.99, ltp=355.31, unrealized=-130668.35, today_pnl=-130668.35), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=1708, avg=426.15, ltp=2029.02, unrealized=-2737698.08, today_pnl=-2737698.08), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=931, avg=756.68, ltp=337.02, unrealized=-390707.74, today_pnl=-390707.74)] updated_at=datetime.datetime(2025, 8, 21, 17, 35, 6, 915139, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))) trading_day='2025-08-21'", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:35:06.932558+05:30", "timestamp": 1755777906.932558}}}
{"text": "2025-08-21 17:35:06.935 | DEBUG    | app.services.dhan_client:get_pnl:585 - PnL model fields: {'totals': PnLTotals(realized=0.0, unrealized=-4046638.26, day=-4046638.26, currency='INR'), 'per_symbol': [PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=913, avg=1944.27, ltp=568.66, unrealized=-1255931.05, today_pnl=-1255931.05), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=457, avg=1390.48, ltp=365.61, unrealized=468366.96, today_pnl=468366.96), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=196, avg=1021.99, ltp=355.31, unrealized=-130668.35, today_pnl=-130668.35), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=1708, avg=426.15, ltp=2029.02, unrealized=-2737698.08, today_pnl=-2737698.08), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=931, avg=756.68, ltp=337.02, unrealized=-390707.74, today_pnl=-390707.74)], 'updated_at': datetime.datetime(2025, 8, 21, 17, 35, 6, 915139, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))), 'trading_day': '2025-08-21'}\n", "record": {"elapsed": {"repr": "0:00:32.162523", "seconds": 32.162523}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 585, "message": "PnL model fields: {'totals': PnLTotals(realized=0.0, unrealized=-4046638.26, day=-4046638.26, currency='INR'), 'per_symbol': [PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=913, avg=1944.27, ltp=568.66, unrealized=-1255931.05, today_pnl=-1255931.05), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=457, avg=1390.48, ltp=365.61, unrealized=468366.96, today_pnl=468366.96), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=196, avg=1021.99, ltp=355.31, unrealized=-130668.35, today_pnl=-130668.35), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=1708, avg=426.15, ltp=2029.02, unrealized=-2737698.08, today_pnl=-2737698.08), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=931, avg=756.68, ltp=337.02, unrealized=-390707.74, today_pnl=-390707.74)], 'updated_at': datetime.datetime(2025, 8, 21, 17, 35, 6, 915139, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))), 'trading_day': '2025-08-21'}", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:35:06.935477+05:30", "timestamp": 1755777906.935477}}}
{"text": "2025-08-21 17:35:06.937 | INFO     | app.services.dhan_client:get_pnl:587 - P&L calculation completed successfully: 5 symbols, unrealized=‚Çπ-4046638.26\n", "record": {"elapsed": {"repr": "0:00:32.164352", "seconds": 32.164352}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 587, "message": "P&L calculation completed successfully: 5 symbols, unrealized=‚Çπ-4046638.26", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:35:06.937306+05:30", "timestamp": 1755777906.937306}}}
{"text": "2025-08-21 17:35:06.938 | ERROR    | app.ws.live:broadcast:253 - Failed to broadcast to client: Object of type PnLTotals is not JSON serializable\n", "record": {"elapsed": {"repr": "0:00:32.166042", "seconds": 32.166042}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "broadcast", "level": {"icon": "‚ùå", "name": "ERROR", "no": 40}, "line": 253, "message": "Failed to broadcast to client: Object of type PnLTotals is not JSON serializable", "module": "live", "name": "app.ws.live", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:35:06.938996+05:30", "timestamp": 1755777906.938996}}}
{"text": "2025-08-21 17:35:06.940 | ERROR    | app.ws.live:broadcast:253 - Failed to broadcast to client: Object of type PnLTotals is not JSON serializable\n", "record": {"elapsed": {"repr": "0:00:32.167161", "seconds": 32.167161}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "broadcast", "level": {"icon": "‚ùå", "name": "ERROR", "no": 40}, "line": 253, "message": "Failed to broadcast to client: Object of type PnLTotals is not JSON serializable", "module": "live", "name": "app.ws.live", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:35:06.940115+05:30", "timestamp": 1755777906.940115}}}
{"text": "2025-08-21 17:35:06.942 | ERROR    | app.ws.live:broadcast:253 - Failed to broadcast to client: Object of type PnLTotals is not JSON serializable\n", "record": {"elapsed": {"repr": "0:00:32.169456", "seconds": 32.169456}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "broadcast", "level": {"icon": "‚ùå", "name": "ERROR", "no": 40}, "line": 253, "message": "Failed to broadcast to client: Object of type PnLTotals is not JSON serializable", "module": "live", "name": "app.ws.live", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:35:06.942410+05:30", "timestamp": 1755777906.94241}}}
{"text": "2025-08-21 17:35:06.943 | ERROR    | app.ws.live:broadcast:253 - Failed to broadcast to client: Object of type PnLTotals is not JSON serializable\n", "record": {"elapsed": {"repr": "0:00:32.170914", "seconds": 32.170914}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "broadcast", "level": {"icon": "‚ùå", "name": "ERROR", "no": 40}, "line": 253, "message": "Failed to broadcast to client: Object of type PnLTotals is not JSON serializable", "module": "live", "name": "app.ws.live", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:35:06.943868+05:30", "timestamp": 1755777906.943868}}}
{"text": "2025-08-21 17:35:06.945 | ERROR    | app.ws.live:broadcast:253 - Failed to broadcast to client: Object of type PnLTotals is not JSON serializable\n", "record": {"elapsed": {"repr": "0:00:32.172123", "seconds": 32.172123}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "broadcast", "level": {"icon": "‚ùå", "name": "ERROR", "no": 40}, "line": 253, "message": "Failed to broadcast to client: Object of type PnLTotals is not JSON serializable", "module": "live", "name": "app.ws.live", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:35:06.945077+05:30", "timestamp": 1755777906.945077}}}
{"text": "2025-08-21 17:35:06.945 | ERROR    | app.ws.live:broadcast:253 - Failed to broadcast to client: Object of type PnLTotals is not JSON serializable\n", "record": {"elapsed": {"repr": "0:00:32.172903", "seconds": 32.172903}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "broadcast", "level": {"icon": "‚ùå", "name": "ERROR", "no": 40}, "line": 253, "message": "Failed to broadcast to client: Object of type PnLTotals is not JSON serializable", "module": "live", "name": "app.ws.live", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:35:06.945857+05:30", "timestamp": 1755777906.945857}}}
{"text": "2025-08-21 17:35:06.946 | ERROR    | app.ws.live:broadcast:253 - Failed to broadcast to client: Object of type PnLTotals is not JSON serializable\n", "record": {"elapsed": {"repr": "0:00:32.173554", "seconds": 32.173554}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "broadcast", "level": {"icon": "‚ùå", "name": "ERROR", "no": 40}, "line": 253, "message": "Failed to broadcast to client: Object of type PnLTotals is not JSON serializable", "module": "live", "name": "app.ws.live", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:35:06.946508+05:30", "timestamp": 1755777906.946508}}}
{"text": "2025-08-21 17:35:06.947 | ERROR    | app.ws.live:broadcast:253 - Failed to broadcast to client: Object of type PnLTotals is not JSON serializable\n", "record": {"elapsed": {"repr": "0:00:32.174365", "seconds": 32.174365}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "broadcast", "level": {"icon": "‚ùå", "name": "ERROR", "no": 40}, "line": 253, "message": "Failed to broadcast to client: Object of type PnLTotals is not JSON serializable", "module": "live", "name": "app.ws.live", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:35:06.947319+05:30", "timestamp": 1755777906.947319}}}
{"text": "2025-08-21 17:35:06.948 | ERROR    | app.ws.live:broadcast:253 - Failed to broadcast to client: Object of type PnLTotals is not JSON serializable\n", "record": {"elapsed": {"repr": "0:00:32.175397", "seconds": 32.175397}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "broadcast", "level": {"icon": "‚ùå", "name": "ERROR", "no": 40}, "line": 253, "message": "Failed to broadcast to client: Object of type PnLTotals is not JSON serializable", "module": "live", "name": "app.ws.live", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:35:06.948351+05:30", "timestamp": 1755777906.948351}}}
{"text": "2025-08-21 17:35:06.950 | ERROR    | app.ws.live:broadcast:253 - Failed to broadcast to client: Object of type PnLTotals is not JSON serializable\n", "record": {"elapsed": {"repr": "0:00:32.177536", "seconds": 32.177536}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "broadcast", "level": {"icon": "‚ùå", "name": "ERROR", "no": 40}, "line": 253, "message": "Failed to broadcast to client: Object of type PnLTotals is not JSON serializable", "module": "live", "name": "app.ws.live", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:35:06.950490+05:30", "timestamp": 1755777906.95049}}}
{"text": "2025-08-21 17:35:06.951 | ERROR    | app.ws.live:broadcast:253 - Failed to broadcast to client: Object of type PnLTotals is not JSON serializable\n", "record": {"elapsed": {"repr": "0:00:32.178812", "seconds": 32.178812}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "broadcast", "level": {"icon": "‚ùå", "name": "ERROR", "no": 40}, "line": 253, "message": "Failed to broadcast to client: Object of type PnLTotals is not JSON serializable", "module": "live", "name": "app.ws.live", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:35:06.951766+05:30", "timestamp": 1755777906.951766}}}
{"text": "2025-08-21 17:35:06.952 | ERROR    | app.ws.live:broadcast:253 - Failed to broadcast to client: Object of type PnLTotals is not JSON serializable\n", "record": {"elapsed": {"repr": "0:00:32.180015", "seconds": 32.180015}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "broadcast", "level": {"icon": "‚ùå", "name": "ERROR", "no": 40}, "line": 253, "message": "Failed to broadcast to client: Object of type PnLTotals is not JSON serializable", "module": "live", "name": "app.ws.live", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:35:06.952969+05:30", "timestamp": 1755777906.952969}}}
{"text": "2025-08-21 17:35:06.953 | ERROR    | app.ws.live:broadcast:253 - Failed to broadcast to client: Object of type PnLTotals is not JSON serializable\n", "record": {"elapsed": {"repr": "0:00:32.180801", "seconds": 32.180801}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "broadcast", "level": {"icon": "‚ùå", "name": "ERROR", "no": 40}, "line": 253, "message": "Failed to broadcast to client: Object of type PnLTotals is not JSON serializable", "module": "live", "name": "app.ws.live", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:35:06.953755+05:30", "timestamp": 1755777906.953755}}}
{"text": "2025-08-21 17:35:06.954 | ERROR    | app.ws.live:broadcast:253 - Failed to broadcast to client: Object of type PnLTotals is not JSON serializable\n", "record": {"elapsed": {"repr": "0:00:32.181471", "seconds": 32.181471}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "broadcast", "level": {"icon": "‚ùå", "name": "ERROR", "no": 40}, "line": 253, "message": "Failed to broadcast to client: Object of type PnLTotals is not JSON serializable", "module": "live", "name": "app.ws.live", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:35:06.954425+05:30", "timestamp": 1755777906.954425}}}
{"text": "2025-08-21 17:35:06.955 | ERROR    | app.ws.live:broadcast:253 - Failed to broadcast to client: Object of type PnLTotals is not JSON serializable\n", "record": {"elapsed": {"repr": "0:00:32.182228", "seconds": 32.182228}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "broadcast", "level": {"icon": "‚ùå", "name": "ERROR", "no": 40}, "line": 253, "message": "Failed to broadcast to client: Object of type PnLTotals is not JSON serializable", "module": "live", "name": "app.ws.live", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:35:06.955182+05:30", "timestamp": 1755777906.955182}}}
{"text": "2025-08-21 17:35:06.955 | ERROR    | app.ws.live:broadcast:253 - Failed to broadcast to client: Object of type PnLTotals is not JSON serializable\n", "record": {"elapsed": {"repr": "0:00:32.182982", "seconds": 32.182982}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "broadcast", "level": {"icon": "‚ùå", "name": "ERROR", "no": 40}, "line": 253, "message": "Failed to broadcast to client: Object of type PnLTotals is not JSON serializable", "module": "live", "name": "app.ws.live", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:35:06.955936+05:30", "timestamp": 1755777906.955936}}}
{"text": "2025-08-21 17:35:06.957 | ERROR    | app.ws.live:broadcast:253 - Failed to broadcast to client: Object of type PnLTotals is not JSON serializable\n", "record": {"elapsed": {"repr": "0:00:32.184080", "seconds": 32.18408}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "broadcast", "level": {"icon": "‚ùå", "name": "ERROR", "no": 40}, "line": 253, "message": "Failed to broadcast to client: Object of type PnLTotals is not JSON serializable", "module": "live", "name": "app.ws.live", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:35:06.957034+05:30", "timestamp": 1755777906.957034}}}
{"text": "2025-08-21 17:35:06.958 | ERROR    | app.ws.live:broadcast:253 - Failed to broadcast to client: Object of type PnLTotals is not JSON serializable\n", "record": {"elapsed": {"repr": "0:00:32.185953", "seconds": 32.185953}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "broadcast", "level": {"icon": "‚ùå", "name": "ERROR", "no": 40}, "line": 253, "message": "Failed to broadcast to client: Object of type PnLTotals is not JSON serializable", "module": "live", "name": "app.ws.live", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:35:06.958907+05:30", "timestamp": 1755777906.958907}}}
{"text": "2025-08-21 17:35:06.960 | ERROR    | app.ws.live:broadcast:253 - Failed to broadcast to client: Object of type PnLTotals is not JSON serializable\n", "record": {"elapsed": {"repr": "0:00:32.187993", "seconds": 32.187993}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "broadcast", "level": {"icon": "‚ùå", "name": "ERROR", "no": 40}, "line": 253, "message": "Failed to broadcast to client: Object of type PnLTotals is not JSON serializable", "module": "live", "name": "app.ws.live", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:35:06.960947+05:30", "timestamp": 1755777906.960947}}}
{"text": "2025-08-21 17:35:06.961 | ERROR    | app.ws.live:broadcast:253 - Failed to broadcast to client: Object of type PnLTotals is not JSON serializable\n", "record": {"elapsed": {"repr": "0:00:32.188850", "seconds": 32.18885}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "broadcast", "level": {"icon": "‚ùå", "name": "ERROR", "no": 40}, "line": 253, "message": "Failed to broadcast to client: Object of type PnLTotals is not JSON serializable", "module": "live", "name": "app.ws.live", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:35:06.961804+05:30", "timestamp": 1755777906.961804}}}
{"text": "2025-08-21 17:35:06.962 | ERROR    | app.ws.live:broadcast:253 - Failed to broadcast to client: Object of type PnLTotals is not JSON serializable\n", "record": {"elapsed": {"repr": "0:00:32.189559", "seconds": 32.189559}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "broadcast", "level": {"icon": "‚ùå", "name": "ERROR", "no": 40}, "line": 253, "message": "Failed to broadcast to client: Object of type PnLTotals is not JSON serializable", "module": "live", "name": "app.ws.live", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:35:06.962513+05:30", "timestamp": 1755777906.962513}}}
{"text": "2025-08-21 17:35:06.963 | ERROR    | app.ws.live:broadcast:253 - Failed to broadcast to client: Object of type PnLTotals is not JSON serializable\n", "record": {"elapsed": {"repr": "0:00:32.190188", "seconds": 32.190188}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "broadcast", "level": {"icon": "‚ùå", "name": "ERROR", "no": 40}, "line": 253, "message": "Failed to broadcast to client: Object of type PnLTotals is not JSON serializable", "module": "live", "name": "app.ws.live", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:35:06.963142+05:30", "timestamp": 1755777906.963142}}}
{"text": "2025-08-21 17:35:06.963 | INFO     | app.ws.live:disconnect:234 - WebSocket disconnected: 127.0.0.1\n", "record": {"elapsed": {"repr": "0:00:32.190829", "seconds": 32.190829}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "disconnect", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 234, "message": "WebSocket disconnected: 127.0.0.1", "module": "live", "name": "app.ws.live", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:35:06.963783+05:30", "timestamp": 1755777906.963783}}}
{"text": "2025-08-21 17:35:06.964 | INFO     | app.ws.live:disconnect:234 - WebSocket disconnected: 127.0.0.1\n", "record": {"elapsed": {"repr": "0:00:32.191434", "seconds": 32.191434}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "disconnect", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 234, "message": "WebSocket disconnected: 127.0.0.1", "module": "live", "name": "app.ws.live", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:35:06.964388+05:30", "timestamp": 1755777906.964388}}}
{"text": "2025-08-21 17:35:06.967 | INFO     | app.ws.live:disconnect:234 - WebSocket disconnected: 127.0.0.1\n", "record": {"elapsed": {"repr": "0:00:32.194264", "seconds": 32.194264}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "disconnect", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 234, "message": "WebSocket disconnected: 127.0.0.1", "module": "live", "name": "app.ws.live", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:35:06.967218+05:30", "timestamp": 1755777906.967218}}}
{"text": "2025-08-21 17:35:06.968 | INFO     | app.ws.live:disconnect:234 - WebSocket disconnected: 127.0.0.1\n", "record": {"elapsed": {"repr": "0:00:32.195302", "seconds": 32.195302}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "disconnect", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 234, "message": "WebSocket disconnected: 127.0.0.1", "module": "live", "name": "app.ws.live", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:35:06.968256+05:30", "timestamp": 1755777906.968256}}}
{"text": "2025-08-21 17:35:06.969 | INFO     | app.ws.live:disconnect:234 - WebSocket disconnected: 127.0.0.1\n", "record": {"elapsed": {"repr": "0:00:32.196367", "seconds": 32.196367}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "disconnect", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 234, "message": "WebSocket disconnected: 127.0.0.1", "module": "live", "name": "app.ws.live", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:35:06.969321+05:30", "timestamp": 1755777906.969321}}}
{"text": "2025-08-21 17:35:06.969 | INFO     | app.ws.live:disconnect:234 - WebSocket disconnected: 127.0.0.1\n", "record": {"elapsed": {"repr": "0:00:32.196984", "seconds": 32.196984}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "disconnect", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 234, "message": "WebSocket disconnected: 127.0.0.1", "module": "live", "name": "app.ws.live", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:35:06.969938+05:30", "timestamp": 1755777906.969938}}}
{"text": "2025-08-21 17:35:06.970 | INFO     | app.ws.live:disconnect:234 - WebSocket disconnected: 127.0.0.1\n", "record": {"elapsed": {"repr": "0:00:32.197562", "seconds": 32.197562}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "disconnect", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 234, "message": "WebSocket disconnected: 127.0.0.1", "module": "live", "name": "app.ws.live", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:35:06.970516+05:30", "timestamp": 1755777906.970516}}}
{"text": "2025-08-21 17:35:06.971 | INFO     | app.ws.live:disconnect:234 - WebSocket disconnected: 127.0.0.1\n", "record": {"elapsed": {"repr": "0:00:32.198239", "seconds": 32.198239}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "disconnect", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 234, "message": "WebSocket disconnected: 127.0.0.1", "module": "live", "name": "app.ws.live", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:35:06.971193+05:30", "timestamp": 1755777906.971193}}}
{"text": "2025-08-21 17:35:06.971 | INFO     | app.ws.live:disconnect:234 - WebSocket disconnected: 127.0.0.1\n", "record": {"elapsed": {"repr": "0:00:32.198897", "seconds": 32.198897}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "disconnect", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 234, "message": "WebSocket disconnected: 127.0.0.1", "module": "live", "name": "app.ws.live", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:35:06.971851+05:30", "timestamp": 1755777906.971851}}}
{"text": "2025-08-21 17:35:06.972 | INFO     | app.ws.live:disconnect:234 - WebSocket disconnected: 127.0.0.1\n", "record": {"elapsed": {"repr": "0:00:32.199552", "seconds": 32.199552}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "disconnect", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 234, "message": "WebSocket disconnected: 127.0.0.1", "module": "live", "name": "app.ws.live", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:35:06.972506+05:30", "timestamp": 1755777906.972506}}}
{"text": "2025-08-21 17:35:06.973 | INFO     | app.ws.live:disconnect:234 - WebSocket disconnected: 127.0.0.1\n", "record": {"elapsed": {"repr": "0:00:32.200749", "seconds": 32.200749}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "disconnect", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 234, "message": "WebSocket disconnected: 127.0.0.1", "module": "live", "name": "app.ws.live", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:35:06.973703+05:30", "timestamp": 1755777906.973703}}}
{"text": "2025-08-21 17:35:06.978 | INFO     | app.ws.live:disconnect:234 - WebSocket disconnected: 127.0.0.1\n", "record": {"elapsed": {"repr": "0:00:32.205278", "seconds": 32.205278}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "disconnect", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 234, "message": "WebSocket disconnected: 127.0.0.1", "module": "live", "name": "app.ws.live", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:35:06.978232+05:30", "timestamp": 1755777906.978232}}}
{"text": "2025-08-21 17:35:06.980 | INFO     | app.ws.live:disconnect:234 - WebSocket disconnected: 127.0.0.1\n", "record": {"elapsed": {"repr": "0:00:32.207660", "seconds": 32.20766}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "disconnect", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 234, "message": "WebSocket disconnected: 127.0.0.1", "module": "live", "name": "app.ws.live", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:35:06.980614+05:30", "timestamp": 1755777906.980614}}}
{"text": "2025-08-21 17:35:06.982 | INFO     | app.ws.live:disconnect:234 - WebSocket disconnected: 127.0.0.1\n", "record": {"elapsed": {"repr": "0:00:32.209332", "seconds": 32.209332}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "disconnect", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 234, "message": "WebSocket disconnected: 127.0.0.1", "module": "live", "name": "app.ws.live", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:35:06.982286+05:30", "timestamp": 1755777906.982286}}}
{"text": "2025-08-21 17:35:06.984 | INFO     | app.ws.live:disconnect:234 - WebSocket disconnected: 127.0.0.1\n", "record": {"elapsed": {"repr": "0:00:32.211369", "seconds": 32.211369}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "disconnect", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 234, "message": "WebSocket disconnected: 127.0.0.1", "module": "live", "name": "app.ws.live", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:35:06.984323+05:30", "timestamp": 1755777906.984323}}}
{"text": "2025-08-21 17:35:06.985 | INFO     | app.ws.live:disconnect:234 - WebSocket disconnected: 127.0.0.1\n", "record": {"elapsed": {"repr": "0:00:32.212650", "seconds": 32.21265}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "disconnect", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 234, "message": "WebSocket disconnected: 127.0.0.1", "module": "live", "name": "app.ws.live", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:35:06.985604+05:30", "timestamp": 1755777906.985604}}}
{"text": "2025-08-21 17:35:06.986 | INFO     | app.ws.live:disconnect:234 - WebSocket disconnected: 127.0.0.1\n", "record": {"elapsed": {"repr": "0:00:32.213627", "seconds": 32.213627}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "disconnect", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 234, "message": "WebSocket disconnected: 127.0.0.1", "module": "live", "name": "app.ws.live", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:35:06.986581+05:30", "timestamp": 1755777906.986581}}}
{"text": "2025-08-21 17:35:06.987 | INFO     | app.ws.live:disconnect:234 - WebSocket disconnected: 127.0.0.1\n", "record": {"elapsed": {"repr": "0:00:32.214791", "seconds": 32.214791}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "disconnect", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 234, "message": "WebSocket disconnected: 127.0.0.1", "module": "live", "name": "app.ws.live", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:35:06.987745+05:30", "timestamp": 1755777906.987745}}}
{"text": "2025-08-21 17:35:06.991 | INFO     | app.ws.live:disconnect:234 - WebSocket disconnected: 127.0.0.1\n", "record": {"elapsed": {"repr": "0:00:32.218661", "seconds": 32.218661}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "disconnect", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 234, "message": "WebSocket disconnected: 127.0.0.1", "module": "live", "name": "app.ws.live", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:35:06.991615+05:30", "timestamp": 1755777906.991615}}}
{"text": "2025-08-21 17:35:06.993 | INFO     | app.ws.live:disconnect:234 - WebSocket disconnected: 127.0.0.1\n", "record": {"elapsed": {"repr": "0:00:32.220059", "seconds": 32.220059}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "disconnect", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 234, "message": "WebSocket disconnected: 127.0.0.1", "module": "live", "name": "app.ws.live", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:35:06.993013+05:30", "timestamp": 1755777906.993013}}}
{"text": "2025-08-21 17:35:06.994 | INFO     | app.ws.live:disconnect:234 - WebSocket disconnected: 127.0.0.1\n", "record": {"elapsed": {"repr": "0:00:32.221780", "seconds": 32.22178}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "disconnect", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 234, "message": "WebSocket disconnected: 127.0.0.1", "module": "live", "name": "app.ws.live", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:35:06.994734+05:30", "timestamp": 1755777906.994734}}}
{"text": "2025-08-21 17:35:06.996 | INFO     | app.ws.live:disconnect:234 - WebSocket disconnected: 127.0.0.1\n", "record": {"elapsed": {"repr": "0:00:32.223173", "seconds": 32.223173}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "disconnect", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 234, "message": "WebSocket disconnected: 127.0.0.1", "module": "live", "name": "app.ws.live", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:35:06.996127+05:30", "timestamp": 1755777906.996127}}}
{"text": "2025-08-21 17:35:06.997 | DEBUG    | app.ws.live:emit_delta:408 - Emitted pnl delta: seq=37\n", "record": {"elapsed": {"repr": "0:00:32.224213", "seconds": 32.224213}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "emit_delta", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 408, "message": "Emitted pnl delta: seq=37", "module": "live", "name": "app.ws.live", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:35:06.997167+05:30", "timestamp": 1755777906.997167}}}
{"text": "2025-08-21 17:35:07.006 | INFO     | app.ws.live:connect:226 - WebSocket connected: 127.0.0.1\n", "record": {"elapsed": {"repr": "0:00:32.233502", "seconds": 32.233502}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "connect", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 226, "message": "WebSocket connected: 127.0.0.1", "module": "live", "name": "app.ws.live", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:35:07.006456+05:30", "timestamp": 1755777907.006456}}}
{"text": "2025-08-21 17:35:07.023 | INFO     | app.ws.live:connect:226 - WebSocket connected: 127.0.0.1\n", "record": {"elapsed": {"repr": "0:00:32.250257", "seconds": 32.250257}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "connect", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 226, "message": "WebSocket connected: 127.0.0.1", "module": "live", "name": "app.ws.live", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:35:07.023211+05:30", "timestamp": 1755777907.023211}}}
{"text": "2025-08-21 17:35:07.026 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:32.253280", "seconds": 32.25328}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 22636, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 17:35:07.026234+05:30", "timestamp": 1755777907.026234}}}
{"text": "2025-08-21 17:35:07.028 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:32.255282", "seconds": 32.255282}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 22636, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 17:35:07.028236+05:30", "timestamp": 1755777907.028236}}}
{"text": "2025-08-21 17:35:07.029 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:32.256243", "seconds": 32.256243}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 22636, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 17:35:07.029197+05:30", "timestamp": 1755777907.029197}}}
{"text": "2025-08-21 17:35:07.030 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:32.257721", "seconds": 32.257721}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 22636, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 17:35:07.030675+05:30", "timestamp": 1755777907.030675}}}
{"text": "2025-08-21 17:35:07.032 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:32.259905", "seconds": 32.259905}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 22636, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 17:35:07.032859+05:30", "timestamp": 1755777907.032859}}}
{"text": "2025-08-21 17:35:07.041 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:32.268110", "seconds": 32.26811}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 22636, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 17:35:07.041064+05:30", "timestamp": 1755777907.041064}}}
{"text": "2025-08-21 17:35:07.042 | INFO     | app.ws.live:connect:226 - WebSocket connected: 127.0.0.1\n", "record": {"elapsed": {"repr": "0:00:32.269303", "seconds": 32.269303}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "connect", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 226, "message": "WebSocket connected: 127.0.0.1", "module": "live", "name": "app.ws.live", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:35:07.042257+05:30", "timestamp": 1755777907.042257}}}
{"text": "2025-08-21 17:35:07.042 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:32.269576", "seconds": 32.269576}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 22636, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 17:35:07.042530+05:30", "timestamp": 1755777907.04253}}}
{"text": "2025-08-21 17:35:07.044 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:32.271767", "seconds": 32.271767}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 22636, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 17:35:07.044721+05:30", "timestamp": 1755777907.044721}}}
{"text": "2025-08-21 17:35:07.045 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:32.272633", "seconds": 32.272633}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 22636, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 17:35:07.045587+05:30", "timestamp": 1755777907.045587}}}
{"text": "2025-08-21 17:35:07.046 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:32.273581", "seconds": 32.273581}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 22636, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 17:35:07.046535+05:30", "timestamp": 1755777907.046535}}}
{"text": "2025-08-21 17:35:07.195 | INFO     | app.ws.live:connect:226 - WebSocket connected: 127.0.0.1\n", "record": {"elapsed": {"repr": "0:00:32.422316", "seconds": 32.422316}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "connect", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 226, "message": "WebSocket connected: 127.0.0.1", "module": "live", "name": "app.ws.live", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:35:07.195270+05:30", "timestamp": 1755777907.19527}}}
{"text": "2025-08-21 17:35:07.215 | INFO     | app.ws.live:connect:226 - WebSocket connected: 127.0.0.1\n", "record": {"elapsed": {"repr": "0:00:32.442967", "seconds": 32.442967}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "connect", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 226, "message": "WebSocket connected: 127.0.0.1", "module": "live", "name": "app.ws.live", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:35:07.215921+05:30", "timestamp": 1755777907.215921}}}
{"text": "2025-08-21 17:35:07.240 | INFO     | app.ws.live:connect:226 - WebSocket connected: 127.0.0.1\n", "record": {"elapsed": {"repr": "0:00:32.467054", "seconds": 32.467054}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "connect", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 226, "message": "WebSocket connected: 127.0.0.1", "module": "live", "name": "app.ws.live", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:35:07.240008+05:30", "timestamp": 1755777907.240008}}}
{"text": "2025-08-21 17:35:07.301 | INFO     | app.ws.live:connect:226 - WebSocket connected: 127.0.0.1\n", "record": {"elapsed": {"repr": "0:00:32.528140", "seconds": 32.52814}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "connect", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 226, "message": "WebSocket connected: 127.0.0.1", "module": "live", "name": "app.ws.live", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:35:07.301094+05:30", "timestamp": 1755777907.301094}}}
{"text": "2025-08-21 17:35:07.380 | INFO     | app.ws.live:connect:226 - WebSocket connected: 127.0.0.1\n", "record": {"elapsed": {"repr": "0:00:32.607896", "seconds": 32.607896}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "connect", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 226, "message": "WebSocket connected: 127.0.0.1", "module": "live", "name": "app.ws.live", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:35:07.380850+05:30", "timestamp": 1755777907.38085}}}
{"text": "2025-08-21 17:35:07.438 | INFO     | app.ws.live:connect:226 - WebSocket connected: 127.0.0.1\n", "record": {"elapsed": {"repr": "0:00:32.665549", "seconds": 32.665549}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "connect", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 226, "message": "WebSocket connected: 127.0.0.1", "module": "live", "name": "app.ws.live", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:35:07.438503+05:30", "timestamp": 1755777907.438503}}}
{"text": "2025-08-21 17:35:07.463 | INFO     | app.ws.live:connect:226 - WebSocket connected: 127.0.0.1\n", "record": {"elapsed": {"repr": "0:00:32.690710", "seconds": 32.69071}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "connect", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 226, "message": "WebSocket connected: 127.0.0.1", "module": "live", "name": "app.ws.live", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:35:07.463664+05:30", "timestamp": 1755777907.463664}}}
{"text": "2025-08-21 17:35:07.599 | INFO     | app.ws.live:connect:226 - WebSocket connected: 127.0.0.1\n", "record": {"elapsed": {"repr": "0:00:32.826914", "seconds": 32.826914}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "connect", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 226, "message": "WebSocket connected: 127.0.0.1", "module": "live", "name": "app.ws.live", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:35:07.599868+05:30", "timestamp": 1755777907.599868}}}
{"text": "2025-08-21 17:35:07.616 | INFO     | app.ws.live:connect:226 - WebSocket connected: 127.0.0.1\n", "record": {"elapsed": {"repr": "0:00:32.843383", "seconds": 32.843383}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "connect", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 226, "message": "WebSocket connected: 127.0.0.1", "module": "live", "name": "app.ws.live", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:35:07.616337+05:30", "timestamp": 1755777907.616337}}}
{"text": "2025-08-21 17:35:07.641 | INFO     | app.ws.live:connect:226 - WebSocket connected: 127.0.0.1\n", "record": {"elapsed": {"repr": "0:00:32.868741", "seconds": 32.868741}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "connect", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 226, "message": "WebSocket connected: 127.0.0.1", "module": "live", "name": "app.ws.live", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:35:07.641695+05:30", "timestamp": 1755777907.641695}}}
{"text": "2025-08-21 17:35:07.670 | DEBUG    | app.ws.live:websocket_endpoint:517 - Received WebSocket message: {'type': 'subscribe', 'channels': ['positions', 'orders', 'holdings', 'trades', 'pnl']}\n", "record": {"elapsed": {"repr": "0:00:32.897789", "seconds": 32.897789}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "websocket_endpoint", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 517, "message": "Received WebSocket message: {'type': 'subscribe', 'channels': ['positions', 'orders', 'holdings', 'trades', 'pnl']}", "module": "live", "name": "app.ws.live", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:35:07.670743+05:30", "timestamp": 1755777907.670743}}}
{"text": "2025-08-21 17:35:07.672 | INFO     | app.ws.live:handle_message:281 - Client 127.0.0.1 subscribed to: ['positions', 'orders', 'holdings', 'trades', 'pnl']\n", "record": {"elapsed": {"repr": "0:00:32.899176", "seconds": 32.899176}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "handle_message", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 281, "message": "Client 127.0.0.1 subscribed to: ['positions', 'orders', 'holdings', 'trades', 'pnl']", "module": "live", "name": "app.ws.live", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:35:07.672130+05:30", "timestamp": 1755777907.67213}}}
{"text": "2025-08-21 17:35:07.681 | INFO     | app.ws.live:connect:226 - WebSocket connected: 127.0.0.1\n", "record": {"elapsed": {"repr": "0:00:32.909015", "seconds": 32.909015}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "connect", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 226, "message": "WebSocket connected: 127.0.0.1", "module": "live", "name": "app.ws.live", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:35:07.681969+05:30", "timestamp": 1755777907.681969}}}
{"text": "2025-08-21 17:35:07.718 | INFO     | app.ws.live:connect:226 - WebSocket connected: 127.0.0.1\n", "record": {"elapsed": {"repr": "0:00:32.945961", "seconds": 32.945961}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "connect", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 226, "message": "WebSocket connected: 127.0.0.1", "module": "live", "name": "app.ws.live", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:35:07.718915+05:30", "timestamp": 1755777907.718915}}}
{"text": "2025-08-21 17:35:07.763 | INFO     | app.ws.live:connect:226 - WebSocket connected: 127.0.0.1\n", "record": {"elapsed": {"repr": "0:00:32.990533", "seconds": 32.990533}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "connect", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 226, "message": "WebSocket connected: 127.0.0.1", "module": "live", "name": "app.ws.live", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:35:07.763487+05:30", "timestamp": 1755777907.763487}}}
{"text": "2025-08-21 17:35:07.790 | INFO     | app.ws.live:connect:226 - WebSocket connected: 127.0.0.1\n", "record": {"elapsed": {"repr": "0:00:33.017121", "seconds": 33.017121}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "connect", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 226, "message": "WebSocket connected: 127.0.0.1", "module": "live", "name": "app.ws.live", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:35:07.790075+05:30", "timestamp": 1755777907.790075}}}
{"text": "2025-08-21 17:35:07.812 | INFO     | app.ws.live:connect:226 - WebSocket connected: 127.0.0.1\n", "record": {"elapsed": {"repr": "0:00:33.039501", "seconds": 33.039501}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "connect", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 226, "message": "WebSocket connected: 127.0.0.1", "module": "live", "name": "app.ws.live", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:35:07.812455+05:30", "timestamp": 1755777907.812455}}}
{"text": "2025-08-21 17:35:07.829 | INFO     | app.ws.live:connect:226 - WebSocket connected: 127.0.0.1\n", "record": {"elapsed": {"repr": "0:00:33.056957", "seconds": 33.056957}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "connect", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 226, "message": "WebSocket connected: 127.0.0.1", "module": "live", "name": "app.ws.live", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:35:07.829911+05:30", "timestamp": 1755777907.829911}}}
{"text": "2025-08-21 17:35:07.834 | DEBUG    | app.ws.live:websocket_endpoint:517 - Received WebSocket message: {'type': 'subscribe', 'channels': ['positions', 'orders', 'holdings', 'trades', 'pnl']}\n", "record": {"elapsed": {"repr": "0:00:33.061232", "seconds": 33.061232}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "websocket_endpoint", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 517, "message": "Received WebSocket message: {'type': 'subscribe', 'channels': ['positions', 'orders', 'holdings', 'trades', 'pnl']}", "module": "live", "name": "app.ws.live", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:35:07.834186+05:30", "timestamp": 1755777907.834186}}}
{"text": "2025-08-21 17:35:07.835 | INFO     | app.ws.live:handle_message:281 - Client 127.0.0.1 subscribed to: ['positions', 'orders', 'holdings', 'trades', 'pnl']\n", "record": {"elapsed": {"repr": "0:00:33.062143", "seconds": 33.062143}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "handle_message", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 281, "message": "Client 127.0.0.1 subscribed to: ['positions', 'orders', 'holdings', 'trades', 'pnl']", "module": "live", "name": "app.ws.live", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:35:07.835097+05:30", "timestamp": 1755777907.835097}}}
{"text": "2025-08-21 17:35:07.851 | INFO     | app.ws.live:connect:226 - WebSocket connected: 127.0.0.1\n", "record": {"elapsed": {"repr": "0:00:33.079017", "seconds": 33.079017}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "connect", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 226, "message": "WebSocket connected: 127.0.0.1", "module": "live", "name": "app.ws.live", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:35:07.851971+05:30", "timestamp": 1755777907.851971}}}
{"text": "2025-08-21 17:35:07.974 | INFO     | app.ws.live:connect:226 - WebSocket connected: 127.0.0.1\n", "record": {"elapsed": {"repr": "0:00:33.201464", "seconds": 33.201464}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "connect", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 226, "message": "WebSocket connected: 127.0.0.1", "module": "live", "name": "app.ws.live", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:35:07.974418+05:30", "timestamp": 1755777907.974418}}}
{"text": "2025-08-21 17:35:08.004 | INFO     | app.ws.live:connect:226 - WebSocket connected: 127.0.0.1\n", "record": {"elapsed": {"repr": "0:00:33.231086", "seconds": 33.231086}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "connect", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 226, "message": "WebSocket connected: 127.0.0.1", "module": "live", "name": "app.ws.live", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:35:08.004040+05:30", "timestamp": 1755777908.00404}}}
{"text": "2025-08-21 17:35:08.138 | INFO     | app.ws.live:connect:226 - WebSocket connected: 127.0.0.1\n", "record": {"elapsed": {"repr": "0:00:33.365344", "seconds": 33.365344}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "connect", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 226, "message": "WebSocket connected: 127.0.0.1", "module": "live", "name": "app.ws.live", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:35:08.138298+05:30", "timestamp": 1755777908.138298}}}
{"text": "2025-08-21 17:35:08.157 | INFO     | app.ws.live:connect:226 - WebSocket connected: 127.0.0.1\n", "record": {"elapsed": {"repr": "0:00:33.385000", "seconds": 33.385}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "connect", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 226, "message": "WebSocket connected: 127.0.0.1", "module": "live", "name": "app.ws.live", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:35:08.157954+05:30", "timestamp": 1755777908.157954}}}
{"text": "2025-08-21 17:35:08.179 | INFO     | app.ws.live:connect:226 - WebSocket connected: 127.0.0.1\n", "record": {"elapsed": {"repr": "0:00:33.406152", "seconds": 33.406152}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "connect", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 226, "message": "WebSocket connected: 127.0.0.1", "module": "live", "name": "app.ws.live", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:35:08.179106+05:30", "timestamp": 1755777908.179106}}}
{"text": "2025-08-21 17:35:08.180 | DEBUG    | app.ws.live:websocket_endpoint:517 - Received WebSocket message: {'type': 'subscribe', 'channels': ['positions', 'orders', 'holdings', 'trades', 'pnl']}\n", "record": {"elapsed": {"repr": "0:00:33.408030", "seconds": 33.40803}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "websocket_endpoint", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 517, "message": "Received WebSocket message: {'type': 'subscribe', 'channels': ['positions', 'orders', 'holdings', 'trades', 'pnl']}", "module": "live", "name": "app.ws.live", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:35:08.180984+05:30", "timestamp": 1755777908.180984}}}
{"text": "2025-08-21 17:35:08.182 | INFO     | app.ws.live:handle_message:281 - Client 127.0.0.1 subscribed to: ['positions', 'orders', 'holdings', 'trades', 'pnl']\n", "record": {"elapsed": {"repr": "0:00:33.409133", "seconds": 33.409133}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "handle_message", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 281, "message": "Client 127.0.0.1 subscribed to: ['positions', 'orders', 'holdings', 'trades', 'pnl']", "module": "live", "name": "app.ws.live", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:35:08.182087+05:30", "timestamp": 1755777908.182087}}}
{"text": "2025-08-21 17:35:08.827 | INFO     | app.services.dhan_client:get_pnl:489 - Starting accurate P&L calculation\n", "record": {"elapsed": {"repr": "0:00:34.054296", "seconds": 34.054296}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 489, "message": "Starting accurate P&L calculation", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:35:08.827250+05:30", "timestamp": 1755777908.82725}}}
{"text": "2025-08-21 17:35:08.829 | INFO     | app.services.dhan_client:get_pnl:491 - Fetched 5 positions\n", "record": {"elapsed": {"repr": "0:00:34.056321", "seconds": 34.056321}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 491, "message": "Fetched 5 positions", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:35:08.829275+05:30", "timestamp": 1755777908.829275}}}
{"text": "2025-08-21 17:35:08.831 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for RELIANCE: unrealized=-1258884.28, today=-1258884.28\n", "record": {"elapsed": {"repr": "0:00:34.058509", "seconds": 34.058509}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for RELIANCE: unrealized=-1258884.28, today=-1258884.28", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:35:08.831463+05:30", "timestamp": 1755777908.831463}}}
{"text": "2025-08-21 17:35:08.833 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for TCS: unrealized=471297.06, today=471297.06\n", "record": {"elapsed": {"repr": "0:00:34.060272", "seconds": 34.060272}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for TCS: unrealized=471297.06, today=471297.06", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:35:08.833226+05:30", "timestamp": 1755777908.833226}}}
{"text": "2025-08-21 17:35:08.834 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for HDFC: unrealized=-131213.67, today=-131213.67\n", "record": {"elapsed": {"repr": "0:00:34.062032", "seconds": 34.062032}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for HDFC: unrealized=-131213.67, today=-131213.67", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:35:08.834986+05:30", "timestamp": 1755777908.834986}}}
{"text": "2025-08-21 17:35:08.836 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for INFY: unrealized=-2806363.75, today=-2806363.75\n", "record": {"elapsed": {"repr": "0:00:34.063684", "seconds": 34.063684}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for INFY: unrealized=-2806363.75, today=-2806363.75", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:35:08.836638+05:30", "timestamp": 1755777908.836638}}}
{"text": "2025-08-21 17:35:08.838 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for ICICIBANK: unrealized=-385140.18, today=-385140.18\n", "record": {"elapsed": {"repr": "0:00:34.065162", "seconds": 34.065162}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for ICICIBANK: unrealized=-385140.18, today=-385140.18", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:35:08.838116+05:30", "timestamp": 1755777908.838116}}}
{"text": "2025-08-21 17:35:08.839 | INFO     | app.services.dhan_client:get_pnl:545 - Calculated totals - realized: 0.0, unrealized: -4110304.82, day: -4110304.82\n", "record": {"elapsed": {"repr": "0:00:34.066218", "seconds": 34.066218}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 545, "message": "Calculated totals - realized: 0.0, unrealized: -4110304.82, day: -4110304.82", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:35:08.839172+05:30", "timestamp": 1755777908.839172}}}
{"text": "2025-08-21 17:35:08.840 | DEBUG    | app.services.dhan_client:get_pnl:554 - PnL consistency check passed: drift=‚Çπ0.00\n", "record": {"elapsed": {"repr": "0:00:34.067635", "seconds": 34.067635}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 554, "message": "PnL consistency check passed: drift=‚Çπ0.00", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:35:08.840589+05:30", "timestamp": 1755777908.840589}}}
{"text": "2025-08-21 17:35:08.841 | DEBUG    | app.services.dhan_client:get_pnl:558 - Creating PnLTotals...\n", "record": {"elapsed": {"repr": "0:00:34.068815", "seconds": 34.068815}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 558, "message": "Creating PnLTotals...", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:35:08.841769+05:30", "timestamp": 1755777908.841769}}}
{"text": "2025-08-21 17:35:08.843 | DEBUG    | app.services.dhan_client:get_pnl:565 - PnLTotals created successfully\n", "record": {"elapsed": {"repr": "0:00:34.070061", "seconds": 34.070061}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 565, "message": "PnLTotals created successfully", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:35:08.843015+05:30", "timestamp": 1755777908.843015}}}
{"text": "2025-08-21 17:35:08.844 | DEBUG    | app.services.dhan_client:get_pnl:574 - Creating PnL model...\n", "record": {"elapsed": {"repr": "0:00:34.071151", "seconds": 34.071151}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 574, "message": "Creating PnL model...", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:35:08.844105+05:30", "timestamp": 1755777908.844105}}}
{"text": "2025-08-21 17:35:08.845 | DEBUG    | app.services.dhan_client:get_pnl:575 - Model fields: totals=<class 'app.models.schemas.PnLTotals'>, perSymbol=5, updated_at=2025-08-21 17:35:08.831219+05:30, trading_day=2025-08-21\n", "record": {"elapsed": {"repr": "0:00:34.072085", "seconds": 34.072085}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 575, "message": "Model fields: totals=<class 'app.models.schemas.PnLTotals'>, perSymbol=5, updated_at=2025-08-21 17:35:08.831219+05:30, trading_day=2025-08-21", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:35:08.845039+05:30", "timestamp": 1755777908.845039}}}
{"text": "2025-08-21 17:35:08.846 | DEBUG    | app.services.dhan_client:get_pnl:584 - Created PnL model: totals=PnLTotals(realized=0.0, unrealized=-4110304.82, day=-4110304.82, currency='INR') per_symbol=[PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=913, avg=1944.27, ltp=565.43, unrealized=-1258884.28, today_pnl=-1258884.28), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=457, avg=1390.48, ltp=359.2, unrealized=471297.06, today_pnl=471297.06), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=196, avg=1021.99, ltp=352.53, unrealized=-131213.67, today_pnl=-131213.67), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=1708, avg=426.15, ltp=2069.22, unrealized=-2806363.75, today_pnl=-2806363.75), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=931, avg=756.68, ltp=343.0, unrealized=-385140.18, today_pnl=-385140.18)] updated_at=datetime.datetime(2025, 8, 21, 17, 35, 8, 831219, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))) trading_day='2025-08-21'\n", "record": {"elapsed": {"repr": "0:00:34.073728", "seconds": 34.073728}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 584, "message": "Created PnL model: totals=PnLTotals(realized=0.0, unrealized=-4110304.82, day=-4110304.82, currency='INR') per_symbol=[PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=913, avg=1944.27, ltp=565.43, unrealized=-1258884.28, today_pnl=-1258884.28), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=457, avg=1390.48, ltp=359.2, unrealized=471297.06, today_pnl=471297.06), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=196, avg=1021.99, ltp=352.53, unrealized=-131213.67, today_pnl=-131213.67), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=1708, avg=426.15, ltp=2069.22, unrealized=-2806363.75, today_pnl=-2806363.75), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=931, avg=756.68, ltp=343.0, unrealized=-385140.18, today_pnl=-385140.18)] updated_at=datetime.datetime(2025, 8, 21, 17, 35, 8, 831219, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))) trading_day='2025-08-21'", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:35:08.846682+05:30", "timestamp": 1755777908.846682}}}
{"text": "2025-08-21 17:35:08.848 | DEBUG    | app.services.dhan_client:get_pnl:585 - PnL model fields: {'totals': PnLTotals(realized=0.0, unrealized=-4110304.82, day=-4110304.82, currency='INR'), 'per_symbol': [PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=913, avg=1944.27, ltp=565.43, unrealized=-1258884.28, today_pnl=-1258884.28), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=457, avg=1390.48, ltp=359.2, unrealized=471297.06, today_pnl=471297.06), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=196, avg=1021.99, ltp=352.53, unrealized=-131213.67, today_pnl=-131213.67), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=1708, avg=426.15, ltp=2069.22, unrealized=-2806363.75, today_pnl=-2806363.75), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=931, avg=756.68, ltp=343.0, unrealized=-385140.18, today_pnl=-385140.18)], 'updated_at': datetime.datetime(2025, 8, 21, 17, 35, 8, 831219, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))), 'trading_day': '2025-08-21'}\n", "record": {"elapsed": {"repr": "0:00:34.075756", "seconds": 34.075756}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 585, "message": "PnL model fields: {'totals': PnLTotals(realized=0.0, unrealized=-4110304.82, day=-4110304.82, currency='INR'), 'per_symbol': [PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=913, avg=1944.27, ltp=565.43, unrealized=-1258884.28, today_pnl=-1258884.28), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=457, avg=1390.48, ltp=359.2, unrealized=471297.06, today_pnl=471297.06), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=196, avg=1021.99, ltp=352.53, unrealized=-131213.67, today_pnl=-131213.67), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=1708, avg=426.15, ltp=2069.22, unrealized=-2806363.75, today_pnl=-2806363.75), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=931, avg=756.68, ltp=343.0, unrealized=-385140.18, today_pnl=-385140.18)], 'updated_at': datetime.datetime(2025, 8, 21, 17, 35, 8, 831219, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))), 'trading_day': '2025-08-21'}", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:35:08.848710+05:30", "timestamp": 1755777908.84871}}}
{"text": "2025-08-21 17:35:08.850 | INFO     | app.services.dhan_client:get_pnl:587 - P&L calculation completed successfully: 5 symbols, unrealized=‚Çπ-4110304.82\n", "record": {"elapsed": {"repr": "0:00:34.077096", "seconds": 34.077096}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 587, "message": "P&L calculation completed successfully: 5 symbols, unrealized=‚Çπ-4110304.82", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:35:08.850050+05:30", "timestamp": 1755777908.85005}}}
{"text": "2025-08-21 17:35:08.852 | ERROR    | app.ws.live:broadcast:253 - Failed to broadcast to client: Object of type PnLTotals is not JSON serializable\n", "record": {"elapsed": {"repr": "0:00:34.079147", "seconds": 34.079147}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "broadcast", "level": {"icon": "‚ùå", "name": "ERROR", "no": 40}, "line": 253, "message": "Failed to broadcast to client: Object of type PnLTotals is not JSON serializable", "module": "live", "name": "app.ws.live", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:35:08.852101+05:30", "timestamp": 1755777908.852101}}}
{"text": "2025-08-21 17:35:08.853 | ERROR    | app.ws.live:broadcast:253 - Failed to broadcast to client: Object of type PnLTotals is not JSON serializable\n", "record": {"elapsed": {"repr": "0:00:34.080292", "seconds": 34.080292}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "broadcast", "level": {"icon": "‚ùå", "name": "ERROR", "no": 40}, "line": 253, "message": "Failed to broadcast to client: Object of type PnLTotals is not JSON serializable", "module": "live", "name": "app.ws.live", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:35:08.853246+05:30", "timestamp": 1755777908.853246}}}
{"text": "2025-08-21 17:35:08.854 | ERROR    | app.ws.live:broadcast:253 - Failed to broadcast to client: Object of type PnLTotals is not JSON serializable\n", "record": {"elapsed": {"repr": "0:00:34.081417", "seconds": 34.081417}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "broadcast", "level": {"icon": "‚ùå", "name": "ERROR", "no": 40}, "line": 253, "message": "Failed to broadcast to client: Object of type PnLTotals is not JSON serializable", "module": "live", "name": "app.ws.live", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:35:08.854371+05:30", "timestamp": 1755777908.854371}}}
{"text": "2025-08-21 17:35:08.855 | ERROR    | app.ws.live:broadcast:253 - Failed to broadcast to client: Object of type PnLTotals is not JSON serializable\n", "record": {"elapsed": {"repr": "0:00:34.082556", "seconds": 34.082556}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "broadcast", "level": {"icon": "‚ùå", "name": "ERROR", "no": 40}, "line": 253, "message": "Failed to broadcast to client: Object of type PnLTotals is not JSON serializable", "module": "live", "name": "app.ws.live", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:35:08.855510+05:30", "timestamp": 1755777908.85551}}}
{"text": "2025-08-21 17:35:08.856 | ERROR    | app.ws.live:broadcast:253 - Failed to broadcast to client: Object of type PnLTotals is not JSON serializable\n", "record": {"elapsed": {"repr": "0:00:34.083751", "seconds": 34.083751}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "broadcast", "level": {"icon": "‚ùå", "name": "ERROR", "no": 40}, "line": 253, "message": "Failed to broadcast to client: Object of type PnLTotals is not JSON serializable", "module": "live", "name": "app.ws.live", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:35:08.856705+05:30", "timestamp": 1755777908.856705}}}
{"text": "2025-08-21 17:35:08.858 | ERROR    | app.ws.live:broadcast:253 - Failed to broadcast to client: Object of type PnLTotals is not JSON serializable\n", "record": {"elapsed": {"repr": "0:00:34.085053", "seconds": 34.085053}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "broadcast", "level": {"icon": "‚ùå", "name": "ERROR", "no": 40}, "line": 253, "message": "Failed to broadcast to client: Object of type PnLTotals is not JSON serializable", "module": "live", "name": "app.ws.live", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:35:08.858007+05:30", "timestamp": 1755777908.858007}}}
{"text": "2025-08-21 17:35:08.859 | ERROR    | app.ws.live:broadcast:253 - Failed to broadcast to client: Object of type PnLTotals is not JSON serializable\n", "record": {"elapsed": {"repr": "0:00:34.086610", "seconds": 34.08661}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "broadcast", "level": {"icon": "‚ùå", "name": "ERROR", "no": 40}, "line": 253, "message": "Failed to broadcast to client: Object of type PnLTotals is not JSON serializable", "module": "live", "name": "app.ws.live", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:35:08.859564+05:30", "timestamp": 1755777908.859564}}}
{"text": "2025-08-21 17:35:08.860 | ERROR    | app.ws.live:broadcast:253 - Failed to broadcast to client: Object of type PnLTotals is not JSON serializable\n", "record": {"elapsed": {"repr": "0:00:34.087521", "seconds": 34.087521}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "broadcast", "level": {"icon": "‚ùå", "name": "ERROR", "no": 40}, "line": 253, "message": "Failed to broadcast to client: Object of type PnLTotals is not JSON serializable", "module": "live", "name": "app.ws.live", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:35:08.860475+05:30", "timestamp": 1755777908.860475}}}
{"text": "2025-08-21 17:35:08.861 | ERROR    | app.ws.live:broadcast:253 - Failed to broadcast to client: Object of type PnLTotals is not JSON serializable\n", "record": {"elapsed": {"repr": "0:00:34.088556", "seconds": 34.088556}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "broadcast", "level": {"icon": "‚ùå", "name": "ERROR", "no": 40}, "line": 253, "message": "Failed to broadcast to client: Object of type PnLTotals is not JSON serializable", "module": "live", "name": "app.ws.live", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:35:08.861510+05:30", "timestamp": 1755777908.86151}}}
{"text": "2025-08-21 17:35:08.862 | ERROR    | app.ws.live:broadcast:253 - Failed to broadcast to client: Object of type PnLTotals is not JSON serializable\n", "record": {"elapsed": {"repr": "0:00:34.089605", "seconds": 34.089605}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "broadcast", "level": {"icon": "‚ùå", "name": "ERROR", "no": 40}, "line": 253, "message": "Failed to broadcast to client: Object of type PnLTotals is not JSON serializable", "module": "live", "name": "app.ws.live", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:35:08.862559+05:30", "timestamp": 1755777908.862559}}}
{"text": "2025-08-21 17:35:08.864 | ERROR    | app.ws.live:broadcast:253 - Failed to broadcast to client: Object of type PnLTotals is not JSON serializable\n", "record": {"elapsed": {"repr": "0:00:34.091441", "seconds": 34.091441}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "broadcast", "level": {"icon": "‚ùå", "name": "ERROR", "no": 40}, "line": 253, "message": "Failed to broadcast to client: Object of type PnLTotals is not JSON serializable", "module": "live", "name": "app.ws.live", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:35:08.864395+05:30", "timestamp": 1755777908.864395}}}
{"text": "2025-08-21 17:35:08.865 | ERROR    | app.ws.live:broadcast:253 - Failed to broadcast to client: Object of type PnLTotals is not JSON serializable\n", "record": {"elapsed": {"repr": "0:00:34.092481", "seconds": 34.092481}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "broadcast", "level": {"icon": "‚ùå", "name": "ERROR", "no": 40}, "line": 253, "message": "Failed to broadcast to client: Object of type PnLTotals is not JSON serializable", "module": "live", "name": "app.ws.live", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:35:08.865435+05:30", "timestamp": 1755777908.865435}}}
{"text": "2025-08-21 17:35:08.866 | ERROR    | app.ws.live:broadcast:253 - Failed to broadcast to client: Object of type PnLTotals is not JSON serializable\n", "record": {"elapsed": {"repr": "0:00:34.093231", "seconds": 34.093231}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "broadcast", "level": {"icon": "‚ùå", "name": "ERROR", "no": 40}, "line": 253, "message": "Failed to broadcast to client: Object of type PnLTotals is not JSON serializable", "module": "live", "name": "app.ws.live", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:35:08.866185+05:30", "timestamp": 1755777908.866185}}}
{"text": "2025-08-21 17:35:08.866 | ERROR    | app.ws.live:broadcast:253 - Failed to broadcast to client: Object of type PnLTotals is not JSON serializable\n", "record": {"elapsed": {"repr": "0:00:34.093975", "seconds": 34.093975}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "broadcast", "level": {"icon": "‚ùå", "name": "ERROR", "no": 40}, "line": 253, "message": "Failed to broadcast to client: Object of type PnLTotals is not JSON serializable", "module": "live", "name": "app.ws.live", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:35:08.866929+05:30", "timestamp": 1755777908.866929}}}
{"text": "2025-08-21 17:35:08.867 | ERROR    | app.ws.live:broadcast:253 - Failed to broadcast to client: Object of type PnLTotals is not JSON serializable\n", "record": {"elapsed": {"repr": "0:00:34.094744", "seconds": 34.094744}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "broadcast", "level": {"icon": "‚ùå", "name": "ERROR", "no": 40}, "line": 253, "message": "Failed to broadcast to client: Object of type PnLTotals is not JSON serializable", "module": "live", "name": "app.ws.live", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:35:08.867698+05:30", "timestamp": 1755777908.867698}}}
{"text": "2025-08-21 17:35:08.868 | ERROR    | app.ws.live:broadcast:253 - Failed to broadcast to client: Object of type PnLTotals is not JSON serializable\n", "record": {"elapsed": {"repr": "0:00:34.095523", "seconds": 34.095523}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "broadcast", "level": {"icon": "‚ùå", "name": "ERROR", "no": 40}, "line": 253, "message": "Failed to broadcast to client: Object of type PnLTotals is not JSON serializable", "module": "live", "name": "app.ws.live", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:35:08.868477+05:30", "timestamp": 1755777908.868477}}}
{"text": "2025-08-21 17:35:08.869 | ERROR    | app.ws.live:broadcast:253 - Failed to broadcast to client: Object of type PnLTotals is not JSON serializable\n", "record": {"elapsed": {"repr": "0:00:34.096612", "seconds": 34.096612}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "broadcast", "level": {"icon": "‚ùå", "name": "ERROR", "no": 40}, "line": 253, "message": "Failed to broadcast to client: Object of type PnLTotals is not JSON serializable", "module": "live", "name": "app.ws.live", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:35:08.869566+05:30", "timestamp": 1755777908.869566}}}
{"text": "2025-08-21 17:35:08.870 | ERROR    | app.ws.live:broadcast:253 - Failed to broadcast to client: Object of type PnLTotals is not JSON serializable\n", "record": {"elapsed": {"repr": "0:00:34.097338", "seconds": 34.097338}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "broadcast", "level": {"icon": "‚ùå", "name": "ERROR", "no": 40}, "line": 253, "message": "Failed to broadcast to client: Object of type PnLTotals is not JSON serializable", "module": "live", "name": "app.ws.live", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:35:08.870292+05:30", "timestamp": 1755777908.870292}}}
{"text": "2025-08-21 17:35:08.871 | ERROR    | app.ws.live:broadcast:253 - Failed to broadcast to client: Object of type PnLTotals is not JSON serializable\n", "record": {"elapsed": {"repr": "0:00:34.098401", "seconds": 34.098401}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "broadcast", "level": {"icon": "‚ùå", "name": "ERROR", "no": 40}, "line": 253, "message": "Failed to broadcast to client: Object of type PnLTotals is not JSON serializable", "module": "live", "name": "app.ws.live", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:35:08.871355+05:30", "timestamp": 1755777908.871355}}}
{"text": "2025-08-21 17:35:08.872 | ERROR    | app.ws.live:broadcast:253 - Failed to broadcast to client: Object of type PnLTotals is not JSON serializable\n", "record": {"elapsed": {"repr": "0:00:34.099612", "seconds": 34.099612}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "broadcast", "level": {"icon": "‚ùå", "name": "ERROR", "no": 40}, "line": 253, "message": "Failed to broadcast to client: Object of type PnLTotals is not JSON serializable", "module": "live", "name": "app.ws.live", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:35:08.872566+05:30", "timestamp": 1755777908.872566}}}
{"text": "2025-08-21 17:35:08.873 | ERROR    | app.ws.live:broadcast:253 - Failed to broadcast to client: Object of type PnLTotals is not JSON serializable\n", "record": {"elapsed": {"repr": "0:00:34.100597", "seconds": 34.100597}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "broadcast", "level": {"icon": "‚ùå", "name": "ERROR", "no": 40}, "line": 253, "message": "Failed to broadcast to client: Object of type PnLTotals is not JSON serializable", "module": "live", "name": "app.ws.live", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:35:08.873551+05:30", "timestamp": 1755777908.873551}}}
{"text": "2025-08-21 17:35:08.874 | ERROR    | app.ws.live:broadcast:253 - Failed to broadcast to client: Object of type PnLTotals is not JSON serializable\n", "record": {"elapsed": {"repr": "0:00:34.101739", "seconds": 34.101739}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "broadcast", "level": {"icon": "‚ùå", "name": "ERROR", "no": 40}, "line": 253, "message": "Failed to broadcast to client: Object of type PnLTotals is not JSON serializable", "module": "live", "name": "app.ws.live", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:35:08.874693+05:30", "timestamp": 1755777908.874693}}}
{"text": "2025-08-21 17:35:08.875 | ERROR    | app.ws.live:broadcast:253 - Failed to broadcast to client: Object of type PnLTotals is not JSON serializable\n", "record": {"elapsed": {"repr": "0:00:34.102585", "seconds": 34.102585}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "broadcast", "level": {"icon": "‚ùå", "name": "ERROR", "no": 40}, "line": 253, "message": "Failed to broadcast to client: Object of type PnLTotals is not JSON serializable", "module": "live", "name": "app.ws.live", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:35:08.875539+05:30", "timestamp": 1755777908.875539}}}
{"text": "2025-08-21 17:35:08.876 | ERROR    | app.ws.live:broadcast:253 - Failed to broadcast to client: Object of type PnLTotals is not JSON serializable\n", "record": {"elapsed": {"repr": "0:00:34.103348", "seconds": 34.103348}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "broadcast", "level": {"icon": "‚ùå", "name": "ERROR", "no": 40}, "line": 253, "message": "Failed to broadcast to client: Object of type PnLTotals is not JSON serializable", "module": "live", "name": "app.ws.live", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:35:08.876302+05:30", "timestamp": 1755777908.876302}}}
{"text": "2025-08-21 17:35:08.877 | ERROR    | app.ws.live:broadcast:253 - Failed to broadcast to client: Object of type PnLTotals is not JSON serializable\n", "record": {"elapsed": {"repr": "0:00:34.104087", "seconds": 34.104087}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "broadcast", "level": {"icon": "‚ùå", "name": "ERROR", "no": 40}, "line": 253, "message": "Failed to broadcast to client: Object of type PnLTotals is not JSON serializable", "module": "live", "name": "app.ws.live", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:35:08.877041+05:30", "timestamp": 1755777908.877041}}}
{"text": "2025-08-21 17:35:08.877 | INFO     | app.ws.live:disconnect:234 - WebSocket disconnected: 127.0.0.1\n", "record": {"elapsed": {"repr": "0:00:34.104870", "seconds": 34.10487}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "disconnect", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 234, "message": "WebSocket disconnected: 127.0.0.1", "module": "live", "name": "app.ws.live", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:35:08.877824+05:30", "timestamp": 1755777908.877824}}}
{"text": "2025-08-21 17:35:08.878 | INFO     | app.ws.live:disconnect:234 - WebSocket disconnected: 127.0.0.1\n", "record": {"elapsed": {"repr": "0:00:34.105825", "seconds": 34.105825}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "disconnect", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 234, "message": "WebSocket disconnected: 127.0.0.1", "module": "live", "name": "app.ws.live", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:35:08.878779+05:30", "timestamp": 1755777908.878779}}}
{"text": "2025-08-21 17:35:08.879 | INFO     | app.ws.live:disconnect:234 - WebSocket disconnected: 127.0.0.1\n", "record": {"elapsed": {"repr": "0:00:34.106562", "seconds": 34.106562}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "disconnect", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 234, "message": "WebSocket disconnected: 127.0.0.1", "module": "live", "name": "app.ws.live", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:35:08.879516+05:30", "timestamp": 1755777908.879516}}}
{"text": "2025-08-21 17:35:08.880 | INFO     | app.ws.live:disconnect:234 - WebSocket disconnected: 127.0.0.1\n", "record": {"elapsed": {"repr": "0:00:34.107445", "seconds": 34.107445}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "disconnect", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 234, "message": "WebSocket disconnected: 127.0.0.1", "module": "live", "name": "app.ws.live", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:35:08.880399+05:30", "timestamp": 1755777908.880399}}}
{"text": "2025-08-21 17:35:08.881 | INFO     | app.ws.live:disconnect:234 - WebSocket disconnected: 127.0.0.1\n", "record": {"elapsed": {"repr": "0:00:34.108473", "seconds": 34.108473}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "disconnect", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 234, "message": "WebSocket disconnected: 127.0.0.1", "module": "live", "name": "app.ws.live", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:35:08.881427+05:30", "timestamp": 1755777908.881427}}}
{"text": "2025-08-21 17:35:08.882 | INFO     | app.ws.live:disconnect:234 - WebSocket disconnected: 127.0.0.1\n", "record": {"elapsed": {"repr": "0:00:34.109356", "seconds": 34.109356}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "disconnect", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 234, "message": "WebSocket disconnected: 127.0.0.1", "module": "live", "name": "app.ws.live", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:35:08.882310+05:30", "timestamp": 1755777908.88231}}}
{"text": "2025-08-21 17:35:08.883 | INFO     | app.ws.live:disconnect:234 - WebSocket disconnected: 127.0.0.1\n", "record": {"elapsed": {"repr": "0:00:34.110182", "seconds": 34.110182}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "disconnect", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 234, "message": "WebSocket disconnected: 127.0.0.1", "module": "live", "name": "app.ws.live", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:35:08.883136+05:30", "timestamp": 1755777908.883136}}}
{"text": "2025-08-21 17:35:08.884 | INFO     | app.ws.live:disconnect:234 - WebSocket disconnected: 127.0.0.1\n", "record": {"elapsed": {"repr": "0:00:34.111253", "seconds": 34.111253}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "disconnect", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 234, "message": "WebSocket disconnected: 127.0.0.1", "module": "live", "name": "app.ws.live", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:35:08.884207+05:30", "timestamp": 1755777908.884207}}}
{"text": "2025-08-21 17:35:08.885 | INFO     | app.ws.live:disconnect:234 - WebSocket disconnected: 127.0.0.1\n", "record": {"elapsed": {"repr": "0:00:34.112104", "seconds": 34.112104}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "disconnect", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 234, "message": "WebSocket disconnected: 127.0.0.1", "module": "live", "name": "app.ws.live", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:35:08.885058+05:30", "timestamp": 1755777908.885058}}}
{"text": "2025-08-21 17:35:08.885 | INFO     | app.ws.live:disconnect:234 - WebSocket disconnected: 127.0.0.1\n", "record": {"elapsed": {"repr": "0:00:34.112918", "seconds": 34.112918}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "disconnect", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 234, "message": "WebSocket disconnected: 127.0.0.1", "module": "live", "name": "app.ws.live", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:35:08.885872+05:30", "timestamp": 1755777908.885872}}}
{"text": "2025-08-21 17:35:08.886 | INFO     | app.ws.live:disconnect:234 - WebSocket disconnected: 127.0.0.1\n", "record": {"elapsed": {"repr": "0:00:34.113762", "seconds": 34.113762}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "disconnect", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 234, "message": "WebSocket disconnected: 127.0.0.1", "module": "live", "name": "app.ws.live", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:35:08.886716+05:30", "timestamp": 1755777908.886716}}}
{"text": "2025-08-21 17:35:08.887 | INFO     | app.ws.live:disconnect:234 - WebSocket disconnected: 127.0.0.1\n", "record": {"elapsed": {"repr": "0:00:34.114444", "seconds": 34.114444}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "disconnect", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 234, "message": "WebSocket disconnected: 127.0.0.1", "module": "live", "name": "app.ws.live", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:35:08.887398+05:30", "timestamp": 1755777908.887398}}}
{"text": "2025-08-21 17:35:08.888 | INFO     | app.ws.live:disconnect:234 - WebSocket disconnected: 127.0.0.1\n", "record": {"elapsed": {"repr": "0:00:34.115127", "seconds": 34.115127}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "disconnect", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 234, "message": "WebSocket disconnected: 127.0.0.1", "module": "live", "name": "app.ws.live", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:35:08.888081+05:30", "timestamp": 1755777908.888081}}}
{"text": "2025-08-21 17:35:08.889 | INFO     | app.ws.live:disconnect:234 - WebSocket disconnected: 127.0.0.1\n", "record": {"elapsed": {"repr": "0:00:34.116312", "seconds": 34.116312}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "disconnect", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 234, "message": "WebSocket disconnected: 127.0.0.1", "module": "live", "name": "app.ws.live", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:35:08.889266+05:30", "timestamp": 1755777908.889266}}}
{"text": "2025-08-21 17:35:08.889 | INFO     | app.ws.live:disconnect:234 - WebSocket disconnected: 127.0.0.1\n", "record": {"elapsed": {"repr": "0:00:34.117043", "seconds": 34.117043}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "disconnect", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 234, "message": "WebSocket disconnected: 127.0.0.1", "module": "live", "name": "app.ws.live", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:35:08.889997+05:30", "timestamp": 1755777908.889997}}}
{"text": "2025-08-21 17:35:08.890 | INFO     | app.ws.live:disconnect:234 - WebSocket disconnected: 127.0.0.1\n", "record": {"elapsed": {"repr": "0:00:34.117886", "seconds": 34.117886}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "disconnect", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 234, "message": "WebSocket disconnected: 127.0.0.1", "module": "live", "name": "app.ws.live", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:35:08.890840+05:30", "timestamp": 1755777908.89084}}}
{"text": "2025-08-21 17:35:08.891 | INFO     | app.ws.live:disconnect:234 - WebSocket disconnected: 127.0.0.1\n", "record": {"elapsed": {"repr": "0:00:34.118717", "seconds": 34.118717}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "disconnect", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 234, "message": "WebSocket disconnected: 127.0.0.1", "module": "live", "name": "app.ws.live", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:35:08.891671+05:30", "timestamp": 1755777908.891671}}}
{"text": "2025-08-21 17:35:08.892 | INFO     | app.ws.live:disconnect:234 - WebSocket disconnected: 127.0.0.1\n", "record": {"elapsed": {"repr": "0:00:34.119441", "seconds": 34.119441}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "disconnect", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 234, "message": "WebSocket disconnected: 127.0.0.1", "module": "live", "name": "app.ws.live", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:35:08.892395+05:30", "timestamp": 1755777908.892395}}}
{"text": "2025-08-21 17:35:08.893 | INFO     | app.ws.live:disconnect:234 - WebSocket disconnected: 127.0.0.1\n", "record": {"elapsed": {"repr": "0:00:34.120111", "seconds": 34.120111}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "disconnect", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 234, "message": "WebSocket disconnected: 127.0.0.1", "module": "live", "name": "app.ws.live", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:35:08.893065+05:30", "timestamp": 1755777908.893065}}}
{"text": "2025-08-21 17:35:08.893 | INFO     | app.ws.live:disconnect:234 - WebSocket disconnected: 127.0.0.1\n", "record": {"elapsed": {"repr": "0:00:34.120856", "seconds": 34.120856}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "disconnect", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 234, "message": "WebSocket disconnected: 127.0.0.1", "module": "live", "name": "app.ws.live", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:35:08.893810+05:30", "timestamp": 1755777908.89381}}}
{"text": "2025-08-21 17:35:08.894 | INFO     | app.ws.live:disconnect:234 - WebSocket disconnected: 127.0.0.1\n", "record": {"elapsed": {"repr": "0:00:34.121421", "seconds": 34.121421}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "disconnect", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 234, "message": "WebSocket disconnected: 127.0.0.1", "module": "live", "name": "app.ws.live", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:35:08.894375+05:30", "timestamp": 1755777908.894375}}}
{"text": "2025-08-21 17:35:08.894 | INFO     | app.ws.live:disconnect:234 - WebSocket disconnected: 127.0.0.1\n", "record": {"elapsed": {"repr": "0:00:34.121971", "seconds": 34.121971}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "disconnect", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 234, "message": "WebSocket disconnected: 127.0.0.1", "module": "live", "name": "app.ws.live", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:35:08.894925+05:30", "timestamp": 1755777908.894925}}}
{"text": "2025-08-21 17:35:08.895 | INFO     | app.ws.live:disconnect:234 - WebSocket disconnected: 127.0.0.1\n", "record": {"elapsed": {"repr": "0:00:34.122574", "seconds": 34.122574}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "disconnect", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 234, "message": "WebSocket disconnected: 127.0.0.1", "module": "live", "name": "app.ws.live", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:35:08.895528+05:30", "timestamp": 1755777908.895528}}}
{"text": "2025-08-21 17:35:08.896 | INFO     | app.ws.live:disconnect:234 - WebSocket disconnected: 127.0.0.1\n", "record": {"elapsed": {"repr": "0:00:34.123166", "seconds": 34.123166}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "disconnect", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 234, "message": "WebSocket disconnected: 127.0.0.1", "module": "live", "name": "app.ws.live", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:35:08.896120+05:30", "timestamp": 1755777908.89612}}}
{"text": "2025-08-21 17:35:08.896 | INFO     | app.ws.live:disconnect:234 - WebSocket disconnected: 127.0.0.1\n", "record": {"elapsed": {"repr": "0:00:34.123724", "seconds": 34.123724}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "disconnect", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 234, "message": "WebSocket disconnected: 127.0.0.1", "module": "live", "name": "app.ws.live", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:35:08.896678+05:30", "timestamp": 1755777908.896678}}}
{"text": "2025-08-21 17:35:08.897 | DEBUG    | app.ws.live:emit_delta:408 - Emitted pnl delta: seq=38\n", "record": {"elapsed": {"repr": "0:00:34.124976", "seconds": 34.124976}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "emit_delta", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 408, "message": "Emitted pnl delta: seq=38", "module": "live", "name": "app.ws.live", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:35:08.897930+05:30", "timestamp": 1755777908.89793}}}
{"text": "2025-08-21 17:35:08.899 | DEBUG    | app.ws.live:emit_delta:408 - Emitted positions delta: seq=39\n", "record": {"elapsed": {"repr": "0:00:34.126225", "seconds": 34.126225}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "emit_delta", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 408, "message": "Emitted positions delta: seq=39", "module": "live", "name": "app.ws.live", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:35:08.899179+05:30", "timestamp": 1755777908.899179}}}
{"text": "2025-08-21 17:35:09.048 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:34.275181", "seconds": 34.275181}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 22636, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 17:35:09.048135+05:30", "timestamp": 1755777909.048135}}}
{"text": "2025-08-21 17:35:09.049 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:34.276054", "seconds": 34.276054}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 22636, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 17:35:09.049008+05:30", "timestamp": 1755777909.049008}}}
{"text": "2025-08-21 17:35:09.049 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:34.276762", "seconds": 34.276762}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 22636, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 17:35:09.049716+05:30", "timestamp": 1755777909.049716}}}
{"text": "2025-08-21 17:35:09.050 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:34.277610", "seconds": 34.27761}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 22636, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 17:35:09.050564+05:30", "timestamp": 1755777909.050564}}}
{"text": "2025-08-21 17:35:09.051 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:34.278319", "seconds": 34.278319}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 22636, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 17:35:09.051273+05:30", "timestamp": 1755777909.051273}}}
{"text": "2025-08-21 17:35:09.051 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:34.278984", "seconds": 34.278984}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 22636, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 17:35:09.051938+05:30", "timestamp": 1755777909.051938}}}
{"text": "2025-08-21 17:35:09.052 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:34.279600", "seconds": 34.2796}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 22636, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 17:35:09.052554+05:30", "timestamp": 1755777909.052554}}}
{"text": "2025-08-21 17:35:09.053 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:34.280207", "seconds": 34.280207}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 22636, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 17:35:09.053161+05:30", "timestamp": 1755777909.053161}}}
{"text": "2025-08-21 17:35:09.054 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:34.281071", "seconds": 34.281071}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 22636, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 17:35:09.054025+05:30", "timestamp": 1755777909.054025}}}
{"text": "2025-08-21 17:35:09.054 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:34.281770", "seconds": 34.28177}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 22636, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 17:35:09.054724+05:30", "timestamp": 1755777909.054724}}}
{"text": "2025-08-21 17:35:10.680 | INFO     | app.services.dhan_client:get_pnl:489 - Starting accurate P&L calculation\n", "record": {"elapsed": {"repr": "0:00:35.907343", "seconds": 35.907343}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 489, "message": "Starting accurate P&L calculation", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:35:10.680297+05:30", "timestamp": 1755777910.680297}}}
{"text": "2025-08-21 17:35:10.681 | INFO     | app.services.dhan_client:get_pnl:491 - Fetched 5 positions\n", "record": {"elapsed": {"repr": "0:00:35.908553", "seconds": 35.908553}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 491, "message": "Fetched 5 positions", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:35:10.681507+05:30", "timestamp": 1755777910.681507}}}
{"text": "2025-08-21 17:35:10.682 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for RELIANCE: unrealized=-1254181.17, today=-1254181.17\n", "record": {"elapsed": {"repr": "0:00:35.909651", "seconds": 35.909651}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for RELIANCE: unrealized=-1254181.17, today=-1254181.17", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:35:10.682605+05:30", "timestamp": 1755777910.682605}}}
{"text": "2025-08-21 17:35:10.683 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for TCS: unrealized=472114.56, today=472114.56\n", "record": {"elapsed": {"repr": "0:00:35.910565", "seconds": 35.910565}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for TCS: unrealized=472114.56, today=472114.56", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:35:10.683519+05:30", "timestamp": 1755777910.683519}}}
{"text": "2025-08-21 17:35:10.684 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for HDFC: unrealized=-131959.51, today=-131959.51\n", "record": {"elapsed": {"repr": "0:00:35.911989", "seconds": 35.911989}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for HDFC: unrealized=-131959.51, today=-131959.51", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:35:10.684943+05:30", "timestamp": 1755777910.684943}}}
{"text": "2025-08-21 17:35:10.686 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for INFY: unrealized=-2830117.81, today=-2830117.81\n", "record": {"elapsed": {"repr": "0:00:35.913126", "seconds": 35.913126}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for INFY: unrealized=-2830117.81, today=-2830117.81", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:35:10.686080+05:30", "timestamp": 1755777910.68608}}}
{"text": "2025-08-21 17:35:10.687 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for ICICIBANK: unrealized=-391215.93, today=-391215.93\n", "record": {"elapsed": {"repr": "0:00:35.914204", "seconds": 35.914204}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for ICICIBANK: unrealized=-391215.93, today=-391215.93", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:35:10.687158+05:30", "timestamp": 1755777910.687158}}}
{"text": "2025-08-21 17:35:10.688 | INFO     | app.services.dhan_client:get_pnl:545 - Calculated totals - realized: 0.0, unrealized: -4135359.86, day: -4135359.86\n", "record": {"elapsed": {"repr": "0:00:35.915694", "seconds": 35.915694}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 545, "message": "Calculated totals - realized: 0.0, unrealized: -4135359.86, day: -4135359.86", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:35:10.688648+05:30", "timestamp": 1755777910.688648}}}
{"text": "2025-08-21 17:35:10.689 | DEBUG    | app.services.dhan_client:get_pnl:554 - PnL consistency check passed: drift=‚Çπ0.00\n", "record": {"elapsed": {"repr": "0:00:35.916767", "seconds": 35.916767}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 554, "message": "PnL consistency check passed: drift=‚Çπ0.00", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:35:10.689721+05:30", "timestamp": 1755777910.689721}}}
{"text": "2025-08-21 17:35:10.690 | DEBUG    | app.services.dhan_client:get_pnl:558 - Creating PnLTotals...\n", "record": {"elapsed": {"repr": "0:00:35.917715", "seconds": 35.917715}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 558, "message": "Creating PnLTotals...", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:35:10.690669+05:30", "timestamp": 1755777910.690669}}}
{"text": "2025-08-21 17:35:10.691 | DEBUG    | app.services.dhan_client:get_pnl:565 - PnLTotals created successfully\n", "record": {"elapsed": {"repr": "0:00:35.918847", "seconds": 35.918847}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 565, "message": "PnLTotals created successfully", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:35:10.691801+05:30", "timestamp": 1755777910.691801}}}
{"text": "2025-08-21 17:35:10.693 | DEBUG    | app.services.dhan_client:get_pnl:574 - Creating PnL model...\n", "record": {"elapsed": {"repr": "0:00:35.920094", "seconds": 35.920094}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 574, "message": "Creating PnL model...", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:35:10.693048+05:30", "timestamp": 1755777910.693048}}}
{"text": "2025-08-21 17:35:10.694 | DEBUG    | app.services.dhan_client:get_pnl:575 - Model fields: totals=<class 'app.models.schemas.PnLTotals'>, perSymbol=5, updated_at=2025-08-21 17:35:10.682471+05:30, trading_day=2025-08-21\n", "record": {"elapsed": {"repr": "0:00:35.921086", "seconds": 35.921086}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 575, "message": "Model fields: totals=<class 'app.models.schemas.PnLTotals'>, perSymbol=5, updated_at=2025-08-21 17:35:10.682471+05:30, trading_day=2025-08-21", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:35:10.694040+05:30", "timestamp": 1755777910.69404}}}
{"text": "2025-08-21 17:35:10.695 | DEBUG    | app.services.dhan_client:get_pnl:584 - Created PnL model: totals=PnLTotals(realized=0.0, unrealized=-4135359.86, day=-4135359.86, currency='INR') per_symbol=[PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=913, avg=1944.27, ltp=570.58, unrealized=-1254181.17, today_pnl=-1254181.17), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=457, avg=1390.48, ltp=357.41, unrealized=472114.56, today_pnl=472114.56), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=196, avg=1021.99, ltp=348.73, unrealized=-131959.51, today_pnl=-131959.51), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=1708, avg=426.15, ltp=2083.13, unrealized=-2830117.81, today_pnl=-2830117.81), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=931, avg=756.68, ltp=336.47, unrealized=-391215.93, today_pnl=-391215.93)] updated_at=datetime.datetime(2025, 8, 21, 17, 35, 10, 682471, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))) trading_day='2025-08-21'\n", "record": {"elapsed": {"repr": "0:00:35.922563", "seconds": 35.922563}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 584, "message": "Created PnL model: totals=PnLTotals(realized=0.0, unrealized=-4135359.86, day=-4135359.86, currency='INR') per_symbol=[PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=913, avg=1944.27, ltp=570.58, unrealized=-1254181.17, today_pnl=-1254181.17), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=457, avg=1390.48, ltp=357.41, unrealized=472114.56, today_pnl=472114.56), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=196, avg=1021.99, ltp=348.73, unrealized=-131959.51, today_pnl=-131959.51), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=1708, avg=426.15, ltp=2083.13, unrealized=-2830117.81, today_pnl=-2830117.81), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=931, avg=756.68, ltp=336.47, unrealized=-391215.93, today_pnl=-391215.93)] updated_at=datetime.datetime(2025, 8, 21, 17, 35, 10, 682471, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))) trading_day='2025-08-21'", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:35:10.695517+05:30", "timestamp": 1755777910.695517}}}
{"text": "2025-08-21 17:35:10.697 | DEBUG    | app.services.dhan_client:get_pnl:585 - PnL model fields: {'totals': PnLTotals(realized=0.0, unrealized=-4135359.86, day=-4135359.86, currency='INR'), 'per_symbol': [PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=913, avg=1944.27, ltp=570.58, unrealized=-1254181.17, today_pnl=-1254181.17), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=457, avg=1390.48, ltp=357.41, unrealized=472114.56, today_pnl=472114.56), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=196, avg=1021.99, ltp=348.73, unrealized=-131959.51, today_pnl=-131959.51), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=1708, avg=426.15, ltp=2083.13, unrealized=-2830117.81, today_pnl=-2830117.81), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=931, avg=756.68, ltp=336.47, unrealized=-391215.93, today_pnl=-391215.93)], 'updated_at': datetime.datetime(2025, 8, 21, 17, 35, 10, 682471, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))), 'trading_day': '2025-08-21'}\n", "record": {"elapsed": {"repr": "0:00:35.924651", "seconds": 35.924651}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 585, "message": "PnL model fields: {'totals': PnLTotals(realized=0.0, unrealized=-4135359.86, day=-4135359.86, currency='INR'), 'per_symbol': [PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=913, avg=1944.27, ltp=570.58, unrealized=-1254181.17, today_pnl=-1254181.17), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=457, avg=1390.48, ltp=357.41, unrealized=472114.56, today_pnl=472114.56), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=196, avg=1021.99, ltp=348.73, unrealized=-131959.51, today_pnl=-131959.51), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=1708, avg=426.15, ltp=2083.13, unrealized=-2830117.81, today_pnl=-2830117.81), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=931, avg=756.68, ltp=336.47, unrealized=-391215.93, today_pnl=-391215.93)], 'updated_at': datetime.datetime(2025, 8, 21, 17, 35, 10, 682471, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))), 'trading_day': '2025-08-21'}", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:35:10.697605+05:30", "timestamp": 1755777910.697605}}}
{"text": "2025-08-21 17:35:10.699 | INFO     | app.services.dhan_client:get_pnl:587 - P&L calculation completed successfully: 5 symbols, unrealized=‚Çπ-4135359.86\n", "record": {"elapsed": {"repr": "0:00:35.926105", "seconds": 35.926105}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 587, "message": "P&L calculation completed successfully: 5 symbols, unrealized=‚Çπ-4135359.86", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:35:10.699059+05:30", "timestamp": 1755777910.699059}}}
{"text": "2025-08-21 17:35:10.700 | DEBUG    | app.ws.live:emit_delta:408 - Emitted pnl delta: seq=40\n", "record": {"elapsed": {"repr": "0:00:35.927537", "seconds": 35.927537}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "emit_delta", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 408, "message": "Emitted pnl delta: seq=40", "module": "live", "name": "app.ws.live", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:35:10.700491+05:30", "timestamp": 1755777910.700491}}}
{"text": "2025-08-21 17:35:10.702 | DEBUG    | app.ws.live:emit_delta:408 - Emitted positions delta: seq=41\n", "record": {"elapsed": {"repr": "0:00:35.929290", "seconds": 35.92929}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "emit_delta", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 408, "message": "Emitted positions delta: seq=41", "module": "live", "name": "app.ws.live", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:35:10.702244+05:30", "timestamp": 1755777910.702244}}}
{"text": "2025-08-21 17:35:11.056 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:36.283232", "seconds": 36.283232}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 22636, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 17:35:11.056186+05:30", "timestamp": 1755777911.056186}}}
{"text": "2025-08-21 17:35:11.057 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:36.284337", "seconds": 36.284337}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 22636, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 17:35:11.057291+05:30", "timestamp": 1755777911.057291}}}
{"text": "2025-08-21 17:35:11.058 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:36.285170", "seconds": 36.28517}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 22636, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 17:35:11.058124+05:30", "timestamp": 1755777911.058124}}}
{"text": "2025-08-21 17:35:11.059 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:36.286055", "seconds": 36.286055}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 22636, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 17:35:11.059009+05:30", "timestamp": 1755777911.059009}}}
{"text": "2025-08-21 17:35:11.059 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:36.286923", "seconds": 36.286923}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 22636, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 17:35:11.059877+05:30", "timestamp": 1755777911.059877}}}
{"text": "2025-08-21 17:35:11.060 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:36.287877", "seconds": 36.287877}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 22636, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 17:35:11.060831+05:30", "timestamp": 1755777911.060831}}}
{"text": "2025-08-21 17:35:11.061 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:36.288643", "seconds": 36.288643}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 22636, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 17:35:11.061597+05:30", "timestamp": 1755777911.061597}}}
{"text": "2025-08-21 17:35:11.062 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:36.289741", "seconds": 36.289741}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 22636, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 17:35:11.062695+05:30", "timestamp": 1755777911.062695}}}
{"text": "2025-08-21 17:35:11.063 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:36.290686", "seconds": 36.290686}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 22636, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 17:35:11.063640+05:30", "timestamp": 1755777911.06364}}}
{"text": "2025-08-21 17:35:11.064 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:36.291619", "seconds": 36.291619}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 22636, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 17:35:11.064573+05:30", "timestamp": 1755777911.064573}}}
{"text": "2025-08-21 17:35:12.380 | INFO     | app.services.dhan_client:get_pnl:489 - Starting accurate P&L calculation\n", "record": {"elapsed": {"repr": "0:00:37.607483", "seconds": 37.607483}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 489, "message": "Starting accurate P&L calculation", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:35:12.380437+05:30", "timestamp": 1755777912.380437}}}
{"text": "2025-08-21 17:35:12.382 | INFO     | app.services.dhan_client:get_pnl:491 - Fetched 5 positions\n", "record": {"elapsed": {"repr": "0:00:37.610000", "seconds": 37.61}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 491, "message": "Fetched 5 positions", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:35:12.382954+05:30", "timestamp": 1755777912.382954}}}
{"text": "2025-08-21 17:35:12.385 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for RELIANCE: unrealized=-1262015.79, today=-1262015.79\n", "record": {"elapsed": {"repr": "0:00:37.612746", "seconds": 37.612746}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for RELIANCE: unrealized=-1262015.79, today=-1262015.79", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:35:12.385700+05:30", "timestamp": 1755777912.3857}}}
{"text": "2025-08-21 17:35:12.390 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for TCS: unrealized=470302.25, today=470302.25\n", "record": {"elapsed": {"repr": "0:00:37.617876", "seconds": 37.617876}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for TCS: unrealized=470302.25, today=470302.25", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:35:12.390830+05:30", "timestamp": 1755777912.39083}}}
{"text": "2025-08-21 17:35:12.393 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for HDFC: unrealized=-131192.08, today=-131192.08\n", "record": {"elapsed": {"repr": "0:00:37.620828", "seconds": 37.620828}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for HDFC: unrealized=-131192.08, today=-131192.08", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:35:12.393782+05:30", "timestamp": 1755777912.393782}}}
{"text": "2025-08-21 17:35:12.400 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for INFY: unrealized=-2813972.45, today=-2813972.45\n", "record": {"elapsed": {"repr": "0:00:37.627649", "seconds": 37.627649}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for INFY: unrealized=-2813972.45, today=-2813972.45", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:35:12.400603+05:30", "timestamp": 1755777912.400603}}}
{"text": "2025-08-21 17:35:12.403 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for ICICIBANK: unrealized=-390600.22, today=-390600.22\n", "record": {"elapsed": {"repr": "0:00:37.630283", "seconds": 37.630283}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for ICICIBANK: unrealized=-390600.22, today=-390600.22", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:35:12.403237+05:30", "timestamp": 1755777912.403237}}}
{"text": "2025-08-21 17:35:12.409 | INFO     | app.services.dhan_client:get_pnl:545 - Calculated totals - realized: 0.0, unrealized: -4127478.29, day: -4127478.29\n", "record": {"elapsed": {"repr": "0:00:37.636570", "seconds": 37.63657}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 545, "message": "Calculated totals - realized: 0.0, unrealized: -4127478.29, day: -4127478.29", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:35:12.409524+05:30", "timestamp": 1755777912.409524}}}
{"text": "2025-08-21 17:35:12.416 | DEBUG    | app.services.dhan_client:get_pnl:554 - PnL consistency check passed: drift=‚Çπ0.00\n", "record": {"elapsed": {"repr": "0:00:37.643288", "seconds": 37.643288}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 554, "message": "PnL consistency check passed: drift=‚Çπ0.00", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:35:12.416242+05:30", "timestamp": 1755777912.416242}}}
{"text": "2025-08-21 17:35:12.424 | DEBUG    | app.services.dhan_client:get_pnl:558 - Creating PnLTotals...\n", "record": {"elapsed": {"repr": "0:00:37.651137", "seconds": 37.651137}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 558, "message": "Creating PnLTotals...", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:35:12.424091+05:30", "timestamp": 1755777912.424091}}}
{"text": "2025-08-21 17:35:12.442 | DEBUG    | app.services.dhan_client:get_pnl:565 - PnLTotals created successfully\n", "record": {"elapsed": {"repr": "0:00:37.669794", "seconds": 37.669794}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 565, "message": "PnLTotals created successfully", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:35:12.442748+05:30", "timestamp": 1755777912.442748}}}
{"text": "2025-08-21 17:35:12.452 | DEBUG    | app.services.dhan_client:get_pnl:574 - Creating PnL model...\n", "record": {"elapsed": {"repr": "0:00:37.680023", "seconds": 37.680023}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 574, "message": "Creating PnL model...", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:35:12.452977+05:30", "timestamp": 1755777912.452977}}}
{"text": "2025-08-21 17:35:12.460 | DEBUG    | app.services.dhan_client:get_pnl:575 - Model fields: totals=<class 'app.models.schemas.PnLTotals'>, perSymbol=5, updated_at=2025-08-21 17:35:12.385395+05:30, trading_day=2025-08-21\n", "record": {"elapsed": {"repr": "0:00:37.687685", "seconds": 37.687685}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 575, "message": "Model fields: totals=<class 'app.models.schemas.PnLTotals'>, perSymbol=5, updated_at=2025-08-21 17:35:12.385395+05:30, trading_day=2025-08-21", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:35:12.460639+05:30", "timestamp": 1755777912.460639}}}
{"text": "2025-08-21 17:35:12.471 | DEBUG    | app.services.dhan_client:get_pnl:584 - Created PnL model: totals=PnLTotals(realized=0.0, unrealized=-4127478.29, day=-4127478.29, currency='INR') per_symbol=[PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=913, avg=1944.27, ltp=562.0, unrealized=-1262015.79, today_pnl=-1262015.79), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=457, avg=1390.48, ltp=361.37, unrealized=470302.25, today_pnl=470302.25), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=196, avg=1021.99, ltp=352.64, unrealized=-131192.08, today_pnl=-131192.08), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=1708, avg=426.15, ltp=2073.67, unrealized=-2813972.45, today_pnl=-2813972.45), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=931, avg=756.68, ltp=337.13, unrealized=-390600.22, today_pnl=-390600.22)] updated_at=datetime.datetime(2025, 8, 21, 17, 35, 12, 385395, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))) trading_day='2025-08-21'\n", "record": {"elapsed": {"repr": "0:00:37.698067", "seconds": 37.698067}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 584, "message": "Created PnL model: totals=PnLTotals(realized=0.0, unrealized=-4127478.29, day=-4127478.29, currency='INR') per_symbol=[PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=913, avg=1944.27, ltp=562.0, unrealized=-1262015.79, today_pnl=-1262015.79), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=457, avg=1390.48, ltp=361.37, unrealized=470302.25, today_pnl=470302.25), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=196, avg=1021.99, ltp=352.64, unrealized=-131192.08, today_pnl=-131192.08), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=1708, avg=426.15, ltp=2073.67, unrealized=-2813972.45, today_pnl=-2813972.45), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=931, avg=756.68, ltp=337.13, unrealized=-390600.22, today_pnl=-390600.22)] updated_at=datetime.datetime(2025, 8, 21, 17, 35, 12, 385395, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))) trading_day='2025-08-21'", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:35:12.471021+05:30", "timestamp": 1755777912.471021}}}
{"text": "2025-08-21 17:35:12.477 | DEBUG    | app.services.dhan_client:get_pnl:585 - PnL model fields: {'totals': PnLTotals(realized=0.0, unrealized=-4127478.29, day=-4127478.29, currency='INR'), 'per_symbol': [PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=913, avg=1944.27, ltp=562.0, unrealized=-1262015.79, today_pnl=-1262015.79), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=457, avg=1390.48, ltp=361.37, unrealized=470302.25, today_pnl=470302.25), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=196, avg=1021.99, ltp=352.64, unrealized=-131192.08, today_pnl=-131192.08), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=1708, avg=426.15, ltp=2073.67, unrealized=-2813972.45, today_pnl=-2813972.45), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=931, avg=756.68, ltp=337.13, unrealized=-390600.22, today_pnl=-390600.22)], 'updated_at': datetime.datetime(2025, 8, 21, 17, 35, 12, 385395, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))), 'trading_day': '2025-08-21'}\n", "record": {"elapsed": {"repr": "0:00:37.704420", "seconds": 37.70442}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 585, "message": "PnL model fields: {'totals': PnLTotals(realized=0.0, unrealized=-4127478.29, day=-4127478.29, currency='INR'), 'per_symbol': [PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=913, avg=1944.27, ltp=562.0, unrealized=-1262015.79, today_pnl=-1262015.79), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=457, avg=1390.48, ltp=361.37, unrealized=470302.25, today_pnl=470302.25), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=196, avg=1021.99, ltp=352.64, unrealized=-131192.08, today_pnl=-131192.08), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=1708, avg=426.15, ltp=2073.67, unrealized=-2813972.45, today_pnl=-2813972.45), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=931, avg=756.68, ltp=337.13, unrealized=-390600.22, today_pnl=-390600.22)], 'updated_at': datetime.datetime(2025, 8, 21, 17, 35, 12, 385395, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))), 'trading_day': '2025-08-21'}", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:35:12.477374+05:30", "timestamp": 1755777912.477374}}}
{"text": "2025-08-21 17:35:12.484 | INFO     | app.services.dhan_client:get_pnl:587 - P&L calculation completed successfully: 5 symbols, unrealized=‚Çπ-4127478.29\n", "record": {"elapsed": {"repr": "0:00:37.711240", "seconds": 37.71124}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 587, "message": "P&L calculation completed successfully: 5 symbols, unrealized=‚Çπ-4127478.29", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:35:12.484194+05:30", "timestamp": 1755777912.484194}}}
{"text": "2025-08-21 17:35:12.486 | DEBUG    | app.ws.live:emit_delta:408 - Emitted pnl delta: seq=42\n", "record": {"elapsed": {"repr": "0:00:37.713593", "seconds": 37.713593}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "emit_delta", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 408, "message": "Emitted pnl delta: seq=42", "module": "live", "name": "app.ws.live", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:35:12.486547+05:30", "timestamp": 1755777912.486547}}}
{"text": "2025-08-21 17:35:12.491 | DEBUG    | app.ws.live:emit_delta:408 - Emitted positions delta: seq=43\n", "record": {"elapsed": {"repr": "0:00:37.718210", "seconds": 37.71821}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "emit_delta", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 408, "message": "Emitted positions delta: seq=43", "module": "live", "name": "app.ws.live", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:35:12.491164+05:30", "timestamp": 1755777912.491164}}}
{"text": "2025-08-21 17:35:13.066 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:38.293514", "seconds": 38.293514}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 22636, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 17:35:13.066468+05:30", "timestamp": 1755777913.066468}}}
{"text": "2025-08-21 17:35:13.068 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:38.295080", "seconds": 38.29508}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 22636, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 17:35:13.068034+05:30", "timestamp": 1755777913.068034}}}
{"text": "2025-08-21 17:35:13.069 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:38.296327", "seconds": 38.296327}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 22636, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 17:35:13.069281+05:30", "timestamp": 1755777913.069281}}}
{"text": "2025-08-21 17:35:13.073 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:38.300074", "seconds": 38.300074}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 22636, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 17:35:13.073028+05:30", "timestamp": 1755777913.073028}}}
{"text": "2025-08-21 17:35:13.075 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:38.302483", "seconds": 38.302483}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 22636, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 17:35:13.075437+05:30", "timestamp": 1755777913.075437}}}
{"text": "2025-08-21 17:35:13.077 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:38.304472", "seconds": 38.304472}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 22636, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 17:35:13.077426+05:30", "timestamp": 1755777913.077426}}}
{"text": "2025-08-21 17:35:13.081 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:38.308794", "seconds": 38.308794}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 22636, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 17:35:13.081748+05:30", "timestamp": 1755777913.081748}}}
{"text": "2025-08-21 17:35:13.083 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:38.310895", "seconds": 38.310895}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 22636, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 17:35:13.083849+05:30", "timestamp": 1755777913.083849}}}
{"text": "2025-08-21 17:35:13.085 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:38.312213", "seconds": 38.312213}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 22636, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 17:35:13.085167+05:30", "timestamp": 1755777913.085167}}}
{"text": "2025-08-21 17:35:13.087 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:38.314075", "seconds": 38.314075}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 22636, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 17:35:13.087029+05:30", "timestamp": 1755777913.087029}}}
{"text": "2025-08-21 17:35:14.069 | INFO     | app.services.dhan_client:get_pnl:489 - Starting accurate P&L calculation\n", "record": {"elapsed": {"repr": "0:00:39.296343", "seconds": 39.296343}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 489, "message": "Starting accurate P&L calculation", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:35:14.069297+05:30", "timestamp": 1755777914.069297}}}
{"text": "2025-08-21 17:35:14.070 | INFO     | app.services.dhan_client:get_pnl:491 - Fetched 5 positions\n", "record": {"elapsed": {"repr": "0:00:39.297446", "seconds": 39.297446}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 491, "message": "Fetched 5 positions", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:35:14.070400+05:30", "timestamp": 1755777914.0704}}}
{"text": "2025-08-21 17:35:14.071 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for RELIANCE: unrealized=-1270695.45, today=-1270695.45\n", "record": {"elapsed": {"repr": "0:00:39.298328", "seconds": 39.298328}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for RELIANCE: unrealized=-1270695.45, today=-1270695.45", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:35:14.071282+05:30", "timestamp": 1755777914.071282}}}
{"text": "2025-08-21 17:35:14.072 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for TCS: unrealized=467485.4, today=467485.4\n", "record": {"elapsed": {"repr": "0:00:39.299350", "seconds": 39.29935}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for TCS: unrealized=467485.4, today=467485.4", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:35:14.072304+05:30", "timestamp": 1755777914.072304}}}
{"text": "2025-08-21 17:35:14.073 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for HDFC: unrealized=-131818.77, today=-131818.77\n", "record": {"elapsed": {"repr": "0:00:39.300278", "seconds": 39.300278}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for HDFC: unrealized=-131818.77, today=-131818.77", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:35:14.073232+05:30", "timestamp": 1755777914.073232}}}
{"text": "2025-08-21 17:35:14.074 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for INFY: unrealized=-2822462.59, today=-2822462.59\n", "record": {"elapsed": {"repr": "0:00:39.301360", "seconds": 39.30136}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for INFY: unrealized=-2822462.59, today=-2822462.59", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:35:14.074314+05:30", "timestamp": 1755777914.074314}}}
{"text": "2025-08-21 17:35:14.075 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for ICICIBANK: unrealized=-395487.13, today=-395487.13\n", "record": {"elapsed": {"repr": "0:00:39.302478", "seconds": 39.302478}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for ICICIBANK: unrealized=-395487.13, today=-395487.13", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:35:14.075432+05:30", "timestamp": 1755777914.075432}}}
{"text": "2025-08-21 17:35:14.076 | INFO     | app.services.dhan_client:get_pnl:545 - Calculated totals - realized: 0.0, unrealized: -4152978.54, day: -4152978.54\n", "record": {"elapsed": {"repr": "0:00:39.303540", "seconds": 39.30354}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 545, "message": "Calculated totals - realized: 0.0, unrealized: -4152978.54, day: -4152978.54", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:35:14.076494+05:30", "timestamp": 1755777914.076494}}}
{"text": "2025-08-21 17:35:14.077 | DEBUG    | app.services.dhan_client:get_pnl:554 - PnL consistency check passed: drift=‚Çπ0.00\n", "record": {"elapsed": {"repr": "0:00:39.304451", "seconds": 39.304451}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 554, "message": "PnL consistency check passed: drift=‚Çπ0.00", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:35:14.077405+05:30", "timestamp": 1755777914.077405}}}
{"text": "2025-08-21 17:35:14.078 | DEBUG    | app.services.dhan_client:get_pnl:558 - Creating PnLTotals...\n", "record": {"elapsed": {"repr": "0:00:39.305501", "seconds": 39.305501}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 558, "message": "Creating PnLTotals...", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:35:14.078455+05:30", "timestamp": 1755777914.078455}}}
{"text": "2025-08-21 17:35:14.079 | DEBUG    | app.services.dhan_client:get_pnl:565 - PnLTotals created successfully\n", "record": {"elapsed": {"repr": "0:00:39.306440", "seconds": 39.30644}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 565, "message": "PnLTotals created successfully", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:35:14.079394+05:30", "timestamp": 1755777914.079394}}}
{"text": "2025-08-21 17:35:14.080 | DEBUG    | app.services.dhan_client:get_pnl:574 - Creating PnL model...\n", "record": {"elapsed": {"repr": "0:00:39.307180", "seconds": 39.30718}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 574, "message": "Creating PnL model...", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:35:14.080134+05:30", "timestamp": 1755777914.080134}}}
{"text": "2025-08-21 17:35:14.081 | DEBUG    | app.services.dhan_client:get_pnl:575 - Model fields: totals=<class 'app.models.schemas.PnLTotals'>, perSymbol=5, updated_at=2025-08-21 17:35:14.071185+05:30, trading_day=2025-08-21\n", "record": {"elapsed": {"repr": "0:00:39.308094", "seconds": 39.308094}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 575, "message": "Model fields: totals=<class 'app.models.schemas.PnLTotals'>, perSymbol=5, updated_at=2025-08-21 17:35:14.071185+05:30, trading_day=2025-08-21", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:35:14.081048+05:30", "timestamp": 1755777914.081048}}}
{"text": "2025-08-21 17:35:14.082 | DEBUG    | app.services.dhan_client:get_pnl:584 - Created PnL model: totals=PnLTotals(realized=0.0, unrealized=-4152978.54, day=-4152978.54, currency='INR') per_symbol=[PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=913, avg=1944.27, ltp=552.49, unrealized=-1270695.45, today_pnl=-1270695.45), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=457, avg=1390.48, ltp=367.54, unrealized=467485.4, today_pnl=467485.4), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=196, avg=1021.99, ltp=349.45, unrealized=-131818.77, today_pnl=-131818.77), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=1708, avg=426.15, ltp=2078.65, unrealized=-2822462.59, today_pnl=-2822462.59), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=931, avg=756.68, ltp=331.88, unrealized=-395487.13, today_pnl=-395487.13)] updated_at=datetime.datetime(2025, 8, 21, 17, 35, 14, 71185, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))) trading_day='2025-08-21'\n", "record": {"elapsed": {"repr": "0:00:39.309455", "seconds": 39.309455}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 584, "message": "Created PnL model: totals=PnLTotals(realized=0.0, unrealized=-4152978.54, day=-4152978.54, currency='INR') per_symbol=[PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=913, avg=1944.27, ltp=552.49, unrealized=-1270695.45, today_pnl=-1270695.45), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=457, avg=1390.48, ltp=367.54, unrealized=467485.4, today_pnl=467485.4), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=196, avg=1021.99, ltp=349.45, unrealized=-131818.77, today_pnl=-131818.77), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=1708, avg=426.15, ltp=2078.65, unrealized=-2822462.59, today_pnl=-2822462.59), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=931, avg=756.68, ltp=331.88, unrealized=-395487.13, today_pnl=-395487.13)] updated_at=datetime.datetime(2025, 8, 21, 17, 35, 14, 71185, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))) trading_day='2025-08-21'", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:35:14.082409+05:30", "timestamp": 1755777914.082409}}}
{"text": "2025-08-21 17:35:14.084 | DEBUG    | app.services.dhan_client:get_pnl:585 - PnL model fields: {'totals': PnLTotals(realized=0.0, unrealized=-4152978.54, day=-4152978.54, currency='INR'), 'per_symbol': [PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=913, avg=1944.27, ltp=552.49, unrealized=-1270695.45, today_pnl=-1270695.45), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=457, avg=1390.48, ltp=367.54, unrealized=467485.4, today_pnl=467485.4), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=196, avg=1021.99, ltp=349.45, unrealized=-131818.77, today_pnl=-131818.77), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=1708, avg=426.15, ltp=2078.65, unrealized=-2822462.59, today_pnl=-2822462.59), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=931, avg=756.68, ltp=331.88, unrealized=-395487.13, today_pnl=-395487.13)], 'updated_at': datetime.datetime(2025, 8, 21, 17, 35, 14, 71185, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))), 'trading_day': '2025-08-21'}\n", "record": {"elapsed": {"repr": "0:00:39.311101", "seconds": 39.311101}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 585, "message": "PnL model fields: {'totals': PnLTotals(realized=0.0, unrealized=-4152978.54, day=-4152978.54, currency='INR'), 'per_symbol': [PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=913, avg=1944.27, ltp=552.49, unrealized=-1270695.45, today_pnl=-1270695.45), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=457, avg=1390.48, ltp=367.54, unrealized=467485.4, today_pnl=467485.4), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=196, avg=1021.99, ltp=349.45, unrealized=-131818.77, today_pnl=-131818.77), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=1708, avg=426.15, ltp=2078.65, unrealized=-2822462.59, today_pnl=-2822462.59), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=931, avg=756.68, ltp=331.88, unrealized=-395487.13, today_pnl=-395487.13)], 'updated_at': datetime.datetime(2025, 8, 21, 17, 35, 14, 71185, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))), 'trading_day': '2025-08-21'}", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:35:14.084055+05:30", "timestamp": 1755777914.084055}}}
{"text": "2025-08-21 17:35:14.085 | INFO     | app.services.dhan_client:get_pnl:587 - P&L calculation completed successfully: 5 symbols, unrealized=‚Çπ-4152978.54\n", "record": {"elapsed": {"repr": "0:00:39.312546", "seconds": 39.312546}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 587, "message": "P&L calculation completed successfully: 5 symbols, unrealized=‚Çπ-4152978.54", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:35:14.085500+05:30", "timestamp": 1755777914.0855}}}
{"text": "2025-08-21 17:35:14.086 | DEBUG    | app.ws.live:emit_delta:408 - Emitted pnl delta: seq=44\n", "record": {"elapsed": {"repr": "0:00:39.313655", "seconds": 39.313655}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "emit_delta", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 408, "message": "Emitted pnl delta: seq=44", "module": "live", "name": "app.ws.live", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:35:14.086609+05:30", "timestamp": 1755777914.086609}}}
{"text": "2025-08-21 17:35:14.087 | DEBUG    | app.ws.live:emit_delta:408 - Emitted positions delta: seq=45\n", "record": {"elapsed": {"repr": "0:00:39.314974", "seconds": 39.314974}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "emit_delta", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 408, "message": "Emitted positions delta: seq=45", "module": "live", "name": "app.ws.live", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:35:14.087928+05:30", "timestamp": 1755777914.087928}}}
{"text": "2025-08-21 17:35:15.090 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:40.317998", "seconds": 40.317998}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 22636, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 17:35:15.090952+05:30", "timestamp": 1755777915.090952}}}
{"text": "2025-08-21 17:35:15.092 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:40.319405", "seconds": 40.319405}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 22636, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 17:35:15.092359+05:30", "timestamp": 1755777915.092359}}}
{"text": "2025-08-21 17:35:15.093 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:40.320755", "seconds": 40.320755}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 22636, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 17:35:15.093709+05:30", "timestamp": 1755777915.093709}}}
{"text": "2025-08-21 17:35:15.094 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:40.321910", "seconds": 40.32191}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 22636, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 17:35:15.094864+05:30", "timestamp": 1755777915.094864}}}
{"text": "2025-08-21 17:35:15.097 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:40.324123", "seconds": 40.324123}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 22636, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 17:35:15.097077+05:30", "timestamp": 1755777915.097077}}}
{"text": "2025-08-21 17:35:15.098 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:40.325416", "seconds": 40.325416}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 22636, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 17:35:15.098370+05:30", "timestamp": 1755777915.09837}}}
{"text": "2025-08-21 17:35:15.100 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:40.327324", "seconds": 40.327324}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 22636, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 17:35:15.100278+05:30", "timestamp": 1755777915.100278}}}
{"text": "2025-08-21 17:35:15.101 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:40.328254", "seconds": 40.328254}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 22636, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 17:35:15.101208+05:30", "timestamp": 1755777915.101208}}}
{"text": "2025-08-21 17:35:15.102 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:40.329618", "seconds": 40.329618}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 22636, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 17:35:15.102572+05:30", "timestamp": 1755777915.102572}}}
{"text": "2025-08-21 17:35:15.105 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:40.332185", "seconds": 40.332185}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 22636, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 17:35:15.105139+05:30", "timestamp": 1755777915.105139}}}
{"text": "2025-08-21 17:35:15.960 | INFO     | app.services.dhan_client:get_pnl:489 - Starting accurate P&L calculation\n", "record": {"elapsed": {"repr": "0:00:41.187458", "seconds": 41.187458}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 489, "message": "Starting accurate P&L calculation", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:35:15.960412+05:30", "timestamp": 1755777915.960412}}}
{"text": "2025-08-21 17:35:15.961 | INFO     | app.services.dhan_client:get_pnl:491 - Fetched 5 positions\n", "record": {"elapsed": {"repr": "0:00:41.188541", "seconds": 41.188541}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 491, "message": "Fetched 5 positions", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:35:15.961495+05:30", "timestamp": 1755777915.961495}}}
{"text": "2025-08-21 17:35:15.962 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for RELIANCE: unrealized=-1268365.93, today=-1268365.93\n", "record": {"elapsed": {"repr": "0:00:41.189524", "seconds": 41.189524}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for RELIANCE: unrealized=-1268365.93, today=-1268365.93", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:35:15.962478+05:30", "timestamp": 1755777915.962478}}}
{"text": "2025-08-21 17:35:15.963 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for TCS: unrealized=468279.21, today=468279.21\n", "record": {"elapsed": {"repr": "0:00:41.190426", "seconds": 41.190426}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for TCS: unrealized=468279.21, today=468279.21", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:35:15.963380+05:30", "timestamp": 1755777915.96338}}}
{"text": "2025-08-21 17:35:15.964 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for HDFC: unrealized=-131928.12, today=-131928.12\n", "record": {"elapsed": {"repr": "0:00:41.191322", "seconds": 41.191322}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for HDFC: unrealized=-131928.12, today=-131928.12", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:35:15.964276+05:30", "timestamp": 1755777915.964276}}}
{"text": "2025-08-21 17:35:15.965 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for INFY: unrealized=-2862501.55, today=-2862501.55\n", "record": {"elapsed": {"repr": "0:00:41.192260", "seconds": 41.19226}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for INFY: unrealized=-2862501.55, today=-2862501.55", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:35:15.965214+05:30", "timestamp": 1755777915.965214}}}
{"text": "2025-08-21 17:35:15.966 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for ICICIBANK: unrealized=-401589.59, today=-401589.59\n", "record": {"elapsed": {"repr": "0:00:41.193145", "seconds": 41.193145}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for ICICIBANK: unrealized=-401589.59, today=-401589.59", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:35:15.966099+05:30", "timestamp": 1755777915.966099}}}
{"text": "2025-08-21 17:35:15.967 | INFO     | app.services.dhan_client:get_pnl:545 - Calculated totals - realized: 0.0, unrealized: -4196105.98, day: -4196105.98\n", "record": {"elapsed": {"repr": "0:00:41.194089", "seconds": 41.194089}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 545, "message": "Calculated totals - realized: 0.0, unrealized: -4196105.98, day: -4196105.98", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:35:15.967043+05:30", "timestamp": 1755777915.967043}}}
{"text": "2025-08-21 17:35:15.968 | DEBUG    | app.services.dhan_client:get_pnl:554 - PnL consistency check passed: drift=‚Çπ0.00\n", "record": {"elapsed": {"repr": "0:00:41.195272", "seconds": 41.195272}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 554, "message": "PnL consistency check passed: drift=‚Çπ0.00", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:35:15.968226+05:30", "timestamp": 1755777915.968226}}}
{"text": "2025-08-21 17:35:15.969 | DEBUG    | app.services.dhan_client:get_pnl:558 - Creating PnLTotals...\n", "record": {"elapsed": {"repr": "0:00:41.196219", "seconds": 41.196219}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 558, "message": "Creating PnLTotals...", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:35:15.969173+05:30", "timestamp": 1755777915.969173}}}
{"text": "2025-08-21 17:35:15.970 | DEBUG    | app.services.dhan_client:get_pnl:565 - PnLTotals created successfully\n", "record": {"elapsed": {"repr": "0:00:41.197428", "seconds": 41.197428}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 565, "message": "PnLTotals created successfully", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:35:15.970382+05:30", "timestamp": 1755777915.970382}}}
{"text": "2025-08-21 17:35:15.971 | DEBUG    | app.services.dhan_client:get_pnl:574 - Creating PnL model...\n", "record": {"elapsed": {"repr": "0:00:41.198290", "seconds": 41.19829}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 574, "message": "Creating PnL model...", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:35:15.971244+05:30", "timestamp": 1755777915.971244}}}
{"text": "2025-08-21 17:35:15.972 | DEBUG    | app.services.dhan_client:get_pnl:575 - Model fields: totals=<class 'app.models.schemas.PnLTotals'>, perSymbol=5, updated_at=2025-08-21 17:35:15.962345+05:30, trading_day=2025-08-21\n", "record": {"elapsed": {"repr": "0:00:41.199172", "seconds": 41.199172}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 575, "message": "Model fields: totals=<class 'app.models.schemas.PnLTotals'>, perSymbol=5, updated_at=2025-08-21 17:35:15.962345+05:30, trading_day=2025-08-21", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:35:15.972126+05:30", "timestamp": 1755777915.972126}}}
{"text": "2025-08-21 17:35:15.973 | DEBUG    | app.services.dhan_client:get_pnl:584 - Created PnL model: totals=PnLTotals(realized=0.0, unrealized=-4196105.98, day=-4196105.98, currency='INR') per_symbol=[PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=913, avg=1944.27, ltp=555.04, unrealized=-1268365.93, today_pnl=-1268365.93), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=457, avg=1390.48, ltp=365.8, unrealized=468279.21, today_pnl=468279.21), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=196, avg=1021.99, ltp=348.89, unrealized=-131928.12, today_pnl=-131928.12), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=1708, avg=426.15, ltp=2102.09, unrealized=-2862501.55, today_pnl=-2862501.55), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=931, avg=756.68, ltp=325.33, unrealized=-401589.59, today_pnl=-401589.59)] updated_at=datetime.datetime(2025, 8, 21, 17, 35, 15, 962345, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))) trading_day='2025-08-21'\n", "record": {"elapsed": {"repr": "0:00:41.200366", "seconds": 41.200366}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 584, "message": "Created PnL model: totals=PnLTotals(realized=0.0, unrealized=-4196105.98, day=-4196105.98, currency='INR') per_symbol=[PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=913, avg=1944.27, ltp=555.04, unrealized=-1268365.93, today_pnl=-1268365.93), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=457, avg=1390.48, ltp=365.8, unrealized=468279.21, today_pnl=468279.21), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=196, avg=1021.99, ltp=348.89, unrealized=-131928.12, today_pnl=-131928.12), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=1708, avg=426.15, ltp=2102.09, unrealized=-2862501.55, today_pnl=-2862501.55), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=931, avg=756.68, ltp=325.33, unrealized=-401589.59, today_pnl=-401589.59)] updated_at=datetime.datetime(2025, 8, 21, 17, 35, 15, 962345, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))) trading_day='2025-08-21'", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:35:15.973320+05:30", "timestamp": 1755777915.97332}}}
{"text": "2025-08-21 17:35:15.975 | DEBUG    | app.services.dhan_client:get_pnl:585 - PnL model fields: {'totals': PnLTotals(realized=0.0, unrealized=-4196105.98, day=-4196105.98, currency='INR'), 'per_symbol': [PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=913, avg=1944.27, ltp=555.04, unrealized=-1268365.93, today_pnl=-1268365.93), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=457, avg=1390.48, ltp=365.8, unrealized=468279.21, today_pnl=468279.21), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=196, avg=1021.99, ltp=348.89, unrealized=-131928.12, today_pnl=-131928.12), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=1708, avg=426.15, ltp=2102.09, unrealized=-2862501.55, today_pnl=-2862501.55), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=931, avg=756.68, ltp=325.33, unrealized=-401589.59, today_pnl=-401589.59)], 'updated_at': datetime.datetime(2025, 8, 21, 17, 35, 15, 962345, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))), 'trading_day': '2025-08-21'}\n", "record": {"elapsed": {"repr": "0:00:41.202193", "seconds": 41.202193}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 585, "message": "PnL model fields: {'totals': PnLTotals(realized=0.0, unrealized=-4196105.98, day=-4196105.98, currency='INR'), 'per_symbol': [PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=913, avg=1944.27, ltp=555.04, unrealized=-1268365.93, today_pnl=-1268365.93), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=457, avg=1390.48, ltp=365.8, unrealized=468279.21, today_pnl=468279.21), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=196, avg=1021.99, ltp=348.89, unrealized=-131928.12, today_pnl=-131928.12), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=1708, avg=426.15, ltp=2102.09, unrealized=-2862501.55, today_pnl=-2862501.55), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=931, avg=756.68, ltp=325.33, unrealized=-401589.59, today_pnl=-401589.59)], 'updated_at': datetime.datetime(2025, 8, 21, 17, 35, 15, 962345, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))), 'trading_day': '2025-08-21'}", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:35:15.975147+05:30", "timestamp": 1755777915.975147}}}
{"text": "2025-08-21 17:35:15.976 | INFO     | app.services.dhan_client:get_pnl:587 - P&L calculation completed successfully: 5 symbols, unrealized=‚Çπ-4196105.98\n", "record": {"elapsed": {"repr": "0:00:41.203690", "seconds": 41.20369}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 587, "message": "P&L calculation completed successfully: 5 symbols, unrealized=‚Çπ-4196105.98", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:35:15.976644+05:30", "timestamp": 1755777915.976644}}}
{"text": "2025-08-21 17:35:15.978 | DEBUG    | app.ws.live:emit_delta:408 - Emitted pnl delta: seq=46\n", "record": {"elapsed": {"repr": "0:00:41.205058", "seconds": 41.205058}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "emit_delta", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 408, "message": "Emitted pnl delta: seq=46", "module": "live", "name": "app.ws.live", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:35:15.978012+05:30", "timestamp": 1755777915.978012}}}
{"text": "2025-08-21 17:35:15.979 | DEBUG    | app.ws.live:emit_delta:408 - Emitted positions delta: seq=47\n", "record": {"elapsed": {"repr": "0:00:41.206417", "seconds": 41.206417}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "emit_delta", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 408, "message": "Emitted positions delta: seq=47", "module": "live", "name": "app.ws.live", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:35:15.979371+05:30", "timestamp": 1755777915.979371}}}
{"text": "2025-08-21 17:35:17.107 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:42.334305", "seconds": 42.334305}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 22636, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 17:35:17.107259+05:30", "timestamp": 1755777917.107259}}}
{"text": "2025-08-21 17:35:17.111 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:42.338247", "seconds": 42.338247}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 22636, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 17:35:17.111201+05:30", "timestamp": 1755777917.111201}}}
{"text": "2025-08-21 17:35:17.114 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:42.341329", "seconds": 42.341329}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 22636, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 17:35:17.114283+05:30", "timestamp": 1755777917.114283}}}
{"text": "2025-08-21 17:35:17.118 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:42.345080", "seconds": 42.34508}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 22636, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 17:35:17.118034+05:30", "timestamp": 1755777917.118034}}}
{"text": "2025-08-21 17:35:17.122 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:42.349697", "seconds": 42.349697}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 22636, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 17:35:17.122651+05:30", "timestamp": 1755777917.122651}}}
{"text": "2025-08-21 17:35:17.125 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:42.352073", "seconds": 42.352073}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 22636, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 17:35:17.125027+05:30", "timestamp": 1755777917.125027}}}
{"text": "2025-08-21 17:35:17.129 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:42.356923", "seconds": 42.356923}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 22636, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 17:35:17.129877+05:30", "timestamp": 1755777917.129877}}}
{"text": "2025-08-21 17:35:17.132 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:42.359289", "seconds": 42.359289}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 22636, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 17:35:17.132243+05:30", "timestamp": 1755777917.132243}}}
{"text": "2025-08-21 17:35:17.135 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:42.362552", "seconds": 42.362552}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 22636, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 17:35:17.135506+05:30", "timestamp": 1755777917.135506}}}
{"text": "2025-08-21 17:35:17.139 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:42.366290", "seconds": 42.36629}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 22636, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 17:35:17.139244+05:30", "timestamp": 1755777917.139244}}}
{"text": "2025-08-21 17:35:17.676 | DEBUG    | app.ws.live:websocket_endpoint:517 - Received WebSocket message: {'type': 'ping', 'clientTime': '2025-08-21T12:05:17.668Z'}\n", "record": {"elapsed": {"repr": "0:00:42.903443", "seconds": 42.903443}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "websocket_endpoint", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 517, "message": "Received WebSocket message: {'type': 'ping', 'clientTime': '2025-08-21T12:05:17.668Z'}", "module": "live", "name": "app.ws.live", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:35:17.676397+05:30", "timestamp": 1755777917.676397}}}
{"text": "2025-08-21 17:35:17.792 | INFO     | app.services.dhan_client:get_pnl:489 - Starting accurate P&L calculation\n", "record": {"elapsed": {"repr": "0:00:43.019046", "seconds": 43.019046}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 489, "message": "Starting accurate P&L calculation", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:35:17.792000+05:30", "timestamp": 1755777917.792}}}
{"text": "2025-08-21 17:35:17.793 | INFO     | app.services.dhan_client:get_pnl:491 - Fetched 5 positions\n", "record": {"elapsed": {"repr": "0:00:43.020390", "seconds": 43.02039}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 491, "message": "Fetched 5 positions", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:35:17.793344+05:30", "timestamp": 1755777917.793344}}}
{"text": "2025-08-21 17:35:17.794 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for RELIANCE: unrealized=-1275337.65, today=-1275337.65\n", "record": {"elapsed": {"repr": "0:00:43.021450", "seconds": 43.02145}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for RELIANCE: unrealized=-1275337.65, today=-1275337.65", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:35:17.794404+05:30", "timestamp": 1755777917.794404}}}
{"text": "2025-08-21 17:35:17.795 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for TCS: unrealized=469337.18, today=469337.18\n", "record": {"elapsed": {"repr": "0:00:43.022466", "seconds": 43.022466}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for TCS: unrealized=469337.18, today=469337.18", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:35:17.795420+05:30", "timestamp": 1755777917.79542}}}
{"text": "2025-08-21 17:35:17.796 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for HDFC: unrealized=-131599.97, today=-131599.97\n", "record": {"elapsed": {"repr": "0:00:43.023318", "seconds": 43.023318}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for HDFC: unrealized=-131599.97, today=-131599.97", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:35:17.796272+05:30", "timestamp": 1755777917.796272}}}
{"text": "2025-08-21 17:35:17.797 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for INFY: unrealized=-2795461.12, today=-2795461.12\n", "record": {"elapsed": {"repr": "0:00:43.024179", "seconds": 43.024179}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for INFY: unrealized=-2795461.12, today=-2795461.12", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:35:17.797133+05:30", "timestamp": 1755777917.797133}}}
{"text": "2025-08-21 17:35:17.798 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for ICICIBANK: unrealized=-396114.12, today=-396114.12\n", "record": {"elapsed": {"repr": "0:00:43.025158", "seconds": 43.025158}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for ICICIBANK: unrealized=-396114.12, today=-396114.12", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:35:17.798112+05:30", "timestamp": 1755777917.798112}}}
{"text": "2025-08-21 17:35:17.799 | INFO     | app.services.dhan_client:get_pnl:545 - Calculated totals - realized: 0.0, unrealized: -4129175.68, day: -4129175.68\n", "record": {"elapsed": {"repr": "0:00:43.026071", "seconds": 43.026071}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 545, "message": "Calculated totals - realized: 0.0, unrealized: -4129175.68, day: -4129175.68", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:35:17.799025+05:30", "timestamp": 1755777917.799025}}}
{"text": "2025-08-21 17:35:17.799 | DEBUG    | app.services.dhan_client:get_pnl:554 - PnL consistency check passed: drift=‚Çπ0.00\n", "record": {"elapsed": {"repr": "0:00:43.026951", "seconds": 43.026951}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 554, "message": "PnL consistency check passed: drift=‚Çπ0.00", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:35:17.799905+05:30", "timestamp": 1755777917.799905}}}
{"text": "2025-08-21 17:35:17.801 | DEBUG    | app.services.dhan_client:get_pnl:558 - Creating PnLTotals...\n", "record": {"elapsed": {"repr": "0:00:43.028359", "seconds": 43.028359}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 558, "message": "Creating PnLTotals...", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:35:17.801313+05:30", "timestamp": 1755777917.801313}}}
{"text": "2025-08-21 17:35:17.802 | DEBUG    | app.services.dhan_client:get_pnl:565 - PnLTotals created successfully\n", "record": {"elapsed": {"repr": "0:00:43.029534", "seconds": 43.029534}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 565, "message": "PnLTotals created successfully", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:35:17.802488+05:30", "timestamp": 1755777917.802488}}}
{"text": "2025-08-21 17:35:17.803 | DEBUG    | app.services.dhan_client:get_pnl:574 - Creating PnL model...\n", "record": {"elapsed": {"repr": "0:00:43.030525", "seconds": 43.030525}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 574, "message": "Creating PnL model...", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:35:17.803479+05:30", "timestamp": 1755777917.803479}}}
{"text": "2025-08-21 17:35:17.804 | DEBUG    | app.services.dhan_client:get_pnl:575 - Model fields: totals=<class 'app.models.schemas.PnLTotals'>, perSymbol=5, updated_at=2025-08-21 17:35:17.794266+05:30, trading_day=2025-08-21\n", "record": {"elapsed": {"repr": "0:00:43.031476", "seconds": 43.031476}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 575, "message": "Model fields: totals=<class 'app.models.schemas.PnLTotals'>, perSymbol=5, updated_at=2025-08-21 17:35:17.794266+05:30, trading_day=2025-08-21", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:35:17.804430+05:30", "timestamp": 1755777917.80443}}}
{"text": "2025-08-21 17:35:17.805 | DEBUG    | app.services.dhan_client:get_pnl:584 - Created PnL model: totals=PnLTotals(realized=0.0, unrealized=-4129175.68, day=-4129175.68, currency='INR') per_symbol=[PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=913, avg=1944.27, ltp=547.41, unrealized=-1275337.65, today_pnl=-1275337.65), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=457, avg=1390.48, ltp=363.48, unrealized=469337.18, today_pnl=469337.18), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=196, avg=1021.99, ltp=350.56, unrealized=-131599.97, today_pnl=-131599.97), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=1708, avg=426.15, ltp=2062.84, unrealized=-2795461.12, today_pnl=-2795461.12), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=931, avg=756.68, ltp=331.21, unrealized=-396114.12, today_pnl=-396114.12)] updated_at=datetime.datetime(2025, 8, 21, 17, 35, 17, 794266, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))) trading_day='2025-08-21'\n", "record": {"elapsed": {"repr": "0:00:43.032655", "seconds": 43.032655}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 584, "message": "Created PnL model: totals=PnLTotals(realized=0.0, unrealized=-4129175.68, day=-4129175.68, currency='INR') per_symbol=[PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=913, avg=1944.27, ltp=547.41, unrealized=-1275337.65, today_pnl=-1275337.65), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=457, avg=1390.48, ltp=363.48, unrealized=469337.18, today_pnl=469337.18), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=196, avg=1021.99, ltp=350.56, unrealized=-131599.97, today_pnl=-131599.97), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=1708, avg=426.15, ltp=2062.84, unrealized=-2795461.12, today_pnl=-2795461.12), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=931, avg=756.68, ltp=331.21, unrealized=-396114.12, today_pnl=-396114.12)] updated_at=datetime.datetime(2025, 8, 21, 17, 35, 17, 794266, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))) trading_day='2025-08-21'", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:35:17.805609+05:30", "timestamp": 1755777917.805609}}}
{"text": "2025-08-21 17:35:17.806 | DEBUG    | app.services.dhan_client:get_pnl:585 - PnL model fields: {'totals': PnLTotals(realized=0.0, unrealized=-4129175.68, day=-4129175.68, currency='INR'), 'per_symbol': [PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=913, avg=1944.27, ltp=547.41, unrealized=-1275337.65, today_pnl=-1275337.65), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=457, avg=1390.48, ltp=363.48, unrealized=469337.18, today_pnl=469337.18), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=196, avg=1021.99, ltp=350.56, unrealized=-131599.97, today_pnl=-131599.97), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=1708, avg=426.15, ltp=2062.84, unrealized=-2795461.12, today_pnl=-2795461.12), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=931, avg=756.68, ltp=331.21, unrealized=-396114.12, today_pnl=-396114.12)], 'updated_at': datetime.datetime(2025, 8, 21, 17, 35, 17, 794266, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))), 'trading_day': '2025-08-21'}\n", "record": {"elapsed": {"repr": "0:00:43.034010", "seconds": 43.03401}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 585, "message": "PnL model fields: {'totals': PnLTotals(realized=0.0, unrealized=-4129175.68, day=-4129175.68, currency='INR'), 'per_symbol': [PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=913, avg=1944.27, ltp=547.41, unrealized=-1275337.65, today_pnl=-1275337.65), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=457, avg=1390.48, ltp=363.48, unrealized=469337.18, today_pnl=469337.18), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=196, avg=1021.99, ltp=350.56, unrealized=-131599.97, today_pnl=-131599.97), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=1708, avg=426.15, ltp=2062.84, unrealized=-2795461.12, today_pnl=-2795461.12), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=931, avg=756.68, ltp=331.21, unrealized=-396114.12, today_pnl=-396114.12)], 'updated_at': datetime.datetime(2025, 8, 21, 17, 35, 17, 794266, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))), 'trading_day': '2025-08-21'}", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:35:17.806964+05:30", "timestamp": 1755777917.806964}}}
{"text": "2025-08-21 17:35:17.808 | INFO     | app.services.dhan_client:get_pnl:587 - P&L calculation completed successfully: 5 symbols, unrealized=‚Çπ-4129175.68\n", "record": {"elapsed": {"repr": "0:00:43.035399", "seconds": 43.035399}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 587, "message": "P&L calculation completed successfully: 5 symbols, unrealized=‚Çπ-4129175.68", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:35:17.808353+05:30", "timestamp": 1755777917.808353}}}
{"text": "2025-08-21 17:35:17.810 | DEBUG    | app.ws.live:emit_delta:408 - Emitted pnl delta: seq=48\n", "record": {"elapsed": {"repr": "0:00:43.037691", "seconds": 43.037691}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "emit_delta", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 408, "message": "Emitted pnl delta: seq=48", "module": "live", "name": "app.ws.live", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:35:17.810645+05:30", "timestamp": 1755777917.810645}}}
{"text": "2025-08-21 17:35:17.812 | DEBUG    | app.ws.live:emit_delta:408 - Emitted positions delta: seq=49\n", "record": {"elapsed": {"repr": "0:00:43.039105", "seconds": 43.039105}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "emit_delta", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 408, "message": "Emitted positions delta: seq=49", "module": "live", "name": "app.ws.live", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:35:17.812059+05:30", "timestamp": 1755777917.812059}}}
{"text": "2025-08-21 17:35:17.835 | DEBUG    | app.ws.live:websocket_endpoint:517 - Received WebSocket message: {'type': 'ping', 'clientTime': '2025-08-21T12:05:17.834Z'}\n", "record": {"elapsed": {"repr": "0:00:43.062313", "seconds": 43.062313}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "websocket_endpoint", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 517, "message": "Received WebSocket message: {'type': 'ping', 'clientTime': '2025-08-21T12:05:17.834Z'}", "module": "live", "name": "app.ws.live", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:35:17.835267+05:30", "timestamp": 1755777917.835267}}}
{"text": "2025-08-21 17:35:18.181 | DEBUG    | app.ws.live:websocket_endpoint:517 - Received WebSocket message: {'type': 'ping', 'clientTime': '2025-08-21T12:05:18.181Z'}\n", "record": {"elapsed": {"repr": "0:00:43.408934", "seconds": 43.408934}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "websocket_endpoint", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 517, "message": "Received WebSocket message: {'type': 'ping', 'clientTime': '2025-08-21T12:05:18.181Z'}", "module": "live", "name": "app.ws.live", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:35:18.181888+05:30", "timestamp": 1755777918.181888}}}
{"text": "2025-08-21 17:35:18.886 | INFO     | app.ws.live:connect:226 - WebSocket connected: 127.0.0.1\n", "record": {"elapsed": {"repr": "0:00:44.113933", "seconds": 44.113933}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "connect", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 226, "message": "WebSocket connected: 127.0.0.1", "module": "live", "name": "app.ws.live", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:35:18.886887+05:30", "timestamp": 1755777918.886887}}}
{"text": "2025-08-21 17:35:18.911 | INFO     | app.ws.live:connect:226 - WebSocket connected: 127.0.0.1\n", "record": {"elapsed": {"repr": "0:00:44.138566", "seconds": 44.138566}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "connect", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 226, "message": "WebSocket connected: 127.0.0.1", "module": "live", "name": "app.ws.live", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:35:18.911520+05:30", "timestamp": 1755777918.91152}}}
{"text": "2025-08-21 17:35:18.937 | INFO     | app.ws.live:connect:226 - WebSocket connected: 127.0.0.1\n", "record": {"elapsed": {"repr": "0:00:44.164590", "seconds": 44.16459}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "connect", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 226, "message": "WebSocket connected: 127.0.0.1", "module": "live", "name": "app.ws.live", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:35:18.937544+05:30", "timestamp": 1755777918.937544}}}
{"text": "2025-08-21 17:35:19.007 | INFO     | app.ws.live:connect:226 - WebSocket connected: 127.0.0.1\n", "record": {"elapsed": {"repr": "0:00:44.234701", "seconds": 44.234701}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "connect", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 226, "message": "WebSocket connected: 127.0.0.1", "module": "live", "name": "app.ws.live", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:35:19.007655+05:30", "timestamp": 1755777919.007655}}}
{"text": "2025-08-21 17:35:19.031 | INFO     | app.ws.live:connect:226 - WebSocket connected: 127.0.0.1\n", "record": {"elapsed": {"repr": "0:00:44.258260", "seconds": 44.25826}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "connect", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 226, "message": "WebSocket connected: 127.0.0.1", "module": "live", "name": "app.ws.live", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:35:19.031214+05:30", "timestamp": 1755777919.031214}}}
{"text": "2025-08-21 17:35:19.054 | INFO     | app.ws.live:connect:226 - WebSocket connected: 127.0.0.1\n", "record": {"elapsed": {"repr": "0:00:44.281195", "seconds": 44.281195}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "connect", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 226, "message": "WebSocket connected: 127.0.0.1", "module": "live", "name": "app.ws.live", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:35:19.054149+05:30", "timestamp": 1755777919.054149}}}
{"text": "2025-08-21 17:35:19.142 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:44.369169", "seconds": 44.369169}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 22636, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 17:35:19.142123+05:30", "timestamp": 1755777919.142123}}}
{"text": "2025-08-21 17:35:19.143 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:44.370359", "seconds": 44.370359}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 22636, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 17:35:19.143313+05:30", "timestamp": 1755777919.143313}}}
{"text": "2025-08-21 17:35:19.144 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:44.371217", "seconds": 44.371217}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 22636, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 17:35:19.144171+05:30", "timestamp": 1755777919.144171}}}
{"text": "2025-08-21 17:35:19.145 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:44.372113", "seconds": 44.372113}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 22636, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 17:35:19.145067+05:30", "timestamp": 1755777919.145067}}}
{"text": "2025-08-21 17:35:19.145 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:44.372976", "seconds": 44.372976}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 22636, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 17:35:19.145930+05:30", "timestamp": 1755777919.14593}}}
{"text": "2025-08-21 17:35:19.146 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:44.373865", "seconds": 44.373865}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 22636, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 17:35:19.146819+05:30", "timestamp": 1755777919.146819}}}
{"text": "2025-08-21 17:35:19.147 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:44.374795", "seconds": 44.374795}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 22636, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 17:35:19.147749+05:30", "timestamp": 1755777919.147749}}}
{"text": "2025-08-21 17:35:19.148 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:44.375844", "seconds": 44.375844}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 22636, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 17:35:19.148798+05:30", "timestamp": 1755777919.148798}}}
{"text": "2025-08-21 17:35:19.149 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:44.377036", "seconds": 44.377036}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 22636, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 17:35:19.149990+05:30", "timestamp": 1755777919.14999}}}
{"text": "2025-08-21 17:35:19.151 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:44.378324", "seconds": 44.378324}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 22636, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 17:35:19.151278+05:30", "timestamp": 1755777919.151278}}}
{"text": "2025-08-21 17:35:19.249 | INFO     | app.ws.live:connect:226 - WebSocket connected: 127.0.0.1\n", "record": {"elapsed": {"repr": "0:00:44.476893", "seconds": 44.476893}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "connect", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 226, "message": "WebSocket connected: 127.0.0.1", "module": "live", "name": "app.ws.live", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:35:19.249847+05:30", "timestamp": 1755777919.249847}}}
{"text": "2025-08-21 17:35:19.317 | INFO     | app.ws.live:connect:226 - WebSocket connected: 127.0.0.1\n", "record": {"elapsed": {"repr": "0:00:44.544335", "seconds": 44.544335}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "connect", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 226, "message": "WebSocket connected: 127.0.0.1", "module": "live", "name": "app.ws.live", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:35:19.317289+05:30", "timestamp": 1755777919.317289}}}
{"text": "2025-08-21 17:35:19.335 | INFO     | app.ws.live:connect:226 - WebSocket connected: 127.0.0.1\n", "record": {"elapsed": {"repr": "0:00:44.562923", "seconds": 44.562923}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "connect", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 226, "message": "WebSocket connected: 127.0.0.1", "module": "live", "name": "app.ws.live", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:35:19.335877+05:30", "timestamp": 1755777919.335877}}}
{"text": "2025-08-21 17:35:19.469 | INFO     | app.ws.live:connect:226 - WebSocket connected: 127.0.0.1\n", "record": {"elapsed": {"repr": "0:00:44.696166", "seconds": 44.696166}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "connect", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 226, "message": "WebSocket connected: 127.0.0.1", "module": "live", "name": "app.ws.live", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:35:19.469120+05:30", "timestamp": 1755777919.46912}}}
{"text": "2025-08-21 17:35:19.487 | INFO     | app.ws.live:connect:226 - WebSocket connected: 127.0.0.1\n", "record": {"elapsed": {"repr": "0:00:44.714874", "seconds": 44.714874}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "connect", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 226, "message": "WebSocket connected: 127.0.0.1", "module": "live", "name": "app.ws.live", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:35:19.487828+05:30", "timestamp": 1755777919.487828}}}
{"text": "2025-08-21 17:35:19.512 | INFO     | app.ws.live:connect:226 - WebSocket connected: 127.0.0.1\n", "record": {"elapsed": {"repr": "0:00:44.739955", "seconds": 44.739955}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "connect", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 226, "message": "WebSocket connected: 127.0.0.1", "module": "live", "name": "app.ws.live", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:35:19.512909+05:30", "timestamp": 1755777919.512909}}}
{"text": "2025-08-21 17:35:19.543 | INFO     | app.services.dhan_client:get_pnl:489 - Starting accurate P&L calculation\n", "record": {"elapsed": {"repr": "0:00:44.771032", "seconds": 44.771032}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 489, "message": "Starting accurate P&L calculation", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:35:19.543986+05:30", "timestamp": 1755777919.543986}}}
{"text": "2025-08-21 17:35:19.545 | INFO     | app.services.dhan_client:get_pnl:491 - Fetched 5 positions\n", "record": {"elapsed": {"repr": "0:00:44.772294", "seconds": 44.772294}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 491, "message": "Fetched 5 positions", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:35:19.545248+05:30", "timestamp": 1755777919.545248}}}
{"text": "2025-08-21 17:35:19.546 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for RELIANCE: unrealized=-1282037.71, today=-1282037.71\n", "record": {"elapsed": {"repr": "0:00:44.773694", "seconds": 44.773694}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for RELIANCE: unrealized=-1282037.71, today=-1282037.71", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:35:19.546648+05:30", "timestamp": 1755777919.546648}}}
{"text": "2025-08-21 17:35:19.547 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for TCS: unrealized=468473.32, today=468473.32\n", "record": {"elapsed": {"repr": "0:00:44.774970", "seconds": 44.77497}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for TCS: unrealized=468473.32, today=468473.32", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:35:19.547924+05:30", "timestamp": 1755777919.547924}}}
{"text": "2025-08-21 17:35:19.549 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for HDFC: unrealized=-130354.89, today=-130354.89\n", "record": {"elapsed": {"repr": "0:00:44.776349", "seconds": 44.776349}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for HDFC: unrealized=-130354.89, today=-130354.89", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:35:19.549303+05:30", "timestamp": 1755777919.549303}}}
{"text": "2025-08-21 17:35:19.551 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for INFY: unrealized=-2751170.55, today=-2751170.55\n", "record": {"elapsed": {"repr": "0:00:44.778538", "seconds": 44.778538}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for INFY: unrealized=-2751170.55, today=-2751170.55", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:35:19.551492+05:30", "timestamp": 1755777919.551492}}}
{"text": "2025-08-21 17:35:19.553 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for ICICIBANK: unrealized=-396034.55, today=-396034.55\n", "record": {"elapsed": {"repr": "0:00:44.780174", "seconds": 44.780174}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for ICICIBANK: unrealized=-396034.55, today=-396034.55", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:35:19.553128+05:30", "timestamp": 1755777919.553128}}}
{"text": "2025-08-21 17:35:19.554 | INFO     | app.services.dhan_client:get_pnl:545 - Calculated totals - realized: 0.0, unrealized: -4091124.38, day: -4091124.38\n", "record": {"elapsed": {"repr": "0:00:44.781637", "seconds": 44.781637}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 545, "message": "Calculated totals - realized: 0.0, unrealized: -4091124.38, day: -4091124.38", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:35:19.554591+05:30", "timestamp": 1755777919.554591}}}
{"text": "2025-08-21 17:35:19.555 | DEBUG    | app.services.dhan_client:get_pnl:554 - PnL consistency check passed: drift=‚Çπ0.00\n", "record": {"elapsed": {"repr": "0:00:44.783008", "seconds": 44.783008}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 554, "message": "PnL consistency check passed: drift=‚Çπ0.00", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:35:19.555962+05:30", "timestamp": 1755777919.555962}}}
{"text": "2025-08-21 17:35:19.557 | DEBUG    | app.services.dhan_client:get_pnl:558 - Creating PnLTotals...\n", "record": {"elapsed": {"repr": "0:00:44.784110", "seconds": 44.78411}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 558, "message": "Creating PnLTotals...", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:35:19.557064+05:30", "timestamp": 1755777919.557064}}}
{"text": "2025-08-21 17:35:19.560 | DEBUG    | app.services.dhan_client:get_pnl:565 - PnLTotals created successfully\n", "record": {"elapsed": {"repr": "0:00:44.787195", "seconds": 44.787195}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 565, "message": "PnLTotals created successfully", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:35:19.560149+05:30", "timestamp": 1755777919.560149}}}
{"text": "2025-08-21 17:35:19.561 | DEBUG    | app.services.dhan_client:get_pnl:574 - Creating PnL model...\n", "record": {"elapsed": {"repr": "0:00:44.788508", "seconds": 44.788508}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 574, "message": "Creating PnL model...", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:35:19.561462+05:30", "timestamp": 1755777919.561462}}}
{"text": "2025-08-21 17:35:19.562 | DEBUG    | app.services.dhan_client:get_pnl:575 - Model fields: totals=<class 'app.models.schemas.PnLTotals'>, perSymbol=5, updated_at=2025-08-21 17:35:19.546420+05:30, trading_day=2025-08-21\n", "record": {"elapsed": {"repr": "0:00:44.789861", "seconds": 44.789861}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 575, "message": "Model fields: totals=<class 'app.models.schemas.PnLTotals'>, perSymbol=5, updated_at=2025-08-21 17:35:19.546420+05:30, trading_day=2025-08-21", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:35:19.562815+05:30", "timestamp": 1755777919.562815}}}
{"text": "2025-08-21 17:35:19.564 | DEBUG    | app.services.dhan_client:get_pnl:584 - Created PnL model: totals=PnLTotals(realized=0.0, unrealized=-4091124.38, day=-4091124.38, currency='INR') per_symbol=[PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=913, avg=1944.27, ltp=540.07, unrealized=-1282037.71, today_pnl=-1282037.71), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=457, avg=1390.48, ltp=365.37, unrealized=468473.32, today_pnl=468473.32), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=196, avg=1021.99, ltp=356.91, unrealized=-130354.89, today_pnl=-130354.89), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=1708, avg=426.15, ltp=2036.91, unrealized=-2751170.55, today_pnl=-2751170.55), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=931, avg=756.68, ltp=331.29, unrealized=-396034.55, today_pnl=-396034.55)] updated_at=datetime.datetime(2025, 8, 21, 17, 35, 19, 546420, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))) trading_day='2025-08-21'\n", "record": {"elapsed": {"repr": "0:00:44.791907", "seconds": 44.791907}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 584, "message": "Created PnL model: totals=PnLTotals(realized=0.0, unrealized=-4091124.38, day=-4091124.38, currency='INR') per_symbol=[PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=913, avg=1944.27, ltp=540.07, unrealized=-1282037.71, today_pnl=-1282037.71), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=457, avg=1390.48, ltp=365.37, unrealized=468473.32, today_pnl=468473.32), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=196, avg=1021.99, ltp=356.91, unrealized=-130354.89, today_pnl=-130354.89), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=1708, avg=426.15, ltp=2036.91, unrealized=-2751170.55, today_pnl=-2751170.55), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=931, avg=756.68, ltp=331.29, unrealized=-396034.55, today_pnl=-396034.55)] updated_at=datetime.datetime(2025, 8, 21, 17, 35, 19, 546420, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))) trading_day='2025-08-21'", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:35:19.564861+05:30", "timestamp": 1755777919.564861}}}
{"text": "2025-08-21 17:35:19.568 | DEBUG    | app.services.dhan_client:get_pnl:585 - PnL model fields: {'totals': PnLTotals(realized=0.0, unrealized=-4091124.38, day=-4091124.38, currency='INR'), 'per_symbol': [PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=913, avg=1944.27, ltp=540.07, unrealized=-1282037.71, today_pnl=-1282037.71), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=457, avg=1390.48, ltp=365.37, unrealized=468473.32, today_pnl=468473.32), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=196, avg=1021.99, ltp=356.91, unrealized=-130354.89, today_pnl=-130354.89), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=1708, avg=426.15, ltp=2036.91, unrealized=-2751170.55, today_pnl=-2751170.55), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=931, avg=756.68, ltp=331.29, unrealized=-396034.55, today_pnl=-396034.55)], 'updated_at': datetime.datetime(2025, 8, 21, 17, 35, 19, 546420, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))), 'trading_day': '2025-08-21'}\n", "record": {"elapsed": {"repr": "0:00:44.795105", "seconds": 44.795105}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 585, "message": "PnL model fields: {'totals': PnLTotals(realized=0.0, unrealized=-4091124.38, day=-4091124.38, currency='INR'), 'per_symbol': [PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=913, avg=1944.27, ltp=540.07, unrealized=-1282037.71, today_pnl=-1282037.71), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=457, avg=1390.48, ltp=365.37, unrealized=468473.32, today_pnl=468473.32), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=196, avg=1021.99, ltp=356.91, unrealized=-130354.89, today_pnl=-130354.89), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=1708, avg=426.15, ltp=2036.91, unrealized=-2751170.55, today_pnl=-2751170.55), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=931, avg=756.68, ltp=331.29, unrealized=-396034.55, today_pnl=-396034.55)], 'updated_at': datetime.datetime(2025, 8, 21, 17, 35, 19, 546420, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))), 'trading_day': '2025-08-21'}", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:35:19.568059+05:30", "timestamp": 1755777919.568059}}}
{"text": "2025-08-21 17:35:19.571 | INFO     | app.services.dhan_client:get_pnl:587 - P&L calculation completed successfully: 5 symbols, unrealized=‚Çπ-4091124.38\n", "record": {"elapsed": {"repr": "0:00:44.798098", "seconds": 44.798098}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 587, "message": "P&L calculation completed successfully: 5 symbols, unrealized=‚Çπ-4091124.38", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:35:19.571052+05:30", "timestamp": 1755777919.571052}}}
{"text": "2025-08-21 17:35:19.572 | ERROR    | app.ws.live:broadcast:253 - Failed to broadcast to client: Object of type PnLTotals is not JSON serializable\n", "record": {"elapsed": {"repr": "0:00:44.800032", "seconds": 44.800032}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "broadcast", "level": {"icon": "‚ùå", "name": "ERROR", "no": 40}, "line": 253, "message": "Failed to broadcast to client: Object of type PnLTotals is not JSON serializable", "module": "live", "name": "app.ws.live", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:35:19.572986+05:30", "timestamp": 1755777919.572986}}}
{"text": "2025-08-21 17:35:19.574 | ERROR    | app.ws.live:broadcast:253 - Failed to broadcast to client: Object of type PnLTotals is not JSON serializable\n", "record": {"elapsed": {"repr": "0:00:44.801675", "seconds": 44.801675}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "broadcast", "level": {"icon": "‚ùå", "name": "ERROR", "no": 40}, "line": 253, "message": "Failed to broadcast to client: Object of type PnLTotals is not JSON serializable", "module": "live", "name": "app.ws.live", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:35:19.574629+05:30", "timestamp": 1755777919.574629}}}
{"text": "2025-08-21 17:35:19.577 | ERROR    | app.ws.live:broadcast:253 - Failed to broadcast to client: Object of type PnLTotals is not JSON serializable\n", "record": {"elapsed": {"repr": "0:00:44.804156", "seconds": 44.804156}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "broadcast", "level": {"icon": "‚ùå", "name": "ERROR", "no": 40}, "line": 253, "message": "Failed to broadcast to client: Object of type PnLTotals is not JSON serializable", "module": "live", "name": "app.ws.live", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:35:19.577110+05:30", "timestamp": 1755777919.57711}}}
{"text": "2025-08-21 17:35:19.578 | ERROR    | app.ws.live:broadcast:253 - Failed to broadcast to client: Object of type PnLTotals is not JSON serializable\n", "record": {"elapsed": {"repr": "0:00:44.805424", "seconds": 44.805424}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "broadcast", "level": {"icon": "‚ùå", "name": "ERROR", "no": 40}, "line": 253, "message": "Failed to broadcast to client: Object of type PnLTotals is not JSON serializable", "module": "live", "name": "app.ws.live", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:35:19.578378+05:30", "timestamp": 1755777919.578378}}}
{"text": "2025-08-21 17:35:19.579 | ERROR    | app.ws.live:broadcast:253 - Failed to broadcast to client: Object of type PnLTotals is not JSON serializable\n", "record": {"elapsed": {"repr": "0:00:44.806927", "seconds": 44.806927}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "broadcast", "level": {"icon": "‚ùå", "name": "ERROR", "no": 40}, "line": 253, "message": "Failed to broadcast to client: Object of type PnLTotals is not JSON serializable", "module": "live", "name": "app.ws.live", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:35:19.579881+05:30", "timestamp": 1755777919.579881}}}
{"text": "2025-08-21 17:35:19.581 | ERROR    | app.ws.live:broadcast:253 - Failed to broadcast to client: Object of type PnLTotals is not JSON serializable\n", "record": {"elapsed": {"repr": "0:00:44.808142", "seconds": 44.808142}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "broadcast", "level": {"icon": "‚ùå", "name": "ERROR", "no": 40}, "line": 253, "message": "Failed to broadcast to client: Object of type PnLTotals is not JSON serializable", "module": "live", "name": "app.ws.live", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:35:19.581096+05:30", "timestamp": 1755777919.581096}}}
{"text": "2025-08-21 17:35:19.582 | ERROR    | app.ws.live:broadcast:253 - Failed to broadcast to client: Object of type PnLTotals is not JSON serializable\n", "record": {"elapsed": {"repr": "0:00:44.809285", "seconds": 44.809285}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "broadcast", "level": {"icon": "‚ùå", "name": "ERROR", "no": 40}, "line": 253, "message": "Failed to broadcast to client: Object of type PnLTotals is not JSON serializable", "module": "live", "name": "app.ws.live", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:35:19.582239+05:30", "timestamp": 1755777919.582239}}}
{"text": "2025-08-21 17:35:19.583 | ERROR    | app.ws.live:broadcast:253 - Failed to broadcast to client: Object of type PnLTotals is not JSON serializable\n", "record": {"elapsed": {"repr": "0:00:44.810611", "seconds": 44.810611}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "broadcast", "level": {"icon": "‚ùå", "name": "ERROR", "no": 40}, "line": 253, "message": "Failed to broadcast to client: Object of type PnLTotals is not JSON serializable", "module": "live", "name": "app.ws.live", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:35:19.583565+05:30", "timestamp": 1755777919.583565}}}
{"text": "2025-08-21 17:35:19.585 | ERROR    | app.ws.live:broadcast:253 - Failed to broadcast to client: Object of type PnLTotals is not JSON serializable\n", "record": {"elapsed": {"repr": "0:00:44.812331", "seconds": 44.812331}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "broadcast", "level": {"icon": "‚ùå", "name": "ERROR", "no": 40}, "line": 253, "message": "Failed to broadcast to client: Object of type PnLTotals is not JSON serializable", "module": "live", "name": "app.ws.live", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:35:19.585285+05:30", "timestamp": 1755777919.585285}}}
{"text": "2025-08-21 17:35:19.586 | ERROR    | app.ws.live:broadcast:253 - Failed to broadcast to client: Object of type PnLTotals is not JSON serializable\n", "record": {"elapsed": {"repr": "0:00:44.813553", "seconds": 44.813553}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "broadcast", "level": {"icon": "‚ùå", "name": "ERROR", "no": 40}, "line": 253, "message": "Failed to broadcast to client: Object of type PnLTotals is not JSON serializable", "module": "live", "name": "app.ws.live", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:35:19.586507+05:30", "timestamp": 1755777919.586507}}}
{"text": "2025-08-21 17:35:19.588 | ERROR    | app.ws.live:broadcast:253 - Failed to broadcast to client: Object of type PnLTotals is not JSON serializable\n", "record": {"elapsed": {"repr": "0:00:44.815530", "seconds": 44.81553}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "broadcast", "level": {"icon": "‚ùå", "name": "ERROR", "no": 40}, "line": 253, "message": "Failed to broadcast to client: Object of type PnLTotals is not JSON serializable", "module": "live", "name": "app.ws.live", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:35:19.588484+05:30", "timestamp": 1755777919.588484}}}
{"text": "2025-08-21 17:35:19.589 | ERROR    | app.ws.live:broadcast:253 - Failed to broadcast to client: Object of type PnLTotals is not JSON serializable\n", "record": {"elapsed": {"repr": "0:00:44.816790", "seconds": 44.81679}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "broadcast", "level": {"icon": "‚ùå", "name": "ERROR", "no": 40}, "line": 253, "message": "Failed to broadcast to client: Object of type PnLTotals is not JSON serializable", "module": "live", "name": "app.ws.live", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:35:19.589744+05:30", "timestamp": 1755777919.589744}}}
{"text": "2025-08-21 17:35:19.591 | INFO     | app.ws.live:disconnect:234 - WebSocket disconnected: 127.0.0.1\n", "record": {"elapsed": {"repr": "0:00:44.818329", "seconds": 44.818329}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "disconnect", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 234, "message": "WebSocket disconnected: 127.0.0.1", "module": "live", "name": "app.ws.live", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:35:19.591283+05:30", "timestamp": 1755777919.591283}}}
{"text": "2025-08-21 17:35:19.593 | INFO     | app.ws.live:disconnect:234 - WebSocket disconnected: 127.0.0.1\n", "record": {"elapsed": {"repr": "0:00:44.820319", "seconds": 44.820319}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "disconnect", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 234, "message": "WebSocket disconnected: 127.0.0.1", "module": "live", "name": "app.ws.live", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:35:19.593273+05:30", "timestamp": 1755777919.593273}}}
{"text": "2025-08-21 17:35:19.594 | INFO     | app.ws.live:disconnect:234 - WebSocket disconnected: 127.0.0.1\n", "record": {"elapsed": {"repr": "0:00:44.821689", "seconds": 44.821689}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "disconnect", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 234, "message": "WebSocket disconnected: 127.0.0.1", "module": "live", "name": "app.ws.live", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:35:19.594643+05:30", "timestamp": 1755777919.594643}}}
{"text": "2025-08-21 17:35:19.596 | INFO     | app.ws.live:disconnect:234 - WebSocket disconnected: 127.0.0.1\n", "record": {"elapsed": {"repr": "0:00:44.823216", "seconds": 44.823216}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "disconnect", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 234, "message": "WebSocket disconnected: 127.0.0.1", "module": "live", "name": "app.ws.live", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:35:19.596170+05:30", "timestamp": 1755777919.59617}}}
{"text": "2025-08-21 17:35:19.597 | INFO     | app.ws.live:disconnect:234 - WebSocket disconnected: 127.0.0.1\n", "record": {"elapsed": {"repr": "0:00:44.824489", "seconds": 44.824489}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "disconnect", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 234, "message": "WebSocket disconnected: 127.0.0.1", "module": "live", "name": "app.ws.live", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:35:19.597443+05:30", "timestamp": 1755777919.597443}}}
{"text": "2025-08-21 17:35:19.598 | INFO     | app.ws.live:disconnect:234 - WebSocket disconnected: 127.0.0.1\n", "record": {"elapsed": {"repr": "0:00:44.825396", "seconds": 44.825396}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "disconnect", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 234, "message": "WebSocket disconnected: 127.0.0.1", "module": "live", "name": "app.ws.live", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:35:19.598350+05:30", "timestamp": 1755777919.59835}}}
{"text": "2025-08-21 17:35:19.599 | INFO     | app.ws.live:disconnect:234 - WebSocket disconnected: 127.0.0.1\n", "record": {"elapsed": {"repr": "0:00:44.826532", "seconds": 44.826532}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "disconnect", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 234, "message": "WebSocket disconnected: 127.0.0.1", "module": "live", "name": "app.ws.live", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:35:19.599486+05:30", "timestamp": 1755777919.599486}}}
{"text": "2025-08-21 17:35:19.601 | INFO     | app.ws.live:disconnect:234 - WebSocket disconnected: 127.0.0.1\n", "record": {"elapsed": {"repr": "0:00:44.828651", "seconds": 44.828651}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "disconnect", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 234, "message": "WebSocket disconnected: 127.0.0.1", "module": "live", "name": "app.ws.live", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:35:19.601605+05:30", "timestamp": 1755777919.601605}}}
{"text": "2025-08-21 17:35:19.603 | INFO     | app.ws.live:disconnect:234 - WebSocket disconnected: 127.0.0.1\n", "record": {"elapsed": {"repr": "0:00:44.830458", "seconds": 44.830458}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "disconnect", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 234, "message": "WebSocket disconnected: 127.0.0.1", "module": "live", "name": "app.ws.live", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:35:19.603412+05:30", "timestamp": 1755777919.603412}}}
{"text": "2025-08-21 17:35:19.604 | INFO     | app.ws.live:disconnect:234 - WebSocket disconnected: 127.0.0.1\n", "record": {"elapsed": {"repr": "0:00:44.831529", "seconds": 44.831529}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "disconnect", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 234, "message": "WebSocket disconnected: 127.0.0.1", "module": "live", "name": "app.ws.live", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:35:19.604483+05:30", "timestamp": 1755777919.604483}}}
{"text": "2025-08-21 17:35:19.605 | INFO     | app.ws.live:disconnect:234 - WebSocket disconnected: 127.0.0.1\n", "record": {"elapsed": {"repr": "0:00:44.832864", "seconds": 44.832864}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "disconnect", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 234, "message": "WebSocket disconnected: 127.0.0.1", "module": "live", "name": "app.ws.live", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:35:19.605818+05:30", "timestamp": 1755777919.605818}}}
{"text": "2025-08-21 17:35:19.606 | INFO     | app.ws.live:disconnect:234 - WebSocket disconnected: 127.0.0.1\n", "record": {"elapsed": {"repr": "0:00:44.833921", "seconds": 44.833921}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "disconnect", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 234, "message": "WebSocket disconnected: 127.0.0.1", "module": "live", "name": "app.ws.live", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:35:19.606875+05:30", "timestamp": 1755777919.606875}}}
{"text": "2025-08-21 17:35:19.609 | DEBUG    | app.ws.live:emit_delta:408 - Emitted pnl delta: seq=50\n", "record": {"elapsed": {"repr": "0:00:44.836420", "seconds": 44.83642}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "emit_delta", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 408, "message": "Emitted pnl delta: seq=50", "module": "live", "name": "app.ws.live", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:35:19.609374+05:30", "timestamp": 1755777919.609374}}}
{"text": "2025-08-21 17:35:19.611 | DEBUG    | app.ws.live:emit_delta:408 - Emitted positions delta: seq=51\n", "record": {"elapsed": {"repr": "0:00:44.838789", "seconds": 44.838789}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "emit_delta", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 408, "message": "Emitted positions delta: seq=51", "module": "live", "name": "app.ws.live", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:35:19.611743+05:30", "timestamp": 1755777919.611743}}}
{"text": "2025-08-21 17:35:19.621 | INFO     | app.ws.live:connect:226 - WebSocket connected: 127.0.0.1\n", "record": {"elapsed": {"repr": "0:00:44.848455", "seconds": 44.848455}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "connect", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 226, "message": "WebSocket connected: 127.0.0.1", "module": "live", "name": "app.ws.live", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:35:19.621409+05:30", "timestamp": 1755777919.621409}}}
{"text": "2025-08-21 17:35:19.645 | INFO     | app.ws.live:connect:226 - WebSocket connected: 127.0.0.1\n", "record": {"elapsed": {"repr": "0:00:44.872724", "seconds": 44.872724}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "connect", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 226, "message": "WebSocket connected: 127.0.0.1", "module": "live", "name": "app.ws.live", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:35:19.645678+05:30", "timestamp": 1755777919.645678}}}
{"text": "2025-08-21 17:35:19.669 | INFO     | app.ws.live:connect:226 - WebSocket connected: 127.0.0.1\n", "record": {"elapsed": {"repr": "0:00:44.896662", "seconds": 44.896662}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "connect", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 226, "message": "WebSocket connected: 127.0.0.1", "module": "live", "name": "app.ws.live", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:35:19.669616+05:30", "timestamp": 1755777919.669616}}}
{"text": "2025-08-21 17:35:19.687 | INFO     | app.ws.live:connect:226 - WebSocket connected: 127.0.0.1\n", "record": {"elapsed": {"repr": "0:00:44.914298", "seconds": 44.914298}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "connect", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 226, "message": "WebSocket connected: 127.0.0.1", "module": "live", "name": "app.ws.live", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:35:19.687252+05:30", "timestamp": 1755777919.687252}}}
{"text": "2025-08-21 17:35:19.714 | INFO     | app.ws.live:connect:226 - WebSocket connected: 127.0.0.1\n", "record": {"elapsed": {"repr": "0:00:44.941409", "seconds": 44.941409}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "connect", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 226, "message": "WebSocket connected: 127.0.0.1", "module": "live", "name": "app.ws.live", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:35:19.714363+05:30", "timestamp": 1755777919.714363}}}
{"text": "2025-08-21 17:35:19.882 | INFO     | app.ws.live:connect:226 - WebSocket connected: 127.0.0.1\n", "record": {"elapsed": {"repr": "0:00:45.109284", "seconds": 45.109284}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "connect", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 226, "message": "WebSocket connected: 127.0.0.1", "module": "live", "name": "app.ws.live", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:35:19.882238+05:30", "timestamp": 1755777919.882238}}}
{"text": "2025-08-21 17:35:19.900 | INFO     | app.ws.live:connect:226 - WebSocket connected: 127.0.0.1\n", "record": {"elapsed": {"repr": "0:00:45.127408", "seconds": 45.127408}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "connect", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 226, "message": "WebSocket connected: 127.0.0.1", "module": "live", "name": "app.ws.live", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:35:19.900362+05:30", "timestamp": 1755777919.900362}}}
{"text": "2025-08-21 17:35:19.915 | INFO     | app.ws.live:connect:226 - WebSocket connected: 127.0.0.1\n", "record": {"elapsed": {"repr": "0:00:45.142773", "seconds": 45.142773}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "connect", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 226, "message": "WebSocket connected: 127.0.0.1", "module": "live", "name": "app.ws.live", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:35:19.915727+05:30", "timestamp": 1755777919.915727}}}
{"text": "2025-08-21 17:35:20.065 | INFO     | app.ws.live:connect:226 - WebSocket connected: 127.0.0.1\n", "record": {"elapsed": {"repr": "0:00:45.292927", "seconds": 45.292927}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "connect", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 226, "message": "WebSocket connected: 127.0.0.1", "module": "live", "name": "app.ws.live", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:35:20.065881+05:30", "timestamp": 1755777920.065881}}}
{"text": "2025-08-21 17:35:20.068 | DEBUG    | app.ws.live:websocket_endpoint:517 - Received WebSocket message: {'type': 'subscribe', 'channels': ['positions', 'orders', 'holdings', 'trades', 'pnl']}\n", "record": {"elapsed": {"repr": "0:00:45.295610", "seconds": 45.29561}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "websocket_endpoint", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 517, "message": "Received WebSocket message: {'type': 'subscribe', 'channels': ['positions', 'orders', 'holdings', 'trades', 'pnl']}", "module": "live", "name": "app.ws.live", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:35:20.068564+05:30", "timestamp": 1755777920.068564}}}
{"text": "2025-08-21 17:35:20.069 | INFO     | app.ws.live:handle_message:281 - Client 127.0.0.1 subscribed to: ['positions', 'orders', 'holdings', 'trades', 'pnl']\n", "record": {"elapsed": {"repr": "0:00:45.296959", "seconds": 45.296959}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "handle_message", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 281, "message": "Client 127.0.0.1 subscribed to: ['positions', 'orders', 'holdings', 'trades', 'pnl']", "module": "live", "name": "app.ws.live", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:35:20.069913+05:30", "timestamp": 1755777920.069913}}}
{"text": "2025-08-21 17:35:20.083 | INFO     | app.ws.live:connect:226 - WebSocket connected: 127.0.0.1\n", "record": {"elapsed": {"repr": "0:00:45.310130", "seconds": 45.31013}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "connect", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 226, "message": "WebSocket connected: 127.0.0.1", "module": "live", "name": "app.ws.live", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:35:20.083084+05:30", "timestamp": 1755777920.083084}}}
{"text": "2025-08-21 17:35:20.086 | DEBUG    | app.ws.live:websocket_endpoint:517 - Received WebSocket message: {'type': 'subscribe', 'channels': ['positions', 'orders', 'holdings', 'trades', 'pnl']}\n", "record": {"elapsed": {"repr": "0:00:45.313386", "seconds": 45.313386}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "websocket_endpoint", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 517, "message": "Received WebSocket message: {'type': 'subscribe', 'channels': ['positions', 'orders', 'holdings', 'trades', 'pnl']}", "module": "live", "name": "app.ws.live", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:35:20.086340+05:30", "timestamp": 1755777920.08634}}}
{"text": "2025-08-21 17:35:20.087 | INFO     | app.ws.live:handle_message:281 - Client 127.0.0.1 subscribed to: ['positions', 'orders', 'holdings', 'trades', 'pnl']\n", "record": {"elapsed": {"repr": "0:00:45.314839", "seconds": 45.314839}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "handle_message", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 281, "message": "Client 127.0.0.1 subscribed to: ['positions', 'orders', 'holdings', 'trades', 'pnl']", "module": "live", "name": "app.ws.live", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:35:20.087793+05:30", "timestamp": 1755777920.087793}}}
{"text": "2025-08-21 17:35:20.098 | INFO     | app.ws.live:connect:226 - WebSocket connected: 127.0.0.1\n", "record": {"elapsed": {"repr": "0:00:45.325827", "seconds": 45.325827}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "connect", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 226, "message": "WebSocket connected: 127.0.0.1", "module": "live", "name": "app.ws.live", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:35:20.098781+05:30", "timestamp": 1755777920.098781}}}
{"text": "2025-08-21 17:35:20.101 | DEBUG    | app.ws.live:websocket_endpoint:517 - Received WebSocket message: {'type': 'subscribe', 'channels': ['positions', 'orders', 'holdings', 'trades', 'pnl']}\n", "record": {"elapsed": {"repr": "0:00:45.329040", "seconds": 45.32904}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "websocket_endpoint", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 517, "message": "Received WebSocket message: {'type': 'subscribe', 'channels': ['positions', 'orders', 'holdings', 'trades', 'pnl']}", "module": "live", "name": "app.ws.live", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:35:20.101994+05:30", "timestamp": 1755777920.101994}}}
{"text": "2025-08-21 17:35:20.103 | INFO     | app.ws.live:handle_message:281 - Client 127.0.0.1 subscribed to: ['positions', 'orders', 'holdings', 'trades', 'pnl']\n", "record": {"elapsed": {"repr": "0:00:45.330200", "seconds": 45.3302}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "handle_message", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 281, "message": "Client 127.0.0.1 subscribed to: ['positions', 'orders', 'holdings', 'trades', 'pnl']", "module": "live", "name": "app.ws.live", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:35:20.103154+05:30", "timestamp": 1755777920.103154}}}
{"text": "2025-08-21 17:35:20.134 | ERROR    | app.ws.live:broadcast:253 - Failed to broadcast to client: Object of type Trade is not JSON serializable\n", "record": {"elapsed": {"repr": "0:00:45.361509", "seconds": 45.361509}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "broadcast", "level": {"icon": "‚ùå", "name": "ERROR", "no": 40}, "line": 253, "message": "Failed to broadcast to client: Object of type Trade is not JSON serializable", "module": "live", "name": "app.ws.live", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:35:20.134463+05:30", "timestamp": 1755777920.134463}}}
{"text": "2025-08-21 17:35:20.135 | ERROR    | app.ws.live:broadcast:253 - Failed to broadcast to client: Object of type Trade is not JSON serializable\n", "record": {"elapsed": {"repr": "0:00:45.362979", "seconds": 45.362979}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "broadcast", "level": {"icon": "‚ùå", "name": "ERROR", "no": 40}, "line": 253, "message": "Failed to broadcast to client: Object of type Trade is not JSON serializable", "module": "live", "name": "app.ws.live", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:35:20.135933+05:30", "timestamp": 1755777920.135933}}}
{"text": "2025-08-21 17:35:20.137 | ERROR    | app.ws.live:broadcast:253 - Failed to broadcast to client: Object of type Trade is not JSON serializable\n", "record": {"elapsed": {"repr": "0:00:45.364164", "seconds": 45.364164}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "broadcast", "level": {"icon": "‚ùå", "name": "ERROR", "no": 40}, "line": 253, "message": "Failed to broadcast to client: Object of type Trade is not JSON serializable", "module": "live", "name": "app.ws.live", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:35:20.137118+05:30", "timestamp": 1755777920.137118}}}
{"text": "2025-08-21 17:35:20.138 | ERROR    | app.ws.live:broadcast:253 - Failed to broadcast to client: Object of type Trade is not JSON serializable\n", "record": {"elapsed": {"repr": "0:00:45.365297", "seconds": 45.365297}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "broadcast", "level": {"icon": "‚ùå", "name": "ERROR", "no": 40}, "line": 253, "message": "Failed to broadcast to client: Object of type Trade is not JSON serializable", "module": "live", "name": "app.ws.live", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:35:20.138251+05:30", "timestamp": 1755777920.138251}}}
{"text": "2025-08-21 17:35:20.139 | ERROR    | app.ws.live:broadcast:253 - Failed to broadcast to client: Object of type Trade is not JSON serializable\n", "record": {"elapsed": {"repr": "0:00:45.366494", "seconds": 45.366494}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "broadcast", "level": {"icon": "‚ùå", "name": "ERROR", "no": 40}, "line": 253, "message": "Failed to broadcast to client: Object of type Trade is not JSON serializable", "module": "live", "name": "app.ws.live", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:35:20.139448+05:30", "timestamp": 1755777920.139448}}}
{"text": "2025-08-21 17:35:20.140 | ERROR    | app.ws.live:broadcast:253 - Failed to broadcast to client: Object of type Trade is not JSON serializable\n", "record": {"elapsed": {"repr": "0:00:45.367696", "seconds": 45.367696}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "broadcast", "level": {"icon": "‚ùå", "name": "ERROR", "no": 40}, "line": 253, "message": "Failed to broadcast to client: Object of type Trade is not JSON serializable", "module": "live", "name": "app.ws.live", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:35:20.140650+05:30", "timestamp": 1755777920.14065}}}
{"text": "2025-08-21 17:35:20.142 | ERROR    | app.ws.live:broadcast:253 - Failed to broadcast to client: Object of type Trade is not JSON serializable\n", "record": {"elapsed": {"repr": "0:00:45.369361", "seconds": 45.369361}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "broadcast", "level": {"icon": "‚ùå", "name": "ERROR", "no": 40}, "line": 253, "message": "Failed to broadcast to client: Object of type Trade is not JSON serializable", "module": "live", "name": "app.ws.live", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:35:20.142315+05:30", "timestamp": 1755777920.142315}}}
{"text": "2025-08-21 17:35:20.143 | ERROR    | app.ws.live:broadcast:253 - Failed to broadcast to client: Object of type Trade is not JSON serializable\n", "record": {"elapsed": {"repr": "0:00:45.370636", "seconds": 45.370636}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "broadcast", "level": {"icon": "‚ùå", "name": "ERROR", "no": 40}, "line": 253, "message": "Failed to broadcast to client: Object of type Trade is not JSON serializable", "module": "live", "name": "app.ws.live", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:35:20.143590+05:30", "timestamp": 1755777920.14359}}}
{"text": "2025-08-21 17:35:20.144 | ERROR    | app.ws.live:broadcast:253 - Failed to broadcast to client: Object of type Trade is not JSON serializable\n", "record": {"elapsed": {"repr": "0:00:45.371761", "seconds": 45.371761}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "broadcast", "level": {"icon": "‚ùå", "name": "ERROR", "no": 40}, "line": 253, "message": "Failed to broadcast to client: Object of type Trade is not JSON serializable", "module": "live", "name": "app.ws.live", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:35:20.144715+05:30", "timestamp": 1755777920.144715}}}
{"text": "2025-08-21 17:35:20.145 | ERROR    | app.ws.live:broadcast:253 - Failed to broadcast to client: Object of type Trade is not JSON serializable\n", "record": {"elapsed": {"repr": "0:00:45.372726", "seconds": 45.372726}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "broadcast", "level": {"icon": "‚ùå", "name": "ERROR", "no": 40}, "line": 253, "message": "Failed to broadcast to client: Object of type Trade is not JSON serializable", "module": "live", "name": "app.ws.live", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:35:20.145680+05:30", "timestamp": 1755777920.14568}}}
{"text": "2025-08-21 17:35:20.146 | ERROR    | app.ws.live:broadcast:253 - Failed to broadcast to client: Object of type Trade is not JSON serializable\n", "record": {"elapsed": {"repr": "0:00:45.373916", "seconds": 45.373916}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "broadcast", "level": {"icon": "‚ùå", "name": "ERROR", "no": 40}, "line": 253, "message": "Failed to broadcast to client: Object of type Trade is not JSON serializable", "module": "live", "name": "app.ws.live", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:35:20.146870+05:30", "timestamp": 1755777920.14687}}}
{"text": "2025-08-21 17:35:20.147 | INFO     | app.ws.live:disconnect:234 - WebSocket disconnected: 127.0.0.1\n", "record": {"elapsed": {"repr": "0:00:45.374899", "seconds": 45.374899}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "disconnect", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 234, "message": "WebSocket disconnected: 127.0.0.1", "module": "live", "name": "app.ws.live", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:35:20.147853+05:30", "timestamp": 1755777920.147853}}}
{"text": "2025-08-21 17:35:20.150 | INFO     | app.ws.live:disconnect:234 - WebSocket disconnected: 127.0.0.1\n", "record": {"elapsed": {"repr": "0:00:45.377072", "seconds": 45.377072}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "disconnect", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 234, "message": "WebSocket disconnected: 127.0.0.1", "module": "live", "name": "app.ws.live", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:35:20.150026+05:30", "timestamp": 1755777920.150026}}}
{"text": "2025-08-21 17:35:20.151 | INFO     | app.ws.live:disconnect:234 - WebSocket disconnected: 127.0.0.1\n", "record": {"elapsed": {"repr": "0:00:45.378287", "seconds": 45.378287}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "disconnect", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 234, "message": "WebSocket disconnected: 127.0.0.1", "module": "live", "name": "app.ws.live", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:35:20.151241+05:30", "timestamp": 1755777920.151241}}}
{"text": "2025-08-21 17:35:20.152 | INFO     | app.ws.live:disconnect:234 - WebSocket disconnected: 127.0.0.1\n", "record": {"elapsed": {"repr": "0:00:45.379404", "seconds": 45.379404}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "disconnect", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 234, "message": "WebSocket disconnected: 127.0.0.1", "module": "live", "name": "app.ws.live", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:35:20.152358+05:30", "timestamp": 1755777920.152358}}}
{"text": "2025-08-21 17:35:20.153 | INFO     | app.ws.live:disconnect:234 - WebSocket disconnected: 127.0.0.1\n", "record": {"elapsed": {"repr": "0:00:45.380441", "seconds": 45.380441}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "disconnect", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 234, "message": "WebSocket disconnected: 127.0.0.1", "module": "live", "name": "app.ws.live", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:35:20.153395+05:30", "timestamp": 1755777920.153395}}}
{"text": "2025-08-21 17:35:20.154 | INFO     | app.ws.live:disconnect:234 - WebSocket disconnected: 127.0.0.1\n", "record": {"elapsed": {"repr": "0:00:45.381489", "seconds": 45.381489}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "disconnect", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 234, "message": "WebSocket disconnected: 127.0.0.1", "module": "live", "name": "app.ws.live", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:35:20.154443+05:30", "timestamp": 1755777920.154443}}}
{"text": "2025-08-21 17:35:20.155 | INFO     | app.ws.live:disconnect:234 - WebSocket disconnected: 127.0.0.1\n", "record": {"elapsed": {"repr": "0:00:45.382657", "seconds": 45.382657}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "disconnect", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 234, "message": "WebSocket disconnected: 127.0.0.1", "module": "live", "name": "app.ws.live", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:35:20.155611+05:30", "timestamp": 1755777920.155611}}}
{"text": "2025-08-21 17:35:20.156 | INFO     | app.ws.live:disconnect:234 - WebSocket disconnected: 127.0.0.1\n", "record": {"elapsed": {"repr": "0:00:45.383658", "seconds": 45.383658}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "disconnect", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 234, "message": "WebSocket disconnected: 127.0.0.1", "module": "live", "name": "app.ws.live", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:35:20.156612+05:30", "timestamp": 1755777920.156612}}}
{"text": "2025-08-21 17:35:20.157 | INFO     | app.ws.live:disconnect:234 - WebSocket disconnected: 127.0.0.1\n", "record": {"elapsed": {"repr": "0:00:45.384946", "seconds": 45.384946}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "disconnect", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 234, "message": "WebSocket disconnected: 127.0.0.1", "module": "live", "name": "app.ws.live", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:35:20.157900+05:30", "timestamp": 1755777920.1579}}}
{"text": "2025-08-21 17:35:20.159 | INFO     | app.ws.live:disconnect:234 - WebSocket disconnected: 127.0.0.1\n", "record": {"elapsed": {"repr": "0:00:45.386718", "seconds": 45.386718}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "disconnect", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 234, "message": "WebSocket disconnected: 127.0.0.1", "module": "live", "name": "app.ws.live", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:35:20.159672+05:30", "timestamp": 1755777920.159672}}}
{"text": "2025-08-21 17:35:20.160 | INFO     | app.ws.live:disconnect:234 - WebSocket disconnected: 127.0.0.1\n", "record": {"elapsed": {"repr": "0:00:45.387872", "seconds": 45.387872}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "disconnect", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 234, "message": "WebSocket disconnected: 127.0.0.1", "module": "live", "name": "app.ws.live", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:35:20.160826+05:30", "timestamp": 1755777920.160826}}}
{"text": "2025-08-21 17:35:20.161 | DEBUG    | app.ws.live:emit_delta:408 - Emitted trades delta: seq=52\n", "record": {"elapsed": {"repr": "0:00:45.388882", "seconds": 45.388882}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "emit_delta", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 408, "message": "Emitted trades delta: seq=52", "module": "live", "name": "app.ws.live", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:35:20.161836+05:30", "timestamp": 1755777920.161836}}}
{"text": "2025-08-21 17:35:21.152 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:46.379762", "seconds": 46.379762}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 22636, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 17:35:21.152716+05:30", "timestamp": 1755777921.152716}}}
{"text": "2025-08-21 17:35:21.153 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:46.380880", "seconds": 46.38088}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 22636, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 17:35:21.153834+05:30", "timestamp": 1755777921.153834}}}
{"text": "2025-08-21 17:35:21.154 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:46.381860", "seconds": 46.38186}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 22636, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 17:35:21.154814+05:30", "timestamp": 1755777921.154814}}}
{"text": "2025-08-21 17:35:21.155 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:46.382757", "seconds": 46.382757}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 22636, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 17:35:21.155711+05:30", "timestamp": 1755777921.155711}}}
{"text": "2025-08-21 17:35:21.156 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:46.383994", "seconds": 46.383994}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 22636, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 17:35:21.156948+05:30", "timestamp": 1755777921.156948}}}
{"text": "2025-08-21 17:35:21.158 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:46.385167", "seconds": 46.385167}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 22636, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 17:35:21.158121+05:30", "timestamp": 1755777921.158121}}}
{"text": "2025-08-21 17:35:21.158 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:46.385942", "seconds": 46.385942}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 22636, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 17:35:21.158896+05:30", "timestamp": 1755777921.158896}}}
{"text": "2025-08-21 17:35:21.159 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:46.386973", "seconds": 46.386973}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 22636, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 17:35:21.159927+05:30", "timestamp": 1755777921.159927}}}
{"text": "2025-08-21 17:35:21.160 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:46.387832", "seconds": 46.387832}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 22636, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 17:35:21.160786+05:30", "timestamp": 1755777921.160786}}}
{"text": "2025-08-21 17:35:21.161 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:46.388694", "seconds": 46.388694}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 22636, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 17:35:21.161648+05:30", "timestamp": 1755777921.161648}}}
{"text": "2025-08-21 17:35:21.240 | INFO     | app.services.dhan_client:get_pnl:489 - Starting accurate P&L calculation\n", "record": {"elapsed": {"repr": "0:00:46.467518", "seconds": 46.467518}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 489, "message": "Starting accurate P&L calculation", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:35:21.240472+05:30", "timestamp": 1755777921.240472}}}
{"text": "2025-08-21 17:35:21.241 | INFO     | app.services.dhan_client:get_pnl:491 - Fetched 5 positions\n", "record": {"elapsed": {"repr": "0:00:46.468680", "seconds": 46.46868}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 491, "message": "Fetched 5 positions", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:35:21.241634+05:30", "timestamp": 1755777921.241634}}}
{"text": "2025-08-21 17:35:21.242 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for RELIANCE: unrealized=-1289014.87, today=-1289014.87\n", "record": {"elapsed": {"repr": "0:00:46.469622", "seconds": 46.469622}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for RELIANCE: unrealized=-1289014.87, today=-1289014.87", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:35:21.242576+05:30", "timestamp": 1755777921.242576}}}
{"text": "2025-08-21 17:35:21.243 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for TCS: unrealized=470132.93, today=470132.93\n", "record": {"elapsed": {"repr": "0:00:46.470665", "seconds": 46.470665}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for TCS: unrealized=470132.93, today=470132.93", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:35:21.243619+05:30", "timestamp": 1755777921.243619}}}
{"text": "2025-08-21 17:35:21.244 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for HDFC: unrealized=-131548.81, today=-131548.81\n", "record": {"elapsed": {"repr": "0:00:46.471598", "seconds": 46.471598}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for HDFC: unrealized=-131548.81, today=-131548.81", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:35:21.244552+05:30", "timestamp": 1755777921.244552}}}
{"text": "2025-08-21 17:35:21.245 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for INFY: unrealized=-2736159.84, today=-2736159.84\n", "record": {"elapsed": {"repr": "0:00:46.472372", "seconds": 46.472372}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for INFY: unrealized=-2736159.84, today=-2736159.84", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:35:21.245326+05:30", "timestamp": 1755777921.245326}}}
{"text": "2025-08-21 17:35:21.246 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for ICICIBANK: unrealized=-395774.81, today=-395774.81\n", "record": {"elapsed": {"repr": "0:00:46.473429", "seconds": 46.473429}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for ICICIBANK: unrealized=-395774.81, today=-395774.81", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:35:21.246383+05:30", "timestamp": 1755777921.246383}}}
{"text": "2025-08-21 17:35:21.247 | INFO     | app.services.dhan_client:get_pnl:545 - Calculated totals - realized: 0.0, unrealized: -4082365.4, day: -4082365.4\n", "record": {"elapsed": {"repr": "0:00:46.474245", "seconds": 46.474245}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 545, "message": "Calculated totals - realized: 0.0, unrealized: -4082365.4, day: -4082365.4", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:35:21.247199+05:30", "timestamp": 1755777921.247199}}}
{"text": "2025-08-21 17:35:21.248 | DEBUG    | app.services.dhan_client:get_pnl:554 - PnL consistency check passed: drift=‚Çπ0.00\n", "record": {"elapsed": {"repr": "0:00:46.475069", "seconds": 46.475069}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 554, "message": "PnL consistency check passed: drift=‚Çπ0.00", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:35:21.248023+05:30", "timestamp": 1755777921.248023}}}
{"text": "2025-08-21 17:35:21.249 | DEBUG    | app.services.dhan_client:get_pnl:558 - Creating PnLTotals...\n", "record": {"elapsed": {"repr": "0:00:46.476265", "seconds": 46.476265}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 558, "message": "Creating PnLTotals...", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:35:21.249219+05:30", "timestamp": 1755777921.249219}}}
{"text": "2025-08-21 17:35:21.250 | DEBUG    | app.services.dhan_client:get_pnl:565 - PnLTotals created successfully\n", "record": {"elapsed": {"repr": "0:00:46.477181", "seconds": 46.477181}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 565, "message": "PnLTotals created successfully", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:35:21.250135+05:30", "timestamp": 1755777921.250135}}}
{"text": "2025-08-21 17:35:21.251 | DEBUG    | app.services.dhan_client:get_pnl:574 - Creating PnL model...\n", "record": {"elapsed": {"repr": "0:00:46.478049", "seconds": 46.478049}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 574, "message": "Creating PnL model...", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:35:21.251003+05:30", "timestamp": 1755777921.251003}}}
{"text": "2025-08-21 17:35:21.251 | DEBUG    | app.services.dhan_client:get_pnl:575 - Model fields: totals=<class 'app.models.schemas.PnLTotals'>, perSymbol=5, updated_at=2025-08-21 17:35:21.242471+05:30, trading_day=2025-08-21\n", "record": {"elapsed": {"repr": "0:00:46.478948", "seconds": 46.478948}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 575, "message": "Model fields: totals=<class 'app.models.schemas.PnLTotals'>, perSymbol=5, updated_at=2025-08-21 17:35:21.242471+05:30, trading_day=2025-08-21", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:35:21.251902+05:30", "timestamp": 1755777921.251902}}}
{"text": "2025-08-21 17:35:21.253 | DEBUG    | app.services.dhan_client:get_pnl:584 - Created PnL model: totals=PnLTotals(realized=0.0, unrealized=-4082365.4, day=-4082365.4, currency='INR') per_symbol=[PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=913, avg=1944.27, ltp=532.42, unrealized=-1289014.87, today_pnl=-1289014.87), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=457, avg=1390.48, ltp=361.74, unrealized=470132.93, today_pnl=470132.93), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=196, avg=1021.99, ltp=350.82, unrealized=-131548.81, today_pnl=-131548.81), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=1708, avg=426.15, ltp=2028.12, unrealized=-2736159.84, today_pnl=-2736159.84), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=931, avg=756.68, ltp=331.57, unrealized=-395774.81, today_pnl=-395774.81)] updated_at=datetime.datetime(2025, 8, 21, 17, 35, 21, 242471, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))) trading_day='2025-08-21'\n", "record": {"elapsed": {"repr": "0:00:46.480398", "seconds": 46.480398}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 584, "message": "Created PnL model: totals=PnLTotals(realized=0.0, unrealized=-4082365.4, day=-4082365.4, currency='INR') per_symbol=[PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=913, avg=1944.27, ltp=532.42, unrealized=-1289014.87, today_pnl=-1289014.87), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=457, avg=1390.48, ltp=361.74, unrealized=470132.93, today_pnl=470132.93), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=196, avg=1021.99, ltp=350.82, unrealized=-131548.81, today_pnl=-131548.81), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=1708, avg=426.15, ltp=2028.12, unrealized=-2736159.84, today_pnl=-2736159.84), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=931, avg=756.68, ltp=331.57, unrealized=-395774.81, today_pnl=-395774.81)] updated_at=datetime.datetime(2025, 8, 21, 17, 35, 21, 242471, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))) trading_day='2025-08-21'", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:35:21.253352+05:30", "timestamp": 1755777921.253352}}}
{"text": "2025-08-21 17:35:21.254 | DEBUG    | app.services.dhan_client:get_pnl:585 - PnL model fields: {'totals': PnLTotals(realized=0.0, unrealized=-4082365.4, day=-4082365.4, currency='INR'), 'per_symbol': [PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=913, avg=1944.27, ltp=532.42, unrealized=-1289014.87, today_pnl=-1289014.87), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=457, avg=1390.48, ltp=361.74, unrealized=470132.93, today_pnl=470132.93), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=196, avg=1021.99, ltp=350.82, unrealized=-131548.81, today_pnl=-131548.81), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=1708, avg=426.15, ltp=2028.12, unrealized=-2736159.84, today_pnl=-2736159.84), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=931, avg=756.68, ltp=331.57, unrealized=-395774.81, today_pnl=-395774.81)], 'updated_at': datetime.datetime(2025, 8, 21, 17, 35, 21, 242471, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))), 'trading_day': '2025-08-21'}\n", "record": {"elapsed": {"repr": "0:00:46.482020", "seconds": 46.48202}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 585, "message": "PnL model fields: {'totals': PnLTotals(realized=0.0, unrealized=-4082365.4, day=-4082365.4, currency='INR'), 'per_symbol': [PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=913, avg=1944.27, ltp=532.42, unrealized=-1289014.87, today_pnl=-1289014.87), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=457, avg=1390.48, ltp=361.74, unrealized=470132.93, today_pnl=470132.93), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=196, avg=1021.99, ltp=350.82, unrealized=-131548.81, today_pnl=-131548.81), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=1708, avg=426.15, ltp=2028.12, unrealized=-2736159.84, today_pnl=-2736159.84), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=931, avg=756.68, ltp=331.57, unrealized=-395774.81, today_pnl=-395774.81)], 'updated_at': datetime.datetime(2025, 8, 21, 17, 35, 21, 242471, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))), 'trading_day': '2025-08-21'}", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:35:21.254974+05:30", "timestamp": 1755777921.254974}}}
{"text": "2025-08-21 17:35:21.256 | INFO     | app.services.dhan_client:get_pnl:587 - P&L calculation completed successfully: 5 symbols, unrealized=‚Çπ-4082365.40\n", "record": {"elapsed": {"repr": "0:00:46.483153", "seconds": 46.483153}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 587, "message": "P&L calculation completed successfully: 5 symbols, unrealized=‚Çπ-4082365.40", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:35:21.256107+05:30", "timestamp": 1755777921.256107}}}
{"text": "2025-08-21 17:35:21.257 | DEBUG    | app.ws.live:emit_delta:408 - Emitted pnl delta: seq=53\n", "record": {"elapsed": {"repr": "0:00:46.484715", "seconds": 46.484715}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "emit_delta", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 408, "message": "Emitted pnl delta: seq=53", "module": "live", "name": "app.ws.live", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:35:21.257669+05:30", "timestamp": 1755777921.257669}}}
{"text": "2025-08-21 17:35:21.259 | DEBUG    | app.ws.live:emit_delta:408 - Emitted positions delta: seq=54\n", "record": {"elapsed": {"repr": "0:00:46.486175", "seconds": 46.486175}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "emit_delta", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 408, "message": "Emitted positions delta: seq=54", "module": "live", "name": "app.ws.live", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:35:21.259129+05:30", "timestamp": 1755777921.259129}}}
{"text": "2025-08-21 17:35:23.163 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:48.390381", "seconds": 48.390381}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 22636, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 17:35:23.163335+05:30", "timestamp": 1755777923.163335}}}
{"text": "2025-08-21 17:35:23.165 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:48.392458", "seconds": 48.392458}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 22636, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 17:35:23.165412+05:30", "timestamp": 1755777923.165412}}}
{"text": "2025-08-21 17:35:23.166 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:48.394027", "seconds": 48.394027}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 22636, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 17:35:23.166981+05:30", "timestamp": 1755777923.166981}}}
{"text": "2025-08-21 17:35:23.168 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:48.395605", "seconds": 48.395605}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 22636, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 17:35:23.168559+05:30", "timestamp": 1755777923.168559}}}
{"text": "2025-08-21 17:35:23.170 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:48.397247", "seconds": 48.397247}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 22636, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 17:35:23.170201+05:30", "timestamp": 1755777923.170201}}}
{"text": "2025-08-21 17:35:23.171 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:48.398847", "seconds": 48.398847}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 22636, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 17:35:23.171801+05:30", "timestamp": 1755777923.171801}}}
{"text": "2025-08-21 17:35:23.173 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:48.400305", "seconds": 48.400305}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 22636, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 17:35:23.173259+05:30", "timestamp": 1755777923.173259}}}
{"text": "2025-08-21 17:35:23.175 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:48.402162", "seconds": 48.402162}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 22636, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 17:35:23.175116+05:30", "timestamp": 1755777923.175116}}}
{"text": "2025-08-21 17:35:23.177 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:48.404288", "seconds": 48.404288}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 22636, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 17:35:23.177242+05:30", "timestamp": 1755777923.177242}}}
{"text": "2025-08-21 17:35:23.178 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:48.405931", "seconds": 48.405931}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 22636, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 17:35:23.178885+05:30", "timestamp": 1755777923.178885}}}
{"text": "2025-08-21 17:35:23.223 | INFO     | app.services.dhan_client:get_pnl:489 - Starting accurate P&L calculation\n", "record": {"elapsed": {"repr": "0:00:48.450640", "seconds": 48.45064}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 489, "message": "Starting accurate P&L calculation", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:35:23.223594+05:30", "timestamp": 1755777923.223594}}}
{"text": "2025-08-21 17:35:23.225 | INFO     | app.services.dhan_client:get_pnl:491 - Fetched 5 positions\n", "record": {"elapsed": {"repr": "0:00:48.452251", "seconds": 48.452251}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 491, "message": "Fetched 5 positions", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:35:23.225205+05:30", "timestamp": 1755777923.225205}}}
{"text": "2025-08-21 17:35:23.226 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for RELIANCE: unrealized=-1293456.89, today=-1293456.89\n", "record": {"elapsed": {"repr": "0:00:48.453998", "seconds": 48.453998}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for RELIANCE: unrealized=-1293456.89, today=-1293456.89", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:35:23.226952+05:30", "timestamp": 1755777923.226952}}}
{"text": "2025-08-21 17:35:23.228 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for TCS: unrealized=473231.45, today=473231.45\n", "record": {"elapsed": {"repr": "0:00:48.455512", "seconds": 48.455512}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for TCS: unrealized=473231.45, today=473231.45", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:35:23.228466+05:30", "timestamp": 1755777923.228466}}}
{"text": "2025-08-21 17:35:23.229 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for HDFC: unrealized=-130352.37, today=-130352.37\n", "record": {"elapsed": {"repr": "0:00:48.457040", "seconds": 48.45704}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for HDFC: unrealized=-130352.37, today=-130352.37", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:35:23.229994+05:30", "timestamp": 1755777923.229994}}}
{"text": "2025-08-21 17:35:23.231 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for INFY: unrealized=-2757785.79, today=-2757785.79\n", "record": {"elapsed": {"repr": "0:00:48.458984", "seconds": 48.458984}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for INFY: unrealized=-2757785.79, today=-2757785.79", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:35:23.231938+05:30", "timestamp": 1755777923.231938}}}
{"text": "2025-08-21 17:35:23.233 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for ICICIBANK: unrealized=-391798.29, today=-391798.29\n", "record": {"elapsed": {"repr": "0:00:48.460515", "seconds": 48.460515}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for ICICIBANK: unrealized=-391798.29, today=-391798.29", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:35:23.233469+05:30", "timestamp": 1755777923.233469}}}
{"text": "2025-08-21 17:35:23.234 | INFO     | app.services.dhan_client:get_pnl:545 - Calculated totals - realized: 0.0, unrealized: -4100161.89, day: -4100161.89\n", "record": {"elapsed": {"repr": "0:00:48.461929", "seconds": 48.461929}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 545, "message": "Calculated totals - realized: 0.0, unrealized: -4100161.89, day: -4100161.89", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:35:23.234883+05:30", "timestamp": 1755777923.234883}}}
{"text": "2025-08-21 17:35:23.236 | DEBUG    | app.services.dhan_client:get_pnl:554 - PnL consistency check passed: drift=‚Çπ0.00\n", "record": {"elapsed": {"repr": "0:00:48.463520", "seconds": 48.46352}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 554, "message": "PnL consistency check passed: drift=‚Çπ0.00", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:35:23.236474+05:30", "timestamp": 1755777923.236474}}}
{"text": "2025-08-21 17:35:23.238 | DEBUG    | app.services.dhan_client:get_pnl:558 - Creating PnLTotals...\n", "record": {"elapsed": {"repr": "0:00:48.465152", "seconds": 48.465152}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 558, "message": "Creating PnLTotals...", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:35:23.238106+05:30", "timestamp": 1755777923.238106}}}
{"text": "2025-08-21 17:35:23.239 | DEBUG    | app.services.dhan_client:get_pnl:565 - PnLTotals created successfully\n", "record": {"elapsed": {"repr": "0:00:48.466873", "seconds": 48.466873}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 565, "message": "PnLTotals created successfully", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:35:23.239827+05:30", "timestamp": 1755777923.239827}}}
{"text": "2025-08-21 17:35:23.241 | DEBUG    | app.services.dhan_client:get_pnl:574 - Creating PnL model...\n", "record": {"elapsed": {"repr": "0:00:48.468437", "seconds": 48.468437}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 574, "message": "Creating PnL model...", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:35:23.241391+05:30", "timestamp": 1755777923.241391}}}
{"text": "2025-08-21 17:35:23.242 | DEBUG    | app.services.dhan_client:get_pnl:575 - Model fields: totals=<class 'app.models.schemas.PnLTotals'>, perSymbol=5, updated_at=2025-08-21 17:35:23.226721+05:30, trading_day=2025-08-21\n", "record": {"elapsed": {"repr": "0:00:48.469913", "seconds": 48.469913}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 575, "message": "Model fields: totals=<class 'app.models.schemas.PnLTotals'>, perSymbol=5, updated_at=2025-08-21 17:35:23.226721+05:30, trading_day=2025-08-21", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:35:23.242867+05:30", "timestamp": 1755777923.242867}}}
{"text": "2025-08-21 17:35:23.245 | DEBUG    | app.services.dhan_client:get_pnl:584 - Created PnL model: totals=PnLTotals(realized=0.0, unrealized=-4100161.89, day=-4100161.89, currency='INR') per_symbol=[PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=913, avg=1944.27, ltp=527.56, unrealized=-1293456.89, today_pnl=-1293456.89), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=457, avg=1390.48, ltp=354.96, unrealized=473231.45, today_pnl=473231.45), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=196, avg=1021.99, ltp=356.93, unrealized=-130352.37, today_pnl=-130352.37), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=1708, avg=426.15, ltp=2040.78, unrealized=-2757785.79, today_pnl=-2757785.79), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=931, avg=756.68, ltp=335.84, unrealized=-391798.29, today_pnl=-391798.29)] updated_at=datetime.datetime(2025, 8, 21, 17, 35, 23, 226721, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))) trading_day='2025-08-21'\n", "record": {"elapsed": {"repr": "0:00:48.472180", "seconds": 48.47218}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 584, "message": "Created PnL model: totals=PnLTotals(realized=0.0, unrealized=-4100161.89, day=-4100161.89, currency='INR') per_symbol=[PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=913, avg=1944.27, ltp=527.56, unrealized=-1293456.89, today_pnl=-1293456.89), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=457, avg=1390.48, ltp=354.96, unrealized=473231.45, today_pnl=473231.45), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=196, avg=1021.99, ltp=356.93, unrealized=-130352.37, today_pnl=-130352.37), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=1708, avg=426.15, ltp=2040.78, unrealized=-2757785.79, today_pnl=-2757785.79), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=931, avg=756.68, ltp=335.84, unrealized=-391798.29, today_pnl=-391798.29)] updated_at=datetime.datetime(2025, 8, 21, 17, 35, 23, 226721, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))) trading_day='2025-08-21'", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:35:23.245134+05:30", "timestamp": 1755777923.245134}}}
{"text": "2025-08-21 17:35:23.248 | DEBUG    | app.services.dhan_client:get_pnl:585 - PnL model fields: {'totals': PnLTotals(realized=0.0, unrealized=-4100161.89, day=-4100161.89, currency='INR'), 'per_symbol': [PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=913, avg=1944.27, ltp=527.56, unrealized=-1293456.89, today_pnl=-1293456.89), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=457, avg=1390.48, ltp=354.96, unrealized=473231.45, today_pnl=473231.45), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=196, avg=1021.99, ltp=356.93, unrealized=-130352.37, today_pnl=-130352.37), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=1708, avg=426.15, ltp=2040.78, unrealized=-2757785.79, today_pnl=-2757785.79), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=931, avg=756.68, ltp=335.84, unrealized=-391798.29, today_pnl=-391798.29)], 'updated_at': datetime.datetime(2025, 8, 21, 17, 35, 23, 226721, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))), 'trading_day': '2025-08-21'}\n", "record": {"elapsed": {"repr": "0:00:48.475480", "seconds": 48.47548}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 585, "message": "PnL model fields: {'totals': PnLTotals(realized=0.0, unrealized=-4100161.89, day=-4100161.89, currency='INR'), 'per_symbol': [PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=913, avg=1944.27, ltp=527.56, unrealized=-1293456.89, today_pnl=-1293456.89), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=457, avg=1390.48, ltp=354.96, unrealized=473231.45, today_pnl=473231.45), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=196, avg=1021.99, ltp=356.93, unrealized=-130352.37, today_pnl=-130352.37), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=1708, avg=426.15, ltp=2040.78, unrealized=-2757785.79, today_pnl=-2757785.79), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=931, avg=756.68, ltp=335.84, unrealized=-391798.29, today_pnl=-391798.29)], 'updated_at': datetime.datetime(2025, 8, 21, 17, 35, 23, 226721, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))), 'trading_day': '2025-08-21'}", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:35:23.248434+05:30", "timestamp": 1755777923.248434}}}
{"text": "2025-08-21 17:35:23.250 | INFO     | app.services.dhan_client:get_pnl:587 - P&L calculation completed successfully: 5 symbols, unrealized=‚Çπ-4100161.89\n", "record": {"elapsed": {"repr": "0:00:48.477925", "seconds": 48.477925}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 587, "message": "P&L calculation completed successfully: 5 symbols, unrealized=‚Çπ-4100161.89", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:35:23.250879+05:30", "timestamp": 1755777923.250879}}}
{"text": "2025-08-21 17:35:23.253 | DEBUG    | app.ws.live:emit_delta:408 - Emitted pnl delta: seq=55\n", "record": {"elapsed": {"repr": "0:00:48.480125", "seconds": 48.480125}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "emit_delta", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 408, "message": "Emitted pnl delta: seq=55", "module": "live", "name": "app.ws.live", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:35:23.253079+05:30", "timestamp": 1755777923.253079}}}
{"text": "2025-08-21 17:35:23.255 | DEBUG    | app.ws.live:emit_delta:408 - Emitted positions delta: seq=56\n", "record": {"elapsed": {"repr": "0:00:48.482897", "seconds": 48.482897}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "emit_delta", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 408, "message": "Emitted positions delta: seq=56", "module": "live", "name": "app.ws.live", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:35:23.255851+05:30", "timestamp": 1755777923.255851}}}
{"text": "2025-08-21 17:35:25.181 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:50.408098", "seconds": 50.408098}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 22636, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 17:35:25.181052+05:30", "timestamp": 1755777925.181052}}}
{"text": "2025-08-21 17:35:25.182 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:50.409235", "seconds": 50.409235}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 22636, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 17:35:25.182189+05:30", "timestamp": 1755777925.182189}}}
{"text": "2025-08-21 17:35:25.183 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:50.410224", "seconds": 50.410224}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 22636, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 17:35:25.183178+05:30", "timestamp": 1755777925.183178}}}
{"text": "2025-08-21 17:35:25.184 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:50.411214", "seconds": 50.411214}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 22636, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 17:35:25.184168+05:30", "timestamp": 1755777925.184168}}}
{"text": "2025-08-21 17:35:25.185 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:50.412186", "seconds": 50.412186}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 22636, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 17:35:25.185140+05:30", "timestamp": 1755777925.18514}}}
{"text": "2025-08-21 17:35:25.186 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:50.413225", "seconds": 50.413225}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 22636, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 17:35:25.186179+05:30", "timestamp": 1755777925.186179}}}
{"text": "2025-08-21 17:35:25.186 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:50.413976", "seconds": 50.413976}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 22636, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 17:35:25.186930+05:30", "timestamp": 1755777925.18693}}}
{"text": "2025-08-21 17:35:25.187 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:50.415036", "seconds": 50.415036}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 22636, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 17:35:25.187990+05:30", "timestamp": 1755777925.18799}}}
{"text": "2025-08-21 17:35:25.188 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:50.415888", "seconds": 50.415888}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 22636, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 17:35:25.188842+05:30", "timestamp": 1755777925.188842}}}
{"text": "2025-08-21 17:35:25.190 | DEBUG    | app.services.dhan_client:_on_pnl_update_triggered:200 - PnL update triggered - will recalculate on next fetch\n", "record": {"elapsed": {"repr": "0:00:50.417157", "seconds": 50.417157}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_on_pnl_update_triggered", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 200, "message": "PnL update triggered - will recalculate on next fetch", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 22636, "name": "Thread-1 (update_ltp)"}, "time": {"repr": "2025-08-21 17:35:25.190111+05:30", "timestamp": 1755777925.190111}}}
{"text": "2025-08-21 17:35:25.205 | INFO     | app.services.dhan_client:get_pnl:489 - Starting accurate P&L calculation\n", "record": {"elapsed": {"repr": "0:00:50.432909", "seconds": 50.432909}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 489, "message": "Starting accurate P&L calculation", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:35:25.205863+05:30", "timestamp": 1755777925.205863}}}
{"text": "2025-08-21 17:35:25.206 | INFO     | app.services.dhan_client:get_pnl:491 - Fetched 5 positions\n", "record": {"elapsed": {"repr": "0:00:50.433937", "seconds": 50.433937}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 491, "message": "Fetched 5 positions", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:35:25.206891+05:30", "timestamp": 1755777925.206891}}}
{"text": "2025-08-21 17:35:25.208 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for RELIANCE: unrealized=-1298190.63, today=-1298190.63\n", "record": {"elapsed": {"repr": "0:00:50.435099", "seconds": 50.435099}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for RELIANCE: unrealized=-1298190.63, today=-1298190.63", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:35:25.208053+05:30", "timestamp": 1755777925.208053}}}
{"text": "2025-08-21 17:35:25.209 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for TCS: unrealized=475426.19, today=475426.19\n", "record": {"elapsed": {"repr": "0:00:50.436093", "seconds": 50.436093}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for TCS: unrealized=475426.19, today=475426.19", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:35:25.209047+05:30", "timestamp": 1755777925.209047}}}
{"text": "2025-08-21 17:35:25.210 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for HDFC: unrealized=-129147.46, today=-129147.46\n", "record": {"elapsed": {"repr": "0:00:50.437440", "seconds": 50.43744}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for HDFC: unrealized=-129147.46, today=-129147.46", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:35:25.210394+05:30", "timestamp": 1755777925.210394}}}
{"text": "2025-08-21 17:35:25.211 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for INFY: unrealized=-2810774.65, today=-2810774.65\n", "record": {"elapsed": {"repr": "0:00:50.438519", "seconds": 50.438519}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for INFY: unrealized=-2810774.65, today=-2810774.65", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:35:25.211473+05:30", "timestamp": 1755777925.211473}}}
{"text": "2025-08-21 17:35:25.212 | DEBUG    | app.services.dhan_client:get_pnl:534 - Created PnL for ICICIBANK: unrealized=-389691.79, today=-389691.79\n", "record": {"elapsed": {"repr": "0:00:50.439500", "seconds": 50.4395}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 534, "message": "Created PnL for ICICIBANK: unrealized=-389691.79, today=-389691.79", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:35:25.212454+05:30", "timestamp": 1755777925.212454}}}
{"text": "2025-08-21 17:35:25.213 | INFO     | app.services.dhan_client:get_pnl:545 - Calculated totals - realized: 0.0, unrealized: -4152378.34, day: -4152378.34\n", "record": {"elapsed": {"repr": "0:00:50.440759", "seconds": 50.440759}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 545, "message": "Calculated totals - realized: 0.0, unrealized: -4152378.34, day: -4152378.34", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:35:25.213713+05:30", "timestamp": 1755777925.213713}}}
{"text": "2025-08-21 17:35:25.214 | DEBUG    | app.services.dhan_client:get_pnl:554 - PnL consistency check passed: drift=‚Çπ0.00\n", "record": {"elapsed": {"repr": "0:00:50.441854", "seconds": 50.441854}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 554, "message": "PnL consistency check passed: drift=‚Çπ0.00", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:35:25.214808+05:30", "timestamp": 1755777925.214808}}}
{"text": "2025-08-21 17:35:25.216 | DEBUG    | app.services.dhan_client:get_pnl:558 - Creating PnLTotals...\n", "record": {"elapsed": {"repr": "0:00:50.443067", "seconds": 50.443067}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 558, "message": "Creating PnLTotals...", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:35:25.216021+05:30", "timestamp": 1755777925.216021}}}
{"text": "2025-08-21 17:35:25.217 | DEBUG    | app.services.dhan_client:get_pnl:565 - PnLTotals created successfully\n", "record": {"elapsed": {"repr": "0:00:50.444525", "seconds": 50.444525}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 565, "message": "PnLTotals created successfully", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:35:25.217479+05:30", "timestamp": 1755777925.217479}}}
{"text": "2025-08-21 17:35:25.218 | DEBUG    | app.services.dhan_client:get_pnl:574 - Creating PnL model...\n", "record": {"elapsed": {"repr": "0:00:50.445682", "seconds": 50.445682}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 574, "message": "Creating PnL model...", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:35:25.218636+05:30", "timestamp": 1755777925.218636}}}
{"text": "2025-08-21 17:35:25.219 | DEBUG    | app.services.dhan_client:get_pnl:575 - Model fields: totals=<class 'app.models.schemas.PnLTotals'>, perSymbol=5, updated_at=2025-08-21 17:35:25.207906+05:30, trading_day=2025-08-21\n", "record": {"elapsed": {"repr": "0:00:50.446688", "seconds": 50.446688}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 575, "message": "Model fields: totals=<class 'app.models.schemas.PnLTotals'>, perSymbol=5, updated_at=2025-08-21 17:35:25.207906+05:30, trading_day=2025-08-21", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:35:25.219642+05:30", "timestamp": 1755777925.219642}}}
{"text": "2025-08-21 17:35:25.222 | DEBUG    | app.services.dhan_client:get_pnl:584 - Created PnL model: totals=PnLTotals(realized=0.0, unrealized=-4152378.34, day=-4152378.34, currency='INR') per_symbol=[PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=913, avg=1944.27, ltp=522.37, unrealized=-1298190.63, today_pnl=-1298190.63), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=457, avg=1390.48, ltp=350.16, unrealized=475426.19, today_pnl=475426.19), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=196, avg=1021.99, ltp=363.07, unrealized=-129147.46, today_pnl=-129147.46), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=1708, avg=426.15, ltp=2071.8, unrealized=-2810774.65, today_pnl=-2810774.65), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=931, avg=756.68, ltp=338.11, unrealized=-389691.79, today_pnl=-389691.79)] updated_at=datetime.datetime(2025, 8, 21, 17, 35, 25, 207906, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))) trading_day='2025-08-21'\n", "record": {"elapsed": {"repr": "0:00:50.449797", "seconds": 50.449797}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 584, "message": "Created PnL model: totals=PnLTotals(realized=0.0, unrealized=-4152378.34, day=-4152378.34, currency='INR') per_symbol=[PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=913, avg=1944.27, ltp=522.37, unrealized=-1298190.63, today_pnl=-1298190.63), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=457, avg=1390.48, ltp=350.16, unrealized=475426.19, today_pnl=475426.19), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=196, avg=1021.99, ltp=363.07, unrealized=-129147.46, today_pnl=-129147.46), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=1708, avg=426.15, ltp=2071.8, unrealized=-2810774.65, today_pnl=-2810774.65), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=931, avg=756.68, ltp=338.11, unrealized=-389691.79, today_pnl=-389691.79)] updated_at=datetime.datetime(2025, 8, 21, 17, 35, 25, 207906, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))) trading_day='2025-08-21'", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:35:25.222751+05:30", "timestamp": 1755777925.222751}}}
{"text": "2025-08-21 17:35:25.224 | DEBUG    | app.services.dhan_client:get_pnl:585 - PnL model fields: {'totals': PnLTotals(realized=0.0, unrealized=-4152378.34, day=-4152378.34, currency='INR'), 'per_symbol': [PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=913, avg=1944.27, ltp=522.37, unrealized=-1298190.63, today_pnl=-1298190.63), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=457, avg=1390.48, ltp=350.16, unrealized=475426.19, today_pnl=475426.19), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=196, avg=1021.99, ltp=363.07, unrealized=-129147.46, today_pnl=-129147.46), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=1708, avg=426.15, ltp=2071.8, unrealized=-2810774.65, today_pnl=-2810774.65), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=931, avg=756.68, ltp=338.11, unrealized=-389691.79, today_pnl=-389691.79)], 'updated_at': datetime.datetime(2025, 8, 21, 17, 35, 25, 207906, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))), 'trading_day': '2025-08-21'}\n", "record": {"elapsed": {"repr": "0:00:50.451755", "seconds": 50.451755}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 585, "message": "PnL model fields: {'totals': PnLTotals(realized=0.0, unrealized=-4152378.34, day=-4152378.34, currency='INR'), 'per_symbol': [PnLSymbol(symbol='RELIANCE', side=<Side.LONG: 'LONG'>, qty=913, avg=1944.27, ltp=522.37, unrealized=-1298190.63, today_pnl=-1298190.63), PnLSymbol(symbol='TCS', side=<Side.SHORT: 'SHORT'>, qty=457, avg=1390.48, ltp=350.16, unrealized=475426.19, today_pnl=475426.19), PnLSymbol(symbol='HDFC', side=<Side.LONG: 'LONG'>, qty=196, avg=1021.99, ltp=363.07, unrealized=-129147.46, today_pnl=-129147.46), PnLSymbol(symbol='INFY', side=<Side.SHORT: 'SHORT'>, qty=1708, avg=426.15, ltp=2071.8, unrealized=-2810774.65, today_pnl=-2810774.65), PnLSymbol(symbol='ICICIBANK', side=<Side.LONG: 'LONG'>, qty=931, avg=756.68, ltp=338.11, unrealized=-389691.79, today_pnl=-389691.79)], 'updated_at': datetime.datetime(2025, 8, 21, 17, 35, 25, 207906, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))), 'trading_day': '2025-08-21'}", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:35:25.224709+05:30", "timestamp": 1755777925.224709}}}
{"text": "2025-08-21 17:35:25.226 | INFO     | app.services.dhan_client:get_pnl:587 - P&L calculation completed successfully: 5 symbols, unrealized=‚Çπ-4152378.34\n", "record": {"elapsed": {"repr": "0:00:50.453333", "seconds": 50.453333}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "get_pnl", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 587, "message": "P&L calculation completed successfully: 5 symbols, unrealized=‚Çπ-4152378.34", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:35:25.226287+05:30", "timestamp": 1755777925.226287}}}
{"text": "2025-08-21 17:35:25.227 | DEBUG    | app.ws.live:emit_delta:408 - Emitted pnl delta: seq=57\n", "record": {"elapsed": {"repr": "0:00:50.454949", "seconds": 50.454949}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "emit_delta", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 408, "message": "Emitted pnl delta: seq=57", "module": "live", "name": "app.ws.live", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:35:25.227903+05:30", "timestamp": 1755777925.227903}}}
{"text": "2025-08-21 17:35:25.229 | DEBUG    | app.ws.live:emit_delta:408 - Emitted positions delta: seq=58\n", "record": {"elapsed": {"repr": "0:00:50.456643", "seconds": 50.456643}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "emit_delta", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 408, "message": "Emitted positions delta: seq=58", "module": "live", "name": "app.ws.live", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:35:25.229597+05:30", "timestamp": 1755777925.229597}}}
{"text": "2025-08-21 17:35:25.522 | DEBUG    | app.ws.live:emit_delta:408 - Emitted holdings delta: seq=59\n", "record": {"elapsed": {"repr": "0:00:50.749992", "seconds": 50.749992}, "exception": null, "extra": {}, "file": {"name": "live.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\ws\\live.py"}, "function": "emit_delta", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 408, "message": "Emitted holdings delta: seq=59", "module": "live", "name": "app.ws.live", "process": {"id": 25572, "name": "MainProcess"}, "thread": {"id": 1672, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:35:25.522946+05:30", "timestamp": 1755777925.522946}}}
{"text": "2025-08-21 17:36:14.913 | INFO     | app.services.dhan_client:_initialize_mock_data:53 - Initializing mock data...\n", "record": {"elapsed": {"repr": "0:00:00.050095", "seconds": 0.050095}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_initialize_mock_data", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 53, "message": "Initializing mock data...", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 26908, "name": "MainProcess"}, "thread": {"id": 27620, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:36:14.913977+05:30", "timestamp": 1755777974.913977}}}
{"text": "2025-08-21 17:36:14.915 | INFO     | app.services.dhan_client:_initialize_mock_data:75 - Created mock holding for RELIANCE: qty=3627, avg_price=366.396199056042, ltp=324.6645690274062\n", "record": {"elapsed": {"repr": "0:00:00.051530", "seconds": 0.05153}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_initialize_mock_data", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 75, "message": "Created mock holding for RELIANCE: qty=3627, avg_price=366.396199056042, ltp=324.6645690274062", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 26908, "name": "MainProcess"}, "thread": {"id": 27620, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:36:14.915412+05:30", "timestamp": 1755777974.915412}}}
{"text": "2025-08-21 17:36:14.916 | INFO     | app.services.dhan_client:_initialize_mock_data:75 - Created mock holding for TCS: qty=720, avg_price=1550.4552625036695, ltp=1454.9905588083973\n", "record": {"elapsed": {"repr": "0:00:00.052603", "seconds": 0.052603}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_initialize_mock_data", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 75, "message": "Created mock holding for TCS: qty=720, avg_price=1550.4552625036695, ltp=1454.9905588083973", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 26908, "name": "MainProcess"}, "thread": {"id": 27620, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:36:14.916485+05:30", "timestamp": 1755777974.916485}}}
{"text": "2025-08-21 17:36:14.917 | INFO     | app.services.dhan_client:_initialize_mock_data:75 - Created mock holding for HDFC: qty=2987, avg_price=599.0151406141272, ltp=596.0391272893602\n", "record": {"elapsed": {"repr": "0:00:00.053487", "seconds": 0.053487}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_initialize_mock_data", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 75, "message": "Created mock holding for HDFC: qty=2987, avg_price=599.0151406141272, ltp=596.0391272893602", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 26908, "name": "MainProcess"}, "thread": {"id": 27620, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:36:14.917369+05:30", "timestamp": 1755777974.917369}}}
{"text": "2025-08-21 17:36:14.918 | INFO     | app.services.dhan_client:_initialize_mock_data:75 - Created mock holding for INFY: qty=4867, avg_price=1371.927909193999, ltp=1386.3373625147685\n", "record": {"elapsed": {"repr": "0:00:00.054401", "seconds": 0.054401}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_initialize_mock_data", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 75, "message": "Created mock holding for INFY: qty=4867, avg_price=1371.927909193999, ltp=1386.3373625147685", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 26908, "name": "MainProcess"}, "thread": {"id": 27620, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:36:14.918283+05:30", "timestamp": 1755777974.918283}}}
{"text": "2025-08-21 17:36:14.919 | INFO     | app.services.dhan_client:_initialize_mock_data:75 - Created mock holding for ICICIBANK: qty=3005, avg_price=1951.02431121272, ltp=2019.5896370469732\n", "record": {"elapsed": {"repr": "0:00:00.055584", "seconds": 0.055584}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_initialize_mock_data", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 75, "message": "Created mock holding for ICICIBANK: qty=3005, avg_price=1951.02431121272, ltp=2019.5896370469732", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 26908, "name": "MainProcess"}, "thread": {"id": 27620, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:36:14.919466+05:30", "timestamp": 1755777974.919466}}}
{"text": "2025-08-21 17:36:14.920 | INFO     | app.services.dhan_client:_initialize_mock_data:75 - Created mock holding for HINDUNILVR: qty=2377, avg_price=1758.161926891997, ltp=1777.1502902197583\n", "record": {"elapsed": {"repr": "0:00:00.056606", "seconds": 0.056606}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_initialize_mock_data", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 75, "message": "Created mock holding for HINDUNILVR: qty=2377, avg_price=1758.161926891997, ltp=1777.1502902197583", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 26908, "name": "MainProcess"}, "thread": {"id": 27620, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:36:14.920488+05:30", "timestamp": 1755777974.920488}}}
{"text": "2025-08-21 17:36:14.921 | INFO     | app.services.dhan_client:_initialize_mock_data:75 - Created mock holding for ITC: qty=2965, avg_price=1281.8292274435835, ltp=1116.2349468858565\n", "record": {"elapsed": {"repr": "0:00:00.057559", "seconds": 0.057559}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_initialize_mock_data", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 75, "message": "Created mock holding for ITC: qty=2965, avg_price=1281.8292274435835, ltp=1116.2349468858565", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 26908, "name": "MainProcess"}, "thread": {"id": 27620, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:36:14.921441+05:30", "timestamp": 1755777974.921441}}}
{"text": "2025-08-21 17:36:14.922 | INFO     | app.services.dhan_client:_initialize_mock_data:75 - Created mock holding for SBIN: qty=4035, avg_price=174.2053051255694, ltp=155.7526833189892\n", "record": {"elapsed": {"repr": "0:00:00.058348", "seconds": 0.058348}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_initialize_mock_data", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 75, "message": "Created mock holding for SBIN: qty=4035, avg_price=174.2053051255694, ltp=155.7526833189892", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 26908, "name": "MainProcess"}, "thread": {"id": 27620, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:36:14.922230+05:30", "timestamp": 1755777974.92223}}}
{"text": "2025-08-21 17:36:14.923 | INFO     | app.services.dhan_client:_initialize_mock_data:75 - Created mock holding for BHARTIARTL: qty=2754, avg_price=1643.6587846366758, ltp=1485.4316299973523\n", "record": {"elapsed": {"repr": "0:00:00.059212", "seconds": 0.059212}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_initialize_mock_data", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 75, "message": "Created mock holding for BHARTIARTL: qty=2754, avg_price=1643.6587846366758, ltp=1485.4316299973523", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 26908, "name": "MainProcess"}, "thread": {"id": 27620, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:36:14.923094+05:30", "timestamp": 1755777974.923094}}}
{"text": "2025-08-21 17:36:14.923 | INFO     | app.services.dhan_client:_initialize_mock_data:75 - Created mock holding for KOTAKBANK: qty=1214, avg_price=1128.997834906082, ltp=1027.235747719454\n", "record": {"elapsed": {"repr": "0:00:00.060109", "seconds": 0.060109}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_initialize_mock_data", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 75, "message": "Created mock holding for KOTAKBANK: qty=1214, avg_price=1128.997834906082, ltp=1027.235747719454", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 26908, "name": "MainProcess"}, "thread": {"id": 27620, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:36:14.923991+05:30", "timestamp": 1755777974.923991}}}
{"text": "2025-08-21 17:36:14.924 | INFO     | app.services.dhan_client:_initialize_mock_data:77 - Created 10 mock holdings\n", "record": {"elapsed": {"repr": "0:00:00.060750", "seconds": 0.06075}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_initialize_mock_data", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 77, "message": "Created 10 mock holdings", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 26908, "name": "MainProcess"}, "thread": {"id": 27620, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:36:14.924632+05:30", "timestamp": 1755777974.924632}}}
{"text": "2025-08-21 17:36:14.925 | INFO     | app.services.dhan_client:_initialize_mock_data:91 - Created mock position for RELIANCE: id=pos_001, qty=861, avg_price=358.88\n", "record": {"elapsed": {"repr": "0:00:00.061872", "seconds": 0.061872}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_initialize_mock_data", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 91, "message": "Created mock position for RELIANCE: id=pos_001, qty=861, avg_price=358.88", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 26908, "name": "MainProcess"}, "thread": {"id": 27620, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:36:14.925754+05:30", "timestamp": 1755777974.925754}}}
{"text": "2025-08-21 17:36:14.926 | INFO     | app.services.dhan_client:_initialize_mock_data:91 - Created mock position for TCS: id=pos_002, qty=634, avg_price=1485.75\n", "record": {"elapsed": {"repr": "0:00:00.062764", "seconds": 0.062764}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_initialize_mock_data", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 91, "message": "Created mock position for TCS: id=pos_002, qty=634, avg_price=1485.75", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 26908, "name": "MainProcess"}, "thread": {"id": 27620, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:36:14.926646+05:30", "timestamp": 1755777974.926646}}}
{"text": "2025-08-21 17:36:14.927 | INFO     | app.services.dhan_client:_initialize_mock_data:91 - Created mock position for HDFC: id=pos_003, qty=1700, avg_price=408.36\n", "record": {"elapsed": {"repr": "0:00:00.063530", "seconds": 0.06353}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_initialize_mock_data", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 91, "message": "Created mock position for HDFC: id=pos_003, qty=1700, avg_price=408.36", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 26908, "name": "MainProcess"}, "thread": {"id": 27620, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:36:14.927412+05:30", "timestamp": 1755777974.927412}}}
{"text": "2025-08-21 17:36:14.928 | INFO     | app.services.dhan_client:_initialize_mock_data:91 - Created mock position for INFY: id=pos_004, qty=150, avg_price=724.29\n", "record": {"elapsed": {"repr": "0:00:00.064315", "seconds": 0.064315}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_initialize_mock_data", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 91, "message": "Created mock position for INFY: id=pos_004, qty=150, avg_price=724.29", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 26908, "name": "MainProcess"}, "thread": {"id": 27620, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:36:14.928197+05:30", "timestamp": 1755777974.928197}}}
{"text": "2025-08-21 17:36:14.928 | INFO     | app.services.dhan_client:_initialize_mock_data:91 - Created mock position for ICICIBANK: id=pos_005, qty=1165, avg_price=591.9\n", "record": {"elapsed": {"repr": "0:00:00.065084", "seconds": 0.065084}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_initialize_mock_data", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 91, "message": "Created mock position for ICICIBANK: id=pos_005, qty=1165, avg_price=591.9", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 26908, "name": "MainProcess"}, "thread": {"id": 27620, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:36:14.928966+05:30", "timestamp": 1755777974.928966}}}
{"text": "2025-08-21 17:36:14.929 | INFO     | app.services.dhan_client:_initialize_mock_data:93 - Created 5 mock positions\n", "record": {"elapsed": {"repr": "0:00:00.065804", "seconds": 0.065804}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_initialize_mock_data", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 93, "message": "Created 5 mock positions", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 26908, "name": "MainProcess"}, "thread": {"id": 27620, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:36:14.929686+05:30", "timestamp": 1755777974.929686}}}
{"text": "2025-08-21 17:36:14.931 | INFO     | app.services.dhan_client:_initialize_mock_data:111 - Created 10 mock orders\n", "record": {"elapsed": {"repr": "0:00:00.067366", "seconds": 0.067366}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_initialize_mock_data", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 111, "message": "Created 10 mock orders", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 26908, "name": "MainProcess"}, "thread": {"id": 27620, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:36:14.931248+05:30", "timestamp": 1755777974.931248}}}
{"text": "2025-08-21 17:36:14.932 | INFO     | app.services.dhan_client:_initialize_mock_data:127 - Created 20 mock trades\n", "record": {"elapsed": {"repr": "0:00:00.068899", "seconds": 0.068899}, "exception": null, "extra": {}, "file": {"name": "dhan_client.py", "path": "C:\\Users\\hp\\Desktop\\Dhan Automation\\backend\\app\\services\\dhan_client.py"}, "function": "_initialize_mock_data", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 127, "message": "Created 20 mock trades", "module": "dhan_client", "name": "app.services.dhan_client", "process": {"id": 26908, "name": "MainProcess"}, "thread": {"id": 27620, "name": "MainThread"}, "time": {"repr": "2025-08-21 17:36:14.932781+05:30", "timestamp": 1755777974.932781}}}
